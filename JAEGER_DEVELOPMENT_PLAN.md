# –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Jaeger

## –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. **JaegerEmulationEngine** (`src/core/JaegerEmulationEngine.ts`):
   - ‚úÖ –ü—Ä–∏–µ–º spans –æ—Ç DataFlowEngine
   - ‚úÖ Sampling –º–µ—Ö–∞–Ω–∏–∑–º—ã (probabilistic, rate limiting, per-operation)
   - ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ traces –≤ –ø–∞–º—è—Ç–∏ —Å TTL
   - ‚úÖ Query Service —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
   - ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
   - ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ Jaeger (spansReceivedTotal, spansDroppedTotal, etc.)

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DataFlowEngine**:
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è spans –∏–∑ DataMessage
   - ‚úÖ Trace context propagation
   - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ spans –≤–æ –≤—Å–µ Jaeger engines

3. **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** (`src/components/config/observability/JaegerConfigAdvanced.tsx`):
   - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ traces –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
   - ‚úÖ –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (serverUrl)

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

1. **–ù–µ—Ç –ø—Ä–∞–≤–∏–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (Connection Rules)**:
   - ‚ùå –ù–µ—Ç `createJaegerRule` –≤ `src/services/connection/rules/`
   - ‚ùå –ù–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ `src/services/connection/rules/index.ts`
   - ‚ùå –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –º–æ–≥—É—Ç —è–≤–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ Jaeger Agent/Collector

2. **–ù–µ–ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ UI**:
   - ‚ùå –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ Agent endpoint (6831)
   - ‚ùå –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ Collector endpoint (14268)
   - ‚ùå –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ Query endpoint (16686)
   - ‚ùå –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ Sampling (type, param)
   - ‚ùå –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ Storage backend
   - ‚ùå –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ TTL –∏ maxTraces

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ useEmulationStore**:
   - ‚ùå Jaeger –Ω–µ –ø—É–±–ª–∏–∫—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ ComponentMetrics
   - ‚ùå –ù–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ Jaeger –≤ MetricsDashboard
   - ‚ùå –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –Ω–∞ canvas overlay

4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è traces**:
   - ‚ùå –ù–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ trace tree (–∏–µ—Ä–∞—Ä—Ö–∏—è spans)
   - ‚ùå –ù–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ span (tags, logs, duration)
   - ‚ùå –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ traces –≤ UI
   - ‚ùå –ù–µ—Ç –ø–æ–∏—Å–∫–∞ –ø–æ trace ID

5. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Jaeger**:
   - ‚ùå –ù–µ—Ç —Å–∏–º—É–ª—è—Ü–∏–∏ Agent –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - ‚ùå –ù–µ—Ç —Å–∏–º—É–ª—è—Ü–∏–∏ Collector –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å OpenTelemetry Collector —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - ‚ùå –ù–µ—Ç —Å–∏–º—É–ª—è—Ü–∏–∏ storage backend (Elasticsearch, Cassandra)

6. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ observability –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏**:
   - ‚ùå –ù–µ—Ç —Å–≤—è–∑–∏ —Å Grafana (Jaeger datasource)
   - ‚ùå –ù–µ—Ç —Å–≤—è–∑–∏ —Å Prometheus (–º–µ—Ç—Ä–∏–∫–∏ Jaeger)
   - ‚ùå –ù–µ—Ç —Å–≤—è–∑–∏ —Å OpenTelemetry Collector

---

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ü—Ä–∞–≤–∏–ª–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (Connection Rules) üî¥ –ö–†–ò–¢–ò–ß–ù–û ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–¶–µ–ª—å**: –ü–æ–∑–≤–æ–ª–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º —è–≤–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ Jaeger –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ spans

**–ó–∞–¥–∞—á–∏**:
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `src/services/connection/rules/jaegerRules.ts`:
   - ‚úÖ –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è `* -> jaeger` (–ª—é–±–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å spans –≤ Jaeger)
   - ‚úÖ –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è `otel-collector -> jaeger` (OpenTelemetry Collector –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Jaeger)
   - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
   - ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ metadata (endpoint, port)

2. ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ –≤ `src/services/connection/rules/index.ts`:
   - ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `createJaegerRule`
   - ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤ –º–∞—Å—Å–∏–≤ –ø—Ä–∞–≤–∏–ª

3. ‚ö†Ô∏è –û–±–Ω–æ–≤–∏—Ç—å `ServiceDiscovery.ts`:
   - ‚ö†Ô∏è –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—Ä—Ç—ã Jaeger –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã:
     - Agent: 6831 (UDP), 6832 (UDP), 14250 (gRPC)
     - Collector: 14268 (HTTP), 14250 (gRPC)
     - Query: 16686 (HTTP), 16685 (gRPC)
   - –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ü–æ—Ä—Ç—ã –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø–æ—Ä—Ç 16686 —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- `src/services/connection/rules/lokiRules.ts` - –ø—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è observability –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- `src/services/connection/rules/prometheusRules.ts` - –ø—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è observability –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- `src/services/connection/ServiceDiscovery.ts` - –ø–æ—Ä—Ç—ã –∏ —Ö–æ—Å—Ç—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –î–û–°–¢–ò–ì–ù–£–¢–û
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å Jaeger
- ‚úÖ –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è endpoints
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### –≠—Ç–∞–ø 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ UI üî¥ –ö–†–ò–¢–ò–ß–ù–û ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Jaeger –≤ UI

**–ó–∞–¥–∞—á–∏**:
1. ‚úÖ –†–∞—Å—à–∏—Ä–∏—Ç—å Settings tab –≤ `JaegerConfigAdvanced.tsx`:
   - ‚úÖ **Endpoints —Å–µ–∫—Ü–∏—è**:
     - ‚úÖ Agent endpoint (UDP/gRPC) - –ø–æ—Ä—Ç 6831/14250
     - ‚úÖ Collector endpoint (HTTP/gRPC) - –ø–æ—Ä—Ç 14268/14250
     - ‚úÖ Query endpoint (HTTP/gRPC) - –ø–æ—Ä—Ç 16686/16685
     - ‚úÖ Server URL (–¥–ª—è UI) - –ø–æ—Ä—Ç 16686
   
   - ‚úÖ **Sampling —Å–µ–∫—Ü–∏—è**:
     - ‚úÖ –¢–∏–ø sampling (probabilistic, rate limiting, per-operation)
     - ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä sampling (probability –∏–ª–∏ rate limit)
     - ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ sampling rate
   
   - ‚úÖ **Storage —Å–µ–∫—Ü–∏—è**:
     - ‚úÖ Backend type (elasticsearch, cassandra, kafka, memory)
     - ‚úÖ Storage URL (–¥–ª—è Elasticsearch/Cassandra)
     - ‚úÖ Max traces (–ª–∏–º–∏—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è)
     - ‚úÖ Trace TTL (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ traces)
   
   - ‚úÖ **Metrics —Å–µ–∫—Ü–∏—è**:
     - ‚úÖ Enable metrics export
     - ‚úÖ Metrics backend (prometheus, statsd)
     - ‚úÖ Metrics URL
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ Metrics —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Ä–µ–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ–ª–µ–π:
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ (probability 0-1, rate limit > 0)
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (TTL >= 1000ms, maxTraces > 0)

3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `updateConfig` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- `src/components/config/observability/PrometheusConfigAdvanced.tsx` - –ø—Ä–∏–º–µ—Ä —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `src/components/config/observability/GrafanaConfigAdvanced.tsx` - –ø—Ä–∏–º–µ—Ä —Å–ª–æ–∂–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `src/core/JaegerEmulationEngine.ts` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `JaegerEmulationConfig`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –î–û–°–¢–ò–ì–ù–£–¢–û
- ‚úÖ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Jaeger –¥–æ—Å—Ç—É–ø–Ω—ã –≤ UI
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ engine
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

---

### –≠—Ç–∞–ø 3: –ú–µ—Ç—Ä–∏–∫–∏ –≤ useEmulationStore üü° –í–ê–ñ–ù–û ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–¶–µ–ª—å**: –ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ Jaeger –≤ ComponentMetrics –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –¥–∞—à–±–æ—Ä–¥–∞—Ö

**–ó–∞–¥–∞—á–∏**:
1. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `EmulationEngine.ts`:
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `simulateJaeger()` –¥–ª—è Jaeger –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - ‚úÖ –ú–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `updateComponentMetrics()` –¥–ª—è —Ç–∏–ø–∞ 'jaeger'
   - ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –≤ `ComponentMetrics`:
     - ‚úÖ `throughput` = spansPerSecond –∏–∑ `calculateLoad()`
     - ‚úÖ `latency` = queryLatency –∏–∑ `calculateLoad()`
     - ‚úÖ `errorRate` = errorRate –∏–∑ `calculateLoad()`
     - ‚úÖ `utilization` = storageUtilization –∏–∑ `calculateLoad()`
     - ‚úÖ `customMetrics` = –¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ Jaeger (spansReceivedTotal, tracesStoredTotal, etc.)

2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `JaegerEmulationEngine.calculateLoad()`:
   - ‚úÖ –£–ª—É—á—à–µ–Ω —Ä–∞—Å—á–µ—Ç per-second –º–µ—Ç—Ä–∏–∫ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –º–µ—Ç—Ä–∏–∫ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏)
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è –º–µ—Ç—Ä–∏–∫ (`metricsHistory`) –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö per-second –∑–Ω–∞—á–µ–Ω–∏–π
   - ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π (—Å—Ç–∞—Ä—à–µ 60 —Å–µ–∫—É–Ω–¥)

3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `JaegerConfigAdvanced.tsx`:
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "Metrics" —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –º–µ—Ç—Ä–∏–∫ –∏–∑ `useEmulationStore`
   - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ spansPerSecond, tracesPerSecond, samplingRate, storageUtilization
   - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ (spans received, dropped, traces stored, query latency)

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- `src/core/EmulationEngine.ts` - –º–µ—Ç–æ–¥ `calculateComponentMetrics()`
- `src/core/PrometheusEmulationEngine.ts` - –ø—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫
- `src/components/config/observability/PrometheusConfigAdvanced.tsx` - –ø—Ä–∏–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –î–û–°–¢–ò–ì–ù–£–¢–û
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ Jaeger –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ MetricsDashboard (—á–µ—Ä–µ–∑ ComponentMetrics)
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ canvas overlay (—á–µ—Ä–µ–∑ ComponentMetrics)
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–∫–∞–∂–¥—ã–µ 100ms —á–µ—Ä–µ–∑ simulate())

---

### –≠—Ç–∞–ø 4: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è Trace Tree üü° –í–ê–ñ–ù–û ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –∏–µ—Ä–∞—Ä—Ö–∏–∏ spans –≤ trace

**–ó–∞–¥–∞—á–∏**:
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `TraceTreeViewer.tsx`:
   - ‚úÖ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `JaegerTrace` –∫–∞–∫ prop
   - ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏—é spans (parent-child –æ—Ç–Ω–æ—à–µ–Ω–∏—è)
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç duration –∫–∞–∂–¥–æ–≥–æ span
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç service –∏ operation name
   - ‚úÖ –í—ã–¥–µ–ª—è–µ—Ç spans —Å –æ—à–∏–±–∫–∞–º–∏
   - ‚úÖ –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å/—Å–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å —É–∑–ª—ã
   - ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è timeline –¥–ª—è –≤—Å–µ–≥–æ trace –∏ –∫–∞–∂–¥–æ–≥–æ span
   - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ offset –∏ width –∫–∞–∂–¥–æ–≥–æ span –Ω–∞ timeline

2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `JaegerConfigAdvanced.tsx`:
   - ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "View Trace" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ trace –≤ —Å–ø–∏—Å–∫–µ
   - ‚úÖ –û—Ç–∫—Ä—ã–≤–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å `TraceTreeViewer`
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ span –ø—Ä–∏ –∫–ª–∏–∫–µ

3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä span:
   - ‚úÖ Tags (–≤—Å–µ —Ç–µ–≥–∏ span)
   - ‚úÖ Logs (–≤—Å–µ –ª–æ–≥–∏ span)
   - ‚úÖ Duration breakdown
   - ‚úÖ Service –∏ operation info
   - ‚úÖ Parent/child relationships
   - ‚úÖ Span ID, Trace ID, Start Time

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- `src/components/config/observability/GrafanaDashboardViewer.tsx` - –ø—Ä–∏–º–µ—Ä –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- `src/components/ui/tree.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –¥–µ—Ä–µ–≤–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–µ—Ä–µ–≤—å–µ–≤ (react-tree-graph, react-d3-tree)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –î–û–°–¢–ò–ì–ù–£–¢–û
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é spans –≤ trace
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ –∏–∑—É—á–∏—Ç—å –∫–∞–∂–¥—ã–π span
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å flow –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ Timeline –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É spans

---

### –≠—Ç–∞–ø 5: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ traces üü¢ –£–õ–£–ß–®–ï–ù–ò–ï ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞ traces

**–ó–∞–¥–∞—á–∏**:
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –≤ `JaegerConfigAdvanced.tsx`:
   - ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ service (dropdown) - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö services
   - ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ operation (dropdown) - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö operations
   - ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (success/error/all)
   - ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (last hour, last 24 hours, last 7 days, all time)
   - ‚úÖ –ü–æ–∏—Å–∫ –ø–æ trace ID, service, –∏–ª–∏ operation (—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫)

2. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `JaegerEmulationEngine.queryTraces()`:
   - ‚úÖ –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
   - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–∞
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö traces (filtered vs total)

3. ‚ö†Ô∏è –ü–∞–≥–∏–Ω–∞—Ü–∏—è:
   - ‚ö†Ô∏è –õ–∏–º–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (20, 50, 100) - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ)
   - ‚ö†Ô∏è –ö–Ω–æ–ø–∫–∏ "Load More" –∏–ª–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ)
   - –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ traces, —á—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- `src/core/JaegerEmulationEngine.ts` - –º–µ—Ç–æ–¥ `queryTraces()`
- `src/components/config/observability/GrafanaConfigAdvanced.tsx` - –ø—Ä–∏–º–µ—Ä —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –î–û–°–¢–ò–ì–ù–£–¢–û
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å traces –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–∫–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π trace –ø–æ ID, service, –∏–ª–∏ operation
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –ø–æ–¥—Å—á–µ—Ç–æ–º (filtered/total)
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (AND –ª–æ–≥–∏–∫–∞)
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ö–∞—Ä–¥–∫–æ–¥–∞ - –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

### –≠—Ç–∞–ø 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenTelemetry Collector üü¢ –£–õ–£–ß–®–ï–ù–ò–ï ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–¶–µ–ª—å**: –ü–æ–∑–≤–æ–ª–∏—Ç—å OpenTelemetry Collector —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å traces –≤ Jaeger

**–ó–∞–¥–∞—á–∏**:
1. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `OpenTelemetryCollectorRoutingEngine.ts`:
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω callback –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Jaeger engines —á–µ—Ä–µ–∑ `EmulationEngine`
   - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `exportToJaeger()` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ spans –≤ Jaeger
   - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è OTLP traces –≤ Jaeger spans (`convertOTLPToJaeger()`)
   - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è OTLP span –≤ Jaeger span (`convertOTLPSpanToJaeger()`)
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ OTLP ResourceSpans, —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –∏ –æ–¥–∏–Ω–æ—á–Ω—ã—Ö spans
   - ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è OTLP Attributes ‚Üí Jaeger Tags
   - ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è OTLP Events ‚Üí Jaeger Logs
   - ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è OTLP Links ‚Üí Jaeger References
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ byte arrays (traceId, spanId) —Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π –≤ hex —Å—Ç—Ä–æ–∫–∏

2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
   - ‚úÖ –í `jaegerRules.ts` –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è `otel-collector -> jaeger`
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Jaeger exporter –≤ OpenTelemetry Collector –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ Jaeger exporter –≤ traces pipeline
   - ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ Jaeger endpoint –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (collectorEndpoint, agentEndpoint, –∏–ª–∏ metadata)

3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `EmulationEngine.ts`:
   - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ callback –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Jaeger engines –≤ `OpenTelemetryCollectorRoutingEngine`
   - ‚úÖ Callback —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- `src/core/OpenTelemetryCollectorRoutingEngine.ts` - —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `src/core/JaegerEmulationEngine.ts` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã JaegerSpan –∏ JaegerTrace
- OpenTelemetry —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ Jaeger

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –î–û–°–¢–ò–ì–ù–£–¢–û
- ‚úÖ OpenTelemetry Collector –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å traces –≤ Jaeger
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (OTLP ‚Üí Jaeger)
- ‚úÖ Traces –∏–∑ OTLP –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Jaeger UI
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ö–∞—Ä–¥–∫–æ–¥–∞ - –≤—Å–µ endpoints –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –°–∏–º—É–ª—è—Ç–∏–≤–Ω–æ—Å—Ç—å - —Ä–µ–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤, –æ—Ç–ø—Ä–∞–≤–∫–∞ spans –≤ Jaeger engines

---

### –≠—Ç–∞–ø 7: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grafana üü¢ –£–õ–£–ß–®–ï–ù–ò–ï ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–¶–µ–ª—å**: –ü–æ–∑–≤–æ–ª–∏—Ç—å Grafana –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Jaeger –∫–∞–∫ datasource

**–ó–∞–¥–∞—á–∏**:
1. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `GrafanaEmulationEngine.ts`:
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Jaeger datasource type –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ `GrafanaDataSource`
   - ‚úÖ –¢–∏–ø —Ä–∞—Å—à–∏—Ä–µ–Ω: `'prometheus' | 'loki' | 'influxdb' | 'elasticsearch' | 'postgres' | 'mysql' | 'jaeger'`

2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `GrafanaConfigAdvanced.tsx`:
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω 'jaeger' –≤ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö datasource types –≤ UI
   - ‚úÖ –¢–∏–ø `DataSource` —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ 'jaeger'

3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `GrafanaRoutingEngine.ts`:
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `setJaegerQueryExecutor()` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ executor
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `routeJaegerQuery()` –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Jaeger
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `findJaegerNode()` –¥–ª—è –ø–æ–∏—Å–∫–∞ Jaeger node –ø–æ URL datasource
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω case 'jaeger' –≤ `routeQuery()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ Jaeger queries
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ query expression (JSON –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–π —Ñ–æ—Ä–º–∞—Ç service=name,operation=name)
   - ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ DataFlowEngine

4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `grafanaRules.ts`:
   - ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω—ã `targetTypes` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ 'jaeger'
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `updateSourceConfig()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Jaeger datasource
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ Jaeger Query endpoint (16686) –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `cleanupSourceConfig()` –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è Jaeger datasource –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `EmulationEngine.ts`:
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `createJaegerQueryExecutorForRouting()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è executor
   - ‚úÖ Executor –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `JaegerEmulationEngine.queryTraces()` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
   - ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç, –ø–æ–Ω—è—Ç–Ω—ã–π Grafana (Jaeger trace format)
   - ‚úÖ Executor —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `GrafanaRoutingEngine` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Grafana

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- `src/core/GrafanaEmulationEngine.ts` - —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `src/components/config/observability/GrafanaConfigAdvanced.tsx` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è datasources
- `src/core/JaegerEmulationEngine.ts` - –º–µ—Ç–æ–¥—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –î–û–°–¢–ò–ì–ù–£–¢–û
- ‚úÖ Grafana –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Jaeger –∫–∞–∫ datasource
- ‚úÖ Traces –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Grafana dashboards (—á–µ—Ä–µ–∑ query executor)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è Grafana -> Jaeger
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ö–∞—Ä–¥–∫–æ–¥–∞ - –≤—Å–µ endpoints –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –°–∏–º—É–ª—è—Ç–∏–≤–Ω–æ—Å—Ç—å - —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Jaeger —á–µ—Ä–µ–∑ `queryTraces()`, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤

---

### –≠—Ç–∞–ø 8: –°–∏–º—É–ª—è—Ü–∏—è Storage Backend üü¢ –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û

**–¶–µ–ª—å**: –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ storage backends (Elasticsearch, Cassandra)

**–ó–∞–¥–∞—á–∏**:
1. –û–±–Ω–æ–≤–∏—Ç—å `JaegerEmulationEngine.ts`:
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è storage backend
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å in-memory storage (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
   - –î–æ–±–∞–≤–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é Elasticsearch storage:
     - –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ Elasticsearch
     - –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å latency –∏ errors
     - –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é traces
   - –î–æ–±–∞–≤–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é Cassandra storage:
     - –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ Cassandra
     - –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å latency –∏ errors
     - –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å traces

2. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   - –ü—Ä–∏ –≤—ã–±–æ—Ä–µ Elasticsearch/Cassandra, –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å connection –∫ storage backend

3. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ storage:
   - Write latency
   - Read latency
   - Storage errors
   - Storage utilization

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- `src/core/ElasticsearchEmulationEngine.ts` - –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å Elasticsearch
- `src/core/CassandraRoutingEngine.ts` - –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å Cassandra
- –†–µ–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Jaeger storage

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- Jaeger –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Elasticsearch/Cassandra –∫–∞–∫ storage
- –°–∏–º—É–ª–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ storage backends
- –ú–µ—Ç—Ä–∏–∫–∏ storage –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ UI

---

## –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å):
1. ‚úÖ –≠—Ç–∞–ø 1: –ü—Ä–∞–≤–∏–ª–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è - **–í–´–ü–û–õ–ù–ï–ù–û**
2. ‚úÖ –≠—Ç–∞–ø 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ UI - **–í–´–ü–û–õ–ù–ï–ù–û**
3. ‚úÖ –≠—Ç–∞–ø 3: –ú–µ—Ç—Ä–∏–∫–∏ –≤ useEmulationStore - **–í–´–ü–û–õ–ù–ï–ù–û**

### –í–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö):
4. ‚úÖ –≠—Ç–∞–ø 4: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è Trace Tree - **–í–´–ü–û–õ–ù–ï–ù–û**
5. ‚úÖ –≠—Ç–∞–ø 5: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ traces - **–í–´–ü–û–õ–ù–ï–ù–û**

### –£–ª—É—á—à–µ–Ω–∏—è (–¥–µ–ª–∞—Ç—å –ø–æ –∂–µ–ª–∞–Ω–∏—é):
6. ‚úÖ –≠—Ç–∞–ø 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenTelemetry Collector
7. ‚úÖ –≠—Ç–∞–ø 7: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grafana
8. ‚úÖ –≠—Ç–∞–ø 8: –°–∏–º—É–ª—è—Ü–∏—è Storage Backend

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Jaeger –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏:

1. **Jaeger Agent**:
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç spans –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (UDP/gRPC)
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç sampling
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Collector

2. **Jaeger Collector**:
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç spans –æ—Ç Agent
   - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç spans
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ Storage

3. **Jaeger Query**:
   - –ß–∏—Ç–∞–µ—Ç traces –∏–∑ Storage
   - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è UI
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

4. **Storage Backend**:
   - Elasticsearch, Cassandra, Kafka, –∏–ª–∏ in-memory
   - –•—Ä–∞–Ω–∏—Ç traces –∏ spans

### –í —Å–∏–º—É–ª—è—Ü–∏–∏:

- **JaegerEmulationEngine** –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç Agent, Collector, Query –∏ Storage
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç spans —á–µ—Ä–µ–∑ DataFlowEngine (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- OpenTelemetry Collector –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- Storage —Å–∏–º—É–ª–∏—Ä—É–µ—Ç—Å—è in-memory (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –¥–æ Elasticsearch/Cassandra)

---

## –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- [ ] –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ - –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –ù–µ—Ç —Å–∫—Ä–∏–ø—Ç–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ - –¥–∞–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
- [ ] –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Jaeger
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] UI/UX –∏–Ω—Ç—É–∏—Ç–∏–≤–µ–Ω –∏ –ø–æ–Ω—è—Ç–µ–Ω
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–∞ (–Ω–µ—Ç –ª–∞–≥–æ–≤)

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Jaeger Documentation](https://www.jaegertracing.io/docs/)
- [OpenTracing Specification](https://opentracing.io/specification/)
- [OpenTelemetry Specification](https://opentelemetry.io/docs/specs/)
- [Jaeger Architecture](https://www.jaegertracing.io/docs/1.50/architecture/)

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –ù–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–ø–æ –∫–æ–¥ –∏–∑ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–Ω–∏–∫–∞–ª–µ–Ω
- –û–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Jaeger
- –°–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞–º –∏–∑ `.cursor/rules/context.mdc` –∏ `.cursor/rules/connectionsrules.mdc`

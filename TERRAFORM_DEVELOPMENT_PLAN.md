# –ü–ª–∞–Ω –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Terraform –¥–æ —É—Ä–æ–≤–Ω—è 10/10

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** Terraform (Terraform Cloud/Enterprise)  
**–¢–∏–ø:** DevOps / Infrastructure as Code (IaC)  
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (—Å–∏–º—É–ª—è—Ü–∏—è –µ—Å—Ç—å, UI –µ—Å—Ç—å, –Ω–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã)  
**–¶–µ–ª—å:** –î–æ–≤–µ—Å—Ç–∏ –¥–æ —É—Ä–æ–≤–Ω—è 10/10 –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, UI/UX –∏ —Å–∏–º—É–ª—è—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. **TerraformEmulationEngine** (`src/core/TerraformEmulationEngine.ts`)
   - –ë–∞–∑–æ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (Workspace, Run, State)
   - –°–∏–º—É–ª—è—Ü–∏—è lifecycle runs (pending ‚Üí planning ‚Üí planned/applying ‚Üí applied/errored)
   - State management (version, serial, resources)
   - VCS webhook simulation
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã runs
   - –ú–µ—Ç—Ä–∏–∫–∏ (workspacesTotal, runsTotal, runsSuccess, runsFailed, etc.)
   - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è workspaces, runs, states
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–º—É–ª—è—Ü–∏–∏ (–±–µ–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞)

2. **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** (`src/components/config/devops/TerraformConfigAdvanced.tsx`)
   - 4 –≤–∫–ª–∞–¥–∫–∏: Workspaces, Runs, State, Settings
   - –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è runs
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TerraformEmulationEngine
   - CRUD –¥–ª—è workspaces
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ runs —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ state versions

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DataFlowEngine**
   - Handler –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ webhook –∏ API –∑–∞–ø—Ä–æ—Å–æ–≤ (`createTerraformHandler()`)
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π: webhook, triggerRun, cancelRun, getRunStatus, getWorkspaceStatus, getMetrics
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ VCS webhooks

4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EmulationEngine**
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–≤–∏–∂–∫–∞ (`initializeTerraformEngine()`)
   - –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ –≤ —Ü–∏–∫–ª–µ —Å–∏–º—É–ª—è—Ü–∏–∏ (`simulateTerraform()`)
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

#### 0. –ö–†–ò–¢–ò–ß–ù–û: –û–±–æ—Å–æ–±–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ Terraform (–≥–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞)

**–°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:**
Terraform —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±–æ—Å–æ–±–ª–µ–Ω–Ω–æ - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç runs –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ç–∞–π–º–µ—Ä—É –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –æ—Ç –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –≠—Ç–æ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, –≥–¥–µ Terraform —è–≤–ª—è–µ—Ç—Å—è **–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º-–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–æ–º**, –∫–æ—Ç–æ—Ä—ã–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç—Ä–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:

1. **HCL –∫–æ–¥** - –±–µ–∑ –∫–æ–¥–∞ Terraform –Ω–µ –∑–Ω–∞–µ—Ç —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å
2. **–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã** - –±–µ–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Kubernetes/Docker/AWS) –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è  
3. **State backend** - –±–µ–∑ State (Vault/S3) –Ω–µ –º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå `triggerAutoRuns()` —Å–æ–∑–¥–∞–µ—Ç runs –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ç–∞–π–º–µ—Ä—É –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- ‚ùå `triggerVCSWebhooks()` —Å–∏–º—É–ª–∏—Ä—É–µ—Ç webhooks –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö push —Å–æ–±—ã—Ç–∏–π –æ—Ç VCS
- ‚ùå –ù–µ—Ç HCL –∫–æ–¥–∞ –Ω–∏–≥–¥–µ –≤ —Å–∏—Å—Ç–µ–º–µ - Terraform –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚ùå –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç VCS –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–¥–∞
- ‚ùå –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚ùå –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç State backend –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- Terraform —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∞ –Ω–µ –∫–∞–∫ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ, –∞ –Ω–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ HCL –∫–æ–¥–∞
- –ù–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã
- –°–∏–º—É–ª—è—Ü–∏—è –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é Terraform

**–†–µ—à–µ–Ω–∏–µ:** –°–º. –≠—Ç–∞–ø 6.5 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–æ—Å–æ–±–ª–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã Terraform

---

#### 1. –ö–†–ò–¢–ò–ß–ù–û: –°–∏–º—É–ª—è—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:

- ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û:** Terraform –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω—ã—Ö runs
  - ‚úÖ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ apply –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Kubernetes, Argo CD, etc.)
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ö–∞–Ω–∏–∑–º –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ runs –≤ –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ DataFlowEngine
  - ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å DataFlowEngine –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (`sendRunResults()`)

- ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û:** Terraform –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å VCS (GitLab CI, GitHub, etc.) - `checkVCSConnection()`
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ - `checkOutgoingConnections()`
  - ‚úÖ Graceful degradation –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–ª–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç)

- ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û:** Connection Rules –¥–ª—è Terraform
  - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
  - ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è VCS ‚Üí Terraform (GitLab CI, GitHub, Webhook)
  - ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è Terraform ‚Üí Kubernetes/Docker (notification destinations)
  - ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è Terraform ‚Üí Argo CD (notification destinations)
  - ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è Vault ‚Üí Terraform (secrets backend configuration)

#### 2. UI/UX –ø—Ä–æ–±–ª–µ–º—ã:

- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** –£–±—Ä–∞–Ω `window.confirm()` - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ inline confirmation (–∫–Ω–æ–ø–∫–∏ Confirm/Cancel)
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** –¢–∞–±—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã (flex-wrap, –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –ø—Ä–∏ —É–∑–∫–æ–º —ç–∫—Ä–∞–Ω–µ)
- –ù–µ—Ç inline —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è workspaces (–≤—Å–µ –ø–æ–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è –≤—Å–µ–≥–¥–∞, –Ω–µ—Ç —Ä–µ–∂–∏–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- –ù–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ run (–æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å –ª–æ–≥–∞–º–∏, –ø–ª–∞–Ω–æ–º, –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏)
- –ù–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ run progress –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ù–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è run history –¥–ª—è workspace
- –ù–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è workspace variables (CRUD –¥–ª—è variables)
- –ù–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è workspace tags
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ run notifications (–∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ run policies (approval workflows)
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ cost estimation (–µ—Å–ª–∏ –µ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å cloud providers)

#### 3. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ Terraform Cloud/Enterprise:

- **–û–¢–°–£–¢–°–¢–í–£–ï–¢:** Run Policies (approval workflows)
  - Manual approval –¥–ª—è applies
  - Policy sets (Sentinel/OPA)
  - Cost estimation policies

- **–û–¢–°–£–¢–°–¢–í–£–ï–¢:** Workspace Variables Management
  - CRUD –¥–ª—è Terraform variables
  - CRUD –¥–ª—è Environment variables
  - Sensitive variables (masking)
  - HCL variables

- **–û–¢–°–£–¢–°–¢–í–£–ï–¢:** Workspace Tags
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ tags
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ tags

- **–û–¢–°–£–¢–°–¢–í–£–ï–¢:** Run Notifications
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ destinations –¥–ª—è notifications (Slack, email, webhooks)
  - –£—Å–ª–æ–≤–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (on_success, on_failure, on_start)

- **–û–¢–°–£–¢–°–¢–í–£–ï–¢:** State Management —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π
  - State locking (—É–∂–µ –µ—Å—Ç—å enableStateLocking, –Ω–æ –Ω–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏)
  - State versioning (—É–∂–µ –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞)
  - State outputs (–µ—Å—Ç—å –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ, –Ω–æ –Ω–µ—Ç UI)
  - State lineage tracking

- **–û–¢–°–£–¢–°–¢–í–£–ï–¢:** VCS Integration —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è
  - OAuth token management
  - Branch protection
  - PR integration
  - Commit status updates

- **–û–¢–°–£–¢–°–¢–í–£–ï–¢:** Run Details —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ
  - Plan output (JSON)
  - Apply output (JSON)
  - Resource changes visualization
  - Cost estimation (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)

- **–û–¢–°–£–¢–°–¢–í–£–ï–¢:** Organization-level settings
  - Organization name (–µ—Å—Ç—å –≤ config, –Ω–æ –Ω–µ—Ç UI)
  - Team management
  - Workspace permissions

#### 4. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

- –•–∞—Ä–¥–∫–æ–¥ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (default workspace –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏)
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ workspace (–ø—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–º–µ–Ω–∏)
- –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ VCS connection status —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
- –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ù–µ—Ç fallback –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤

---

## üéØ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ò–∑—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Terraform Cloud/Enterprise –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã

#### 1.1 –ò–∑—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π Terraform Cloud/Enterprise

**–†–µ—Å—É—Ä—Å—ã:**
- https://developer.hashicorp.com/terraform/cloud-docs
- https://developer.hashicorp.com/terraform/enterprise
- https://developer.hashicorp.com/terraform/cloud-docs/api-docs/workspaces
- https://developer.hashicorp.com/terraform/cloud-docs/api-docs/run
- https://developer.hashicorp.com/terraform/cloud-docs/api-docs/state-versions
- https://developer.hashicorp.com/terraform/cloud-docs/api-docs/variables
- https://developer.hashicorp.com/terraform/cloud-docs/api-docs/notification-configurations

**–ß—Ç–æ –∏–∑—É—á–∏—Ç—å:**
- [ ] Workspaces API - –≤—Å–µ endpoints –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- [ ] Runs API - lifecycle, statuses, operations
- [ ] State Versions API - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, outputs, lineage
- [ ] Variables API - Terraform variables, Environment variables
- [ ] Notification Configurations API - destinations, conditions
- [ ] Run Policies API - approval workflows, Sentinel/OPA
- [ ] VCS Integration - OAuth, webhooks, branch protection
- [ ] Organization API - teams, permissions
- [ ] Cost Estimation API (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)

#### 1.2 –ò–∑—É—á–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º—ã —Å–∏–º—É–ª—è—Ü–∏–∏

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:**
- [ ] `src/core/EmulationEngine.ts` - –ø–æ–Ω—è—Ç—å –∫–∞–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –¥–≤–∏–∂–∫–∏
- [ ] `src/core/DataFlowEngine.ts` - –ø–æ–Ω—è—Ç—å –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] `src/services/connection/ServiceDiscovery.ts` - –ø–æ–Ω—è—Ç—å –∫–∞–∫ —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –∏–º–µ–Ω–∞/–ø–æ—Ä—Ç—ã
- [ ] `src/services/connection/rules/` - –∏–∑—É—á–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã Connection Rules
- [ ] `src/core/GitLabCIEmulationEngine.ts` - –∏–∑—É—á–∏—Ç—å –∫–∞–∫ GitLab CI –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] `src/core/ArgoCDEmulationEngine.ts` - –∏–∑—É—á–∏—Ç—å –∫–∞–∫ Argo CD –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:**
- [ ] –ö–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- [ ] –ö–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- [ ] –ö–∞–∫ Connection Rules –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç –∫–æ–Ω—Ñ–∏–≥–∏
- [ ] –ö–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç ServiceDiscovery –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ö–æ—Å—Ç–æ–≤/–ø–æ—Ä—Ç–æ–≤

#### 1.3 –ò–∑—É—á–∏—Ç—å –ø–æ—Ö–æ–∂–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:**
- [ ] GitLab CI - –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞–π–ø–ª–∞–π–Ω–æ–≤
- [ ] Argo CD - –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π
- [ ] Jenkins - –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–∏–ª–¥–æ–≤
- [ ] Vault - –∫–∞–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç secrets –¥—Ä—É–≥–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

**–ß—Ç–æ –∏–∑—É—á–∏—Ç—å:**
- [ ] –ü–∞—Ç—Ç–µ—Ä–Ω—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- [ ] –ü–∞—Ç—Ç–µ—Ä–Ω—ã Connection Rules
- [ ] –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å DataFlowEngine

---

### –≠—Ç–∞–ø 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

#### 2.1 –î–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω—ã—Ö runs ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ú–µ—Ç–æ–¥ `sendRunResults()` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ runs
- ‚úÖ –ú–µ—Ç–æ–¥ `setConnections()` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DataFlowEngine —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `dataFlowEngine.addMessage()`
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è runs (applied, errored, canceled, planned)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ state outputs –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```typescript
{
  operation: 'run_completed',
  runId: string,
  workspaceId: string,
  workspaceName: string,
  status: 'applied' | 'errored' | 'canceled',
  duration: number,
  resourceAdditions?: number,
  resourceChanges?: number,
  resourceDestructions?: number,
  hasChanges: boolean,
  stateVersion?: number,
  outputs?: Record<string, any>,
  error?: string,
  source: 'terraform'
}
```

**–ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:**
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ apply (status: 'applied')
- –ü–æ—Å–ª–µ –æ—à–∏–±–∫–∏ apply (status: 'errored')
- –ü–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã run (status: 'canceled')
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è plan-only run (status: 'planned')

**–ö—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:**
- –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ notification destinations
- –§–æ—Ä–º–∞—Ç: JSON

#### 2.2 –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ú–µ—Ç–æ–¥ `checkVCSConnection()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å VCS
- ‚úÖ –ú–µ—Ç–æ–¥ `checkOutgoingConnections()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ triggerRun() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è VCS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (graceful degradation)
- ‚úÖ Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ triggerVCSWebhooks() - –ø—Ä–æ–ø—É—Å–∫ –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –ï—Å–ª–∏ workspace –∏–º–µ–µ—Ç VCS repo, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å VCS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º
- –ï—Å–ª–∏ run –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ï—Å–ª–∏ workspace –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Vault –¥–ª—è secrets, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å Vault
- –ï—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–µ—Ç, –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é (graceful degradation)

#### 2.3 –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å DataFlowEngine –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`, `src/core/EmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ú–µ—Ç–æ–¥ `setNodeId()` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ node ID
- ‚úÖ –ú–µ—Ç–æ–¥ `setConnections()` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `dataFlowEngine.addMessage()` –≤ `sendRunResults()`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ (try-catch, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π)

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- ‚úÖ –í `EmulationEngine.initializeTerraformEngine()` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã nodeId –∏ connections
- ‚úÖ –í `EmulationEngine.updateNodesAndConnections()` –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è connections –¥–ª—è –≤—Å–µ—Ö Terraform engines
- ‚úÖ –í —Ü–∏–∫–ª–µ —Å–∏–º—É–ª—è—Ü–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `terraformEngine.performUpdate(now)`
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ DataFlowEngine (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª)

---

### –≠—Ç–∞–ø 3: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Connection Rules –¥–ª—è Terraform ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

#### 3.1 –°–æ–∑–¥–∞—Ç—å Connection Rules —Ñ–∞–π–ª ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/services/connection/rules/terraformRules.ts` ‚úÖ –°–û–ó–î–ê–ù

**–ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:**

1. ‚úÖ **VCS ‚Üí Terraform (GitLab CI, GitHub, Webhook ‚Üí Terraform)** - `createTerraformVCSRule()`
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç workspace.vcsRepo –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç VCS —Ç–∏–ø –ø–æ —Ç–∏–ø—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞
   - ‚úÖ –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π workspace –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - ‚úÖ Cleanup –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

2. ‚úÖ **Terraform ‚Üí Kubernetes/Docker** - `createTerraformKubernetesRule()`
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç notification destination –≤ Terraform workspace
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å–ª–æ–≤–∏–π –æ—Ç–ø—Ä–∞–≤–∫–∏ (on_success, on_failure)
   - ‚úÖ Cleanup –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

3. ‚úÖ **Terraform ‚Üí Argo CD** - `createTerraformArgoCDRule()`
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç notification destination –≤ Terraform workspace
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å–ª–æ–≤–∏–π –æ—Ç–ø—Ä–∞–≤–∫–∏ (on_success)
   - ‚úÖ Cleanup –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

4. ‚úÖ **Vault ‚Üí Terraform** - `createTerraformVaultRule()`
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Vault backend –≤ Terraform workspace
   - ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç vaultBackend.address –∏ vaultBackend.path
   - ‚úÖ Cleanup –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª:**
```typescript
export function createTerraformRule(discovery: ServiceDiscovery): ConnectionRule {
  return {
    sourceType: '*', // –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã
    targetTypes: ['terraform'],
    priority: 10,
    updateSourceConfig: (source, target, connection, metadata) => {
      // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
    },
    updateTargetConfig: (source, target, connection, metadata) => {
      // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Terraform
    },
  };
}
```

#### 3.2 –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/services/connection/rules/index.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö Terraform –ø—Ä–∞–≤–∏–ª
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ –º–∞—Å—Å–∏–≤ `initializeConnectionRules()`

#### 3.3 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Terraform –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/services/connection/rules/terraformRules.ts`

**–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è Terraform ‚Üí Target:**
- [x] ‚úÖ Terraform ‚Üí Kubernetes: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ notification destination - **–í–´–ü–û–õ–ù–ï–ù–û** (createTerraformKubernetesRule)
- [x] ‚úÖ Terraform ‚Üí Argo CD: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ notification destination - **–í–´–ü–û–õ–ù–ï–ù–û** (createTerraformArgoCDRule)
- [x] ‚úÖ Terraform ‚Üí Observability: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ notification destination - **–í–´–ü–û–õ–ù–ï–ù–û** (createTerraformObservabilityRule)

---

### –≠—Ç–∞–ø 4: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ TerraformEmulationEngine

#### 4.1 –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Run Policies ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `TerraformRunPolicy` —Å –ø–æ–ª—è–º–∏: id, name, type, enabled, conditions, description
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `RunPolicyCheckResult` –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏ policies
- ‚úÖ –ü–æ–ª–µ `runPolicies` –≤ `TerraformWorkspace`
- ‚úÖ –ü–æ–ª–µ `policyChecks` –≤ `TerraformRun` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ approval
- ‚úÖ –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ policies –ø–µ—Ä–µ–¥ apply (`checkRunPolicies()`)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ manual approval (–º–µ—Ç–æ–¥ `approveRun()`)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Sentinel/OPA policies (—Å–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏)
- ‚úÖ CRUD –º–µ—Ç–æ–¥—ã –¥–ª—è policies: `addRunPolicy()`, `updateRunPolicy()`, `deleteRunPolicy()`, `getRunPolicies()`
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ policies –≤ lifecycle runs (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ apply –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ approval)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```typescript
interface TerraformRunPolicy {
  id: string;
  name: string;
  type: 'manual_approval' | 'sentinel' | 'opa';
  enabled: boolean;
  conditions?: {
    onPlanOnly?: boolean;
    onApply?: boolean;
    resourceTypes?: string[];
  };
}
```

#### 4.2 –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Workspace Variables ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ CRUD –º–µ—Ç–æ–¥—ã –¥–ª—è variables
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Terraform variables (category: 'terraform')
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Environment variables (category: 'env')
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ sensitive variables (masking)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HCL variables
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å TerraformVariable —Å –ø–æ–ª—è–º–∏: id, key, value, category, sensitive, hcl, description
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–ª—é—á–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∫–æ–Ω—Ñ–∏–≥–æ–º —á–µ—Ä–µ–∑ syncWorkspaceToConfig()

**–ú–µ—Ç–æ–¥—ã:**
- ‚úÖ `addVariable(workspaceId, variable)` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ `updateVariable(workspaceId, variableKey, updates)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø–æ –∫–ª—é—á—É
- ‚úÖ `deleteVariable(workspaceId, variableKey)` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø–æ –∫–ª—é—á—É
- ‚úÖ `getVariables(workspaceId)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è workspace

#### 4.3 –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Workspace Tags ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ü–æ–ª–µ `tags` –≤ `TerraformWorkspace` (—É–∂–µ –±—ã–ª–æ)
- ‚úÖ –ú–µ—Ç–æ–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è tags
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ tags

**–ú–µ—Ç–æ–¥—ã:**
- ‚úÖ `addTag(workspaceId, tag)` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ tag —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ `removeTag(workspaceId, tag)` - —É–¥–∞–ª–µ–Ω–∏–µ tag
- ‚úÖ `getWorkspacesByTag(tag)` - –ø–æ–ª—É—á–µ–Ω–∏–µ workspaces –ø–æ tag
- ‚úÖ `getAllTags()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö tags –∏–∑ –≤—Å–µ—Ö workspaces

#### 4.4 –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Run Notifications ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `TerraformNotificationConfiguration` —Å –ø–æ–ª—è–º–∏: id, name, type, destination, conditions, enabled, description
- ‚úÖ –ü–æ–ª–µ `notifications` –≤ `TerraformWorkspace`
- ‚úÖ –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ notifications –ø–æ—Å–ª–µ runs —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `sendNotifications()`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å–ª–æ–≤–∏–π (on_success, on_failure, on_start)
- ‚úÖ CRUD –º–µ—Ç–æ–¥—ã –¥–ª—è notifications
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DataFlowEngine –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ notifications —Ç–∏–ø–∞ 'component'
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ sendNotifications() –∏–∑ sendRunResults()

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```typescript
interface TerraformNotificationConfiguration {
  id: string;
  name: string;
  type: 'slack' | 'email' | 'webhook' | 'component';
  destination: string; // URL, email, componentId
  conditions: Array<'on_success' | 'on_failure' | 'on_start'>;
  enabled: boolean;
  description?: string;
}
```

**–ú–µ—Ç–æ–¥—ã:**
- ‚úÖ `addNotification(workspaceId, notification)` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ notification —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–º–µ–Ω–∏
- ‚úÖ `updateNotification(workspaceId, notificationId, updates)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ notification
- ‚úÖ `deleteNotification(workspaceId, notificationId)` - —É–¥–∞–ª–µ–Ω–∏–µ notification
- ‚úÖ `getNotifications(workspaceId)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö notifications –¥–ª—è workspace
- ‚úÖ `sendNotifications(run)` - –æ—Ç–ø—Ä–∞–≤–∫–∞ notifications –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ run (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥)

#### 4.5 –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É State Outputs ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è outputs –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º apply (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ updateActiveRuns)
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ outputs –≤ state (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ TerraformState)
- ‚úÖ –ú–µ—Ç–æ–¥ `getStateOutputs(workspaceId)` - –¥–æ–±–∞–≤–ª–µ–Ω –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è outputs –∏–∑ state
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ outputs –≤ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ sendRunResults)

#### 4.6 –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É Organization-level settings

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- [ ] –ü–æ–ª–µ `organizationName` –≤ –∫–æ–Ω—Ñ–∏–≥–µ (—É–∂–µ –µ—Å—Ç—å, –Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ teams (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ workspace permissions (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

### –≠—Ç–∞–ø 5: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ UI –¥–æ —É—Ä–æ–≤–Ω—è Terraform Cloud/Enterprise

#### 5.1 –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ UI –ø—Ä–æ–±–ª–µ–º—ã ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/components/config/devops/TerraformConfigAdvanced.tsx`

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –£–±—Ä–∞–Ω `window.confirm()` - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ inline confirmation (–∫–Ω–æ–ø–∫–∏ Confirm/Cancel)
- ‚úÖ –¢–∞–±—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã (flex-wrap, –ø–µ—Ä–µ–Ω–æ—Å –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ä–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è workspaces
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä run (expandable card)

#### 5.2 –î–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É Variables ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/components/config/devops/TerraformConfigAdvanced.tsx`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ "Variables"
- ‚úÖ –°–ø–∏—Å–æ–∫ variables –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ workspace
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è variables (addVariable, updateVariable, deleteVariable)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Terraform –∏ Environment variables
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ sensitive variables (masking –≤ UI - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HCL variables
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–ø—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–ª—é—á–∞, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è)

**UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- ‚úÖ Select workspace –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è variables
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ variables (Key, Value, Category, Sensitive, HCL)
- ‚úÖ –ö–Ω–æ–ø–∫–∏ Add, Edit, Delete
- ‚úÖ Inline —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ Dialog)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TerraformEmulationEngine —á–µ—Ä–µ–∑ CRUD –º–µ—Ç–æ–¥—ã

#### 5.3 –î–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É Notifications ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/components/config/devops/TerraformConfigAdvanced.tsx`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ "Notifications"
- ‚úÖ –°–ø–∏—Å–æ–∫ notification configurations –¥–ª—è workspace
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è notifications (addNotification, updateNotification, deleteNotification)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤: Slack, Email, Webhook, Component
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Å–ª–æ–≤–∏–π (on_success, on_failure, on_start) - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä —á–µ—Ä–µ–∑ —á–µ–∫–±–æ–∫—Å—ã
- ‚úÖ –í—ã–±–æ—Ä —Ü–µ–ª–µ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–ª—è Component —Ç–∏–ø–∞ (—á–µ—Ä–µ–∑ Select —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π nodes)

**UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- ‚úÖ Select workspace –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è notifications
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ notifications (Name, Type, Destination, Conditions, Enabled)
- ‚úÖ –ö–Ω–æ–ø–∫–∏ Add, Edit, Delete
- ‚úÖ Inline —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ Dialog)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TerraformEmulationEngine —á–µ—Ä–µ–∑ CRUD –º–µ—Ç–æ–¥—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ notifications –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è runs —á–µ—Ä–µ–∑ sendNotifications()

#### 5.4 –†–∞—Å—à–∏—Ä–∏—Ç—å –≤–∫–ª–∞–¥–∫—É Workspaces ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/components/config/devops/TerraformConfigAdvanced.tsx`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ tags (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ) - inline UI –¥–ª—è –∫–∞–∂–¥–æ–≥–æ workspace
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ tags –≤ —Å–ø–∏—Å–∫–µ workspaces - badges —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ tags - Select —Ñ–∏–ª—å—Ç—Ä –≤ CardHeader
- ‚úÖ –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É Edit/Save
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ run policies (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ) - –í–´–ü–û–õ–ù–ï–ù–û
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ notification count - –í–´–ü–û–õ–ù–ï–ù–û (–¥–æ–±–∞–≤–ª–µ–Ω—ã badges —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º notifications –≤ —Å–ø–∏—Å–∫–µ workspaces)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ variables count - –í–´–ü–û–õ–ù–ï–ù–û (–¥–æ–±–∞–≤–ª–µ–Ω—ã badges —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º variables –≤ —Å–ø–∏—Å–∫–µ workspaces)

#### 5.5 –†–∞—Å—à–∏—Ä–∏—Ç—å –≤–∫–ª–∞–¥–∫—É Runs ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–§–∞–π–ª:** `src/components/config/devops/TerraformConfigAdvanced.tsx`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä run (expandable card)
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è resource changes (additions, changes, destructions) —Å —Ü–≤–µ—Ç–æ–≤—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: Run ID, Workspace, Triggered By, Source, Created/Started/Finished At, Duration
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –æ—à–∏–±–æ–∫ –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ plan output (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ) - –í–´–ü–û–õ–ù–ï–ù–û
  - Summary —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (additions/changes/destructions) —Å —Ü–≤–µ—Ç–æ–≤—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
  - –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤ —Å –∞–¥—Ä–µ—Å–∞–º–∏, –¥–µ–π—Å—Ç–≤–∏—è–º–∏ (create/update/delete/replace) –∏ —Ç–∏–ø–∞–º–∏
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ apply output (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ) - –í–´–ü–û–õ–ù–ï–ù–û
  - Summary —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ apply
  - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö/–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö/—É–Ω–∏—á—Ç–æ–∂–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ state outputs (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ run history –¥–ª—è workspace - –í–´–ü–û–õ–ù–ï–ù–û (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è runs –ø–æ workspace)
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö runs - –í–´–ü–û–õ–ù–ï–ù–û (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ planning/applying)
- ‚è≥ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è run timeline - –û–°–¢–ê–õ–û–°–¨ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

#### 5.6 –†–∞—Å—à–∏—Ä–∏—Ç—å –≤–∫–ª–∞–¥–∫—É State

**–§–∞–π–ª:** `src/components/config/devops/TerraformConfigAdvanced.tsx`

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- [ ] –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä state version
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ outputs –≤ state
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ lineage
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ state versions
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π resources

#### 5.7 –†–∞—Å—à–∏—Ä–∏—Ç—å –≤–∫–ª–∞–¥–∫—É Settings

**–§–∞–π–ª:** `src/components/config/devops/TerraformConfigAdvanced.tsx`

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- [ ] Organization name (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–µ –ø–æ–ª–µ)
- [ ] Default Terraform Version (—É–∂–µ –µ—Å—Ç—å)
- [ ] Enable State Locking (—É–∂–µ –µ—Å—Ç—å)
- [ ] Enable Remote State (—É–∂–µ –µ—Å—Ç—å)
- [ ] Enable VCS Integration (—É–∂–µ –µ—Å—Ç—å)
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–º—É–ª—è—Ü–∏–∏ (runTriggerRate, failureRate, etc.)
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–µ—Ç—Ä–∏–∫

---

### –≠—Ç–∞–ø 6: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–º—É–ª—è—Ç–∏–≤–Ω–æ—Å—Ç–∏

#### 6.1 –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ —Å–∏–º—É–ª—è—Ü–∏—é

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ triggerRun()
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ VCS webhook processing
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- [ ] Graceful degradation (–ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç—É –±–µ–∑ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)

#### 6.2 –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- [ ] –í—ã–∑–æ–≤ `sendRunResults()` –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è runs
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ notification destinations
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ DataFlowEngine

#### 6.3 –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ —Å —É—á–µ—Ç–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- [ ] –ú–µ—Ç—Ä–∏–∫–∞ "connectedComponents" - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –ú–µ—Ç—Ä–∏–∫–∞ "outgoingMessages" - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] –ú–µ—Ç—Ä–∏–∫–∞ "incomingWebhooks" - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö webhooks
- [ ] –£—á–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ utilization –º–µ—Ç—Ä–∏–∫–µ

---

### –≠—Ç–∞–ø 6.5: –ö–†–ò–¢–ò–ß–ù–û - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–æ—Å–æ–±–ª–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã Terraform

#### –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º—ã

**–°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:**
Terraform –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±–æ—Å–æ–±–ª–µ–Ω–Ω–æ - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç runs –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ç–∞–π–º–µ—Ä—É –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –æ—Ç –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –≠—Ç–æ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, –≥–¥–µ Terraform —è–≤–ª—è–µ—Ç—Å—è **–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º-–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–æ–º**, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç—Ä–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:

1. **HCL –∫–æ–¥** - –±–µ–∑ –∫–æ–¥–∞ Terraform –Ω–µ –∑–Ω–∞–µ—Ç —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å
2. **–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã** - –±–µ–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Kubernetes/Docker/AWS) –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. **State backend** - –±–µ–∑ State (Vault/S3) –Ω–µ –º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- `triggerAutoRuns()` —Å–æ–∑–¥–∞–µ—Ç runs –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ç–∞–π–º–µ—Ä—É –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- `triggerVCSWebhooks()` —Å–∏–º—É–ª–∏—Ä—É–µ—Ç webhooks –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö push —Å–æ–±—ã—Ç–∏–π –æ—Ç VCS
- –ù–µ—Ç HCL –∫–æ–¥–∞ –Ω–∏–≥–¥–µ –≤ —Å–∏—Å—Ç–µ–º–µ - Terraform –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç VCS –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–¥–∞
- –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç State backend –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–¶–µ–ª—å —ç—Ç–∞–ø–∞:**
–°–¥–µ–ª–∞—Ç—å Terraform –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π:
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ü–æ–ª—É—á–∞–µ—Ç HCL –∫–æ–¥ –æ—Ç VCS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü–∞—Ä—Å–∏—Ç HCL –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –¢—Ä–µ–±—É–µ—Ç State backend –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

---

#### 6.5.1 –£–¥–∞–ª–∏—Ç—å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é runs –∏ —Å–¥–µ–ª–∞—Ç—å Terraform —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–°–µ–π—á–∞—Å Terraform –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç runs –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `triggerAutoRuns()` –∏ `triggerVCSWebhooks()` –≤ –º–µ—Ç–æ–¥–µ `performUpdate()`. –≠—Ç–æ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ - Terraform –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è, –∞ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Å–∞–º.

**–®–∞–≥–∏:**

1. **–£–¥–∞–ª–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏–∑ `performUpdate()`:**
   ```typescript
   performUpdate(currentTime: number): void {
     if (!this.config) return;
     
     // –£–î–ê–õ–ò–¢–¨ —ç—Ç–∏ –≤—ã–∑–æ–≤—ã:
     // this.triggerVCSWebhooks(currentTime);  // ‚ùå –£–î–ê–õ–ò–¢–¨
     // this.triggerAutoRuns(currentTime);     // ‚ùå –£–î–ê–õ–ò–¢–¨
     
     // –û–°–¢–ê–í–ò–¢–¨ —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö runs:
     this.updateActiveRuns(currentTime);
     this.updateMetrics();
   }
   ```

2. **–°–¥–µ–ª–∞—Ç—å –º–µ—Ç–æ–¥—ã `triggerVCSWebhooks()` –∏ `triggerAutoRuns()` –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏ –∏ –≤—ã–∑—ã–≤–∞—Ç—å –∏—Ö —Ç–æ–ª—å–∫–æ –∏–∑–≤–Ω–µ:**
   - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ `_triggerVCSWebhooks()` –∏ `_triggerAutoRuns()` (–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ)
   - –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

3. **–û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã:**
   - Runs –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑:
     - –í—Ö–æ–¥—è—â–∏–µ webhook –æ—Ç VCS (—á–µ—Ä–µ–∑ DataFlowEngine handler)
     - –Ø–≤–Ω—ã–µ API –∑–∞–ø—Ä–æ—Å—ã (—á–µ—Ä–µ–∑ DataFlowEngine handler)
     - –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∏–∑ UI (—á–µ—Ä–µ–∑ `triggerRun()`)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Terraform –Ω–µ —Å–æ–∑–¥–∞–µ—Ç runs –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- Runs —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö (webhook, API, UI)
- –°–∏–º—É–ª—è—Ü–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π

---

#### 6.5.2 –î–æ–±–∞–≤–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ HCL –∫–æ–¥–∞

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–°–µ–π—á–∞—Å –≤ —Å–∏—Å—Ç–µ–º–µ –Ω–µ—Ç HCL –∫–æ–¥–∞ –Ω–∏–≥–¥–µ. Terraform –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –±–µ–∑ –∑–Ω–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ HCL –∫–æ–¥–∞ –≤ workspace –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –µ–≥–æ –æ—Ç VCS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

**–®–∞–≥–∏:**

1. **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `hclCode` –≤ `TerraformWorkspace`:**
   ```typescript
   export interface TerraformWorkspace {
     // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
     hclCode?: string;  // HCL –∫–æ–¥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
     hclCodeVersion?: string;  // –í–µ—Ä—Å–∏—è –∫–æ–¥–∞ (commit hash, tag)
     hclCodeUpdatedAt?: number;  // –ö–æ–≥–¥–∞ –∫–æ–¥ –±—ã–ª –æ–±–Ω–æ–≤–ª–µ–Ω
   }
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `setHCLCode()` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ HCL –∫–æ–¥–∞:**
   ```typescript
   public setHCLCode(workspaceId: string, hclCode: string, version?: string): { success: boolean; reason?: string } {
     const workspace = this.workspaces.get(workspaceId);
     if (!workspace) {
       return { success: false, reason: 'Workspace not found' };
     }
     
     workspace.hclCode = hclCode;
     workspace.hclCodeVersion = version;
     workspace.hclCodeUpdatedAt = Date.now();
     
     this.workspaces.set(workspaceId, workspace);
     this.syncWorkspaceToConfig(workspaceId);
     
     return { success: true };
   }
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `getHCLCode()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è HCL –∫–æ–¥–∞:**
   ```typescript
   public getHCLCode(workspaceId: string): string | undefined {
     const workspace = this.workspaces.get(workspaceId);
     return workspace?.hclCode;
   }
   ```

4. **–û–±–Ω–æ–≤–∏—Ç—å `syncWorkspaceToConfig()` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è HCL –∫–æ–¥–∞:**
   ```typescript
   private syncWorkspaceToConfig(workspaceId: string): void {
     // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
     configWorkspaces[workspaceIndex] = {
       // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
       hclCode: workspace.hclCode,
       hclCodeVersion: workspace.hclCodeVersion,
       hclCodeUpdatedAt: workspace.hclCodeUpdatedAt,
     };
   }
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Workspace –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å HCL –∫–æ–¥
- –ö–æ–¥ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã –¥–≤–∏–∂–∫–∞
- –ö–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –∫–æ–Ω—Ñ–∏–≥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

---

#### 6.5.3 –ò–∑–≤–ª–µ–∫–∞—Ç—å HCL –∫–æ–¥ –∏–∑ webhook payload –æ—Ç VCS

**–§–∞–π–ª:** `src/core/DataFlowEngine.ts` (handler), `src/core/TerraformEmulationEngine.ts`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–ö–æ–≥–¥–∞ VCS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (GitLab CI, GitHub) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –≤ Terraform, –≤ payload –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å HCL –∫–æ–¥ (–∏–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ). –ù—É–∂–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å –∫–æ–¥ –∏–∑ webhook –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ workspace.

**–®–∞–≥–∏:**

1. **–û–±–Ω–æ–≤–∏—Ç—å `createTerraformHandler()` –≤ DataFlowEngine –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è HCL –∫–æ–¥–∞:**
   ```typescript
   // –í –æ–±—Ä–∞–±–æ—Ç–∫–µ webhook –æ–ø–µ—Ä–∞—Ü–∏–∏:
   if (operation === 'webhook' || operation === 'push') {
     const engine = emulationEngine.getTerraformEmulationEngine(node.id);
     if (!engine) {
       message.status = 'failed';
       message.error = 'Terraform engine not found';
       return message;
     }
     
     // –ò–∑–≤–ª–µ–∫–∞–µ–º HCL –∫–æ–¥ –∏–∑ payload
     const hclCode = payload.hclCode || payload.code || payload.files?.main?.content;
     const commitHash = payload.commit || payload.sha || payload.commitHash;
     const branch = payload.branch || payload.ref?.replace('refs/heads/', '');
     
     // –ù–∞—Ö–æ–¥–∏–º workspace –ø–æ branch –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π
     const workspace = engine.getWorkspaces().find(w => 
       w.vcsRepo?.branch === branch
     ) || engine.getWorkspaces()[0]; // fallback –Ω–∞ –ø–µ—Ä–≤—ã–π workspace
     
     if (workspace && hclCode) {
       // –°–æ—Ö—Ä–∞–Ω—è–µ–º HCL –∫–æ–¥ –≤ workspace
       engine.setHCLCode(workspace.id, hclCode, commitHash);
     }
     
     // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É webhook –∫–∞–∫ –æ–±—ã—á–Ω–æ...
   }
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å Connection Rule –¥–ª—è VCS ‚Üí Terraform, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å HCL –∫–æ–¥:**
   - –í `terraformRules.ts` –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä HCL –∫–æ–¥–∞ –≤ payload –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - –ò–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö webhook payload

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ webhook –æ—Ç VCS HCL –∫–æ–¥ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ workspace
- –ö–æ–¥ —Å–≤—è–∑–∞–Ω —Å –≤–µ—Ä—Å–∏–µ–π (commit hash)
- Workspace –∑–Ω–∞–µ—Ç –∫–∞–∫–æ–π –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è runs

---

#### 6.5.4 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ HCL –∫–æ–¥–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–°–µ–π—á–∞—Å Terraform –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (`resourceAdditions`, `resourceChanges`, `resourceDestructions`) –±–µ–∑ –∑–Ω–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –ù—É–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å HCL –∫–æ–¥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.

**–®–∞–≥–∏:**

1. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `parseHCLCode()` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HCL:**
   ```typescript
   /**
    * –ü–∞—Ä—Å–∏—Ç HCL –∫–æ–¥ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã
    * –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
    */
   private parseHCLCode(hclCode: string): {
     resources: Array<{
       type: string;
       name: string;
       address: string;
     }>;
     resourceCount: number;
     resourceTypes: string[];
   } {
     const resources: Array<{ type: string; name: string; address: string }> = [];
     const resourceTypesSet = new Set<string>();
     
     // –ü—Ä–æ—Å—Ç–æ–π regex –¥–ª—è –ø–æ–∏—Å–∫–∞ resource –±–ª–æ–∫–æ–≤
     // –§–æ—Ä–º–∞—Ç: resource "type" "name" { ... }
     const resourceRegex = /resource\s+["'](\w+)["']\s+["'](\w+)["']/g;
     let match;
     
     while ((match = resourceRegex.exec(hclCode)) !== null) {
       const type = match[1];
       const name = match[2];
       const address = `${type}.${name}`;
       
       resources.push({ type, name, address });
       resourceTypesSet.add(type);
     }
     
     return {
       resources,
       resourceCount: resources.length,
       resourceTypes: Array.from(resourceTypesSet),
     };
   }
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ HCL –≤ `updateActiveRuns()` –≤–º–µ—Å—Ç–æ —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª:**
   ```typescript
   // –í –º–µ—Ç–æ–¥–µ updateActiveRuns(), –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∫ planning:
   if (run.status === 'planning' && elapsed >= estimatedDuration) {
     // –ü–æ–ª—É—á–∞–µ–º HCL –∫–æ–¥ –¥–ª—è workspace
     const hclCode = this.getHCLCodeForWorkspace(run.workspaceId);
     
     if (!hclCode) {
       // –ù–µ—Ç HCL –∫–æ–¥–∞ - –Ω–µ –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å plan
       run.status = 'errored';
       run.error = 'HCL code not available. Connect to VCS or provide code manually.';
       run.finishedAt = currentTime;
       run.duration = elapsed;
       return;
     }
     
     // –ü–∞—Ä—Å–∏–º HCL –∫–æ–¥
     const parsed = this.parseHCLCode(hclCode);
     
     // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
     const state = this.getStateForWorkspace(run.workspaceId);
     const existingResources = state?.resources || 0;
     const newResources = parsed.resourceCount;
     
     // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞)
     if (newResources > existingResources) {
       run.resourceAdditions = newResources - existingResources;
     } else if (newResources < existingResources) {
       run.resourceDestructions = existingResources - newResources;
     }
     
     // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–∑ parsed.resources
     run.planOutput = {
       changes: {
         additions: run.resourceAdditions || 0,
         changes: run.resourceChanges || 0,
         destructions: run.resourceDestructions || 0,
       },
       resourceChanges: parsed.resources.slice(0, 10).map(r => ({
         address: r.address,
         action: run.resourceAdditions ? 'create' : 'delete',
         type: r.type,
       })),
       summary: `Plan: ${run.resourceAdditions || 0} to add, ${run.resourceChanges || 0} to change, ${run.resourceDestructions || 0} to destroy.`,
     };
     
     // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
   }
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `getHCLCodeForWorkspace()`:**
   ```typescript
   private getHCLCodeForWorkspace(workspaceId: string): string | undefined {
     return this.getHCLCode(workspaceId);
   }
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Terraform –ø–∞—Ä—Å–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–π HCL –∫–æ–¥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, –∞ –Ω–µ —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª
- Plan output —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–∑ HCL –∫–æ–¥–∞

---

#### 6.5.5 –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç VCS –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è HCL –∫–æ–¥–∞

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
Terraform –¥–æ–ª–∂–µ–Ω —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å VCS –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è HCL –∫–æ–¥–∞. –ï—Å–ª–∏ workspace –∏–º–µ–µ—Ç `vcsRepo`, –Ω–æ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å VCS, runs –¥–æ–ª–∂–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è.

**–®–∞–≥–∏:**

1. **–û–±–Ω–æ–≤–∏—Ç—å `triggerRun()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è HCL –∫–æ–¥–∞:**
   ```typescript
   public triggerRun(workspaceId: string, options?: {...}): {...} {
     const workspace = this.workspaces.get(workspaceId);
     if (!workspace) {
       return { success: false, reason: 'Workspace not found' };
     }
     
     // –ö–†–ò–¢–ò–ß–ù–û: –ï—Å–ª–∏ –µ—Å—Ç—å vcsRepo, –Ω–æ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è - –±–ª–æ–∫–∏—Ä—É–µ–º
     if (workspace.vcsRepo && !this.checkVCSConnection(workspace)) {
       return { 
         success: false, 
         reason: 'VCS connection required but not found. Connect to VCS component to receive HCL code.' 
       };
     }
     
     // –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ HCL –∫–æ–¥–∞
     const hclCode = this.getHCLCode(workspaceId);
     if (!hclCode && workspace.vcsRepo) {
       return { 
         success: false, 
         reason: 'HCL code not available. VCS connection exists but no code received yet. Wait for webhook from VCS.' 
       };
     }
     
     // –ï—Å–ª–∏ –Ω–µ—Ç vcsRepo –∏ –Ω–µ—Ç HCL –∫–æ–¥–∞ - –º–æ–∂–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ UI)
     if (!workspace.vcsRepo && !hclCode) {
       // –†–∞–∑—Ä–µ—à–∞–µ–º, –Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ–º —á—Ç–æ plan –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å
       console.warn(`Terraform workspace ${workspace.name} has no VCS repo and no HCL code. Run may fail during planning.`);
     }
     
     // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è run
   }
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å `checkVCSConnection()` –¥–ª—è –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:**
   ```typescript
   private checkVCSConnection(workspace: TerraformWorkspace): boolean {
     if (!workspace.vcsRepo) {
       return false; // –ù–µ—Ç VCS repo –Ω–∞—Å—Ç—Ä–æ–µ–Ω
     }
     
     if (!this.nodeId) {
       return false;
     }
     
     // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –æ—Ç VCS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
     const vcsConnections = this.connections.filter(c => 
       c.target === this.nodeId && 
       ['gitlab-ci', 'github', 'webhook'].includes(c.source)
     );
     
     return vcsConnections.length > 0;
   }
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Runs –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –µ—Å–ª–∏ workspace –∏–º–µ–µ—Ç VCS repo, –Ω–æ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å VCS
- Runs –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –µ—Å–ª–∏ –µ—Å—Ç—å VCS repo, –Ω–æ HCL –∫–æ–¥ –µ—â–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

#### 6.5.6 –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
Terraform –¥–æ–ª–∂–µ–Ω —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ (Kubernetes/Docker/AWS) –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ë–µ–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–µ–ª–∞—Ç—å plan, –Ω–æ –Ω–µ apply.

**–®–∞–≥–∏:**

1. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `getTargetComponentsForWorkspace()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–ª–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
   ```typescript
   /**
    * –ü–æ–ª—É—á–∞–µ—Ç —Ü–µ–ª–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã) –¥–ª—è workspace
    * –≠—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫—É–¥–∞ Terraform –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
    */
   private getTargetComponentsForWorkspace(workspaceId: string): string[] {
     if (!this.nodeId) return [];
     
     // –ü–æ–ª—É—á–∞–µ–º –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
     const providerConnections = this.connections.filter(c => 
       c.source === this.nodeId && 
       ['kubernetes', 'docker', 'aws', 'azure', 'gcp'].includes(c.target)
     );
     
     return providerConnections.map(c => c.target);
   }
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å `updateActiveRuns()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –ø–µ—Ä–µ–¥ apply:**
   ```typescript
   // –í –º–µ—Ç–æ–¥–µ updateActiveRuns(), –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∫ applying:
   if (run.status === 'planning' && elapsed >= estimatedDuration) {
     // ... –ø–∞—Ä—Å–∏–Ω–≥ HCL, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
     
     if (hasChanges && !run.planOnly) {
       // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ü–µ–ª–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è apply
       const targetComponents = this.getTargetComponentsForWorkspace(run.workspaceId);
       
       if (targetComponents.length === 0) {
         // –ù–µ—Ç —Ü–µ–ª–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ - –º–æ–∂–µ–º —Ç–æ–ª—å–∫–æ plan
         run.status = 'planned';
         run.message = 'Plan completed. No target infrastructure connected for apply. Connect to Kubernetes/Docker/AWS to apply changes.';
         run.finishedAt = currentTime;
         run.duration = elapsed;
         
         // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã planned run
         this.sendRunResults(run);
         return;
       }
       
       // –ï—Å—Ç—å —Ü–µ–ª–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã - –º–æ–∂–µ–º apply
       // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ apply ...
     }
   }
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –∫–æ–º–∞–Ω–¥ –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø—Ä–∏ apply:**
   ```typescript
   /**
    * –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ —Ü–µ–ª–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
    */
   private async sendApplyCommandsToTargets(
     run: TerraformRun, 
     targetComponentIds: string[]
   ): Promise<void> {
     if (!this.nodeId) return;
     
     const hclCode = this.getHCLCode(run.workspaceId);
     if (!hclCode) return;
     
     const parsed = this.parseHCLCode(hclCode);
     
     // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ –≤ —Ü–µ–ª–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
     for (const resource of parsed.resources) {
       for (const targetId of targetComponentIds) {
         // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∫–æ–º–∞–Ω–¥—ã –ø–æ —Ç–∏–ø—É —Ä–µ—Å—É—Ä—Å–∞
         if (resource.type.startsWith('kubernetes_') && targetId.includes('kubernetes')) {
           await this.sendKubernetesCommand(targetId, resource, run);
         } else if (resource.type.startsWith('docker_') && targetId.includes('docker')) {
           await this.sendDockerCommand(targetId, resource, run);
         }
         // –î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
       }
     }
   }
   
   /**
    * –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤ Kubernetes –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
    */
   private async sendKubernetesCommand(
     targetId: string, 
     resource: { type: string; name: string; address: string },
     run: TerraformRun
   ): Promise<void> {
     // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ DataFlowEngine
     const payload = {
       operation: 'apply_resource',
       resourceType: resource.type,
       resourceName: resource.name,
       resourceAddress: resource.address,
       runId: run.id,
       workspaceId: run.workspaceId,
       action: 'create', // –∏–ª–∏ 'update', 'delete' –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
     };
     
     try {
       dataFlowEngine.addMessage({
         source: this.nodeId!,
         target: targetId,
         format: 'json',
         payload,
         size: JSON.stringify(payload).length,
         metadata: {
           operation: 'apply_resource',
           terraformRunId: run.id,
         },
       });
     } catch (error) {
       console.warn(`Failed to send Kubernetes command to ${targetId}:`, error);
     }
   }
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Apply –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- –ü—Ä–∏ apply –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Ü–µ–ª–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

---

#### 6.5.7 –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç State backend –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
Terraform –¥–æ–ª–∂–µ–Ω —Ç—Ä–µ–±–æ–≤–∞—Ç—å State backend (Vault/S3) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è, –µ—Å–ª–∏ `enableRemoteState = true`. –ë–µ–∑ State backend Terraform –Ω–µ –º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

**–®–∞–≥–∏:**

1. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `checkStateBackend()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ State backend:**
   ```typescript
   /**
    * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ State backend —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    */
   private checkStateBackend(workspaceId: string): boolean {
     const workspace = this.workspaces.get(workspaceId);
     if (!workspace) return false;
     
     const config = this.config;
     if (!config?.enableRemoteState) {
       return true; // –õ–æ–∫–∞–ª—å–Ω—ã–π state —Ä–∞–∑—Ä–µ—à–µ–Ω
     }
     
     if (!this.nodeId) return false;
     
     // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å State backend (Vault, S3)
     const stateBackendConnections = this.connections.filter(c => 
       c.target === this.nodeId && 
       ['secrets-vault', 's3-datalake'].includes(c.source)
     );
     
     return stateBackendConnections.length > 0;
   }
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å `triggerRun()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ State backend:**
   ```typescript
   public triggerRun(workspaceId: string, options?: {...}): {...} {
     // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ...
     
     // –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º State backend –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è
     if (this.config?.enableRemoteState && !this.checkStateBackend(workspaceId)) {
       return { 
         success: false, 
         reason: 'Remote state enabled but no State backend connection found. Connect to Vault or S3 for state storage.' 
       };
     }
     
     // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ ...
   }
   ```

3. **–û–±–Ω–æ–≤–∏—Ç—å `updateStateAfterApply()` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è state –≤ backend:**
   ```typescript
   private updateStateAfterApply(run: TerraformRun): void {
     const state = Array.from(this.states.values()).find(s => s.workspaceId === run.workspaceId);
     if (!state) return;
     
     // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è state ...
     
     // –ï—Å–ª–∏ remote state –≤–∫–ª—é—á–µ–Ω, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º state –≤ backend
     if (this.config?.enableRemoteState && this.nodeId) {
       const stateBackendConnections = this.connections.filter(c => 
         c.target === this.nodeId && 
         ['secrets-vault', 's3-datalake'].includes(c.source)
       );
       
       for (const connection of stateBackendConnections) {
         // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º state –≤ backend —á–µ—Ä–µ–∑ DataFlowEngine
         const payload = {
           operation: 'save_state',
           workspaceId: run.workspaceId,
           stateVersion: state.version,
           stateSerial: state.serial,
           resources: state.resources,
           outputs: state.outputs,
         };
         
         try {
           dataFlowEngine.addMessage({
             source: this.nodeId,
             target: connection.source, // State backend - —ç—Ç–æ –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
             format: 'json',
             payload,
             size: JSON.stringify(payload).length,
             metadata: {
               operation: 'save_state',
               terraformWorkspaceId: run.workspaceId,
             },
           });
         } catch (error) {
           console.warn(`Failed to save state to ${connection.source}:`, error);
         }
       }
     }
   }
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Runs –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –µ—Å–ª–∏ `enableRemoteState = true`, –Ω–æ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å State backend
- State —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ State backend –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º apply
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è State backend

---

#### 6.5.8 –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–§–∞–π–ª:** `src/core/TerraformEmulationEngine.ts`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–ú–µ—Ç—Ä–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç—Ä–∞–∂–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Terraform - –µ—Å—Ç—å –ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å VCS, –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏, State backend.

**–®–∞–≥–∏:**

1. **–†–∞—Å—à–∏—Ä–∏—Ç—å `TerraformEngineMetrics` –¥–ª—è –º–µ—Ç—Ä–∏–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
   ```typescript
   export interface TerraformEngineMetrics {
     // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ ...
     
     // –ú–µ—Ç—Ä–∏–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
     vcsConnected: boolean;
     stateBackendConnected: boolean;
     providersConnected: number;
     blockedRuns: number; // Runs –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   }
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å `updateMetrics()` –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
   ```typescript
   private updateMetrics(): void {
     // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
     
     // –ú–µ—Ç—Ä–∏–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
     if (this.nodeId) {
       // –ü—Ä–æ–≤–µ—Ä—è–µ–º VCS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
       const vcsConnections = this.connections.filter(c => 
         c.target === this.nodeId && 
         ['gitlab-ci', 'github', 'webhook'].includes(c.source)
       );
       this.terraformMetrics.vcsConnected = vcsConnections.length > 0;
       
       // –ü—Ä–æ–≤–µ—Ä—è–µ–º State backend —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
       const stateBackendConnections = this.connections.filter(c => 
         c.target === this.nodeId && 
         ['secrets-vault', 's3-datalake'].includes(c.source)
       );
       this.terraformMetrics.stateBackendConnected = stateBackendConnections.length > 0;
       
       // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
       const providerConnections = this.connections.filter(c => 
         c.source === this.nodeId && 
         ['kubernetes', 'docker', 'aws', 'azure', 'gcp'].includes(c.target)
       );
       this.terraformMetrics.providersConnected = providerConnections.length;
       
       // –°—á–∏—Ç–∞–µ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ runs (runs –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–æ–≥—É—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∏–∑-–∑–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
       // –≠—Ç–æ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ —Å—á–µ—Ç—á–∏–∫ failed triggerRun() –≤—ã–∑–æ–≤–æ–≤
       // –ò–ª–∏ —á–µ—Ä–µ–∑ –ø–æ–ª–µ –≤ run: run.blockedReason
     }
   }
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- UI –º–æ–∂–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–æ—á–µ–º—É runs –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

---

#### 6.5.9 –î–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è HCL –∫–æ–¥–∞

**–§–∞–π–ª:** `src/components/config/devops/TerraformConfigAdvanced.tsx`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—Ä—É—á–Ω—É—é –≤–≤–µ—Å—Ç–∏ HCL –∫–æ–¥ –¥–ª—è workspace, –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å VCS –∏–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

**–®–∞–≥–∏:**

1. **–î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é HCL Code –≤–æ –≤–∫–ª–∞–¥–∫—É Workspaces:**
   ```typescript
   // –í –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ workspace –¥–æ–±–∞–≤–∏—Ç—å:
   <div className="space-y-2">
     <Label>HCL Code</Label>
     <Textarea
       value={workspace.hclCode || ''}
       onChange={(e) => updateWorkspace(workspace.id, 'hclCode', e.target.value)}
       placeholder="resource \"aws_instance\" \"example\" { ... }"
       className="font-mono text-sm"
       rows={10}
     />
     {workspace.hclCodeVersion && (
       <p className="text-xs text-muted-foreground">
         Version: {workspace.hclCodeVersion}
       </p>
     )}
   </div>
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "Load from VCS" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–¥–∞ –æ—Ç VCS:**
   ```typescript
   <Button
     onClick={() => {
       // –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∫–æ–¥ –æ—Ç VCS —á–µ—Ä–µ–∑ DataFlowEngine
       // –ò–ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —á—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è webhook
       toast({
         title: "HCL Code",
         description: "Code will be loaded automatically when VCS sends webhook.",
       });
     }}
   >
     Load from VCS
   </Button>
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –≤–≤–µ—Å—Ç–∏ HCL –∫–æ–¥
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤–µ—Ä—Å–∏—é –∫–æ–¥–∞ (commit hash)
- UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞ –∫–æ–¥ –±—ã–ª –æ–±–Ω–æ–≤–ª–µ–Ω

---

#### 6.5.10 –û–±–Ω–æ–≤–∏—Ç—å Connection Rules –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ HCL –∫–æ–¥–∞

**–§–∞–π–ª:** `src/services/connection/rules/terraformRules.ts`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è VCS ‚Üí Terraform –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä HCL –∫–æ–¥–∞ –≤ workspace –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏.

**–®–∞–≥–∏:**

1. **–û–±–Ω–æ–≤–∏—Ç—å `createTerraformVCSRule()` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ—Ä–∞ HCL –∫–æ–¥–∞:**
   ```typescript
   updateTargetConfig: (source, target, connection, metadata) => {
     // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
     
     if (!workspace) {
       // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π workspace
       workspace = {
         // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
         hclCode: `# Example HCL code from ${sourceLabel}
resource "kubernetes_deployment" "example" {
  metadata {
    name = "example-deployment"
  }
  spec {
    replicas = 3
    selector {
      match_labels = {
        app = "example"
      }
    }
    template {
      metadata {
        labels = {
          app = "example"
        }
      }
      spec {
        container {
          name  = "example"
          image = "nginx:latest"
        }
      }
    }
  }
}`,
         hclCodeVersion: 'example',
         hclCodeUpdatedAt: Date.now(),
       };
     }
     
     // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
   }
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è VCS ‚Üí Terraform –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä HCL –∫–æ–¥–∞
- Workspace —Å—Ä–∞–∑—É –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É runs
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

---

### –≠—Ç–∞–ø 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

#### 7.1 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–º—É–ª—è—Ü–∏–∏

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- [ ] Terraform —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–∏–ª–∏ graceful degradation)
- [ ] –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω—ã—Ö runs
- [ ] –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] Connection Rules –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç –∫–æ–Ω—Ñ–∏–≥–∏
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ —É—á–∏—Ç—ã–≤–∞—é—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

#### 7.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- [ ] –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –í—Å–µ –∫–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Dialog/confirm
- [ ] –¢–∞–±—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã
- [ ] –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å —ç–º—É–ª—è—Ü–∏–µ–π
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

#### 7.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- [ ] –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Terraform Cloud/Enterprise —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [ ] API —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É API
- [ ] UI —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É UI
- [ ] –ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é

---

## üìù –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 1: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

**–®–∞–≥ 1:** –î–æ–±–∞–≤–∏—Ç—å callback –≤ TerraformEmulationEngine
```typescript
private sendMessageToTarget?: (sourceId: string, targetId: string, message: DataMessage) => void;

public setDataFlowCallback(callback: (sourceId: string, targetId: string, message: DataMessage) => void): void {
  this.sendMessageToTarget = callback;
}
```

**–®–∞–≥ 2:** –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ sendRunResults()
```typescript
private sendRunResults(run: TerraformRun, connections: CanvasConnection[]): void {
  if (!this.sendMessageToTarget || !this.nodeId) return;
  
  // –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
  const outgoingConnections = connections.filter(c => c.source === this.nodeId);
  
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
  for (const connection of outgoingConnections) {
    const message: DataMessage = {
      id: `terraform-run-${run.id}-${Date.now()}`,
      source: this.nodeId,
      target: connection.target,
      connectionId: connection.id,
      format: 'json',
      payload: {
        operation: 'run_completed',
        runId: run.id,
        workspaceId: run.workspaceId,
        workspaceName: run.workspaceName,
        status: run.status,
        duration: run.duration,
        resourceAdditions: run.resourceAdditions,
        resourceChanges: run.resourceChanges,
        resourceDestructions: run.resourceDestructions,
        hasChanges: run.hasChanges,
        source: 'terraform',
      },
      timestamp: Date.now(),
      status: 'pending',
    };
    
    this.sendMessageToTarget(this.nodeId, connection.target, message);
  }
}
```

**–®–∞–≥ 3:** –í—ã–∑—ã–≤–∞—Ç—å sendRunResults() –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è runs
–í –º–µ—Ç–æ–¥–µ `updateActiveRuns()`, –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `run.status = 'applied'` –∏–ª–∏ `'errored'`, –≤—ã–∑–≤–∞—Ç—å `sendRunResults()`.

**–®–∞–≥ 4:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ EmulationEngine
–í `EmulationEngine.initializeTerraformEngine()`, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å callback:
```typescript
const sendMessageCallback = (sourceId: string, targetId: string, message: DataMessage) => {
  this.dataFlowEngine.addMessage(message);
};
engine.setDataFlowCallback(sendMessageCallback);
engine.setNodeId(node.id);
```

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Connection Rules

**–®–∞–≥ 1:** –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/services/connection/rules/terraformRules.ts`

**–®–∞–≥ 2:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è VCS ‚Üí Terraform
```typescript
export function createTerraformVCSRule(discovery: ServiceDiscovery): ConnectionRule {
  return {
    sourceType: ['gitlab-ci', 'github', 'webhook'],
    targetTypes: ['terraform'],
    priority: 10,
    updateTargetConfig: (source, target, connection, metadata) => {
      if (!target?.data || !source?.data) return null;
      
      const targetConfig = target.data.config || {};
      const workspaces = Array.isArray(targetConfig.workspaces) ? targetConfig.workspaces : [];
      
      // –ù–∞–π—Ç–∏ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å workspace –¥–ª—è —ç—Ç–æ–≥–æ VCS
      const vcsRepo = source.data.config?.repository || source.data.config?.repo;
      if (!vcsRepo) return null;
      
      // –û–±–Ω–æ–≤–∏—Ç—å –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å workspace —Å VCS repo
      // ...
      
      return { workspaces: updatedWorkspaces };
    },
  };
}
```

**–®–∞–≥ 3:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è Terraform ‚Üí Kubernetes
```typescript
export function createTerraformKubernetesRule(discovery: ServiceDiscovery): ConnectionRule {
  return {
    sourceType: ['terraform'],
    targetTypes: ['kubernetes', 'docker'],
    priority: 10,
    updateSourceConfig: (source, target, connection, metadata) => {
      // –î–æ–±–∞–≤–∏—Ç—å notification destination –≤ Terraform workspace
      // ...
    },
  };
}
```

**–®–∞–≥ 4:** –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –≤ `src/services/connection/rules/index.ts`

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI –ø—Ä–æ–±–ª–µ–º

**–®–∞–≥ 1:** –£–±—Ä–∞—Ç—å window.confirm()
–ó–∞–º–µ–Ω–∏—Ç—å:
```typescript
if (window.confirm(`Are you sure?`)) {
  // delete
}
```

–ù–∞:
```typescript
const [confirmingDelete, setConfirmingDelete] = useState<string | null>(null);

// –í UI:
{confirmingDelete === workspace.id ? (
  <div className="flex gap-2">
    <Button onClick={() => { removeWorkspace(workspace.id); setConfirmingDelete(null); }}>
      Confirm
    </Button>
    <Button variant="outline" onClick={() => setConfirmingDelete(null)}>
      Cancel
    </Button>
  </div>
) : (
  <Button onClick={() => setConfirmingDelete(workspace.id)}>
    Delete
  </Button>
)}
```

**–®–∞–≥ 2:** –°–¥–µ–ª–∞—Ç—å —Ç–∞–±—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º–∏
```typescript
<TabsList className="flex flex-wrap gap-2">
  {/* tabs */}
</TabsList>
```

**–®–∞–≥ 3:** –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```typescript
const [editingWorkspace, setEditingWorkspace] = useState<string | null>(null);

// –í UI:
{editingWorkspace === workspace.id ? (
  // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
) : (
  // –ü—Ä–æ—Å–º–æ—Ç—Ä
)}
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (10/10)
- [ ] –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Terraform Cloud/Enterprise —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [ ] –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [ ] –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–æ—Å–ª–µ runs
- [ ] Connection Rules —Ä–∞–±–æ—Ç–∞—é—Ç

### UI/UX (10/10)
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Terraform Cloud/Enterprise
- [ ] –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞
- [ ] –í–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—É
- [ ] –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Dialog/confirm
- [ ] –¢–∞–±—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã
- [ ] –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å —ç–º—É–ª—è—Ü–∏–µ–π

### –°–∏–º—É–ª—è—Ç–∏–≤–Ω–æ—Å—Ç—å (10/10)
- [ ] Terraform –≤–ª–∏—è–µ—Ç –Ω–∞ –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç—Ä–∞–∂–∞—é—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Graceful degradation –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Terraform Cloud/Enterprise
- https://developer.hashicorp.com/terraform/cloud-docs
- https://developer.hashicorp.com/terraform/enterprise
- https://developer.hashicorp.com/terraform/cloud-docs/api-docs

### –ü—Ä–∏–º–µ—Ä—ã Connection Rules
- `src/services/connection/rules/vaultRules.ts`
- `src/services/connection/rules/kongRules.ts`
- `src/services/connection/rules/envoyRules.ts`

### –ü—Ä–∏–º–µ—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `src/core/GitLabCIEmulationEngine.ts` - –º–µ—Ç–æ–¥ `sendPipelineResults()`
- `src/core/ArgoCDEmulationEngine.ts` - –º–µ—Ç–æ–¥ `sendNotification()`

---

## üöÄ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. ‚úÖ **–ö–†–ò–¢–ò–ß–ù–û:** –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ runs - **–í–´–ü–û–õ–ù–ï–ù–û**
2. ‚úÖ **–ö–†–ò–¢–ò–ß–ù–û:** Connection Rules –¥–ª—è Terraform - **–í–´–ü–û–õ–ù–ï–ù–û**
3. ‚úÖ **–ö–†–ò–¢–ò–ß–ù–û:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π - **–í–´–ü–û–õ–ù–ï–ù–û**
4. ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–æ—Å–æ–±–ª–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã Terraform (–≠—Ç–∞–ø 6.5) - **–¢–†–ï–ë–£–ï–¢–°–Ø**
   - –£–¥–∞–ª–∏—Ç—å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é runs
   - –î–æ–±–∞–≤–∏—Ç—å HCL –∫–æ–¥ –∏ –ø–∞—Ä—Å–∏–Ω–≥
   - –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç VCS, –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, State backend
5. ‚úÖ **–í–ê–ñ–ù–û:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI –ø—Ä–æ–±–ª–µ–º (—É–±—Ä–∞—Ç—å confirm, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å) - **–í–´–ü–û–õ–ù–ï–ù–û**
6. ‚úÖ **–í–ê–ñ–ù–û:** –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ UI (Variables, Notifications) - **–í–´–ü–û–õ–ù–ï–ù–û**
7. ‚úÖ **–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Tags - **–í–´–ü–û–õ–ù–ï–ù–û**
8. ‚úÖ **–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û:** –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è workspaces - **–í–´–ü–û–õ–ù–ï–ù–û**
9. ‚úÖ **–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û:** –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä run (expandable card) - **–í–´–ü–û–õ–ù–ï–ù–û**
10. ‚úÖ **–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û:** Run Policies (approval workflows) - **–í–´–ü–û–õ–ù–ï–ù–û**

---

## ‚úÖ –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤–µ—Ä—Å–∏—è 0.1.8zf)

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è runs
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ (graceful degradation)
- ‚úÖ Connection Rules –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (VCS, Kubernetes, Argo CD, Vault)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DataFlowEngine –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI: —É–±—Ä–∞–Ω window.confirm(), —Ç–∞–±—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Variables –≤ TerraformEmulationEngine –∏ UI (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, sensitive, HCL)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Notifications –≤ TerraformEmulationEngine –∏ UI (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, —Ç–∏–ø—ã: webhook, slack, email, component, —É—Å–ª–æ–≤–∏—è)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Tags –≤ TerraformEmulationEngine –∏ UI (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è workspaces –ø–æ tags, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ tags)

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–≤–µ—Ä—Å–∏—è 0.1.8zf):
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤ variables –∏ notifications –≤ —Å–ø–∏—Å–∫–µ workspaces
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã badges —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º variables –¥–ª—è –∫–∞–∂–¥–æ–≥–æ workspace
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã badges —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º notifications –¥–ª—è –∫–∞–∂–¥–æ–≥–æ workspace
  - ‚úÖ –°—á–µ—Ç—á–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å variables/notifications
- ‚úÖ –ú–µ—Ç–æ–¥ getStateOutputs –≤ TerraformEmulationEngine
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è outputs –∏–∑ state –¥–ª—è workspace
  - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ state outputs —á–µ—Ä–µ–∑ API

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–≤–µ—Ä—Å–∏—è 0.1.8zf - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ):
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ plan output –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ run
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è planOutput –∏ applyOutput –≤ TerraformRun –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  - ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è plan output –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ run –≤ —Å—Ç–∞—Ç—É—Å 'planned'
  - ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è apply output –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ apply (success/failure)
  - ‚úÖ –ú–µ—Ç–æ–¥ generateResourceChanges() –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ plan output –≤ UI: summary, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ apply output –≤ UI: summary, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, state outputs
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö runs
  - ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–ª—è runs —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'planning' –∏–ª–∏ 'applying'
  - ‚úÖ –†–∞—Å—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –æ–∂–∏–¥–∞–µ–º–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (elapsed time)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è runs –ø–æ workspace (run history)
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω state runWorkspaceFilter –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ workspace
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω Select —Ñ–∏–ª—å—Ç—Ä –≤ CardHeader –≤–∫–ª–∞–¥–∫–∏ Runs
  - ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è runs –ø–æ workspaceId –≤ filteredRuns useMemo

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–≤–µ—Ä—Å–∏—è 0.1.8zf - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ 2):
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ —Å —É—á–µ—Ç–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–≠—Ç–∞–ø 6.3)
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ connectedComponents, outgoingMessages, incomingWebhooks –≤ TerraformEngineMetrics
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—á–µ—Ç—á–∏–∫–∏ outgoingMessagesCount –∏ incomingWebhooksCount
  - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ updateMetrics() —Å —É—á–µ—Ç–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
  - ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ outgoingMessages –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ sendRunResults()
  - ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ incomingWebhooks –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ webhooks —á–µ—Ä–µ–∑ triggerRun()
  - ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ customMetrics –≤ EmulationEngine
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ Settings
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ Organization Name (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–µ)
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–º—É–ª—è—Ü–∏–∏: runTriggerRate, failureRate, vcsWebhookProbability
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: averagePlanDuration, averageApplyDuration
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π: changeProbability, defaultStateResources
  - ‚úÖ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å TerraformEmulationConfig
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ State
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä state version (expandable card)
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ lineage –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ outputs –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–µ—Ç–∞–ª–µ–π state: ID, workspace ID, version, serial, resources, lineage
  - ‚úÖ –°–≤–µ—Ä–Ω—É—Ç—ã–π –≤–∏–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ä–∞—Ç–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –ø–µ—Ä–≤—ã–µ 2 outputs

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–≤–µ—Ä—Å–∏—è 0.1.8zf - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ 3):
- ‚úÖ Run Policies (approval workflows) - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å TerraformRunPolicy —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π manual_approval, Sentinel, OPA
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å RunPolicyCheckResult –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏ policies
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ runPolicies –≤ TerraformWorkspace
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ policyChecks –≤ TerraformRun –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ approval
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ checkRunPolicies() –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ policies –ø–µ—Ä–µ–¥ apply
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ approveRun() –¥–ª—è manual approval
  - ‚úÖ CRUD –º–µ—Ç–æ–¥—ã –¥–ª—è policies: addRunPolicy(), updateRunPolicy(), deleteRunPolicy(), getRunPolicies()
  - ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ policies –≤ lifecycle runs (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ apply –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ approval)
  - ‚úÖ –í UI –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "Run Policies" —Å –ø–æ–ª–Ω—ã–º CRUD —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
  - ‚úÖ –í UI –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "Approve" –¥–ª—è runs, —Ç—Ä–µ–±—É—é—â–∏—Ö approval (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–ª—è runs —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'planned' –∏ requiresApproval=true)
  - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å–ª–æ–≤–∏–π policies: onPlanOnly, onApply, minResourceChanges, requireDestruction
  - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ policies: manual_approval, sentinel, opa

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–≤–µ—Ä—Å–∏—è 0.1.8zf - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ 4):
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è run timeline (–≥—Ä–∞—Ñ–∏–∫ –∏—Å—Ç–æ—Ä–∏–∏ runs)
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≥—Ä–∞—Ñ–∏–∫ –∏—Å—Ç–æ—Ä–∏–∏ runs –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞ –≤–æ –≤–∫–ª–∞–¥–∫—É Runs
  - ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ runs –ø–æ —á–∞—Å–∞–º —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º success/failed/active runs
  - ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AreaChart –∏–∑ Recharts –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
  - ‚úÖ –ì—Ä–∞—Ñ–∏–∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ state versions (diff –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏)
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–≤—É—Ö state versions –≤–æ –≤–∫–ª–∞–¥–∫–µ State
  - ‚úÖ –í—ã–±–æ—Ä "From" –∏ "To" –≤–µ—Ä—Å–∏–π —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö state
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ diff —Ä–µ—Å—É—Ä—Å–æ–≤ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ diff outputs (–¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ/—É–¥–∞–ª–µ–Ω–Ω—ã–µ/–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ outputs)
  - ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ü–≤–µ—Ç–æ–º (–∑–µ–ª–µ–Ω—ã–π –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–π, –∫—Ä–∞—Å–Ω—ã–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏–π, –∂–µ–ª—Ç—ã–π –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π)
  - ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞–¥ —Å–ø–∏—Å–∫–æ–º state versions
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π resources (tracking –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏)
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "Resource Changes History" –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ state version
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ runs, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–µ–ª–∏ –∫ —Å–æ–∑–¥–∞–Ω–∏—é —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ state
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤ (additions/changes/destructions) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ run
  - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–∑ planOutput (–ø–µ—Ä–≤—ã–µ 3 –∏–∑–º–µ–Ω–µ–Ω–∏—è)
  - ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ runs –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
  - ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è runs –ø–æ workspace –∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è state

### –û—Å—Ç–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å:

#### –≠—Ç–∞–ø 3.3: –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è Terraform –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–ó–∞–¥–∞—á–∏:**
- [x] **3.3.1** ‚úÖ Terraform ‚Üí Kubernetes: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ notification destination - **–í–´–ü–û–õ–ù–ï–ù–û** (createTerraformKubernetesRule)
- [x] **3.3.2** ‚úÖ Terraform ‚Üí Argo CD: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ notification destination - **–í–´–ü–û–õ–ù–ï–ù–û** (createTerraformArgoCDRule)
- [x] **3.3.3** ‚úÖ Terraform ‚Üí Observability: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ notification destination - **–í–´–ü–û–õ–ù–ï–ù–û** (createTerraformObservabilityRule)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ó–ê–î–ê–ß–ò –í–´–ü–û–õ–ù–ï–ù–´ (–≤–µ—Ä—Å–∏—è 0.1.8zf)

---

#### –ö–†–ò–¢–ò–ß–ù–û: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–æ—Å–æ–±–ª–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã Terraform (–≠—Ç–∞–ø 6.5) ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:** Terraform —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±–æ—Å–æ–±–ª–µ–Ω–Ω–æ - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç runs –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤. –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, –≥–¥–µ Terraform –∑–∞–≤–∏—Å–∏—Ç –æ—Ç HCL –∫–æ–¥–∞, –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ State backend.

**–ó–∞–¥–∞—á–∏:**

- [x] **6.5.1** ‚úÖ –£–¥–∞–ª–∏—Ç—å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é runs (`triggerAutoRuns()`, `triggerVCSWebhooks()`) –∏–∑ `performUpdate()` - **–í–´–ü–û–õ–ù–ï–ù–û**
- [x] **6.5.2** ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ HCL –∫–æ–¥–∞ –≤ `TerraformWorkspace` (–ø–æ–ª–µ `hclCode`, –º–µ—Ç–æ–¥—ã `setHCLCode()`, `getHCLCode()`) - **–í–´–ü–û–õ–ù–ï–ù–û**
- [x] **6.5.3** ‚úÖ –ò–∑–≤–ª–µ–∫–∞—Ç—å HCL –∫–æ–¥ –∏–∑ webhook payload –æ—Ç VCS –≤ `createTerraformHandler()` - **–í–´–ü–û–õ–ù–ï–ù–û**
- [x] **6.5.4** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ HCL –∫–æ–¥–∞ (`parseHCLCode()`) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ - **–í–´–ü–û–õ–ù–ï–ù–û**
- [x] **6.5.5** ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç VCS - –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å runs –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏–ª–∏ HCL –∫–æ–¥–∞ - **–í–´–ü–û–õ–ù–ï–ù–û**
- [x] **6.5.6** ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ - –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å apply –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å Kubernetes/Docker/AWS - **–í–´–ü–û–õ–ù–ï–ù–û**
- [x] **6.5.7** ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç State backend - –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å runs –µ—Å–ª–∏ `enableRemoteState=true` –Ω–æ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è - **–í–´–ü–û–õ–ù–ï–ù–û**
- [x] **6.5.8** ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`vcsConnected`, `stateBackendConnected`, `providersConnected`, `blockedRuns`) - **–í–´–ü–û–õ–ù–ï–ù–û**
- [x] **6.5.9** ‚úÖ –î–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è HCL –∫–æ–¥–∞ –≤–æ –≤–∫–ª–∞–¥–∫–µ Workspaces - **–í–´–ü–û–õ–ù–ï–ù–û**
- [x] **6.5.10** ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å Connection Rules –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–∏–º–µ—Ä–∞ HCL –∫–æ–¥–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è VCS ‚Üí Terraform - **–í–´–ü–û–õ–ù–ï–ù–û**

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ù–û - –±–µ–∑ —ç—Ç–æ–≥–æ Terraform –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±–æ—Å–æ–±–ª–µ–Ω–Ω–æ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ó–ê–î–ê–ß–ò –í–´–ü–û–õ–ù–ï–ù–´ (–≤–µ—Ä—Å–∏—è 0.1.8zf)

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–° (–≤–µ—Ä—Å–∏—è 0.1.8zf)

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏ –≤–∞–∂–Ω—ã–µ —ç—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã:**
- ‚úÖ –≠—Ç–∞–ø 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π - **–í–´–ü–û–õ–ù–ï–ù–û**
- ‚úÖ –≠—Ç–∞–ø 3: Connection Rules –¥–ª—è Terraform (–≤–∫–ª—é—á–∞—è Terraform ‚Üí Observability) - **–í–´–ü–û–õ–ù–ï–ù–û**
- ‚úÖ –≠—Ç–∞–ø 4: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ TerraformEmulationEngine (Run Policies, Variables, Tags, Notifications, State Outputs) - **–í–´–ü–û–õ–ù–ï–ù–û**
- ‚úÖ –≠—Ç–∞–ø 5: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ UI –¥–æ —É—Ä–æ–≤–Ω—è Terraform Cloud/Enterprise - **–í–´–ü–û–õ–ù–ï–ù–û**
- ‚úÖ –≠—Ç–∞–ø 6: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–º—É–ª—è—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–º–µ—Ç—Ä–∏–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, Settings, State) - **–í–´–ü–û–õ–ù–ï–ù–û**
- ‚úÖ –≠—Ç–∞–ø 6.5: –ö–†–ò–¢–ò–ß–ù–û - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–æ—Å–æ–±–ª–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã Terraform - **–í–´–ü–û–õ–ù–ï–ù–û**

**–û—Å—Ç–∞–ª–æ—Å—å (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
- ‚è≥ –≠—Ç–∞–ø 4.6: Organization-level settings (teams, permissions) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- ‚è≥ –≠—Ç–∞–ø 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

**–ü–ª–∞–Ω –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –¥—Ä—É–≥–æ–º —á–∞—Ç–µ Cursor –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.**

import{u as Ws,a as Xs,j as e,e as Ys,r as u,A as ze,B as D,S as _,C as f,h as y,i as w,m as b,T as us,b as ms,c as S,d as Zs,f as E,k,l as m,P as $,ag as Qs,ai as xs,F as et,o as I,x as F,q as L,s as z,t as U,v as J,w as j,a5 as st,I as p,am as hs,a6 as tt,L as r,af as js,y as Z,z as Q,E as ee,G as se,H as te,n as we,J as Ce,a7 as nt,ax as it}from"./index-HDGrDyRq.js";import{P as ne}from"./progress-DX86yUno.js";import{T as ie}from"./textarea-CjQgIquO.js";import{u as at}from"./use-toast-XAAHaGVT.js";import{G as Ue}from"./git-branch-BNBEv1vX.js";import{H as lt}from"./history-C_FhiFpN.js";import{P as Pe}from"./package-CSghdvEv.js";import{S as Je}from"./server-BVCBHfvZ.js";import{U as gs}from"./users-O29_gLR1.js";import{C as rt}from"./chart-column-P2BXSWww.js";import{T as ct}from"./trending-up-CyszUFvc.js";import{R as Me,C as Oe,X as _e,Y as qe,T as Ke,a as He,L as dt,b as ot,B as ut}from"./LineChart-Cj16NB3Q.js";import{A as mt,a as Ge}from"./AreaChart-YCGJOsC2.js";import{C as ps}from"./clock-3yiD5iuE.js";import{B as xt}from"./BarChart-DhtmkRt5.js";import{L as ht}from"./loader-circle-C-DzDWpM.js";import"./value-DZlexiVD.js";function $t({componentId:ae}){const{nodes:vs,updateNode:fs}=Ws(),{isRunning:le,getComponentMetrics:Ns}=Xs(),{toast:g}=at(),q=vs.find(s=>s.id===ae);if(!q)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const d=Ys.getJenkinsEmulationEngine(ae),We=Ns(ae),[Xe,bs]=u.useState([]),[Be,ys]=u.useState([]),[M,ws]=u.useState([]),[Ye,Cs]=u.useState([]),[re,Ze]=u.useState([]),[l,Ps]=u.useState(null),[ce,ke]=u.useState(null),[K,Bs]=u.useState(""),[de,ks]=u.useState("all"),[oe,ue]=u.useState(null),[Ss,me]=u.useState(!1),[xe,Se]=u.useState(""),[he,Ee]=u.useState(1),[Qe,Ae]=u.useState(""),[es,De]=u.useState(""),[Es,je]=u.useState(!1),[Te,H]=u.useState(""),[jt,gt]=u.useState(null),[T,ss]=u.useState(null),[As,Fe]=u.useState(!1),[ts,ns]=u.useState([]),[is,as]=u.useState([]),[Re,ls]=u.useState([]),[pt,vt]=u.useState(null);u.useEffect(()=>{if(!M.length){ls([]);return}const s=Date.now(),t=6e4,n=20,i=[];for(let a=n-1;a>=0;a--){const o=s-(a+1)*t,x=s-a*t,N=M.filter(v=>{const h=v.startTime||(v.duration?s-v.duration:s);return h>=o&&h<x});if(N.length>0){const v=N.filter(O=>O.status==="success").length,h=N.filter(O=>O.status==="failed").length,V=N.filter(O=>O.duration!==void 0),Y=V.length>0?V.reduce((O,Gs)=>O+(Gs.duration||0),0)/V.length/1e3:0;i.push({time:new Date(x).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),builds:N.length,success:v,failed:h,duration:Y})}else i.push({time:new Date(x).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),builds:0,success:0,failed:0,duration:0})}ls(i)},[M]);const[ge,G]=u.useState(""),[pe,W]=u.useState(""),[Ve,X]=u.useState(""),[ve,A]=u.useState("");u.useEffect(()=>{if(!d)return;const s=()=>{try{const n=d.getPipelines(),i=d.getActiveBuilds(),a=d.getAllBuilds(),o=d.getNodes(),x=d.getPlugins(),N=d.getJenkinsMetrics();if(bs(v=>JSON.stringify(v)!==JSON.stringify(n)?n:v),ys(v=>JSON.stringify(v)!==JSON.stringify(i)?i:v),ws(v=>{if(v.length!==a.length)return a;const h=v.filter(Y=>Y.status==="running").length,V=a.filter(Y=>Y.status==="running").length;return h!==V?a:v}),Cs(o),Ze(x),Ps(N),T){const v=a.find(h=>h.id===T);if(v&&(v.status==="running"||v.logs)){const h=d.getBuildLogs(T),V=d.getBuildArtifacts(T);h&&ns(h),V&&as(V)}}}catch(n){console.error("Error updating Jenkins data:",n)}};s();const t=setInterval(s,le?500:2e3);return()=>clearInterval(t)},[d,le,T]);const Ds=s=>{if(ss(s),Fe(!0),d){const t=d.getBuildLogs(s),n=d.getBuildArtifacts(s);t&&ns(t),n&&as(n)}},rs=s=>{if(!d){g({title:"Error",description:"Jenkins engine not available",variant:"destructive"});return}const t=M.find(n=>n.id===s);if(!t){g({title:"Error",description:"Build not found",variant:"destructive"});return}if(t.status!=="running"&&t.status!=="pending"){g({title:"Cannot cancel build",description:`Build is already ${t.status}`,variant:"destructive"});return}try{const n=d.cancelBuild(s);n.success?(g({title:"Build cancelled",description:`Build #${t.number} has been cancelled successfully`}),T===s&&(Fe(!1),ss(null))):g({title:"Cannot cancel build",description:n.reason||"Unknown error",variant:"destructive"})}catch(n){console.error("Error cancelling build:",n),g({title:"Error",description:"Failed to cancel build",variant:"destructive"})}},cs=s=>s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(2)} KB`:`${(s/(1024*1024)).toFixed(2)} MB`,P=q.data.config||{},Ts=P.jenkinsUrl||"http://jenkins:8080",Fs=P.enableCSRF??!0,fe=P.executorCount||2;P.enablePlugins;const ds=P.plugins||["git","docker","kubernetes"],Rs=P.enablePipeline??!0,Vs=P.enableBlueOcean??!1,os=P.enableArtifactArchiving??!0,$s=P.retentionDays||30,B=Xe.length>0?Xe.map(s=>({id:s.id,name:s.name,status:s.status,lastBuild:s.lastBuild,duration:s.duration,branch:s.branch})):P.pipelines||[],C=s=>{if(s.jenkinsUrl!==void 0)try{new URL(s.jenkinsUrl)}catch{g({title:"Invalid URL",description:"Please enter a valid Jenkins URL",variant:"destructive"});return}if(s.executorCount!==void 0){if(s.executorCount<1||s.executorCount>100){g({title:"Invalid executor count",description:"Executor count must be between 1 and 100",variant:"destructive"});return}if(d){const n=d.canUpdateExecutorCount(s.executorCount);if(!n.can){g({title:"Cannot update executors",description:n.reason||"Cannot update executor count",variant:"destructive"});return}}}if(s.retentionDays!==void 0&&(s.retentionDays<1||s.retentionDays>365)){g({title:"Invalid retention days",description:"Retention days must be between 1 and 365",variant:"destructive"});return}const t={...P,...s};if(fs(ae,{data:{...q.data,config:t}}),d)try{d.updateConfig({...q,data:{...q.data,config:t}})}catch(n){console.error("Failed to update Jenkins engine config:",n)}g({title:"Configuration updated",description:"Jenkins configuration has been saved"})},$e=(s,t)=>s.trim()?s.trim().length<2?"Pipeline name must be at least 2 characters":s.trim().length>100?"Pipeline name must be less than 100 characters":/^[a-zA-Z0-9_-]+$/.test(s.trim())?B.some(n=>n.name===s.trim()&&n.id!==t)?"A pipeline with this name already exists":"":"Pipeline name can only contain letters, numbers, hyphens and underscores":"Pipeline name is required",Is=()=>{const s=`pipeline-${Date.now().toString().slice(-6)}`,n={id:String(Date.now()),name:s,lastBuild:0,branch:"main",enabled:!0};C({pipelines:[...B,n]}),g({title:"Pipeline created",description:`Pipeline "${s}" has been created. It will be initialized in emulation.`})},Ls=s=>{const t=B.find(a=>a.id===s);if(!t)return;const n=String(Date.now()),i={...t,id:n,name:`${t.name}-copy`,lastBuild:0};C({pipelines:[...B,i]}),g({title:"Pipeline duplicated",description:`Pipeline "${t.name}" has been duplicated as "${i.name}".`})},R=P.nodes||[],Ie=s=>s.trim()?s.trim().length<2?"Node name must be at least 2 characters":s.trim().length>100?"Node name must be less than 100 characters":/^[a-zA-Z0-9_-]+$/.test(s.trim())?R.some(t=>t.name===s.trim())?"A node with this name already exists":"":"Node name can only contain letters, numbers, hyphens and underscores":"Node name is required",Le=s=>s<1?"Must have at least 1 executor":s>100?"Cannot have more than 100 executors":"",zs=()=>{const s=Ie(xe),t=Le(he);if(G(s),W(t),s||t)return;const n={id:String(Date.now()),name:xe.trim(),numExecutors:he,labels:Qe.split(",").map(i=>i.trim()).filter(i=>i.length>0),description:es.trim()||void 0};C({nodes:[...R,n]}),Se(""),Ee(1),Ae(""),De(""),G(""),W(""),me(!1)},Us=s=>{ue(s)},Js=(s,t)=>{const n=R.map(i=>i.id===s?{...i,...t}:i);C({nodes:n}),ue(null)},Ms=s=>{R.find(n=>n.id===s)&&C({nodes:R.filter(n=>n.id!==s)})},Os=s=>{ke(s)},c=(s,t)=>{if(t.name!==void 0){const n=$e(t.name,s);if(n){X(n),g({title:"Validation error",description:n,variant:"destructive"});return}X("")}try{const n=B.map(i=>i.id===s?{...i,...t}:i);if(C({pipelines:n}),d&&(t.enabled!==void 0&&d.setPipelineEnabled(s,t.enabled!==!1),t.triggers!==void 0||t.parameters!==void 0||t.environmentVariables!==void 0||t.postBuildActions!==void 0||t.scmConfig!==void 0||t.buildTool!==void 0||t.buildCommand!==void 0||t.stages!==void 0||t.artifactPatterns!==void 0||t.workspacePath!==void 0)){const i=n.find(a=>a.id===s);i&&d.updatePipelineConfig(s,{triggers:i.triggers||[],parameters:i.parameters||[],environmentVariables:i.environmentVariables||{},postBuildActions:i.postBuildActions||[],scmConfig:i.scmConfig,buildTool:i.buildTool,buildCommand:i.buildCommand,stages:i.stages,artifactPatterns:i.artifactPatterns,workspacePath:i.workspacePath})}(t.name!==void 0||t.branch!==void 0||t.enabled!==void 0)&&g({title:"Pipeline updated",description:"Pipeline configuration has been saved."})}catch(n){console.error("Error saving pipeline:",n),g({title:"Error",description:"Failed to save pipeline configuration.",variant:"destructive"})}},_s=s=>{const t=B.find(i=>i.id===s);if(!t)return;if(d&&Be.some(i=>i.pipelineId===s&&i.status==="running")){g({title:"Cannot delete pipeline",description:"Pipeline has active builds. Please wait for builds to complete or cancel them first.",variant:"destructive"});return}C({pipelines:B.filter(i=>i.id!==s)}),g({title:"Pipeline deleted",description:`Pipeline "${t.name}" has been deleted.`})},Ne=s=>s.trim()?s.trim().length<2?"Plugin name must be at least 2 characters":s.trim().length>100?"Plugin name must be less than 100 characters":/^[a-zA-Z0-9_-]+$/.test(s.trim())?(P.plugins||[]).some(n=>(typeof n=="string"?n:n.name)===s.trim())?"This plugin is already installed":"":"Plugin name can only contain letters, numbers, hyphens and underscores":"Plugin name is required",qs=s=>{const t=s.trim();if(!t){A("Plugin name is required");return}const n=Ne(t);if(n){A(n);return}if(d){if(!d.addPlugin(t)){A("This plugin is already installed");return}const a=P.plugins||[];C({plugins:[...a,t]})}else{const i=P.plugins||[];if(i.some(a=>(typeof a=="string"?a:a.name)===t)){A("This plugin is already installed");return}C({plugins:[...i,t]})}H(""),A(""),je(!1),g({title:"Plugin installed",description:`Plugin "${t}" has been installed`})},Ks=s=>{if(d){const n=d.removePlugin(s);if(!n.success){g({title:"Cannot remove plugin",description:n.reason||"Cannot remove plugin",variant:"destructive"});return}}const t=P.plugins||[];C({plugins:t.filter(n=>(typeof n=="string"?n:n.name)!==s)})},Hs=(s,t)=>{d&&(d.setPluginEnabled(s,t),Ze(d.getPlugins()));const i=(P.plugins||[]).map(a=>typeof a=="string"?a===s?{name:a,enabled:t}:a:a.name===s?{...a,enabled:t}:a);C({plugins:i}),g({title:t?"Plugin enabled":"Plugin disabled",description:`Plugin "${s}" has been ${t?"enabled":"disabled"}`})},be=s=>{switch(s){case"success":return e.jsx(js,{className:"h-4 w-4 text-green-500"});case"running":return e.jsx(ht,{className:"h-4 w-4 text-blue-500 animate-spin"});case"failed":return e.jsx(it,{className:"h-4 w-4 text-red-500"});default:return e.jsx(ps,{className:"h-4 w-4 text-muted-foreground"})}},ye=(s,t)=>{if(t===0)return e.jsx(D,{variant:"outline",children:"Never built"});switch(s){case"success":return e.jsx(D,{variant:"default",className:"bg-green-500",children:"Success"});case"running":return e.jsx(D,{variant:"default",className:"bg-blue-500",children:"Running"});case"failed":return e.jsx(D,{variant:"destructive",children:"Failed"});default:return e.jsx(D,{variant:"secondary",children:"Pending"})}};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-500/10",children:e.jsx(ze,{className:"h-6 w-6 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Jenkins"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Continuous Integration & Delivery"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${le?"bg-green-500 animate-pulse":"bg-gray-500"}`}),le?"Running":"Stopped"]}),We&&e.jsxs(D,{variant:"outline",className:"gap-1",children:[e.jsx(ze,{className:"h-3 w-3"}),We.throughput?.toFixed(2)||0," req/s"]})]})]}),e.jsx(_,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(f,{children:[e.jsx(y,{className:"pb-3",children:e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Pipelines"})}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l?.pipelinesTotal||B.length}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[l?.pipelinesEnabled||B.length," enabled"]})]})]}),e.jsxs(f,{children:[e.jsx(y,{className:"pb-3",children:e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Executors"})}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l?`${l.executorBusy}/${l.executorBusy+l.executorIdle}`:fe}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l?`${l.executorUtilization.toFixed(1)}% utilized`:"Available"})]})]}),e.jsxs(f,{children:[e.jsx(y,{className:"pb-3",children:e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Builds"})}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l?.buildsRunning||Be.length||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l?`${l.buildsPerMinute.toFixed(1)}/min`:"Running"})]})]}),e.jsxs(f,{children:[e.jsx(y,{className:"pb-3",children:e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"})}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l&&l.buildsSuccess+l.buildsFailed>0?`${(l.buildsSuccess/(l.buildsSuccess+l.buildsFailed)*100).toFixed(1)}%`:(l&&l.buildsTotal>0,"—")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l?l.buildsSuccess+l.buildsFailed>0?`${l.buildsSuccess} success, ${l.buildsFailed} failed`:l.buildsTotal>0||l.buildsRunning>0?`${l.buildsRunning} running, ${l.buildsPending} pending`:"No builds yet":"No metrics"})]})]})]}),e.jsxs(us,{defaultValue:"pipelines",className:"w-full",children:[e.jsxs(ms,{className:"grid w-full grid-cols-7",children:[e.jsxs(S,{value:"pipelines",className:"gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Pipelines"]}),e.jsxs(S,{value:"builds",className:"gap-2",children:[e.jsx(lt,{className:"h-4 w-4"}),"Builds"]}),e.jsxs(S,{value:"plugins",className:"gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Plugins"]}),e.jsxs(S,{value:"nodes",className:"gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Nodes"]}),e.jsxs(S,{value:"executors",className:"gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),"Executors"]}),e.jsxs(S,{value:"settings",className:"gap-2",children:[e.jsx(Zs,{className:"h-4 w-4"}),"Settings"]}),e.jsxs(S,{value:"metrics",className:"gap-2",children:[e.jsx(rt,{className:"h-4 w-4"}),"Metrics"]})]}),e.jsx(E,{value:"pipelines",className:"space-y-4 mt-4",children:e.jsxs(f,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Pipelines"}),e.jsx(k,{children:"CI/CD pipeline configuration and monitoring"})]}),e.jsxs(m,{size:"sm",onClick:Is,variant:"outline",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"New Pipeline"]})]})}),e.jsx(b,{children:e.jsx("div",{className:"space-y-3",children:B.map(s=>e.jsxs(f,{className:"border-border",children:[e.jsx(y,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[be(s.status),e.jsxs("div",{className:"flex-1",children:[e.jsx(w,{className:"text-lg",children:s.name}),e.jsxs(k,{className:"text-xs mt-1 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-3 w-3"}),s.branch||"main"," • Build #",s.lastBuild,s.duration&&` • ${s.duration}s`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ye(s.status,s.lastBuild),d&&e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{const t=d.triggerBuildManually(s.id);t.success?g({title:"Build triggered",description:`Build #${t.buildId} started for ${s.name}`}):g({title:"Cannot trigger build",description:t.reason||"Unknown error",variant:"destructive"})},disabled:!s.enabled||s.status==="running",children:[e.jsx(Qs,{className:"h-4 w-4 mr-1"}),"Build Now"]}),e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>Os(s.id),title:"Edit pipeline",children:e.jsx(xs,{className:"h-4 w-4"})}),e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>Ls(s.id),title:"Duplicate pipeline",children:e.jsx(et,{className:"h-4 w-4"})}),B.length>1&&e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>_s(s.id),title:"Delete pipeline",children:e.jsx(I,{className:"h-4 w-4"})})]})]})}),s.status==="running"&&e.jsx(b,{children:e.jsx("div",{className:"space-y-2",children:(()=>{const n=Be.find(i=>i.pipelineId===s.id)?.progress||0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{children:[n,"%"]})]}),e.jsx(ne,{value:n,className:"h-2"})]})})()})})]},s.id))})})]})}),e.jsx(E,{value:"plugins",className:"space-y-4 mt-4",children:e.jsxs(f,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Plugins"}),e.jsx(k,{children:"Installed Jenkins plugins"})]}),e.jsxs(m,{size:"sm",onClick:()=>je(!0),variant:"outline",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Install Plugin"]})]})}),e.jsx(b,{children:re.length===0&&ds.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Pe,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No plugins installed"})]}):e.jsx("div",{className:"space-y-2",children:(re.length>0?re:ds.map(t=>typeof t=="string"?{name:t,version:"1.0.0",enabled:!0,active:!0}:{name:t.name||(typeof t=="object"&&t!==null?String(t):"unknown"),version:t.version||"1.0.0",enabled:t.enabled!==!1,active:t.active!==!1,description:t.description})).map(t=>{const n=t.name,i=t.version||"1.0.0",a=t.enabled!==!1,o=re.length>0?t.active!==!1&&a:a,x=t.description;return e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-border rounded-lg bg-card",children:[e.jsx("div",{className:"p-2 rounded bg-primary/10",children:e.jsx(Pe,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:n}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[x||"Plugin installed"," • v",i]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{checked:a,onCheckedChange:N=>Hs(n,N)}),e.jsx(D,{variant:o?"default":"secondary",children:o?"Active":"Inactive"}),e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>Ks(n),children:e.jsx(I,{className:"h-4 w-4"})})]})]},n)})})})]})}),e.jsx(E,{value:"builds",className:"space-y-4 mt-4",children:e.jsxs(f,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Builds"}),e.jsx(k,{children:"Build history and active builds"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{value:de,onValueChange:s=>ks(s),children:[e.jsx(z,{className:"w-32",children:e.jsx(U,{})}),e.jsxs(J,{children:[e.jsx(j,{value:"all",children:"All"}),e.jsx(j,{value:"active",children:"Active"}),e.jsx(j,{value:"success",children:"Success"}),e.jsx(j,{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(st,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(p,{placeholder:"Search builds...",value:K,onChange:s=>Bs(s.target.value),className:"pl-8 w-64"})]})]})]})}),e.jsx(b,{children:(()=>{let s=M;return de==="active"?s=s.filter(t=>t.status==="running"||t.status==="pending"):de==="success"?s=s.filter(t=>t.status==="success"):de==="failed"&&(s=s.filter(t=>t.status==="failed")),K&&(s=s.filter(t=>t.pipelineId.toLowerCase().includes(K.toLowerCase())||t.id.toLowerCase().includes(K.toLowerCase())||B.find(n=>n.id===t.pipelineId)?.name.toLowerCase().includes(K.toLowerCase()))),s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ze,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No builds found"})]}):e.jsx("div",{className:"space-y-3",children:s.map(t=>e.jsxs(f,{className:"border-border",children:[e.jsx(y,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[be(t.status),e.jsxs("div",{className:"flex-1",children:[e.jsx(w,{className:"text-lg",children:B.find(n=>n.id===t.pipelineId)?.name||t.pipelineId}),e.jsxs(k,{className:"text-xs mt-1 flex items-center gap-2",children:["Build #",t.number,t.branch&&e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-3 w-3"}),t.branch]}),t.duration&&` • ${(t.duration/1e3).toFixed(1)}s`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ye(t.status),t.status==="running"&&d&&e.jsxs(m,{size:"sm",variant:"destructive",onClick:()=>rs(t.id),children:[e.jsx(hs,{className:"h-4 w-4 mr-1"}),"Cancel"]}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>Ds(t.id),children:[e.jsx(tt,{className:"h-4 w-4 mr-1"}),"Details"]})]})]})}),t.status==="running"&&t.progress!==void 0&&e.jsx(b,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{children:[t.progress,"%"]})]}),e.jsx(ne,{value:t.progress,className:"h-2"}),t.stages&&t.stages.length>0&&e.jsx("div",{className:"mt-3 space-y-1",children:t.stages.map((n,i)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[be(n.status),e.jsx("span",{className:n.status==="running"?"font-semibold":"",children:n.name})]},i))})]})}),t.status!=="running"&&t.duration&&e.jsx(b,{children:e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Duration: ",(t.duration/1e3).toFixed(1),"s • Started: ",new Date(t.startTime).toLocaleString()]})})]},t.id))})})()})]})}),e.jsx(E,{value:"executors",className:"space-y-4 mt-4",children:e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsx(w,{children:"Executor Configuration"}),e.jsx(k,{children:"Manage concurrent build executors on master node"})]}),e.jsx(b,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"executor-count",children:"Executor Count"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{id:"executor-count",type:"number",min:"1",max:"100",value:fe,onChange:s=>{const t=parseInt(s.target.value)||2;C({executorCount:t})}}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"concurrent builds"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Number of concurrent builds that can run simultaneously on master node"}),l&&e.jsxs("div",{className:"mt-4 p-3 border rounded-md bg-muted",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Current Status:"}),e.jsxs("span",{className:"font-semibold",children:[l.executorBusy," busy / ",l.executorBusy+l.executorIdle," total"]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(ne,{value:l.executorUtilization,className:"h-2 flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[l.executorUtilization.toFixed(1),"%"]})]}),l.executorBusy>0&&e.jsxs("p",{className:"text-xs text-amber-600 mt-2",children:["⚠️ ",l.executorBusy," executor(s) are currently busy. You cannot reduce executor count below this value."]})]})]})})]})}),e.jsx(E,{value:"nodes",className:"space-y-4 mt-4",children:e.jsxs(f,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Jenkins Nodes"}),e.jsx(k,{children:"Manage build agents and executors"})]}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>me(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Add Node"]})]})}),e.jsx(b,{children:(()=>{const s=Ye.length>0?Ye:[{id:"master",name:"master",status:"online",numExecutors:fe,busyExecutors:0,idleExecutors:fe,labels:["master"]},...R.map(t=>({id:t.id,name:t.name,status:"online",numExecutors:t.numExecutors||1,busyExecutors:0,idleExecutors:t.numExecutors||1,labels:t.labels||[],description:t.description}))];return s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Je,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No nodes configured"})]}):e.jsx("div",{className:"space-y-3",children:s.map(t=>{const n=t.id==="master",i=R.find(a=>a.id===t.id);return e.jsxs(f,{className:"border-border",children:[e.jsx(y,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded ${t.status==="online"?"bg-green-500/10":"bg-gray-500/10"}`,children:e.jsx(Je,{className:`h-4 w-4 ${t.status==="online"?"text-green-500":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(w,{className:"text-lg",children:[t.name,n&&e.jsx(D,{variant:"outline",className:"ml-2 text-xs",children:"Master"})]}),e.jsxs(k,{className:"text-xs mt-1",children:[t.numExecutors," executors • ",t.busyExecutors," busy • ",t.idleExecutors," idle",n&&e.jsx("span",{className:"block mt-1 text-muted-foreground",children:"Master node is the Jenkins controller that manages builds and coordinates agents."})]}),i?.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{variant:t.status==="online"?"default":"secondary",children:t.status}),!n&&e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>Us(t.id),children:e.jsx(xs,{className:"h-4 w-4"})}),e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>Ms(t.id),children:e.jsx(I,{className:"h-4 w-4"})})]})]})]})}),t.labels&&t.labels.length>0&&e.jsx(b,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:t.labels.map((a,o)=>e.jsx(D,{variant:"outline",className:"text-xs",children:a},o))})})]},t.id)})})})()})]})}),e.jsx(E,{value:"settings",className:"space-y-4 mt-4",children:e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsx(w,{children:"Server Configuration"}),e.jsx(k,{children:"Jenkins server settings"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"jenkins-url",children:"Jenkins URL"}),e.jsx(p,{id:"jenkins-url",value:Ts,onChange:s=>C({jenkinsUrl:s.target.value}),placeholder:"http://jenkins:8080"})]}),e.jsx(_,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:"Enable CSRF Protection"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Protect against cross-site request forgery"})]}),e.jsx(F,{checked:Fs,onCheckedChange:s=>C({enableCSRF:s})})]}),e.jsx(_,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:"Enable Pipelines"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable Jenkins pipeline support"})]}),e.jsx(F,{checked:Rs,onCheckedChange:s=>C({enablePipeline:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:"Enable Blue Ocean"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Modern pipeline UI"})]}),e.jsx(F,{checked:Vs,onCheckedChange:s=>C({enableBlueOcean:s})})]}),e.jsx(_,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:"Enable Artifact Archiving"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Store build artifacts"})]}),e.jsx(F,{checked:os,onCheckedChange:s=>C({enableArtifactArchiving:s})})]}),os&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"retention-days",children:"Retention Days"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{id:"retention-days",type:"number",min:"1",max:"365",value:$s,onChange:s=>C({retentionDays:parseInt(s.target.value)||30})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"days"})]})]})]})]})}),e.jsx(E,{value:"metrics",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-5 w-5"}),"Build Trends"]}),e.jsx(k,{children:"Build count over time"})]}),e.jsx(b,{children:e.jsx(Me,{width:"100%",height:300,children:e.jsxs(mt,{data:Re,children:[e.jsx(Oe,{strokeDasharray:"3 3"}),e.jsx(_e,{dataKey:"time"}),e.jsx(qe,{}),e.jsx(Ke,{}),e.jsx(He,{}),e.jsx(Ge,{type:"monotone",dataKey:"builds",stackId:"1",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),e.jsx(Ge,{type:"monotone",dataKey:"success",stackId:"2",stroke:"#82ca9d",fill:"#82ca9d",fillOpacity:.6}),e.jsx(Ge,{type:"monotone",dataKey:"failed",stackId:"2",stroke:"#ff7300",fill:"#ff7300",fillOpacity:.6})]})})})]}),e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-5 w-5 text-green-500"}),"Success Rate"]}),e.jsx(k,{children:"Build success rate over time"})]}),e.jsx(b,{children:e.jsx(Me,{width:"100%",height:300,children:e.jsxs(dt,{data:Re.map(s=>({...s,successRate:s.builds>0?s.success/s.builds*100:0})),children:[e.jsx(Oe,{strokeDasharray:"3 3"}),e.jsx(_e,{dataKey:"time"}),e.jsx(qe,{domain:[0,100]}),e.jsx(Ke,{formatter:s=>`${s.toFixed(1)}%`}),e.jsx(He,{}),e.jsx(ot,{type:"monotone",dataKey:"successRate",stroke:"#82ca9d",strokeWidth:2,name:"Success Rate",dot:{fill:"#82ca9d",r:4}})]})})})]}),e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5"}),"Average Build Duration"]}),e.jsx(k,{children:"Average build duration in seconds"})]}),e.jsx(b,{children:e.jsx(Me,{width:"100%",height:300,children:e.jsxs(xt,{data:Re,children:[e.jsx(Oe,{strokeDasharray:"3 3"}),e.jsx(_e,{dataKey:"time"}),e.jsx(qe,{}),e.jsx(Ke,{formatter:s=>`${s.toFixed(1)}s`}),e.jsx(He,{}),e.jsx(ut,{dataKey:"duration",fill:"#8884d8",name:"Duration (s)"})]})})})]}),e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-5 w-5"}),"Executor Utilization"]}),e.jsx(k,{children:"Current executor usage"})]}),e.jsx(b,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-bold",children:[l.executorUtilization.toFixed(1),"%"]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:[l.executorBusy," / ",l.executorBusy+l.executorIdle," executors busy"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Busy"}),e.jsx("span",{className:"font-medium",children:l.executorBusy})]}),e.jsx(ne,{value:l.executorUtilization,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Idle"}),e.jsx("span",{className:"font-medium",children:l.executorIdle})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.buildsPerMinute.toFixed(1)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Builds/min"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(l.averageBuildDuration/1e3).toFixed(1),"s"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Duration"})]})]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No metrics available"})})]})]})})]}),ce&&(()=>{let s=B.find(t=>t.id===ce);if(!s)return null;if(d){const t=d.getPipelineConfig(ce);t&&(s={...s,scmConfig:t.scmConfig,buildTool:t.buildTool,buildCommand:t.buildCommand,stages:t.stages,artifactPatterns:t.artifactPatterns,workspacePath:t.workspacePath})}return e.jsx(Z,{open:!!ce,onOpenChange:t=>!t&&ke(null),children:e.jsxs(Q,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Edit Pipeline Configuration"}),e.jsx(te,{children:"Configure pipeline settings, triggers, parameters, and post-build actions"})]}),e.jsxs(us,{defaultValue:"basic",className:"w-full",children:[e.jsxs(ms,{className:"grid w-full grid-cols-6",children:[e.jsx(S,{value:"basic",children:"Basic"}),e.jsx(S,{value:"build",children:"Build Config"}),e.jsx(S,{value:"triggers",children:"Triggers"}),e.jsx(S,{value:"parameters",children:"Parameters"}),e.jsx(S,{value:"environment",children:"Environment"}),e.jsx(S,{value:"actions",children:"Post-Build"})]}),e.jsxs(E,{value:"basic",className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"pipeline-name",children:"Name *"}),e.jsx(p,{id:"pipeline-name",defaultValue:s.name,onChange:t=>{const n=$e(t.target.value,s.id);X(n)},onBlur:t=>{const n=t.target.value.trim(),i=$e(n,s.id);X(i),!i&&n!==s.name&&c(s.id,{name:n})},className:Ve?"border-red-500":""}),Ve&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(we,{className:"h-3 w-3"}),Ve]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"pipeline-branch",children:"Branch"}),e.jsx(p,{id:"pipeline-branch",defaultValue:s.branch||"main",onBlur:t=>{t.target.value!==s.branch&&c(s.id,{branch:t.target.value})}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:"Enabled"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable/disable pipeline"})]}),e.jsx(F,{checked:s.enabled!==!1,onCheckedChange:t=>{c(s.id,{enabled:t}),d&&d.setPipelineEnabled(s.id,t)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Status"}),e.jsxs("div",{className:"p-2 border rounded-md bg-muted",children:[ye(s.status,s.lastBuild),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.lastBuild===0?"Pipeline has never been built. Status will be determined after first build.":`Status is determined by the last build (#${s.lastBuild}).`})]})]})]}),e.jsxs(E,{value:"build",className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"SCM Configuration"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Configure source control management"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"SCM Type"}),e.jsxs(L,{value:s.scmConfig?.type||"git",onValueChange:t=>{c(s.id,{scmConfig:{...s.scmConfig||{},type:t,url:s.scmConfig?.url||""}})},children:[e.jsx(z,{children:e.jsx(U,{})}),e.jsxs(J,{children:[e.jsx(j,{value:"git",children:"Git"}),e.jsx(j,{value:"svn",children:"Subversion (SVN)"}),e.jsx(j,{value:"mercurial",children:"Mercurial"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Repository URL *"}),e.jsx(p,{placeholder:"https://github.com/example/repo.git",value:s.scmConfig?.url||"",onChange:t=>{const n=t.target.value;c(s.id,{scmConfig:{...s.scmConfig||{type:"git"},url:n}})},onBlur:t=>{const n=t.target.value.trim();n&&!/^(https?|git|ssh):\/\//.test(n)&&g({title:"Invalid URL",description:"Please enter a valid repository URL",variant:"destructive"})}}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Repository URL for source code"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Branch"}),e.jsx(p,{placeholder:"main",value:s.scmConfig?.branch||s.branch||"main",onChange:t=>{c(s.id,{scmConfig:{...s.scmConfig||{type:"git",url:s.scmConfig?.url||""},branch:t.target.value}})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Credentials (optional)"}),e.jsx(p,{placeholder:"credentials-id",value:s.scmConfig?.credentials||"",onChange:t=>{c(s.id,{scmConfig:{...s.scmConfig||{type:"git",url:s.scmConfig?.url||""},credentials:t.target.value||void 0}})}}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Jenkins credentials ID for authentication"})]})]})]}),e.jsx(_,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Build Tool"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Select build tool and configure build commands"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Build Tool"}),e.jsxs(L,{value:s.buildTool||"gradle",onValueChange:t=>{c(s.id,{buildTool:t})},children:[e.jsx(z,{children:e.jsx(U,{})}),e.jsxs(J,{children:[e.jsx(j,{value:"maven",children:"Maven"}),e.jsx(j,{value:"gradle",children:"Gradle"}),e.jsx(j,{value:"npm",children:"npm/yarn"}),e.jsx(j,{value:"make",children:"Make"}),e.jsx(j,{value:"custom",children:"Custom"})]})]})]}),(s.buildTool==="custom"||!s.buildTool)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Custom Build Command"}),e.jsx(p,{placeholder:"./build.sh",value:s.buildCommand||"",onChange:t=>{c(s.id,{buildCommand:t.target.value})}}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Custom command to execute for building"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Workspace Path (optional)"}),e.jsx(p,{placeholder:"/var/jenkins_home/workspace/${JOB_NAME}",value:s.workspacePath||"",onChange:t=>{c(s.id,{workspacePath:t.target.value||void 0})}}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Custom workspace path (supports ","${JOB_NAME}",", ","${WORKSPACE}"," variables)"]})]})]})]}),e.jsx(_,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Pipeline Stages"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure build stages (leave empty to use defaults)"})]}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{const t=[...s.stages||[],{name:"New Stage",type:"sequential"}];c(s.id,{stages:t})},children:[e.jsx($,{className:"h-4 w-4 mr-1"}),"Add Stage"]})]}),(s.stages||[]).length>0?e.jsx("div",{className:"space-y-3",children:s.stages.map((t,n)=>e.jsx(f,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Stage Name"}),e.jsx(p,{value:t.name,onChange:i=>{const a=[...s.stages||[]];a[n]={...t,name:i.target.value},c(s.id,{stages:a})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Type"}),e.jsxs(L,{value:t.type,onValueChange:i=>{const a=[...s.stages||[]];a[n]={...t,type:i},c(s.id,{stages:a})},children:[e.jsx(z,{children:e.jsx(U,{})}),e.jsxs(J,{children:[e.jsx(j,{value:"sequential",children:"Sequential"}),e.jsx(j,{value:"parallel",children:"Parallel"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Steps (one per line, optional)"}),e.jsx(ie,{rows:3,value:t.steps?.join(`
`)||"",onChange:i=>{const a=i.target.value.split(`
`).map(x=>x.trim()).filter(x=>x),o=[...s.stages||[]];o[n]={...t,steps:a.length>0?a:void 0},c(s.id,{stages:o})},placeholder:`echo 'Building...'
npm run build`})]}),e.jsxs(m,{size:"sm",variant:"ghost",onClick:()=>{const i=(s.stages||[]).filter((a,o)=>o!==n);c(s.id,{stages:i.length>0?i:void 0})},children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),"Remove Stage"]})]})},n))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm border border-dashed rounded-md",children:"No custom stages configured. Default stages will be used based on build tool."})]}),e.jsx(_,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Artifact Patterns"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Configure patterns for artifact archiving (leave empty to use defaults)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Artifact Patterns (one per line)"}),e.jsx(ie,{rows:4,value:(s.artifactPatterns||[]).join(`
`),onChange:t=>{const n=t.target.value.split(`
`).map(i=>i.trim()).filter(i=>i);c(s.id,{artifactPatterns:n.length>0?n:void 0})},placeholder:`**/*.jar
target/*.war
dist/**/*`}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Examples: **/*.jar, target/*.war, dist/**/*. Use wildcards (*) for pattern matching."})]})]})]}),e.jsx(E,{value:"triggers",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Build Triggers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure when builds should be triggered"})]}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{const t=[...s.triggers||[],{type:"webhook",enabled:!0,config:{}}];c(s.id,{triggers:t})},children:[e.jsx($,{className:"h-4 w-4 mr-1"}),"Add Trigger"]})]}),(s.triggers||[]).map((t,n)=>e.jsxs(f,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{value:t.type,onValueChange:i=>{const a=[...s.triggers||[]];a[n]={...t,type:i},c(s.id,{triggers:a})},children:[e.jsx(z,{className:"w-32",children:e.jsx(U,{})}),e.jsxs(J,{children:[e.jsx(j,{value:"webhook",children:"Webhook"}),e.jsx(j,{value:"cron",children:"Cron"}),e.jsx(j,{value:"scm",children:"SCM Polling"}),e.jsx(j,{value:"manual",children:"Manual Only"})]})]}),e.jsx(F,{checked:t.enabled,onCheckedChange:i=>{const a=[...s.triggers||[]];a[n]={...t,enabled:i},c(s.id,{triggers:a})}})]}),e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>{const i=(s.triggers||[]).filter((a,o)=>o!==n);c(s.id,{triggers:i})},children:e.jsx(I,{className:"h-4 w-4"})})]}),t.type==="webhook"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Branches (comma-separated, empty for all)"}),e.jsx(p,{placeholder:"main, develop, release/*",defaultValue:t.config?.branches?.join(", "),onBlur:i=>{const a=i.target.value.split(",").map(x=>x.trim()).filter(x=>x),o=[...s.triggers||[]];o[n]={...t,config:{...t.config,branches:a}},c(s.id,{triggers:o})}})]}),t.type==="cron"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Cron Expression"}),e.jsx(p,{placeholder:"H/15 * * * *",defaultValue:t.config?.schedule,onBlur:i=>{const a=[...s.triggers||[]];a[n]={...t,config:{...t.config,schedule:i.target.value}},c(s.id,{triggers:a})}}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Example: H/15 * * * * (every 15 minutes)"})]}),t.type==="scm"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Poll Interval (minutes)"}),e.jsx(p,{type:"number",min:"1",placeholder:"5",defaultValue:t.config?.pollInterval,onBlur:i=>{const a=[...s.triggers||[]];a[n]={...t,config:{...t.config,pollInterval:parseInt(i.target.value)||5}},c(s.id,{triggers:a})}})]})]},n)),(!s.triggers||s.triggers.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No triggers configured. Builds will use default rate-based triggering."})]})}),e.jsx(E,{value:"parameters",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Build Parameters"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Parameters to pass to builds"})]}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{const t=[...s.parameters||[],{name:"",type:"string",defaultValue:""}];c(s.id,{parameters:t})},children:[e.jsx($,{className:"h-4 w-4 mr-1"}),"Add Parameter"]})]}),(s.parameters||[]).map((t,n)=>e.jsxs(f,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Parameter Name"}),e.jsx(p,{value:t.name,onChange:i=>{const a=[...s.parameters||[]];a[n]={...t,name:i.target.value},c(s.id,{parameters:a})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Type"}),e.jsxs(L,{value:t.type,onValueChange:i=>{const a=[...s.parameters||[]];a[n]={...t,type:i},c(s.id,{parameters:a})},children:[e.jsx(z,{children:e.jsx(U,{})}),e.jsxs(J,{children:[e.jsx(j,{value:"string",children:"String"}),e.jsx(j,{value:"choice",children:"Choice"}),e.jsx(j,{value:"boolean",children:"Boolean"}),e.jsx(j,{value:"password",children:"Password"})]})]})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx(r,{children:"Default Value"}),t.type==="boolean"?e.jsx(F,{checked:t.defaultValue===!0,onCheckedChange:i=>{const a=[...s.parameters||[]];a[n]={...t,defaultValue:i},c(s.id,{parameters:a})}}):e.jsx(p,{value:t.defaultValue||"",type:t.type==="password"?"password":"text",onChange:i=>{const a=[...s.parameters||[]];a[n]={...t,defaultValue:i.target.value},c(s.id,{parameters:a})}})]}),t.type==="choice"&&e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx(r,{children:"Choices (one per line)"}),e.jsx(ie,{rows:3,value:t.choices?.join(`
`)||"",onChange:i=>{const a=i.target.value.split(`
`).map(x=>x.trim()).filter(x=>x),o=[...s.parameters||[]];o[n]={...t,choices:a},c(s.id,{parameters:o})}})]}),e.jsxs(m,{size:"sm",variant:"ghost",onClick:()=>{const i=(s.parameters||[]).filter((a,o)=>o!==n);c(s.id,{parameters:i})},children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),"Remove"]})]},n)),(!s.parameters||s.parameters.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No parameters configured."})]})}),e.jsx(E,{value:"environment",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Environment Variables"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Environment variables available to builds"})]}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{const n={...s.environmentVariables||{},[`VAR_${Date.now()}`]:""};c(s.id,{environmentVariables:n})},children:[e.jsx($,{className:"h-4 w-4 mr-1"}),"Add Variable"]})]}),s.environmentVariables&&Object.keys(s.environmentVariables).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(s.environmentVariables).map(([t,n])=>e.jsx(f,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-[1fr_2fr_auto] gap-3 items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Variable Name"}),e.jsx(p,{value:t,onChange:i=>{const a=i.target.value,o=s.environmentVariables||{};if(a!==t&&!o[a]){const x={...o};delete x[t],x[a]=n,c(s.id,{environmentVariables:x})}},placeholder:"VAR_NAME"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Value"}),e.jsx(p,{value:n,onChange:i=>{const a=s.environmentVariables||{};c(s.id,{environmentVariables:{...a,[t]:i.target.value}})},placeholder:"variable value"})]}),e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>{const a={...s.environmentVariables||{}};delete a[t],c(s.id,{environmentVariables:a})},children:e.jsx(I,{className:"h-4 w-4"})})]})},t))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No environment variables configured."})]})}),e.jsx(E,{value:"actions",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Post-Build Actions"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Actions to execute after build completes"})]}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{const t=[...s.postBuildActions||[],{type:"email",enabled:!0,config:{}}];c(s.id,{postBuildActions:t})},children:[e.jsx($,{className:"h-4 w-4 mr-1"}),"Add Action"]})]}),(s.postBuildActions||[]).map((t,n)=>e.jsxs(f,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{value:t.type,onValueChange:i=>{const a=[...s.postBuildActions||[]];a[n]={...t,type:i,config:{}},c(s.id,{postBuildActions:a})},children:[e.jsx(z,{className:"w-40",children:e.jsx(U,{})}),e.jsxs(J,{children:[e.jsx(j,{value:"email",children:"Email Notification"}),e.jsx(j,{value:"archive",children:"Archive Artifacts"}),e.jsx(j,{value:"publish",children:"Publish Results"}),e.jsx(j,{value:"deploy",children:"Deploy"})]})]}),e.jsx(F,{checked:t.enabled,onCheckedChange:i=>{const a=[...s.postBuildActions||[]];a[n]={...t,enabled:i},c(s.id,{postBuildActions:a})}})]}),e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>{const i=(s.postBuildActions||[]).filter((a,o)=>o!==n);c(s.id,{postBuildActions:i})},children:e.jsx(I,{className:"h-4 w-4"})})]}),t.type==="email"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Recipients (comma-separated) *"}),e.jsx(p,{placeholder:"dev@example.com, team@example.com",defaultValue:t.config?.recipients?.join(", "),onBlur:i=>{const a=i.target.value.split(",").map(v=>v.trim()).filter(v=>v),o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,x=a.filter(v=>!o.test(v));if(x.length>0){g({title:"Invalid email addresses",description:`Invalid emails: ${x.join(", ")}`,variant:"destructive"});return}if(a.length===0){g({title:"No recipients",description:"At least one email recipient is required",variant:"destructive"});return}const N=[...s.postBuildActions||[]];N[n]={...t,config:{...t.config,recipients:a}},c(s.id,{postBuildActions:N})}}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of email addresses"})]}),t.type==="archive"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Archive Pattern"}),e.jsx(p,{placeholder:"**/*.jar, **/*.war",defaultValue:t.config?.archivePattern,onBlur:i=>{const a=[...s.postBuildActions||[]];a[n]={...t,config:{...t.config,archivePattern:i.target.value}},c(s.id,{postBuildActions:a})}})]}),t.type==="deploy"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Deployment Environment"}),e.jsxs(L,{value:t.config?.deployEnv||"staging",onValueChange:i=>{const a=[...s.postBuildActions||[]];a[n]={...t,config:{...t.config,deployEnv:i}},c(s.id,{postBuildActions:a})},children:[e.jsx(z,{children:e.jsx(U,{})}),e.jsxs(J,{children:[e.jsx(j,{value:"staging",children:"Staging"}),e.jsx(j,{value:"production",children:"Production"}),e.jsx(j,{value:"dev",children:"Development"})]})]})]})]},n)),(!s.postBuildActions||s.postBuildActions.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No post-build actions configured."})]})})]}),e.jsx(Ce,{children:e.jsx(m,{variant:"outline",onClick:()=>{ke(null),X("")},children:"Close"})})]})})})(),e.jsx(Z,{open:Ss,onOpenChange:me,children:e.jsxs(Q,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Add New Node"}),e.jsx(te,{children:"Create a new Jenkins agent node for distributed builds"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"node-name",children:"Node Name *"}),e.jsx(p,{id:"node-name",value:xe,onChange:s=>{Se(s.target.value),G(Ie(s.target.value))},onBlur:s=>G(Ie(s.target.value)),placeholder:"agent-1",className:ge?"border-red-500":""}),ge&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(we,{className:"h-3 w-3"}),ge]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"node-executors",children:"Number of Executors"}),e.jsx(p,{id:"node-executors",type:"number",min:"1",max:"100",value:he,onChange:s=>{const t=parseInt(s.target.value)||1;Ee(t),W(Le(t))},onBlur:s=>W(Le(he)),className:pe?"border-red-500":""}),pe?e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(we,{className:"h-3 w-3"}),pe]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of concurrent builds this node can handle"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"node-labels",children:"Labels"}),e.jsx(p,{id:"node-labels",value:Qe,onChange:s=>Ae(s.target.value),placeholder:"linux, docker, kubernetes"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated labels for build routing"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"node-description",children:"Description"}),e.jsx(ie,{id:"node-description",value:es,onChange:s=>De(s.target.value),placeholder:"Optional description",rows:3})]})]}),e.jsxs(Ce,{children:[e.jsx(m,{variant:"outline",onClick:()=>{me(!1),Se(""),Ee(1),Ae(""),De(""),G(""),W("")},children:"Cancel"}),e.jsx(m,{onClick:zs,disabled:!!ge||!!pe||!xe.trim(),children:"Add Node"})]})]})}),oe&&(()=>{const s=R.find(h=>h.id===oe);if(!s)return null;const[t,n]=u.useState(s.name),[i,a]=u.useState(s.numExecutors||1),[o,x]=u.useState(s.labels?.join(", ")||""),[N,v]=u.useState(s.description||"");return e.jsx(Z,{open:!!oe,onOpenChange:h=>!h&&ue(null),children:e.jsxs(Q,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Edit Node"}),e.jsx(te,{children:"Update node configuration"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-node-name",children:"Node Name *"}),e.jsx(p,{id:"edit-node-name",value:t,onChange:h=>n(h.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-node-executors",children:"Number of Executors"}),e.jsx(p,{id:"edit-node-executors",type:"number",min:"1",max:"100",value:i,onChange:h=>a(parseInt(h.target.value)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-node-labels",children:"Labels"}),e.jsx(p,{id:"edit-node-labels",value:o,onChange:h=>x(h.target.value),placeholder:"linux, docker, kubernetes"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-node-description",children:"Description"}),e.jsx(ie,{id:"edit-node-description",value:N,onChange:h=>v(h.target.value),rows:3})]})]}),e.jsxs(Ce,{children:[e.jsx(m,{variant:"outline",onClick:()=>ue(null),children:"Cancel"}),e.jsx(m,{onClick:()=>{if(!t.trim()){g({title:"Invalid name",description:"Node name cannot be empty",variant:"destructive"});return}Js(oe,{name:t.trim(),numExecutors:i,labels:o.split(",").map(h=>h.trim()).filter(h=>h.length>0),description:N.trim()||void 0})},children:"Save"})]})]})})})(),e.jsx(Z,{open:Es,onOpenChange:s=>{je(s),s||(H(""),A(""))},children:e.jsxs(Q,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Install Plugin"}),e.jsx(te,{children:"Install a new Jenkins plugin"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"plugin-name",children:"Plugin Name *"}),e.jsx(p,{id:"plugin-name",value:Te,onChange:s=>{const t=s.target.value;if(H(t),t.trim()){const n=Ne(t);A(n)}else A("")},onBlur:s=>{const t=Ne(s.target.value);A(t)},placeholder:"e.g., git, docker, kubernetes",className:ve?"border-red-500":""}),ve?e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(we,{className:"h-3 w-3"}),ve]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the plugin name (e.g., git, docker, kubernetes, workflow-aggregator)"})]}),e.jsxs("div",{className:"p-3 border rounded-md bg-muted",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Popular plugins:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["git","docker","kubernetes","workflow-aggregator","blue-ocean","junit","maven-plugin"].map(s=>e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{H(s);const t=Ne(s);A(t),setTimeout(()=>{const n=document.getElementById("plugin-name");n&&(n.focus(),n.select())},0)},children:s},s))})]})]}),e.jsxs(Ce,{children:[e.jsx(m,{variant:"outline",onClick:()=>{je(!1),H(""),A("")},children:"Cancel"}),e.jsx(m,{onClick:()=>qs(Te),disabled:!!ve||!Te.trim(),children:"Install"})]})]})}),e.jsx(Z,{open:As,onOpenChange:Fe,children:e.jsxs(Q,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Build Details"}),e.jsx(te,{children:T&&(()=>{const s=M.find(n=>n.id===T);if(!s)return"Build details";const t=B.find(n=>n.id===s.pipelineId);return`Build #${s.number} - ${t?.name||s.pipelineId}`})()})]}),T&&(()=>{const s=M.find(n=>n.id===T);if(!s)return null;const t=B.find(n=>n.id===s.pipelineId);return e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[e.jsxs(f,{children:[e.jsx(y,{children:e.jsx(w,{children:"Build Information"})}),e.jsxs(b,{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Pipeline:"}),e.jsx("span",{className:"ml-2 font-medium",children:t?.name||s.pipelineId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Build Number:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["#",s.number]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:"ml-2",children:ye(s.status)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Branch:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.branch||"main"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Started:"}),e.jsx("span",{className:"ml-2",children:new Date(s.startTime).toLocaleString()})]}),s.duration&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsxs("span",{className:"ml-2",children:[(s.duration/1e3).toFixed(1),"s"]})]})]}),s.status==="running"&&s.progress!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.progress,"%"]})]}),e.jsx(ne,{value:s.progress})]}),s.stages&&s.stages.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Stages:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.stages.map((n,i)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm p-2 border rounded",children:[be(n.status),e.jsx("span",{children:n.name}),n.duration&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-auto",children:[(n.duration/1e3).toFixed(1),"s"]})]},i))})]}),s.status==="running"&&d&&e.jsx("div",{className:"mt-4",children:e.jsxs(m,{variant:"destructive",onClick:()=>rs(s.id),children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Cancel Build"]})})]})]}),e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsx(w,{children:"Console Output"}),e.jsx(k,{children:"Build execution logs"})]}),e.jsx(b,{children:e.jsx("div",{className:"bg-black text-green-400 p-4 rounded font-mono text-xs overflow-x-auto max-h-96 overflow-y-auto",children:ts.length>0?ts.map((n,i)=>e.jsx("div",{className:"whitespace-pre-wrap",children:n},i)):e.jsx("div",{className:"text-muted-foreground",children:"No logs available"})})})]}),is.length>0&&e.jsxs(f,{children:[e.jsxs(y,{children:[e.jsx(w,{children:"Artifacts"}),e.jsx(k,{children:"Build artifacts"})]}),e.jsx(b,{children:e.jsx("div",{className:"space-y-2",children:is.map((n,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-mono text-sm",children:n.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:cs(n.size)}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{const a=`# Artifact: ${n.name}
# Size: ${cs(n.size)}
# Generated by Jenkins Simulation

This is a simulated artifact file.
In a real Jenkins environment, this would contain the actual build artifact.`,o=new Blob([a],{type:"text/plain"}),x=URL.createObjectURL(o),N=document.createElement("a");N.href=x,N.download=n.name,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(x),g({title:"Artifact downloaded",description:`${n.name} has been downloaded`})},children:[e.jsx(nt,{className:"h-3 w-3 mr-1"}),"Download"]})]})]},i))})})]})]})})()]})})]})})}export{$t as JenkinsConfigAdvanced};

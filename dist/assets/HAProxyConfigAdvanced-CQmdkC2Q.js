import{u as na,X as ta,j as e,r as d,V as la,i as h,S as V,C as j,e as p,f as v,k as g,R as ls,T as ia,a as ra,b as is,A as Ls,c as ca,d as ae,h as P,P as M,B as S,U as ne,m as te,L as l,I as r,n as C,o as f,p as b,q as y,s as i,t as T,ah as da,l as ha,D as F,v as I,w as R,x as q,y as D,z as E,ao as re,a6 as js,a8 as ps,a9 as vs,aa as gs,ab as Ns,ac as Cs,ad as fs,ae as bs}from"./index-VkfV5NX_.js";import{a as N,s as L}from"./toast-Dya0nCAi.js";import{R as oa}from"./refresh-ccw-DNbAAafF.js";import{T as ys}from"./trending-up-HGYlK7p1.js";import{C as As}from"./circle-check-big-BQFvBRWo.js";import{S as ks}from"./server-gMmfqP74.js";import{S as Bs}from"./shield-BeoiYEMD.js";function fa({componentId:O}){const{nodes:Ps,updateNode:rs}=na(),U=ta(s=>s.componentMetrics.get(O)),_=Ps.find(s=>s.id===O);if(!_)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const c=_.data.config||{},w=c.frontends||[],m=c.backends||[],[Ts,ce]=d.useState(!1),[Fs,de]=d.useState(!1),[cs,le]=d.useState(null),[ds,he]=d.useState(null),[hs,oe]=d.useState(null),[xe,me]=d.useState(null),[ue,os]=d.useState(null),[je,xs]=d.useState(null),[pe,ms]=d.useState(null),[K,ve]=d.useState(""),[$,ge]=d.useState("0.0.0.0:80"),[Ne,Ce]=d.useState("http"),[fe,be]=d.useState(!1),[ye,ke]=d.useState([]),[G,Se]=d.useState(""),[we,Le]=d.useState("http"),[Ae,Be]=d.useState("roundrobin"),[x,k]=d.useState({enabled:!0,interval:2e3,timeout:1e3,path:"/health",fall:3,rise:2}),[W,Pe]=d.useState(""),[X,Te]=d.useState("192.168.1.100"),[Fe,Ie]=d.useState(8080),[Re,qe]=d.useState(100),[De,Ee]=d.useState(!0),[J,ie]=d.useState(null),[H,He]=d.useState(null),[xa,Ss]=d.useState(null),[Q,ze]=d.useState(""),[Y,Oe]=d.useState("hdr(host)"),[z,_e]=d.useState(""),[Ve,Me]=d.useState("eq"),[Is,Ue]=d.useState(!1),[us,Ke]=d.useState(null),[ma,Rs]=d.useState(null),[Z,$e]=d.useState(""),[ee,Ge]=d.useState(""),[se,We]=d.useState(""),[Xe,Je]=d.useState(""),[Qe,Ye]=d.useState(""),Ze=c.sslCertificates||[],A=la.getHAProxyRoutingEngine(O);d.useEffect(()=>{if(!A||!U)return;const s=A.getStats(),a=U.customMetrics||{},t={...c,totalRequests:s.totalRequests||a.total_requests||0,totalResponses:s.totalResponses||a.total_responses||0,activeConnections:s.activeConnections||a.active_connections||0,totalBytesIn:s.totalBytesIn||a.total_bytes_in||0,totalBytesOut:s.totalBytesOut||a.total_bytes_out||0};t.frontends&&(t.frontends=t.frontends.map(u=>{const B=A.getFrontendStats(u.name);return{...u,requests:B?.requests||u.requests||0,responses:B?.responses||u.responses||0,bytesIn:B?.bytesIn||u.bytesIn||0,bytesOut:B?.bytesOut||u.bytesOut||0}})),t.backends&&(t.backends=t.backends.map(u=>(A.getBackendStats(u.name),{...u,servers:u.servers.map(B=>B)}))),(t.totalRequests!==c.totalRequests||t.totalResponses!==c.totalResponses||t.activeConnections!==c.activeConnections)&&rs(O,{data:{..._.data,config:t}})},[U,A]),d.useEffect(()=>{if(_&&A){const s=(c.frontends||[]).map(n=>({id:n.id,name:n.name,bind:n.bind,mode:n.mode,defaultBackend:n.backends&&n.backends.length>0?n.backends[0]:void 0,backends:n.backends,ssl:n.ssl,acls:n.acls||[],requests:n.requests||0,responses:n.responses||0,bytesIn:n.bytesIn||0,bytesOut:n.bytesOut||0})),a=(c.backends||[]).map(n=>({id:n.id,name:n.name,mode:n.mode,balance:n.balance,servers:n.servers||[],healthCheck:n.healthCheck,stickTable:n.stickTable,acls:n.acls||[]})),t={maxConnections:c.maxConnections,timeoutConnect:c.timeoutConnect,timeoutServer:c.timeoutServer,timeoutClient:c.timeoutClient,timeoutHttpRequest:c.timeoutHttpRequest,timeoutHttpKeepAlive:c.timeoutHttpKeepAlive,rateLimit:c.rateLimit};A.initialize({frontends:s,backends:a,globalConfig:t})}},[c.frontends,c.backends,O,_]);const o=d.useCallback(s=>{rs(O,{data:{..._.data,config:{...c,...s}}})},[O,_,c,rs]),qs=()=>{if(!K.trim()||!$.trim()){L("Please fill in all required fields");return}const s={id:`frontend-${Date.now()}`,name:K,bind:$,mode:Ne,backends:ye,ssl:fe,requests:0,responses:0,bytesIn:0,bytesOut:0};o({frontends:[...w,s]}),N("Frontend created successfully"),ce(!1),es()},Ds=s=>{he(s),ve(s.name),ge(s.bind),Ce(s.mode),be(s.ssl||!1),ke(s.backends||[])},Es=()=>{if(!ds||!K.trim()||!$.trim()){L("Please fill in all required fields");return}const s=w.map(a=>a.id===ds.id?{...a,name:K,bind:$,mode:Ne,ssl:fe,backends:ye}:a);o({frontends:s}),N("Frontend updated successfully"),he(null),es()},Hs=s=>{o({frontends:w.filter(a=>a.id!==s)}),N("Frontend deleted successfully"),os(null)},es=()=>{ve(""),ge("0.0.0.0:80"),Ce("http"),be(!1),ke([])},zs=()=>{if(!G.trim()){L("Please fill in backend name");return}const s={id:`backend-${Date.now()}`,name:G,mode:we,balance:Ae,servers:[],healthCheck:x.enabled?x:void 0};o({backends:[...m,s]}),N("Backend created successfully"),de(!1),ss()},Os=s=>{oe(s),Se(s.name),Le(s.mode),Be(s.balance),k({enabled:s.healthCheck?.enabled??!0,interval:s.healthCheck?.interval??2e3,timeout:s.healthCheck?.timeout??1e3,path:s.healthCheck?.path??"/health",fall:s.healthCheck?.fall??3,rise:s.healthCheck?.rise??2})},_s=()=>{if(!hs||!G.trim()){L("Please fill in backend name");return}const s=m.map(a=>a.id===hs.id?{...a,name:G,mode:we,balance:Ae,healthCheck:x.enabled?x:void 0}:a);o({backends:s}),N("Backend updated successfully"),oe(null),ss()},Vs=s=>{o({backends:m.filter(a=>a.id!==s)}),N("Backend deleted successfully"),xs(null)},ss=()=>{Se(""),Le("http"),Be("roundrobin"),k({enabled:!0,interval:2e3,timeout:1e3,path:"/health",fall:3,rise:2})},Ms=s=>{if(!W.trim()||!X.trim()){L("Please fill in server name and address");return}if(!m.find(u=>u.id===s))return;const t={id:`server-${Date.now()}`,name:W,address:X,port:Fe,weight:Re,check:De,status:"up",sessions:0,bytesIn:0,bytesOut:0,errors:0},n=m.map(u=>u.id===s?{...u,servers:[...u.servers,t]}:u);o({backends:n}),N("Server added successfully"),le(null),as()},Us=(s,a)=>{me({backendId:s,server:a}),Pe(a.name),Te(a.address),Ie(a.port),qe(a.weight||100),Ee(a.check!==!1)},Ks=()=>{if(!xe||!W.trim()||!X.trim()){L("Please fill in server name and address");return}const s=m.map(a=>a.id===xe.backendId?{...a,servers:a.servers.map(t=>t.id===xe.server.id?{...t,name:W,address:X,port:Fe,weight:Re,check:De}:t)}:a);o({backends:s}),N("Server updated successfully"),me(null),as()},$s=(s,a)=>{const t=m.map(n=>n.id===s?{...n,servers:n.servers.filter(u=>u.id!==a)}:n);o({backends:t}),N("Server deleted successfully"),ms(null)},as=()=>{Pe(""),Te("192.168.1.100"),Ie(8080),qe(100),Ee(!0)},Gs=()=>{if(A){const s=A.getStats();N(`Stats refreshed: ${s.totalRequests} requests, ${s.upServers}/${s.totalServers} servers up`)}else L("Routing engine not initialized")},Ws=()=>{if(!J||!Q.trim()||!Y.trim()){L("Please fill in ACL name and criterion");return}const s={id:`acl-${Date.now()}`,name:Q,criterion:Y,value:z||void 0,operator:z?Ve:void 0};if(J.type==="frontend"){const a=w.map(t=>t.id===J.id?{...t,acls:[...t.acls||[],s]}:t);o({frontends:a})}else{const a=m.map(t=>t.id===J.id?{...t,acls:[...t.acls||[],s]}:t);o({backends:a})}N("ACL rule created successfully"),ie(null),ns()},ws=(s,a,t)=>{He({type:s,id:a,acl:t}),ze(t.name),Oe(t.criterion),_e(t.value||""),Me(t.operator||"eq")},Xs=()=>{if(!H||!Q.trim()||!Y.trim()){L("Please fill in ACL name and criterion");return}const s={...H.acl,name:Q,criterion:Y,value:z||void 0,operator:z?Ve:void 0};if(H.type==="frontend"){const a=w.map(t=>t.id===H.id?{...t,acls:t.acls?.map(n=>n.id===H.acl.id?s:n)||[s]}:t);o({frontends:a})}else{const a=m.map(t=>t.id===H.id?{...t,acls:t.acls?.map(n=>n.id===H.acl.id?s:n)||[s]}:t);o({backends:a})}N("ACL rule updated successfully"),He(null),ns()},ns=()=>{ze(""),Oe("hdr(host)"),_e(""),Me("eq")},Js=()=>{if(!Z.trim()||!ee.trim()||!se.trim()){L("Please fill in certificate name, cert path, and key path");return}const s={id:`ssl-${Date.now()}`,name:Z,certPath:ee,keyPath:se,caPath:Xe||void 0,domain:Qe||void 0};o({sslCertificates:[...Ze,s]}),N("SSL certificate added successfully"),Ue(!1),ts()},Qs=()=>{if(!us||!Z.trim()||!ee.trim()||!se.trim()){L("Please fill in certificate name, cert path, and key path");return}const s=Ze.map(a=>a.id===us.id?{...a,name:Z,certPath:ee,keyPath:se,caPath:Xe||void 0,domain:Qe||void 0}:a);o({sslCertificates:s}),N("SSL certificate updated successfully"),Ke(null),ts()},ts=()=>{$e(""),Ge(""),We(""),Je(""),Ye("")},Ys=c.totalRequests||w.reduce((s,a)=>s+(a.requests||0),0),Zs=c.totalResponses||w.reduce((s,a)=>s+(a.responses||0),0),ea=c.activeConnections||U?.customMetrics?.active_connections||0,sa=c.totalBytesIn||U?.customMetrics?.total_bytes_in||0,aa=c.totalBytesOut||U?.customMetrics?.total_bytes_out||0;return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"HAProxy"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Load Balancer"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"High-performance load balancer and proxy server"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(h,{variant:"outline",size:"sm",onClick:Gs,children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Refresh Stats"]})})]}),e.jsx(V,{}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs(j,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Requests"}),e.jsx(ys,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(g,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Ys.toLocaleString()})})})]}),e.jsxs(j,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Responses"}),e.jsx(As,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(g,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:Zs.toLocaleString()})})})]}),e.jsxs(j,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Connections"}),e.jsx(ls,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(g,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-2xl font-bold text-cyan-600 dark:text-cyan-400",children:ea})})})]}),e.jsxs(j,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Bytes In"}),e.jsx(ys,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:(sa/1024/1024).toFixed(1)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"MB"})]})})]}),e.jsxs(j,{className:"border-l-4 border-l-orange-500 bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Bytes Out"}),e.jsx(ys,{className:"h-4 w-4 text-orange-500"})]})}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:(aa/1024/1024).toFixed(1)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"MB"})]})})]})]}),e.jsxs(ia,{defaultValue:"backends",className:"space-y-4",children:[e.jsxs(ra,{children:[e.jsxs(is,{value:"backends",children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"Backends (",m.length,")"]}),e.jsxs(is,{value:"frontends",children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Frontends (",w.length,")"]}),e.jsxs(is,{value:"stats",children:[e.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Statistics"]}),e.jsxs(is,{value:"settings",children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(ae,{value:"backends",className:"space-y-4",children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Backends"}),e.jsx(P,{children:"Configure backend server pools"})]}),e.jsxs(h,{onClick:()=>de(!0),size:"sm",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Create Backend"]})]})}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:m.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ks,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No backends configured"}),e.jsx("p",{className:"text-sm",children:'Click "Create Backend" to add one'})]}):m.map(s=>e.jsxs(j,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(ks,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(v,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(S,{variant:"outline",children:s.mode.toUpperCase()}),e.jsx(S,{variant:"outline",children:s.balance}),e.jsxs(S,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300",children:[s.servers.length," servers"]}),e.jsxs(S,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300",children:[s.servers.filter(a=>a.status==="up").length," up"]}),s.healthCheck?.enabled&&e.jsx(S,{variant:"outline",className:"bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300",children:"Health Check"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>Os(s),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>le(s.id),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add Server"]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>xs(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(te,{className:"h-4 w-4"})})]})]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Backend Name"}),e.jsx(r,{value:s.name,onChange:a=>{const t=m.map(n=>n.id===s.id?{...n,name:a.target.value}:n);o({backends:t})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Mode"}),e.jsxs(C,{value:s.mode,onValueChange:a=>{const t=m.map(n=>n.id===s.id?{...n,mode:a}:n);o({backends:t})},children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"http",children:"HTTP"}),e.jsx(i,{value:"tcp",children:"TCP"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Balance Algorithm"}),e.jsxs(C,{value:s.balance,onValueChange:a=>{const t=m.map(n=>n.id===s.id?{...n,balance:a}:n);o({backends:t})},children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"roundrobin",children:"Round Robin"}),e.jsx(i,{value:"leastconn",children:"Least Connections"}),e.jsx(i,{value:"source",children:"Source"}),e.jsx(i,{value:"uri",children:"URI"}),e.jsx(i,{value:"hdr",children:"Header"}),e.jsx(i,{value:"rdp-cookie",children:"RDP Cookie"})]})]})]})]}),e.jsx(V,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Stick Table"}),e.jsx(T,{checked:s.stickTable?.enabled||!1,onCheckedChange:a=>{const t=m.map(n=>n.id===s.id?{...n,stickTable:a?{enabled:!0,type:n.stickTable?.type||"ip",size:n.stickTable?.size||1e4,expire:n.stickTable?.expire||3600}:void 0}:n);o({backends:t})}})]}),s.stickTable?.enabled&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 pl-4 border-l-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Type"}),e.jsxs(C,{value:s.stickTable.type||"ip",onValueChange:a=>{const t=m.map(n=>n.id===s.id?{...n,stickTable:n.stickTable?{...n.stickTable,type:a}:{enabled:!0,type:a,size:1e4,expire:3600}}:n);o({backends:t})},children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"ip",children:"IP Address"}),e.jsx(i,{value:"integer",children:"Integer"}),e.jsx(i,{value:"string",children:"String"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Size"}),e.jsx(r,{type:"number",value:s.stickTable.size||1e4,onChange:a=>{const t=m.map(n=>n.id===s.id?{...n,stickTable:n.stickTable?{...n.stickTable,size:parseInt(a.target.value)||1e4}:{enabled:!0,type:"ip",size:parseInt(a.target.value)||1e4,expire:3600}}:n);o({backends:t})},min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Expire (seconds)"}),e.jsx(r,{type:"number",value:s.stickTable.expire||3600,onChange:a=>{const t=m.map(n=>n.id===s.id?{...n,stickTable:n.stickTable?{...n.stickTable,expire:parseInt(a.target.value)||3600}:{enabled:!0,type:"ip",size:1e4,expire:parseInt(a.target.value)||3600}}:n);o({backends:t})},min:1})]})]})]}),e.jsx(V,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Servers"}),e.jsxs(h,{size:"sm",variant:"ghost",onClick:()=>le(s.id),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add Server"]})]}),s.servers.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:'No servers configured. Click "Add Server" to add one.'}):e.jsx("div",{className:"space-y-2",children:s.servers.map(a=>e.jsx(j,{className:"p-3 border-l-2 border-l-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`p-1.5 rounded ${a.status==="up"?"bg-green-100 dark:bg-green-900/30":a.status==="down"?"bg-red-100 dark:bg-red-900/30":a.status==="maint"?"bg-yellow-100 dark:bg-yellow-900/30":"bg-gray-100 dark:bg-gray-900/30"}`,children:a.status==="up"?e.jsx(As,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):a.status==="down"?e.jsx(da,{className:"h-4 w-4 text-red-600 dark:text-red-400"}):e.jsx(ha,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:a.name}),e.jsxs(S,{variant:"outline",className:"text-xs",children:[a.address,":",a.port]}),e.jsx(S,{variant:a.status==="up"?"default":"destructive",children:a.status})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:["Weight: ",a.weight||100]}),e.jsxs("span",{children:["Sessions: ",a.sessions||0]}),a.errors&&a.errors>0&&e.jsxs("span",{className:"text-red-500",children:["Errors: ",a.errors]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{type:"number",value:a.weight||100,onChange:t=>{const n=m.map(u=>u.id===s.id?{...u,servers:u.servers.map(B=>B.id===a.id?{...B,weight:Number(t.target.value)}:B)}:u);o({backends:n})},className:"w-20",min:1,max:256}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>Us(s.id,a),children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>ms({backendId:s.id,serverId:a.id}),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(te,{className:"h-4 w-4"})})]})]})},a.id))})]})]})]},s.id))})})]})}),e.jsx(ae,{value:"frontends",className:"space-y-4",children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Frontends"}),e.jsx(P,{children:"Configure frontend listeners"})]}),e.jsxs(h,{onClick:()=>ce(!0),size:"sm",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Create Frontend"]})]})}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:w.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ls,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No frontends configured"}),e.jsx("p",{className:"text-sm",children:'Click "Create Frontend" to add one'})]}):w.map(s=>e.jsxs(j,{className:"border-l-4 border-l-purple-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30",children:e.jsx(ls,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx(v,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(S,{variant:"outline",children:s.bind}),e.jsx(S,{variant:"outline",children:s.mode.toUpperCase()}),s.ssl&&e.jsxs(S,{variant:"default",className:"bg-green-500",children:[e.jsx(Bs,{className:"h-3 w-3 mr-1"}),"SSL"]}),e.jsxs(S,{variant:"outline",children:[s.backends.length," backend",s.backends.length!==1?"s":""]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>Ds(s),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>os(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(te,{className:"h-4 w-4"})})]})]})}),e.jsx(g,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Requests:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.requests?.toLocaleString()||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Responses:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.responses?.toLocaleString()||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Backends:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.backends.length})]})]})})]},s.id))})})]})}),e.jsx(ae,{value:"stats",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(v,{children:"Real-time Statistics"}),e.jsx(P,{children:"Live server and connection statistics"})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:m.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ls,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No backends configured"})]}):m.map(s=>{const a=A?.getBackendStats(s.name);return e.jsxs(j,{className:"border-l-4 border-l-blue-500",children:[e.jsxs(p,{className:"pb-3",children:[e.jsx(v,{className:"text-base",children:s.name}),a&&e.jsxs(P,{children:[a.upServers,"/",a.servers," servers up"]})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-2",children:s.servers.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No servers configured"}):s.servers.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{variant:t.status==="up"?"default":"destructive",children:t.status}),e.jsx("span",{className:"font-medium",children:t.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.address,":",t.port]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Sessions: ",t.sessions||0]}),e.jsxs("span",{children:["In: ",((t.bytesIn||0)/1024).toFixed(1)," KB"]}),e.jsxs("span",{children:["Out: ",((t.bytesOut||0)/1024).toFixed(1)," KB"]}),t.errors&&t.errors>0&&e.jsxs("span",{className:"text-red-500",children:["Errors: ",t.errors]})]})]},t.id))})})]},s.id)})})})]})}),e.jsx(ae,{value:"acl",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(v,{children:"Access Control Lists (ACL)"}),e.jsx(P,{children:"Configure ACL rules for frontends and backends"})]}),e.jsxs(g,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Frontend ACLs"}),w.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No frontends configured. Create a frontend first."}):e.jsx("div",{className:"space-y-4",children:w.map(s=>e.jsxs(j,{className:"border-l-4 border-l-purple-500",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-base",children:s.name}),e.jsx(P,{children:s.bind})]}),e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>ie({type:"frontend",id:s.id}),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add ACL"]})]})}),e.jsx(g,{children:s.acls&&s.acls.length>0?e.jsx("div",{className:"space-y-2",children:s.acls.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{variant:"outline",children:a.name}),e.jsx("span",{className:"text-sm font-mono",children:a.criterion}),a.operator&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:a.operator}),a.value&&e.jsx("span",{className:"text-sm",children:a.value})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>ws("frontend",s.id,a),children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>Ss({type:"frontend",id:s.id,aclId:a.id}),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(te,{className:"h-4 w-4"})})]})]},a.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No ACL rules configured"})})]},s.id))})]}),e.jsx(V,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Backend ACLs"}),m.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No backends configured. Create a backend first."}):e.jsx("div",{className:"space-y-4",children:m.map(s=>e.jsxs(j,{className:"border-l-4 border-l-blue-500",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-base",children:s.name}),e.jsxs(P,{children:[s.mode.toUpperCase()," - ",s.balance]})]}),e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>ie({type:"backend",id:s.id}),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add ACL"]})]})}),e.jsx(g,{children:s.acls&&s.acls.length>0?e.jsx("div",{className:"space-y-2",children:s.acls.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{variant:"outline",children:a.name}),e.jsx("span",{className:"text-sm font-mono",children:a.criterion}),a.operator&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:a.operator}),a.value&&e.jsx("span",{className:"text-sm",children:a.value})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>ws("backend",s.id,a),children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>Ss({type:"backend",id:s.id,aclId:a.id}),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(te,{className:"h-4 w-4"})})]})]},a.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No ACL rules configured"})})]},s.id))})]})]})]})}),e.jsx(ae,{value:"ssl",className:"space-y-4",children:e.jsxs(j,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"SSL/TLS Certificates"}),e.jsx(P,{children:"Manage SSL certificates for secure connections"})]}),e.jsxs(h,{onClick:()=>Ue(!0),size:"sm",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add Certificate"]})]})}),e.jsx(g,{children:Ze.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Bs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No SSL certificates configured"}),e.jsx("p",{className:"text-sm",children:'Click "Add Certificate" to add one'})]}):e.jsx("div",{className:"space-y-4",children:Ze.map(s=>e.jsxs(j,{className:"border-l-4 border-l-green-500",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-base",children:s.name}),s.domain&&e.jsxs(P,{children:["Domain: ",s.domain]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>{Ke(s),$e(s.name),Ge(s.certPath),We(s.keyPath),Je(s.caPath||""),Ye(s.domain||"")},children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>Rs(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(te,{className:"h-4 w-4"})})]})]})}),e.jsx(g,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Cert Path:"}),e.jsx("span",{className:"ml-2 font-mono text-xs",children:s.certPath})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Key Path:"}),e.jsx("span",{className:"ml-2 font-mono text-xs",children:s.keyPath})]}),s.caPath&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"CA Path:"}),e.jsx("span",{className:"ml-2 font-mono text-xs",children:s.caPath})]})]})})]},s.id))})})]})}),e.jsx(ae,{value:"settings",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(v,{children:"HAProxy Settings"}),e.jsx(P,{children:"Global configuration"})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Enable Stats UI"}),e.jsx(T,{checked:c.enableStatsUI??!0,onCheckedChange:s=>{o({enableStatsUI:s}),N(`Stats UI ${s?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Enable Logging"}),e.jsx(T,{checked:c.enableLogging??!0,onCheckedChange:s=>{o({enableLogging:s}),N(`Logging ${s?"enabled":"disabled"}`)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Max Connections"}),e.jsx(r,{type:"number",value:c.maxConnections??4096,onChange:s=>{const a=parseInt(s.target.value)||4096;o({maxConnections:a}),N(`Max connections set to ${a}`)},min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Timeout Connect (ms)"}),e.jsx(r,{type:"number",value:c.timeoutConnect??5e3,onChange:s=>{const a=parseInt(s.target.value)||5e3;o({timeoutConnect:a})},min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Timeout Server (ms)"}),e.jsx(r,{type:"number",value:c.timeoutServer??5e4,onChange:s=>{const a=parseInt(s.target.value)||5e4;o({timeoutServer:a})},min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Timeout Client (ms)"}),e.jsx(r,{type:"number",value:c.timeoutClient??5e4,onChange:s=>{const a=parseInt(s.target.value)||5e4;o({timeoutClient:a})},min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Timeout HTTP Request (ms)"}),e.jsx(r,{type:"number",value:c.timeoutHttpRequest??1e4,onChange:s=>{const a=parseInt(s.target.value)||1e4;o({timeoutHttpRequest:a})},min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Timeout HTTP Keep-Alive (ms)"}),e.jsx(r,{type:"number",value:c.timeoutHttpKeepAlive??1e4,onChange:s=>{const a=parseInt(s.target.value)||1e4;o({timeoutHttpKeepAlive:a})},min:1})]}),e.jsx(V,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Rate Limiting"}),e.jsx(T,{checked:c.rateLimit?.enabled??!1,onCheckedChange:s=>{o({rateLimit:s?{enabled:!0,rate:c.rateLimit?.rate||"10r/s",burst:c.rateLimit?.burst||5}:{enabled:!1}})}})]}),c.rateLimit?.enabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 pl-4 border-l-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Rate (e.g., 10r/s)"}),e.jsx(r,{value:c.rateLimit.rate||"10r/s",onChange:s=>{o({rateLimit:{enabled:!0,rate:s.target.value,burst:c.rateLimit?.burst||5}})},placeholder:"10r/s"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: number + r/s, r/m, or r/h"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Burst"}),e.jsx(r,{type:"number",value:c.rateLimit.burst||5,onChange:s=>{o({rateLimit:{enabled:!0,rate:c.rateLimit?.rate||"10r/s",burst:parseInt(s.target.value)||5}})},min:1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Additional requests allowed beyond rate"})]})]})]})]})]})})]})]}),e.jsx(F,{open:Ts,onOpenChange:ce,children:e.jsxs(I,{className:"max-w-2xl",children:[e.jsxs(R,{children:[e.jsx(q,{children:"Create Frontend"}),e.jsx(D,{children:"Configure a new frontend listener for incoming connections"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Frontend Name *"}),e.jsx(r,{value:K,onChange:s=>ve(s.target.value),placeholder:"http_frontend"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Bind Address *"}),e.jsx(r,{value:$,onChange:s=>ge(s.target.value),placeholder:"0.0.0.0:80"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Mode"}),e.jsxs(C,{value:Ne,onValueChange:s=>Ce(s),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"http",children:"HTTP"}),e.jsx(i,{value:"tcp",children:"TCP"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(T,{id:"ssl",checked:fe,onCheckedChange:be}),e.jsx(l,{htmlFor:"ssl",children:"Enable SSL"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Backends"}),e.jsxs(C,{value:ye[0]||"",onValueChange:s=>ke([s]),children:[e.jsx(f,{children:e.jsx(b,{placeholder:"Select backend"})}),e.jsx(y,{children:m.map(s=>e.jsx(i,{value:s.name,children:s.name},s.id))})]})]})]}),e.jsxs(E,{children:[e.jsx(h,{variant:"outline",onClick:()=>{ce(!1),es()},children:"Cancel"}),e.jsx(h,{onClick:qs,children:"Create"})]})]})}),e.jsx(F,{open:ds!==null,onOpenChange:s=>!s&&he(null),children:e.jsxs(I,{className:"max-w-2xl",children:[e.jsxs(R,{children:[e.jsx(q,{children:"Edit Frontend"}),e.jsx(D,{children:"Update frontend configuration"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Frontend Name *"}),e.jsx(r,{value:K,onChange:s=>ve(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Bind Address *"}),e.jsx(r,{value:$,onChange:s=>ge(s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Mode"}),e.jsxs(C,{value:Ne,onValueChange:s=>Ce(s),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"http",children:"HTTP"}),e.jsx(i,{value:"tcp",children:"TCP"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(T,{id:"ssl-edit",checked:fe,onCheckedChange:be}),e.jsx(l,{htmlFor:"ssl-edit",children:"Enable SSL"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Backends"}),e.jsxs(C,{value:ye[0]||"",onValueChange:s=>ke([s]),children:[e.jsx(f,{children:e.jsx(b,{placeholder:"Select backend"})}),e.jsx(y,{children:m.map(s=>e.jsx(i,{value:s.name,children:s.name},s.id))})]})]})]}),e.jsxs(E,{children:[e.jsx(h,{variant:"outline",onClick:()=>{he(null),es()},children:"Cancel"}),e.jsxs(h,{onClick:Es,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})}),e.jsx(F,{open:Fs,onOpenChange:de,children:e.jsxs(I,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(R,{children:[e.jsx(q,{children:"Create Backend"}),e.jsx(D,{children:"Configure a new backend server pool"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Backend Name *"}),e.jsx(r,{value:G,onChange:s=>Se(s.target.value),placeholder:"web_backend"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Mode"}),e.jsxs(C,{value:we,onValueChange:s=>Le(s),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"http",children:"HTTP"}),e.jsx(i,{value:"tcp",children:"TCP"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Balance Algorithm"}),e.jsxs(C,{value:Ae,onValueChange:s=>Be(s),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"roundrobin",children:"Round Robin"}),e.jsx(i,{value:"leastconn",children:"Least Connections"}),e.jsx(i,{value:"source",children:"Source"}),e.jsx(i,{value:"uri",children:"URI"}),e.jsx(i,{value:"hdr",children:"Header"}),e.jsx(i,{value:"rdp-cookie",children:"RDP Cookie"})]})]})]})]}),e.jsx(V,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Health Check"}),e.jsx(T,{checked:x.enabled,onCheckedChange:s=>k({...x,enabled:s})})]}),x.enabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 pl-4 border-l-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Interval (ms)"}),e.jsx(r,{type:"number",value:x.interval,onChange:s=>k({...x,interval:parseInt(s.target.value)||2e3}),min:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Timeout (ms)"}),e.jsx(r,{type:"number",value:x.timeout,onChange:s=>k({...x,timeout:parseInt(s.target.value)||1e3}),min:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Path"}),e.jsx(r,{value:x.path,onChange:s=>k({...x,path:s.target.value}),placeholder:"/health"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Fall (failures)"}),e.jsx(r,{type:"number",value:x.fall,onChange:s=>k({...x,fall:parseInt(s.target.value)||3}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Rise (successes)"}),e.jsx(r,{type:"number",value:x.rise,onChange:s=>k({...x,rise:parseInt(s.target.value)||2}),min:1})]})]})]})]}),e.jsxs(E,{children:[e.jsx(h,{variant:"outline",onClick:()=>{de(!1),ss()},children:"Cancel"}),e.jsx(h,{onClick:zs,children:"Create"})]})]})}),e.jsx(F,{open:hs!==null,onOpenChange:s=>!s&&oe(null),children:e.jsxs(I,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(R,{children:[e.jsx(q,{children:"Edit Backend"}),e.jsx(D,{children:"Update backend configuration"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Backend Name *"}),e.jsx(r,{value:G,onChange:s=>Se(s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Mode"}),e.jsxs(C,{value:we,onValueChange:s=>Le(s),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"http",children:"HTTP"}),e.jsx(i,{value:"tcp",children:"TCP"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Balance Algorithm"}),e.jsxs(C,{value:Ae,onValueChange:s=>Be(s),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"roundrobin",children:"Round Robin"}),e.jsx(i,{value:"leastconn",children:"Least Connections"}),e.jsx(i,{value:"source",children:"Source"}),e.jsx(i,{value:"uri",children:"URI"}),e.jsx(i,{value:"hdr",children:"Header"}),e.jsx(i,{value:"rdp-cookie",children:"RDP Cookie"})]})]})]})]}),e.jsx(V,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Health Check"}),e.jsx(T,{checked:x.enabled,onCheckedChange:s=>k({...x,enabled:s})})]}),x.enabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 pl-4 border-l-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Interval (ms)"}),e.jsx(r,{type:"number",value:x.interval,onChange:s=>k({...x,interval:parseInt(s.target.value)||2e3}),min:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Timeout (ms)"}),e.jsx(r,{type:"number",value:x.timeout,onChange:s=>k({...x,timeout:parseInt(s.target.value)||1e3}),min:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Path"}),e.jsx(r,{value:x.path,onChange:s=>k({...x,path:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Fall (failures)"}),e.jsx(r,{type:"number",value:x.fall,onChange:s=>k({...x,fall:parseInt(s.target.value)||3}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Rise (successes)"}),e.jsx(r,{type:"number",value:x.rise,onChange:s=>k({...x,rise:parseInt(s.target.value)||2}),min:1})]})]})]})]}),e.jsxs(E,{children:[e.jsx(h,{variant:"outline",onClick:()=>{oe(null),ss()},children:"Cancel"}),e.jsxs(h,{onClick:_s,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})}),e.jsx(F,{open:cs!==null,onOpenChange:s=>!s&&le(null),children:e.jsxs(I,{children:[e.jsxs(R,{children:[e.jsx(q,{children:"Add Server"}),e.jsx(D,{children:"Add a new server to the backend"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Server Name *"}),e.jsx(r,{value:W,onChange:s=>Pe(s.target.value),placeholder:"web1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Address *"}),e.jsx(r,{value:X,onChange:s=>Te(s.target.value),placeholder:"192.168.1.10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Port *"}),e.jsx(r,{type:"number",value:Fe,onChange:s=>Ie(parseInt(s.target.value)||8080),min:1,max:65535})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Weight"}),e.jsx(r,{type:"number",value:Re,onChange:s=>qe(parseInt(s.target.value)||100),min:1,max:256})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(T,{id:"check",checked:De,onCheckedChange:Ee}),e.jsx(l,{htmlFor:"check",children:"Health Check"})]})]})]}),e.jsxs(E,{children:[e.jsx(h,{variant:"outline",onClick:()=>{le(null),as()},children:"Cancel"}),e.jsx(h,{onClick:()=>cs&&Ms(cs),children:"Add Server"})]})]})}),e.jsx(F,{open:xe!==null,onOpenChange:s=>!s&&me(null),children:e.jsxs(I,{children:[e.jsxs(R,{children:[e.jsx(q,{children:"Edit Server"}),e.jsx(D,{children:"Update server configuration"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Server Name *"}),e.jsx(r,{value:W,onChange:s=>Pe(s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Address *"}),e.jsx(r,{value:X,onChange:s=>Te(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Port *"}),e.jsx(r,{type:"number",value:Fe,onChange:s=>Ie(parseInt(s.target.value)||8080),min:1,max:65535})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Weight"}),e.jsx(r,{type:"number",value:Re,onChange:s=>qe(parseInt(s.target.value)||100),min:1,max:256})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(T,{id:"check-edit",checked:De,onCheckedChange:Ee}),e.jsx(l,{htmlFor:"check-edit",children:"Health Check"})]})]})]}),e.jsxs(E,{children:[e.jsx(h,{variant:"outline",onClick:()=>{me(null),as()},children:"Cancel"}),e.jsxs(h,{onClick:Ks,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})}),e.jsx(F,{open:J!==null,onOpenChange:s=>!s&&ie(null),children:e.jsxs(I,{children:[e.jsxs(R,{children:[e.jsx(q,{children:"Create ACL Rule"}),e.jsxs(D,{children:["Add an access control list rule for ",J?.type==="frontend"?"frontend":"backend"]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"ACL Name *"}),e.jsx(r,{value:Q,onChange:s=>ze(s.target.value),placeholder:"is_api_request"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Criterion *"}),e.jsxs(C,{value:Y,onValueChange:Oe,children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"hdr(host)",children:"hdr(host) - Host header"}),e.jsx(i,{value:"path_beg",children:"path_beg - Path begins with"}),e.jsx(i,{value:"path_end",children:"path_end - Path ends with"}),e.jsx(i,{value:"path",children:"path - Exact path match"}),e.jsx(i,{value:"src",children:"src - Source IP address"}),e.jsx(i,{value:"method",children:"method - HTTP method"}),e.jsx(i,{value:"url_param",children:"url_param - URL parameter"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Value"}),e.jsx(r,{value:z,onChange:s=>_e(s.target.value),placeholder:"api.example.com"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Value to match against the criterion"})]}),z&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Operator"}),e.jsxs(C,{value:Ve,onValueChange:s=>Me(s),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"eq",children:"Equals (eq)"}),e.jsx(i,{value:"ne",children:"Not equals (ne)"}),e.jsx(i,{value:"beg",children:"Begins with (beg)"}),e.jsx(i,{value:"end",children:"Ends with (end)"}),e.jsx(i,{value:"sub",children:"Contains (sub)"}),e.jsx(i,{value:"gt",children:"Greater than (gt)"}),e.jsx(i,{value:"lt",children:"Less than (lt)"}),e.jsx(i,{value:"gte",children:"Greater or equal (gte)"}),e.jsx(i,{value:"lte",children:"Less or equal (lte)"})]})]})]})]}),e.jsxs(E,{children:[e.jsx(h,{variant:"outline",onClick:()=>{ie(null),ns()},children:"Cancel"}),e.jsx(h,{onClick:Ws,children:"Create"})]})]})}),e.jsx(F,{open:H!==null,onOpenChange:s=>!s&&He(null),children:e.jsxs(I,{children:[e.jsxs(R,{children:[e.jsx(q,{children:"Edit ACL Rule"}),e.jsx(D,{children:"Update ACL rule configuration"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"ACL Name *"}),e.jsx(r,{value:Q,onChange:s=>ze(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Criterion *"}),e.jsxs(C,{value:Y,onValueChange:Oe,children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"hdr(host)",children:"hdr(host) - Host header"}),e.jsx(i,{value:"path_beg",children:"path_beg - Path begins with"}),e.jsx(i,{value:"path_end",children:"path_end - Path ends with"}),e.jsx(i,{value:"path",children:"path - Exact path match"}),e.jsx(i,{value:"src",children:"src - Source IP address"}),e.jsx(i,{value:"method",children:"method - HTTP method"}),e.jsx(i,{value:"url_param",children:"url_param - URL parameter"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Value"}),e.jsx(r,{value:z,onChange:s=>_e(s.target.value)})]}),z&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Operator"}),e.jsxs(C,{value:Ve,onValueChange:s=>Me(s),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(i,{value:"eq",children:"Equals (eq)"}),e.jsx(i,{value:"ne",children:"Not equals (ne)"}),e.jsx(i,{value:"beg",children:"Begins with (beg)"}),e.jsx(i,{value:"end",children:"Ends with (end)"}),e.jsx(i,{value:"sub",children:"Contains (sub)"}),e.jsx(i,{value:"gt",children:"Greater than (gt)"}),e.jsx(i,{value:"lt",children:"Less than (lt)"}),e.jsx(i,{value:"gte",children:"Greater or equal (gte)"}),e.jsx(i,{value:"lte",children:"Less or equal (lte)"})]})]})]})]}),e.jsxs(E,{children:[e.jsx(h,{variant:"outline",onClick:()=>{He(null),ns()},children:"Cancel"}),e.jsxs(h,{onClick:Xs,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})}),e.jsx(F,{open:Is,onOpenChange:Ue,children:e.jsxs(I,{className:"max-w-2xl",children:[e.jsxs(R,{children:[e.jsx(q,{children:"Add SSL Certificate"}),e.jsx(D,{children:"Configure SSL/TLS certificate for secure connections"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Certificate Name *"}),e.jsx(r,{value:Z,onChange:s=>$e(s.target.value),placeholder:"example.com"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Certificate Path *"}),e.jsx(r,{value:ee,onChange:s=>Ge(s.target.value),placeholder:"/etc/ssl/certs/example.com.crt"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Private Key Path *"}),e.jsx(r,{value:se,onChange:s=>We(s.target.value),placeholder:"/etc/ssl/private/example.com.key"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"CA Certificate Path"}),e.jsx(r,{value:Xe,onChange:s=>Je(s.target.value),placeholder:"/etc/ssl/certs/ca.crt"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Domain"}),e.jsx(r,{value:Qe,onChange:s=>Ye(s.target.value),placeholder:"example.com"})]})]})]}),e.jsxs(E,{children:[e.jsx(h,{variant:"outline",onClick:()=>{Ue(!1),ts()},children:"Cancel"}),e.jsx(h,{onClick:Js,children:"Add Certificate"})]})]})}),e.jsx(F,{open:us!==null,onOpenChange:s=>!s&&Ke(null),children:e.jsxs(I,{className:"max-w-2xl",children:[e.jsxs(R,{children:[e.jsx(q,{children:"Edit SSL Certificate"}),e.jsx(D,{children:"Update SSL certificate configuration"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Certificate Name *"}),e.jsx(r,{value:Z,onChange:s=>$e(s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Certificate Path *"}),e.jsx(r,{value:ee,onChange:s=>Ge(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Private Key Path *"}),e.jsx(r,{value:se,onChange:s=>We(s.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"CA Certificate Path"}),e.jsx(r,{value:Xe,onChange:s=>Je(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Domain"}),e.jsx(r,{value:Qe,onChange:s=>Ye(s.target.value)})]})]})]}),e.jsxs(E,{children:[e.jsx(h,{variant:"outline",onClick:()=>{Ke(null),ts()},children:"Cancel"}),e.jsxs(h,{onClick:Qs,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})}),e.jsx(js,{open:ue!==null,onOpenChange:s=>!s&&os(null),children:e.jsxs(ps,{children:[e.jsxs(vs,{children:[e.jsx(gs,{children:"Delete Frontend?"}),e.jsxs(Ns,{children:['This action cannot be undone. This will permanently delete the frontend "',w.find(s=>s.id===ue)?.name,'".']})]}),e.jsxs(Cs,{children:[e.jsx(fs,{children:"Cancel"}),e.jsx(bs,{onClick:()=>ue&&Hs(ue),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(js,{open:je!==null,onOpenChange:s=>!s&&xs(null),children:e.jsxs(ps,{children:[e.jsxs(vs,{children:[e.jsx(gs,{children:"Delete Backend?"}),e.jsxs(Ns,{children:['This action cannot be undone. This will permanently delete the backend "',m.find(s=>s.id===je)?.name,'" and all its servers.']})]}),e.jsxs(Cs,{children:[e.jsx(fs,{children:"Cancel"}),e.jsx(bs,{onClick:()=>je&&Vs(je),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(js,{open:pe!==null,onOpenChange:s=>!s&&ms(null),children:e.jsxs(ps,{children:[e.jsxs(vs,{children:[e.jsx(gs,{children:"Delete Server?"}),e.jsx(Ns,{children:"This action cannot be undone. This will permanently remove the server from the backend."})]}),e.jsxs(Cs,{children:[e.jsx(fs,{children:"Cancel"}),e.jsx(bs,{onClick:()=>pe&&$s(pe.backendId,pe.serverId),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{fa as HAProxyConfigAdvanced};

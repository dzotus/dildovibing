import{u as se,j as e,r as f,i as v,S as M,C as i,e as c,f as d,k as o,R as T,A as ae,T as re,a as le,b as w,c as te,d as y,h as C,P,B as j,m as D,L as l,I as g,n as z,o as A,p as E,q as I,s as S,t as R}from"./index-CHKNZn98.js";import{R as ne}from"./refresh-ccw-X6vm0O4r.js";import{R as L}from"./route-XstPSt8-.js";import{C as H}from"./circle-check-big-D_CmPeBN.js";import{S as q}from"./shield-BHxX70PM.js";function ge({componentId:B}){const{nodes:V,updateNode:$}=se(),k=V.find(s=>s.id===B);if(!k)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const t=k.data.config||{},h=t.routers||[{id:"1",name:"web-router",rule:"Host(`example.com`)",service:"web-service",entryPoints:["web"],tls:!0,priority:1,requests:45e3,responses:44800}],m=t.services||[{id:"1",name:"web-service",servers:[{url:"http://192.168.1.10:8080",weight:1},{url:"http://192.168.1.11:8080",weight:1}],loadBalancer:"roundrobin",healthCheck:{enabled:!0,path:"/health",interval:10}}],N=t.middlewares||[{id:"1",name:"auth-middleware",type:"auth",config:{headerField:"X-User"}},{id:"2",name:"rate-limit",type:"rateLimit",config:{average:100,burst:50}}],F=t.entryPoints||["web","websecure"],G=t.totalRequests||h.reduce((s,a)=>s+(a.requests||0),0),U=t.totalResponses||h.reduce((s,a)=>s+(a.responses||0),0),W=t.activeRouters||h.length,[ie,ce]=f.useState(null),[de,X]=f.useState(!1),[oe,J]=f.useState(!1),[xe,K]=f.useState(!1),n=s=>{$(B,{data:{...k.data,config:{...t,...s}}})},O=()=>{const s={id:`router-${Date.now()}`,name:"new-router",rule:"Host(`example.com`)",service:m[0]?.name||"",entryPoints:["web"],priority:1};n({routers:[...h,s]}),X(!1)},Q=s=>{n({routers:h.filter(a=>a.id!==s)})},p=(s,a,x)=>{const u=h.map(r=>r.id===s?{...r,[a]:x}:r);n({routers:u})},Y=()=>{const s={id:`service-${Date.now()}`,name:"new-service",servers:[{url:"http://localhost:8080",weight:1}],loadBalancer:"roundrobin"};n({services:[...m,s]}),J(!1)},Z=s=>{n({services:m.filter(a=>a.id!==s)})},b=(s,a,x)=>{const u=m.map(r=>r.id===s?{...r,[a]:x}:r);n({services:u})},_=()=>{const s={id:`middleware-${Date.now()}`,name:"new-middleware",type:"headers",config:{}};n({middlewares:[...N,s]}),K(!1)},ee=s=>{n({middlewares:N.filter(a=>a.id!==s)})};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Traefik"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Dynamic Reverse Proxy"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Modern HTTP reverse proxy and load balancer"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(v,{variant:"outline",size:"sm",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(M,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(i,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Routers"}),e.jsx(L,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:W}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"active"})]})})]}),e.jsxs(i,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Services"}),e.jsx(T,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:m.length}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"configured"})]})})]}),e.jsxs(i,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Requests"}),e.jsx(ae,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(o,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:G.toLocaleString()})})})]}),e.jsxs(i,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Responses"}),e.jsx(H,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(o,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:U.toLocaleString()})})})]})]}),e.jsxs(re,{defaultValue:"routers",className:"space-y-4",children:[e.jsxs(le,{children:[e.jsxs(w,{value:"routers",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Routers (",h.length,")"]}),e.jsxs(w,{value:"services",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Services (",m.length,")"]}),e.jsxs(w,{value:"middlewares",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Middlewares (",N.length,")"]}),e.jsxs(w,{value:"settings",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(y,{value:"routers",className:"space-y-4",children:e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Routers"}),e.jsx(C,{children:"Configure routing rules"})]}),e.jsxs(v,{onClick:O,size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Create Router"]})]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:h.map(s=>e.jsxs(i,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(L,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(d,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(j,{variant:"outline",className:"font-mono text-xs",children:s.rule}),s.tls&&e.jsxs(j,{variant:"default",className:"bg-green-500",children:[e.jsx(q,{className:"h-3 w-3 mr-1"}),"TLS"]}),e.jsxs(j,{variant:"outline",children:["Priority: ",s.priority||1]})]})]})]}),e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>Q(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(D,{className:"h-4 w-4"})})]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Router Name"}),e.jsx(g,{value:s.name,onChange:a=>p(s.id,"name",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Service"}),e.jsxs(z,{value:s.service,onValueChange:a=>p(s.id,"service",a),children:[e.jsx(A,{children:e.jsx(E,{})}),e.jsx(I,{children:m.map(a=>e.jsx(S,{value:a.name,children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(l,{children:"Rule"}),e.jsx(g,{value:s.rule,onChange:a=>p(s.id,"rule",a.target.value),placeholder:"Host(`example.com`)",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Enable TLS"}),e.jsx(R,{checked:s.tls??!1,onCheckedChange:a=>p(s.id,"tls",a)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Priority"}),e.jsx(g,{type:"number",value:s.priority||1,onChange:a=>p(s.id,"priority",Number(a.target.value)),min:1})]})]}),s.requests!==void 0&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm pt-2 border-t",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Requests:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.requests.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Responses:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.responses?.toLocaleString()||0})]})]})]})]},s.id))})})]})}),e.jsx(y,{value:"services",className:"space-y-4",children:e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Services"}),e.jsx(C,{children:"Configure backend services"})]}),e.jsxs(v,{onClick:Y,size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Create Service"]})]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:m.map(s=>e.jsxs(i,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/30",children:e.jsx(T,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx(d,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(j,{variant:"outline",children:s.loadBalancer||"roundrobin"}),s.servers&&e.jsxs(j,{variant:"outline",className:"bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300",children:[s.servers.length," servers"]}),s.healthCheck?.enabled&&e.jsxs(j,{variant:"default",className:"bg-green-500",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),"Health Check"]})]})]})]}),e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>Z(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(D,{className:"h-4 w-4"})})]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Service Name"}),e.jsx(g,{value:s.name,onChange:a=>b(s.id,"name",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Load Balancer"}),e.jsxs(z,{value:s.loadBalancer||"roundrobin",onValueChange:a=>b(s.id,"loadBalancer",a),children:[e.jsx(A,{children:e.jsx(E,{})}),e.jsxs(I,{children:[e.jsx(S,{value:"roundrobin",children:"Round Robin"}),e.jsx(S,{value:"wrr",children:"Weighted Round Robin"}),e.jsx(S,{value:"drr",children:"Dynamic Round Robin"})]})]})]})]}),s.servers&&s.servers.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Servers"}),e.jsx("div",{className:"space-y-2",children:s.servers.map((a,x)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{value:a.url,onChange:u=>{const r=[...s.servers];r[x]={...r[x],url:u.target.value},b(s.id,"servers",r)},className:"flex-1"}),e.jsx(g,{type:"number",value:a.weight||1,onChange:u=>{const r=[...s.servers];r[x]={...r[x],weight:Number(u.target.value)},b(s.id,"servers",r)},className:"w-20",min:1})]},x))})]})]})]},s.id))})})]})}),e.jsx(y,{value:"middlewares",className:"space-y-4",children:e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Middlewares"}),e.jsx(C,{children:"Configure request/response middleware"})]}),e.jsxs(v,{onClick:_,size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Create Middleware"]})]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:N.map(s=>e.jsx(i,{className:"border-l-4 border-l-purple-500 hover:shadow-md transition-shadow bg-card",children:e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30",children:e.jsx(q,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx(d,{className:"text-lg font-semibold",children:s.name}),e.jsx(j,{variant:"outline",className:"mt-2",children:s.type})]})]}),e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>ee(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(D,{className:"h-4 w-4"})})]})})},s.id))})})]})}),e.jsx(y,{value:"settings",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Traefik Settings"}),e.jsx(C,{children:"Global configuration"})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Entry Points"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:F.map((s,a)=>e.jsx(j,{variant:"outline",children:s},a))})]}),e.jsx(M,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Enable Dashboard"}),e.jsx(R,{checked:t.enableDashboard??!0,onCheckedChange:s=>n({enableDashboard:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Enable API"}),e.jsx(R,{checked:t.enableAPI??!0,onCheckedChange:s=>n({enableAPI:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Auto Discover Services"}),e.jsx(R,{checked:t.autoDiscoverServices??!0,onCheckedChange:s=>n({autoDiscoverServices:s})})]})]})]})})]})]})})}export{ge as TraefikConfigAdvanced};

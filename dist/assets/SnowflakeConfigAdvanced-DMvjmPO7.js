import{K as Te,u as Le,j as e,r as f,ay as Ae,az as Ee,e as De,l as N,S as re,C as c,h as u,i as m,m as d,T as ze,b as We,c as A,D as ne,A as qe,f as E,k as C,P as F,B as j,o as ie,L as i,I as x,q as H,s as X,t as O,v as K,w as v,x as Me,aA as le,aB as Ie,aC as Ue}from"./index-HDGrDyRq.js";import{P as $e}from"./progress-DX86yUno.js";import{T as Pe}from"./textarea-CjQgIquO.js";import{R as Fe}from"./refresh-ccw-BUKvY8S7.js";import{C as He}from"./chart-column-P2BXSWww.js";import{K as Xe}from"./key-CMmIYHBN.js";import{R as ce,L as Oe,C as de,X as oe,Y as B,T as ue,a as me,b as _}from"./LineChart-Cj16NB3Q.js";import{A as Ke,a as Be}from"./AreaChart-YCGJOsC2.js";import"./value-DZlexiVD.js";const _e=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],xe=Te("snowflake",_e);function ds({componentId:b}){const{nodes:he,updateNode:V}=Le(),D=he.find(s=>s.id===b);if(!D)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const l=D.data.config||{},G=f.useRef(!1);f.useEffect(()=>{if(!G.current&&!l.account&&!l.region&&!l.warehouse&&!l.database){G.current=!0;const s=Ae(b);V(b,{data:{...D.data,config:{...l,account:s.account,region:s.region,warehouse:s.warehouse,database:s.database,schema:s.schema,username:s.username,role:s.role}}})}},[b]);const w=l.account||"",Q=l.region||"",Y=w&&Q?w.includes(".")?w:Ee(w,Q,"aws"):"",je=l.username||"",ge=l.password||"",q=l.warehouse||"",M=l.database||"",I=l.schema||"PUBLIC",pe=l.role||"ACCOUNTADMIN",g=l.warehouses||[],y=l.databases||[{name:"SNOWFLAKE",comment:"System database",retentionTime:1,size:0,schemas:[{name:"INFORMATION_SCHEMA",tables:0,views:0,functions:0}]}],U=l.queries||[],[Ge,Ye]=f.useState(null),[Je,Ze]=f.useState(null),[ve,z]=f.useState(!1),[h,W]=f.useState(""),p=De.getSnowflakeRoutingEngine(b),n=s=>{V(b,{data:{...D.data,config:{...l,...s}}})},fe=()=>{const s={name:"NEW_WH",size:"Small",autoSuspend:60,autoResume:!0,minClusterCount:1,maxClusterCount:1,status:"suspended",runningQueries:0,queuedQueries:0};n({warehouses:[...g,s]})},Ne=s=>{n({warehouses:g.filter((a,t)=>t!==s)})},S=(s,a,t)=>{const r=[...g];r[s]={...r[s],[a]:t},n({warehouses:r})},J=(s,a)=>!s||s.trim().length===0?!1:!T.some((t,r)=>r!==a&&t.name===s.trim()),ye=()=>{const s={name:"NEW_DB",retentionTime:1,size:0,schemas:[{name:"PUBLIC",tables:0,views:0,functions:0}]};n({databases:[...y,s]})},Ce=s=>{n({databases:y.filter((a,t)=>t!==s)})},$=(s,a,t)=>{const r=[...y];r[s]={...r[s],[a]:t},n({databases:r})},k=s=>{const a=s.trim();if(!a)return{valid:!1,error:"Query cannot be empty"};if(a.toUpperCase(),!/^(SELECT|INSERT|UPDATE|DELETE|CREATE|DROP|ALTER|SHOW|DESCRIBE|USE|GRANT|REVOKE)/i.test(a))return{valid:!1,error:"Query must start with a valid SQL statement (SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, etc.)"};const t=(a.match(/\(/g)||[]).length,r=(a.match(/\)/g)||[]).length;return t!==r?{valid:!1,error:"Unmatched parentheses in query"}:(a.match(/'/g)||[]).length%2!==0?{valid:!1,error:"Unmatched single quotes in query"}:(a.match(/"/g)||[]).length%2!==0?{valid:!1,error:"Unmatched double quotes in query"}:{valid:!0}},be=()=>{if(!h.trim())return;if(!k(h).valid){const t={id:`query-${Date.now()}`,queryText:h,status:"failed",warehouse:q,database:M,schema:I,duration:0,rowsReturned:0};n({queries:[t,...U.slice(0,9)]}),W(""),z(!1);return}const a={id:`query-${Date.now()}`,queryText:h,status:"running",warehouse:q,database:M,schema:I,duration:0,rowsReturned:0};n({queries:[a,...U.slice(0,9)]}),W(""),z(!1)},o=p?.getMetrics(),R=p?.getWarehouses()||[],Z=p?.getRecentQueries(10)||[];p?.getMetricsHistory();const ee=p?.getCostHistory()||[],se=p?.getQueryPerformanceHistory()||[],[ae,we]=f.useState([]);f.useEffect(()=>{if(!o||!R.length)return;const s=[];for(const a of R){if(a.status==="running"){const t=Se(a),r=t>0?a.runningQueries/t:0;r>.9?s.push({id:`util-high-${a.name}`,type:"error",message:`Warehouse ${a.name} utilization is ${(r*100).toFixed(1)}% - consider scaling up`,timestamp:Date.now()}):r>.7&&s.push({id:`util-warning-${a.name}`,type:"warning",message:`Warehouse ${a.name} utilization is ${(r*100).toFixed(1)}%`,timestamp:Date.now()})}a.queuedQueries>10&&s.push({id:`queue-${a.name}`,type:"warning",message:`Warehouse ${a.name} has ${a.queuedQueries} queued queries`,timestamp:Date.now()})}o.warehouseUtilization>.9&&s.push({id:"overall-util-high",type:"error",message:`Overall warehouse utilization is ${(o.warehouseUtilization*100).toFixed(1)}%`,timestamp:Date.now()}),we(s)},[o,R]);const Se=s=>{const t={"X-Small":1,Small:2,Medium:4,Large:8,"X-Large":16,"2X-Large":32,"3X-Large":64,"4X-Large":128}[s.size]||2,r=s.minClusterCount||1;return t*r*8},Qe=o?.runningQueries??g.reduce((s,a)=>s+(a.runningQueries||0),0),ke=o?.queuedQueries??g.reduce((s,a)=>s+(a.queuedQueries||0),0),T=R.length>0?R.map(s=>{const a=g.find(t=>t.name===s.name);return{...s,autoSuspend:s.autoSuspend??a?.autoSuspend,autoResume:s.autoResume??a?.autoResume,minClusterCount:s.minClusterCount??a?.minClusterCount??1,maxClusterCount:s.maxClusterCount??a?.maxClusterCount??1}}):g,P=Z.length>0?Z:U,Re=()=>{if(!p)return;p.getMetrics();const s=p.getWarehouses(),a=p.getRecentQueries(100),t=s.map(r=>{const L=g.find(te=>te.name===r.name);return{...r,autoSuspend:L?.autoSuspend??r.autoSuspend,autoResume:L?.autoResume??r.autoResume,minClusterCount:L?.minClusterCount??r.minClusterCount,maxClusterCount:L?.maxClusterCount??r.maxClusterCount}});n({warehouses:t.length>0?t:g,queries:a.slice(0,100)})};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Snowflake Data Cloud"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Data Warehouse"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure warehouses, databases, schemas and execute queries"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(N,{variant:"outline",size:"sm",onClick:Re,children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(re,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(c,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Account"})}),e.jsx(d,{children:e.jsx("p",{className:"text-sm break-words leading-tight",children:Y})})]}),e.jsxs(c,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Warehouses"})}),e.jsx(d,{children:e.jsx("span",{className:"text-2xl font-bold",children:T.length})})]}),e.jsxs(c,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Running Queries"})}),e.jsx(d,{children:e.jsx("span",{className:"text-2xl font-bold",children:Qe})})]}),e.jsxs(c,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium",children:"Queued Queries"})}),e.jsx(d,{children:e.jsx("span",{className:"text-2xl font-bold",children:ke})})]})]}),e.jsxs(ze,{defaultValue:"warehouses",className:"space-y-4",children:[e.jsxs(We,{children:[e.jsxs(A,{value:"warehouses",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Warehouses (",T.length,")"]}),e.jsxs(A,{value:"databases",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Databases (",y.length,")"]}),e.jsxs(A,{value:"queries",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Queries (",P.length,")"]}),e.jsxs(A,{value:"metrics",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Metrics & Analytics"]}),e.jsxs(A,{value:"connection",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Connection"]})]}),e.jsx(E,{value:"warehouses",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Compute Warehouses"}),e.jsx(C,{children:"Configure virtual warehouses for query processing"})]}),e.jsxs(N,{onClick:fe,size:"sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Create Warehouse"]})]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:T.map((s,a)=>e.jsxs(c,{className:"border-l-4 border-l-blue-500",children:[e.jsx(u,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xe,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx(m,{className:"text-base",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(j,{variant:s.status==="running"?"default":"outline",children:s.status||"suspended"}),e.jsx(j,{variant:"outline",children:s.size}),e.jsxs(j,{variant:"outline",children:[s.runningQueries||0," running"]})]})]})]}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>Ne(a),disabled:g.length===1,children:e.jsx(ie,{className:"h-4 w-4"})})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Running Queries"}),e.jsx("p",{className:"text-lg font-semibold",children:s.runningQueries||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Queued Queries"}),e.jsx("p",{className:"text-lg font-semibold",children:s.queuedQueries||0})]})]}),e.jsx(re,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Warehouse Name"}),e.jsx(x,{value:s.name,onChange:t=>S(a,"name",t.target.value),className:J(s.name,a)?"":"border-destructive"}),!J(s.name,a)&&e.jsx("p",{className:"text-xs text-destructive",children:"Warehouse name must be unique"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Size"}),e.jsxs(H,{value:s.size,onValueChange:t=>S(a,"size",t),children:[e.jsx(X,{children:e.jsx(O,{})}),e.jsxs(K,{children:[e.jsx(v,{value:"X-Small",children:"X-Small"}),e.jsx(v,{value:"Small",children:"Small"}),e.jsx(v,{value:"Medium",children:"Medium"}),e.jsx(v,{value:"Large",children:"Large"}),e.jsx(v,{value:"X-Large",children:"X-Large"}),e.jsx(v,{value:"2X-Large",children:"2X-Large"}),e.jsx(v,{value:"3X-Large",children:"3X-Large"}),e.jsx(v,{value:"4X-Large",children:"4X-Large"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Auto Suspend (seconds)"}),e.jsx(x,{type:"number",value:s.autoSuspend||60,onChange:t=>S(a,"autoSuspend",Number(t.target.value))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Auto Resume"}),e.jsx(Me,{checked:s.autoResume??!0,onCheckedChange:t=>S(a,"autoResume",t)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Min Clusters"}),e.jsx(x,{type:"number",value:s.minClusterCount||1,onChange:t=>S(a,"minClusterCount",Number(t.target.value)),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Max Clusters"}),e.jsx(x,{type:"number",value:s.maxClusterCount||1,onChange:t=>S(a,"maxClusterCount",Number(t.target.value)),min:1})]})]})]})]},a))})})]})}),e.jsx(E,{value:"databases",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Databases"}),e.jsx(C,{children:"Manage databases and schemas"})]}),e.jsxs(N,{onClick:ye,size:"sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Create Database"]})]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:y.map((s,a)=>e.jsxs(c,{className:"border-l-4 border-l-green-500",children:[e.jsx(u,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx(m,{className:"text-base",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(j,{variant:"outline",children:[s.schemas?.length||0," schemas"]}),s.size!==void 0&&e.jsxs(j,{variant:"outline",children:[s.size.toLocaleString()," bytes"]})]})]})]}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>Ce(a),disabled:y.length===1,children:e.jsx(ie,{className:"h-4 w-4"})})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Database Name"}),e.jsx(x,{value:s.name,onChange:t=>$(a,"name",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Retention Time (days)"}),e.jsx(x,{type:"number",value:s.retentionTime||1,onChange:t=>$(a,"retentionTime",Number(t.target.value))})]})]}),s.comment&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Comment"}),e.jsx(x,{value:s.comment,onChange:t=>$(a,"comment",t.target.value)})]}),s.schemas&&s.schemas.length>0&&e.jsxs("div",{children:[e.jsx(i,{className:"mb-2 block",children:"Schemas"}),e.jsx("div",{className:"space-y-2",children:s.schemas.map((t,r)=>e.jsx(c,{className:"p-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(j,{variant:"outline",children:[t.tables||0," tables"]}),e.jsxs(j,{variant:"outline",children:[t.views||0," views"]}),e.jsxs(j,{variant:"outline",children:[t.functions||0," functions"]})]})]})})},r))})]})]})]},a))})})]})}),e.jsx(E,{value:"queries",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Query History"}),e.jsx(C,{children:"Execute and monitor SQL queries"})]}),e.jsxs(N,{onClick:()=>z(!0),size:"sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"New Query"]})]})}),e.jsxs(d,{children:[ve&&e.jsxs(c,{className:"mb-4 border-primary",children:[e.jsx(u,{children:e.jsx(m,{children:"Execute Query"})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"SQL Query"}),e.jsx(Pe,{value:h,onChange:s=>W(s.target.value),placeholder:"SELECT * FROM table_name LIMIT 10;",rows:6,className:h.trim()&&!k(h).valid?"border-destructive":""}),h.trim()&&!k(h).valid&&e.jsx("p",{className:"text-xs text-destructive",children:k(h).error})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{onClick:be,disabled:!h.trim()||!k(h).valid,children:"Execute"}),e.jsx(N,{variant:"outline",onClick:()=>{z(!1),W("")},children:"Cancel"})]})]})]}),P.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No queries executed"}):e.jsx("div",{className:"space-y-2",children:P.map(s=>e.jsx(c,{className:"border-l-4 border-l-purple-500",children:e.jsx(d,{className:"pt-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{variant:s.status==="success"?"default":s.status==="failed"?"destructive":s.status==="running"?"secondary":"outline",children:s.status}),s.warehouse&&e.jsx(j,{variant:"outline",children:s.warehouse}),s.duration!==void 0&&e.jsxs(j,{variant:"outline",children:[s.duration,"ms"]})]}),e.jsx("p",{className:"text-sm font-mono bg-muted p-2 rounded text-xs",children:s.queryText}),s.rowsReturned!==void 0&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Rows returned: ",s.rowsReturned]})]})})})},s.id))})]})]})}),e.jsxs(E,{value:"metrics",className:"space-y-4",children:[ae.length>0&&e.jsxs(c,{className:"border-l-4 border-l-yellow-500",children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-yellow-500"}),e.jsx(m,{children:"Alerts"})]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-2",children:ae.map(s=>e.jsx("div",{className:`p-3 rounded-lg border ${s.type==="error"?"bg-destructive/10 border-destructive/20 text-destructive":s.type==="warning"?"bg-yellow-500/10 border-yellow-500/20 text-yellow-600 dark:text-yellow-400":"bg-blue-500/10 border-blue-500/20 text-blue-600 dark:text-blue-400"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(le,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:s.message})]})},s.id))})})]}),e.jsxs(c,{children:[e.jsxs(u,{children:[e.jsx(m,{children:"Query Performance"}),e.jsx(C,{children:"Average query time, queries per second, and cache hit rate over time"})]}),e.jsx(d,{children:se.length===0?e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground text-sm",children:"No performance data available. Start the simulation to see metrics."}):e.jsx(ce,{width:"100%",height:300,children:e.jsxs(Oe,{data:se,children:[e.jsx(de,{strokeDasharray:"3 3"}),e.jsx(oe,{dataKey:"timestamp",tickFormatter:s=>{const a=new Date(s);return`${a.getHours()}:${a.getMinutes().toString().padStart(2,"0")}:${a.getSeconds().toString().padStart(2,"0")}`}}),e.jsx(B,{yAxisId:"left"}),e.jsx(B,{yAxisId:"right",orientation:"right"}),e.jsx(ue,{labelFormatter:s=>new Date(s).toLocaleTimeString(),formatter:(s,a)=>a==="avgQueryTime"?[`${s.toFixed(2)} ms`,"Avg Query Time"]:a==="queriesPerSecond"?[`${s.toFixed(2)}`,"Queries/sec"]:a==="cacheHitRate"?[`${(s*100).toFixed(1)}%`,"Cache Hit Rate"]:[s,a]}),e.jsx(me,{}),e.jsx(_,{yAxisId:"left",type:"monotone",dataKey:"avgQueryTime",stroke:"#8884d8",strokeWidth:2,name:"Avg Query Time (ms)",dot:!1}),e.jsx(_,{yAxisId:"left",type:"monotone",dataKey:"queriesPerSecond",stroke:"#82ca9d",strokeWidth:2,name:"Queries/sec",dot:!1}),e.jsx(_,{yAxisId:"right",type:"monotone",dataKey:"cacheHitRate",stroke:"#ffc658",strokeWidth:2,name:"Cache Hit Rate",dot:!1,strokeDasharray:"5 5"})]})})})]}),e.jsxs(c,{children:[e.jsxs(u,{children:[e.jsx(m,{children:"Cost Trends"}),e.jsx(C,{children:"Total cost (credits) over time"})]}),e.jsxs(d,{children:[ee.length===0?e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground text-sm",children:"No cost data available. Start the simulation to see cost trends."}):e.jsx(ce,{width:"100%",height:300,children:e.jsxs(Ke,{data:ee,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorCost",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),e.jsx(de,{strokeDasharray:"3 3"}),e.jsx(oe,{dataKey:"timestamp",tickFormatter:s=>{const a=new Date(s);return`${a.getHours()}:${a.getMinutes().toString().padStart(2,"0")}:${a.getSeconds().toString().padStart(2,"0")}`}}),e.jsx(B,{}),e.jsx(ue,{labelFormatter:s=>new Date(s).toLocaleTimeString(),formatter:s=>[`${s.toFixed(4)} credits`,"Cost"]}),e.jsx(me,{}),e.jsx(Be,{type:"monotone",dataKey:"cost",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorCost)",name:"Total Cost (credits)"})]})}),o&&e.jsx("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Current Total Cost:"}),e.jsxs("span",{className:"text-lg font-bold",children:[o.totalCost.toFixed(4)," credits"]})]})})]})]}),o&&e.jsxs(c,{children:[e.jsxs(u,{children:[e.jsx(m,{children:"Warehouse Utilization"}),e.jsx(C,{children:"Current utilization metrics across all warehouses"})]}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Utilization"}),e.jsxs("span",{className:"text-sm font-bold",children:[(o.warehouseUtilization*100).toFixed(1),"%"]})]}),e.jsx($e,{value:o.warehouseUtilization*100,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Running Warehouses"}),e.jsx("p",{className:"text-2xl font-bold",children:o.runningWarehouses})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Suspended Warehouses"}),e.jsx("p",{className:"text-2xl font-bold",children:o.suspendedWarehouses})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cache Hit Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(o.cacheHitRate*100).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Query Time"}),e.jsxs("p",{className:"text-2xl font-bold",children:[o.avgQueryTime.toFixed(2)," ms"]})]})]})]})})]})]}),e.jsx(E,{value:"connection",className:"space-y-4",children:e.jsxs(c,{children:[e.jsxs(u,{children:[e.jsx(m,{children:"Connection Settings"}),e.jsx(C,{children:"Configure Snowflake connection parameters"})]}),e.jsx(d,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Account"}),e.jsx(x,{value:Y,onChange:s=>{const a=s.target.value;if(a.includes(".")){const t=a.split(".");t.length>=3?n({account:t[0],region:t[1]}):n({account:a})}else n({account:a})},placeholder:"account.region.cloud"}),w&&!Ie(w)&&e.jsx("p",{className:"text-xs text-destructive",children:"Invalid account identifier. Use alphanumeric, hyphens, underscores only."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Region"}),e.jsx(x,{value:Q,onChange:s=>n({region:s.target.value}),placeholder:"us-east-1"}),Q&&!Ue(Q)&&e.jsx("p",{className:"text-xs text-destructive",children:"Invalid region. Use a valid Snowflake region."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Username"}),e.jsx(x,{value:je,onChange:s=>n({username:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Password"}),e.jsx(x,{type:"password",value:ge,onChange:s=>n({password:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Role"}),e.jsx(x,{value:pe,onChange:s=>n({role:s.target.value}),placeholder:"ACCOUNTADMIN"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Warehouse"}),e.jsxs(H,{value:q,onValueChange:s=>n({warehouse:s}),children:[e.jsx(X,{children:e.jsx(O,{})}),e.jsx(K,{children:T.map(s=>e.jsx(v,{value:s.name,children:s.name},s.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Database"}),e.jsxs(H,{value:M,onValueChange:s=>n({database:s}),children:[e.jsx(X,{children:e.jsx(O,{})}),e.jsx(K,{children:y.map(s=>e.jsx(v,{value:s.name,children:s.name},s.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Schema"}),e.jsx(x,{value:I,onChange:s=>n({schema:s.target.value}),placeholder:"PUBLIC"})]})]})})]})})]})]})})}export{ds as SnowflakeConfigAdvanced};

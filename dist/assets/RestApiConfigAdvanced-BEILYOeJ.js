import{u as $,j as e,B as g,i as C,c as P,S as z,C as x,e as m,f as p,h as u,k as j,L as n,I as v,T as K,a as M,b,d as E,P as Y,m as _,n as S,o as w,p as I,q as R,s as r}from"./index-Cd78gA_v.js";import{T as N}from"./textarea-jvwGCxIt.js";import{G as k}from"./globe-CorfMQQo.js";import{C as q}from"./code-teBDdihx.js";function X({componentId:A}){const{nodes:B,updateNode:L}=$(),f=B.find(s=>s.id===A);if(!f)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const t=f.data.config||{},y=t.baseUrl||"https://api.example.com",T=t.version||"v1",O=t.title||"REST API",U=t.description||"RESTful API service",i=t.endpoints||[],o=t.authentication||{type:"none"},D=t.openApiSpec||`openapi: 3.0.0
info:
  title: ${O}
  version: ${T}
  description: ${U}
servers:
  - url: ${y}
paths:
  /users:
    get:
      summary: List users
      tags: [users]
      responses:
        '200':
          description: Successful response`,c=s=>{L(A,{data:{...f.data,config:{...t,...s}}})},G=()=>{c({endpoints:[...i,{path:"/new-endpoint",method:"GET",description:"New endpoint",requests:0,avgResponseTime:0,statusCode:200}]})},V=s=>{c({endpoints:i.filter((l,a)=>a!==s)})},d=(s,l,a)=>{const h=[...i];h[s]={...h[s],[l]:a},c({endpoints:h})},H=s=>{switch(s){case"GET":return"bg-blue-500";case"POST":return"bg-green-500";case"PUT":return"bg-yellow-500";case"DELETE":return"bg-red-500";case"PATCH":return"bg-purple-500";default:return"bg-gray-500"}};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(k,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"REST API"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"RESTful API Service"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(g,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),"Active"]}),e.jsxs(C,{size:"sm",variant:"outline",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"OpenAPI"]})]})]}),e.jsx(z,{}),e.jsxs(x,{children:[e.jsxs(m,{children:[e.jsx(p,{children:"API Information"}),e.jsxs(u,{children:[y,"/",T]})]}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Base URL"}),e.jsx(v,{value:y,onChange:s=>c({baseUrl:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Version"}),e.jsx(v,{value:T,onChange:s=>c({version:s.target.value})})]})]})})]}),e.jsxs(K,{defaultValue:"endpoints",className:"w-full",children:[e.jsxs(M,{className:"grid w-full grid-cols-3",children:[e.jsxs(b,{value:"endpoints",className:"gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Endpoints"]}),e.jsxs(b,{value:"auth",className:"gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Authentication"]}),e.jsxs(b,{value:"openapi",className:"gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"OpenAPI Spec"]})]}),e.jsx(E,{value:"endpoints",className:"space-y-4 mt-4",children:e.jsxs(x,{children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{children:"API Endpoints"}),e.jsx(u,{children:"REST API endpoint configuration"})]}),e.jsxs(C,{size:"sm",onClick:G,variant:"outline",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Add Endpoint"]})]})}),e.jsx(j,{children:i.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(q,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No endpoints configured"}),e.jsx("p",{className:"text-xs mt-2",children:'Click "Add Endpoint" to create a new endpoint'})]}):e.jsx("div",{className:"space-y-3",children:i.map((s,l)=>e.jsxs(x,{className:"border-border",children:[e.jsx(m,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:H(s.method),children:s.method}),e.jsxs("div",{children:[e.jsx(p,{className:"text-lg",children:s.path}),e.jsxs(u,{className:"text-xs mt-1",children:[s.description," • ",(s.requests||0).toLocaleString()," requests • ",s.avgResponseTime||0,"ms avg"]})]})]}),i.length>1&&e.jsx(C,{size:"icon",variant:"ghost",onClick:()=>V(l),children:e.jsx(_,{className:"h-4 w-4"})})]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Method"}),e.jsxs(S,{value:s.method,onValueChange:a=>d(l,"method",a),children:[e.jsx(w,{children:e.jsx(I,{})}),e.jsxs(R,{children:[e.jsx(r,{value:"GET",children:"GET"}),e.jsx(r,{value:"POST",children:"POST"}),e.jsx(r,{value:"PUT",children:"PUT"}),e.jsx(r,{value:"DELETE",children:"DELETE"}),e.jsx(r,{value:"PATCH",children:"PATCH"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Path"}),e.jsx(v,{value:s.path,onChange:a=>d(l,"path",a.target.value),placeholder:"/users"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Summary"}),e.jsx(v,{value:s.summary||"",onChange:a=>d(l,"summary",a.target.value),placeholder:"Brief summary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Description"}),e.jsx(N,{value:s.description,onChange:a=>d(l,"description",a.target.value),placeholder:"Detailed endpoint description",rows:2})]}),s.parameters&&s.parameters.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Parameters"}),e.jsx("div",{className:"space-y-2",children:s.parameters.map((a,h)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsx(g,{variant:"outline",children:a.in}),e.jsx("span",{className:"text-sm font-mono",children:a.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",a.type,")"]}),a.required&&e.jsx(g,{variant:"destructive",className:"text-xs",children:"required"})]},h))})]}),s.requestBody&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Request Body Example"}),e.jsx(N,{value:s.requestBody,onChange:a=>d(l,"requestBody",a.target.value),className:"font-mono text-sm",rows:6})]}),s.responseExample&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Response Example"}),e.jsx(N,{value:s.responseExample,onChange:a=>d(l,"responseExample",a.target.value),className:"font-mono text-sm",rows:6})]})]})]},l))})})]})}),e.jsx(E,{value:"auth",className:"space-y-4 mt-4",children:e.jsxs(x,{children:[e.jsxs(m,{children:[e.jsx(p,{children:"Authentication"}),e.jsx(u,{children:"API authentication configuration"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Authentication Type"}),e.jsxs(S,{value:o.type,onValueChange:s=>c({authentication:{...o,type:s}}),children:[e.jsx(w,{children:e.jsx(I,{})}),e.jsxs(R,{children:[e.jsx(r,{value:"none",children:"None"}),e.jsx(r,{value:"bearer",children:"Bearer Token"}),e.jsx(r,{value:"apiKey",children:"API Key"}),e.jsx(r,{value:"oauth2",children:"OAuth 2.0"})]})]})]}),o.type!=="none"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Token / API Key"}),e.jsx(v,{type:"password",value:o.token||"",onChange:s=>c({authentication:{...o,token:s.target.value}}),placeholder:"Enter token or API key"})]})]})]})}),e.jsx(E,{value:"openapi",className:"space-y-4 mt-4",children:e.jsxs(x,{children:[e.jsxs(m,{children:[e.jsx(p,{children:"OpenAPI Specification"}),e.jsx(u,{children:"OpenAPI 3.0 specification document"})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"OpenAPI YAML"}),e.jsx(N,{value:D,onChange:s=>c({openApiSpec:s.target.value}),className:"font-mono text-sm h-96",placeholder:"openapi: 3.0.0..."})]})})]})})]})]})})}export{X as RestApiConfigAdvanced};

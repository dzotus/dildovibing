const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/KafkaConfigAdvanced-u32qLvtX.js","assets/progress-BgkEGxEf.js","assets/textarea-DXRXS1XW.js","assets/database-DQr0aayQ.js","assets/users-DxnuAYzV.js","assets/shield-BHxX70PM.js","assets/RabbitMQConfigAdvanced-H63u8ir9.js","assets/usePortValidation-DOXRk3SG.js","assets/requiredFields-BLgUUVkB.js","assets/toast-C_NWfU7n.js","assets/message-square-Bb-C69cc.js","assets/arrow-right-left-BV-5BQQM.js","assets/key-Dt_juhNO.js","assets/PostgreSQLConfigAdvanced-CTIheyfu.js","assets/table-DfKiR-rA.js","assets/MongoDBConfigAdvanced-BP3XmrKT.js","assets/RedisConfigAdvanced-BKWd6-oK.js","assets/ElasticsearchConfigAdvanced-BM7c7tow.js","assets/refresh-ccw-X6vm0O4r.js","assets/cloud-BGIxYA8L.js","assets/code-B6Prybb-.js","assets/CassandraConfigAdvanced-DOl2YpjL.js","assets/ClickHouseConfigAdvanced-ClEvX3GN.js","assets/chart-column-CUD7kbPr.js","assets/SnowflakeConfigAdvanced--yzmLWKN.js","assets/S3DataLakeConfigAdvanced-Cg8Cg-3K.js","assets/folder-DgOLTXto.js","assets/NginxConfigAdvanced-D2wryNK6.js","assets/globe-mm807HNj.js","assets/server-DRznE96O.js","assets/RestApiConfigAdvanced-DboIUzeH.js","assets/GRPCConfigAdvanced-BEo-vNS7.js","assets/circle-check-big-D_CmPeBN.js","assets/WebSocketConfigAdvanced-CA6sMOmr.js","assets/send-yQ3CN_Ke.js","assets/GraphQLConfigAdvanced-BWdVqln9.js","assets/SOAPConfigAdvanced-CnXm_nL1.js","assets/WebhookConfigAdvanced-BC5Kxfy2.js","assets/webhook-Du3-AX7j.js","assets/clock-CL3uNMwy.js","assets/DockerK8sConfigAdvanced-CorH1Tx2.js","assets/HAProxyConfigAdvanced-DG-x99eP.js","assets/trending-up-uxSX9vpJ.js","assets/TraefikConfigAdvanced-FxcP0LdB.js","assets/route-XstPSt8-.js","assets/EnvoyConfigAdvanced-Cenu5A6B.js","assets/ActiveMQConfigAdvanced-BwWLX5oh.js","assets/alert-CKKmG0SB.js","assets/AWSSQSConfigAdvanced-DlREkgIJ.js","assets/AzureServiceBusConfigAdvanced-DHwPG5pv.js","assets/GCPPubSubConfigAdvanced-MTSk7KBD.js","assets/KongConfigAdvanced-QtX5qu1V.js","assets/ApigeeConfigAdvanced-DTskhBbg.js","assets/MuleSoftConfigAdvanced-IZ8G24U2.js","assets/GraphQLGatewayConfigAdvanced-CsifIew2.js","assets/BFFServiceConfigAdvanced-BqQRjGjl.js","assets/WebhookRelayConfigAdvanced-B516A41P.js","assets/PrometheusConfigAdvanced-BiXPIRsy.js","assets/GrafanaConfigAdvanced-C5qbh8vl.js","assets/JaegerConfigAdvanced-BTiHH1C5.js","assets/git-branch-Ca5AxnNt.js","assets/OpenTelemetryCollectorConfigAdvanced-CKbtXtVC.js","assets/PagerDutyConfigAdvanced-WFo2DphG.js","assets/KeycloakConfigAdvanced-hIfLcqHY.js","assets/lock-DrsrPhQc.js","assets/WAFConfigAdvanced-B1Bo9imb.js","assets/SecretsVaultConfigAdvanced-R-4OZNzm.js","assets/IDSIPSConfigAdvanced-VWSShfBp.js","assets/ban-CWmd5fiO.js","assets/FirewallConfigAdvanced-CaRMnHoo.js","assets/JenkinsConfigAdvanced-DhE369in.js","assets/package-Bhv4wnrN.js","assets/GitLabCIConfigAdvanced-CBCQwPsE.js","assets/ArgoCDConfigAdvanced-DoQUEA0m.js","assets/HarborConfigAdvanced-BzbCvyp5.js","assets/TerraformConfigAdvanced-Cwbq84Bs.js","assets/AnsibleConfigAdvanced-DBXNFL_I.js","assets/IstioConfigAdvanced-Cski88bP.js","assets/ServiceMeshConfigAdvanced-Bqr3vrEX.js","assets/APIGatewayConfigAdvanced-r6-3Jizt.js","assets/VPNConfigAdvanced-Bx544ibn.js","assets/CDNConfigAdvanced-BODfFbmZ.js","assets/SparkConfigAdvanced-D07GhtSK.js","assets/TensorFlowServingConfigAdvanced-CQnNlTp1.js","assets/PyTorchServeConfigAdvanced-DNMyHXo0.js","assets/FeatureStoreConfigAdvanced-BtwXABLY.js","assets/MLflowConfigAdvanced-DiD8cPyW.js","assets/CRMConfigAdvanced-D1FrgjRu.js","assets/dollar-sign-CYI0-aLp.js","assets/building-D940j6UM.js","assets/ERPConfigAdvanced-CS6r3vGi.js","assets/RPABotConfigAdvanced-3UkbwSZt.js","assets/BPMNEngineConfigAdvanced-D6s5i0pn.js","assets/PaymentGatewayConfigAdvanced-CwXyCihW.js"])))=>i.map(i=>d[i]);
function JM(o,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in o)){const l=Object.getOwnPropertyDescriptor(s,r);l&&Object.defineProperty(o,r,l.get?l:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();var aL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ah(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var zf={exports:{}},yi={};var w0;function eE(){if(w0)return yi;w0=1;var o=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:o,type:s,key:c,ref:r!==void 0?r:null,props:l}}return yi.Fragment=e,yi.jsx=t,yi.jsxs=t,yi}var C0;function tE(){return C0||(C0=1,zf.exports=eE()),zf.exports}var f=tE(),Of={exports:{}},ze={};var S0;function nE(){if(S0)return ze;S0=1;var o=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function w(_){return _===null||typeof _!="object"?null:(_=v&&_[v]||_["@@iterator"],typeof _=="function"?_:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,R={};function E(_,$,X){this.props=_,this.context=$,this.refs=R,this.updater=X||C}E.prototype.isReactComponent={},E.prototype.setState=function(_,$){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,$,"setState")},E.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function T(){}T.prototype=E.prototype;function N(_,$,X){this.props=_,this.context=$,this.refs=R,this.updater=X||C}var A=N.prototype=new T;A.constructor=N,S(A,E.prototype),A.isPureReactComponent=!0;var j=Array.isArray;function q(){}var P={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function ee(_,$,X){var W=X.ref;return{$$typeof:o,type:_,key:$,ref:W!==void 0?W:null,props:X}}function se(_,$){return ee(_.type,$,_.props)}function le(_){return typeof _=="object"&&_!==null&&_.$$typeof===o}function te(_){var $={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(X){return $[X]})}var ae=/\/+/g;function ce(_,$){return typeof _=="object"&&_!==null&&_.key!=null?te(""+_.key):$.toString(36)}function ue(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(q,q):(_.status="pending",_.then(function($){_.status==="pending"&&(_.status="fulfilled",_.value=$)},function($){_.status==="pending"&&(_.status="rejected",_.reason=$)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function z(_,$,X,W,K){var oe=typeof _;(oe==="undefined"||oe==="boolean")&&(_=null);var B=!1;if(_===null)B=!0;else switch(oe){case"bigint":case"string":case"number":B=!0;break;case"object":switch(_.$$typeof){case o:case e:B=!0;break;case g:return B=_._init,z(B(_._payload),$,X,W,K)}}if(B)return K=K(_),B=W===""?"."+ce(_,0):W,j(K)?(X="",B!=null&&(X=B.replace(ae,"$&/")+"/"),z(K,$,X,"",function(me){return me})):K!=null&&(le(K)&&(K=se(K,X+(K.key==null||_&&_.key===K.key?"":(""+K.key).replace(ae,"$&/")+"/")+B)),$.push(K)),1;B=0;var V=W===""?".":W+":";if(j(_))for(var pe=0;pe<_.length;pe++)W=_[pe],oe=V+ce(W,pe),B+=z(W,$,X,oe,K);else if(pe=w(_),typeof pe=="function")for(_=pe.call(_),pe=0;!(W=_.next()).done;)W=W.value,oe=V+ce(W,pe++),B+=z(W,$,X,oe,K);else if(oe==="object"){if(typeof _.then=="function")return z(ue(_),$,X,W,K);throw $=String(_),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return B}function D(_,$,X){if(_==null)return _;var W=[],K=0;return z(_,W,"","",function(oe){return $.call(X,oe,K++)}),W}function L(_){if(_._status===-1){var $=_._result;$=$(),$.then(function(X){(_._status===0||_._status===-1)&&(_._status=1,_._result=X)},function(X){(_._status===0||_._status===-1)&&(_._status=2,_._result=X)}),_._status===-1&&(_._status=0,_._result=$)}if(_._status===1)return _._result.default;throw _._result}var Y=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},he={map:D,forEach:function(_,$,X){D(_,function(){$.apply(this,arguments)},X)},count:function(_){var $=0;return D(_,function(){$++}),$},toArray:function(_){return D(_,function($){return $})||[]},only:function(_){if(!le(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return ze.Activity=m,ze.Children=he,ze.Component=E,ze.Fragment=t,ze.Profiler=r,ze.PureComponent=N,ze.StrictMode=s,ze.Suspense=h,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ze.__COMPILER_RUNTIME={__proto__:null,c:function(_){return P.H.useMemoCache(_)}},ze.cache=function(_){return function(){return _.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(_,$,X){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var W=S({},_.props),K=_.key;if($!=null)for(oe in $.key!==void 0&&(K=""+$.key),$)!H.call($,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&$.ref===void 0||(W[oe]=$[oe]);var oe=arguments.length-2;if(oe===1)W.children=X;else if(1<oe){for(var B=Array(oe),V=0;V<oe;V++)B[V]=arguments[V+2];W.children=B}return ee(_.type,K,W)},ze.createContext=function(_){return _={$$typeof:c,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:l,_context:_},_},ze.createElement=function(_,$,X){var W,K={},oe=null;if($!=null)for(W in $.key!==void 0&&(oe=""+$.key),$)H.call($,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(K[W]=$[W]);var B=arguments.length-2;if(B===1)K.children=X;else if(1<B){for(var V=Array(B),pe=0;pe<B;pe++)V[pe]=arguments[pe+2];K.children=V}if(_&&_.defaultProps)for(W in B=_.defaultProps,B)K[W]===void 0&&(K[W]=B[W]);return ee(_,oe,K)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(_){return{$$typeof:d,render:_}},ze.isValidElement=le,ze.lazy=function(_){return{$$typeof:g,_payload:{_status:-1,_result:_},_init:L}},ze.memo=function(_,$){return{$$typeof:p,type:_,compare:$===void 0?null:$}},ze.startTransition=function(_){var $=P.T,X={};P.T=X;try{var W=_(),K=P.S;K!==null&&K(X,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(q,Y)}catch(oe){Y(oe)}finally{$!==null&&X.types!==null&&($.types=X.types),P.T=$}},ze.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ze.use=function(_){return P.H.use(_)},ze.useActionState=function(_,$,X){return P.H.useActionState(_,$,X)},ze.useCallback=function(_,$){return P.H.useCallback(_,$)},ze.useContext=function(_){return P.H.useContext(_)},ze.useDebugValue=function(){},ze.useDeferredValue=function(_,$){return P.H.useDeferredValue(_,$)},ze.useEffect=function(_,$){return P.H.useEffect(_,$)},ze.useEffectEvent=function(_){return P.H.useEffectEvent(_)},ze.useId=function(){return P.H.useId()},ze.useImperativeHandle=function(_,$,X){return P.H.useImperativeHandle(_,$,X)},ze.useInsertionEffect=function(_,$){return P.H.useInsertionEffect(_,$)},ze.useLayoutEffect=function(_,$){return P.H.useLayoutEffect(_,$)},ze.useMemo=function(_,$){return P.H.useMemo(_,$)},ze.useOptimistic=function(_,$){return P.H.useOptimistic(_,$)},ze.useReducer=function(_,$,X){return P.H.useReducer(_,$,X)},ze.useRef=function(_){return P.H.useRef(_)},ze.useState=function(_){return P.H.useState(_)},ze.useSyncExternalStore=function(_,$,X){return P.H.useSyncExternalStore(_,$,X)},ze.useTransition=function(){return P.H.useTransition()},ze.version="19.2.0",ze}var M0;function Th(){return M0||(M0=1,Of.exports=nE()),Of.exports}var x=Th();const Et=Ah(x),kh=JM({__proto__:null,default:Et},[x]);var Lf={exports:{}},vi={},Pf={exports:{}},If={};var E0;function sE(){return E0||(E0=1,(function(o){function e(z,D){var L=z.length;z.push(D);e:for(;0<L;){var Y=L-1>>>1,he=z[Y];if(0<r(he,D))z[Y]=D,z[L]=he,L=Y;else break e}}function t(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var D=z[0],L=z.pop();if(L!==D){z[0]=L;e:for(var Y=0,he=z.length,_=he>>>1;Y<_;){var $=2*(Y+1)-1,X=z[$],W=$+1,K=z[W];if(0>r(X,L))W<he&&0>r(K,X)?(z[Y]=K,z[W]=L,Y=W):(z[Y]=X,z[$]=L,Y=$);else if(W<he&&0>r(K,L))z[Y]=K,z[W]=L,Y=W;else break e}}return D}function r(z,D){var L=z.sortIndex-D.sortIndex;return L!==0?L:z.id-D.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;o.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();o.unstable_now=function(){return c.now()-d}}var h=[],p=[],g=1,m=null,v=3,w=!1,C=!1,S=!1,R=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function A(z){for(var D=t(p);D!==null;){if(D.callback===null)s(p);else if(D.startTime<=z)s(p),D.sortIndex=D.expirationTime,e(h,D);else break;D=t(p)}}function j(z){if(S=!1,A(z),!C)if(t(h)!==null)C=!0,q||(q=!0,te());else{var D=t(p);D!==null&&ue(j,D.startTime-z)}}var q=!1,P=-1,H=5,ee=-1;function se(){return R?!0:!(o.unstable_now()-ee<H)}function le(){if(R=!1,q){var z=o.unstable_now();ee=z;var D=!0;try{e:{C=!1,S&&(S=!1,T(P),P=-1),w=!0;var L=v;try{t:{for(A(z),m=t(h);m!==null&&!(m.expirationTime>z&&se());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,v=m.priorityLevel;var he=Y(m.expirationTime<=z);if(z=o.unstable_now(),typeof he=="function"){m.callback=he,A(z),D=!0;break t}m===t(h)&&s(h),A(z)}else s(h);m=t(h)}if(m!==null)D=!0;else{var _=t(p);_!==null&&ue(j,_.startTime-z),D=!1}}break e}finally{m=null,v=L,w=!1}D=void 0}}finally{D?te():q=!1}}}var te;if(typeof N=="function")te=function(){N(le)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ce=ae.port2;ae.port1.onmessage=le,te=function(){ce.postMessage(null)}}else te=function(){E(le,0)};function ue(z,D){P=E(function(){z(o.unstable_now())},D)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(z){z.callback=null},o.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},o.unstable_getCurrentPriorityLevel=function(){return v},o.unstable_next=function(z){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var L=v;v=D;try{return z()}finally{v=L}},o.unstable_requestPaint=function(){R=!0},o.unstable_runWithPriority=function(z,D){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var L=v;v=z;try{return D()}finally{v=L}},o.unstable_scheduleCallback=function(z,D,L){var Y=o.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?Y+L:Y):L=Y,z){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=L+he,z={id:g++,callback:D,priorityLevel:z,startTime:L,expirationTime:he,sortIndex:-1},L>Y?(z.sortIndex=L,e(p,z),t(h)===null&&z===t(p)&&(S?(T(P),P=-1):S=!0,ue(j,L-Y))):(z.sortIndex=he,e(h,z),C||w||(C=!0,q||(q=!0,te()))),z},o.unstable_shouldYield=se,o.unstable_wrapCallback=function(z){var D=v;return function(){var L=v;v=D;try{return z.apply(this,arguments)}finally{v=L}}}})(If)),If}var R0;function aE(){return R0||(R0=1,Pf.exports=sE()),Pf.exports}var qf={exports:{}},an={};var N0;function oE(){if(N0)return an;N0=1;var o=Th();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(h,p,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:h,containerInfo:p,implementation:g}}var c=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,an.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(h,p,null,g)},an.flushSync=function(h){var p=c.T,g=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=p,s.p=g,s.d.f()}},an.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(h,p))},an.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},an.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,m=d(g,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:w}):g==="script"&&s.d.X(h,{crossOrigin:m,integrity:v,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},an.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(h)},an.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,m=d(g,p.crossOrigin);s.d.L(h,g,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},an.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=d(p.as,p.crossOrigin);s.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(h)},an.requestFormReset=function(h){s.d.r(h)},an.unstable_batchedUpdates=function(h,p){return h(p)},an.useFormState=function(h,p,g){return c.H.useFormState(h,p,g)},an.useFormStatus=function(){return c.H.useHostTransitionStatus()},an.version="19.2.0",an}var A0;function Dv(){if(A0)return qf.exports;A0=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),qf.exports=oE(),qf.exports}var T0;function rE(){if(T0)return vi;T0=1;var o=aE(),e=Th(),t=Dv();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var a=n,i=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(i=a.return),n=a.return;while(n)}return a.tag===3?i:null}function c(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function d(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function h(n){if(l(n)!==n)throw Error(s(188))}function p(n){var a=n.alternate;if(!a){if(a=l(n),a===null)throw Error(s(188));return a!==n?null:n}for(var i=n,u=a;;){var y=i.return;if(y===null)break;var b=y.alternate;if(b===null){if(u=y.return,u!==null){i=u;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===i)return h(y),n;if(b===u)return h(y),a;b=b.sibling}throw Error(s(188))}if(i.return!==u.return)i=y,u=b;else{for(var M=!1,k=y.child;k;){if(k===i){M=!0,i=y,u=b;break}if(k===u){M=!0,u=y,i=b;break}k=k.sibling}if(!M){for(k=b.child;k;){if(k===i){M=!0,i=b,u=y;break}if(k===u){M=!0,u=b,i=y;break}k=k.sibling}if(!M)throw Error(s(189))}}if(i.alternate!==u)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?n:a}function g(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=g(n),a!==null)return a;n=n.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),N=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function te(n){return n===null||typeof n!="object"?null:(n=le&&n[le]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Symbol.for("react.client.reference");function ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ae?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case E:return"Profiler";case R:return"StrictMode";case j:return"Suspense";case q:return"SuspenseList";case ee:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case C:return"Portal";case N:return n.displayName||"Context";case T:return(n._context.displayName||"Context")+".Consumer";case A:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case P:return a=n.displayName||null,a!==null?a:ce(n.type)||"Memo";case H:a=n._payload,n=n._init;try{return ce(n(a))}catch{}}return null}var ue=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},Y=[],he=-1;function _(n){return{current:n}}function $(n){0>he||(n.current=Y[he],Y[he]=null,he--)}function X(n,a){he++,Y[he]=n.current,n.current=a}var W=_(null),K=_(null),oe=_(null),B=_(null);function V(n,a){switch(X(oe,a),X(K,n),X(W,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?Qy(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=Qy(a),n=Gy(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(W),X(W,n)}function pe(){$(W),$(K),$(oe)}function me(n){n.memoizedState!==null&&X(B,n);var a=W.current,i=Gy(a,n.type);a!==i&&(X(K,n),X(W,i))}function ye(n){K.current===n&&($(W),$(K)),B.current===n&&($(B),hi._currentValue=L)}var ve,Pe;function Ue(n){if(ve===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);ve=a&&a[1]||"",Pe=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+n+Pe}var at=!1;function We(n,a){if(!n||at)return"";at=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var F=Z}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(Z){F=Z}n.call(ie.prototype)}}else{try{throw Error()}catch(Z){F=Z}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&F&&typeof Z.stack=="string")return[Z.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=u.DetermineComponentFrameRoot(),M=b[0],k=b[1];if(M&&k){var O=M.split(`
`),G=k.split(`
`);for(y=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;y<G.length&&!G[y].includes("DetermineComponentFrameRoot");)y++;if(u===O.length||y===G.length)for(u=O.length-1,y=G.length-1;1<=u&&0<=y&&O[u]!==G[y];)y--;for(;1<=u&&0<=y;u--,y--)if(O[u]!==G[y]){if(u!==1||y!==1)do if(u--,y--,0>y||O[u]!==G[y]){var ne=`
`+O[u].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=u&&0<=y);break}}}finally{at=!1,Error.prepareStackTrace=i}return(i=n?n.displayName||n.name:"")?Ue(i):""}function jt(n,a){switch(n.tag){case 26:case 27:case 5:return Ue(n.type);case 16:return Ue("Lazy");case 13:return n.child!==a&&a!==null?Ue("Suspense Fallback"):Ue("Suspense");case 19:return Ue("SuspenseList");case 0:case 15:return We(n.type,!1);case 11:return We(n.type.render,!1);case 1:return We(n.type,!0);case 31:return Ue("Activity");default:return""}}function de(n){try{var a="",i=null;do a+=jt(n,i),i=n,n=n.return;while(n);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var He=Object.prototype.hasOwnProperty,Be=o.unstable_scheduleCallback,yt=o.unstable_cancelCallback,pt=o.unstable_shouldYield,qt=o.unstable_requestPaint,Ze=o.unstable_now,Dt=o.unstable_getCurrentPriorityLevel,vt=o.unstable_ImmediatePriority,gt=o.unstable_UserBlockingPriority,Yt=o.unstable_NormalPriority,Gt=o.unstable_LowPriority,Rs=o.unstable_IdlePriority,Yn=o.log,kn=o.unstable_setDisableYieldValue,rs=null,Xt=null;function Kt(n){if(typeof Yn=="function"&&kn(n),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(rs,n)}catch{}}var _t=Math.clz32?Math.clz32:Gi,Ua=Math.log,jn=Math.LN2;function Gi(n){return n>>>=0,n===0?32:31-(Ua(n)/jn|0)|0}var Ns=256,Ba=262144,oa=4194304;function Xn(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function As(n,a,i){var u=n.pendingLanes;if(u===0)return 0;var y=0,b=n.suspendedLanes,M=n.pingedLanes;n=n.warmLanes;var k=u&134217727;return k!==0?(u=k&~b,u!==0?y=Xn(u):(M&=k,M!==0?y=Xn(M):i||(i=k&~n,i!==0&&(y=Xn(i))))):(k=u&~b,k!==0?y=Xn(k):M!==0?y=Xn(M):i||(i=u&~n,i!==0&&(y=Xn(i)))),y===0?0:a!==0&&a!==y&&(a&b)===0&&(b=y&-y,i=a&-a,b>=i||b===32&&(i&4194048)!==0)?a:y}function Ts(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Mu(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J(){var n=oa;return oa<<=1,(oa&62914560)===0&&(oa=4194304),n}function fe(n){for(var a=[],i=0;31>i;i++)a.push(n);return a}function be(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function _e(n,a,i,u,y,b){var M=n.pendingLanes;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=i,n.entangledLanes&=i,n.errorRecoveryDisabledLanes&=i,n.shellSuspendCounter=0;var k=n.entanglements,O=n.expirationTimes,G=n.hiddenUpdates;for(i=M&~i;0<i;){var ne=31-_t(i),ie=1<<ne;k[ne]=0,O[ne]=-1;var F=G[ne];if(F!==null)for(G[ne]=null,ne=0;ne<F.length;ne++){var Z=F[ne];Z!==null&&(Z.lane&=-536870913)}i&=~ie}u!==0&&Oe(n,u,0),b!==0&&y===0&&n.tag!==0&&(n.suspendedLanes|=b&~(M&~a))}function Oe(n,a,i){n.pendingLanes|=a,n.suspendedLanes&=~a;var u=31-_t(a);n.entangledLanes|=a,n.entanglements[u]=n.entanglements[u]|1073741824|i&261930}function lt(n,a){var i=n.entangledLanes|=a;for(n=n.entanglements;i;){var u=31-_t(i),y=1<<u;y&a|n[u]&a&&(n[u]|=a),i&=~y}}function zt(n,a){var i=a&-a;return i=(i&42)!==0?1:Wt(i),(i&(n.suspendedLanes|a))!==0?0:i}function Wt(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Rt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ln(){var n=D.p;return n!==0?n:(n=window.event,n===void 0?32:p0(n.type))}function wt(n,a){var i=D.p;try{return D.p=n,a()}finally{D.p=i}}var ot=Math.random().toString(36).slice(2),mt="__reactFiber$"+ot,Ht="__reactProps$"+ot,is="__reactContainer$"+ot,$e="__reactEvents$"+ot,Dn="__reactListeners$"+ot,$a="__reactHandles$"+ot,xo="__reactResources$"+ot,Ar="__reactMarker$"+ot;function Eu(n){delete n[mt],delete n[Ht],delete n[$e],delete n[Dn],delete n[$a]}function wo(n){var a=n[mt];if(a)return a;for(var i=n.parentNode;i;){if(a=i[is]||i[mt]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(n=Zy(n);n!==null;){if(i=n[mt])return i;n=Zy(n)}return a}n=i,i=n.parentNode}return null}function Co(n){if(n=n[mt]||n[is]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function Tr(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function So(n){var a=n[xo];return a||(a=n[xo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Vt(n){n[Ar]=!0}var Dp=new Set,_p={};function Qa(n,a){Mo(n,a),Mo(n+"Capture",a)}function Mo(n,a){for(_p[n]=a,n=0;n<a.length;n++)Dp.add(a[n])}var QC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zp={},Op={};function GC(n){return He.call(Op,n)?!0:He.call(zp,n)?!1:QC.test(n)?Op[n]=!0:(zp[n]=!0,!1)}function Ki(n,a,i){if(GC(a))if(i===null)n.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+i)}}function Vi(n,a,i){if(i===null)n.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+i)}}function ks(n,a,i,u){if(u===null)n.removeAttribute(i);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttributeNS(a,i,""+u)}}function _n(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Lp(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function KC(n,a,i){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,b=u.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return y.call(this)},set:function(M){i=""+M,b.call(this,M)}}),Object.defineProperty(n,a,{enumerable:u.enumerable}),{getValue:function(){return i},setValue:function(M){i=""+M},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Ru(n){if(!n._valueTracker){var a=Lp(n)?"checked":"value";n._valueTracker=KC(n,a,""+n[a])}}function Pp(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var i=a.getValue(),u="";return n&&(u=Lp(n)?n.checked?"true":"false":n.value),n=u,n!==i?(a.setValue(n),!0):!1}function Fi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var VC=/[\n"\\]/g;function zn(n){return n.replace(VC,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Nu(n,a,i,u,y,b,M,k){n.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.type=M:n.removeAttribute("type"),a!=null?M==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+_n(a)):n.value!==""+_n(a)&&(n.value=""+_n(a)):M!=="submit"&&M!=="reset"||n.removeAttribute("value"),a!=null?Au(n,M,_n(a)):i!=null?Au(n,M,_n(i)):u!=null&&n.removeAttribute("value"),y==null&&b!=null&&(n.defaultChecked=!!b),y!=null&&(n.checked=y&&typeof y!="function"&&typeof y!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.name=""+_n(k):n.removeAttribute("name")}function Ip(n,a,i,u,y,b,M,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.type=b),a!=null||i!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){Ru(n);return}i=i!=null?""+_n(i):"",a=a!=null?""+_n(a):i,k||a===n.value||(n.value=a),n.defaultValue=a}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=k?n.checked:!!u,n.defaultChecked=!!u,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(n.name=M),Ru(n)}function Au(n,a,i){a==="number"&&Fi(n.ownerDocument)===n||n.defaultValue===""+i||(n.defaultValue=""+i)}function Eo(n,a,i,u){if(n=n.options,a){a={};for(var y=0;y<i.length;y++)a["$"+i[y]]=!0;for(i=0;i<n.length;i++)y=a.hasOwnProperty("$"+n[i].value),n[i].selected!==y&&(n[i].selected=y),y&&u&&(n[i].defaultSelected=!0)}else{for(i=""+_n(i),a=null,y=0;y<n.length;y++){if(n[y].value===i){n[y].selected=!0,u&&(n[y].defaultSelected=!0);return}a!==null||n[y].disabled||(a=n[y])}a!==null&&(a.selected=!0)}}function qp(n,a,i){if(a!=null&&(a=""+_n(a),a!==n.value&&(n.value=a),i==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=i!=null?""+_n(i):""}function Hp(n,a,i,u){if(a==null){if(u!=null){if(i!=null)throw Error(s(92));if(ue(u)){if(1<u.length)throw Error(s(93));u=u[0]}i=u}i==null&&(i=""),a=i}i=_n(a),n.defaultValue=i,u=n.textContent,u===i&&u!==""&&u!==null&&(n.value=u),Ru(n)}function Ro(n,a){if(a){var i=n.firstChild;if(i&&i===n.lastChild&&i.nodeType===3){i.nodeValue=a;return}}n.textContent=a}var FC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Up(n,a,i){var u=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?u?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":u?n.setProperty(a,i):typeof i!="number"||i===0||FC.has(a)?a==="float"?n.cssFloat=i:n[a]=(""+i).trim():n[a]=i+"px"}function Bp(n,a,i){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,i!=null){for(var u in i)!i.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var y in a)u=a[y],a.hasOwnProperty(y)&&i[y]!==u&&Up(n,y,u)}else for(var b in a)a.hasOwnProperty(b)&&Up(n,b,a[b])}function Tu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),XC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yi(n){return XC.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function js(){}var ku=null;function ju(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var No=null,Ao=null;function $p(n){var a=Co(n);if(a&&(n=a.stateNode)){var i=n[Ht]||null;e:switch(n=a.stateNode,a.type){case"input":if(Nu(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=n;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+zn(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var u=i[a];if(u!==n&&u.form===n.form){var y=u[Ht]||null;if(!y)throw Error(s(90));Nu(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<i.length;a++)u=i[a],u.form===n.form&&Pp(u)}break e;case"textarea":qp(n,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&Eo(n,!!i.multiple,a,!1)}}}var Du=!1;function Qp(n,a,i){if(Du)return n(a,i);Du=!0;try{var u=n(a);return u}finally{if(Du=!1,(No!==null||Ao!==null)&&(Ll(),No&&(a=No,n=Ao,Ao=No=null,$p(a),n)))for(a=0;a<n.length;a++)$p(n[a])}}function kr(n,a){var i=n.stateNode;if(i===null)return null;var u=i[Ht]||null;if(u===null)return null;i=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(i&&typeof i!="function")throw Error(s(231,a,typeof i));return i}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_u=!1;if(Ds)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){_u=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{_u=!1}var ra=null,zu=null,Xi=null;function Gp(){if(Xi)return Xi;var n,a=zu,i=a.length,u,y="value"in ra?ra.value:ra.textContent,b=y.length;for(n=0;n<i&&a[n]===y[n];n++);var M=i-n;for(u=1;u<=M&&a[i-u]===y[b-u];u++);return Xi=y.slice(n,1<u?1-u:void 0)}function Wi(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Zi(){return!0}function Kp(){return!1}function fn(n){function a(i,u,y,b,M){this._reactName=i,this._targetInst=y,this.type=u,this.nativeEvent=b,this.target=M,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(i=n[k],this[k]=i?i(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Zi:Kp,this.isPropagationStopped=Kp,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),a}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ji=fn(Ga),Dr=m({},Ga,{view:0,detail:0}),WC=fn(Dr),Ou,Lu,_r,el=m({},Dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_r&&(_r&&n.type==="mousemove"?(Ou=n.screenX-_r.screenX,Lu=n.screenY-_r.screenY):Lu=Ou=0,_r=n),Ou)},movementY:function(n){return"movementY"in n?n.movementY:Lu}}),Vp=fn(el),ZC=m({},el,{dataTransfer:0}),JC=fn(ZC),eS=m({},Dr,{relatedTarget:0}),Pu=fn(eS),tS=m({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),nS=fn(tS),sS=m({},Ga,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),aS=fn(sS),oS=m({},Ga,{data:0}),Fp=fn(oS),rS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cS(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=lS[n])?!!a[n]:!1}function Iu(){return cS}var uS=m({},Dr,{key:function(n){if(n.key){var a=rS[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Wi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?iS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iu,charCode:function(n){return n.type==="keypress"?Wi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Wi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),dS=fn(uS),fS=m({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yp=fn(fS),hS=m({},Dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iu}),pS=fn(hS),gS=m({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),mS=fn(gS),yS=m({},el,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),vS=fn(yS),bS=m({},Ga,{newState:0,oldState:0}),xS=fn(bS),wS=[9,13,27,32],qu=Ds&&"CompositionEvent"in window,zr=null;Ds&&"documentMode"in document&&(zr=document.documentMode);var CS=Ds&&"TextEvent"in window&&!zr,Xp=Ds&&(!qu||zr&&8<zr&&11>=zr),Wp=" ",Zp=!1;function Jp(n,a){switch(n){case"keyup":return wS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eg(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var To=!1;function SS(n,a){switch(n){case"compositionend":return eg(a);case"keypress":return a.which!==32?null:(Zp=!0,Wp);case"textInput":return n=a.data,n===Wp&&Zp?null:n;default:return null}}function MS(n,a){if(To)return n==="compositionend"||!qu&&Jp(n,a)?(n=Gp(),Xi=zu=ra=null,To=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Xp&&a.locale!=="ko"?null:a.data;default:return null}}var ES={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tg(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!ES[n.type]:a==="textarea"}function ng(n,a,i,u){No?Ao?Ao.push(u):Ao=[u]:No=u,a=$l(a,"onChange"),0<a.length&&(i=new Ji("onChange","change",null,i,u),n.push({event:i,listeners:a}))}var Or=null,Lr=null;function RS(n){Iy(n,0)}function tl(n){var a=Tr(n);if(Pp(a))return n}function sg(n,a){if(n==="change")return a}var ag=!1;if(Ds){var Hu;if(Ds){var Uu="oninput"in document;if(!Uu){var og=document.createElement("div");og.setAttribute("oninput","return;"),Uu=typeof og.oninput=="function"}Hu=Uu}else Hu=!1;ag=Hu&&(!document.documentMode||9<document.documentMode)}function rg(){Or&&(Or.detachEvent("onpropertychange",ig),Lr=Or=null)}function ig(n){if(n.propertyName==="value"&&tl(Lr)){var a=[];ng(a,Lr,n,ju(n)),Qp(RS,a)}}function NS(n,a,i){n==="focusin"?(rg(),Or=a,Lr=i,Or.attachEvent("onpropertychange",ig)):n==="focusout"&&rg()}function AS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return tl(Lr)}function TS(n,a){if(n==="click")return tl(a)}function kS(n,a){if(n==="input"||n==="change")return tl(a)}function jS(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var xn=typeof Object.is=="function"?Object.is:jS;function Pr(n,a){if(xn(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var i=Object.keys(n),u=Object.keys(a);if(i.length!==u.length)return!1;for(u=0;u<i.length;u++){var y=i[u];if(!He.call(a,y)||!xn(n[y],a[y]))return!1}return!0}function lg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cg(n,a){var i=lg(n);n=0;for(var u;i;){if(i.nodeType===3){if(u=n+i.textContent.length,n<=a&&u>=a)return{node:i,offset:a-n};n=u}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=lg(i)}}function ug(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?ug(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function dg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=Fi(n.document);a instanceof n.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)n=a.contentWindow;else break;a=Fi(n.document)}return a}function Bu(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var DS=Ds&&"documentMode"in document&&11>=document.documentMode,ko=null,$u=null,Ir=null,Qu=!1;function fg(n,a,i){var u=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Qu||ko==null||ko!==Fi(u)||(u=ko,"selectionStart"in u&&Bu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ir&&Pr(Ir,u)||(Ir=u,u=$l($u,"onSelect"),0<u.length&&(a=new Ji("onSelect","select",null,a,i),n.push({event:a,listeners:u}),a.target=ko)))}function Ka(n,a){var i={};return i[n.toLowerCase()]=a.toLowerCase(),i["Webkit"+n]="webkit"+a,i["Moz"+n]="moz"+a,i}var jo={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionrun:Ka("Transition","TransitionRun"),transitionstart:Ka("Transition","TransitionStart"),transitioncancel:Ka("Transition","TransitionCancel"),transitionend:Ka("Transition","TransitionEnd")},Gu={},hg={};Ds&&(hg=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function Va(n){if(Gu[n])return Gu[n];if(!jo[n])return n;var a=jo[n],i;for(i in a)if(a.hasOwnProperty(i)&&i in hg)return Gu[n]=a[i];return n}var pg=Va("animationend"),gg=Va("animationiteration"),mg=Va("animationstart"),_S=Va("transitionrun"),zS=Va("transitionstart"),OS=Va("transitioncancel"),yg=Va("transitionend"),vg=new Map,Ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ku.push("scrollEnd");function Wn(n,a){vg.set(n,a),Qa(a,[n])}var nl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},On=[],Do=0,Vu=0;function sl(){for(var n=Do,a=Vu=Do=0;a<n;){var i=On[a];On[a++]=null;var u=On[a];On[a++]=null;var y=On[a];On[a++]=null;var b=On[a];if(On[a++]=null,u!==null&&y!==null){var M=u.pending;M===null?y.next=y:(y.next=M.next,M.next=y),u.pending=y}b!==0&&bg(i,y,b)}}function al(n,a,i,u){On[Do++]=n,On[Do++]=a,On[Do++]=i,On[Do++]=u,Vu|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Fu(n,a,i,u){return al(n,a,i,u),ol(n)}function Fa(n,a){return al(n,null,null,a),ol(n)}function bg(n,a,i){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i);for(var y=!1,b=n.return;b!==null;)b.childLanes|=i,u=b.alternate,u!==null&&(u.childLanes|=i),b.tag===22&&(n=b.stateNode,n===null||n._visibility&1||(y=!0)),n=b,b=b.return;return n.tag===3?(b=n.stateNode,y&&a!==null&&(y=31-_t(i),n=b.hiddenUpdates,u=n[y],u===null?n[y]=[a]:u.push(a),a.lane=i|536870912),b):null}function ol(n){if(50<ri)throw ri=0,sf=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var _o={};function LS(n,a,i,u){this.tag=n,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(n,a,i,u){return new LS(n,a,i,u)}function Yu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function _s(n,a){var i=n.alternate;return i===null?(i=wn(n.tag,a,n.key,n.mode),i.elementType=n.elementType,i.type=n.type,i.stateNode=n.stateNode,i.alternate=n,n.alternate=i):(i.pendingProps=a,i.type=n.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=n.flags&65011712,i.childLanes=n.childLanes,i.lanes=n.lanes,i.child=n.child,i.memoizedProps=n.memoizedProps,i.memoizedState=n.memoizedState,i.updateQueue=n.updateQueue,a=n.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=n.sibling,i.index=n.index,i.ref=n.ref,i.refCleanup=n.refCleanup,i}function xg(n,a){n.flags&=65011714;var i=n.alternate;return i===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=i.childLanes,n.lanes=i.lanes,n.child=i.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=i.memoizedProps,n.memoizedState=i.memoizedState,n.updateQueue=i.updateQueue,n.type=i.type,a=i.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function rl(n,a,i,u,y,b){var M=0;if(u=n,typeof n=="function")Yu(n)&&(M=1);else if(typeof n=="string")M=UM(n,i,W.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case ee:return n=wn(31,i,a,y),n.elementType=ee,n.lanes=b,n;case S:return Ya(i.children,y,b,a);case R:M=8,y|=24;break;case E:return n=wn(12,i,a,y|2),n.elementType=E,n.lanes=b,n;case j:return n=wn(13,i,a,y),n.elementType=j,n.lanes=b,n;case q:return n=wn(19,i,a,y),n.elementType=q,n.lanes=b,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:M=10;break e;case T:M=9;break e;case A:M=11;break e;case P:M=14;break e;case H:M=16,u=null;break e}M=29,i=Error(s(130,n===null?"null":typeof n,"")),u=null}return a=wn(M,i,a,y),a.elementType=n,a.type=u,a.lanes=b,a}function Ya(n,a,i,u){return n=wn(7,n,u,a),n.lanes=i,n}function Xu(n,a,i){return n=wn(6,n,null,a),n.lanes=i,n}function wg(n){var a=wn(18,null,null,0);return a.stateNode=n,a}function Wu(n,a,i){return a=wn(4,n.children!==null?n.children:[],n.key,a),a.lanes=i,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Cg=new WeakMap;function Ln(n,a){if(typeof n=="object"&&n!==null){var i=Cg.get(n);return i!==void 0?i:(a={value:n,source:a,stack:de(a)},Cg.set(n,a),a)}return{value:n,source:a,stack:de(a)}}var zo=[],Oo=0,il=null,qr=0,Pn=[],In=0,ia=null,ls=1,cs="";function zs(n,a){zo[Oo++]=qr,zo[Oo++]=il,il=n,qr=a}function Sg(n,a,i){Pn[In++]=ls,Pn[In++]=cs,Pn[In++]=ia,ia=n;var u=ls;n=cs;var y=32-_t(u)-1;u&=~(1<<y),i+=1;var b=32-_t(a)+y;if(30<b){var M=y-y%5;b=(u&(1<<M)-1).toString(32),u>>=M,y-=M,ls=1<<32-_t(a)+y|i<<y|u,cs=b+n}else ls=1<<b|i<<y|u,cs=n}function Zu(n){n.return!==null&&(zs(n,1),Sg(n,1,0))}function Ju(n){for(;n===il;)il=zo[--Oo],zo[Oo]=null,qr=zo[--Oo],zo[Oo]=null;for(;n===ia;)ia=Pn[--In],Pn[In]=null,cs=Pn[--In],Pn[In]=null,ls=Pn[--In],Pn[In]=null}function Mg(n,a){Pn[In++]=ls,Pn[In++]=cs,Pn[In++]=ia,ls=a.id,cs=a.overflow,ia=n}var Zt=null,bt=null,Xe=!1,la=null,qn=!1,ed=Error(s(519));function ca(n){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hr(Ln(a,n)),ed}function Eg(n){var a=n.stateNode,i=n.type,u=n.memoizedProps;switch(a[mt]=n,a[Ht]=u,i){case"dialog":Ge("cancel",a),Ge("close",a);break;case"iframe":case"object":case"embed":Ge("load",a);break;case"video":case"audio":for(i=0;i<li.length;i++)Ge(li[i],a);break;case"source":Ge("error",a);break;case"img":case"image":case"link":Ge("error",a),Ge("load",a);break;case"details":Ge("toggle",a);break;case"input":Ge("invalid",a),Ip(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ge("invalid",a);break;case"textarea":Ge("invalid",a),Hp(a,u.value,u.defaultValue,u.children)}i=u.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||u.suppressHydrationWarning===!0||By(a.textContent,i)?(u.popover!=null&&(Ge("beforetoggle",a),Ge("toggle",a)),u.onScroll!=null&&Ge("scroll",a),u.onScrollEnd!=null&&Ge("scrollend",a),u.onClick!=null&&(a.onclick=js),a=!0):a=!1,a||ca(n,!0)}function Rg(n){for(Zt=n.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Zt=Zt.return}}function Lo(n){if(n!==Zt)return!1;if(!Xe)return Rg(n),Xe=!0,!1;var a=n.tag,i;if((i=a!==3&&a!==27)&&((i=a===5)&&(i=n.type,i=!(i!=="form"&&i!=="button")||bf(n.type,n.memoizedProps)),i=!i),i&&bt&&ca(n),Rg(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));bt=Wy(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));bt=Wy(n)}else a===27?(a=bt,Sa(n.type)?(n=Mf,Mf=null,bt=n):bt=a):bt=Zt?Un(n.stateNode.nextSibling):null;return!0}function Xa(){bt=Zt=null,Xe=!1}function td(){var n=la;return n!==null&&(mn===null?mn=n:mn.push.apply(mn,n),la=null),n}function Hr(n){la===null?la=[n]:la.push(n)}var nd=_(null),Wa=null,Os=null;function ua(n,a,i){X(nd,a._currentValue),a._currentValue=i}function Ls(n){n._currentValue=nd.current,$(nd)}function sd(n,a,i){for(;n!==null;){var u=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),n===i)break;n=n.return}}function ad(n,a,i,u){var y=n.child;for(y!==null&&(y.return=n);y!==null;){var b=y.dependencies;if(b!==null){var M=y.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=y;for(var O=0;O<a.length;O++)if(k.context===a[O]){b.lanes|=i,k=b.alternate,k!==null&&(k.lanes|=i),sd(b.return,i,n),u||(M=null);break e}b=k.next}}else if(y.tag===18){if(M=y.return,M===null)throw Error(s(341));M.lanes|=i,b=M.alternate,b!==null&&(b.lanes|=i),sd(M,i,n),M=null}else M=y.child;if(M!==null)M.return=y;else for(M=y;M!==null;){if(M===n){M=null;break}if(y=M.sibling,y!==null){y.return=M.return,M=y;break}M=M.return}y=M}}function Po(n,a,i,u){n=null;for(var y=a,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var M=y.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var k=y.type;xn(y.pendingProps.value,M.value)||(n!==null?n.push(k):n=[k])}}else if(y===B.current){if(M=y.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(n!==null?n.push(hi):n=[hi])}y=y.return}n!==null&&ad(a,n,i,u),a.flags|=262144}function ll(n){for(n=n.firstContext;n!==null;){if(!xn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Za(n){Wa=n,Os=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Jt(n){return Ng(Wa,n)}function cl(n,a){return Wa===null&&Za(n),Ng(n,a)}function Ng(n,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},Os===null){if(n===null)throw Error(s(308));Os=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Os=Os.next=a;return i}var PS=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(i,u){n.push(u)}};this.abort=function(){a.aborted=!0,n.forEach(function(i){return i()})}},IS=o.unstable_scheduleCallback,qS=o.unstable_NormalPriority,Ot={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function od(){return{controller:new PS,data:new Map,refCount:0}}function Ur(n){n.refCount--,n.refCount===0&&IS(qS,function(){n.controller.abort()})}var Br=null,rd=0,Io=0,qo=null;function HS(n,a){if(Br===null){var i=Br=[];rd=0,Io=uf(),qo={status:"pending",value:void 0,then:function(u){i.push(u)}}}return rd++,a.then(Ag,Ag),a}function Ag(){if(--rd===0&&Br!==null){qo!==null&&(qo.status="fulfilled");var n=Br;Br=null,Io=0,qo=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function US(n,a){var i=[],u={status:"pending",value:null,reason:null,then:function(y){i.push(y)}};return n.then(function(){u.status="fulfilled",u.value=a;for(var y=0;y<i.length;y++)(0,i[y])(a)},function(y){for(u.status="rejected",u.reason=y,y=0;y<i.length;y++)(0,i[y])(void 0)}),u}var Tg=z.S;z.S=function(n,a){fy=Ze(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&HS(n,a),Tg!==null&&Tg(n,a)};var Ja=_(null);function id(){var n=Ja.current;return n!==null?n:ft.pooledCache}function ul(n,a){a===null?X(Ja,Ja.current):X(Ja,a.pool)}function kg(){var n=id();return n===null?null:{parent:Ot._currentValue,pool:n}}var Ho=Error(s(460)),ld=Error(s(474)),dl=Error(s(542)),fl={then:function(){}};function jg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Dg(n,a,i){switch(i=n[i],i===void 0?n.push(a):i!==a&&(a.then(js,js),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,zg(n),n;default:if(typeof a.status=="string")a.then(js,js);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(u){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=u}},function(u){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,zg(n),n}throw to=a,Ho}}function eo(n){try{var a=n._init;return a(n._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(to=i,Ho):i}}var to=null;function _g(){if(to===null)throw Error(s(459));var n=to;return to=null,n}function zg(n){if(n===Ho||n===dl)throw Error(s(483))}var Uo=null,$r=0;function hl(n){var a=$r;return $r+=1,Uo===null&&(Uo=[]),Dg(Uo,n,a)}function Qr(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function pl(n,a){throw a.$$typeof===v?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function Og(n){function a(U,I){if(n){var Q=U.deletions;Q===null?(U.deletions=[I],U.flags|=16):Q.push(I)}}function i(U,I){if(!n)return null;for(;I!==null;)a(U,I),I=I.sibling;return null}function u(U){for(var I=new Map;U!==null;)U.key!==null?I.set(U.key,U):I.set(U.index,U),U=U.sibling;return I}function y(U,I){return U=_s(U,I),U.index=0,U.sibling=null,U}function b(U,I,Q){return U.index=Q,n?(Q=U.alternate,Q!==null?(Q=Q.index,Q<I?(U.flags|=67108866,I):Q):(U.flags|=67108866,I)):(U.flags|=1048576,I)}function M(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function k(U,I,Q,re){return I===null||I.tag!==6?(I=Xu(Q,U.mode,re),I.return=U,I):(I=y(I,Q),I.return=U,I)}function O(U,I,Q,re){var Ne=Q.type;return Ne===S?ne(U,I,Q.props.children,re,Q.key):I!==null&&(I.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===H&&eo(Ne)===I.type)?(I=y(I,Q.props),Qr(I,Q),I.return=U,I):(I=rl(Q.type,Q.key,Q.props,null,U.mode,re),Qr(I,Q),I.return=U,I)}function G(U,I,Q,re){return I===null||I.tag!==4||I.stateNode.containerInfo!==Q.containerInfo||I.stateNode.implementation!==Q.implementation?(I=Wu(Q,U.mode,re),I.return=U,I):(I=y(I,Q.children||[]),I.return=U,I)}function ne(U,I,Q,re,Ne){return I===null||I.tag!==7?(I=Ya(Q,U.mode,re,Ne),I.return=U,I):(I=y(I,Q),I.return=U,I)}function ie(U,I,Q){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Xu(""+I,U.mode,Q),I.return=U,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case w:return Q=rl(I.type,I.key,I.props,null,U.mode,Q),Qr(Q,I),Q.return=U,Q;case C:return I=Wu(I,U.mode,Q),I.return=U,I;case H:return I=eo(I),ie(U,I,Q)}if(ue(I)||te(I))return I=Ya(I,U.mode,Q,null),I.return=U,I;if(typeof I.then=="function")return ie(U,hl(I),Q);if(I.$$typeof===N)return ie(U,cl(U,I),Q);pl(U,I)}return null}function F(U,I,Q,re){var Ne=I!==null?I.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ne!==null?null:k(U,I,""+Q,re);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:return Q.key===Ne?O(U,I,Q,re):null;case C:return Q.key===Ne?G(U,I,Q,re):null;case H:return Q=eo(Q),F(U,I,Q,re)}if(ue(Q)||te(Q))return Ne!==null?null:ne(U,I,Q,re,null);if(typeof Q.then=="function")return F(U,I,hl(Q),re);if(Q.$$typeof===N)return F(U,I,cl(U,Q),re);pl(U,Q)}return null}function Z(U,I,Q,re,Ne){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return U=U.get(Q)||null,k(I,U,""+re,Ne);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return U=U.get(re.key===null?Q:re.key)||null,O(I,U,re,Ne);case C:return U=U.get(re.key===null?Q:re.key)||null,G(I,U,re,Ne);case H:return re=eo(re),Z(U,I,Q,re,Ne)}if(ue(re)||te(re))return U=U.get(Q)||null,ne(I,U,re,Ne,null);if(typeof re.then=="function")return Z(U,I,Q,hl(re),Ne);if(re.$$typeof===N)return Z(U,I,Q,cl(I,re),Ne);pl(I,re)}return null}function xe(U,I,Q,re){for(var Ne=null,Je=null,Me=I,Ie=I=0,Ve=null;Me!==null&&Ie<Q.length;Ie++){Me.index>Ie?(Ve=Me,Me=null):Ve=Me.sibling;var et=F(U,Me,Q[Ie],re);if(et===null){Me===null&&(Me=Ve);break}n&&Me&&et.alternate===null&&a(U,Me),I=b(et,I,Ie),Je===null?Ne=et:Je.sibling=et,Je=et,Me=Ve}if(Ie===Q.length)return i(U,Me),Xe&&zs(U,Ie),Ne;if(Me===null){for(;Ie<Q.length;Ie++)Me=ie(U,Q[Ie],re),Me!==null&&(I=b(Me,I,Ie),Je===null?Ne=Me:Je.sibling=Me,Je=Me);return Xe&&zs(U,Ie),Ne}for(Me=u(Me);Ie<Q.length;Ie++)Ve=Z(Me,U,Ie,Q[Ie],re),Ve!==null&&(n&&Ve.alternate!==null&&Me.delete(Ve.key===null?Ie:Ve.key),I=b(Ve,I,Ie),Je===null?Ne=Ve:Je.sibling=Ve,Je=Ve);return n&&Me.forEach(function(Aa){return a(U,Aa)}),Xe&&zs(U,Ie),Ne}function ke(U,I,Q,re){if(Q==null)throw Error(s(151));for(var Ne=null,Je=null,Me=I,Ie=I=0,Ve=null,et=Q.next();Me!==null&&!et.done;Ie++,et=Q.next()){Me.index>Ie?(Ve=Me,Me=null):Ve=Me.sibling;var Aa=F(U,Me,et.value,re);if(Aa===null){Me===null&&(Me=Ve);break}n&&Me&&Aa.alternate===null&&a(U,Me),I=b(Aa,I,Ie),Je===null?Ne=Aa:Je.sibling=Aa,Je=Aa,Me=Ve}if(et.done)return i(U,Me),Xe&&zs(U,Ie),Ne;if(Me===null){for(;!et.done;Ie++,et=Q.next())et=ie(U,et.value,re),et!==null&&(I=b(et,I,Ie),Je===null?Ne=et:Je.sibling=et,Je=et);return Xe&&zs(U,Ie),Ne}for(Me=u(Me);!et.done;Ie++,et=Q.next())et=Z(Me,U,Ie,et.value,re),et!==null&&(n&&et.alternate!==null&&Me.delete(et.key===null?Ie:et.key),I=b(et,I,Ie),Je===null?Ne=et:Je.sibling=et,Je=et);return n&&Me.forEach(function(ZM){return a(U,ZM)}),Xe&&zs(U,Ie),Ne}function dt(U,I,Q,re){if(typeof Q=="object"&&Q!==null&&Q.type===S&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:e:{for(var Ne=Q.key;I!==null;){if(I.key===Ne){if(Ne=Q.type,Ne===S){if(I.tag===7){i(U,I.sibling),re=y(I,Q.props.children),re.return=U,U=re;break e}}else if(I.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===H&&eo(Ne)===I.type){i(U,I.sibling),re=y(I,Q.props),Qr(re,Q),re.return=U,U=re;break e}i(U,I);break}else a(U,I);I=I.sibling}Q.type===S?(re=Ya(Q.props.children,U.mode,re,Q.key),re.return=U,U=re):(re=rl(Q.type,Q.key,Q.props,null,U.mode,re),Qr(re,Q),re.return=U,U=re)}return M(U);case C:e:{for(Ne=Q.key;I!==null;){if(I.key===Ne)if(I.tag===4&&I.stateNode.containerInfo===Q.containerInfo&&I.stateNode.implementation===Q.implementation){i(U,I.sibling),re=y(I,Q.children||[]),re.return=U,U=re;break e}else{i(U,I);break}else a(U,I);I=I.sibling}re=Wu(Q,U.mode,re),re.return=U,U=re}return M(U);case H:return Q=eo(Q),dt(U,I,Q,re)}if(ue(Q))return xe(U,I,Q,re);if(te(Q)){if(Ne=te(Q),typeof Ne!="function")throw Error(s(150));return Q=Ne.call(Q),ke(U,I,Q,re)}if(typeof Q.then=="function")return dt(U,I,hl(Q),re);if(Q.$$typeof===N)return dt(U,I,cl(U,Q),re);pl(U,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,I!==null&&I.tag===6?(i(U,I.sibling),re=y(I,Q),re.return=U,U=re):(i(U,I),re=Xu(Q,U.mode,re),re.return=U,U=re),M(U)):i(U,I)}return function(U,I,Q,re){try{$r=0;var Ne=dt(U,I,Q,re);return Uo=null,Ne}catch(Me){if(Me===Ho||Me===dl)throw Me;var Je=wn(29,Me,null,U.mode);return Je.lanes=re,Je.return=U,Je}finally{}}}var no=Og(!0),Lg=Og(!1),da=!1;function cd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ud(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function fa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ha(n,a,i){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(tt&2)!==0){var y=u.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),u.pending=a,a=ol(n),bg(n,null,i),a}return al(n,u,a,i),ol(n)}function Gr(n,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var u=a.lanes;u&=n.pendingLanes,i|=u,a.lanes=i,lt(n,i)}}function dd(n,a){var i=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,i===u)){var y=null,b=null;if(i=i.firstBaseUpdate,i!==null){do{var M={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};b===null?y=b=M:b=b.next=M,i=i.next}while(i!==null);b===null?y=b=a:b=b.next=a}else y=b=a;i={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:u.shared,callbacks:u.callbacks},n.updateQueue=i;return}n=i.lastBaseUpdate,n===null?i.firstBaseUpdate=a:n.next=a,i.lastBaseUpdate=a}var fd=!1;function Kr(){if(fd){var n=qo;if(n!==null)throw n}}function Vr(n,a,i,u){fd=!1;var y=n.updateQueue;da=!1;var b=y.firstBaseUpdate,M=y.lastBaseUpdate,k=y.shared.pending;if(k!==null){y.shared.pending=null;var O=k,G=O.next;O.next=null,M===null?b=G:M.next=G,M=O;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,k=ne.lastBaseUpdate,k!==M&&(k===null?ne.firstBaseUpdate=G:k.next=G,ne.lastBaseUpdate=O))}if(b!==null){var ie=y.baseState;M=0,ne=G=O=null,k=b;do{var F=k.lane&-536870913,Z=F!==k.lane;if(Z?(Ke&F)===F:(u&F)===F){F!==0&&F===Io&&(fd=!0),ne!==null&&(ne=ne.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var xe=n,ke=k;F=a;var dt=i;switch(ke.tag){case 1:if(xe=ke.payload,typeof xe=="function"){ie=xe.call(dt,ie,F);break e}ie=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=ke.payload,F=typeof xe=="function"?xe.call(dt,ie,F):xe,F==null)break e;ie=m({},ie,F);break e;case 2:da=!0}}F=k.callback,F!==null&&(n.flags|=64,Z&&(n.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[F]:Z.push(F))}else Z={lane:F,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ne===null?(G=ne=Z,O=ie):ne=ne.next=Z,M|=F;if(k=k.next,k===null){if(k=y.shared.pending,k===null)break;Z=k,k=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);ne===null&&(O=ie),y.baseState=O,y.firstBaseUpdate=G,y.lastBaseUpdate=ne,b===null&&(y.shared.lanes=0),va|=M,n.lanes=M,n.memoizedState=ie}}function Pg(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function Ig(n,a){var i=n.callbacks;if(i!==null)for(n.callbacks=null,n=0;n<i.length;n++)Pg(i[n],a)}var Bo=_(null),gl=_(0);function qg(n,a){n=Gs,X(gl,n),X(Bo,a),Gs=n|a.baseLanes}function hd(){X(gl,Gs),X(Bo,Bo.current)}function pd(){Gs=gl.current,$(Bo),$(gl)}var Cn=_(null),Hn=null;function pa(n){var a=n.alternate;X(Nt,Nt.current&1),X(Cn,n),Hn===null&&(a===null||Bo.current!==null||a.memoizedState!==null)&&(Hn=n)}function gd(n){X(Nt,Nt.current),X(Cn,n),Hn===null&&(Hn=n)}function Hg(n){n.tag===22?(X(Nt,Nt.current),X(Cn,n),Hn===null&&(Hn=n)):ga()}function ga(){X(Nt,Nt.current),X(Cn,Cn.current)}function Sn(n){$(Cn),Hn===n&&(Hn=null),$(Nt)}var Nt=_(0);function ml(n){for(var a=n;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Cf(i)||Sf(i)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ps=0,Le=null,ct=null,Lt=null,yl=!1,$o=!1,so=!1,vl=0,Fr=0,Qo=null,BS=0;function St(){throw Error(s(321))}function md(n,a){if(a===null)return!1;for(var i=0;i<a.length&&i<n.length;i++)if(!xn(n[i],a[i]))return!1;return!0}function yd(n,a,i,u,y,b){return Ps=b,Le=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,z.H=n===null||n.memoizedState===null?Sm:Dd,so=!1,b=i(u,y),so=!1,$o&&(b=Bg(a,i,u,y)),Ug(n),b}function Ug(n){z.H=Wr;var a=ct!==null&&ct.next!==null;if(Ps=0,Lt=ct=Le=null,yl=!1,Fr=0,Qo=null,a)throw Error(s(300));n===null||Pt||(n=n.dependencies,n!==null&&ll(n)&&(Pt=!0))}function Bg(n,a,i,u){Le=n;var y=0;do{if($o&&(Qo=null),Fr=0,$o=!1,25<=y)throw Error(s(301));if(y+=1,Lt=ct=null,n.updateQueue!=null){var b=n.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}z.H=Mm,b=a(i,u)}while($o);return b}function $S(){var n=z.H,a=n.useState()[0];return a=typeof a.then=="function"?Yr(a):a,n=n.useState()[0],(ct!==null?ct.memoizedState:null)!==n&&(Le.flags|=1024),a}function vd(){var n=vl!==0;return vl=0,n}function bd(n,a,i){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~i}function xd(n){if(yl){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}yl=!1}Ps=0,Lt=ct=Le=null,$o=!1,Fr=vl=0,Qo=null}function cn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Le.memoizedState=Lt=n:Lt=Lt.next=n,Lt}function At(){if(ct===null){var n=Le.alternate;n=n!==null?n.memoizedState:null}else n=ct.next;var a=Lt===null?Le.memoizedState:Lt.next;if(a!==null)Lt=a,ct=n;else{if(n===null)throw Le.alternate===null?Error(s(467)):Error(s(310));ct=n,n={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Lt===null?Le.memoizedState=Lt=n:Lt=Lt.next=n}return Lt}function bl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yr(n){var a=Fr;return Fr+=1,Qo===null&&(Qo=[]),n=Dg(Qo,n,a),a=Le,(Lt===null?a.memoizedState:Lt.next)===null&&(a=a.alternate,z.H=a===null||a.memoizedState===null?Sm:Dd),n}function xl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Yr(n);if(n.$$typeof===N)return Jt(n)}throw Error(s(438,String(n)))}function wd(n){var a=null,i=Le.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var u=Le.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=bl(),Le.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(n),u=0;u<n;u++)i[u]=se;return a.index++,i}function Is(n,a){return typeof a=="function"?a(n):a}function wl(n){var a=At();return Cd(a,ct,n)}function Cd(n,a,i){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=i;var y=n.baseQueue,b=u.pending;if(b!==null){if(y!==null){var M=y.next;y.next=b.next,b.next=M}a.baseQueue=y=b,u.pending=null}if(b=n.baseState,y===null)n.memoizedState=b;else{a=y.next;var k=M=null,O=null,G=a,ne=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?(Ke&ie)===ie:(Ps&ie)===ie){var F=G.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===Io&&(ne=!0);else if((Ps&F)===F){G=G.next,F===Io&&(ne=!0);continue}else ie={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(k=O=ie,M=b):O=O.next=ie,Le.lanes|=F,va|=F;ie=G.action,so&&i(b,ie),b=G.hasEagerState?G.eagerState:i(b,ie)}else F={lane:ie,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(k=O=F,M=b):O=O.next=F,Le.lanes|=ie,va|=ie;G=G.next}while(G!==null&&G!==a);if(O===null?M=b:O.next=k,!xn(b,n.memoizedState)&&(Pt=!0,ne&&(i=qo,i!==null)))throw i;n.memoizedState=b,n.baseState=M,n.baseQueue=O,u.lastRenderedState=b}return y===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Sd(n){var a=At(),i=a.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=n;var u=i.dispatch,y=i.pending,b=a.memoizedState;if(y!==null){i.pending=null;var M=y=y.next;do b=n(b,M.action),M=M.next;while(M!==y);xn(b,a.memoizedState)||(Pt=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),i.lastRenderedState=b}return[b,u]}function $g(n,a,i){var u=Le,y=At(),b=Xe;if(b){if(i===void 0)throw Error(s(407));i=i()}else i=a();var M=!xn((ct||y).memoizedState,i);if(M&&(y.memoizedState=i,Pt=!0),y=y.queue,Rd(Kg.bind(null,u,y,n),[n]),y.getSnapshot!==a||M||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,Go(9,{destroy:void 0},Gg.bind(null,u,y,i,a),null),ft===null)throw Error(s(349));b||(Ps&127)!==0||Qg(u,a,i)}return i}function Qg(n,a,i){n.flags|=16384,n={getSnapshot:a,value:i},a=Le.updateQueue,a===null?(a=bl(),Le.updateQueue=a,a.stores=[n]):(i=a.stores,i===null?a.stores=[n]:i.push(n))}function Gg(n,a,i,u){a.value=i,a.getSnapshot=u,Vg(a)&&Fg(n)}function Kg(n,a,i){return i(function(){Vg(a)&&Fg(n)})}function Vg(n){var a=n.getSnapshot;n=n.value;try{var i=a();return!xn(n,i)}catch{return!0}}function Fg(n){var a=Fa(n,2);a!==null&&yn(a,n,2)}function Md(n){var a=cn();if(typeof n=="function"){var i=n;if(n=i(),so){Kt(!0);try{i()}finally{Kt(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:n},a}function Yg(n,a,i,u){return n.baseState=i,Cd(n,ct,typeof u=="function"?u:Is)}function QS(n,a,i,u,y){if(Ml(n))throw Error(s(485));if(n=a.action,n!==null){var b={payload:y,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){b.listeners.push(M)}};z.T!==null?i(!0):b.isTransition=!1,u(b),i=a.pending,i===null?(b.next=a.pending=b,Xg(a,b)):(b.next=i.next,a.pending=i.next=b)}}function Xg(n,a){var i=a.action,u=a.payload,y=n.state;if(a.isTransition){var b=z.T,M={};z.T=M;try{var k=i(y,u),O=z.S;O!==null&&O(M,k),Wg(n,a,k)}catch(G){Ed(n,a,G)}finally{b!==null&&M.types!==null&&(b.types=M.types),z.T=b}}else try{b=i(y,u),Wg(n,a,b)}catch(G){Ed(n,a,G)}}function Wg(n,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(u){Zg(n,a,u)},function(u){return Ed(n,a,u)}):Zg(n,a,i)}function Zg(n,a,i){a.status="fulfilled",a.value=i,Jg(a),n.state=i,a=n.pending,a!==null&&(i=a.next,i===a?n.pending=null:(i=i.next,a.next=i,Xg(n,i)))}function Ed(n,a,i){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=i,Jg(a),a=a.next;while(a!==u)}n.action=null}function Jg(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function em(n,a){return a}function tm(n,a){if(Xe){var i=ft.formState;if(i!==null){e:{var u=Le;if(Xe){if(bt){t:{for(var y=bt,b=qn;y.nodeType!==8;){if(!b){y=null;break t}if(y=Un(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){bt=Un(y.nextSibling),u=y.data==="F!";break e}}ca(u)}u=!1}u&&(a=i[0])}}return i=cn(),i.memoizedState=i.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:em,lastRenderedState:a},i.queue=u,i=xm.bind(null,Le,u),u.dispatch=i,u=Md(!1),b=jd.bind(null,Le,!1,u.queue),u=cn(),y={state:a,dispatch:null,action:n,pending:null},u.queue=y,i=QS.bind(null,Le,y,b,i),y.dispatch=i,u.memoizedState=n,[a,i,!1]}function nm(n){var a=At();return sm(a,ct,n)}function sm(n,a,i){if(a=Cd(n,a,em)[0],n=wl(Is)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Yr(a)}catch(M){throw M===Ho?dl:M}else u=a;a=At();var y=a.queue,b=y.dispatch;return i!==a.memoizedState&&(Le.flags|=2048,Go(9,{destroy:void 0},GS.bind(null,y,i),null)),[u,b,n]}function GS(n,a){n.action=a}function am(n){var a=At(),i=ct;if(i!==null)return sm(a,i,n);At(),a=a.memoizedState,i=At();var u=i.queue.dispatch;return i.memoizedState=n,[a,u,!1]}function Go(n,a,i,u){return n={tag:n,create:i,deps:u,inst:a,next:null},a=Le.updateQueue,a===null&&(a=bl(),Le.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=n.next=n:(u=i.next,i.next=n,n.next=u,a.lastEffect=n),n}function om(){return At().memoizedState}function Cl(n,a,i,u){var y=cn();Le.flags|=n,y.memoizedState=Go(1|a,{destroy:void 0},i,u===void 0?null:u)}function Sl(n,a,i,u){var y=At();u=u===void 0?null:u;var b=y.memoizedState.inst;ct!==null&&u!==null&&md(u,ct.memoizedState.deps)?y.memoizedState=Go(a,b,i,u):(Le.flags|=n,y.memoizedState=Go(1|a,b,i,u))}function rm(n,a){Cl(8390656,8,n,a)}function Rd(n,a){Sl(2048,8,n,a)}function KS(n){Le.flags|=4;var a=Le.updateQueue;if(a===null)a=bl(),Le.updateQueue=a,a.events=[n];else{var i=a.events;i===null?a.events=[n]:i.push(n)}}function im(n){var a=At().memoizedState;return KS({ref:a,nextImpl:n}),function(){if((tt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function lm(n,a){return Sl(4,2,n,a)}function cm(n,a){return Sl(4,4,n,a)}function um(n,a){if(typeof a=="function"){n=n();var i=a(n);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function dm(n,a,i){i=i!=null?i.concat([n]):null,Sl(4,4,um.bind(null,a,n),i)}function Nd(){}function fm(n,a){var i=At();a=a===void 0?null:a;var u=i.memoizedState;return a!==null&&md(a,u[1])?u[0]:(i.memoizedState=[n,a],n)}function hm(n,a){var i=At();a=a===void 0?null:a;var u=i.memoizedState;if(a!==null&&md(a,u[1]))return u[0];if(u=n(),so){Kt(!0);try{n()}finally{Kt(!1)}}return i.memoizedState=[u,a],u}function Ad(n,a,i){return i===void 0||(Ps&1073741824)!==0&&(Ke&261930)===0?n.memoizedState=a:(n.memoizedState=i,n=py(),Le.lanes|=n,va|=n,i)}function pm(n,a,i,u){return xn(i,a)?i:Bo.current!==null?(n=Ad(n,i,u),xn(n,a)||(Pt=!0),n):(Ps&42)===0||(Ps&1073741824)!==0&&(Ke&261930)===0?(Pt=!0,n.memoizedState=i):(n=py(),Le.lanes|=n,va|=n,a)}function gm(n,a,i,u,y){var b=D.p;D.p=b!==0&&8>b?b:8;var M=z.T,k={};z.T=k,jd(n,!1,a,i);try{var O=y(),G=z.S;if(G!==null&&G(k,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ne=US(O,u);Xr(n,a,ne,Rn(n))}else Xr(n,a,u,Rn(n))}catch(ie){Xr(n,a,{then:function(){},status:"rejected",reason:ie},Rn())}finally{D.p=b,M!==null&&k.types!==null&&(M.types=k.types),z.T=M}}function VS(){}function Td(n,a,i,u){if(n.tag!==5)throw Error(s(476));var y=mm(n).queue;gm(n,y,a,L,i===null?VS:function(){return ym(n),i(u)})}function mm(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:L},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:i},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function ym(n){var a=mm(n);a.next===null&&(a=n.alternate.memoizedState),Xr(n,a.next.queue,{},Rn())}function kd(){return Jt(hi)}function vm(){return At().memoizedState}function bm(){return At().memoizedState}function FS(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var i=Rn();n=fa(i);var u=ha(a,n,i);u!==null&&(yn(u,a,i),Gr(u,a,i)),a={cache:od()},n.payload=a;return}a=a.return}}function YS(n,a,i){var u=Rn();i={lane:u,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ml(n)?wm(a,i):(i=Fu(n,a,i,u),i!==null&&(yn(i,n,u),Cm(i,a,u)))}function xm(n,a,i){var u=Rn();Xr(n,a,i,u)}function Xr(n,a,i,u){var y={lane:u,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ml(n))wm(a,y);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var M=a.lastRenderedState,k=b(M,i);if(y.hasEagerState=!0,y.eagerState=k,xn(k,M))return al(n,a,y,0),ft===null&&sl(),!1}catch{}finally{}if(i=Fu(n,a,y,u),i!==null)return yn(i,n,u),Cm(i,a,u),!0}return!1}function jd(n,a,i,u){if(u={lane:2,revertLane:uf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ml(n)){if(a)throw Error(s(479))}else a=Fu(n,i,u,2),a!==null&&yn(a,n,2)}function Ml(n){var a=n.alternate;return n===Le||a!==null&&a===Le}function wm(n,a){$o=yl=!0;var i=n.pending;i===null?a.next=a:(a.next=i.next,i.next=a),n.pending=a}function Cm(n,a,i){if((i&4194048)!==0){var u=a.lanes;u&=n.pendingLanes,i|=u,a.lanes=i,lt(n,i)}}var Wr={readContext:Jt,use:xl,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};Wr.useEffectEvent=St;var Sm={readContext:Jt,use:xl,useCallback:function(n,a){return cn().memoizedState=[n,a===void 0?null:a],n},useContext:Jt,useEffect:rm,useImperativeHandle:function(n,a,i){i=i!=null?i.concat([n]):null,Cl(4194308,4,um.bind(null,a,n),i)},useLayoutEffect:function(n,a){return Cl(4194308,4,n,a)},useInsertionEffect:function(n,a){Cl(4,2,n,a)},useMemo:function(n,a){var i=cn();a=a===void 0?null:a;var u=n();if(so){Kt(!0);try{n()}finally{Kt(!1)}}return i.memoizedState=[u,a],u},useReducer:function(n,a,i){var u=cn();if(i!==void 0){var y=i(a);if(so){Kt(!0);try{i(a)}finally{Kt(!1)}}}else y=a;return u.memoizedState=u.baseState=y,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:y},u.queue=n,n=n.dispatch=YS.bind(null,Le,n),[u.memoizedState,n]},useRef:function(n){var a=cn();return n={current:n},a.memoizedState=n},useState:function(n){n=Md(n);var a=n.queue,i=xm.bind(null,Le,a);return a.dispatch=i,[n.memoizedState,i]},useDebugValue:Nd,useDeferredValue:function(n,a){var i=cn();return Ad(i,n,a)},useTransition:function(){var n=Md(!1);return n=gm.bind(null,Le,n.queue,!0,!1),cn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,i){var u=Le,y=cn();if(Xe){if(i===void 0)throw Error(s(407));i=i()}else{if(i=a(),ft===null)throw Error(s(349));(Ke&127)!==0||Qg(u,a,i)}y.memoizedState=i;var b={value:i,getSnapshot:a};return y.queue=b,rm(Kg.bind(null,u,b,n),[n]),u.flags|=2048,Go(9,{destroy:void 0},Gg.bind(null,u,b,i,a),null),i},useId:function(){var n=cn(),a=ft.identifierPrefix;if(Xe){var i=cs,u=ls;i=(u&~(1<<32-_t(u)-1)).toString(32)+i,a="_"+a+"R_"+i,i=vl++,0<i&&(a+="H"+i.toString(32)),a+="_"}else i=BS++,a="_"+a+"r_"+i.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:kd,useFormState:tm,useActionState:tm,useOptimistic:function(n){var a=cn();a.memoizedState=a.baseState=n;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=jd.bind(null,Le,!0,i),i.dispatch=a,[n,a]},useMemoCache:wd,useCacheRefresh:function(){return cn().memoizedState=FS.bind(null,Le)},useEffectEvent:function(n){var a=cn(),i={impl:n};return a.memoizedState=i,function(){if((tt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Dd={readContext:Jt,use:xl,useCallback:fm,useContext:Jt,useEffect:Rd,useImperativeHandle:dm,useInsertionEffect:lm,useLayoutEffect:cm,useMemo:hm,useReducer:wl,useRef:om,useState:function(){return wl(Is)},useDebugValue:Nd,useDeferredValue:function(n,a){var i=At();return pm(i,ct.memoizedState,n,a)},useTransition:function(){var n=wl(Is)[0],a=At().memoizedState;return[typeof n=="boolean"?n:Yr(n),a]},useSyncExternalStore:$g,useId:vm,useHostTransitionStatus:kd,useFormState:nm,useActionState:nm,useOptimistic:function(n,a){var i=At();return Yg(i,ct,n,a)},useMemoCache:wd,useCacheRefresh:bm};Dd.useEffectEvent=im;var Mm={readContext:Jt,use:xl,useCallback:fm,useContext:Jt,useEffect:Rd,useImperativeHandle:dm,useInsertionEffect:lm,useLayoutEffect:cm,useMemo:hm,useReducer:Sd,useRef:om,useState:function(){return Sd(Is)},useDebugValue:Nd,useDeferredValue:function(n,a){var i=At();return ct===null?Ad(i,n,a):pm(i,ct.memoizedState,n,a)},useTransition:function(){var n=Sd(Is)[0],a=At().memoizedState;return[typeof n=="boolean"?n:Yr(n),a]},useSyncExternalStore:$g,useId:vm,useHostTransitionStatus:kd,useFormState:am,useActionState:am,useOptimistic:function(n,a){var i=At();return ct!==null?Yg(i,ct,n,a):(i.baseState=n,[n,i.queue.dispatch])},useMemoCache:wd,useCacheRefresh:bm};Mm.useEffectEvent=im;function _d(n,a,i,u){a=n.memoizedState,i=i(u,a),i=i==null?a:m({},a,i),n.memoizedState=i,n.lanes===0&&(n.updateQueue.baseState=i)}var zd={enqueueSetState:function(n,a,i){n=n._reactInternals;var u=Rn(),y=fa(u);y.payload=a,i!=null&&(y.callback=i),a=ha(n,y,u),a!==null&&(yn(a,n,u),Gr(a,n,u))},enqueueReplaceState:function(n,a,i){n=n._reactInternals;var u=Rn(),y=fa(u);y.tag=1,y.payload=a,i!=null&&(y.callback=i),a=ha(n,y,u),a!==null&&(yn(a,n,u),Gr(a,n,u))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var i=Rn(),u=fa(i);u.tag=2,a!=null&&(u.callback=a),a=ha(n,u,i),a!==null&&(yn(a,n,i),Gr(a,n,i))}};function Em(n,a,i,u,y,b,M){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,b,M):a.prototype&&a.prototype.isPureReactComponent?!Pr(i,u)||!Pr(y,b):!0}function Rm(n,a,i,u){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,u),a.state!==n&&zd.enqueueReplaceState(a,a.state,null)}function ao(n,a){var i=a;if("ref"in a){i={};for(var u in a)u!=="ref"&&(i[u]=a[u])}if(n=n.defaultProps){i===a&&(i=m({},i));for(var y in n)i[y]===void 0&&(i[y]=n[y])}return i}function Nm(n){nl(n)}function Am(n){console.error(n)}function Tm(n){nl(n)}function El(n,a){try{var i=n.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function km(n,a,i){try{var u=n.onCaughtError;u(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Od(n,a,i){return i=fa(i),i.tag=3,i.payload={element:null},i.callback=function(){El(n,a)},i}function jm(n){return n=fa(n),n.tag=3,n}function Dm(n,a,i,u){var y=i.type.getDerivedStateFromError;if(typeof y=="function"){var b=u.value;n.payload=function(){return y(b)},n.callback=function(){km(a,i,u)}}var M=i.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(n.callback=function(){km(a,i,u),typeof y!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var k=u.stack;this.componentDidCatch(u.value,{componentStack:k!==null?k:""})})}function XS(n,a,i,u,y){if(i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=i.alternate,a!==null&&Po(a,i,y,!0),i=Cn.current,i!==null){switch(i.tag){case 31:case 13:return Hn===null?Pl():i.alternate===null&&Mt===0&&(Mt=3),i.flags&=-257,i.flags|=65536,i.lanes=y,u===fl?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([u]):a.add(u),rf(n,u,y)),!1;case 22:return i.flags|=65536,u===fl?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([u]):i.add(u)),rf(n,u,y)),!1}throw Error(s(435,i.tag))}return rf(n,u,y),Pl(),!1}if(Xe)return a=Cn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,u!==ed&&(n=Error(s(422),{cause:u}),Hr(Ln(n,i)))):(u!==ed&&(a=Error(s(423),{cause:u}),Hr(Ln(a,i))),n=n.current.alternate,n.flags|=65536,y&=-y,n.lanes|=y,u=Ln(u,i),y=Od(n.stateNode,u,y),dd(n,y),Mt!==4&&(Mt=2)),!1;var b=Error(s(520),{cause:u});if(b=Ln(b,i),oi===null?oi=[b]:oi.push(b),Mt!==4&&(Mt=2),a===null)return!0;u=Ln(u,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,n=y&-y,i.lanes|=n,n=Od(i.stateNode,u,n),dd(i,n),!1;case 1:if(a=i.type,b=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ba===null||!ba.has(b))))return i.flags|=65536,y&=-y,i.lanes|=y,y=jm(y),Dm(y,n,i,u),dd(i,y),!1}i=i.return}while(i!==null);return!1}var Ld=Error(s(461)),Pt=!1;function en(n,a,i,u){a.child=n===null?Lg(a,null,i,u):no(a,n.child,i,u)}function _m(n,a,i,u,y){i=i.render;var b=a.ref;if("ref"in u){var M={};for(var k in u)k!=="ref"&&(M[k]=u[k])}else M=u;return Za(a),u=yd(n,a,i,M,b,y),k=vd(),n!==null&&!Pt?(bd(n,a,y),qs(n,a,y)):(Xe&&k&&Zu(a),a.flags|=1,en(n,a,u,y),a.child)}function zm(n,a,i,u,y){if(n===null){var b=i.type;return typeof b=="function"&&!Yu(b)&&b.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=b,Om(n,a,b,u,y)):(n=rl(i.type,null,u,a,a.mode,y),n.ref=a.ref,n.return=a,a.child=n)}if(b=n.child,!Qd(n,y)){var M=b.memoizedProps;if(i=i.compare,i=i!==null?i:Pr,i(M,u)&&n.ref===a.ref)return qs(n,a,y)}return a.flags|=1,n=_s(b,u),n.ref=a.ref,n.return=a,a.child=n}function Om(n,a,i,u,y){if(n!==null){var b=n.memoizedProps;if(Pr(b,u)&&n.ref===a.ref)if(Pt=!1,a.pendingProps=u=b,Qd(n,y))(n.flags&131072)!==0&&(Pt=!0);else return a.lanes=n.lanes,qs(n,a,y)}return Pd(n,a,i,u,y)}function Lm(n,a,i,u){var y=u.children,b=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|i:i,n!==null){for(u=a.child=n.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~b}else u=0,a.child=null;return Pm(n,a,b,i,u)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&ul(a,b!==null?b.cachePool:null),b!==null?qg(a,b):hd(),Hg(a);else return u=a.lanes=536870912,Pm(n,a,b!==null?b.baseLanes|i:i,i,u)}else b!==null?(ul(a,b.cachePool),qg(a,b),ga(),a.memoizedState=null):(n!==null&&ul(a,null),hd(),ga());return en(n,a,y,i),a.child}function Zr(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Pm(n,a,i,u,y){var b=id();return b=b===null?null:{parent:Ot._currentValue,pool:b},a.memoizedState={baseLanes:i,cachePool:b},n!==null&&ul(a,null),hd(),Hg(a),n!==null&&Po(n,a,u,!0),a.childLanes=y,null}function Rl(n,a){return a=Al({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function Im(n,a,i){return no(a,n.child,null,i),n=Rl(a,a.pendingProps),n.flags|=2,Sn(a),a.memoizedState=null,n}function WS(n,a,i){var u=a.pendingProps,y=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(Xe){if(u.mode==="hidden")return n=Rl(a,u),a.lanes=536870912,Zr(null,n);if(gd(a),(n=bt)?(n=Xy(n,qn),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:ia!==null?{id:ls,overflow:cs}:null,retryLane:536870912,hydrationErrors:null},i=wg(n),i.return=a,a.child=i,Zt=a,bt=null)):n=null,n===null)throw ca(a);return a.lanes=536870912,null}return Rl(a,u)}var b=n.memoizedState;if(b!==null){var M=b.dehydrated;if(gd(a),y)if(a.flags&256)a.flags&=-257,a=Im(n,a,i);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(s(558));else if(Pt||Po(n,a,i,!1),y=(i&n.childLanes)!==0,Pt||y){if(u=ft,u!==null&&(M=zt(u,i),M!==0&&M!==b.retryLane))throw b.retryLane=M,Fa(n,M),yn(u,n,M),Ld;Pl(),a=Im(n,a,i)}else n=b.treeContext,bt=Un(M.nextSibling),Zt=a,Xe=!0,la=null,qn=!1,n!==null&&Mg(a,n),a=Rl(a,u),a.flags|=4096;return a}return n=_s(n.child,{mode:u.mode,children:u.children}),n.ref=a.ref,a.child=n,n.return=a,n}function Nl(n,a){var i=a.ref;if(i===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(n===null||n.ref!==i)&&(a.flags|=4194816)}}function Pd(n,a,i,u,y){return Za(a),i=yd(n,a,i,u,void 0,y),u=vd(),n!==null&&!Pt?(bd(n,a,y),qs(n,a,y)):(Xe&&u&&Zu(a),a.flags|=1,en(n,a,i,y),a.child)}function qm(n,a,i,u,y,b){return Za(a),a.updateQueue=null,i=Bg(a,u,i,y),Ug(n),u=vd(),n!==null&&!Pt?(bd(n,a,b),qs(n,a,b)):(Xe&&u&&Zu(a),a.flags|=1,en(n,a,i,b),a.child)}function Hm(n,a,i,u,y){if(Za(a),a.stateNode===null){var b=_o,M=i.contextType;typeof M=="object"&&M!==null&&(b=Jt(M)),b=new i(u,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=zd,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=u,b.state=a.memoizedState,b.refs={},cd(a),M=i.contextType,b.context=typeof M=="object"&&M!==null?Jt(M):_o,b.state=a.memoizedState,M=i.getDerivedStateFromProps,typeof M=="function"&&(_d(a,i,M,u),b.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(M=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),M!==b.state&&zd.enqueueReplaceState(b,b.state,null),Vr(a,u,b,y),Kr(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(n===null){b=a.stateNode;var k=a.memoizedProps,O=ao(i,k);b.props=O;var G=b.context,ne=i.contextType;M=_o,typeof ne=="object"&&ne!==null&&(M=Jt(ne));var ie=i.getDerivedStateFromProps;ne=typeof ie=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=a.pendingProps!==k,ne||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||G!==M)&&Rm(a,b,u,M),da=!1;var F=a.memoizedState;b.state=F,Vr(a,u,b,y),Kr(),G=a.memoizedState,k||F!==G||da?(typeof ie=="function"&&(_d(a,i,ie,u),G=a.memoizedState),(O=da||Em(a,i,O,u,F,G,M))?(ne||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=G),b.props=u,b.state=G,b.context=M,u=O):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{b=a.stateNode,ud(n,a),M=a.memoizedProps,ne=ao(i,M),b.props=ne,ie=a.pendingProps,F=b.context,G=i.contextType,O=_o,typeof G=="object"&&G!==null&&(O=Jt(G)),k=i.getDerivedStateFromProps,(G=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M!==ie||F!==O)&&Rm(a,b,u,O),da=!1,F=a.memoizedState,b.state=F,Vr(a,u,b,y),Kr();var Z=a.memoizedState;M!==ie||F!==Z||da||n!==null&&n.dependencies!==null&&ll(n.dependencies)?(typeof k=="function"&&(_d(a,i,k,u),Z=a.memoizedState),(ne=da||Em(a,i,ne,u,F,Z,O)||n!==null&&n.dependencies!==null&&ll(n.dependencies))?(G||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(u,Z,O),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(u,Z,O)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||M===n.memoizedProps&&F===n.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&F===n.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=Z),b.props=u,b.state=Z,b.context=O,u=ne):(typeof b.componentDidUpdate!="function"||M===n.memoizedProps&&F===n.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&F===n.memoizedState||(a.flags|=1024),u=!1)}return b=u,Nl(n,a),u=(a.flags&128)!==0,b||u?(b=a.stateNode,i=u&&typeof i.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,n!==null&&u?(a.child=no(a,n.child,null,y),a.child=no(a,null,i,y)):en(n,a,i,y),a.memoizedState=b.state,n=a.child):n=qs(n,a,y),n}function Um(n,a,i,u){return Xa(),a.flags|=256,en(n,a,i,u),a.child}var Id={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qd(n){return{baseLanes:n,cachePool:kg()}}function Hd(n,a,i){return n=n!==null?n.childLanes&~i:0,a&&(n|=En),n}function Bm(n,a,i){var u=a.pendingProps,y=!1,b=(a.flags&128)!==0,M;if((M=b)||(M=n!==null&&n.memoizedState===null?!1:(Nt.current&2)!==0),M&&(y=!0,a.flags&=-129),M=(a.flags&32)!==0,a.flags&=-33,n===null){if(Xe){if(y?pa(a):ga(),(n=bt)?(n=Xy(n,qn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:ia!==null?{id:ls,overflow:cs}:null,retryLane:536870912,hydrationErrors:null},i=wg(n),i.return=a,a.child=i,Zt=a,bt=null)):n=null,n===null)throw ca(a);return Sf(n)?a.lanes=32:a.lanes=536870912,null}var k=u.children;return u=u.fallback,y?(ga(),y=a.mode,k=Al({mode:"hidden",children:k},y),u=Ya(u,y,i,null),k.return=a,u.return=a,k.sibling=u,a.child=k,u=a.child,u.memoizedState=qd(i),u.childLanes=Hd(n,M,i),a.memoizedState=Id,Zr(null,u)):(pa(a),Ud(a,k))}var O=n.memoizedState;if(O!==null&&(k=O.dehydrated,k!==null)){if(b)a.flags&256?(pa(a),a.flags&=-257,a=Bd(n,a,i)):a.memoizedState!==null?(ga(),a.child=n.child,a.flags|=128,a=null):(ga(),k=u.fallback,y=a.mode,u=Al({mode:"visible",children:u.children},y),k=Ya(k,y,i,null),k.flags|=2,u.return=a,k.return=a,u.sibling=k,a.child=u,no(a,n.child,null,i),u=a.child,u.memoizedState=qd(i),u.childLanes=Hd(n,M,i),a.memoizedState=Id,a=Zr(null,u));else if(pa(a),Sf(k)){if(M=k.nextSibling&&k.nextSibling.dataset,M)var G=M.dgst;M=G,u=Error(s(419)),u.stack="",u.digest=M,Hr({value:u,source:null,stack:null}),a=Bd(n,a,i)}else if(Pt||Po(n,a,i,!1),M=(i&n.childLanes)!==0,Pt||M){if(M=ft,M!==null&&(u=zt(M,i),u!==0&&u!==O.retryLane))throw O.retryLane=u,Fa(n,u),yn(M,n,u),Ld;Cf(k)||Pl(),a=Bd(n,a,i)}else Cf(k)?(a.flags|=192,a.child=n.child,a=null):(n=O.treeContext,bt=Un(k.nextSibling),Zt=a,Xe=!0,la=null,qn=!1,n!==null&&Mg(a,n),a=Ud(a,u.children),a.flags|=4096);return a}return y?(ga(),k=u.fallback,y=a.mode,O=n.child,G=O.sibling,u=_s(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,G!==null?k=_s(G,k):(k=Ya(k,y,i,null),k.flags|=2),k.return=a,u.return=a,u.sibling=k,a.child=u,Zr(null,u),u=a.child,k=n.child.memoizedState,k===null?k=qd(i):(y=k.cachePool,y!==null?(O=Ot._currentValue,y=y.parent!==O?{parent:O,pool:O}:y):y=kg(),k={baseLanes:k.baseLanes|i,cachePool:y}),u.memoizedState=k,u.childLanes=Hd(n,M,i),a.memoizedState=Id,Zr(n.child,u)):(pa(a),i=n.child,n=i.sibling,i=_s(i,{mode:"visible",children:u.children}),i.return=a,i.sibling=null,n!==null&&(M=a.deletions,M===null?(a.deletions=[n],a.flags|=16):M.push(n)),a.child=i,a.memoizedState=null,i)}function Ud(n,a){return a=Al({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Al(n,a){return n=wn(22,n,null,a),n.lanes=0,n}function Bd(n,a,i){return no(a,n.child,null,i),n=Ud(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function $m(n,a,i){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a),sd(n.return,a,i)}function $d(n,a,i,u,y,b){var M=n.memoizedState;M===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:i,tailMode:y,treeForkCount:b}:(M.isBackwards=a,M.rendering=null,M.renderingStartTime=0,M.last=u,M.tail=i,M.tailMode=y,M.treeForkCount=b)}function Qm(n,a,i){var u=a.pendingProps,y=u.revealOrder,b=u.tail;u=u.children;var M=Nt.current,k=(M&2)!==0;if(k?(M=M&1|2,a.flags|=128):M&=1,X(Nt,M),en(n,a,u,i),u=Xe?qr:0,!k&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$m(n,i,a);else if(n.tag===19)$m(n,i,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(y){case"forwards":for(i=a.child,y=null;i!==null;)n=i.alternate,n!==null&&ml(n)===null&&(y=i),i=i.sibling;i=y,i===null?(y=a.child,a.child=null):(y=i.sibling,i.sibling=null),$d(a,!1,y,i,b,u);break;case"backwards":case"unstable_legacy-backwards":for(i=null,y=a.child,a.child=null;y!==null;){if(n=y.alternate,n!==null&&ml(n)===null){a.child=y;break}n=y.sibling,y.sibling=i,i=y,y=n}$d(a,!0,i,null,b,u);break;case"together":$d(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function qs(n,a,i){if(n!==null&&(a.dependencies=n.dependencies),va|=a.lanes,(i&a.childLanes)===0)if(n!==null){if(Po(n,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,i=_s(n,n.pendingProps),a.child=i,i.return=a;n.sibling!==null;)n=n.sibling,i=i.sibling=_s(n,n.pendingProps),i.return=a;i.sibling=null}return a.child}function Qd(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&ll(n)))}function ZS(n,a,i){switch(a.tag){case 3:V(a,a.stateNode.containerInfo),ua(a,Ot,n.memoizedState.cache),Xa();break;case 27:case 5:me(a);break;case 4:V(a,a.stateNode.containerInfo);break;case 10:ua(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,gd(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(pa(a),a.flags|=128,null):(i&a.child.childLanes)!==0?Bm(n,a,i):(pa(a),n=qs(n,a,i),n!==null?n.sibling:null);pa(a);break;case 19:var y=(n.flags&128)!==0;if(u=(i&a.childLanes)!==0,u||(Po(n,a,i,!1),u=(i&a.childLanes)!==0),y){if(u)return Qm(n,a,i);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),X(Nt,Nt.current),u)break;return null;case 22:return a.lanes=0,Lm(n,a,i,a.pendingProps);case 24:ua(a,Ot,n.memoizedState.cache)}return qs(n,a,i)}function Gm(n,a,i){if(n!==null)if(n.memoizedProps!==a.pendingProps)Pt=!0;else{if(!Qd(n,i)&&(a.flags&128)===0)return Pt=!1,ZS(n,a,i);Pt=(n.flags&131072)!==0}else Pt=!1,Xe&&(a.flags&1048576)!==0&&Sg(a,qr,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(n=eo(a.elementType),a.type=n,typeof n=="function")Yu(n)?(u=ao(n,u),a.tag=1,a=Hm(null,a,n,u,i)):(a.tag=0,a=Pd(null,a,n,u,i));else{if(n!=null){var y=n.$$typeof;if(y===A){a.tag=11,a=_m(null,a,n,u,i);break e}else if(y===P){a.tag=14,a=zm(null,a,n,u,i);break e}}throw a=ce(n)||n,Error(s(306,a,""))}}return a;case 0:return Pd(n,a,a.type,a.pendingProps,i);case 1:return u=a.type,y=ao(u,a.pendingProps),Hm(n,a,u,y,i);case 3:e:{if(V(a,a.stateNode.containerInfo),n===null)throw Error(s(387));u=a.pendingProps;var b=a.memoizedState;y=b.element,ud(n,a),Vr(a,u,null,i);var M=a.memoizedState;if(u=M.cache,ua(a,Ot,u),u!==b.cache&&ad(a,[Ot],i,!0),Kr(),u=M.element,b.isDehydrated)if(b={element:u,isDehydrated:!1,cache:M.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Um(n,a,u,i);break e}else if(u!==y){y=Ln(Error(s(424)),a),Hr(y),a=Um(n,a,u,i);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(bt=Un(n.firstChild),Zt=a,Xe=!0,la=null,qn=!0,i=Lg(a,null,u,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Xa(),u===y){a=qs(n,a,i);break e}en(n,a,u,i)}a=a.child}return a;case 26:return Nl(n,a),n===null?(i=n0(a.type,null,a.pendingProps,null))?a.memoizedState=i:Xe||(i=a.type,n=a.pendingProps,u=Ql(oe.current).createElement(i),u[mt]=a,u[Ht]=n,tn(u,i,n),Vt(u),a.stateNode=u):a.memoizedState=n0(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return me(a),n===null&&Xe&&(u=a.stateNode=Jy(a.type,a.pendingProps,oe.current),Zt=a,qn=!0,y=bt,Sa(a.type)?(Mf=y,bt=Un(u.firstChild)):bt=y),en(n,a,a.pendingProps.children,i),Nl(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&Xe&&((y=u=bt)&&(u=AM(u,a.type,a.pendingProps,qn),u!==null?(a.stateNode=u,Zt=a,bt=Un(u.firstChild),qn=!1,y=!0):y=!1),y||ca(a)),me(a),y=a.type,b=a.pendingProps,M=n!==null?n.memoizedProps:null,u=b.children,bf(y,b)?u=null:M!==null&&bf(y,M)&&(a.flags|=32),a.memoizedState!==null&&(y=yd(n,a,$S,null,null,i),hi._currentValue=y),Nl(n,a),en(n,a,u,i),a.child;case 6:return n===null&&Xe&&((n=i=bt)&&(i=TM(i,a.pendingProps,qn),i!==null?(a.stateNode=i,Zt=a,bt=null,n=!0):n=!1),n||ca(a)),null;case 13:return Bm(n,a,i);case 4:return V(a,a.stateNode.containerInfo),u=a.pendingProps,n===null?a.child=no(a,null,u,i):en(n,a,u,i),a.child;case 11:return _m(n,a,a.type,a.pendingProps,i);case 7:return en(n,a,a.pendingProps,i),a.child;case 8:return en(n,a,a.pendingProps.children,i),a.child;case 12:return en(n,a,a.pendingProps.children,i),a.child;case 10:return u=a.pendingProps,ua(a,a.type,u.value),en(n,a,u.children,i),a.child;case 9:return y=a.type._context,u=a.pendingProps.children,Za(a),y=Jt(y),u=u(y),a.flags|=1,en(n,a,u,i),a.child;case 14:return zm(n,a,a.type,a.pendingProps,i);case 15:return Om(n,a,a.type,a.pendingProps,i);case 19:return Qm(n,a,i);case 31:return WS(n,a,i);case 22:return Lm(n,a,i,a.pendingProps);case 24:return Za(a),u=Jt(Ot),n===null?(y=id(),y===null&&(y=ft,b=od(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=i),y=b),a.memoizedState={parent:u,cache:y},cd(a),ua(a,Ot,y)):((n.lanes&i)!==0&&(ud(n,a),Vr(a,null,null,i),Kr()),y=n.memoizedState,b=a.memoizedState,y.parent!==u?(y={parent:u,cache:u},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),ua(a,Ot,u)):(u=b.cache,ua(a,Ot,u),u!==y.cache&&ad(a,[Ot],i,!0))),en(n,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Hs(n){n.flags|=4}function Gd(n,a,i,u,y){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(y&335544128)===y)if(n.stateNode.complete)n.flags|=8192;else if(vy())n.flags|=8192;else throw to=fl,ld}else n.flags&=-16777217}function Km(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!i0(a))if(vy())n.flags|=8192;else throw to=fl,ld}function Tl(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?J():536870912,n.lanes|=a,Yo|=a)}function Jr(n,a){if(!Xe)switch(n.tailMode){case"hidden":a=n.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?n.tail=null:i.sibling=null;break;case"collapsed":i=n.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function xt(n){var a=n.alternate!==null&&n.alternate.child===n.child,i=0,u=0;if(a)for(var y=n.child;y!==null;)i|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)i|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=u,n.childLanes=i,a}function JS(n,a,i){var u=a.pendingProps;switch(Ju(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(a),null;case 1:return xt(a),null;case 3:return i=a.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ls(Ot),pe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Lo(a)?Hs(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,td())),xt(a),null;case 26:var y=a.type,b=a.memoizedState;return n===null?(Hs(a),b!==null?(xt(a),Km(a,b)):(xt(a),Gd(a,y,null,u,i))):b?b!==n.memoizedState?(Hs(a),xt(a),Km(a,b)):(xt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==u&&Hs(a),xt(a),Gd(a,y,n,u,i)),null;case 27:if(ye(a),i=oe.current,y=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Hs(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return xt(a),null}n=W.current,Lo(a)?Eg(a):(n=Jy(y,u,i),a.stateNode=n,Hs(a))}return xt(a),null;case 5:if(ye(a),y=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Hs(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return xt(a),null}if(b=W.current,Lo(a))Eg(a);else{var M=Ql(oe.current);switch(b){case 1:b=M.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=M.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=M.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=M.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=M.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof u.is=="string"?M.createElement("select",{is:u.is}):M.createElement("select"),u.multiple?b.multiple=!0:u.size&&(b.size=u.size);break;default:b=typeof u.is=="string"?M.createElement(y,{is:u.is}):M.createElement(y)}}b[mt]=a,b[Ht]=u;e:for(M=a.child;M!==null;){if(M.tag===5||M.tag===6)b.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===a)break e;for(;M.sibling===null;){if(M.return===null||M.return===a)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}a.stateNode=b;e:switch(tn(b,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Hs(a)}}return xt(a),Gd(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,i),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==u&&Hs(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(n=oe.current,Lo(a)){if(n=a.stateNode,i=a.memoizedProps,u=null,y=Zt,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}n[mt]=a,n=!!(n.nodeValue===i||u!==null&&u.suppressHydrationWarning===!0||By(n.nodeValue,i)),n||ca(a,!0)}else n=Ql(n).createTextNode(u),n[mt]=a,a.stateNode=n}return xt(a),null;case 31:if(i=a.memoizedState,n===null||n.memoizedState!==null){if(u=Lo(a),i!==null){if(n===null){if(!u)throw Error(s(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[mt]=a}else Xa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xt(a),n=!1}else i=td(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=i),n=!0;if(!n)return a.flags&256?(Sn(a),a):(Sn(a),null);if((a.flags&128)!==0)throw Error(s(558))}return xt(a),null;case 13:if(u=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(y=Lo(a),u!==null&&u.dehydrated!==null){if(n===null){if(!y)throw Error(s(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[mt]=a}else Xa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xt(a),y=!1}else y=td(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(Sn(a),a):(Sn(a),null)}return Sn(a),(a.flags&128)!==0?(a.lanes=i,a):(i=u!==null,n=n!==null&&n.memoizedState!==null,i&&(u=a.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),b=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==y&&(u.flags|=2048)),i!==n&&i&&(a.child.flags|=8192),Tl(a,a.updateQueue),xt(a),null);case 4:return pe(),n===null&&pf(a.stateNode.containerInfo),xt(a),null;case 10:return Ls(a.type),xt(a),null;case 19:if($(Nt),u=a.memoizedState,u===null)return xt(a),null;if(y=(a.flags&128)!==0,b=u.rendering,b===null)if(y)Jr(u,!1);else{if(Mt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(b=ml(n),b!==null){for(a.flags|=128,Jr(u,!1),n=b.updateQueue,a.updateQueue=n,Tl(a,n),a.subtreeFlags=0,n=i,i=a.child;i!==null;)xg(i,n),i=i.sibling;return X(Nt,Nt.current&1|2),Xe&&zs(a,u.treeForkCount),a.child}n=n.sibling}u.tail!==null&&Ze()>zl&&(a.flags|=128,y=!0,Jr(u,!1),a.lanes=4194304)}else{if(!y)if(n=ml(b),n!==null){if(a.flags|=128,y=!0,n=n.updateQueue,a.updateQueue=n,Tl(a,n),Jr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!b.alternate&&!Xe)return xt(a),null}else 2*Ze()-u.renderingStartTime>zl&&i!==536870912&&(a.flags|=128,y=!0,Jr(u,!1),a.lanes=4194304);u.isBackwards?(b.sibling=a.child,a.child=b):(n=u.last,n!==null?n.sibling=b:a.child=b,u.last=b)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Ze(),n.sibling=null,i=Nt.current,X(Nt,y?i&1|2:i&1),Xe&&zs(a,u.treeForkCount),n):(xt(a),null);case 22:case 23:return Sn(a),pd(),u=a.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(i&536870912)!==0&&(a.flags&128)===0&&(xt(a),a.subtreeFlags&6&&(a.flags|=8192)):xt(a),i=a.updateQueue,i!==null&&Tl(a,i.retryQueue),i=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==i&&(a.flags|=2048),n!==null&&$(Ja),null;case 24:return i=null,n!==null&&(i=n.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),Ls(Ot),xt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function eM(n,a){switch(Ju(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Ls(Ot),pe(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return ye(a),null;case 31:if(a.memoizedState!==null){if(Sn(a),a.alternate===null)throw Error(s(340));Xa()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(Sn(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Xa()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return $(Nt),null;case 4:return pe(),null;case 10:return Ls(a.type),null;case 22:case 23:return Sn(a),pd(),n!==null&&$(Ja),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Ls(Ot),null;case 25:return null;default:return null}}function Vm(n,a){switch(Ju(a),a.tag){case 3:Ls(Ot),pe();break;case 26:case 27:case 5:ye(a);break;case 4:pe();break;case 31:a.memoizedState!==null&&Sn(a);break;case 13:Sn(a);break;case 19:$(Nt);break;case 10:Ls(a.type);break;case 22:case 23:Sn(a),pd(),n!==null&&$(Ja);break;case 24:Ls(Ot)}}function ei(n,a){try{var i=a.updateQueue,u=i!==null?i.lastEffect:null;if(u!==null){var y=u.next;i=y;do{if((i.tag&n)===n){u=void 0;var b=i.create,M=i.inst;u=b(),M.destroy=u}i=i.next}while(i!==y)}}catch(k){it(a,a.return,k)}}function ma(n,a,i){try{var u=a.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var b=y.next;u=b;do{if((u.tag&n)===n){var M=u.inst,k=M.destroy;if(k!==void 0){M.destroy=void 0,y=a;var O=i,G=k;try{G()}catch(ne){it(y,O,ne)}}}u=u.next}while(u!==b)}}catch(ne){it(a,a.return,ne)}}function Fm(n){var a=n.updateQueue;if(a!==null){var i=n.stateNode;try{Ig(a,i)}catch(u){it(n,n.return,u)}}}function Ym(n,a,i){i.props=ao(n.type,n.memoizedProps),i.state=n.memoizedState;try{i.componentWillUnmount()}catch(u){it(n,a,u)}}function ti(n,a){try{var i=n.ref;if(i!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof i=="function"?n.refCleanup=i(u):i.current=u}}catch(y){it(n,a,y)}}function us(n,a){var i=n.ref,u=n.refCleanup;if(i!==null)if(typeof u=="function")try{u()}catch(y){it(n,a,y)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(y){it(n,a,y)}else i.current=null}function Xm(n){var a=n.type,i=n.memoizedProps,u=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&u.focus();break e;case"img":i.src?u.src=i.src:i.srcSet&&(u.srcset=i.srcSet)}}catch(y){it(n,n.return,y)}}function Kd(n,a,i){try{var u=n.stateNode;CM(u,n.type,i,a),u[Ht]=a}catch(y){it(n,n.return,y)}}function Wm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Sa(n.type)||n.tag===4}function Vd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Wm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Sa(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Fd(n,a,i){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(n,a):(a=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.appendChild(n),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=js));else if(u!==4&&(u===27&&Sa(n.type)&&(i=n.stateNode,a=null),n=n.child,n!==null))for(Fd(n,a,i),n=n.sibling;n!==null;)Fd(n,a,i),n=n.sibling}function kl(n,a,i){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?i.insertBefore(n,a):i.appendChild(n);else if(u!==4&&(u===27&&Sa(n.type)&&(i=n.stateNode),n=n.child,n!==null))for(kl(n,a,i),n=n.sibling;n!==null;)kl(n,a,i),n=n.sibling}function Zm(n){var a=n.stateNode,i=n.memoizedProps;try{for(var u=n.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);tn(a,u,i),a[mt]=n,a[Ht]=i}catch(b){it(n,n.return,b)}}var Us=!1,It=!1,Yd=!1,Jm=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function tM(n,a){if(n=n.containerInfo,yf=Wl,n=dg(n),Bu(n)){if("selectionStart"in n)var i={start:n.selectionStart,end:n.selectionEnd};else e:{i=(i=n.ownerDocument)&&i.defaultView||window;var u=i.getSelection&&i.getSelection();if(u&&u.rangeCount!==0){i=u.anchorNode;var y=u.anchorOffset,b=u.focusNode;u=u.focusOffset;try{i.nodeType,b.nodeType}catch{i=null;break e}var M=0,k=-1,O=-1,G=0,ne=0,ie=n,F=null;t:for(;;){for(var Z;ie!==i||y!==0&&ie.nodeType!==3||(k=M+y),ie!==b||u!==0&&ie.nodeType!==3||(O=M+u),ie.nodeType===3&&(M+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)F=ie,ie=Z;for(;;){if(ie===n)break t;if(F===i&&++G===y&&(k=M),F===b&&++ne===u&&(O=M),(Z=ie.nextSibling)!==null)break;ie=F,F=ie.parentNode}ie=Z}i=k===-1||O===-1?null:{start:k,end:O}}else i=null}i=i||{start:0,end:0}}else i=null;for(vf={focusedElem:n,selectionRange:i},Wl=!1,Ft=a;Ft!==null;)if(a=Ft,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,Ft=n;else for(;Ft!==null;){switch(a=Ft,b=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(i=0;i<n.length;i++)y=n[i],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&b!==null){n=void 0,i=a,y=b.memoizedProps,b=b.memoizedState,u=i.stateNode;try{var xe=ao(i.type,y);n=u.getSnapshotBeforeUpdate(xe,b),u.__reactInternalSnapshotBeforeUpdate=n}catch(ke){it(i,i.return,ke)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,i=n.nodeType,i===9)wf(n);else if(i===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":wf(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,Ft=n;break}Ft=a.return}}function ey(n,a,i){var u=i.flags;switch(i.tag){case 0:case 11:case 15:$s(n,i),u&4&&ei(5,i);break;case 1:if($s(n,i),u&4)if(n=i.stateNode,a===null)try{n.componentDidMount()}catch(M){it(i,i.return,M)}else{var y=ao(i.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(y,a,n.__reactInternalSnapshotBeforeUpdate)}catch(M){it(i,i.return,M)}}u&64&&Fm(i),u&512&&ti(i,i.return);break;case 3:if($s(n,i),u&64&&(n=i.updateQueue,n!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}try{Ig(n,a)}catch(M){it(i,i.return,M)}}break;case 27:a===null&&u&4&&Zm(i);case 26:case 5:$s(n,i),a===null&&u&4&&Xm(i),u&512&&ti(i,i.return);break;case 12:$s(n,i);break;case 31:$s(n,i),u&4&&sy(n,i);break;case 13:$s(n,i),u&4&&ay(n,i),u&64&&(n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(i=uM.bind(null,i),kM(n,i))));break;case 22:if(u=i.memoizedState!==null||Us,!u){a=a!==null&&a.memoizedState!==null||It,y=Us;var b=It;Us=u,(It=a)&&!b?Qs(n,i,(i.subtreeFlags&8772)!==0):$s(n,i),Us=y,It=b}break;case 30:break;default:$s(n,i)}}function ty(n){var a=n.alternate;a!==null&&(n.alternate=null,ty(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Eu(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ct=null,hn=!1;function Bs(n,a,i){for(i=i.child;i!==null;)ny(n,a,i),i=i.sibling}function ny(n,a,i){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(rs,i)}catch{}switch(i.tag){case 26:It||us(i,a),Bs(n,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:It||us(i,a);var u=Ct,y=hn;Sa(i.type)&&(Ct=i.stateNode,hn=!1),Bs(n,a,i),ui(i.stateNode),Ct=u,hn=y;break;case 5:It||us(i,a);case 6:if(u=Ct,y=hn,Ct=null,Bs(n,a,i),Ct=u,hn=y,Ct!==null)if(hn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(i.stateNode)}catch(b){it(i,a,b)}else try{Ct.removeChild(i.stateNode)}catch(b){it(i,a,b)}break;case 18:Ct!==null&&(hn?(n=Ct,Fy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,i.stateNode),sr(n)):Fy(Ct,i.stateNode));break;case 4:u=Ct,y=hn,Ct=i.stateNode.containerInfo,hn=!0,Bs(n,a,i),Ct=u,hn=y;break;case 0:case 11:case 14:case 15:ma(2,i,a),It||ma(4,i,a),Bs(n,a,i);break;case 1:It||(us(i,a),u=i.stateNode,typeof u.componentWillUnmount=="function"&&Ym(i,a,u)),Bs(n,a,i);break;case 21:Bs(n,a,i);break;case 22:It=(u=It)||i.memoizedState!==null,Bs(n,a,i),It=u;break;default:Bs(n,a,i)}}function sy(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{sr(n)}catch(i){it(a,a.return,i)}}}function ay(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{sr(n)}catch(i){it(a,a.return,i)}}function nM(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new Jm),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new Jm),a;default:throw Error(s(435,n.tag))}}function jl(n,a){var i=nM(n);a.forEach(function(u){if(!i.has(u)){i.add(u);var y=dM.bind(null,n,u);u.then(y,y)}})}function pn(n,a){var i=a.deletions;if(i!==null)for(var u=0;u<i.length;u++){var y=i[u],b=n,M=a,k=M;e:for(;k!==null;){switch(k.tag){case 27:if(Sa(k.type)){Ct=k.stateNode,hn=!1;break e}break;case 5:Ct=k.stateNode,hn=!1;break e;case 3:case 4:Ct=k.stateNode.containerInfo,hn=!0;break e}k=k.return}if(Ct===null)throw Error(s(160));ny(b,M,y),Ct=null,hn=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)oy(a,n),a=a.sibling}var Zn=null;function oy(n,a){var i=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:pn(a,n),gn(n),u&4&&(ma(3,n,n.return),ei(3,n),ma(5,n,n.return));break;case 1:pn(a,n),gn(n),u&512&&(It||i===null||us(i,i.return)),u&64&&Us&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(i=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=i===null?u:i.concat(u))));break;case 26:var y=Zn;if(pn(a,n),gn(n),u&512&&(It||i===null||us(i,i.return)),u&4){var b=i!==null?i.memoizedState:null;if(u=n.memoizedState,i===null)if(u===null)if(n.stateNode===null){e:{u=n.type,i=n.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Ar]||b[mt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(u),y.head.insertBefore(b,y.querySelector("head > title"))),tn(b,u,i),b[mt]=n,Vt(b),u=b;break e;case"link":var M=o0("link","href",y).get(u+(i.href||""));if(M){for(var k=0;k<M.length;k++)if(b=M[k],b.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&b.getAttribute("rel")===(i.rel==null?null:i.rel)&&b.getAttribute("title")===(i.title==null?null:i.title)&&b.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){M.splice(k,1);break t}}b=y.createElement(u),tn(b,u,i),y.head.appendChild(b);break;case"meta":if(M=o0("meta","content",y).get(u+(i.content||""))){for(k=0;k<M.length;k++)if(b=M[k],b.getAttribute("content")===(i.content==null?null:""+i.content)&&b.getAttribute("name")===(i.name==null?null:i.name)&&b.getAttribute("property")===(i.property==null?null:i.property)&&b.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&b.getAttribute("charset")===(i.charSet==null?null:i.charSet)){M.splice(k,1);break t}}b=y.createElement(u),tn(b,u,i),y.head.appendChild(b);break;default:throw Error(s(468,u))}b[mt]=n,Vt(b),u=b}n.stateNode=u}else r0(y,n.type,n.stateNode);else n.stateNode=a0(y,u,n.memoizedProps);else b!==u?(b===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):b.count--,u===null?r0(y,n.type,n.stateNode):a0(y,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Kd(n,n.memoizedProps,i.memoizedProps)}break;case 27:pn(a,n),gn(n),u&512&&(It||i===null||us(i,i.return)),i!==null&&u&4&&Kd(n,n.memoizedProps,i.memoizedProps);break;case 5:if(pn(a,n),gn(n),u&512&&(It||i===null||us(i,i.return)),n.flags&32){y=n.stateNode;try{Ro(y,"")}catch(xe){it(n,n.return,xe)}}u&4&&n.stateNode!=null&&(y=n.memoizedProps,Kd(n,y,i!==null?i.memoizedProps:y)),u&1024&&(Yd=!0);break;case 6:if(pn(a,n),gn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,i=n.stateNode;try{i.nodeValue=u}catch(xe){it(n,n.return,xe)}}break;case 3:if(Vl=null,y=Zn,Zn=Gl(a.containerInfo),pn(a,n),Zn=y,gn(n),u&4&&i!==null&&i.memoizedState.isDehydrated)try{sr(a.containerInfo)}catch(xe){it(n,n.return,xe)}Yd&&(Yd=!1,ry(n));break;case 4:u=Zn,Zn=Gl(n.stateNode.containerInfo),pn(a,n),gn(n),Zn=u;break;case 12:pn(a,n),gn(n);break;case 31:pn(a,n),gn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,jl(n,u)));break;case 13:pn(a,n),gn(n),n.child.flags&8192&&n.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(_l=Ze()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,jl(n,u)));break;case 22:y=n.memoizedState!==null;var O=i!==null&&i.memoizedState!==null,G=Us,ne=It;if(Us=G||y,It=ne||O,pn(a,n),It=ne,Us=G,gn(n),u&8192)e:for(a=n.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(i===null||O||Us||It||oo(n)),i=null,a=n;;){if(a.tag===5||a.tag===26){if(i===null){O=i=a;try{if(b=O.stateNode,y)M=b.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{k=O.stateNode;var ie=O.memoizedProps.style,F=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;k.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(xe){it(O,O.return,xe)}}}else if(a.tag===6){if(i===null){O=a;try{O.stateNode.nodeValue=y?"":O.memoizedProps}catch(xe){it(O,O.return,xe)}}}else if(a.tag===18){if(i===null){O=a;try{var Z=O.stateNode;y?Yy(Z,!0):Yy(O.stateNode,!1)}catch(xe){it(O,O.return,xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=n.updateQueue,u!==null&&(i=u.retryQueue,i!==null&&(u.retryQueue=null,jl(n,i))));break;case 19:pn(a,n),gn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,jl(n,u)));break;case 30:break;case 21:break;default:pn(a,n),gn(n)}}function gn(n){var a=n.flags;if(a&2){try{for(var i,u=n.return;u!==null;){if(Wm(u)){i=u;break}u=u.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var y=i.stateNode,b=Vd(n);kl(n,b,y);break;case 5:var M=i.stateNode;i.flags&32&&(Ro(M,""),i.flags&=-33);var k=Vd(n);kl(n,k,M);break;case 3:case 4:var O=i.stateNode.containerInfo,G=Vd(n);Fd(n,G,O);break;default:throw Error(s(161))}}catch(ne){it(n,n.return,ne)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function ry(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;ry(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function $s(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ey(n,a.alternate,a),a=a.sibling}function oo(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:ma(4,a,a.return),oo(a);break;case 1:us(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&Ym(a,a.return,i),oo(a);break;case 27:ui(a.stateNode);case 26:case 5:us(a,a.return),oo(a);break;case 22:a.memoizedState===null&&oo(a);break;case 30:oo(a);break;default:oo(a)}n=n.sibling}}function Qs(n,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,y=n,b=a,M=b.flags;switch(b.tag){case 0:case 11:case 15:Qs(y,b,i),ei(4,b);break;case 1:if(Qs(y,b,i),u=b,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(G){it(u,u.return,G)}if(u=b,y=u.updateQueue,y!==null){var k=u.stateNode;try{var O=y.shared.hiddenCallbacks;if(O!==null)for(y.shared.hiddenCallbacks=null,y=0;y<O.length;y++)Pg(O[y],k)}catch(G){it(u,u.return,G)}}i&&M&64&&Fm(b),ti(b,b.return);break;case 27:Zm(b);case 26:case 5:Qs(y,b,i),i&&u===null&&M&4&&Xm(b),ti(b,b.return);break;case 12:Qs(y,b,i);break;case 31:Qs(y,b,i),i&&M&4&&sy(y,b);break;case 13:Qs(y,b,i),i&&M&4&&ay(y,b);break;case 22:b.memoizedState===null&&Qs(y,b,i),ti(b,b.return);break;case 30:break;default:Qs(y,b,i)}a=a.sibling}}function Xd(n,a){var i=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==i&&(n!=null&&n.refCount++,i!=null&&Ur(i))}function Wd(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Ur(n))}function Jn(n,a,i,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)iy(n,a,i,u),a=a.sibling}function iy(n,a,i,u){var y=a.flags;switch(a.tag){case 0:case 11:case 15:Jn(n,a,i,u),y&2048&&ei(9,a);break;case 1:Jn(n,a,i,u);break;case 3:Jn(n,a,i,u),y&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Ur(n)));break;case 12:if(y&2048){Jn(n,a,i,u),n=a.stateNode;try{var b=a.memoizedProps,M=b.id,k=b.onPostCommit;typeof k=="function"&&k(M,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){it(a,a.return,O)}}else Jn(n,a,i,u);break;case 31:Jn(n,a,i,u);break;case 13:Jn(n,a,i,u);break;case 23:break;case 22:b=a.stateNode,M=a.alternate,a.memoizedState!==null?b._visibility&2?Jn(n,a,i,u):ni(n,a):b._visibility&2?Jn(n,a,i,u):(b._visibility|=2,Ko(n,a,i,u,(a.subtreeFlags&10256)!==0||!1)),y&2048&&Xd(M,a);break;case 24:Jn(n,a,i,u),y&2048&&Wd(a.alternate,a);break;default:Jn(n,a,i,u)}}function Ko(n,a,i,u,y){for(y=y&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=n,M=a,k=i,O=u,G=M.flags;switch(M.tag){case 0:case 11:case 15:Ko(b,M,k,O,y),ei(8,M);break;case 23:break;case 22:var ne=M.stateNode;M.memoizedState!==null?ne._visibility&2?Ko(b,M,k,O,y):ni(b,M):(ne._visibility|=2,Ko(b,M,k,O,y)),y&&G&2048&&Xd(M.alternate,M);break;case 24:Ko(b,M,k,O,y),y&&G&2048&&Wd(M.alternate,M);break;default:Ko(b,M,k,O,y)}a=a.sibling}}function ni(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=n,u=a,y=u.flags;switch(u.tag){case 22:ni(i,u),y&2048&&Xd(u.alternate,u);break;case 24:ni(i,u),y&2048&&Wd(u.alternate,u);break;default:ni(i,u)}a=a.sibling}}var si=8192;function Vo(n,a,i){if(n.subtreeFlags&si)for(n=n.child;n!==null;)ly(n,a,i),n=n.sibling}function ly(n,a,i){switch(n.tag){case 26:Vo(n,a,i),n.flags&si&&n.memoizedState!==null&&BM(i,Zn,n.memoizedState,n.memoizedProps);break;case 5:Vo(n,a,i);break;case 3:case 4:var u=Zn;Zn=Gl(n.stateNode.containerInfo),Vo(n,a,i),Zn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=si,si=16777216,Vo(n,a,i),si=u):Vo(n,a,i));break;default:Vo(n,a,i)}}function cy(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function ai(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var u=a[i];Ft=u,dy(u,n)}cy(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)uy(n),n=n.sibling}function uy(n){switch(n.tag){case 0:case 11:case 15:ai(n),n.flags&2048&&ma(9,n,n.return);break;case 3:ai(n);break;case 12:ai(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,Dl(n)):ai(n);break;default:ai(n)}}function Dl(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var u=a[i];Ft=u,dy(u,n)}cy(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:ma(8,a,a.return),Dl(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,Dl(a));break;default:Dl(a)}n=n.sibling}}function dy(n,a){for(;Ft!==null;){var i=Ft;switch(i.tag){case 0:case 11:case 15:ma(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var u=i.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ur(i.memoizedState.cache)}if(u=i.child,u!==null)u.return=i,Ft=u;else e:for(i=n;Ft!==null;){u=Ft;var y=u.sibling,b=u.return;if(ty(u),u===i){Ft=null;break e}if(y!==null){y.return=b,Ft=y;break e}Ft=b}}}var sM={getCacheForType:function(n){var a=Jt(Ot),i=a.data.get(n);return i===void 0&&(i=n(),a.data.set(n,i)),i},cacheSignal:function(){return Jt(Ot).controller.signal}},aM=typeof WeakMap=="function"?WeakMap:Map,tt=0,ft=null,Qe=null,Ke=0,rt=0,Mn=null,ya=!1,Fo=!1,Zd=!1,Gs=0,Mt=0,va=0,ro=0,Jd=0,En=0,Yo=0,oi=null,mn=null,ef=!1,_l=0,fy=0,zl=1/0,Ol=null,ba=null,Ut=0,xa=null,Xo=null,Ks=0,tf=0,nf=null,hy=null,ri=0,sf=null;function Rn(){return(tt&2)!==0&&Ke!==0?Ke&-Ke:z.T!==null?uf():ln()}function py(){if(En===0)if((Ke&536870912)===0||Xe){var n=Ba;Ba<<=1,(Ba&3932160)===0&&(Ba=262144),En=n}else En=536870912;return n=Cn.current,n!==null&&(n.flags|=32),En}function yn(n,a,i){(n===ft&&(rt===2||rt===9)||n.cancelPendingCommit!==null)&&(Wo(n,0),wa(n,Ke,En,!1)),be(n,i),((tt&2)===0||n!==ft)&&(n===ft&&((tt&2)===0&&(ro|=i),Mt===4&&wa(n,Ke,En,!1)),ds(n))}function gy(n,a,i){if((tt&6)!==0)throw Error(s(327));var u=!i&&(a&127)===0&&(a&n.expiredLanes)===0||Ts(n,a),y=u?iM(n,a):of(n,a,!0),b=u;do{if(y===0){Fo&&!u&&wa(n,a,0,!1);break}else{if(i=n.current.alternate,b&&!oM(i)){y=of(n,a,!1),b=!1;continue}if(y===2){if(b=a,n.errorRecoveryDisabledLanes&b)var M=0;else M=n.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){a=M;e:{var k=n;y=oi;var O=k.current.memoizedState.isDehydrated;if(O&&(Wo(k,M).flags|=256),M=of(k,M,!1),M!==2){if(Zd&&!O){k.errorRecoveryDisabledLanes|=b,ro|=b,y=4;break e}b=mn,mn=y,b!==null&&(mn===null?mn=b:mn.push.apply(mn,b))}y=M}if(b=!1,y!==2)continue}}if(y===1){Wo(n,0),wa(n,a,0,!0);break}e:{switch(u=n,b=y,b){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:wa(u,a,En,!ya);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(y=_l+300-Ze(),10<y)){if(wa(u,a,En,!ya),As(u,0,!0)!==0)break e;Ks=a,u.timeoutHandle=Ky(my.bind(null,u,i,mn,Ol,ef,a,En,ro,Yo,ya,b,"Throttled",-0,0),y);break e}my(u,i,mn,Ol,ef,a,En,ro,Yo,ya,b,null,-0,0)}}break}while(!0);ds(n)}function my(n,a,i,u,y,b,M,k,O,G,ne,ie,F,Z){if(n.timeoutHandle=-1,ie=a.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:js},ly(a,b,ie);var xe=(b&62914560)===b?_l-Ze():(b&4194048)===b?fy-Ze():0;if(xe=$M(ie,xe),xe!==null){Ks=b,n.cancelPendingCommit=xe(My.bind(null,n,a,b,i,u,y,M,k,O,ne,ie,null,F,Z)),wa(n,b,M,!G);return}}My(n,a,b,i,u,y,M,k,O)}function oM(n){for(var a=n;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var u=0;u<i.length;u++){var y=i[u],b=y.getSnapshot;y=y.value;try{if(!xn(b(),y))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function wa(n,a,i,u){a&=~Jd,a&=~ro,n.suspendedLanes|=a,n.pingedLanes&=~a,u&&(n.warmLanes|=a),u=n.expirationTimes;for(var y=a;0<y;){var b=31-_t(y),M=1<<b;u[b]=-1,y&=~M}i!==0&&Oe(n,i,a)}function Ll(){return(tt&6)===0?(ii(0),!1):!0}function af(){if(Qe!==null){if(rt===0)var n=Qe.return;else n=Qe,Os=Wa=null,xd(n),Uo=null,$r=0,n=Qe;for(;n!==null;)Vm(n.alternate,n),n=n.return;Qe=null}}function Wo(n,a){var i=n.timeoutHandle;i!==-1&&(n.timeoutHandle=-1,EM(i)),i=n.cancelPendingCommit,i!==null&&(n.cancelPendingCommit=null,i()),Ks=0,af(),ft=n,Qe=i=_s(n.current,null),Ke=a,rt=0,Mn=null,ya=!1,Fo=Ts(n,a),Zd=!1,Yo=En=Jd=ro=va=Mt=0,mn=oi=null,ef=!1,(a&8)!==0&&(a|=a&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=a;0<u;){var y=31-_t(u),b=1<<y;a|=n[y],u&=~b}return Gs=a,sl(),i}function yy(n,a){Le=null,z.H=Wr,a===Ho||a===dl?(a=_g(),rt=3):a===ld?(a=_g(),rt=4):rt=a===Ld?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Mn=a,Qe===null&&(Mt=1,El(n,Ln(a,n.current)))}function vy(){var n=Cn.current;return n===null?!0:(Ke&4194048)===Ke?Hn===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?n===Hn:!1}function by(){var n=z.H;return z.H=Wr,n===null?Wr:n}function xy(){var n=z.A;return z.A=sM,n}function Pl(){Mt=4,ya||(Ke&4194048)!==Ke&&Cn.current!==null||(Fo=!0),(va&134217727)===0&&(ro&134217727)===0||ft===null||wa(ft,Ke,En,!1)}function of(n,a,i){var u=tt;tt|=2;var y=by(),b=xy();(ft!==n||Ke!==a)&&(Ol=null,Wo(n,a)),a=!1;var M=Mt;e:do try{if(rt!==0&&Qe!==null){var k=Qe,O=Mn;switch(rt){case 8:af(),M=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(a=!0);var G=rt;if(rt=0,Mn=null,Zo(n,k,O,G),i&&Fo){M=0;break e}break;default:G=rt,rt=0,Mn=null,Zo(n,k,O,G)}}rM(),M=Mt;break}catch(ne){yy(n,ne)}while(!0);return a&&n.shellSuspendCounter++,Os=Wa=null,tt=u,z.H=y,z.A=b,Qe===null&&(ft=null,Ke=0,sl()),M}function rM(){for(;Qe!==null;)wy(Qe)}function iM(n,a){var i=tt;tt|=2;var u=by(),y=xy();ft!==n||Ke!==a?(Ol=null,zl=Ze()+500,Wo(n,a)):Fo=Ts(n,a);e:do try{if(rt!==0&&Qe!==null){a=Qe;var b=Mn;t:switch(rt){case 1:rt=0,Mn=null,Zo(n,a,b,1);break;case 2:case 9:if(jg(b)){rt=0,Mn=null,Cy(a);break}a=function(){rt!==2&&rt!==9||ft!==n||(rt=7),ds(n)},b.then(a,a);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:jg(b)?(rt=0,Mn=null,Cy(a)):(rt=0,Mn=null,Zo(n,a,b,7));break;case 5:var M=null;switch(Qe.tag){case 26:M=Qe.memoizedState;case 5:case 27:var k=Qe;if(M?i0(M):k.stateNode.complete){rt=0,Mn=null;var O=k.sibling;if(O!==null)Qe=O;else{var G=k.return;G!==null?(Qe=G,Il(G)):Qe=null}break t}}rt=0,Mn=null,Zo(n,a,b,5);break;case 6:rt=0,Mn=null,Zo(n,a,b,6);break;case 8:af(),Mt=6;break e;default:throw Error(s(462))}}lM();break}catch(ne){yy(n,ne)}while(!0);return Os=Wa=null,z.H=u,z.A=y,tt=i,Qe!==null?0:(ft=null,Ke=0,sl(),Mt)}function lM(){for(;Qe!==null&&!pt();)wy(Qe)}function wy(n){var a=Gm(n.alternate,n,Gs);n.memoizedProps=n.pendingProps,a===null?Il(n):Qe=a}function Cy(n){var a=n,i=a.alternate;switch(a.tag){case 15:case 0:a=qm(i,a,a.pendingProps,a.type,void 0,Ke);break;case 11:a=qm(i,a,a.pendingProps,a.type.render,a.ref,Ke);break;case 5:xd(a);default:Vm(i,a),a=Qe=xg(a,Gs),a=Gm(i,a,Gs)}n.memoizedProps=n.pendingProps,a===null?Il(n):Qe=a}function Zo(n,a,i,u){Os=Wa=null,xd(a),Uo=null,$r=0;var y=a.return;try{if(XS(n,y,a,i,Ke)){Mt=1,El(n,Ln(i,n.current)),Qe=null;return}}catch(b){if(y!==null)throw Qe=y,b;Mt=1,El(n,Ln(i,n.current)),Qe=null;return}a.flags&32768?(Xe||u===1?n=!0:Fo||(Ke&536870912)!==0?n=!1:(ya=n=!0,(u===2||u===9||u===3||u===6)&&(u=Cn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Sy(a,n)):Il(a)}function Il(n){var a=n;do{if((a.flags&32768)!==0){Sy(a,ya);return}n=a.return;var i=JS(a.alternate,a,Gs);if(i!==null){Qe=i;return}if(a=a.sibling,a!==null){Qe=a;return}Qe=a=n}while(a!==null);Mt===0&&(Mt=5)}function Sy(n,a){do{var i=eM(n.alternate,n);if(i!==null){i.flags&=32767,Qe=i;return}if(i=n.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(n=n.sibling,n!==null)){Qe=n;return}Qe=n=i}while(n!==null);Mt=6,Qe=null}function My(n,a,i,u,y,b,M,k,O){n.cancelPendingCommit=null;do ql();while(Ut!==0);if((tt&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(b=a.lanes|a.childLanes,b|=Vu,_e(n,i,b,M,k,O),n===ft&&(Qe=ft=null,Ke=0),Xo=a,xa=n,Ks=i,tf=b,nf=y,hy=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,fM(Yt,function(){return Ty(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=z.T,z.T=null,y=D.p,D.p=2,M=tt,tt|=4;try{tM(n,a,i)}finally{tt=M,D.p=y,z.T=u}}Ut=1,Ey(),Ry(),Ny()}}function Ey(){if(Ut===1){Ut=0;var n=xa,a=Xo,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=z.T,z.T=null;var u=D.p;D.p=2;var y=tt;tt|=4;try{oy(a,n);var b=vf,M=dg(n.containerInfo),k=b.focusedElem,O=b.selectionRange;if(M!==k&&k&&k.ownerDocument&&ug(k.ownerDocument.documentElement,k)){if(O!==null&&Bu(k)){var G=O.start,ne=O.end;if(ne===void 0&&(ne=G),"selectionStart"in k)k.selectionStart=G,k.selectionEnd=Math.min(ne,k.value.length);else{var ie=k.ownerDocument||document,F=ie&&ie.defaultView||window;if(F.getSelection){var Z=F.getSelection(),xe=k.textContent.length,ke=Math.min(O.start,xe),dt=O.end===void 0?ke:Math.min(O.end,xe);!Z.extend&&ke>dt&&(M=dt,dt=ke,ke=M);var U=cg(k,ke),I=cg(k,dt);if(U&&I&&(Z.rangeCount!==1||Z.anchorNode!==U.node||Z.anchorOffset!==U.offset||Z.focusNode!==I.node||Z.focusOffset!==I.offset)){var Q=ie.createRange();Q.setStart(U.node,U.offset),Z.removeAllRanges(),ke>dt?(Z.addRange(Q),Z.extend(I.node,I.offset)):(Q.setEnd(I.node,I.offset),Z.addRange(Q))}}}}for(ie=[],Z=k;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ie.length;k++){var re=ie[k];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Wl=!!yf,vf=yf=null}finally{tt=y,D.p=u,z.T=i}}n.current=a,Ut=2}}function Ry(){if(Ut===2){Ut=0;var n=xa,a=Xo,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=z.T,z.T=null;var u=D.p;D.p=2;var y=tt;tt|=4;try{ey(n,a.alternate,a)}finally{tt=y,D.p=u,z.T=i}}Ut=3}}function Ny(){if(Ut===4||Ut===3){Ut=0,qt();var n=xa,a=Xo,i=Ks,u=hy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ut=5:(Ut=0,Xo=xa=null,Ay(n,n.pendingLanes));var y=n.pendingLanes;if(y===0&&(ba=null),Rt(i),a=a.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(rs,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=z.T,y=D.p,D.p=2,z.T=null;try{for(var b=n.onRecoverableError,M=0;M<u.length;M++){var k=u[M];b(k.value,{componentStack:k.stack})}}finally{z.T=a,D.p=y}}(Ks&3)!==0&&ql(),ds(n),y=n.pendingLanes,(i&261930)!==0&&(y&42)!==0?n===sf?ri++:(ri=0,sf=n):ri=0,ii(0)}}function Ay(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,Ur(a)))}function ql(){return Ey(),Ry(),Ny(),Ty()}function Ty(){if(Ut!==5)return!1;var n=xa,a=tf;tf=0;var i=Rt(Ks),u=z.T,y=D.p;try{D.p=32>i?32:i,z.T=null,i=nf,nf=null;var b=xa,M=Ks;if(Ut=0,Xo=xa=null,Ks=0,(tt&6)!==0)throw Error(s(331));var k=tt;if(tt|=4,uy(b.current),iy(b,b.current,M,i),tt=k,ii(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(rs,b)}catch{}return!0}finally{D.p=y,z.T=u,Ay(n,a)}}function ky(n,a,i){a=Ln(i,a),a=Od(n.stateNode,a,2),n=ha(n,a,2),n!==null&&(be(n,2),ds(n))}function it(n,a,i){if(n.tag===3)ky(n,n,i);else for(;a!==null;){if(a.tag===3){ky(a,n,i);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ba===null||!ba.has(u))){n=Ln(i,n),i=jm(2),u=ha(a,i,2),u!==null&&(Dm(i,u,a,n),be(u,2),ds(u));break}}a=a.return}}function rf(n,a,i){var u=n.pingCache;if(u===null){u=n.pingCache=new aM;var y=new Set;u.set(a,y)}else y=u.get(a),y===void 0&&(y=new Set,u.set(a,y));y.has(i)||(Zd=!0,y.add(i),n=cM.bind(null,n,a,i),a.then(n,n))}function cM(n,a,i){var u=n.pingCache;u!==null&&u.delete(a),n.pingedLanes|=n.suspendedLanes&i,n.warmLanes&=~i,ft===n&&(Ke&i)===i&&(Mt===4||Mt===3&&(Ke&62914560)===Ke&&300>Ze()-_l?(tt&2)===0&&Wo(n,0):Jd|=i,Yo===Ke&&(Yo=0)),ds(n)}function jy(n,a){a===0&&(a=J()),n=Fa(n,a),n!==null&&(be(n,a),ds(n))}function uM(n){var a=n.memoizedState,i=0;a!==null&&(i=a.retryLane),jy(n,i)}function dM(n,a){var i=0;switch(n.tag){case 31:case 13:var u=n.stateNode,y=n.memoizedState;y!==null&&(i=y.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),jy(n,i)}function fM(n,a){return Be(n,a)}var Hl=null,Jo=null,lf=!1,Ul=!1,cf=!1,Ca=0;function ds(n){n!==Jo&&n.next===null&&(Jo===null?Hl=Jo=n:Jo=Jo.next=n),Ul=!0,lf||(lf=!0,pM())}function ii(n,a){if(!cf&&Ul){cf=!0;do for(var i=!1,u=Hl;u!==null;){if(n!==0){var y=u.pendingLanes;if(y===0)var b=0;else{var M=u.suspendedLanes,k=u.pingedLanes;b=(1<<31-_t(42|n)+1)-1,b&=y&~(M&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(i=!0,Oy(u,b))}else b=Ke,b=As(u,u===ft?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(b&3)===0||Ts(u,b)||(i=!0,Oy(u,b));u=u.next}while(i);cf=!1}}function hM(){Dy()}function Dy(){Ul=lf=!1;var n=0;Ca!==0&&MM()&&(n=Ca);for(var a=Ze(),i=null,u=Hl;u!==null;){var y=u.next,b=_y(u,a);b===0?(u.next=null,i===null?Hl=y:i.next=y,y===null&&(Jo=i)):(i=u,(n!==0||(b&3)!==0)&&(Ul=!0)),u=y}Ut!==0&&Ut!==5||ii(n),Ca!==0&&(Ca=0)}function _y(n,a){for(var i=n.suspendedLanes,u=n.pingedLanes,y=n.expirationTimes,b=n.pendingLanes&-62914561;0<b;){var M=31-_t(b),k=1<<M,O=y[M];O===-1?((k&i)===0||(k&u)!==0)&&(y[M]=Mu(k,a)):O<=a&&(n.expiredLanes|=k),b&=~k}if(a=ft,i=Ke,i=As(n,n===a?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,i===0||n===a&&(rt===2||rt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&yt(u),n.callbackNode=null,n.callbackPriority=0;if((i&3)===0||Ts(n,i)){if(a=i&-i,a===n.callbackPriority)return a;switch(u!==null&&yt(u),Rt(i)){case 2:case 8:i=gt;break;case 32:i=Yt;break;case 268435456:i=Rs;break;default:i=Yt}return u=zy.bind(null,n),i=Be(i,u),n.callbackPriority=a,n.callbackNode=i,a}return u!==null&&u!==null&&yt(u),n.callbackPriority=2,n.callbackNode=null,2}function zy(n,a){if(Ut!==0&&Ut!==5)return n.callbackNode=null,n.callbackPriority=0,null;var i=n.callbackNode;if(ql()&&n.callbackNode!==i)return null;var u=Ke;return u=As(n,n===ft?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(gy(n,u,a),_y(n,Ze()),n.callbackNode!=null&&n.callbackNode===i?zy.bind(null,n):null)}function Oy(n,a){if(ql())return null;gy(n,a,!0)}function pM(){RM(function(){(tt&6)!==0?Be(vt,hM):Dy()})}function uf(){if(Ca===0){var n=Io;n===0&&(n=Ns,Ns<<=1,(Ns&261888)===0&&(Ns=256)),Ca=n}return Ca}function Ly(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Yi(""+n)}function Py(n,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,n.id&&i.setAttribute("form",n.id),a.parentNode.insertBefore(i,a),n=new FormData(n),i.parentNode.removeChild(i),n}function gM(n,a,i,u,y){if(a==="submit"&&i&&i.stateNode===y){var b=Ly((y[Ht]||null).action),M=u.submitter;M&&(a=(a=M[Ht]||null)?Ly(a.formAction):M.getAttribute("formAction"),a!==null&&(b=a,M=null));var k=new Ji("action","action",null,u,y);n.push({event:k,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ca!==0){var O=M?Py(y,M):new FormData(y);Td(i,{pending:!0,data:O,method:y.method,action:b},null,O)}}else typeof b=="function"&&(k.preventDefault(),O=M?Py(y,M):new FormData(y),Td(i,{pending:!0,data:O,method:y.method,action:b},b,O))},currentTarget:y}]})}}for(var df=0;df<Ku.length;df++){var ff=Ku[df],mM=ff.toLowerCase(),yM=ff[0].toUpperCase()+ff.slice(1);Wn(mM,"on"+yM)}Wn(pg,"onAnimationEnd"),Wn(gg,"onAnimationIteration"),Wn(mg,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(_S,"onTransitionRun"),Wn(zS,"onTransitionStart"),Wn(OS,"onTransitionCancel"),Wn(yg,"onTransitionEnd"),Mo("onMouseEnter",["mouseout","mouseover"]),Mo("onMouseLeave",["mouseout","mouseover"]),Mo("onPointerEnter",["pointerout","pointerover"]),Mo("onPointerLeave",["pointerout","pointerover"]),Qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(li));function Iy(n,a){a=(a&4)!==0;for(var i=0;i<n.length;i++){var u=n[i],y=u.event;u=u.listeners;e:{var b=void 0;if(a)for(var M=u.length-1;0<=M;M--){var k=u[M],O=k.instance,G=k.currentTarget;if(k=k.listener,O!==b&&y.isPropagationStopped())break e;b=k,y.currentTarget=G;try{b(y)}catch(ne){nl(ne)}y.currentTarget=null,b=O}else for(M=0;M<u.length;M++){if(k=u[M],O=k.instance,G=k.currentTarget,k=k.listener,O!==b&&y.isPropagationStopped())break e;b=k,y.currentTarget=G;try{b(y)}catch(ne){nl(ne)}y.currentTarget=null,b=O}}}}function Ge(n,a){var i=a[$e];i===void 0&&(i=a[$e]=new Set);var u=n+"__bubble";i.has(u)||(qy(a,n,2,!1),i.add(u))}function hf(n,a,i){var u=0;a&&(u|=4),qy(i,n,u,a)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function pf(n){if(!n[Bl]){n[Bl]=!0,Dp.forEach(function(i){i!=="selectionchange"&&(vM.has(i)||hf(i,!1,n),hf(i,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Bl]||(a[Bl]=!0,hf("selectionchange",!1,a))}}function qy(n,a,i,u){switch(p0(a)){case 2:var y=KM;break;case 8:y=VM;break;default:y=Tf}i=y.bind(null,a,i,n),y=void 0,!_u||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),u?y!==void 0?n.addEventListener(a,i,{capture:!0,passive:y}):n.addEventListener(a,i,!0):y!==void 0?n.addEventListener(a,i,{passive:y}):n.addEventListener(a,i,!1)}function gf(n,a,i,u,y){var b=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var M=u.tag;if(M===3||M===4){var k=u.stateNode.containerInfo;if(k===y)break;if(M===4)for(M=u.return;M!==null;){var O=M.tag;if((O===3||O===4)&&M.stateNode.containerInfo===y)return;M=M.return}for(;k!==null;){if(M=wo(k),M===null)return;if(O=M.tag,O===5||O===6||O===26||O===27){u=b=M;continue e}k=k.parentNode}}u=u.return}Qp(function(){var G=b,ne=ju(i),ie=[];e:{var F=vg.get(n);if(F!==void 0){var Z=Ji,xe=n;switch(n){case"keypress":if(Wi(i)===0)break e;case"keydown":case"keyup":Z=dS;break;case"focusin":xe="focus",Z=Pu;break;case"focusout":xe="blur",Z=Pu;break;case"beforeblur":case"afterblur":Z=Pu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Vp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=JC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=pS;break;case pg:case gg:case mg:Z=nS;break;case yg:Z=mS;break;case"scroll":case"scrollend":Z=WC;break;case"wheel":Z=vS;break;case"copy":case"cut":case"paste":Z=aS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Yp;break;case"toggle":case"beforetoggle":Z=xS}var ke=(a&4)!==0,dt=!ke&&(n==="scroll"||n==="scrollend"),U=ke?F!==null?F+"Capture":null:F;ke=[];for(var I=G,Q;I!==null;){var re=I;if(Q=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Q===null||U===null||(re=kr(I,U),re!=null&&ke.push(ci(I,re,Q))),dt)break;I=I.return}0<ke.length&&(F=new Z(F,xe,null,i,ne),ie.push({event:F,listeners:ke}))}}if((a&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",Z=n==="mouseout"||n==="pointerout",F&&i!==ku&&(xe=i.relatedTarget||i.fromElement)&&(wo(xe)||xe[is]))break e;if((Z||F)&&(F=ne.window===ne?ne:(F=ne.ownerDocument)?F.defaultView||F.parentWindow:window,Z?(xe=i.relatedTarget||i.toElement,Z=G,xe=xe?wo(xe):null,xe!==null&&(dt=l(xe),ke=xe.tag,xe!==dt||ke!==5&&ke!==27&&ke!==6)&&(xe=null)):(Z=null,xe=G),Z!==xe)){if(ke=Vp,re="onMouseLeave",U="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(ke=Yp,re="onPointerLeave",U="onPointerEnter",I="pointer"),dt=Z==null?F:Tr(Z),Q=xe==null?F:Tr(xe),F=new ke(re,I+"leave",Z,i,ne),F.target=dt,F.relatedTarget=Q,re=null,wo(ne)===G&&(ke=new ke(U,I+"enter",xe,i,ne),ke.target=Q,ke.relatedTarget=dt,re=ke),dt=re,Z&&xe)t:{for(ke=bM,U=Z,I=xe,Q=0,re=U;re;re=ke(re))Q++;re=0;for(var Ne=I;Ne;Ne=ke(Ne))re++;for(;0<Q-re;)U=ke(U),Q--;for(;0<re-Q;)I=ke(I),re--;for(;Q--;){if(U===I||I!==null&&U===I.alternate){ke=U;break t}U=ke(U),I=ke(I)}ke=null}else ke=null;Z!==null&&Hy(ie,F,Z,ke,!1),xe!==null&&dt!==null&&Hy(ie,dt,xe,ke,!0)}}e:{if(F=G?Tr(G):window,Z=F.nodeName&&F.nodeName.toLowerCase(),Z==="select"||Z==="input"&&F.type==="file")var Je=sg;else if(tg(F))if(ag)Je=kS;else{Je=AS;var Me=NS}else Z=F.nodeName,!Z||Z.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?G&&Tu(G.elementType)&&(Je=sg):Je=TS;if(Je&&(Je=Je(n,G))){ng(ie,Je,i,ne);break e}Me&&Me(n,F,G),n==="focusout"&&G&&F.type==="number"&&G.memoizedProps.value!=null&&Au(F,"number",F.value)}switch(Me=G?Tr(G):window,n){case"focusin":(tg(Me)||Me.contentEditable==="true")&&(ko=Me,$u=G,Ir=null);break;case"focusout":Ir=$u=ko=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,fg(ie,i,ne);break;case"selectionchange":if(DS)break;case"keydown":case"keyup":fg(ie,i,ne)}var Ie;if(qu)e:{switch(n){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else To?Jp(n,i)&&(Ve="onCompositionEnd"):n==="keydown"&&i.keyCode===229&&(Ve="onCompositionStart");Ve&&(Xp&&i.locale!=="ko"&&(To||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&To&&(Ie=Gp()):(ra=ne,zu="value"in ra?ra.value:ra.textContent,To=!0)),Me=$l(G,Ve),0<Me.length&&(Ve=new Fp(Ve,n,null,i,ne),ie.push({event:Ve,listeners:Me}),Ie?Ve.data=Ie:(Ie=eg(i),Ie!==null&&(Ve.data=Ie)))),(Ie=CS?SS(n,i):MS(n,i))&&(Ve=$l(G,"onBeforeInput"),0<Ve.length&&(Me=new Fp("onBeforeInput","beforeinput",null,i,ne),ie.push({event:Me,listeners:Ve}),Me.data=Ie)),gM(ie,n,G,i,ne)}Iy(ie,a)})}function ci(n,a,i){return{instance:n,listener:a,currentTarget:i}}function $l(n,a){for(var i=a+"Capture",u=[];n!==null;){var y=n,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=kr(n,i),y!=null&&u.unshift(ci(n,y,b)),y=kr(n,a),y!=null&&u.push(ci(n,y,b))),n.tag===3)return u;n=n.return}return[]}function bM(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Hy(n,a,i,u,y){for(var b=a._reactName,M=[];i!==null&&i!==u;){var k=i,O=k.alternate,G=k.stateNode;if(k=k.tag,O!==null&&O===u)break;k!==5&&k!==26&&k!==27||G===null||(O=G,y?(G=kr(i,b),G!=null&&M.unshift(ci(i,G,O))):y||(G=kr(i,b),G!=null&&M.push(ci(i,G,O)))),i=i.return}M.length!==0&&n.push({event:a,listeners:M})}var xM=/\r\n?/g,wM=/\u0000|\uFFFD/g;function Uy(n){return(typeof n=="string"?n:""+n).replace(xM,`
`).replace(wM,"")}function By(n,a){return a=Uy(a),Uy(n)===a}function ut(n,a,i,u,y,b){switch(i){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Ro(n,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Ro(n,""+u);break;case"className":Vi(n,"class",u);break;case"tabIndex":Vi(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Vi(n,i,u);break;case"style":Bp(n,u,b);break;case"data":if(a!=="object"){Vi(n,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||i!=="href")){n.removeAttribute(i);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(i);break}u=Yi(""+u),n.setAttribute(i,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(i==="formAction"?(a!=="input"&&ut(n,a,"name",y.name,y,null),ut(n,a,"formEncType",y.formEncType,y,null),ut(n,a,"formMethod",y.formMethod,y,null),ut(n,a,"formTarget",y.formTarget,y,null)):(ut(n,a,"encType",y.encType,y,null),ut(n,a,"method",y.method,y,null),ut(n,a,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(i);break}u=Yi(""+u),n.setAttribute(i,u);break;case"onClick":u!=null&&(n.onclick=js);break;case"onScroll":u!=null&&Ge("scroll",n);break;case"onScrollEnd":u!=null&&Ge("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(i=u.__html,i!=null){if(y.children!=null)throw Error(s(60));n.innerHTML=i}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}i=Yi(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(i,""+u):n.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(i,""):n.removeAttribute(i);break;case"capture":case"download":u===!0?n.setAttribute(i,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(i,u):n.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(i,u):n.removeAttribute(i);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(i):n.setAttribute(i,u);break;case"popover":Ge("beforetoggle",n),Ge("toggle",n),Ki(n,"popover",u);break;case"xlinkActuate":ks(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ks(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ks(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ks(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ks(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ks(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ks(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ks(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ks(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ki(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=YC.get(i)||i,Ki(n,i,u))}}function mf(n,a,i,u,y,b){switch(i){case"style":Bp(n,u,b);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(i=u.__html,i!=null){if(y.children!=null)throw Error(s(60));n.innerHTML=i}}break;case"children":typeof u=="string"?Ro(n,u):(typeof u=="number"||typeof u=="bigint")&&Ro(n,""+u);break;case"onScroll":u!=null&&Ge("scroll",n);break;case"onScrollEnd":u!=null&&Ge("scrollend",n);break;case"onClick":u!=null&&(n.onclick=js);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_p.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(y=i.endsWith("Capture"),a=i.slice(2,y?i.length-7:void 0),b=n[Ht]||null,b=b!=null?b[i]:null,typeof b=="function"&&n.removeEventListener(a,b,y),typeof u=="function")){typeof b!="function"&&b!==null&&(i in n?n[i]=null:n.hasAttribute(i)&&n.removeAttribute(i)),n.addEventListener(a,u,y);break e}i in n?n[i]=u:u===!0?n.setAttribute(i,""):Ki(n,i,u)}}}function tn(n,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",n),Ge("load",n);var u=!1,y=!1,b;for(b in i)if(i.hasOwnProperty(b)){var M=i[b];if(M!=null)switch(b){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:ut(n,a,b,M,i,null)}}y&&ut(n,a,"srcSet",i.srcSet,i,null),u&&ut(n,a,"src",i.src,i,null);return;case"input":Ge("invalid",n);var k=b=M=y=null,O=null,G=null;for(u in i)if(i.hasOwnProperty(u)){var ne=i[u];if(ne!=null)switch(u){case"name":y=ne;break;case"type":M=ne;break;case"checked":O=ne;break;case"defaultChecked":G=ne;break;case"value":b=ne;break;case"defaultValue":k=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:ut(n,a,u,ne,i,null)}}Ip(n,b,k,O,G,M,y,!1);return;case"select":Ge("invalid",n),u=M=b=null;for(y in i)if(i.hasOwnProperty(y)&&(k=i[y],k!=null))switch(y){case"value":b=k;break;case"defaultValue":M=k;break;case"multiple":u=k;default:ut(n,a,y,k,i,null)}a=b,i=M,n.multiple=!!u,a!=null?Eo(n,!!u,a,!1):i!=null&&Eo(n,!!u,i,!0);return;case"textarea":Ge("invalid",n),b=y=u=null;for(M in i)if(i.hasOwnProperty(M)&&(k=i[M],k!=null))switch(M){case"value":u=k;break;case"defaultValue":y=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:ut(n,a,M,k,i,null)}Hp(n,u,y,b);return;case"option":for(O in i)if(i.hasOwnProperty(O)&&(u=i[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ut(n,a,O,u,i,null)}return;case"dialog":Ge("beforetoggle",n),Ge("toggle",n),Ge("cancel",n),Ge("close",n);break;case"iframe":case"object":Ge("load",n);break;case"video":case"audio":for(u=0;u<li.length;u++)Ge(li[u],n);break;case"image":Ge("error",n),Ge("load",n);break;case"details":Ge("toggle",n);break;case"embed":case"source":case"link":Ge("error",n),Ge("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in i)if(i.hasOwnProperty(G)&&(u=i[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:ut(n,a,G,u,i,null)}return;default:if(Tu(a)){for(ne in i)i.hasOwnProperty(ne)&&(u=i[ne],u!==void 0&&mf(n,a,ne,u,i,void 0));return}}for(k in i)i.hasOwnProperty(k)&&(u=i[k],u!=null&&ut(n,a,k,u,i,null))}function CM(n,a,i,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,M=null,k=null,O=null,G=null,ne=null;for(Z in i){var ie=i[Z];if(i.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":O=ie;default:u.hasOwnProperty(Z)||ut(n,a,Z,null,u,ie)}}for(var F in u){var Z=u[F];if(ie=i[F],u.hasOwnProperty(F)&&(Z!=null||ie!=null))switch(F){case"type":b=Z;break;case"name":y=Z;break;case"checked":G=Z;break;case"defaultChecked":ne=Z;break;case"value":M=Z;break;case"defaultValue":k=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,a));break;default:Z!==ie&&ut(n,a,F,Z,u,ie)}}Nu(n,M,k,O,G,ne,b,y);return;case"select":Z=M=k=F=null;for(b in i)if(O=i[b],i.hasOwnProperty(b)&&O!=null)switch(b){case"value":break;case"multiple":Z=O;default:u.hasOwnProperty(b)||ut(n,a,b,null,u,O)}for(y in u)if(b=u[y],O=i[y],u.hasOwnProperty(y)&&(b!=null||O!=null))switch(y){case"value":F=b;break;case"defaultValue":k=b;break;case"multiple":M=b;default:b!==O&&ut(n,a,y,b,u,O)}a=k,i=M,u=Z,F!=null?Eo(n,!!i,F,!1):!!u!=!!i&&(a!=null?Eo(n,!!i,a,!0):Eo(n,!!i,i?[]:"",!1));return;case"textarea":Z=F=null;for(k in i)if(y=i[k],i.hasOwnProperty(k)&&y!=null&&!u.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:ut(n,a,k,null,u,y)}for(M in u)if(y=u[M],b=i[M],u.hasOwnProperty(M)&&(y!=null||b!=null))switch(M){case"value":F=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==b&&ut(n,a,M,y,u,b)}qp(n,F,Z);return;case"option":for(var xe in i)if(F=i[xe],i.hasOwnProperty(xe)&&F!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":n.selected=!1;break;default:ut(n,a,xe,null,u,F)}for(O in u)if(F=u[O],Z=i[O],u.hasOwnProperty(O)&&F!==Z&&(F!=null||Z!=null))switch(O){case"selected":n.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:ut(n,a,O,F,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in i)F=i[ke],i.hasOwnProperty(ke)&&F!=null&&!u.hasOwnProperty(ke)&&ut(n,a,ke,null,u,F);for(G in u)if(F=u[G],Z=i[G],u.hasOwnProperty(G)&&F!==Z&&(F!=null||Z!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,a));break;default:ut(n,a,G,F,u,Z)}return;default:if(Tu(a)){for(var dt in i)F=i[dt],i.hasOwnProperty(dt)&&F!==void 0&&!u.hasOwnProperty(dt)&&mf(n,a,dt,void 0,u,F);for(ne in u)F=u[ne],Z=i[ne],!u.hasOwnProperty(ne)||F===Z||F===void 0&&Z===void 0||mf(n,a,ne,F,u,Z);return}}for(var U in i)F=i[U],i.hasOwnProperty(U)&&F!=null&&!u.hasOwnProperty(U)&&ut(n,a,U,null,u,F);for(ie in u)F=u[ie],Z=i[ie],!u.hasOwnProperty(ie)||F===Z||F==null&&Z==null||ut(n,a,ie,F,u,Z)}function $y(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function SM(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,i=performance.getEntriesByType("resource"),u=0;u<i.length;u++){var y=i[u],b=y.transferSize,M=y.initiatorType,k=y.duration;if(b&&k&&$y(M)){for(M=0,k=y.responseEnd,u+=1;u<i.length;u++){var O=i[u],G=O.startTime;if(G>k)break;var ne=O.transferSize,ie=O.initiatorType;ne&&$y(ie)&&(O=O.responseEnd,M+=ne*(O<k?1:(k-G)/(O-G)))}if(--u,a+=8*(b+M)/(y.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var yf=null,vf=null;function Ql(n){return n.nodeType===9?n:n.ownerDocument}function Qy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gy(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function bf(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var xf=null;function MM(){var n=window.event;return n&&n.type==="popstate"?n===xf?!1:(xf=n,!0):(xf=null,!1)}var Ky=typeof setTimeout=="function"?setTimeout:void 0,EM=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,RM=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(n){return Vy.resolve(null).then(n).catch(NM)}:Ky;function NM(n){setTimeout(function(){throw n})}function Sa(n){return n==="head"}function Fy(n,a){var i=a,u=0;do{var y=i.nextSibling;if(n.removeChild(i),y&&y.nodeType===8)if(i=y.data,i==="/$"||i==="/&"){if(u===0){n.removeChild(y),sr(a);return}u--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")u++;else if(i==="html")ui(n.ownerDocument.documentElement);else if(i==="head"){i=n.ownerDocument.head,ui(i);for(var b=i.firstChild;b;){var M=b.nextSibling,k=b.nodeName;b[Ar]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&b.rel.toLowerCase()==="stylesheet"||i.removeChild(b),b=M}}else i==="body"&&ui(n.ownerDocument.body);i=y}while(i);sr(a)}function Yy(n,a){var i=n;n=0;do{var u=i.nextSibling;if(i.nodeType===1?a?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(a?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(n===0)break;n--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||n++;i=u}while(i)}function wf(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":wf(i),Eu(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}n.removeChild(i)}}function AM(n,a,i,u){for(;n.nodeType===1;){var y=i;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ar])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(b=n.getAttribute("rel"),b==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(b!==y.rel||n.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||n.getAttribute("title")!==(y.title==null?null:y.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(b=n.getAttribute("src"),(b!==(y.src==null?null:y.src)||n.getAttribute("type")!==(y.type==null?null:y.type)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&n.getAttribute("name")===b)return n}else return n;if(n=Un(n.nextSibling),n===null)break}return null}function TM(n,a,i){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Un(n.nextSibling),n===null))return null;return n}function Xy(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Un(n.nextSibling),n===null))return null;return n}function Cf(n){return n.data==="$?"||n.data==="$~"}function Sf(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function kM(n,a){var i=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||i.readyState!=="loading")a();else{var u=function(){a(),i.removeEventListener("DOMContentLoaded",u)};i.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Un(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var Mf=null;function Wy(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var i=n.data;if(i==="/$"||i==="/&"){if(a===0)return Un(n.nextSibling);a--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||a++}n=n.nextSibling}return null}function Zy(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var i=n.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(a===0)return n;a--}else i!=="/$"&&i!=="/&"||a++}n=n.previousSibling}return null}function Jy(n,a,i){switch(a=Ql(i),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function ui(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Eu(n)}var Bn=new Map,e0=new Set;function Gl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Vs=D.d;D.d={f:jM,r:DM,D:_M,C:zM,L:OM,m:LM,X:IM,S:PM,M:qM};function jM(){var n=Vs.f(),a=Ll();return n||a}function DM(n){var a=Co(n);a!==null&&a.tag===5&&a.type==="form"?ym(a):Vs.r(n)}var er=typeof document>"u"?null:document;function t0(n,a,i){var u=er;if(u&&typeof a=="string"&&a){var y=zn(a);y='link[rel="'+n+'"][href="'+y+'"]',typeof i=="string"&&(y+='[crossorigin="'+i+'"]'),e0.has(y)||(e0.add(y),n={rel:n,crossOrigin:i,href:a},u.querySelector(y)===null&&(a=u.createElement("link"),tn(a,"link",n),Vt(a),u.head.appendChild(a)))}}function _M(n){Vs.D(n),t0("dns-prefetch",n,null)}function zM(n,a){Vs.C(n,a),t0("preconnect",n,a)}function OM(n,a,i){Vs.L(n,a,i);var u=er;if(u&&n&&a){var y='link[rel="preload"][as="'+zn(a)+'"]';a==="image"&&i&&i.imageSrcSet?(y+='[imagesrcset="'+zn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(y+='[imagesizes="'+zn(i.imageSizes)+'"]')):y+='[href="'+zn(n)+'"]';var b=y;switch(a){case"style":b=tr(n);break;case"script":b=nr(n)}Bn.has(b)||(n=m({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:n,as:a},i),Bn.set(b,n),u.querySelector(y)!==null||a==="style"&&u.querySelector(di(b))||a==="script"&&u.querySelector(fi(b))||(a=u.createElement("link"),tn(a,"link",n),Vt(a),u.head.appendChild(a)))}}function LM(n,a){Vs.m(n,a);var i=er;if(i&&n){var u=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+zn(u)+'"][href="'+zn(n)+'"]',b=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=nr(n)}if(!Bn.has(b)&&(n=m({rel:"modulepreload",href:n},a),Bn.set(b,n),i.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(fi(b)))return}u=i.createElement("link"),tn(u,"link",n),Vt(u),i.head.appendChild(u)}}}function PM(n,a,i){Vs.S(n,a,i);var u=er;if(u&&n){var y=So(u).hoistableStyles,b=tr(n);a=a||"default";var M=y.get(b);if(!M){var k={loading:0,preload:null};if(M=u.querySelector(di(b)))k.loading=5;else{n=m({rel:"stylesheet",href:n,"data-precedence":a},i),(i=Bn.get(b))&&Ef(n,i);var O=M=u.createElement("link");Vt(O),tn(O,"link",n),O._p=new Promise(function(G,ne){O.onload=G,O.onerror=ne}),O.addEventListener("load",function(){k.loading|=1}),O.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Kl(M,a,u)}M={type:"stylesheet",instance:M,count:1,state:k},y.set(b,M)}}}function IM(n,a){Vs.X(n,a);var i=er;if(i&&n){var u=So(i).hoistableScripts,y=nr(n),b=u.get(y);b||(b=i.querySelector(fi(y)),b||(n=m({src:n,async:!0},a),(a=Bn.get(y))&&Rf(n,a),b=i.createElement("script"),Vt(b),tn(b,"link",n),i.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(y,b))}}function qM(n,a){Vs.M(n,a);var i=er;if(i&&n){var u=So(i).hoistableScripts,y=nr(n),b=u.get(y);b||(b=i.querySelector(fi(y)),b||(n=m({src:n,async:!0,type:"module"},a),(a=Bn.get(y))&&Rf(n,a),b=i.createElement("script"),Vt(b),tn(b,"link",n),i.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(y,b))}}function n0(n,a,i,u){var y=(y=oe.current)?Gl(y):null;if(!y)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=tr(i.href),i=So(y).hoistableStyles,u=i.get(a),u||(u={type:"style",instance:null,count:0,state:null},i.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){n=tr(i.href);var b=So(y).hoistableStyles,M=b.get(n);if(M||(y=y.ownerDocument||y,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(n,M),(b=y.querySelector(di(n)))&&!b._p&&(M.instance=b,M.state.loading=5),Bn.has(n)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Bn.set(n,i),b||HM(y,n,i,M.state))),a&&u===null)throw Error(s(528,""));return M}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=nr(i),i=So(y).hoistableScripts,u=i.get(a),u||(u={type:"script",instance:null,count:0,state:null},i.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function tr(n){return'href="'+zn(n)+'"'}function di(n){return'link[rel="stylesheet"]['+n+"]"}function s0(n){return m({},n,{"data-precedence":n.precedence,precedence:null})}function HM(n,a,i,u){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=n.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),tn(a,"link",i),Vt(a),n.head.appendChild(a))}function nr(n){return'[src="'+zn(n)+'"]'}function fi(n){return"script[async]"+n}function a0(n,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var u=n.querySelector('style[data-href~="'+zn(i.href)+'"]');if(u)return a.instance=u,Vt(u),u;var y=m({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Vt(u),tn(u,"style",y),Kl(u,i.precedence,n),a.instance=u;case"stylesheet":y=tr(i.href);var b=n.querySelector(di(y));if(b)return a.state.loading|=4,a.instance=b,Vt(b),b;u=s0(i),(y=Bn.get(y))&&Ef(u,y),b=(n.ownerDocument||n).createElement("link"),Vt(b);var M=b;return M._p=new Promise(function(k,O){M.onload=k,M.onerror=O}),tn(b,"link",u),a.state.loading|=4,Kl(b,i.precedence,n),a.instance=b;case"script":return b=nr(i.src),(y=n.querySelector(fi(b)))?(a.instance=y,Vt(y),y):(u=i,(y=Bn.get(b))&&(u=m({},i),Rf(u,y)),n=n.ownerDocument||n,y=n.createElement("script"),Vt(y),tn(y,"link",u),n.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Kl(u,i.precedence,n));return a.instance}function Kl(n,a,i){for(var u=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,b=y,M=0;M<u.length;M++){var k=u[M];if(k.dataset.precedence===a)b=k;else if(b!==y)break}b?b.parentNode.insertBefore(n,b.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(n,a.firstChild))}function Ef(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function Rf(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var Vl=null;function o0(n,a,i){if(Vl===null){var u=new Map,y=Vl=new Map;y.set(i,u)}else y=Vl,u=y.get(i),u||(u=new Map,y.set(i,u));if(u.has(n))return u;for(u.set(n,null),i=i.getElementsByTagName(n),y=0;y<i.length;y++){var b=i[y];if(!(b[Ar]||b[mt]||n==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var M=b.getAttribute(a)||"";M=n+M;var k=u.get(M);k?k.push(b):u.set(M,[b])}}return u}function r0(n,a,i){n=n.ownerDocument||n,n.head.insertBefore(i,a==="title"?n.querySelector("head > title"):null)}function UM(n,a,i){if(i===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function i0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function BM(n,a,i,u){if(i.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var y=tr(u.href),b=a.querySelector(di(y));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=Fl.bind(n),a.then(n,n)),i.state.loading|=4,i.instance=b,Vt(b);return}b=a.ownerDocument||a,u=s0(u),(y=Bn.get(y))&&Ef(u,y),b=b.createElement("link"),Vt(b);var M=b;M._p=new Promise(function(k,O){M.onload=k,M.onerror=O}),tn(b,"link",u),i.instance=b}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(n.count++,i=Fl.bind(n),a.addEventListener("load",i),a.addEventListener("error",i))}}var Nf=0;function $M(n,a){return n.stylesheets&&n.count===0&&Xl(n,n.stylesheets),0<n.count||0<n.imgCount?function(i){var u=setTimeout(function(){if(n.stylesheets&&Xl(n,n.stylesheets),n.unsuspend){var b=n.unsuspend;n.unsuspend=null,b()}},6e4+a);0<n.imgBytes&&Nf===0&&(Nf=62500*SM());var y=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Xl(n,n.stylesheets),n.unsuspend)){var b=n.unsuspend;n.unsuspend=null,b()}},(n.imgBytes>Nf?50:800)+a);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function Fl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Yl=null;function Xl(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Yl=new Map,a.forEach(QM,n),Yl=null,Fl.call(n))}function QM(n,a){if(!(a.state.loading&4)){var i=Yl.get(n);if(i)var u=i.get(null);else{i=new Map,Yl.set(n,i);for(var y=n.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var M=y[b];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(i.set(M.dataset.precedence,M),u=M)}u&&i.set(null,u)}y=a.instance,M=y.getAttribute("data-precedence"),b=i.get(M)||u,b===u&&i.set(null,y),i.set(M,y),this.count++,u=Fl.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),b?b.parentNode.insertBefore(y,b.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(y,n.firstChild)),a.state.loading|=4}}var hi={$$typeof:N,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function GM(n,a,i,u,y,b,M,k,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fe(0),this.hiddenUpdates=fe(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function l0(n,a,i,u,y,b,M,k,O,G,ne,ie){return n=new GM(n,a,i,M,O,G,ne,ie,k),a=1,b===!0&&(a|=24),b=wn(3,null,null,a),n.current=b,b.stateNode=n,a=od(),a.refCount++,n.pooledCache=a,a.refCount++,b.memoizedState={element:u,isDehydrated:i,cache:a},cd(b),n}function c0(n){return n?(n=_o,n):_o}function u0(n,a,i,u,y,b){y=c0(y),u.context===null?u.context=y:u.pendingContext=y,u=fa(a),u.payload={element:i},b=b===void 0?null:b,b!==null&&(u.callback=b),i=ha(n,u,a),i!==null&&(yn(i,n,a),Gr(i,n,a))}function d0(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var i=n.retryLane;n.retryLane=i!==0&&i<a?i:a}}function Af(n,a){d0(n,a),(n=n.alternate)&&d0(n,a)}function f0(n){if(n.tag===13||n.tag===31){var a=Fa(n,67108864);a!==null&&yn(a,n,67108864),Af(n,67108864)}}function h0(n){if(n.tag===13||n.tag===31){var a=Rn();a=Wt(a);var i=Fa(n,a);i!==null&&yn(i,n,a),Af(n,a)}}var Wl=!0;function KM(n,a,i,u){var y=z.T;z.T=null;var b=D.p;try{D.p=2,Tf(n,a,i,u)}finally{D.p=b,z.T=y}}function VM(n,a,i,u){var y=z.T;z.T=null;var b=D.p;try{D.p=8,Tf(n,a,i,u)}finally{D.p=b,z.T=y}}function Tf(n,a,i,u){if(Wl){var y=kf(u);if(y===null)gf(n,a,u,Zl,i),g0(n,u);else if(YM(y,n,a,i,u))u.stopPropagation();else if(g0(n,u),a&4&&-1<FM.indexOf(n)){for(;y!==null;){var b=Co(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var M=Xn(b.pendingLanes);if(M!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;M;){var O=1<<31-_t(M);k.entanglements[1]|=O,M&=~O}ds(b),(tt&6)===0&&(zl=Ze()+500,ii(0))}}break;case 31:case 13:k=Fa(b,2),k!==null&&yn(k,b,2),Ll(),Af(b,2)}if(b=kf(u),b===null&&gf(n,a,u,Zl,i),b===y)break;y=b}y!==null&&u.stopPropagation()}else gf(n,a,u,null,i)}}function kf(n){return n=ju(n),jf(n)}var Zl=null;function jf(n){if(Zl=null,n=wo(n),n!==null){var a=l(n);if(a===null)n=null;else{var i=a.tag;if(i===13){if(n=c(a),n!==null)return n;n=null}else if(i===31){if(n=d(a),n!==null)return n;n=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Zl=n,null}function p0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dt()){case vt:return 2;case gt:return 8;case Yt:case Gt:return 32;case Rs:return 268435456;default:return 32}default:return 32}}var Df=!1,Ma=null,Ea=null,Ra=null,pi=new Map,gi=new Map,Na=[],FM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g0(n,a){switch(n){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":pi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":gi.delete(a.pointerId)}}function mi(n,a,i,u,y,b){return n===null||n.nativeEvent!==b?(n={blockedOn:a,domEventName:i,eventSystemFlags:u,nativeEvent:b,targetContainers:[y]},a!==null&&(a=Co(a),a!==null&&f0(a)),n):(n.eventSystemFlags|=u,a=n.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),n)}function YM(n,a,i,u,y){switch(a){case"focusin":return Ma=mi(Ma,n,a,i,u,y),!0;case"dragenter":return Ea=mi(Ea,n,a,i,u,y),!0;case"mouseover":return Ra=mi(Ra,n,a,i,u,y),!0;case"pointerover":var b=y.pointerId;return pi.set(b,mi(pi.get(b)||null,n,a,i,u,y)),!0;case"gotpointercapture":return b=y.pointerId,gi.set(b,mi(gi.get(b)||null,n,a,i,u,y)),!0}return!1}function m0(n){var a=wo(n.target);if(a!==null){var i=l(a);if(i!==null){if(a=i.tag,a===13){if(a=c(i),a!==null){n.blockedOn=a,wt(n.priority,function(){h0(i)});return}}else if(a===31){if(a=d(i),a!==null){n.blockedOn=a,wt(n.priority,function(){h0(i)});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){n.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Jl(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var i=kf(n.nativeEvent);if(i===null){i=n.nativeEvent;var u=new i.constructor(i.type,i);ku=u,i.target.dispatchEvent(u),ku=null}else return a=Co(i),a!==null&&f0(a),n.blockedOn=i,!1;a.shift()}return!0}function y0(n,a,i){Jl(n)&&i.delete(a)}function XM(){Df=!1,Ma!==null&&Jl(Ma)&&(Ma=null),Ea!==null&&Jl(Ea)&&(Ea=null),Ra!==null&&Jl(Ra)&&(Ra=null),pi.forEach(y0),gi.forEach(y0)}function ec(n,a){n.blockedOn===a&&(n.blockedOn=null,Df||(Df=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,XM)))}var tc=null;function v0(n){tc!==n&&(tc=n,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){tc===n&&(tc=null);for(var a=0;a<n.length;a+=3){var i=n[a],u=n[a+1],y=n[a+2];if(typeof u!="function"){if(jf(u||i)===null)continue;break}var b=Co(i);b!==null&&(n.splice(a,3),a-=3,Td(b,{pending:!0,data:y,method:i.method,action:u},u,y))}}))}function sr(n){function a(O){return ec(O,n)}Ma!==null&&ec(Ma,n),Ea!==null&&ec(Ea,n),Ra!==null&&ec(Ra,n),pi.forEach(a),gi.forEach(a);for(var i=0;i<Na.length;i++){var u=Na[i];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Na.length&&(i=Na[0],i.blockedOn===null);)m0(i),i.blockedOn===null&&Na.shift();if(i=(n.ownerDocument||n).$$reactFormReplay,i!=null)for(u=0;u<i.length;u+=3){var y=i[u],b=i[u+1],M=y[Ht]||null;if(typeof b=="function")M||v0(i);else if(M){var k=null;if(b&&b.hasAttribute("formAction")){if(y=b,M=b[Ht]||null)k=M.formAction;else if(jf(y)!==null)continue}else k=M.action;typeof k=="function"?i[u+1]=k:(i.splice(u,3),u-=3),v0(i)}}}function b0(){function n(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(M){return y=M})},focusReset:"manual",scroll:"manual"})}function a(){y!==null&&(y(),y=null),u||setTimeout(i,20)}function i(){if(!u&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(i,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),y!==null&&(y(),y=null)}}}function _f(n){this._internalRoot=n}nc.prototype.render=_f.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var i=a.current,u=Rn();u0(i,u,n,a,null,null)},nc.prototype.unmount=_f.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;u0(n.current,2,null,n,null,null),Ll(),a[is]=null}};function nc(n){this._internalRoot=n}nc.prototype.unstable_scheduleHydration=function(n){if(n){var a=ln();n={blockedOn:null,target:n,priority:a};for(var i=0;i<Na.length&&a!==0&&a<Na[i].priority;i++);Na.splice(i,0,n),i===0&&m0(n)}};var x0=e.version;if(x0!=="19.2.0")throw Error(s(527,x0,"19.2.0"));D.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(a),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var WM={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{rs=sc.inject(WM),Xt=sc}catch{}}return vi.createRoot=function(n,a){if(!r(n))throw Error(s(299));var i=!1,u="",y=Nm,b=Am,M=Tm;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(M=a.onRecoverableError)),a=l0(n,1,!1,null,null,i,u,null,y,b,M,b0),n[is]=a.current,pf(n),new _f(a)},vi.hydrateRoot=function(n,a,i){if(!r(n))throw Error(s(299));var u=!1,y="",b=Nm,M=Am,k=Tm,O=null;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(y=i.identifierPrefix),i.onUncaughtError!==void 0&&(b=i.onUncaughtError),i.onCaughtError!==void 0&&(M=i.onCaughtError),i.onRecoverableError!==void 0&&(k=i.onRecoverableError),i.formState!==void 0&&(O=i.formState)),a=l0(n,1,!0,a,i??null,u,y,O,b,M,k,b0),a.context=c0(null),i=a.current,u=Rn(),u=Wt(u),y=fa(u),y.callback=null,ha(i,y,u),i=u,a.current.lanes=i,be(a,i),ds(a),n[is]=a.current,pf(n),new nc(a)},vi.version="19.2.0",vi}var k0;function iE(){if(k0)return Lf.exports;k0=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),Lf.exports=rE(),Lf.exports}var lE=iE();const cE=Ah(lE);let uE={data:""},dE=o=>{if(typeof window=="object"){let e=(o?o.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(o||document.head).appendChild(e),e.firstChild}return o||uE},fE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,hE=/\/\*[^]*?\*\/|  +/g,j0=/\n+/g,ja=(o,e)=>{let t="",s="",r="";for(let l in o){let c=o[l];l[0]=="@"?l[1]=="i"?t=l+" "+c+";":s+=l[1]=="f"?ja(c,l):l+"{"+ja(c,l[1]=="k"?"":e)+"}":typeof c=="object"?s+=ja(c,e?e.replace(/([^,])+/g,d=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,d):d?d+" "+h:h)):l):c!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=ja.p?ja.p(l,c):l+":"+c+";")}return t+(e&&r?e+"{"+r+"}":r)+s},Fs={},_v=o=>{if(typeof o=="object"){let e="";for(let t in o)e+=t+_v(o[t]);return e}return o},pE=(o,e,t,s,r)=>{let l=_v(o),c=Fs[l]||(Fs[l]=(h=>{let p=0,g=11;for(;p<h.length;)g=101*g+h.charCodeAt(p++)>>>0;return"go"+g})(l));if(!Fs[c]){let h=l!==o?o:(p=>{let g,m,v=[{}];for(;g=fE.exec(p.replace(hE,""));)g[4]?v.shift():g[3]?(m=g[3].replace(j0," ").trim(),v.unshift(v[0][m]=v[0][m]||{})):v[0][g[1]]=g[2].replace(j0," ").trim();return v[0]})(o);Fs[c]=ja(r?{["@keyframes "+c]:h}:h,t?"":"."+c)}let d=t&&Fs.g?Fs.g:null;return t&&(Fs.g=Fs[c]),((h,p,g,m)=>{m?p.data=p.data.replace(m,h):p.data.indexOf(h)===-1&&(p.data=g?h+p.data:p.data+h)})(Fs[c],e,s,d),c},gE=(o,e,t)=>o.reduce((s,r,l)=>{let c=e[l];if(c&&c.call){let d=c(t),h=d&&d.props&&d.props.className||/^go/.test(d)&&d;c=h?"."+h:d&&typeof d=="object"?d.props?"":ja(d,""):d===!1?"":d}return s+r+(c??"")},"");function qc(o){let e=this||{},t=o.call?o(e.p):o;return pE(t.unshift?t.raw?gE(t,[].slice.call(arguments,1),e.p):t.reduce((s,r)=>Object.assign(s,r&&r.call?r(e.p):r),{}):t,dE(e.target),e.g,e.o,e.k)}let zv,oh,rh;qc.bind({g:1});let ea=qc.bind({k:1});function mE(o,e,t,s){ja.p=e,zv=o,oh=t,rh=s}function Pa(o,e){let t=this||{};return function(){let s=arguments;function r(l,c){let d=Object.assign({},l),h=d.className||r.className;t.p=Object.assign({theme:oh&&oh()},d),t.o=/ *go\d+/.test(h),d.className=qc.apply(t,s)+(h?" "+h:"");let p=o;return o[0]&&(p=d.as||o,delete d.as),rh&&p[0]&&rh(d),zv(p,d)}return r}}var yE=o=>typeof o=="function",Mc=(o,e)=>yE(o)?o(e):o,vE=(()=>{let o=0;return()=>(++o).toString()})(),Ov=(()=>{let o;return()=>{if(o===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");o=!e||e.matches}return o}})(),bE=20,jh="default",Lv=(o,e)=>{let{toastLimit:t}=o.settings;switch(e.type){case 0:return{...o,toasts:[e.toast,...o.toasts].slice(0,t)};case 1:return{...o,toasts:o.toasts.map(c=>c.id===e.toast.id?{...c,...e.toast}:c)};case 2:let{toast:s}=e;return Lv(o,{type:o.toasts.find(c=>c.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=e;return{...o,toasts:o.toasts.map(c=>c.id===r||r===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return e.toastId===void 0?{...o,toasts:[]}:{...o,toasts:o.toasts.filter(c=>c.id!==e.toastId)};case 5:return{...o,pausedAt:e.time};case 6:let l=e.time-(o.pausedAt||0);return{...o,pausedAt:void 0,toasts:o.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+l}))}}},yc=[],Pv={toasts:[],pausedAt:void 0,settings:{toastLimit:bE}},ps={},Iv=(o,e=jh)=>{ps[e]=Lv(ps[e]||Pv,o),yc.forEach(([t,s])=>{t===e&&s(ps[e])})},qv=o=>Object.keys(ps).forEach(e=>Iv(o,e)),xE=o=>Object.keys(ps).find(e=>ps[e].toasts.some(t=>t.id===o)),Hc=(o=jh)=>e=>{Iv(e,o)},wE={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},CE=(o={},e=jh)=>{let[t,s]=x.useState(ps[e]||Pv),r=x.useRef(ps[e]);x.useEffect(()=>(r.current!==ps[e]&&s(ps[e]),yc.push([e,s]),()=>{let c=yc.findIndex(([d])=>d===e);c>-1&&yc.splice(c,1)}),[e]);let l=t.toasts.map(c=>{var d,h,p;return{...o,...o[c.type],...c,removeDelay:c.removeDelay||((d=o[c.type])==null?void 0:d.removeDelay)||o?.removeDelay,duration:c.duration||((h=o[c.type])==null?void 0:h.duration)||o?.duration||wE[c.type],style:{...o.style,...(p=o[c.type])==null?void 0:p.style,...c.style}}});return{...t,toasts:l}},SE=(o,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:o,pauseDuration:0,...t,id:t?.id||vE()}),_i=o=>(e,t)=>{let s=SE(e,o,t);return Hc(s.toasterId||xE(s.id))({type:2,toast:s}),s.id},$t=(o,e)=>_i("blank")(o,e);$t.error=_i("error");$t.success=_i("success");$t.loading=_i("loading");$t.custom=_i("custom");$t.dismiss=(o,e)=>{let t={type:3,toastId:o};e?Hc(e)(t):qv(t)};$t.dismissAll=o=>$t.dismiss(void 0,o);$t.remove=(o,e)=>{let t={type:4,toastId:o};e?Hc(e)(t):qv(t)};$t.removeAll=o=>$t.remove(void 0,o);$t.promise=(o,e,t)=>{let s=$t.loading(e.loading,{...t,...t?.loading});return typeof o=="function"&&(o=o()),o.then(r=>{let l=e.success?Mc(e.success,r):void 0;return l?$t.success(l,{id:s,...t,...t?.success}):$t.dismiss(s),r}).catch(r=>{let l=e.error?Mc(e.error,r):void 0;l?$t.error(l,{id:s,...t,...t?.error}):$t.dismiss(s)}),o};var ME=1e3,EE=(o,e="default")=>{let{toasts:t,pausedAt:s}=CE(o,e),r=x.useRef(new Map).current,l=x.useCallback((m,v=ME)=>{if(r.has(m))return;let w=setTimeout(()=>{r.delete(m),c({type:4,toastId:m})},v);r.set(m,w)},[]);x.useEffect(()=>{if(s)return;let m=Date.now(),v=t.map(w=>{if(w.duration===1/0)return;let C=(w.duration||0)+w.pauseDuration-(m-w.createdAt);if(C<0){w.visible&&$t.dismiss(w.id);return}return setTimeout(()=>$t.dismiss(w.id,e),C)});return()=>{v.forEach(w=>w&&clearTimeout(w))}},[t,s,e]);let c=x.useCallback(Hc(e),[e]),d=x.useCallback(()=>{c({type:5,time:Date.now()})},[c]),h=x.useCallback((m,v)=>{c({type:1,toast:{id:m,height:v}})},[c]),p=x.useCallback(()=>{s&&c({type:6,time:Date.now()})},[s,c]),g=x.useCallback((m,v)=>{let{reverseOrder:w=!1,gutter:C=8,defaultPosition:S}=v||{},R=t.filter(N=>(N.position||S)===(m.position||S)&&N.height),E=R.findIndex(N=>N.id===m.id),T=R.filter((N,A)=>A<E&&N.visible).length;return R.filter(N=>N.visible).slice(...w?[T+1]:[0,T]).reduce((N,A)=>N+(A.height||0)+C,0)},[t]);return x.useEffect(()=>{t.forEach(m=>{if(m.dismissed)l(m.id,m.removeDelay);else{let v=r.get(m.id);v&&(clearTimeout(v),r.delete(m.id))}})},[t,l]),{toasts:t,handlers:{updateHeight:h,startPause:d,endPause:p,calculateOffset:g}}},RE=ea`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,NE=ea`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,AE=ea`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,TE=Pa("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${o=>o.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${NE} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${o=>o.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${AE} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,kE=ea`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,jE=Pa("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${o=>o.secondary||"#e0e0e0"};
  border-right-color: ${o=>o.primary||"#616161"};
  animation: ${kE} 1s linear infinite;
`,DE=ea`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,_E=ea`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,zE=Pa("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${o=>o.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${_E} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${o=>o.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,OE=Pa("div")`
  position: absolute;
`,LE=Pa("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,PE=ea`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,IE=Pa("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${PE} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,qE=({toast:o})=>{let{icon:e,type:t,iconTheme:s}=o;return e!==void 0?typeof e=="string"?x.createElement(IE,null,e):e:t==="blank"?null:x.createElement(LE,null,x.createElement(jE,{...s}),t!=="loading"&&x.createElement(OE,null,t==="error"?x.createElement(TE,{...s}):x.createElement(zE,{...s})))},HE=o=>`
0% {transform: translate3d(0,${o*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,UE=o=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${o*-150}%,-1px) scale(.6); opacity:0;}
`,BE="0%{opacity:0;} 100%{opacity:1;}",$E="0%{opacity:1;} 100%{opacity:0;}",QE=Pa("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,GE=Pa("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,KE=(o,e)=>{let t=o.includes("top")?1:-1,[s,r]=Ov()?[BE,$E]:[HE(t),UE(t)];return{animation:e?`${ea(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ea(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},VE=x.memo(({toast:o,position:e,style:t,children:s})=>{let r=o.height?KE(o.position||e||"top-center",o.visible):{opacity:0},l=x.createElement(qE,{toast:o}),c=x.createElement(GE,{...o.ariaProps},Mc(o.message,o));return x.createElement(QE,{className:o.className,style:{...r,...t,...o.style}},typeof s=="function"?s({icon:l,message:c}):x.createElement(x.Fragment,null,l,c))});mE(x.createElement);var FE=({id:o,className:e,style:t,onHeightUpdate:s,children:r})=>{let l=x.useCallback(c=>{if(c){let d=()=>{let h=c.getBoundingClientRect().height;s(o,h)};d(),new MutationObserver(d).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[o,s]);return x.createElement("div",{ref:l,className:e,style:t},r)},YE=(o,e)=>{let t=o.includes("top"),s=t?{top:0}:{bottom:0},r=o.includes("center")?{justifyContent:"center"}:o.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Ov()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...r}},XE=qc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ac=16,WE=({reverseOrder:o,position:e="top-center",toastOptions:t,gutter:s,children:r,toasterId:l,containerStyle:c,containerClassName:d})=>{let{toasts:h,handlers:p}=EE(t,l);return x.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:ac,left:ac,right:ac,bottom:ac,pointerEvents:"none",...c},className:d,onMouseEnter:p.startPause,onMouseLeave:p.endPause},h.map(g=>{let m=g.position||e,v=p.calculateOffset(g,{reverseOrder:o,gutter:s,defaultPosition:e}),w=YE(m,v);return x.createElement(FE,{id:g.id,key:g.id,onHeightUpdate:p.updateHeight,className:g.visible?XE:"",style:w},g.type==="custom"?Mc(g.message,g):r?r(g):x.createElement(VE,{toast:g,position:m}))}))},oL=$t;function D0(o,e){if(typeof o=="function")return o(e);o!=null&&(o.current=e)}function Cs(...o){return e=>{let t=!1;const s=o.map(r=>{const l=D0(r,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let r=0;r<s.length;r++){const l=s[r];typeof l=="function"?l():D0(o[r],null)}}}}function De(...o){return x.useCallback(Cs(...o),o)}var ZE=Symbol.for("react.lazy"),Ec=kh[" use ".trim().toString()];function JE(o){return typeof o=="object"&&o!==null&&"then"in o}function Hv(o){return o!=null&&typeof o=="object"&&"$$typeof"in o&&o.$$typeof===ZE&&"_payload"in o&&JE(o._payload)}function Dh(o){const e=tR(o),t=x.forwardRef((s,r)=>{let{children:l,...c}=s;Hv(l)&&typeof Ec=="function"&&(l=Ec(l._payload));const d=x.Children.toArray(l),h=d.find(sR);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(e,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(e,{...c,ref:r,children:l})});return t.displayName=`${o}.Slot`,t}var eR=Dh("Slot");function tR(o){const e=x.forwardRef((t,s)=>{let{children:r,...l}=t;if(Hv(r)&&typeof Ec=="function"&&(r=Ec(r._payload)),x.isValidElement(r)){const c=oR(r),d=aR(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${o}.SlotClone`,e}var nR=Symbol("radix.slottable");function sR(o){return x.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===nR}function aR(o,e){const t={...e};for(const s in e){const r=o[s],l=e[s];/^on[A-Z]/.test(s)?r&&l?t[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...l}:s==="className"&&(t[s]=[r,l].filter(Boolean).join(" "))}return{...o,...t}}function oR(o){let e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}function Uv(o){var e,t,s="";if(typeof o=="string"||typeof o=="number")s+=o;else if(typeof o=="object")if(Array.isArray(o)){var r=o.length;for(e=0;e<r;e++)o[e]&&(t=Uv(o[e]))&&(s&&(s+=" "),s+=t)}else for(t in o)o[t]&&(s&&(s+=" "),s+=t);return s}function Bv(){for(var o,e,t=0,s="",r=arguments.length;t<r;t++)(o=arguments[t])&&(e=Uv(o))&&(s&&(s+=" "),s+=e);return s}const _0=o=>typeof o=="boolean"?`${o}`:o===0?"0":o,z0=Bv,_h=(o,e)=>t=>{var s;if(e?.variants==null)return z0(o,t?.class,t?.className);const{variants:r,defaultVariants:l}=e,c=Object.keys(r).map(p=>{const g=t?.[p],m=l?.[p];if(g===null)return null;const v=_0(g)||_0(m);return r[p][v]}),d=t&&Object.entries(t).reduce((p,g)=>{let[m,v]=g;return v===void 0||(p[m]=v),p},{}),h=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((p,g)=>{let{class:m,className:v,...w}=g;return Object.entries(w).every(C=>{let[S,R]=C;return Array.isArray(R)?R.includes({...l,...d}[S]):{...l,...d}[S]===R})?[...p,m,v]:p},[]);return z0(o,c,h,t?.class,t?.className)},rR=(o,e)=>{const t=new Array(o.length+e.length);for(let s=0;s<o.length;s++)t[s]=o[s];for(let s=0;s<e.length;s++)t[o.length+s]=e[s];return t},iR=(o,e)=>({classGroupId:o,validator:e}),$v=(o=new Map,e=null,t)=>({nextPart:o,validators:e,classGroupId:t}),Rc="-",O0=[],lR="arbitrary..",cR=o=>{const e=dR(o),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=o;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return uR(c);const d=c.split(Rc),h=d[0]===""&&d.length>1?1:0;return Qv(d,h,e)},getConflictingClassGroupIds:(c,d)=>{if(d){const h=s[c],p=t[c];return h?p?rR(p,h):h:p||O0}return t[c]||O0}}},Qv=(o,e,t)=>{if(o.length-e===0)return t.classGroupId;const r=o[e],l=t.nextPart.get(r);if(l){const p=Qv(o,e+1,l);if(p)return p}const c=t.validators;if(c===null)return;const d=e===0?o.join(Rc):o.slice(e).join(Rc),h=c.length;for(let p=0;p<h;p++){const g=c[p];if(g.validator(d))return g.classGroupId}},uR=o=>o.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=o.slice(1,-1),t=e.indexOf(":"),s=e.slice(0,t);return s?lR+s:void 0})(),dR=o=>{const{theme:e,classGroups:t}=o;return fR(t,e)},fR=(o,e)=>{const t=$v();for(const s in o){const r=o[s];zh(r,t,s,e)}return t},zh=(o,e,t,s)=>{const r=o.length;for(let l=0;l<r;l++){const c=o[l];hR(c,e,t,s)}},hR=(o,e,t,s)=>{if(typeof o=="string"){pR(o,e,t);return}if(typeof o=="function"){gR(o,e,t,s);return}mR(o,e,t,s)},pR=(o,e,t)=>{const s=o===""?e:Gv(e,o);s.classGroupId=t},gR=(o,e,t,s)=>{if(yR(o)){zh(o(s),e,t,s);return}e.validators===null&&(e.validators=[]),e.validators.push(iR(t,o))},mR=(o,e,t,s)=>{const r=Object.entries(o),l=r.length;for(let c=0;c<l;c++){const[d,h]=r[c];zh(h,Gv(e,d),t,s)}},Gv=(o,e)=>{let t=o;const s=e.split(Rc),r=s.length;for(let l=0;l<r;l++){const c=s[l];let d=t.nextPart.get(c);d||(d=$v(),t.nextPart.set(c,d)),t=d}return t},yR=o=>"isThemeGetter"in o&&o.isThemeGetter===!0,vR=o=>{if(o<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),s=Object.create(null);const r=(l,c)=>{t[l]=c,e++,e>o&&(e=0,s=t,t=Object.create(null))};return{get(l){let c=t[l];if(c!==void 0)return c;if((c=s[l])!==void 0)return r(l,c),c},set(l,c){l in t?t[l]=c:r(l,c)}}},ih="!",L0=":",bR=[],P0=(o,e,t,s,r)=>({modifiers:o,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:s,isExternal:r}),xR=o=>{const{prefix:e,experimentalParseClassName:t}=o;let s=r=>{const l=[];let c=0,d=0,h=0,p;const g=r.length;for(let S=0;S<g;S++){const R=r[S];if(c===0&&d===0){if(R===L0){l.push(r.slice(h,S)),h=S+1;continue}if(R==="/"){p=S;continue}}R==="["?c++:R==="]"?c--:R==="("?d++:R===")"&&d--}const m=l.length===0?r:r.slice(h);let v=m,w=!1;m.endsWith(ih)?(v=m.slice(0,-1),w=!0):m.startsWith(ih)&&(v=m.slice(1),w=!0);const C=p&&p>h?p-h:void 0;return P0(l,w,v,C)};if(e){const r=e+L0,l=s;s=c=>c.startsWith(r)?l(c.slice(r.length)):P0(bR,!1,c,void 0,!0)}if(t){const r=s;s=l=>t({className:l,parseClassName:r})}return s},wR=o=>{const e=new Map;return o.orderSensitiveModifiers.forEach((t,s)=>{e.set(t,1e6+s)}),t=>{const s=[];let r=[];for(let l=0;l<t.length;l++){const c=t[l],d=c[0]==="[",h=e.has(c);d||h?(r.length>0&&(r.sort(),s.push(...r),r=[]),s.push(c)):r.push(c)}return r.length>0&&(r.sort(),s.push(...r)),s}},CR=o=>({cache:vR(o.cacheSize),parseClassName:xR(o),sortModifiers:wR(o),...cR(o)}),SR=/\s+/,MR=(o,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:l}=e,c=[],d=o.trim().split(SR);let h="";for(let p=d.length-1;p>=0;p-=1){const g=d[p],{isExternal:m,modifiers:v,hasImportantModifier:w,baseClassName:C,maybePostfixModifierPosition:S}=t(g);if(m){h=g+(h.length>0?" "+h:h);continue}let R=!!S,E=s(R?C.substring(0,S):C);if(!E){if(!R){h=g+(h.length>0?" "+h:h);continue}if(E=s(C),!E){h=g+(h.length>0?" "+h:h);continue}R=!1}const T=v.length===0?"":v.length===1?v[0]:l(v).join(":"),N=w?T+ih:T,A=N+E;if(c.indexOf(A)>-1)continue;c.push(A);const j=r(E,R);for(let q=0;q<j.length;++q){const P=j[q];c.push(N+P)}h=g+(h.length>0?" "+h:h)}return h},ER=(...o)=>{let e=0,t,s,r="";for(;e<o.length;)(t=o[e++])&&(s=Kv(t))&&(r&&(r+=" "),r+=s);return r},Kv=o=>{if(typeof o=="string")return o;let e,t="";for(let s=0;s<o.length;s++)o[s]&&(e=Kv(o[s]))&&(t&&(t+=" "),t+=e);return t},RR=(o,...e)=>{let t,s,r,l;const c=h=>{const p=e.reduce((g,m)=>m(g),o());return t=CR(p),s=t.cache.get,r=t.cache.set,l=d,d(h)},d=h=>{const p=s(h);if(p)return p;const g=MR(h,t);return r(h,g),g};return l=c,(...h)=>l(ER(...h))},NR=[],Bt=o=>{const e=t=>t[o]||NR;return e.isThemeGetter=!0,e},Vv=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Fv=/^\((?:(\w[\w-]*):)?(.+)\)$/i,AR=/^\d+\/\d+$/,TR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,DR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_R=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ar=o=>AR.test(o),qe=o=>!!o&&!Number.isNaN(Number(o)),Ta=o=>!!o&&Number.isInteger(Number(o)),Hf=o=>o.endsWith("%")&&qe(o.slice(0,-1)),Ys=o=>TR.test(o),zR=()=>!0,OR=o=>kR.test(o)&&!jR.test(o),Yv=()=>!1,LR=o=>DR.test(o),PR=o=>_R.test(o),IR=o=>!we(o)&&!Ce(o),qR=o=>xr(o,Zv,Yv),we=o=>Vv.test(o),io=o=>xr(o,Jv,OR),Uf=o=>xr(o,QR,qe),I0=o=>xr(o,Xv,Yv),HR=o=>xr(o,Wv,PR),oc=o=>xr(o,eb,LR),Ce=o=>Fv.test(o),bi=o=>wr(o,Jv),UR=o=>wr(o,GR),q0=o=>wr(o,Xv),BR=o=>wr(o,Zv),$R=o=>wr(o,Wv),rc=o=>wr(o,eb,!0),xr=(o,e,t)=>{const s=Vv.exec(o);return s?s[1]?e(s[1]):t(s[2]):!1},wr=(o,e,t=!1)=>{const s=Fv.exec(o);return s?s[1]?e(s[1]):t:!1},Xv=o=>o==="position"||o==="percentage",Wv=o=>o==="image"||o==="url",Zv=o=>o==="length"||o==="size"||o==="bg-size",Jv=o=>o==="length",QR=o=>o==="number",GR=o=>o==="family-name",eb=o=>o==="shadow",KR=()=>{const o=Bt("color"),e=Bt("font"),t=Bt("text"),s=Bt("font-weight"),r=Bt("tracking"),l=Bt("leading"),c=Bt("breakpoint"),d=Bt("container"),h=Bt("spacing"),p=Bt("radius"),g=Bt("shadow"),m=Bt("inset-shadow"),v=Bt("text-shadow"),w=Bt("drop-shadow"),C=Bt("blur"),S=Bt("perspective"),R=Bt("aspect"),E=Bt("ease"),T=Bt("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...A(),Ce,we],q=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],H=()=>[Ce,we,h],ee=()=>[ar,"full","auto",...H()],se=()=>[Ta,"none","subgrid",Ce,we],le=()=>["auto",{span:["full",Ta,Ce,we]},Ta,Ce,we],te=()=>[Ta,"auto",Ce,we],ae=()=>["auto","min","max","fr",Ce,we],ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ue=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...H()],D=()=>[ar,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...H()],L=()=>[o,Ce,we],Y=()=>[...A(),q0,I0,{position:[Ce,we]}],he=()=>["no-repeat",{repeat:["","x","y","space","round"]}],_=()=>["auto","cover","contain",BR,qR,{size:[Ce,we]}],$=()=>[Hf,bi,io],X=()=>["","none","full",p,Ce,we],W=()=>["",qe,bi,io],K=()=>["solid","dashed","dotted","double"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>[qe,Hf,q0,I0],V=()=>["","none",C,Ce,we],pe=()=>["none",qe,Ce,we],me=()=>["none",qe,Ce,we],ye=()=>[qe,Ce,we],ve=()=>[ar,"full",...H()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ys],breakpoint:[Ys],color:[zR],container:[Ys],"drop-shadow":[Ys],ease:["in","out","in-out"],font:[IR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ys],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ys],shadow:[Ys],spacing:["px",qe],text:[Ys],"text-shadow":[Ys],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ar,we,Ce,R]}],container:["container"],columns:[{columns:[qe,we,Ce,d]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ee()}],"inset-x":[{"inset-x":ee()}],"inset-y":[{"inset-y":ee()}],start:[{start:ee()}],end:[{end:ee()}],top:[{top:ee()}],right:[{right:ee()}],bottom:[{bottom:ee()}],left:[{left:ee()}],visibility:["visible","invisible","collapse"],z:[{z:[Ta,"auto",Ce,we]}],basis:[{basis:[ar,"full","auto",d,...H()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qe,ar,"auto","initial","none",we]}],grow:[{grow:["",qe,Ce,we]}],shrink:[{shrink:["",qe,Ce,we]}],order:[{order:[Ta,"first","last","none",Ce,we]}],"grid-cols":[{"grid-cols":se()}],"col-start-end":[{col:le()}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":se()}],"row-start-end":[{row:le()}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ae()}],"auto-rows":[{"auto-rows":ae()}],gap:[{gap:H()}],"gap-x":[{"gap-x":H()}],"gap-y":[{"gap-y":H()}],"justify-content":[{justify:[...ce(),"normal"]}],"justify-items":[{"justify-items":[...ue(),"normal"]}],"justify-self":[{"justify-self":["auto",...ue()]}],"align-content":[{content:["normal",...ce()]}],"align-items":[{items:[...ue(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ue(),{baseline:["","last"]}]}],"place-content":[{"place-content":ce()}],"place-items":[{"place-items":[...ue(),"baseline"]}],"place-self":[{"place-self":["auto",...ue()]}],p:[{p:H()}],px:[{px:H()}],py:[{py:H()}],ps:[{ps:H()}],pe:[{pe:H()}],pt:[{pt:H()}],pr:[{pr:H()}],pb:[{pb:H()}],pl:[{pl:H()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":H()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":H()}],"space-y-reverse":["space-y-reverse"],size:[{size:D()}],w:[{w:[d,"screen",...D()]}],"min-w":[{"min-w":[d,"screen","none",...D()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...D()]}],h:[{h:["screen","lh",...D()]}],"min-h":[{"min-h":["screen","lh","none",...D()]}],"max-h":[{"max-h":["screen","lh",...D()]}],"font-size":[{text:["base",t,bi,io]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Ce,Uf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Hf,we]}],"font-family":[{font:[UR,we,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Ce,we]}],"line-clamp":[{"line-clamp":[qe,"none",Ce,Uf]}],leading:[{leading:[l,...H()]}],"list-image":[{"list-image":["none",Ce,we]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ce,we]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:[qe,"from-font","auto",Ce,io]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[qe,"auto",Ce,we]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce,we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce,we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:he()}],"bg-size":[{bg:_()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ta,Ce,we],radial:["",Ce,we],conic:[Ta,Ce,we]},$R,HR]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:$()}],"gradient-via-pos":[{via:$()}],"gradient-to-pos":[{to:$()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:X()}],"rounded-s":[{"rounded-s":X()}],"rounded-e":[{"rounded-e":X()}],"rounded-t":[{"rounded-t":X()}],"rounded-r":[{"rounded-r":X()}],"rounded-b":[{"rounded-b":X()}],"rounded-l":[{"rounded-l":X()}],"rounded-ss":[{"rounded-ss":X()}],"rounded-se":[{"rounded-se":X()}],"rounded-ee":[{"rounded-ee":X()}],"rounded-es":[{"rounded-es":X()}],"rounded-tl":[{"rounded-tl":X()}],"rounded-tr":[{"rounded-tr":X()}],"rounded-br":[{"rounded-br":X()}],"rounded-bl":[{"rounded-bl":X()}],"border-w":[{border:W()}],"border-w-x":[{"border-x":W()}],"border-w-y":[{"border-y":W()}],"border-w-s":[{"border-s":W()}],"border-w-e":[{"border-e":W()}],"border-w-t":[{"border-t":W()}],"border-w-r":[{"border-r":W()}],"border-w-b":[{"border-b":W()}],"border-w-l":[{"border-l":W()}],"divide-x":[{"divide-x":W()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":W()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...K(),"hidden","none"]}],"divide-style":[{divide:[...K(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...K(),"none","hidden"]}],"outline-offset":[{"outline-offset":[qe,Ce,we]}],"outline-w":[{outline:["",qe,bi,io]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",g,rc,oc]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",m,rc,oc]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[qe,io]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":W()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",v,rc,oc]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[qe,Ce,we]}],"mix-blend":[{"mix-blend":[...oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qe]}],"mask-image-linear-from-pos":[{"mask-linear-from":B()}],"mask-image-linear-to-pos":[{"mask-linear-to":B()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":B()}],"mask-image-t-to-pos":[{"mask-t-to":B()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":B()}],"mask-image-r-to-pos":[{"mask-r-to":B()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":B()}],"mask-image-b-to-pos":[{"mask-b-to":B()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":B()}],"mask-image-l-to-pos":[{"mask-l-to":B()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":B()}],"mask-image-x-to-pos":[{"mask-x-to":B()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":B()}],"mask-image-y-to-pos":[{"mask-y-to":B()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[Ce,we]}],"mask-image-radial-from-pos":[{"mask-radial-from":B()}],"mask-image-radial-to-pos":[{"mask-radial-to":B()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[qe]}],"mask-image-conic-from-pos":[{"mask-conic-from":B()}],"mask-image-conic-to-pos":[{"mask-conic-to":B()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:he()}],"mask-size":[{mask:_()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ce,we]}],filter:[{filter:["","none",Ce,we]}],blur:[{blur:V()}],brightness:[{brightness:[qe,Ce,we]}],contrast:[{contrast:[qe,Ce,we]}],"drop-shadow":[{"drop-shadow":["","none",w,rc,oc]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",qe,Ce,we]}],"hue-rotate":[{"hue-rotate":[qe,Ce,we]}],invert:[{invert:["",qe,Ce,we]}],saturate:[{saturate:[qe,Ce,we]}],sepia:[{sepia:["",qe,Ce,we]}],"backdrop-filter":[{"backdrop-filter":["","none",Ce,we]}],"backdrop-blur":[{"backdrop-blur":V()}],"backdrop-brightness":[{"backdrop-brightness":[qe,Ce,we]}],"backdrop-contrast":[{"backdrop-contrast":[qe,Ce,we]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qe,Ce,we]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qe,Ce,we]}],"backdrop-invert":[{"backdrop-invert":["",qe,Ce,we]}],"backdrop-opacity":[{"backdrop-opacity":[qe,Ce,we]}],"backdrop-saturate":[{"backdrop-saturate":[qe,Ce,we]}],"backdrop-sepia":[{"backdrop-sepia":["",qe,Ce,we]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":H()}],"border-spacing-x":[{"border-spacing-x":H()}],"border-spacing-y":[{"border-spacing-y":H()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ce,we]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qe,"initial",Ce,we]}],ease:[{ease:["linear","initial",E,Ce,we]}],delay:[{delay:[qe,Ce,we]}],animate:[{animate:["none",T,Ce,we]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Ce,we]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:me()}],"scale-x":[{"scale-x":me()}],"scale-y":[{"scale-y":me()}],"scale-z":[{"scale-z":me()}],"scale-3d":["scale-3d"],skew:[{skew:ye()}],"skew-x":[{"skew-x":ye()}],"skew-y":[{"skew-y":ye()}],transform:[{transform:[Ce,we,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ve()}],"translate-x":[{"translate-x":ve()}],"translate-y":[{"translate-y":ve()}],"translate-z":[{"translate-z":ve()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce,we]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce,we]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[qe,bi,io,Uf]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},VR=RR(KR);function Ee(...o){return VR(Bv(o))}function rL(o,e){return o?{...e,...o}:e}const Oh=_h("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Te=x.forwardRef(({className:o,variant:e,size:t,asChild:s=!1,...r},l)=>{const c=s?eR:"button";return f.jsx(c,{className:Ee(Oh({variant:e,size:t,className:o})),ref:l,...r})});Te.displayName="Button";var zi=Dv();const FR=Ah(zi);var YR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],XR=YR.reduce((o,e)=>{const t=Dh(`Primitive.${e}`),s=x.forwardRef((r,l)=>{const{asChild:c,...d}=r,h=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(h,{...d,ref:l})});return s.displayName=`Primitive.${e}`,{...o,[e]:s}},{}),WR="Separator",H0="horizontal",ZR=["horizontal","vertical"],tb=x.forwardRef((o,e)=>{const{decorative:t,orientation:s=H0,...r}=o,l=JR(s)?s:H0,d=t?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return f.jsx(XR.div,{"data-orientation":l,...d,...r,ref:e})});tb.displayName=WR;function JR(o){return ZR.includes(o)}var nb=tb;const vn=x.forwardRef(({className:o,orientation:e="horizontal",decorative:t=!0,...s},r)=>f.jsx(nb,{ref:r,decorative:t,orientation:e,className:Ee("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",o),...s}));vn.displayName=nb.displayName;const U0=o=>{let e;const t=new Set,s=(p,g)=>{const m=typeof p=="function"?p(e):p;if(!Object.is(m,e)){const v=e;e=g??(typeof m!="object"||m===null)?m:Object.assign({},e,m),t.forEach(w=>w(e,v))}},r=()=>e,d={setState:s,getState:r,getInitialState:()=>h,subscribe:p=>(t.add(p),()=>t.delete(p))},h=e=o(s,r,d);return d},eN=(o=>o?U0(o):U0),tN=o=>o;function nN(o,e=tN){const t=Et.useSyncExternalStore(o.subscribe,Et.useCallback(()=>e(o.getState()),[o,e]),Et.useCallback(()=>e(o.getInitialState()),[o,e]));return Et.useDebugValue(t),t}const B0=o=>{const e=eN(o),t=s=>nN(e,s);return Object.assign(t,e),t},Ss=(o=>o?B0(o):B0);class sN{nodes=[];connections=[];handlers=new Map;postgresQueryEngine=null;messageQueue=new Map;messageHistory=[];isRunning=!1;updateInterval=200;intervalId=null;messageIdCounter=0;MAX_HISTORY=1e3;constructor(){this.registerDefaultHandlers()}registerDefaultHandlers(){this.registerHandler("crm",this.createBusinessDataHandler("crm")),this.registerHandler("erp",this.createBusinessDataHandler("erp")),this.registerHandler("payment-gateway",this.createBusinessDataHandler("payment")),this.registerHandler("postgres",this.createDatabaseHandler("postgres")),this.registerHandler("mongodb",this.createDatabaseHandler("mongodb")),this.registerHandler("redis",this.createDatabaseHandler("redis")),this.registerHandler("cassandra",this.createDatabaseHandler("cassandra")),this.registerHandler("clickhouse",this.createDatabaseHandler("clickhouse")),this.registerHandler("snowflake",this.createDatabaseHandler("snowflake")),this.registerHandler("kafka",this.createMessageBrokerHandler("kafka")),this.registerHandler("rabbitmq",this.createMessageBrokerHandler("rabbitmq")),this.registerHandler("activemq",this.createMessageBrokerHandler("activemq")),this.registerHandler("aws-sqs",this.createMessageBrokerHandler("aws-sqs")),this.registerHandler("gcp-pubsub",this.createMessageBrokerHandler("gcp-pubsub")),this.registerHandler("rest",this.createAPIHandler("rest")),this.registerHandler("grpc",this.createAPIHandler("grpc")),this.registerHandler("graphql",this.createAPIHandler("graphql")),this.registerHandler("websocket",this.createAPIHandler("websocket")),this.registerHandler("kong",this.createIntegrationHandler("kong")),this.registerHandler("apigee",this.createIntegrationHandler("apigee")),this.registerHandler("mulesoft",this.createIntegrationHandler("mulesoft")),this.registerHandler("graphql-gateway",this.createIntegrationHandler("graphql-gateway")),this.registerHandler("bff-service",this.createIntegrationHandler("bff-service")),this.registerHandler("webhook-relay",this.createIntegrationHandler("webhook-relay"))}registerHandler(e,t){this.handlers.set(e,t)}initialize(e,t){this.nodes=e,this.connections=t,this.messageQueue.clear(),this.messageHistory=[];for(const s of t)this.messageQueue.set(s.id,[])}updateNodesAndConnections(e,t){this.nodes=e,this.connections=t;const s=new Set(t.map(r=>r.id));for(const[r]of this.messageQueue.entries())s.has(r)||this.messageQueue.delete(r);for(const r of t)this.messageQueue.has(r.id)||this.messageQueue.set(r.id,[])}start(){this.isRunning||(this.isRunning=!0,this.intervalId=setInterval(()=>{this.processDataFlow()},this.updateInterval))}stop(){this.isRunning=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}processDataFlow(){this.generateSourceData(),this.processInTransitMessages(),this.deliverMessages()}generateSourceData(){for(const e of this.connections){const t=this.nodes.find(c=>c.id===e.source);if(!t)continue;const s=this.handlers.get(t.type);if(!s?.generateData)continue;const r=t.data.config||{},l=s.generateData(t,r);if(l&&l.length>0){const c=this.messageQueue.get(e.id)||[];for(const d of l)d.connectionId=e.id,d.target=e.target,d.status="pending",d.id=`msg-${++this.messageIdCounter}`,d.timestamp=Date.now(),c.push(d);this.messageQueue.set(e.id,c)}}}processInTransitMessages(){for(const[e,t]of this.messageQueue.entries()){const s=this.connections.find(c=>c.id===e);if(!s)continue;const r=this.nodes.find(c=>c.id===s.source),l=this.nodes.find(c=>c.id===s.target);if(!(!r||!l)){for(const c of t)if(c.status==="pending")this.transformMessageIfNeeded(c,r,l,s)&&(c.status="in-transit",c.latency=this.calculateTransitTime(s));else if(c.status==="in-transit"){const d=Date.now()-c.timestamp;c.latency&&d>=c.latency&&(c.status="delivered")}}}}deliverMessages(){for(const[e,t]of this.messageQueue.entries()){const s=this.connections.find(h=>h.id===e);if(!s)continue;const r=this.nodes.find(h=>h.id===s.target);if(!r)continue;const l=this.handlers.get(r.type);if(!l?.processData)continue;const c=r.data.config||{},d=t.filter(h=>h.status==="delivered");for(const h of d)try{l.processData(r,h,c)&&(this.addToHistory(h),t.splice(t.indexOf(h),1))}catch(p){h.status="failed",h.error=p instanceof Error?p.message:"Unknown error",this.addToHistory(h),t.splice(t.indexOf(h),1)}this.messageQueue.set(e,t)}}transformMessageIfNeeded(e,t,s,r){const l=this.handlers.get(t.type),c=this.handlers.get(s.type),d=l?.getSupportedFormats?.(t)||[e.format],h=c?.getSupportedFormats?.(s)||[e.format];if(h.includes(e.format))return e;const p=h.find(m=>d.includes(m));if(p)return e.format=p,e.status="transformed",e;const g=this.findIntegrationHandler(r);if(g?.transformData){const m=g.transformData(t,e,s.type,t.data.config||{});if(m)return m}if(l?.transformData){const m=l.transformData(t,e,s.type,t.data.config||{});if(m)return m}return e.status="failed",e.error=`Format ${e.format} not supported by target ${s.type}`,null}findIntegrationHandler(e){const t=this.nodes.find(s=>s.id===e.source);return t&&["kong","apigee","mulesoft","bff-service"].includes(t.type)&&this.handlers.get(t.type)||null}calculateTransitTime(e){const t=e.data||{},s=t.latencyMs||10,r=(t.jitterMs||0)*(Math.random()-.5);return Math.max(1,s+r)}addToHistory(e){this.messageHistory.push(e),this.messageHistory.length>this.MAX_HISTORY&&this.messageHistory.shift()}getConnectionMessages(e){return this.messageQueue.get(e)||[]}getMessageHistory(e){const t=[...this.messageHistory].reverse();return e?t.slice(0,e):t}getComponentMessages(e){const t=[];for(const s of this.messageQueue.values())for(const r of s)(r.source===e||r.target===e)&&t.push(r);return t}createBusinessDataHandler(e){return{generateData:(t,s)=>{const r=[],l=s.generateInterval||2e3,c=t._lastGenerate||0,d=Date.now();if(d-c<l)return null;switch(t._lastGenerate=d,e){case"crm":r.push(this.createCRMDataMessage(t));break;case"erp":r.push(this.createERPDataMessage(t));break;case"payment":r.push(this.createPaymentDataMessage(t));break}return r},getSupportedFormats:()=>["json","xml"]}}validateMongoDBSchema(e,t){if(!t||!t.$jsonSchema)return{valid:!0};const s=t.$jsonSchema;if(s.required&&Array.isArray(s.required)){for(const r of s.required)if(!(r in e)||e[r]===void 0||e[r]===null)return{valid:!1,error:`Required field "${r}" is missing`}}if(s.properties){for(const[r,l]of Object.entries(s.properties))if(r in e){const c=e[r],d=l;if(d.type){const h=d.type,p=Array.isArray(c)?"array":typeof c;if(h==="string"&&p!=="string")return{valid:!1,error:`Field "${r}" must be of type string`};if(h==="number"&&p!=="number")return{valid:!1,error:`Field "${r}" must be of type number`};if(h==="boolean"&&p!=="boolean")return{valid:!1,error:`Field "${r}" must be of type boolean`};if(h==="array"&&p!=="array")return{valid:!1,error:`Field "${r}" must be of type array`};if(h==="object"&&(p!=="object"||Array.isArray(c)))return{valid:!1,error:`Field "${r}" must be of type object`}}}}return{valid:!0}}createDatabaseHandler(e){return{processData:(t,s,r)=>{if(e==="postgres"&&s.payload?.sql)return this.processPostgreSQLQuery(t,s,r);if(e==="redis")return this.processRedisCommand(t,s,r);if(e==="cassandra")return this.processCQLQuery(t,s,r);if(e==="clickhouse")return this.processClickHouseQuery(t,s,r);if(e==="snowflake")return this.processSnowflakeQuery(t,s,r);const l=s.payload?.operation||"insert";switch(l){case"insert":case"update":{const d=r.queryLatency||10;if(s.latency=d,e==="mongodb"){const p=t.data.config?.collections||[],g=s.payload;let m=g?.collection;if(!m&&p.length>0&&(g?.type?m=p.find(w=>w.name.toLowerCase().includes(g.type.toLowerCase()))?.name||p[0].name:m=p[0].name),m){const v=p.find(w=>w.name===m);if(v){if(v.validation){const w=v.validation;if(w.validationLevel!=="off"){const S={...g?.document||g?.data||g};delete S._id;const R=this.validateMongoDBSchema(S,w.validator);if(!R.valid){if(w.validationAction==="error")return s.status="failed",s.error=`Schema validation failed for collection "${m}": ${R.error}`,s;w.validationAction==="warn"&&(s.metadata={...s.metadata,validationWarning:R.error,collection:m})}}}l==="insert"?s.metadata={...s.metadata,collection:m,documentStored:!0}:l==="update"&&(s.metadata={...s.metadata,collection:m,documentUpdated:!0})}else return s.status="failed",s.error=`Collection "${m}" not found`,s}}return s.status="delivered",s}case"delete":const c=r.queryLatency||10;return s.latency=c,s.status="delivered",s;case"query":{let d=[];if(e==="mongodb"){const p=t.data.config?.collections||[],g=s.payload,m=g?.collection||p[0]?.name;if(m){const v=p.find(w=>w.name===m);if(v?.documents&&v.documents.length>0){if(d=v.documents.map(C=>({...C})),g?.filter)try{const C=typeof g.filter=="string"?JSON.parse(g.filter):g.filter;d=d.filter(S=>{for(const[R,E]of Object.entries(C))if(S[R]!==E)return!1;return!0})}catch{}const w=g?.limit||100;d=d.slice(0,w)}else d=this.generateQueryResults(e,g?.query)}else d=this.generateQueryResults(e,g?.query)}else d=this.generateQueryResults(e,s.payload?.query);return s.payload={...s.payload,results:d},s.status="delivered",s}default:return s.status="failed",s.error=`Unknown operation: ${l}`,s}},getSupportedFormats:()=>["json","binary"]}}processClickHouseQuery(e,t,s){const r=t.payload,l=nt.getClickHouseRoutingEngine(e.id);if(!l)return t.status="failed",t.error="ClickHouse Routing Engine not initialized",t;let c;if(r?.sql)c=r.sql;else if(r?.query)c=r.query;else if(typeof r=="string")c=r;else{const h=r?.operation||"select",p=e.data.config,g=r?.database||p?.database||"default",m=r?.table||"default_table";switch(h.toLowerCase()){case"select":case"read":case"query":c=`SELECT * FROM ${g}.${m}`,r?.where&&(c+=` WHERE ${r.where}`),r?.limit&&(c+=` LIMIT ${r.limit}`);break;case"insert":case"write":const v=r?.columns?Object.keys(r.columns).join(", "):"id, data",w=r?.columns?Object.values(r.columns).map(C=>`'${C}'`).join(", "):`${Date.now()}, 'data'`;c=`INSERT INTO ${g}.${m} (${v}) VALUES (${w})`;break;default:return t.status="failed",t.error=`Unknown ClickHouse operation: ${h}`,t}}const d=l.executeQuery(c);return d.success?(t.status="delivered",t.latency=d.latency||45,t.payload={...t.payload,sql:c,rows:d.rows||[],rowCount:d.rowCount||0,columns:d.columns||[],dataRead:d.dataRead,dataWritten:d.dataWritten,clickHouseResult:d.rows},t.metadata={...t.metadata,clickHouseQuery:c,rowsRead:d.dataRead,rowsWritten:d.dataWritten}):(t.status="failed",t.error=d.error||"ClickHouse query execution failed",t.latency=d.latency||0),t}processSnowflakeQuery(e,t,s){const r=t.payload,l=nt.getSnowflakeRoutingEngine(e.id);if(!l)return t.status="failed",t.error="Snowflake Routing Engine not initialized",t;let c,d,h,p;if(r?.sql)c=r.sql,d=r.warehouse,h=r.database,p=r.schema;else if(r?.query)c=r.query,d=r.warehouse,h=r.database,p=r.schema;else if(typeof r=="string")c=r;else{const m=r?.operation||"select",v=e.data.config;h=r?.database||v?.database||"PUBLIC",p=r?.schema||v?.schema||"PUBLIC",d=r?.warehouse||v?.warehouse;const w=r?.table||"default_table";switch(m.toLowerCase()){case"select":case"read":case"query":c=`SELECT * FROM ${h}.${p}.${w}`,r?.where&&(c+=` WHERE ${r.where}`),r?.limit&&(c+=` LIMIT ${r.limit}`);break;case"insert":case"write":const C=r?.columns?Object.keys(r.columns).join(", "):"id, data",S=r?.columns?Object.values(r.columns).map(R=>`'${R}'`).join(", "):`${Date.now()}, 'data'`;c=`INSERT INTO ${h}.${p}.${w} (${C}) VALUES (${S})`;break;default:return t.status="failed",t.error=`Unknown Snowflake operation: ${m}`,t}}const g=l.executeQuery(c,d,h,p);return g.success?(t.status="delivered",t.latency=g.latency||50,t.payload={...t.payload,sql:c,rows:g.rows||[],rowCount:g.rowCount||0,columns:g.columns||[],dataRead:g.dataRead,dataWritten:g.dataWritten,snowflakeResult:g.rows,queryId:g.queryId,warehouse:g.warehouse,resultCacheUsed:g.resultCacheUsed},t.metadata={...t.metadata,snowflakeQuery:c,rowsRead:g.dataRead,rowsWritten:g.dataWritten,warehouse:g.warehouse,queryId:g.queryId,cacheHit:g.resultCacheUsed||!1}):(t.status="failed",t.error=g.error||"Snowflake query execution failed",t.latency=g.latency||0),t}processPostgreSQLQuery(e,t,s){if(!this.postgresQueryEngine)return t.status="failed",t.error="PostgreSQL Query Engine not initialized",t;const r=t.payload?.sql;if(!r||typeof r!="string")return t.status="failed",t.error="No SQL query provided",t;const l=e.data.config,c=l.tables||[],d=this.extractIndexesFromConfig(l,c),h=l.views||[],p=this.postgresQueryEngine.execute(r,c,d,h);return p.success?(t.status="delivered",t.latency=p.executionTime||s.queryLatency||10,t.payload={...t.payload,results:p.rows||[],rowCount:p.rowCount||0,queryPlan:p.queryPlan,indexesUsed:p.indexesUsed||[]}):(t.status="failed",t.error=p.error||"Query execution failed",t.latency=p.executionTime||0),t}processRedisCommand(e,t,s){const r=t.payload,l=nt.getRedisRoutingEngine(e.id);if(!l)return t.status="failed",t.error="Redis Routing Engine not initialized",t;let c,d;if(r?.command)c=r.command,d=r.args||[];else if(r?.redisCommand){const p=String(r.redisCommand).trim().split(/\s+/);c=p[0],d=p.slice(1)}else if(typeof r=="string"){const p=r.trim().split(/\s+/);c=p[0],d=p.slice(1)}else{const p=r?.operation||"get";switch(p.toLowerCase()){case"get":c="GET",d=[r?.key||"default:key"];break;case"set":c="SET",d=[r?.key||"default:key",typeof r?.value=="string"?r.value:JSON.stringify(r?.value||"")],r?.ttl&&d.push("EX",String(r.ttl));break;case"delete":case"del":c="DEL",d=Array.isArray(r?.keys)?r.keys:[r?.key||"default:key"];break;case"exists":c="EXISTS",d=Array.isArray(r?.keys)?r.keys:[r?.key||"default:key"];break;default:return t.status="failed",t.error=`Unknown Redis operation: ${p}`,t}}const h=l.executeCommand(c,d);return h.success?(t.status="delivered",t.latency=h.latency||1,t.payload={...t.payload,command:c,args:d,result:h.value,redisResult:h.value}):(t.status="failed",t.error=h.error||"Redis command execution failed",t.latency=h.latency||0),t}processCQLQuery(e,t,s){const r=t.payload,l=nt.getCassandraRoutingEngine(e.id);if(!l)return t.status="failed",t.error="Cassandra Routing Engine not initialized",t;let c,d;if(r?.cql)c=r.cql,d=r.consistency;else if(r?.query)c=r.query,d=r.consistency;else if(typeof r=="string")c=r;else{const p=r?.operation||"select",g=e.data.config,m=r?.keyspace||g?.keyspace||"system",v=r?.table||"default_table";switch(p.toLowerCase()){case"select":case"read":c=`SELECT * FROM ${m}.${v}`,r?.limit&&(c+=` LIMIT ${r.limit}`);break;case"insert":case"write":const w=r?.columns?Object.keys(r.columns).join(", "):"id, data",C=r?.columns?Object.values(r.columns).map(E=>`'${E}'`).join(", "):`${Date.now()}, 'data'`;c=`INSERT INTO ${m}.${v} (${w}) VALUES (${C})`;break;case"update":const S=r?.columns||{},R=Object.entries(S).map(([E,T])=>`${E} = '${T}'`).join(", ");c=`UPDATE ${m}.${v} SET ${R}`,r?.where&&(c+=` WHERE ${r.where}`);break;case"delete":c=`DELETE FROM ${m}.${v}`,r?.where&&(c+=` WHERE ${r.where}`);break;default:return t.status="failed",t.error=`Unknown CQL operation: ${p}`,t}}d||(d=e.data.config?.consistencyLevel||"QUORUM");const h=l.executeCQL(c,d);return h.success?(t.status="delivered",t.latency=h.latency||5,t.payload={...t.payload,cql:c,consistency:h.consistency,rows:h.rows||[],rowCount:h.rowCount||0,replicasQueried:h.replicasQueried,cqlResult:h.rows},t.metadata={...t.metadata,cassandraConsistency:h.consistency,cassandraReplicasQueried:h.replicasQueried}):(t.status="failed",t.error=h.error||"CQL query execution failed",t.latency=h.latency||0),t}extractIndexesFromConfig(e,t){const s=[];for(const r of t)for(const l of r.indexes||[]){const c=l.match(/CREATE\s+(?:UNIQUE\s+)?INDEX\s+(\w+)\s+ON\s+\w+\s*\(([^)]+)\)/i);c?s.push({name:c[1],table:r.name,schema:r.schema,columns:c[2].split(",").map(d=>d.trim()),unique:l.toUpperCase().includes("UNIQUE")}):s.push({name:l,table:r.name,schema:r.schema,columns:[l.replace(/^idx_|^index_/i,"")]})}return s}createMessageBrokerHandler(e){return e==="rabbitmq"?{processData:(t,s,r)=>{const l=nt.getRabbitMQRoutingEngine(t.id);if(!l)return s.status="delivered",s;const c=r?.messaging||s.metadata?.messaging||{},d=c.exchange||"amq.topic",h=c.routingKey||s.metadata?.routingKey||"default",p=s.metadata?.headers,g=s.metadata?.priority,m=l.routeMessage(d,h,s.payload,s.size,p,g);return m.length>0?(s.status="delivered",s.metadata={...s.metadata,routedQueues:m,exchange:d,routingKey:h}):(s.status="failed",s.error=`No queues bound to exchange '${d}' with routing key '${h}'`),s},getSupportedFormats:()=>["json","binary","text"]}:e==="activemq"?{processData:(t,s,r)=>{const l=nt.getActiveMQRoutingEngine(t.id);if(!l)return s.status="delivered",s;const c=r?.messaging||s.metadata?.messaging||{},d=c.queue,h=c.topic,p=s.metadata?.headers,g=s.metadata?.priority;let m=!1,v="";const w=t.data.config||{},C=w.acls||[],R=this.nodes.find(T=>T.id===s.source)?.data.config,E=s.metadata?.principal||R?.username||R?.clientId||w.username||`user-${s.source.slice(0,8)}`;if(d){if(!(nt.checkActiveMQACLPermissionPublic?.(C,E,`queue://${d}`,"write")??!0))return s.status="failed",s.error=`Access denied: principal '${E}' does not have write permission for queue '${d}'`,s;l.routeToQueue(d,s.payload,s.size,p,g)&&(m=!0,v=d)}if(h){if(!(nt.checkActiveMQACLPermissionPublic?.(C,E,`topic://${h}`,"write")??!0))return s.status="failed",s.error=`Access denied: principal '${E}' does not have write permission for topic '${h}'`,s;l.publishToTopic(h,s.payload,s.size,p,g).length>0&&(m=!0,v=h)}return m?(s.status="delivered",s.metadata={...s.metadata,destination:v,queue:d||void 0,topic:h||void 0}):(s.status="failed",s.error=`No queue or topic found. Queue: '${d||"none"}', Topic: '${h||"none"}'`),s},getSupportedFormats:()=>["json","binary","text"]}:e==="aws-sqs"?{processData:(t,s,r)=>{const l=nt.getSQSRoutingEngine(t.id);if(!l)return s.status="delivered",s;const c=r?.messaging||s.metadata?.messaging||{},d=c.queueUrl,h=c.queueName||(d?d.split("/").pop():null)||s.metadata?.queueName||"default-queue",p=t.data.config||{},g=p.iamPolicies||[],v=this.nodes.find(N=>N.id===s.source)?.data.config,w=s.metadata?.principal||v?.accessKeyId||v?.clientId||p.accessKeyId||`arn:aws:iam::123456789012:user/${s.source.slice(0,8)}`;if(!(nt.checkSQSIAMPolicy?.(g,w,h,"sqs:SendMessage")??!0))return s.status="failed",s.error=`Access denied: principal '${w}' does not have sqs:SendMessage permission for queue '${h}'`,s;const S=s.metadata?.messageGroupId,R=s.metadata?.messageDeduplicationId,E=s.metadata?.attributes,T=l.sendMessage(h,s.payload,s.size,E,S,R);return T?(s.status="delivered",s.metadata={...s.metadata,queueName:h,messageId:T,queueUrl:d||`https://sqs.${p.defaultRegion||"us-east-1"}.amazonaws.com/.../${h}`}):(s.status="failed",s.error=`Queue '${h}' not found`),s},getSupportedFormats:()=>["json","binary","text"]}:e==="azure-service-bus"?{processData:(t,s,r)=>{const l=nt.getAzureServiceBusRoutingEngine(t.id);if(!l)return s.status="delivered",s;const c=r?.messaging||s.metadata?.messaging||{},d=c.queue,h=c.topic,p=s.metadata?.properties||s.metadata?.headers,g=s.metadata?.sessionId,m=s.metadata?.scheduledEnqueueTime;let v=!1,w="",C=[];if(d){const S=l.sendToQueue(d,s.payload,s.size,p,g,m);S&&(v=!0,w=d,C.push(S))}if(h){const S=l.publishToTopic(h,s.payload,s.size,p,m);S.length>0&&(v=!0,w=h,C=S)}return v?(s.status="delivered",s.metadata={...s.metadata,destination:w,queue:d||void 0,topic:h||void 0,messageIds:C,sessionId:g||void 0}):(s.status="failed",s.error=`No queue or topic found. Queue: '${d||"none"}', Topic: '${h||"none"}'`),s},getSupportedFormats:()=>["json","binary","text"]}:e==="gcp-pubsub"?{processData:(t,s,r)=>{const l=nt.getPubSubRoutingEngine(t.id);if(!l)return s.status="delivered",s;const c=r?.messaging||s.metadata?.messaging||{},d=c.topic||s.metadata?.topic,h=c.orderingKey||s.metadata?.orderingKey,p=s.metadata?.attributes||s.metadata?.headers,g=t.data.config||{},m=d||g.topics&&g.topics[0]?.name||null;if(!m)return s.status="failed",s.error="No topic specified for Pub/Sub message",s;const v=l.publishToTopic(m,s.payload,s.size,p,h);return v?(s.status="delivered",s.metadata={...s.metadata,topic:m,messageId:v,orderingKey:h||void 0}):(s.status="failed",s.error=`Topic '${m}' not found`),s},getSupportedFormats:()=>["json","binary","text"]}:{processData:(t,s,r)=>(s.status="delivered",s),getSupportedFormats:()=>["json","binary","text"]}}createAPIHandler(e){return{processData:(t,s,r)=>{const l={status:"success",data:s.payload,timestamp:Date.now()};return s.payload=l,s.status="delivered",s},transformData:(t,s,r,l)=>(e==="rest"&&s.format!=="json"?(s.format="json",s.status="transformed"):e==="grpc"&&s.format!=="protobuf"&&(s.format="protobuf",s.status="transformed"),s),getSupportedFormats:()=>{switch(e){case"rest":return["json","xml"];case"grpc":return["protobuf","binary"];case"graphql":return["json"];case"websocket":return["json","text","binary"];default:return["json"]}}}}createIntegrationHandler(e){return e==="kong"?{processData:(t,s,r)=>{const l=nt.getKongRoutingEngine(t.id);if(!l)return s.status="delivered",s;const c=s.payload,d=c?.path||s.metadata?.path||"/",h=c?.method||s.metadata?.method||"GET",p=c?.headers||s.metadata?.headers||{},g=c?.query||s.metadata?.query||{},m=p.apikey||p["X-API-Key"]||g.apikey,v=s.metadata?.consumerId,w=l.routeRequest({path:d,method:h,headers:p,query:g,body:c?.body,consumerId:v,apiKey:m});return w.response.status>=200&&w.response.status<300?(s.status="delivered",s.latency=w.response.latency,s.metadata={...s.metadata,kongRoute:w.match?.route.id,kongService:w.match?.service.id,kongTarget:w.target,kongResponseStatus:w.response.status}):(s.status="failed",s.error=w.response.error||`HTTP ${w.response.status}`,s.latency=w.response.latency),s},transformData:(t,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json","xml","binary"]}:e==="apigee"?{processData:(t,s,r)=>{const l=nt.getApigeeRoutingEngine(t.id);if(!l)return s.status="delivered",s;const c=s.payload,d=c?.path||s.metadata?.path||"/",h=c?.method||s.metadata?.method||"GET",p=c?.headers||s.metadata?.headers||{},g=c?.query||s.metadata?.query||{},m=p.apikey||p["X-API-Key"]||g.apikey,v=p.Authorization||"",w=v.startsWith("OAuth ")?v.replace("OAuth ",""):void 0,C=v.startsWith("Bearer ")?v.replace("Bearer ",""):p["X-JWT-Token"],S=l.routeRequest({path:d,method:h,headers:p,query:g,body:c?.body,apiKey:m,oauthToken:w,jwtToken:C});return S.response.status>=200&&S.response.status<300?(s.status="delivered",s.latency=S.response.latency,s.metadata={...s.metadata,apigeeProxy:S.match?.proxy.name,apigeeTarget:S.target,apigeeResponseStatus:S.response.status,apigeeEnvironment:S.match?.proxy.environment}):(s.status="failed",s.error=S.response.error||`HTTP ${S.response.status}`,s.latency=S.response.latency),s},transformData:(t,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json","xml","binary"]}:e==="graphql-gateway"?{processData:(t,s,r)=>{const l=nt.getGraphQLGatewayRoutingEngine(t.id);if(!l)return s.status="delivered",s;const c=s.payload,d=c?.query||c?.body||s.metadata?.query,h=c?.variables||s.metadata?.variables,p=c?.operationName||s.metadata?.operationName,g=c?.headers||s.metadata?.headers||{},m=l.routeRequest({query:d||"",variables:h,headers:g,operationName:p});if(s.latency=m.latency,m.status>=200&&m.status<300){s.status="delivered";const C=l.getServiceRegistry().getConnectedServices().map(S=>S.endpoint);s.metadata={...s.metadata,graphqlGatewayStatus:m.status,graphqlGatewayEndpoints:C}}else s.status="failed",s.error=m.error||`HTTP ${m.status}`;return s},transformData:(t,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json"]}:e==="mulesoft"?{processData:(t,s,r)=>{const l=nt.getMuleSoftRoutingEngine(t.id);if(!l)return s.status="delivered",s;const c=s.payload,d=this.nodes.find(g=>g.id===s.source),h=this.nodes.find(g=>g.id===s.target),p=l.processData({path:c?.path||s.metadata?.path,method:c?.method||s.metadata?.method||"POST",headers:c?.headers||s.metadata?.headers||{},query:c?.query||s.metadata?.query||{},body:c?.body||c||s.payload,format:s.format,sourceComponentType:d?.type,sourceComponentId:d?.id,targetComponentType:h?.type,targetComponentId:h?.id});return p.response.status==="success"?(s.status="delivered",s.latency=p.response.latency,s.payload=p.response.data,p.response.format&&(s.format=p.response.format),s.metadata={...s.metadata,mulesoftApplication:p.response.application,mulesoftFlow:p.response.flow,mulesoftConnector:p.response.connector}):(s.status="failed",s.error=p.response.error||"MuleSoft processing failed",s.latency=p.response.latency||0),s},transformData:(t,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json","xml","binary","text"]}:e==="bff-service"?{processData:(t,s,r)=>{const l=nt.getBFFRoutingEngine(t.id);if(!l)return s.status="delivered",s;const c=s.payload,d=c?.path||s.metadata?.path||"/",h=c?.method||s.metadata?.method||"GET",p=c?.headers||s.metadata?.headers||{},g=c?.query||s.metadata?.query||{},m=c?.body||c||s.payload,v=l.routeRequest({path:d,method:h,headers:p,query:g,body:m});return v.status>=200&&v.status<300?(s.status="delivered",s.latency=v.latency,s.payload=v.data,s.metadata={...s.metadata,bffCacheHit:v.cacheHit,bffBackendResponses:v.backendResponses.length,bffStatus:v.status}):(s.status="failed",s.error=v.error||`HTTP ${v.status}`,s.latency=v.latency),s},transformData:(t,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json"]}:e==="webhook-relay"?{processData:(t,s,r)=>{const l=nt.getWebhookRelayRoutingEngine(t.id);if(!l)return s.status="delivered",s;const c=s.payload,d=c?.url||s.metadata?.url||c?.path||"/",h=c?.method||s.metadata?.method||"POST",p=c?.headers||s.metadata?.headers||{},g=c?.body||c||s.payload,m=c?.ip||s.metadata?.ip||p["x-forwarded-for"]?.split(",")[0]?.trim(),v=c?.event||s.metadata?.event||p["x-event"]||p["x-github-event"]||"",w=l.relayWebhook({url:d,method:h,headers:p,body:g,ip:m,event:v});return w.success?(s.status="delivered",s.latency=w.latency,s.metadata={...s.metadata,webhookRelayId:w.relayId,webhookDeliveryId:w.deliveryId,webhookAttempts:w.attempts,webhookStatus:w.status}):(s.status="failed",s.error=w.error||`Webhook relay failed (HTTP ${w.status})`,s.latency=w.latency,s.metadata={...s.metadata,webhookRelayId:w.relayId,webhookDeliveryId:w.deliveryId,webhookAttempts:w.attempts,webhookStatus:w.status}),s},transformData:(t,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json","text","binary"]}:{transformData:(t,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json","xml","binary"]}}getTargetFormats(e){return this.handlers.get(e)?.getSupportedFormats?.({type:e})||["json"]}createCRMDataMessage(e){const t=e.data.config||{},s=t.contacts||[],r=t.deals||[],l=Math.random()>.5?"contact":"deal";let c;if(l==="contact"&&s.length>0){const h=s[Math.floor(Math.random()*s.length)];c={operation:"create",type:"contact",data:{name:h.name,email:h.email,company:h.company,status:h.status}}}else if(r.length>0){const h=r[Math.floor(Math.random()*r.length)];c={operation:"update",type:"deal",data:{id:h.id,name:h.name,value:h.value,stage:h.stage}}}else c={operation:"create",type:"contact",data:{name:`Contact ${Date.now()}`,email:`contact${Date.now()}@example.com`}};const d=JSON.stringify(c);return{id:"",timestamp:Date.now(),source:e.id,target:"",connectionId:"",format:"json",payload:c,size:new Blob([d]).size,metadata:{contentType:"application/json",operation:c.operation},status:"pending"}}createERPDataMessage(e){const t=e.data.config||{},s=t.orders||[],r=t.inventory||[],l=Math.random()>.5?"order":"inventory";let c;if(l==="order"&&s.length>0){const h=s[Math.floor(Math.random()*s.length)];c={operation:"create",type:"order",data:{orderNumber:h.orderNumber,customer:h.customer,total:h.total,items:h.items}}}else if(r.length>0){const h=r[Math.floor(Math.random()*r.length)];c={operation:"update",type:"inventory",data:{sku:h.sku,quantity:h.quantity,status:h.status}}}else c={operation:"create",type:"order",data:{orderNumber:`ORD-${Date.now()}`,total:Math.random()*1e3}};const d=JSON.stringify(c);return{id:"",timestamp:Date.now(),source:e.id,target:"",connectionId:"",format:"json",payload:c,size:new Blob([d]).size,metadata:{contentType:"application/json",operation:c.operation},status:"pending"}}createPaymentDataMessage(e){const s=(e.data.config||{}).transactions||[];let r;if(s.length>0){const c=s[Math.floor(Math.random()*s.length)];r={operation:"process",type:"transaction",data:{id:c.id,amount:c.amount,currency:c.currency,status:c.status}}}else r={operation:"process",type:"transaction",data:{amount:Math.random()*1e3,currency:"USD"}};const l=JSON.stringify(r);return{id:"",timestamp:Date.now(),source:e.id,target:"",connectionId:"",format:"json",payload:r,size:new Blob([l]).size,metadata:{contentType:"application/json",operation:r.operation},status:"pending"}}generateQueryResults(e,t){const s=Math.floor(Math.random()*10)+1,r=[];for(let l=0;l<s;l++)r.push({id:l+1,name:`Record ${l+1}`,value:Math.random()*100,timestamp:new Date().toISOString()});return r}}const un=new sN;class aN{componentStates=new Map;setComponentState(e,t,s){const r={nodeId:e,state:t,degradedLevel:s?.degradedLevel||.5,failureRate:s?.failureRate||.1,latencyMultiplier:s?.latencyMultiplier||2,throughputMultiplier:s?.throughputMultiplier||.5};this.componentStates.set(e,r)}getComponentState(e){return this.componentStates.get(e)}isEnabled(e){const t=this.componentStates.get(e);return!t||t.state==="enabled"}applyStateEffects(e,t){const s=this.componentStates.get(e);if(!s||s.state==="enabled")return{...t};if(s.state==="disabled"||s.state==="failed")return{throughput:0,latency:1/0,errorRate:1,utilization:0};if(s.state==="degraded"){const r=s.degradedLevel||.5;return{throughput:t.throughput*(s.throughputMultiplier||.5)*(1-r*.5),latency:t.latency*(s.latencyMultiplier||2)*(1+r),errorRate:Math.min(1,t.errorRate+(s.failureRate||.1)*r),utilization:Math.min(1,t.utilization*(1+r*.3))}}return{...t}}reset(){this.componentStates.clear()}resetComponent(e){this.componentStates.delete(e)}getAllStates(){return Array.from(this.componentStates.values())}}const dr=new aN;class oN{queues=new Map;exchanges=new Map;bindings=new Map;queueMessages=new Map;unackedMessages=new Map;queueState=new Map;initialize(e){if(this.queues.clear(),this.exchanges.clear(),this.bindings.clear(),this.queueMessages.clear(),this.unackedMessages.clear(),this.queueState.clear(),e.queues)for(const t of e.queues)this.queues.set(t.name,{...t}),this.queueMessages.set(t.name,[]),this.unackedMessages.set(t.name,[]),this.queueState.set(t.name,{ready:t.ready||0,unacked:t.unacked||0,total:t.messages||0,lastUpdate:Date.now()});if(e.exchanges)for(const t of e.exchanges)this.exchanges.set(t.name,{...t}),this.bindings.set(t.name,[]);if(e.bindings)for(const t of e.bindings){const s=this.bindings.get(t.source)||[];s.push(t),this.bindings.set(t.source,s)}}routeMessage(e,t,s,r,l,c){const d=this.exchanges.get(e);if(!d)return[];const h=this.bindings.get(e)||[],p=[];for(const v of h)this.shouldRouteToQueue(d,v,t,l)&&p.push(v.destination);const g=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,m=Date.now();for(const v of p){const w=this.queues.get(v);if(!w)continue;if(w.maxLength&&(this.queueMessages.get(v)||[]).length>=w.maxLength){w.deadLetterExchange&&this.routeToDeadLetterExchange(w.deadLetterExchange,w.deadLetterRoutingKey||t,s,r,l,c);continue}const C={id:g,timestamp:m,routingKey:t,exchange:e,payload:s,size:r,priority:c||w.maxPriority?c||0:void 0,headers:l,ttl:w.messageTtl?m+w.messageTtl:void 0},S=this.queueMessages.get(v)||[];S.push(C),w.maxPriority&&C.priority!==void 0&&S.sort((R,E)=>(E.priority||0)-(R.priority||0)),this.queueMessages.set(v,S)}return p}shouldRouteToQueue(e,t,s,r){switch(e.type){case"direct":return t.routingKey===s;case"topic":return this.matchTopicPattern(t.routingKey,s);case"fanout":return!0;case"headers":if(!r||!t.arguments)return!1;for(const[l,c]of Object.entries(t.arguments))if(!l.startsWith("x-")&&r[l]!==c)return!1;return!0;default:return!1}}matchTopicPattern(e,t){const s=e.replace(/\./g,"\\.").replace(/\*/g,"[^.]+").replace(/#/g,".*");return new RegExp(`^${s}$`).test(t)}routeToDeadLetterExchange(e,t,s,r,l,c){this.routeMessage(e,t,s,r,l,c)}processConsumption(e){const t=Date.now();for(const[s,r]of this.queues.entries()){let l=this.queueMessages.get(s)||[],c=this.unackedMessages.get(s)||[];const d=this.queueState.get(s)||{ready:0,unacked:0,total:0,lastUpdate:t};l=l.filter(R=>R.ttl&&t>R.ttl?(r.deadLetterExchange&&this.routeToDeadLetterExchange(r.deadLetterExchange,r.deadLetterRoutingKey||R.routingKey,R.payload,R.size,R.headers,R.priority),!1):!0),this.queueMessages.set(s,l);const g=(r.consumers||0)*10*e/1e3,m=Math.min(g,l.length),v=l.splice(0,m);c.push(...v),this.unackedMessages.set(s,c);const C=e/100*c.length,S=Math.min(C,c.length);c.splice(0,Math.floor(S)),this.unackedMessages.set(s,c),d.ready=l.length,d.unacked=c.length,d.total=l.length+c.length,d.lastUpdate=t,this.queueState.set(s,d)}}getQueueMetrics(e){const t=this.queues.get(e);if(!t)return null;const s=this.queueMessages.get(e)||[],r=this.unackedMessages.get(e)||[];this.queueState.get(e);const l=s.length,c=r.length;return{messages:l+c,ready:l,unacked:c,consumers:t.consumers||0}}getAllQueueMetrics(){const e=new Map;for(const t of this.queues.keys()){const s=this.getQueueMetrics(t);s&&e.set(t,s)}return e}getTotalQueueDepth(){let e=0;for(const t of this.queueMessages.values())e+=t.length;for(const t of this.unackedMessages.values())e+=t.length;return e}getActiveConnections(){let e=0;for(const t of this.queues.values())t.consumers&&(e+=t.consumers);return e+=this.exchanges.size,Math.max(1,e)}updateQueue(e,t){const s=this.queues.get(e);s&&(Object.assign(s,t),this.queues.set(e,s))}}class rN{queues=new Map;topics=new Map;subscriptions=new Map;queueMessages=new Map;topicMessages=new Map;subscriptionMessages=new Map;queueState=new Map;topicState=new Map;initialize(e){if(this.queues.clear(),this.topics.clear(),this.subscriptions.clear(),this.queueMessages.clear(),this.topicMessages.clear(),this.subscriptionMessages.clear(),this.queueState.clear(),this.topicState.clear(),e.queues)for(const t of e.queues)this.queues.set(t.name,{...t}),this.queueMessages.set(t.name,[]),this.queueState.set(t.name,{queueSize:t.queueSize||0,consumerCount:t.consumerCount||0,enqueueCount:t.enqueueCount||0,dequeueCount:t.dequeueCount||0,lastUpdate:Date.now()});if(e.topics)for(const t of e.topics)this.topics.set(t.name,{...t}),this.topicMessages.set(t.name,[]),this.subscriptions.set(t.name,[]),this.topicState.set(t.name,{subscriberCount:t.subscriberCount||0,enqueueCount:t.enqueueCount||0,dequeueCount:t.dequeueCount||0,lastUpdate:Date.now()});if(e.subscriptions)for(const t of e.subscriptions){const s=this.subscriptions.get(t.destination)||[];s.push(t),this.subscriptions.set(t.destination,s),this.subscriptionMessages.set(t.id,[])}}routeToQueue(e,t,s,r,l){if(!this.queues.get(e))return!1;const d=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,h=Date.now(),p={id:d,timestamp:h,destination:e,payload:t,size:s,headers:r,priority:l},g=this.queueMessages.get(e)||[];g.push(p),l!==void 0&&g.sort((v,w)=>(w.priority||0)-(v.priority||0)),this.queueMessages.set(e,g);const m=this.queueState.get(e)||{queueSize:0,consumerCount:0,enqueueCount:0,dequeueCount:0,lastUpdate:h};return m.queueSize=g.length,m.enqueueCount=(m.enqueueCount||0)+1,m.lastUpdate=h,this.queueState.set(e,m),!0}publishToTopic(e,t,s,r,l){if(!this.topics.get(e))return[];const d=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,h=Date.now(),p=this.subscriptions.get(e)||[],g=[],m={id:d,timestamp:h,destination:e,payload:t,size:s,headers:r,priority:l};for(const w of p){if(w.selector&&!this.matchesSelector(w.selector,r))continue;const C=this.subscriptionMessages.get(w.id)||[];C.push(m),this.subscriptionMessages.set(w.id,C),g.push(w.id),w.pendingQueueSize=(w.pendingQueueSize||0)+1,w.enqueueCounter=(w.enqueueCounter||0)+1}if(p.length===0){const w=this.topicMessages.get(e)||[];w.push(m),this.topicMessages.set(e,w)}const v=this.topicState.get(e)||{subscriberCount:0,enqueueCount:0,dequeueCount:0,lastUpdate:h};return v.enqueueCount=(v.enqueueCount||0)+1,v.lastUpdate=h,this.topicState.set(e,v),g}matchesSelector(e,t){if(!t||!e)return!0;try{const s=e.trim(),r=s.match(/^(\w+)\s*=\s*['"]([^'"]+)['"]$/);if(r){const c=r[1],d=r[2];return t[c]===d}const l=s.match(/^(\w+)\s*([><=]+)\s*(\d+)$/);if(l){const c=l[1],d=l[2],h=Number(l[3]),p=Number(t[c]);if(isNaN(p))return!1;switch(d){case">":return p>h;case"<":return p<h;case">=":return p>=h;case"<=":return p<=h;case"=":return p===h;default:return!1}}for(const c in t)if(s.includes(c))return!0;return!1}catch{return!0}}processConsumption(e){const t=Date.now();for(const[s,r]of this.queues.entries()){let l=this.queueMessages.get(s)||[];const c=this.queueState.get(s)||{queueSize:0,consumerCount:0,enqueueCount:0,dequeueCount:0,lastUpdate:t};l=l.filter(v=>!(v.ttl&&t>v.ttl)),this.queueMessages.set(s,l);const p=(r.consumerCount||c.consumerCount||0)*10*e/1e3,g=Math.min(p,l.length),m=l.splice(0,Math.floor(g));this.queueMessages.set(s,l),c.queueSize=l.length,c.dequeueCount=(c.dequeueCount||0)+m.length,c.lastUpdate=t,this.queueState.set(s,c)}for(const[s,r]of this.subscriptions.entries()){for(const c of r){let d=this.subscriptionMessages.get(c.id)||[];d=d.filter(v=>!(v.ttl&&t>v.ttl));const p=10*e/1e3,g=Math.min(p,d.length),m=d.splice(0,Math.floor(g));c.pendingQueueSize=d.length,c.dispatchedQueueSize=(c.dispatchedQueueSize||0)+m.length,c.dequeueCounter=(c.dequeueCounter||0)+m.length,this.subscriptionMessages.set(c.id,d)}const l=this.topicState.get(s);l&&(l.dequeueCount=r.reduce((c,d)=>c+(d.dequeueCounter||0),0),l.lastUpdate=t)}}getQueueMetrics(e){if(!this.queues.get(e))return null;const s=this.queueState.get(e);return s?{queueSize:s.queueSize,consumerCount:s.consumerCount,enqueueCount:s.enqueueCount,dequeueCount:s.dequeueCount}:null}getTopicMetrics(e){if(!this.topics.get(e))return null;const s=this.topicState.get(e);return s?{subscriberCount:s.subscriberCount,enqueueCount:s.enqueueCount,dequeueCount:s.dequeueCount}:null}getAllQueueMetrics(){const e=new Map;for(const t of this.queues.keys()){const s=this.getQueueMetrics(t);s&&e.set(t,s)}return e}getAllTopicMetrics(){const e=new Map;for(const t of this.topics.keys()){const s=this.getTopicMetrics(t);s&&e.set(t,s)}return e}getTotalQueueDepth(){let e=0;for(const t of this.queueMessages.values())e+=t.length;return e}getTotalTopicMessages(){let e=0;for(const t of this.subscriptionMessages.values())e+=t.length;for(const t of this.topicMessages.values())e+=t.length;return e}getActiveConnections(){let e=0;for(const t of this.queues.values())t.consumerCount&&(e+=t.consumerCount);for(const t of this.subscriptions.values())e+=t.length;return Math.max(1,e+1)}updateQueue(e,t){const s=this.queues.get(e);if(s){Object.assign(s,t),this.queues.set(e,s);const r=this.queueState.get(e);r&&t.consumerCount!==void 0&&(r.consumerCount=t.consumerCount)}}updateTopic(e,t){const s=this.topics.get(e);if(s){Object.assign(s,t),this.topics.set(e,s);const r=this.topicState.get(e);r&&t.subscriberCount!==void 0&&(r.subscriberCount=t.subscriberCount)}}}class iN{queues=new Map;queueMessages=new Map;inFlightMessages=new Map;dlqMessages=new Map;queueState=new Map;messageGroups=new Map;deduplicationIds=new Map;initialize(e){if(this.queues.clear(),this.queueMessages.clear(),this.inFlightMessages.clear(),this.dlqMessages.clear(),this.queueState.clear(),this.messageGroups.clear(),this.deduplicationIds.clear(),e.queues)for(const t of e.queues)this.queues.set(t.name,{...t}),this.queueMessages.set(t.name,[]),this.inFlightMessages.set(t.name,[]),this.queueState.set(t.name,{approximateMessages:0,approximateMessagesNotVisible:0,approximateMessagesDelayed:0,sentCount:0,receivedCount:0,deletedCount:0,dlqCount:0,lastUpdate:Date.now()}),t.type==="fifo"&&(this.messageGroups.set(t.name,new Map),this.deduplicationIds.set(t.name,new Set))}sendMessage(e,t,s,r,l,c){const d=this.queues.get(e);if(!d)return null;const h=Date.now(),p=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,g=`${e}-${p}`;if(d.type==="fifo"){if(d.contentBasedDedup&&!c){const T=JSON.stringify(t);c=this.hashString(T)}if(c){const T=this.deduplicationIds.get(e);if(T&&T.has(c))return g;T?.add(c)}l||(l="default-group")}const m=d.messageRetention*24*60*60*1e3,v=h+m,w=d.delaySeconds*1e3,C=w>0?h+w:void 0,S={id:p,messageId:g,timestamp:h,queueName:e,payload:t,size:s,attributes:r,messageGroupId:l,messageDeduplicationId:c,receiveCount:0,retentionExpiresAt:v,delayUntil:C},R=this.queueMessages.get(e)||[];if(d.type==="fifo"&&l){const T=this.messageGroups.get(e);if(T){const N=T.get(l)||[];N.push(S),T.set(l,N)}}R.push(S),this.queueMessages.set(e,R);const E=this.queueState.get(e);if(E){const T=this.queueMessages.get(e)||[],N=this.inFlightMessages.get(e)||[],A=T.filter(j=>j.delayUntil&&h<j.delayUntil);E.approximateMessages=T.length,E.approximateMessagesNotVisible=N.length,E.approximateMessagesDelayed=A.length,E.sentCount=(E.sentCount||0)+1,E.lastUpdate=h}return g}receiveMessage(e,t=1,s){const r=this.queues.get(e);if(!r)return[];const l=Date.now(),d=(s!==void 0?s:r.visibilityTimeout)*1e3;let h=(this.queueMessages.get(e)||[]).filter(v=>!(v.delayUntil&&l<v.delayUntil||l>=v.retentionExpiresAt));if(r.type==="fifo"){const v=this.messageGroups.get(e);if(v){h=[];let w=0;for(const[C,S]of v.entries()){if(w>=t)break;if(S.length>0){const R=S[0];(!R.delayUntil||l>=R.delayUntil)&&l<R.retentionExpiresAt&&(h.push(R),w++)}}}}const p=Math.min(t,h.length),g=[];for(let v=0;v<p;v++){const w=h[v],C=`receipt_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;w.receiptHandle=C,w.receiveCount=(w.receiveCount||0)+1,w.firstReceivedAt||(w.firstReceivedAt=l);const S={message:w,receivedAt:l,visibilityTimeoutExpiresAt:l+d},R=this.inFlightMessages.get(e)||[];R.push(S),this.inFlightMessages.set(e,R);const E=this.queueMessages.get(e)||[],T=E.indexOf(w);if(T>-1&&E.splice(T,1),this.queueMessages.set(e,E),r.type==="fifo"&&w.messageGroupId){const N=this.messageGroups.get(e);if(N){const A=N.get(w.messageGroupId)||[],j=A.indexOf(w);j>-1&&A.splice(j,1),A.length===0?N.delete(w.messageGroupId):N.set(w.messageGroupId,A)}}g.push(w)}const m=this.queueState.get(e);return m&&(m.receivedCount=(m.receivedCount||0)+g.length,m.lastUpdate=l),g}deleteMessage(e,t){if(!this.queues.get(e))return!1;const r=this.inFlightMessages.get(e)||[],l=r.findIndex(d=>d.message.receiptHandle===t);if(l===-1)return!1;r[l],r.splice(l,1),this.inFlightMessages.set(e,r);const c=this.queueState.get(e);return c&&(c.deletedCount=(c.deletedCount||0)+1,c.lastUpdate=Date.now()),!0}processConsumption(e){const t=Date.now();for(const[s,r]of this.queues.entries()){const l=this.inFlightMessages.get(s)||[],c=[],d=[];for(const m of l)if(t>=m.visibilityTimeoutExpiresAt){const v=m.message;v.receiptHandle=void 0,r.maxReceiveCount&&v.receiveCount>=r.maxReceiveCount?this.sendToDLQ(r,v):c.push(v)}else d.push(m);if(this.inFlightMessages.set(s,d),c.length>0){const m=this.queueMessages.get(s)||[];if(r.type==="fifo"){const v=this.messageGroups.get(s);if(v)for(const w of c){const C=w.messageGroupId||"default-group",S=v.get(C)||[];S.push(w),v.set(C,S)}}m.push(...c),this.queueMessages.set(s,m)}const p=(this.queueMessages.get(s)||[]).filter(m=>t>=m.retentionExpiresAt?(r.deadLetterQueue&&this.sendToDLQ(r,m),!1):!0);if(this.queueMessages.set(s,p),r.type==="fifo"){const m=this.messageGroups.get(s);if(m)for(const[v,w]of m.entries()){const C=w.filter(S=>t>=S.retentionExpiresAt?(r.deadLetterQueue&&this.sendToDLQ(r,S),!1):!0);C.length===0?m.delete(v):m.set(v,C)}}const g=this.queueState.get(s);if(g){const m=this.queueMessages.get(s)||[],v=this.inFlightMessages.get(s)||[],w=m.filter(C=>C.delayUntil&&t<C.delayUntil);g.approximateMessages=m.length,g.approximateMessagesNotVisible=v.length,g.approximateMessagesDelayed=w.length,g.lastUpdate=t}}}sendToDLQ(e,t){if(!e.deadLetterQueue||!this.queues.get(e.deadLetterQueue))return;const r=this.dlqMessages.get(e.deadLetterQueue)||[];r.push(t),this.dlqMessages.set(e.deadLetterQueue,r);const l=this.queueState.get(e.deadLetterQueue);l&&(l.dlqCount=(l.dlqCount||0)+1,l.approximateMessages=r.length);const c=this.queueState.get(e.name);c&&(c.dlqCount=(c.dlqCount||0)+1)}hashString(e){let t=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);t=(t<<5)-t+r,t=t&t}return Math.abs(t).toString(36)}getQueueMetrics(e){if(!this.queues.get(e))return null;const s=this.queueState.get(e);return s?{approximateMessages:s.approximateMessages,approximateMessagesNotVisible:s.approximateMessagesNotVisible,approximateMessagesDelayed:s.approximateMessagesDelayed,sentCount:s.sentCount,receivedCount:s.receivedCount,deletedCount:s.deletedCount,dlqCount:s.dlqCount}:null}getAllQueueMetrics(){const e=new Map;for(const t of this.queues.keys()){const s=this.getQueueMetrics(t);s&&e.set(t,s)}return e}getTotalQueueDepth(){let e=0;for(const t of this.queueMessages.values())e+=t.length;for(const t of this.inFlightMessages.values())e+=t.length;return e}getActiveConnections(){let e=0;for(const t of this.queueState.values())(t.sentCount>0||t.receivedCount>0)&&(e+=1);return Math.max(1,e)}updateQueue(e,t){const s=this.queues.get(e);s&&(Object.assign(s,t),this.queues.set(e,s))}}class lN{queues=new Map;topics=new Map;subscriptions=new Map;queueMessages=new Map;topicMessages=new Map;subscriptionMessages=new Map;lockedMessages=new Map;deadLetterMessages=new Map;scheduledMessages=new Map;sessionMessages=new Map;queueState=new Map;subscriptionState=new Map;initialize(e){if(this.queues.clear(),this.topics.clear(),this.subscriptions.clear(),this.queueMessages.clear(),this.topicMessages.clear(),this.subscriptionMessages.clear(),this.lockedMessages.clear(),this.deadLetterMessages.clear(),this.scheduledMessages.clear(),this.sessionMessages.clear(),this.queueState.clear(),this.subscriptionState.clear(),e.queues)for(const t of e.queues)this.queues.set(t.name,{...t}),this.queueMessages.set(t.name,[]),this.lockedMessages.set(t.name,[]),this.deadLetterMessages.set(t.name,[]),this.scheduledMessages.set(t.name,[]),this.queueState.set(t.name,{activeMessageCount:t.activeMessageCount||0,deadLetterMessageCount:t.deadLetterMessageCount||0,scheduledMessageCount:t.scheduledMessageCount||0,sentCount:0,receivedCount:0,completedCount:0,abandonedCount:0,lastUpdate:Date.now()}),t.enableSessions&&this.sessionMessages.set(t.name,new Map);if(e.topics){for(const t of e.topics)if(this.topics.set(t.name,{...t}),this.topicMessages.set(t.name,[]),this.scheduledMessages.set(t.name,[]),this.subscriptions.set(t.name,[]),t.subscriptions)for(const s of t.subscriptions){const r=this.subscriptions.get(t.name)||[];r.push(s),this.subscriptions.set(t.name,r);const l=`${t.name}/subscriptions/${s.name}`;this.subscriptionMessages.set(l,[]),this.lockedMessages.set(l,[]),this.deadLetterMessages.set(l,[]),this.subscriptionState.set(l,{activeMessageCount:s.activeMessageCount||0,deadLetterMessageCount:0,sentCount:0,receivedCount:0,completedCount:0,abandonedCount:0,lastUpdate:Date.now()}),this.sessionMessages.set(l,new Map)}}}sendToQueue(e,t,s,r,l,c){const d=this.queues.get(e);if(!d)return null;const h=Date.now(),p=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,g=`${e}-${p}`,m=d.defaultMessageTimeToLive*1e3,v=h+m,w={id:p,messageId:g,timestamp:h,destination:e,payload:t,size:s,properties:r,sessionId:l,scheduledEnqueueTime:c,expirationTime:v,deliveryCount:0,enqueuedTime:c||h};if(c&&c>h){const S=this.scheduledMessages.get(e)||[];S.push(w),this.scheduledMessages.set(e,S);const R=this.queueState.get(e);return R&&(R.scheduledMessageCount=S.length),g}if(d.enableSessions&&l){const S=this.sessionMessages.get(e);if(S){const R=S.get(l)||[];R.push(w),S.set(l,R)}}else{const S=this.queueMessages.get(e)||[];S.push(w),this.queueMessages.set(e,S)}const C=this.queueState.get(e);if(C){const S=this.getAvailableMessages(e);C.activeMessageCount=S.length,C.sentCount=(C.sentCount||0)+1,C.lastUpdate=h}return g}publishToTopic(e,t,s,r,l){const c=this.topics.get(e);if(!c)return[];const d=Date.now(),h=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,p=`${e}-${h}`,g=c.defaultMessageTimeToLive*1e3,m=d+g,v={id:h,messageId:p,timestamp:d,destination:e,payload:t,size:s,properties:r,scheduledEnqueueTime:l,expirationTime:m,deliveryCount:0,enqueuedTime:l||d},w=[];if(l&&l>d){const S=this.scheduledMessages.get(e)||[];return S.push(v),this.scheduledMessages.set(e,S),[p]}const C=this.subscriptions.get(e)||[];if(C.length===0)return[];for(const S of C){const R=`${e}/subscriptions/${S.name}`,E=this.subscriptionMessages.get(R)||[],T={...v,id:`${h}-${S.name}`,messageId:`${p}-${S.name}`,subscriptionName:S.name};E.push(T),this.subscriptionMessages.set(R,E),w.push(T.messageId);const N=this.subscriptionState.get(R);if(N){const A=this.getAvailableSubscriptionMessages(R);N.activeMessageCount=A.length,N.sentCount=(N.sentCount||0)+1,N.lastUpdate=d}}return w}receiveFromQueue(e,t,s){const r=this.queues.get(e);if(!r)return null;const l=Date.now(),c=(t||r.lockDuration)*1e3,d=l+c;let h;if(r.enableSessions&&s){const v=this.sessionMessages.get(e);if(!v)return null;h=v.get(s)||[]}else h=this.getAvailableMessages(e);if(h.length===0)return null;const p=h.shift();p.deliveryCount=(p.deliveryCount||0)+1,p.lockedUntil=d,p.lockToken=`lock_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;const g=this.lockedMessages.get(e)||[];if(g.push({message:p,lockedAt:l,lockExpiresAt:d}),this.lockedMessages.set(e,g),r.enableSessions&&s){const v=this.sessionMessages.get(e);if(v){const w=v.get(s)||[],C=w.findIndex(S=>S.id===p.id);C>=0&&(w.splice(C,1),v.set(s,w))}}const m=this.queueState.get(e);if(m){const v=this.getAvailableMessages(e);m.activeMessageCount=v.length,m.receivedCount=(m.receivedCount||0)+1,m.lastUpdate=l}return p}receiveFromSubscription(e,t,s){const r=`${e}/subscriptions/${t}`,l=this.getAvailableSubscriptionMessages(r);if(l.length===0)return null;const c=this.subscriptions.get(e)?.find(w=>w.name===t);if(!c)return null;const d=Date.now(),h=(s||c.lockDuration)*1e3,p=d+h,g=l.shift();g.deliveryCount=(g.deliveryCount||0)+1,g.lockedUntil=p,g.lockToken=`lock_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;const m=this.lockedMessages.get(r)||[];m.push({message:g,lockedAt:d,lockExpiresAt:p}),this.lockedMessages.set(r,m);const v=this.subscriptionState.get(r);if(v){const w=this.getAvailableSubscriptionMessages(r);v.activeMessageCount=w.length,v.receivedCount=(v.receivedCount||0)+1,v.lastUpdate=d}return g}completeMessage(e,t){const s=this.lockedMessages.get(e)||[],r=s.findIndex(c=>c.message.lockToken===t);if(r<0)return!1;if(s.splice(r,1),this.lockedMessages.set(e,s),this.queues.has(e)){const c=this.queueState.get(e);c&&(c.completedCount=(c.completedCount||0)+1,c.lastUpdate=Date.now())}else{const c=this.subscriptionState.get(e);c&&(c.completedCount=(c.completedCount||0)+1,c.lastUpdate=Date.now())}return!0}abandonMessage(e,t){const s=this.lockedMessages.get(e)||[],r=s.findIndex(p=>p.message.lockToken===t);if(r<0)return!1;const l=s[r];s.splice(r,1),this.lockedMessages.set(e,s);const c=l.message;c.lockToken=void 0,c.lockedUntil=void 0;const d=this.queues.has(e),h=d?this.queues.get(e)?.maxDeliveryCount||10:this.subscriptions.get(c.destination)?.find(p=>p.name===c.subscriptionName)?.maxDeliveryCount||10;if(c.deliveryCount>=h){const p=this.deadLetterMessages.get(e)||[];if(p.push(c),this.deadLetterMessages.set(e,p),d){const g=this.queueState.get(e);g&&(g.deadLetterMessageCount=p.length,g.abandonedCount=(g.abandonedCount||0)+1,g.lastUpdate=Date.now())}else{const g=this.subscriptionState.get(e);g&&(g.deadLetterMessageCount=p.length,g.abandonedCount=(g.abandonedCount||0)+1,g.lastUpdate=Date.now())}}else{if(d){const p=this.queues.get(e);if(p)if(p.enableSessions&&c.sessionId){const g=this.sessionMessages.get(e);if(g){const m=g.get(c.sessionId)||[];m.push(c),g.set(c.sessionId,m)}}else{const g=this.queueMessages.get(e)||[];g.push(c),this.queueMessages.set(e,g)}}else{const p=this.subscriptionMessages.get(e)||[];p.push(c),this.subscriptionMessages.set(e,p)}if(d){const p=this.queueState.get(e);if(p){const g=this.getAvailableMessages(e);p.activeMessageCount=g.length,p.abandonedCount=(p.abandonedCount||0)+1,p.lastUpdate=Date.now()}}else{const p=this.subscriptionState.get(e);if(p){const g=this.getAvailableSubscriptionMessages(e);p.activeMessageCount=g.length,p.abandonedCount=(p.abandonedCount||0)+1,p.lastUpdate=Date.now()}}}return!0}processConsumption(e){const t=Date.now();for(const[s,r]of this.queues.entries()){const l=this.scheduledMessages.get(s)||[],c=this.queueMessages.get(s)||[],d=this.sessionMessages.get(s);for(let m=l.length-1;m>=0;m--){const v=l[m];if(v.scheduledEnqueueTime&&v.scheduledEnqueueTime<=t)if(l.splice(m,1),r.enableSessions&&v.sessionId&&d){const w=d.get(v.sessionId)||[];w.push(v),d.set(v.sessionId,w)}else c.push(v)}this.scheduledMessages.set(s,l),this.queueMessages.set(s,c);const h=this.lockedMessages.get(s)||[];for(let m=h.length-1;m>=0;m--){const v=h[m];v.lockExpiresAt<=t&&(h.splice(m,1),this.abandonMessage(s,v.message.lockToken))}this.lockedMessages.set(s,h);const p=this.getAvailableMessages(s);for(let m=p.length-1;m>=0;m--){const v=p[m];if(v.expirationTime<=t&&(p.splice(m,1),r.enableDeadLetteringOnMessageExpiration)){const w=this.deadLetterMessages.get(s)||[];w.push(v),this.deadLetterMessages.set(s,w)}}this.queueMessages.set(s,p);const g=this.queueState.get(s);g&&(g.activeMessageCount=this.getAvailableMessages(s).length,g.deadLetterMessageCount=(this.deadLetterMessages.get(s)||[]).length,g.scheduledMessageCount=l.length,g.lastUpdate=t)}for(const[s,r]of this.topics.entries()){const l=this.scheduledMessages.get(s)||[];for(let d=l.length-1;d>=0;d--){const h=l[d];h.scheduledEnqueueTime&&h.scheduledEnqueueTime<=t&&(l.splice(d,1),this.publishToTopic(s,h.payload,h.size,h.properties))}this.scheduledMessages.set(s,l);const c=this.subscriptions.get(s)||[];for(const d of c){const h=`${s}/subscriptions/${d.name}`,p=this.lockedMessages.get(h)||[];for(let v=p.length-1;v>=0;v--){const w=p[v];w.lockExpiresAt<=t&&(p.splice(v,1),this.abandonMessage(h,w.message.lockToken))}this.lockedMessages.set(h,p);const g=this.getAvailableSubscriptionMessages(h);for(let v=g.length-1;v>=0;v--){const w=g[v];if(w.expirationTime<=t&&(g.splice(v,1),d.enableDeadLetteringOnMessageExpiration)){const C=this.deadLetterMessages.get(h)||[];C.push(w),this.deadLetterMessages.set(h,C)}}this.subscriptionMessages.set(h,g);const m=this.subscriptionState.get(h);m&&(m.activeMessageCount=this.getAvailableSubscriptionMessages(h).length,m.deadLetterMessageCount=(this.deadLetterMessages.get(h)||[]).length,m.lastUpdate=t)}}}getAvailableMessages(e){if(!this.queues.get(e))return[];const s=Date.now();return(this.queueMessages.get(e)||[]).filter(l=>l.expirationTime>s)}getAvailableSubscriptionMessages(e){const t=Date.now();return(this.subscriptionMessages.get(e)||[]).filter(r=>r.expirationTime>t)}getTotalQueueDepth(){let e=0;for(const t of this.queues.keys())e+=this.getAvailableMessages(t).length;return e}getTotalSubscriptionMessages(){let e=0;for(const t of this.subscriptionMessages.keys())e+=this.getAvailableSubscriptionMessages(t).length;return e}getQueueMetrics(e){const t=this.queueState.get(e);return t?{activeMessageCount:t.activeMessageCount,deadLetterMessageCount:t.deadLetterMessageCount,scheduledMessageCount:t.scheduledMessageCount,sentCount:t.sentCount,receivedCount:t.receivedCount,completedCount:t.completedCount,abandonedCount:t.abandonedCount}:null}getSubscriptionMetrics(e,t){const s=`${e}/subscriptions/${t}`,r=this.subscriptionState.get(s);return r?{activeMessageCount:r.activeMessageCount,deadLetterMessageCount:r.deadLetterMessageCount,sentCount:r.sentCount,receivedCount:r.receivedCount,completedCount:r.completedCount,abandonedCount:r.abandonedCount}:null}getAllQueueMetrics(){const e=new Map;for(const t of this.queues.keys()){const s=this.getQueueMetrics(t);s&&e.set(t,s)}return e}getAllSubscriptionMetrics(){const e=new Map;for(const[t,s]of this.subscriptionState.entries())e.set(t,{activeMessageCount:s.activeMessageCount,deadLetterMessageCount:s.deadLetterMessageCount,sentCount:s.sentCount,receivedCount:s.receivedCount,completedCount:s.completedCount,abandonedCount:s.abandonedCount});return e}getActiveConnections(){return this.queues.size+this.topics.size}}class cN{topics=new Map;subscriptions=new Map;topicSubscriptions=new Map;topicMessages=new Map;subscriptionMessages=new Map;unackedMessages=new Map;orderingKeyQueues=new Map;topicState=new Map;subscriptionState=new Map;initialize(e){if(this.topics.clear(),this.subscriptions.clear(),this.topicSubscriptions.clear(),this.topicMessages.clear(),this.subscriptionMessages.clear(),this.unackedMessages.clear(),this.orderingKeyQueues.clear(),this.topicState.clear(),this.subscriptionState.clear(),e.topics)for(const t of e.topics)this.topics.set(t.name,{...t}),this.topicMessages.set(t.name,[]),this.topicSubscriptions.set(t.name,[]),this.orderingKeyQueues.set(t.name,new Map),this.topicState.set(t.name,{messageCount:t.messageCount||0,byteCount:t.byteCount||0,publishedCount:0,lastUpdate:Date.now()});if(e.subscriptions)for(const t of e.subscriptions){this.subscriptions.set(t.name,{...t}),this.subscriptionMessages.set(t.name,[]),this.unackedMessages.set(t.name,[]);const s=this.topicSubscriptions.get(t.topic)||[];s.includes(t.name)||s.push(t.name),this.topicSubscriptions.set(t.topic,s),this.subscriptionState.set(t.name,{messageCount:t.messageCount||0,unackedMessageCount:t.unackedMessageCount||0,deliveredCount:0,acknowledgedCount:0,nackedCount:0,lastUpdate:Date.now()})}}publishToTopic(e,t,s,r,l){if(!this.topics.get(e))return null;const d=Date.now(),h=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,p=d,g={id:`pubsub_${h}`,messageId:h,publishTime:p,data:t,attributes:r,orderingKey:l,size:s},m=this.topicMessages.get(e)||[];if(l){const C=this.orderingKeyQueues.get(e)||new Map,S=C.get(l)||[];S.push(g),C.set(l,S),this.orderingKeyQueues.set(e,C)}else m.push(g),this.topicMessages.set(e,m);const v=this.topicSubscriptions.get(e)||[];for(const C of v){const S=this.subscriptions.get(C);if(!S)continue;const R={...g,id:`${g.id}_${C}`},E=this.subscriptionMessages.get(C)||[];S.enableMessageOrdering,E.push(R),this.subscriptionMessages.set(C,E)}const w=this.topicState.get(e)||{messageCount:0,byteCount:0,publishedCount:0,lastUpdate:d};return w.messageCount=m.length+(l&&this.orderingKeyQueues.get(e)?.get(l)?.length||0),w.byteCount=(w.byteCount||0)+s,w.publishedCount=(w.publishedCount||0)+1,w.lastUpdate=d,this.topicState.set(e,w),h}pullFromSubscription(e,t=100){const s=this.subscriptions.get(e);if(!s)return[];const r=this.subscriptionMessages.get(e)||[];if(r.length===0)return[];const l=Date.now(),c=s.ackDeadlineSeconds*1e3,d=[],h=[];if(s.enableMessageOrdering){const m=new Map;for(const v of r){const w=v.orderingKey||"__no_key__";m.has(w)||m.set(w,[]),m.get(w).push(v)}for(const[v,w]of m.entries()){if(d.length>=t)break;const C=Math.min(w.length,t-d.length),S=w.splice(0,C);d.push(...S),h.push(...w)}for(const[v,w]of m.entries())w.length>0&&h.find(C=>(C.orderingKey||"__no_key__")===v)===void 0&&h.push(...w)}else{const m=Math.min(r.length,t);d.push(...r.splice(0,m)),h.push(...r)}this.subscriptionMessages.set(e,h);const p=this.unackedMessages.get(e)||[];for(const m of d){const v=`ack_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;m.ackId=v,p.push({message:m,subscriptionName:e,ackDeadlineExpiresAt:l+c,deliveryAttempt:1,orderingKey:m.orderingKey})}this.unackedMessages.set(e,p);const g=this.subscriptionState.get(e)||{messageCount:0,unackedMessageCount:0,deliveredCount:0,acknowledgedCount:0,nackedCount:0,lastUpdate:l};return g.messageCount=h.length,g.unackedMessageCount=p.length,g.deliveredCount=(g.deliveredCount||0)+d.length,g.lastUpdate=l,this.subscriptionState.set(e,g),d}ackMessage(e,t){if(!this.subscriptions.get(e))return!1;const r=this.unackedMessages.get(e)||[],l=r.length,c=r.filter(d=>d.message.ackId!==t);if(this.unackedMessages.set(e,c),c.length<l){const d=this.subscriptionState.get(e);return d&&(d.unackedMessageCount=c.length,d.acknowledgedCount=(d.acknowledgedCount||0)+1,d.lastUpdate=Date.now()),!0}return!1}nackMessage(e,t){if(!this.subscriptions.get(e))return!1;const r=this.unackedMessages.get(e)||[],l=r.findIndex(g=>g.message.ackId===t);if(l===-1)return!1;const d=r[l].message;r.splice(l,1),this.unackedMessages.set(e,r);const h=this.subscriptionMessages.get(e)||[];d.ackId=void 0,h.push(d),this.subscriptionMessages.set(e,h);const p=this.subscriptionState.get(e);return p&&(p.unackedMessageCount=r.length,p.messageCount=h.length,p.nackedCount=(p.nackedCount||0)+1,p.lastUpdate=Date.now()),!0}processConsumption(e){const t=Date.now();for(const[s,r]of this.unackedMessages.entries()){if(!this.subscriptions.get(s))continue;const c=[],d=[];for(const h of r)t>=h.ackDeadlineExpiresAt?c.push(h):d.push(h);if(c.length>0){const h=this.subscriptionMessages.get(s)||[];for(const g of c){const m=g.message;m.ackId=void 0,h.push(m)}this.subscriptionMessages.set(s,h);const p=this.subscriptionState.get(s);p&&(p.unackedMessageCount=d.length,p.messageCount=h.length)}this.unackedMessages.set(s,d)}for(const[s,r]of this.subscriptions.entries())if(r.pushEndpoint){const l=this.subscriptionMessages.get(s)||[];if(l.length>0){const d=Math.min(l.length,10),h=l.splice(0,d),p=this.unackedMessages.get(s)||[],g=Date.now(),m=r.ackDeadlineSeconds*1e3;for(const w of h){const C=`ack_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;w.ackId=C,p.push({message:w,subscriptionName:s,ackDeadlineExpiresAt:g+m,deliveryAttempt:1,orderingKey:w.orderingKey})}this.subscriptionMessages.set(s,l),this.unackedMessages.set(s,p);const v=this.subscriptionState.get(s);v&&(v.messageCount=l.length,v.unackedMessageCount=p.length,v.deliveredCount=(v.deliveredCount||0)+h.length)}}for(const[s,r]of this.topics.entries()){const c=(r.messageRetentionDuration||604800)*1e3,d=this.topicMessages.get(s)||[],h=Date.now(),p=d.filter(g=>h-g.publishTime<c);if(p.length<d.length){d.length-p.length,this.topicMessages.set(s,p);const g=this.topicState.get(s);g&&(g.messageCount=p.length)}}}getTopicMetrics(e){if(!this.topics.get(e))return null;const s=this.topicState.get(e);return s?{messageCount:s.messageCount,byteCount:s.byteCount,publishedCount:s.publishedCount}:null}getSubscriptionMetrics(e){if(!this.subscriptions.get(e))return null;const s=this.subscriptionState.get(e);return s?{messageCount:s.messageCount,unackedMessageCount:s.unackedMessageCount,deliveredCount:s.deliveredCount,acknowledgedCount:s.acknowledgedCount,nackedCount:s.nackedCount}:null}getAllTopicMetrics(){const e=new Map;for(const t of this.topics.keys()){const s=this.getTopicMetrics(t);s&&e.set(t,s)}return e}getAllSubscriptionMetrics(){const e=new Map;for(const t of this.subscriptions.keys()){const s=this.getSubscriptionMetrics(t);s&&e.set(t,s)}return e}getTotalTopicMessages(){let e=0;for(const t of this.topicMessages.values())e+=t.length;for(const t of this.orderingKeyQueues.values())for(const s of t.values())e+=s.length;return e}getTotalUnackedMessages(){let e=0;for(const t of this.unackedMessages.values())e+=t.length;return e}getActiveConnections(){let e=0;for(const t of this.subscriptions.values())t.pushEndpoint,e+=1;return Math.max(1,e+1)}updateTopic(e,t){const s=this.topics.get(e);s&&(Object.assign(s,t),this.topics.set(e,s))}updateSubscription(e,t){const s=this.subscriptions.get(e);s&&(Object.assign(s,t),this.subscriptions.set(e,s))}}class uN{services=new Map;routes=new Map;upstreams=new Map;consumers=new Map;plugins=[];roundRobinCounters=new Map;connectionCounts=new Map;consistentHashRing=new Map;rateLimitCounters=new Map;initialize(e){if(this.services.clear(),this.routes.clear(),this.upstreams.clear(),this.consumers.clear(),this.plugins=[],this.roundRobinCounters.clear(),this.connectionCounts.clear(),this.consistentHashRing.clear(),this.rateLimitCounters.clear(),e.services)for(const t of e.services)this.services.set(t.id,{...t});if(e.routes)for(const t of e.routes)this.routes.set(t.id,{...t});if(e.upstreams){for(const t of e.upstreams)if(this.upstreams.set(t.name,{...t}),this.roundRobinCounters.set(t.name,0),t.algorithm==="consistent-hashing"&&t.targets){const s=[...t.targets].filter(r=>r.health==="healthy").sort((r,l)=>r.target.localeCompare(l.target));this.consistentHashRing.set(t.name,s.map(r=>r.target))}}if(e.consumers)for(const t of e.consumers)this.consumers.set(t.id,{...t});e.plugins&&(this.plugins=e.plugins.filter(t=>t.enabled))}routeRequest(e){const t=Date.now(),s=this.matchRoute(e);if(!s)return{match:null,response:{status:404,error:"No route matched",latency:Date.now()-t}};const r=this.executePlugins(e,s,"access");if(r.blocked)return{match:s,response:{status:r.status||403,error:r.error||"Request blocked by plugin",latency:Date.now()-t}};const l=this.selectUpstreamTarget(s.service);if(!l)return{match:s,response:{status:503,error:"No healthy upstream target available",latency:Date.now()-t}};this.transformPath(e.path,s);const c={status:200,latency:Date.now()-t};return c.latency=(c.latency||0)+this.simulateUpstreamLatency(l),{match:s,response:c,target:l}}matchRoute(e){const t=Array.from(this.routes.values()).sort((s,r)=>(r.priority||0)-(s.priority||0));for(const s of t){if(s.method&&s.method.toUpperCase()!==e.method.toUpperCase())continue;const r=this.matchPath(s.path,e.path);if(r){const l=this.services.get(s.service);if(!l||!l.enabled)continue;return{route:s,service:l,matchedPath:r.matched,remainingPath:r.remaining}}}return null}matchPath(e,t){if(t.startsWith(e))return{matched:e,remaining:t.substring(e.length)};try{if(new RegExp(`^${e}$`).test(t))return{matched:t,remaining:""}}catch{}return null}selectUpstreamTarget(e){const t=e.upstream||e.name,s=this.upstreams.get(t);if(!s||!s.targets||s.targets.length===0)return e.url;const r=s.targets.filter(c=>c.health==="healthy");if(r.length===0)return null;switch(s.algorithm||"round-robin"){case"round-robin":return this.selectRoundRobin(t,r);case"consistent-hashing":return this.selectConsistentHash(t,r,e.name);case"least-connections":return this.selectLeastConnections(r);default:return r[0].target}}selectRoundRobin(e,t){const s=this.roundRobinCounters.get(e)||0,r=t[s%t.length];return this.roundRobinCounters.set(e,(s+1)%t.length),r.target}selectConsistentHash(e,t,s){const l=this.simpleHash(s)%t.length;return t[l].target}selectLeastConnections(e){let t=1/0,s=e[0].target;for(const l of e){const c=this.connectionCounts.get(l.target)||0;c<t&&(t=c,s=l.target)}const r=this.connectionCounts.get(s)||0;return this.connectionCounts.set(s,r+1),s}simpleHash(e){let t=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);t=(t<<5)-t+r,t=t&t}return Math.abs(t)}transformPath(e,t){return t.route.stripPath?t.remainingPath||"/":e}executePlugins(e,t,s){const r=this.plugins.filter(l=>!(l.route&&l.route!==t.route.id||l.service&&l.service!==t.service.id));for(const l of r){const c=this.executePlugin(l,e,t,s);if(c.blocked)return c}return{blocked:!1}}executePlugin(e,t,s,r){const l=e.config||{};switch(e.name){case"rate-limiting":return this.executeRateLimiting(e,t,s,l);case"key-auth":return this.executeKeyAuth(e,t,s,l);case"jwt":return this.executeJWT(e,t,s,l);case"cors":return{blocked:!1};case"ip-restriction":return this.executeIPRestriction(e,t,s,l);default:return{blocked:!1}}}executeRateLimiting(e,t,s,r){const l=t.consumerId||s.service.id||s.route.id,c=Date.now();let d=this.rateLimitCounters.get(e.id);d||(d=new Map,this.rateLimitCounters.set(e.id,d));let h=d.get(l);(!h||h.resetAt<c)&&(h={count:0,resetAt:c+6e4},d.set(l,h));const p=r.minute||1e3;return r.hour,h.count++,h.count>p?{blocked:!0,status:429,error:"Rate limit exceeded (per minute)"}:{blocked:!1}}executeKeyAuth(e,t,s,r){const l=r.key_names||["apikey"],c=t.apiKey||t.headers?.[l[0]]||t.query?.[l[0]];return c?Array.from(this.consumers.values()).find(h=>h.credentials?.some(p=>p.type==="key-auth"&&p.key===c))?{blocked:!1}:{blocked:!0,status:401,error:"Invalid API key"}:{blocked:!0,status:401,error:"API key required"}}executeJWT(e,t,s,r){const l=t.headers?.Authorization;return!l||!l.startsWith("Bearer ")?{blocked:!0,status:401,error:"JWT token required"}:{blocked:!1}}executeIPRestriction(e,t,s,r){const l=t.headers?.["X-Forwarded-For"]||t.headers?.["X-Real-IP"]||"unknown",c=r.whitelist||[];return(r.blacklist||[]).includes(l)?{blocked:!0,status:403,error:"IP address blocked"}:c.length>0&&!c.includes(l)?{blocked:!0,status:403,error:"IP address not whitelisted"}:{blocked:!1}}simulateUpstreamLatency(e){return 10+Math.random()*40}getStats(){return{services:this.services.size,routes:this.routes.size,upstreams:this.upstreams.size,consumers:this.consumers.size,plugins:this.plugins.length}}}class dN{proxies=new Map;policies=[];organization;environment;quotaCounters=new Map;spikeArrestBuckets=new Map;apiKeyCache=new Map;oauthTokenCache=new Map;jwtTokenCache=new Map;proxyMetrics=new Map;initialize(e){if(this.proxies.clear(),this.policies=[],this.quotaCounters.clear(),this.spikeArrestBuckets.clear(),this.apiKeyCache.clear(),this.oauthTokenCache.clear(),this.jwtTokenCache.clear(),this.proxyMetrics.clear(),this.organization=e.organization||"archiphoenix-org",this.environment=e.environment||"prod",e.proxies)for(const t of e.proxies)this.proxies.set(t.name,{...t}),this.proxyMetrics.set(t.name,{requestCount:0,errorCount:0,totalLatency:0,lastRequestTime:0}),t.spikeArrest&&t.spikeArrest>0&&this.spikeArrestBuckets.set(t.name,{tokens:t.spikeArrest,lastRefill:Date.now(),rate:t.spikeArrest});e.policies&&(this.policies=e.policies.filter(t=>t.enabled))}routeRequest(e){const t=Date.now(),s=this.matchProxy(e);if(!s)return{match:null,response:{status:404,error:"No API proxy matched for path",latency:Date.now()-t}};if(s.proxy.status==="undeployed")return this.updateProxyMetrics(s.proxy.name,!1,Date.now()-t),{match:s,response:{status:503,error:`Proxy '${s.proxy.name}' is not deployed`,latency:Date.now()-t}};const r=this.policies.filter(w=>w.enabled&&(w.executionFlow==="PreFlow"||!w.executionFlow&&this.isPreFlowPolicy(w.type))),l=this.executePolicies(r,e,s,"PreFlow");if(l.blocked)return this.updateProxyMetrics(s.proxy.name,!0,Date.now()-t),{match:s,response:{status:l.status||401,error:l.error||"Authentication failed",latency:Date.now()-t}};const c=this.policies.filter(w=>w.enabled&&(w.executionFlow==="RequestFlow"||!w.executionFlow&&this.isRequestFlowPolicy(w.type))),d=this.executePolicies(c,e,s,"RequestFlow");if(d.blocked)return this.updateProxyMetrics(s.proxy.name,!0,Date.now()-t),{match:s,response:{status:d.status||429,error:d.error||"Request policy violation",latency:Date.now()-t}};const h=this.buildTargetUrl(s.proxy,s.remainingPath),p=this.simulateUpstreamLatency(h),g=Date.now()-t+p,m=this.policies.filter(w=>w.enabled&&(w.executionFlow==="PostFlow"||!w.executionFlow&&this.isPostFlowPolicy(w.type))),v={status:200,latency:g};return this.executePolicies(m,e,s,"PostFlow",v),this.updateProxyMetrics(s.proxy.name,!1,g),{match:s,response:v,target:h}}matchProxy(e){const t=Array.from(this.proxies.values()).filter(s=>s.status==="deployed"||s.status===void 0).sort((s,r)=>r.basePath.length-s.basePath.length);for(const s of t)if(e.path.startsWith(s.basePath)){const r=e.path.slice(s.basePath.length)||"/";return{proxy:s,matchedPath:s.basePath,remainingPath:r}}return null}isPreFlowPolicy(e){return["verify-api-key","oauth","jwt"].includes(e)}isRequestFlowPolicy(e){return["quota","spike-arrest"].includes(e)}isPostFlowPolicy(e){return["cors","xml-to-json"].includes(e)}evaluateCondition(e,t,s){if(!e)return!0;try{if(e.includes("request.path")){const r=e.match(/request\.path\s*[=!]=\s*['"]([^'"]+)['"]/);if(r)return t.path===r[1]}return e.length>0}catch{return!0}}executePolicies(e,t,s,r,l){for(const c of e)if(this.evaluateCondition(c.condition,t,s))if(r==="PreFlow"){const d=this.executePreFlowPolicy(c,t,s);if(d.blocked)return d}else if(r==="RequestFlow"){const d=this.executeRequestFlowPolicy(c,t,s);if(d.blocked)return d}else r==="PostFlow"&&l&&this.executePostFlowPolicy(c,t,s,l);return{blocked:!1}}executePreFlowPolicy(e,t,s){if(s.proxy,e.type==="verify-api-key"){const r=t.apiKey||t.headers?.["X-API-Key"]||t.headers?.apikey||t.query?.apikey;if(!r)return{blocked:!0,status:401,error:"API key is required"};if(!this.validateApiKey(r))return{blocked:!0,status:401,error:"Invalid API key"}}if(e.type==="oauth"&&s.proxy.enableOAuth){const l=t.oauthToken||t.headers?.Authorization?.replace("Bearer ","")||t.headers?.Authorization?.replace("OAuth ","");if(!l)return{blocked:!0,status:401,error:"OAuth token is required"};if(!this.validateOAuthToken(l))return{blocked:!0,status:401,error:"Invalid or expired OAuth token"}}if(e.type==="jwt"){const r=s.proxy;if(r.jwtIssuer){const l=t.jwtToken||t.headers?.Authorization?.replace("Bearer ","")||t.headers?.["X-JWT-Token"];if(!l)return{blocked:!0,status:401,error:"JWT token is required"};if(!this.validateJWTToken(l,r.jwtIssuer))return{blocked:!0,status:401,error:"Invalid or expired JWT token"}}}return{blocked:!1}}executeRequestFlowPolicy(e,t,s){const r=s.proxy,l=t.headers?.["X-Consumer-ID"]||"default";if(e.type==="quota"){const c=e.config?.quota||r.quota,d=e.config?.interval||r.quotaInterval;if(c&&d&&!this.checkQuota(r.name,l,c,d))return{blocked:!0,status:429,error:`Quota exceeded: ${c} requests per ${d} seconds`}}if(e.type==="spike-arrest"){const c=e.config?.rate||r.spikeArrest;if(c&&c>0&&!this.checkSpikeArrest(r.name,c))return{blocked:!0,status:429,error:`Spike arrest limit exceeded: ${c} requests per second`}}return{blocked:!1}}executePostFlowPolicy(e,t,s,r){e.type==="cors"&&(r.headers||(r.headers={}),r.headers["Access-Control-Allow-Origin"]=e.config?.origins?.[0]||"*",r.headers["Access-Control-Allow-Methods"]=e.config?.methods?.join(", ")||"GET, POST, PUT, DELETE",r.headers["Access-Control-Allow-Headers"]=e.config?.headers?.join(", ")||"Content-Type, Authorization"),e.type==="xml-to-json"&&(r.headers||(r.headers={}),r.headers["Content-Type"]="application/json")}checkQuota(e,t,s,r){const l=Date.now(),c=r*1e3;let d=this.quotaCounters.get(e);d||(d=new Map,this.quotaCounters.set(e,d));let h=d.get(t);return(!h||h.resetAt<l)&&(h={count:0,resetAt:l+c,identifier:t},d.set(t,h)),h.count>=s?!1:(h.count++,!0)}checkSpikeArrest(e,t){const s=Date.now();let r=this.spikeArrestBuckets.get(e);r||(r={tokens:t,lastRefill:s,rate:t},this.spikeArrestBuckets.set(e,r));const c=(s-r.lastRefill)/1e3*r.rate;return r.tokens=Math.min(r.rate,r.tokens+c),r.lastRefill=s,r.tokens<1?!1:(r.tokens-=1,!0)}validateApiKey(e){const t=this.apiKeyCache.get(e);if(t&&t.expiresAt>Date.now())return t.valid;const s=e.length>=10;return this.apiKeyCache.set(e,{valid:s,expiresAt:Date.now()+300*1e3}),s}validateOAuthToken(e){const t=this.oauthTokenCache.get(e);if(t&&t.expiresAt>Date.now())return t.valid;const s=e.length>=20;return this.oauthTokenCache.set(e,{valid:s,expiresAt:Date.now()+3600*1e3}),s}validateJWTToken(e,t){const s=this.jwtTokenCache.get(e);if(s&&s.expiresAt>Date.now())return s.valid&&s.issuer===t;const r=e.length>=20;return this.jwtTokenCache.set(e,{valid:r,issuer:t,expiresAt:Date.now()+3600*1e3}),r}buildTargetUrl(e,t){const s=e.targetEndpoint.replace(/\/$/,""),r=t.startsWith("/")?t:`/${t}`;return`${s}${r}`}simulateUpstreamLatency(e){const t=10+Math.random()*40,s=(Math.random()-.5)*10;return Math.max(1,t+s)}updateProxyMetrics(e,t,s){const r=this.proxyMetrics.get(e);r&&(r.requestCount++,t&&r.errorCount++,r.totalLatency+=s,r.lastRequestTime=Date.now())}getStats(){let e=0,t=0,s=0;for(const l of this.proxyMetrics.values())e+=l.requestCount,t+=l.errorCount,s+=l.totalLatency;const r=e>0?s/e:0;return{proxies:this.proxies.size,policies:this.policies.length,totalRequests:e,totalErrors:t,avgLatency:r}}getProxyMetrics(e){const t=this.proxyMetrics.get(e);return t?{requestCount:t.requestCount,errorCount:t.errorCount,avgResponseTime:t.requestCount>0?t.totalLatency/t.requestCount:0}:null}clearCaches(){this.apiKeyCache.clear(),this.oauthTokenCache.clear(),this.jwtTokenCache.clear()}}class fN{applications=new Map;connectors=new Map;organization;environment;applicationMetrics=new Map;connectorMetrics=new Map;reconnectionState=new Map;initialize(e){if(this.applications.clear(),this.connectors.clear(),this.applicationMetrics.clear(),this.connectorMetrics.clear(),this.reconnectionState.clear(),this.organization=e.organization||"archiphoenix-org",this.environment=e.environment||"production",e.applications)for(const t of e.applications)this.applications.set(t.name,{...t}),this.applicationMetrics.set(t.name,{requestCount:0,errorCount:0,totalLatency:0,lastRequestTime:0});if(e.connectors)for(const t of e.connectors)this.connectors.set(t.name,{...t}),this.connectorMetrics.set(t.name,{requestCount:0,errorCount:0,totalLatency:0,lastRequestTime:0}),this.reconnectionState.set(t.name,{attempts:0,lastAttempt:0,nextAttempt:0})}processData(e){const t=Date.now(),s=this.matchApplication(e);if(!s)return{match:null,response:{status:"error",error:"No Mule application matched for request",latency:Date.now()-t}};if(s.application.status!=="running")return this.updateApplicationMetrics(s.application.name,!1,Date.now()-t),{match:s,response:{status:"error",error:`Application '${s.application.name}' is not running (status: ${s.application.status})`,latency:Date.now()-t}};let r=0,l;try{r=this.processFlow(s,e)}catch(d){l=d instanceof Error?d.message:"Unknown error"}if(l&&!this.handleError(s.application,l))return this.updateApplicationMetrics(s.application.name,!0,Date.now()-t),{match:s,response:{status:"error",error:l,latency:Date.now()-t,application:s.application.name,flow:s.flow?.name}};const c=this.transformData(e,s);return this.updateApplicationMetrics(s.application.name,!1,Date.now()-t),s.matchedConnector&&this.updateConnectorMetrics(s.matchedConnector.name,!1,Date.now()-t),{match:s,response:{status:"success",data:c.data,format:c.format||e.format,latency:Date.now()-t,application:s.application.name,flow:s.flow?.name,connector:s.matchedConnector?.name}}}matchApplication(e){if(e.sourceComponentType||e.targetComponentType)for(const[t,s]of this.applications.entries()){if(s.status!=="running")continue;const r=this.findMatchingConnector(s,e.sourceComponentType,e.targetComponentType);if(r){const l=s.flows?.find(c=>c.source===r.name||c.target===r.name)||s.flows?.[0];return{application:s,flow:l,matchedConnector:r}}}for(const[t,s]of this.applications.entries())if(s.status==="running")return{application:s,flow:s.flows?.[0]};return null}findMatchingConnector(e,t,s){const r=e.connectors||[];for(const l of r){const c=this.connectors.get(l);if(!(!c||!c.enabled)&&(t&&this.connectorMatchesComponentType(c,t)||s&&this.connectorMatchesComponentType(c,s)))return c}return null}connectorMatchesComponentType(e,t){const s={database:["postgres","mongodb","redis","cassandra","clickhouse","snowflake","elasticsearch"],api:["rest","grpc","graphql","soap","websocket","webhook"],messaging:["kafka","rabbitmq","activemq","aws-sqs","azure-service-bus","gcp-pubsub"],file:["s3-datalake"],business:["crm","erp","payment-gateway"]};for(const[r,l]of Object.entries(s))if(e.type===r&&l.includes(t))return!0;return e.targetComponentType===t}processFlow(e,t){if(!e.flow)return this.calculateBaseProcessingTime(e.application);let s=this.calculateBaseProcessingTime(e.application);if(e.flow.processors)for(const r of e.flow.processors)s+=this.processProcessor(r,t);return e.matchedConnector&&(s+=this.calculateConnectorLatency(e.matchedConnector)),s}calculateBaseProcessingTime(e){const t=5+Math.random()*10,s=parseFloat(e.runtimeVersion)>=4.5?.9:1;return t*s}processProcessor(e,t){switch(e.type){case"transform":return 2+Math.random()*6;case"validate":return 1+Math.random()*2;case"filter":return .5+Math.random()*1.5;case"enrich":return 3+Math.random()*7;case"route":return .5+Math.random()*.5;default:return 1}}calculateConnectorLatency(e){const s={database:10,api:20,messaging:5,file:50,custom:15}[e.type]||15,r=s*.5*Math.random();return s+r}transformData(e,t){if(e.targetComponentType){const s=this.getTargetFormat(e.targetComponentType);if(s&&s!==e.format)return{data:e.body,format:s}}return{data:e.body,format:e.format}}getTargetFormat(e){return{postgres:"json",mongodb:"json",redis:"json",rest:"json",graphql:"json",soap:"xml",grpc:"binary",kafka:"json",rabbitmq:"json"}[e]}handleError(e,t){switch(e.errorStrategy||"continue"){case"continue":return!0;case"rollback":return!1;case"propagate":return!1;default:return!1}}updateApplicationMetrics(e,t,s){const r=this.applicationMetrics.get(e);r&&(r.requestCount++,t&&r.errorCount++,r.totalLatency+=s,r.lastRequestTime=Date.now())}updateConnectorMetrics(e,t,s){const r=this.connectorMetrics.get(e);r&&(r.requestCount++,t&&r.errorCount++,r.totalLatency+=s,r.lastRequestTime=Date.now())}getStats(){let e=0,t=0,s=0;for(const c of this.applicationMetrics.values())e+=c.requestCount,t+=c.errorCount,s+=c.totalLatency;const r=Array.from(this.applications.values()).filter(c=>c.status==="running").length,l=Array.from(this.connectors.values()).filter(c=>c.enabled).length;return{applications:this.applications.size,runningApplications:r,connectors:this.connectors.size,enabledConnectors:l,totalRequests:e,totalErrors:t,avgLatency:e>0?s/e:0}}getApplicationMetrics(e){const t=this.applicationMetrics.get(e);return t?{requestCount:t.requestCount,errorCount:t.errorCount,avgLatency:t.requestCount>0?t.totalLatency/t.requestCount:0}:null}getConnectorMetrics(e){const t=this.connectorMetrics.get(e);return t?{requestCount:t.requestCount,errorCount:t.errorCount,avgLatency:t.requestCount>0?t.totalLatency/t.requestCount:0}:null}}class hN{parseQuery(e){const t=e.query.trim(),s=this.extractOperationType(t),r=e.operationName||this.extractOperationName(t),l=this.extractFields(t),c=this.calculateDepth(t),d=this.estimateComplexity(t,r);return{operationName:r,operationType:s,fields:l,depth:c,complexity:d,rawQuery:t}}extractOperationType(e){const t=e.trim();return t.startsWith("mutation")?"mutation":t.startsWith("subscription")?"subscription":"query"}extractOperationName(e){const t=e.match(/(?:query|mutation|subscription)\s+([a-zA-Z0-9_]+)/);return t?t[1]:void 0}extractFields(e){const t=[],s=/([a-zA-Z0-9_]+)\s*(?:\(|\{)/g;let r;for(;(r=s.exec(e))!==null;)t.push(r[1]);return t.length>0?t:["unknown"]}calculateDepth(e){let t=0,s=0;for(const r of e)r==="{"?(t+=1,s=Math.max(s,t)):r==="}"&&(t=Math.max(0,t-1));return s}estimateComplexity(e,t){const s=e.match(/[a-zA-Z0-9_]+(\s*[({])/g),r=s?s.length:5,l=this.calculateDepth(e),c=t?Math.max(1,t.length%5):1;return Math.round(r*(1+l*.5)*c*10)}}class pN{federationConfig;constructor(e){this.federationConfig=e}planQuery(e,t){if(t.length===0)return{subqueries:[],requiresFederation:!1,estimatedLatency:0};const s=this.federationConfig?.enabled??!1,l=this.selectServices(e,t).map(h=>({serviceId:h.id,serviceName:h.name,endpoint:h.endpoint,query:e.rawQuery,fields:e.fields,estimatedLatency:this.estimateServiceLatency(h,e)})),c=l.reduce((h,p)=>h+p.estimatedLatency,0),d=s?3+Math.random()*5:0;return{subqueries:l,requiresFederation:s,estimatedLatency:c+d}}selectServices(e,t){if(this.federationConfig?.enabled&&this.federationConfig.services?.length){const l=t.filter(c=>this.federationConfig.services.includes(c.name));return l.length>0?l:t.slice(0,Math.min(2,t.length))}const s=this.hashString(e.operationName||e.rawQuery),r=Math.abs(s)%t.length;return[t[r]]}estimateServiceLatency(e,t){const s=e.avgLatencyMs,r=Math.sqrt(t.complexity)*.8,l=t.depth*1.5,c=Math.random()*5;return s+r+l+c}hashString(e){let t=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);t=(t<<5)-t+r,t|=0}return t}updateFederationConfig(e){this.federationConfig=e}}class gN{serviceRegistry;constructor(e){this.serviceRegistry=e}executePlan(e){if(e.subqueries.length===0)return{success:!1,totalLatency:0,error:"No services available",executedEndpoints:[]};let t=0;const s=[];for(const r of e.subqueries){const l=this.serviceRegistry.getService(r.serviceId);if(!l)return{success:!1,totalLatency:t,error:`Service ${r.serviceId} not found`,failedService:r.serviceId,executedEndpoints:s};const c=r.endpoint||l.endpoint;s.push(c);const h=this.getEndpointLatency(c,l.avgLatencyMs)+(r.estimatedLatency-l.avgLatencyMs);if(t+=h,Math.random()<l.errorRate)return this.serviceRegistry.recordRequest(l.id,h,!1),{success:!1,totalLatency:t,error:`Upstream error at ${l.name} (${c})`,failedService:l.id,executedEndpoints:s};this.serviceRegistry.recordRequest(l.id,h,!0)}return{success:!0,totalLatency:t,executedEndpoints:s}}getEndpointLatency(e,t){return e.includes("localhost")||e.includes("127.0.0.1")?t*.8:e.includes("https://")?t*1.1:t}}class mN{services=new Map;registerService(e){const t=this.services.get(e.id);this.services.set(e.id,{id:e.id,name:e.name,endpoint:e.endpoint,avgLatencyMs:e.avgLatencyMs??20,errorRate:e.errorRate??.01,status:e.status??"connected",rollingLatency:t?.rollingLatency||[],rollingErrors:t?.rollingErrors||[]})}unregisterService(e){this.services.delete(e)}getConnectedServices(){return Array.from(this.services.values()).filter(e=>e.status==="connected")}getService(e){return this.services.get(e)}getServiceByName(e){return Array.from(this.services.values()).find(t=>t.name===e)}recordRequest(e,t,s){const r=this.services.get(e);if(!r)return;r.rollingLatency.push(t),r.rollingLatency.length>50&&r.rollingLatency.shift(),s||(r.rollingErrors.push(t),r.rollingErrors.length>50&&r.rollingErrors.shift());const l=r.rollingLatency.reduce((d,h)=>d+h,0)/r.rollingLatency.length;r.avgLatencyMs=l;const c=r.rollingErrors.length/Math.max(r.rollingLatency.length,1);r.errorRate=c}initialize(e){this.services.clear();for(const t of e)this.registerService(t)}getAllServices(){return Array.from(this.services.values())}}class yN{cache=new Map;ttl;persistQueries;constructor(e=0,t=!1){this.ttl=e,this.persistQueries=t}generateCacheKey(e,t){const s=t?JSON.stringify(t):"";return this.hashString(e+s)}getCached(e,t){if(this.ttl<=0||!this.persistQueries)return{hit:!1,latencyReduction:0};const s=this.generateCacheKey(e,t),r=this.cache.get(s);return r?Date.now()-r.timestamp>r.ttl*1e3?(this.cache.delete(s),{hit:!1,latencyReduction:0}):{hit:!0,latencyReduction:.7}:{hit:!1,latencyReduction:0}}setCached(e,t,s){if(this.ttl<=0||!this.persistQueries)return;const r=this.generateCacheKey(e,s);if(this.cache.set(r,{query:e,response:t,timestamp:Date.now(),ttl:this.ttl}),this.cache.size>1e3){const l=this.cache.keys().next().value;this.cache.delete(l)}}getCacheHitProbability(e){if(this.ttl<=0||!this.persistQueries)return 0;const t=.2,s=Math.min(e.complexity/2e3,.4);return Math.min(t+s,.6)}updateConfig(e,t){e!==void 0&&(this.ttl=e),t!==void 0&&(this.persistQueries=t)}clearCache(){this.cache.clear()}hashString(e){let t=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);t=(t<<5)-t+r,t|=0}return Math.abs(t).toString(16)}}class vN{enabled;limits=new Map;defaultLimit=100;windowMs=6e4;constructor(e=!1,t=100){this.enabled=e,this.defaultLimit=t}checkLimit(e,t){if(!this.enabled)return{allowed:!0,remaining:1/0,resetAt:Date.now()+this.windowMs};const s=t||this.defaultLimit,r=Date.now(),l=this.limits.get(e);if(!l||r>=l.resetAt){const c={count:1,resetAt:r+this.windowMs,windowStart:r};return this.limits.set(e,c),{allowed:!0,remaining:s-1,resetAt:c.resetAt}}return l.count>=s?{allowed:!1,remaining:0,resetAt:l.resetAt}:(l.count+=1,{allowed:!0,remaining:s-l.count,resetAt:l.resetAt})}getIdentifier(e){if(!e)return"default";const t=e["x-api-key"]||e.apikey;if(t)return`key:${t}`;const s=e["x-client-id"];return s?`client:${s}`:"default"}setEnabled(e){this.enabled=e}updateDefaultLimit(e){this.defaultLimit=e}clearLimits(){this.limits.clear()}}class bN{maxQueryDepth;maxQueryComplexity;enabled;constructor(e=15,t=1e3,s=!0){this.maxQueryDepth=e,this.maxQueryComplexity=t,this.enabled=s}validateQuery(e){return this.enabled?e.depth>this.maxQueryDepth?{valid:!1,error:`Query depth ${e.depth} exceeds limit ${this.maxQueryDepth}`}:e.complexity>this.maxQueryComplexity?{valid:!1,error:`Query complexity ${e.complexity} exceeds limit ${this.maxQueryComplexity}`}:{valid:!0}:{valid:!0}}updateLimits(e,t){e!==void 0&&(this.maxQueryDepth=e),t!==void 0&&(this.maxQueryComplexity=t)}setEnabled(e){this.enabled=e}}class xN{config;constructor(e){this.config=e}isEnabled(){return this.config?.enabled??!1}getVersion(){return this.config?.version}getFederatedServices(){return this.config?.services||[]}getPlanningOverhead(){return this.isEnabled()?(this.config?.version==="2"?2:4)+Math.random()*3:0}isFederatedService(e){return this.isEnabled()?this.config?.services?.includes(e.name)??!1:!1}getSupergraphSchema(){return this.config?.supergraph}updateConfig(e){this.config=e}}class wN{queryParser;queryPlanner;queryExecutor;serviceRegistry;cacheManager;rateLimiter;complexityAnalyzer;federationComposer;constructor(){this.serviceRegistry=new mN,this.queryParser=new hN,this.queryPlanner=new pN,this.queryExecutor=new gN(this.serviceRegistry),this.cacheManager=new yN,this.rateLimiter=new vN,this.complexityAnalyzer=new bN,this.federationComposer=new xN}initialize(e){e.services&&this.serviceRegistry.initialize(e.services),this.federationComposer.updateConfig(e.federation),this.queryPlanner.updateFederationConfig(e.federation),this.cacheManager.updateConfig(e.cacheTtl??0,e.persistQueries??!1),this.rateLimiter.setEnabled(e.enableRateLimiting??!1),this.complexityAnalyzer.updateLimits(e.maxQueryDepth??15,e.maxQueryComplexity??1e3),this.complexityAnalyzer.setEnabled(e.enableQueryComplexityAnalysis??!0)}routeRequest(e){const t=Date.now();if(!e.query||e.query.trim().length===0)return{status:400,latency:Date.now()-t,error:"Empty query"};const s=this.rateLimiter.getIdentifier(e.headers);if(!this.rateLimiter.checkLimit(s).allowed)return{status:429,latency:Date.now()-t,error:"Rate limit exceeded"};const l=this.queryParser.parseQuery(e),c=this.cacheManager.getCached(e.query,e.variables);if(c.hit)return{status:200,latency:(Date.now()-t)*(1-c.latencyReduction)};const d=this.complexityAnalyzer.validateQuery(l);if(!d.valid)return{status:413,latency:Date.now()-t,error:d.error};const h=this.serviceRegistry.getConnectedServices();if(h.length===0)return{status:503,latency:Date.now()-t,error:"No connected services"};const p=this.queryPlanner.planQuery(l,h),g=this.queryExecutor.executePlan(p);return g.success?(this.cacheManager.setCached(e.query,{success:!0},e.variables),{status:200,latency:g.totalLatency+(Date.now()-t)}):{status:502,latency:g.totalLatency+(Date.now()-t),error:g.error}}getServiceRegistry(){return this.serviceRegistry}getCacheManager(){return this.cacheManager}getRateLimiter(){return this.rateLimiter}}class CN{backends=new Map;endpoints=new Map;config={};circuitBreakers=new Map;cache=new Map;cacheMode="memory";defaultCacheTtl=5;redisEngine=null;redisNodeId="";backendMetrics=new Map;batchQueue=new Map;batchTimer=null;batchSize=10;batchTimeout=50;initialize(e){if(this.config=e,this.backends.clear(),this.endpoints.clear(),this.circuitBreakers.clear(),this.cache.clear(),this.backendMetrics.clear(),this.cacheMode=e.cacheMode||"memory",this.defaultCacheTtl=e.cacheTtl||5,this.redisEngine=e.redisEngine||null,this.redisNodeId=e.redisNodeId||"",e.backends)for(const t of e.backends)this.backends.set(t.id,{...t}),this.initializeCircuitBreaker(t.id,t.circuitBreaker),this.initializeBackendMetrics(t.id);if(e.endpoints)for(const t of e.endpoints)this.endpoints.set(t.id,{...t})}initializeCircuitBreaker(e,t){t?.enabled&&this.circuitBreakers.set(e,{failures:0,successes:0,state:"closed",lastFailureTime:0,nextAttemptTime:0})}initializeBackendMetrics(e){this.backendMetrics.set(e,{requestCount:0,errorCount:0,totalLatency:0,averageLatency:0,lastRequestTime:0,cacheHits:0,cacheMisses:0})}routeRequest(e){const t=Date.now(),s=this.matchEndpoint(e);if(!s)return{status:404,error:"Endpoint not found",latency:Date.now()-t,backendResponses:[],cacheHit:!1};if(this.config.enableCaching&&this.cacheMode!=="off"){const c=this.getCacheKey(s,e),d=this.getCached(c);if(d){const h=this.backendMetrics.get(s.backends[0])||this.initializeBackendMetrics(s.backends[0]);return h&&h.cacheHits++,{status:200,data:d.data,latency:Date.now()-t,backendResponses:[],cacheHit:!0}}}const r=this.aggregateBackends(s,e),l=this.aggregateResponses(s,r);if(this.config.enableCaching&&this.cacheMode!=="off"&&l.status===200){const c=this.getCacheKey(s,e),d=s.cacheTtl||this.defaultCacheTtl;this.setCached(c,l.data,d)}for(const c of r){const d=this.backendMetrics.get(c.backendId);d&&(d.requestCount++,c.status>=400&&d.errorCount++,d.totalLatency+=c.latency,d.averageLatency=d.totalLatency/d.requestCount,d.lastRequestTime=Date.now(),c.cached||d.cacheMisses++)}return{...l,latency:Date.now()-t,backendResponses:r,cacheHit:!1}}matchEndpoint(e){for(const t of this.endpoints.values())if(t.path===e.path&&t.method===e.method)return t;return null}aggregateBackends(e,t){const s=e.backends;switch(e.aggregator){case"parallel":return this.executeBackendsParallel(s,t,e);case"sequential":return this.executeBackendsSequential(s,t,e);case"merge":default:return this.executeBackendsParallel(s,t,e)}}executeBackendsParallel(e,t,s){const r=[];for(const l of e){const c=this.executeBackend(l,t,s);r.push(c)}return r}executeBackendsSequential(e,t,s){const r=[];let l={};for(const c of e){const d={...t,body:{...typeof t.body=="object"?t.body:{},...l}},h=this.executeBackend(c,d,s);if(r.push(h),h.status>=200&&h.status<300&&h.data)typeof h.data=="object"&&(l={...l,...h.data});else break}return r}executeBackend(e,t,s){const r=this.backends.get(e);if(!r)return{backendId:e,status:503,error:"Backend not found",latency:0,cached:!1};const l=this.circuitBreakers.get(e);if(l){const g=Date.now();if(l.state==="open"){if(g<l.nextAttemptTime)return{backendId:e,status:503,error:"Circuit breaker is open",latency:0,cached:!1};l.state="half-open"}}if(this.config.enableCaching&&this.cacheMode!=="off"){const g=`${e}:${s.path}:${JSON.stringify(t.query||{})}`,m=this.getCached(g);if(m)return{backendId:e,status:200,data:m.data,latency:1,cached:!0}}s.timeout||r.timeout||this.config.defaultTimeout;const c=r.retries||0,d=r.retryBackoff||"exponential";let h,p=0;for(let g=0;g<=c;g++){if(g>0){const R=this.calculateBackoff(g,d);p+=R}const m=50+Math.random()*150,v=(Math.random()-.5)*20,w=m+v;p+=w;const C=r.status==="connected"?.95:.5;if(Math.random()<C){l&&(l.state==="half-open"?(l.successes++,l.successes>=(r.circuitBreaker?.successThreshold||2)&&(l.state="closed",l.failures=0,l.successes=0)):l.failures=Math.max(0,l.failures-1));const R=this.generateMockResponse(r,t);return{backendId:e,status:200,data:R,latency:p,cached:!1}}else h=`Backend error (attempt ${g+1}/${c+1})`,l&&(l.failures++,l.lastFailureTime=Date.now(),l.failures>=(r.circuitBreaker?.failureThreshold||5)&&(l.state="open",l.nextAttemptTime=Date.now()+(r.circuitBreaker?.timeout||6e4)))}return{backendId:e,status:503,error:h||"Backend request failed",latency:p,cached:!1}}calculateBackoff(e,t){switch(t){case"exponential":return Math.min(1e3*Math.pow(2,e-1),1e4);case"linear":return 100*e;case"constant":default:return 100}}generateMockResponse(e,t){const s=e.name.toLowerCase();return s.includes("user")||s.includes("profile")?{id:Math.floor(Math.random()*1e3),name:"John Doe",email:"john.doe@example.com",avatar:"https://example.com/avatar.jpg"}:s.includes("order")||s.includes("cart")?{id:Math.floor(Math.random()*1e3),items:[{id:1,name:"Product 1",price:29.99,quantity:2},{id:2,name:"Product 2",price:49.99,quantity:1}],total:109.97}:s.includes("product")||s.includes("catalog")?{products:[{id:1,name:"Product 1",price:29.99,inStock:!0},{id:2,name:"Product 2",price:49.99,inStock:!0}],total:2}:{data:"Mock response",timestamp:Date.now()}}aggregateResponses(e,t){if(t.length===0)return{status:503,error:"No backends configured for endpoint"};if(t.every(l=>l.status>=400))return{status:503,error:"All backends failed"};const r=t.some(l=>l.status>=400);if(e.aggregator==="merge"||e.aggregator==="parallel"){const l={};for(const c of t)if(c.status>=200&&c.status<300&&c.data){const h=this.backends.get(c.backendId)?.name||c.backendId;typeof c.data=="object"&&c.data,l[h]=c.data}return{status:r?207:200,data:l}}else{const l=t[t.length-1];return l.status>=200&&l.status<300?{status:200,data:l.data}:{status:l.status,error:l.error}}}getCacheKey(e,t){return e.cacheKey?e.cacheKey:`${e.path}:${e.method}:${JSON.stringify(t.query||{})}`}getCached(e){if(this.cacheMode==="off")return null;if(this.cacheMode==="redis"&&this.redisEngine){const s=this.getRedisCacheKey(e),r=this.redisEngine.executeCommand("GET",[s]);if(r.success&&r.value!==null)try{const l=typeof r.value=="string"?JSON.parse(r.value):r.value;return{key:e,data:l,expiresAt:Date.now()+this.defaultCacheTtl*1e3,hitCount:1}}catch{return null}return null}const t=this.cache.get(e);return t?Date.now()>t.expiresAt?(this.cache.delete(e),null):(t.hitCount++,t):null}setCached(e,t,s){if(this.cacheMode!=="off"){if(this.cacheMode==="redis"&&this.redisEngine){const r=this.getRedisCacheKey(e),l=typeof t=="string"?t:JSON.stringify(t),c=[r,l];s>0&&c.push("EX",String(s)),this.redisEngine.executeCommand("SET",c);return}this.cache.set(e,{key:e,data:t,expiresAt:Date.now()+s*1e3,hitCount:0}),this.cache.size>1e3&&this.cleanupCache()}}getRedisCacheKey(e){return`${this.redisNodeId?`bff:${this.redisNodeId}:`:"bff:"}${e}`}cleanupCache(){const e=Date.now();for(const[t,s]of this.cache.entries())e>s.expiresAt&&this.cache.delete(t)}getStats(){let e=0,t=0,s=0,r=0,l=0;const c={};for(const[d,h]of this.backendMetrics.entries())e+=h.requestCount,t+=h.errorCount,s+=h.totalLatency,r+=h.cacheHits,l+=h.cacheMisses,c[d]={...h};return{totalRequests:e,totalErrors:t,averageLatency:e>0?s/e:0,cacheHitRate:r+l>0?r/(r+l):0,backendStats:c}}getBackendMetrics(e){return this.backendMetrics.get(e)}getBackends(){return Array.from(this.backends.values())}getEndpoints(){return Array.from(this.endpoints.values())}updateBackendStatus(e,t){const s=this.backends.get(e);s&&(s.status=t)}}class SN{relays=new Map;config={};deliveries=new Map;pendingDeliveries=new Map;relayMetrics=new Map;initialize(e){if(this.config=e,this.relays.clear(),this.deliveries.clear(),this.pendingDeliveries.clear(),this.relayMetrics.clear(),e.relays)for(const t of e.relays)t.enabled&&(this.relays.set(t.id,{...t}),this.initializeRelayMetrics(t.id))}initializeRelayMetrics(e){this.relayMetrics.set(e,{totalRequests:0,successfulDeliveries:0,failedDeliveries:0,totalRetries:0,averageLatency:0,totalLatency:0,lastRequestTime:0})}relayWebhook(e){const t=Date.now(),s=this.findMatchingRelay(e);if(!s)return{success:!1,status:404,latency:Date.now()-t,attempts:0,error:"No matching relay found"};if(s.allowedIps&&s.allowedIps.length>0&&e.ip&&!this.isIpAllowed(e.ip,s.allowedIps))return this.updateRelayMetrics(s.id,!1,Date.now()-t),{success:!1,status:403,latency:Date.now()-t,attempts:0,error:"IP address not allowed",relayId:s.id};if(this.config.enableSignatureVerification&&s.signatureSecret&&!this.verifySignature(e,s.signatureSecret,s.signatureHeader||"X-Signature"))return this.updateRelayMetrics(s.id,!1,Date.now()-t),{success:!1,status:401,latency:Date.now()-t,attempts:0,error:"Invalid signature",relayId:s.id};let r=e.body;s.transformTemplate&&(r=this.transformPayload(e.body,s.transformTemplate));const l=this.deliverWebhook(s,{...e,body:r});return this.updateRelayMetrics(s.id,l.success,l.latency),{...l,relayId:s.id}}findMatchingRelay(e){for(const t of this.relays.values())if(e.url.startsWith(t.sourceUrl)||t.sourceUrl==="*"||e.url.includes(t.sourceUrl)){if(t.events&&t.events.length>0){const s=e.event||e.headers["x-event"]||e.headers["x-github-event"]||"";if(!t.events.includes(s)&&s!=="")continue}return t}return null}isIpAllowed(e,t){for(const s of t)if(this.matchesCidr(e,s))return!0;return!1}matchesCidr(e,t){if(t==="*"||t===e)return!0;if(t.includes("/")){const[s,r]=t.split("/"),l=parseInt(r,10),c=s.split("."),d=e.split(".");if(c.length!==4||d.length!==4)return!1;const h=Math.floor(l/8);for(let p=0;p<h;p++)if(c[p]!==d[p])return!1;return!0}return e===t}verifySignature(e,t,s){const r=e.headers[s.toLowerCase()]||e.headers[s]||e.headers["x-signature"]||e.headers["x-hub-signature-256"];return r?(typeof e.body=="string"?e.body:JSON.stringify(e.body),r.length>0&&t.length>0):!1}transformPayload(e,t){try{let s=t;if(s.includes("{{raw}}")){const r=typeof e=="string"?e:JSON.stringify(e);s=s.replace(/\{\{raw\}\}/g,r)}if(s.includes("{{json}}")){const r=typeof e=="string"?JSON.parse(e):e;s=s.replace(/\{\{json\}\}/g,JSON.stringify(r))}try{return JSON.parse(s)}catch{return s}}catch{return e}}deliverWebhook(e,t){const s=e.maxRetryAttempts||this.config.maxRetryAttempts||3,r=e.retryDelay||this.config.retryDelay||5,l=e.timeout||this.config.timeout||30,c=this.config.enableRetryOnFailure!==!1,d=e.retryBackoff||"exponential";let h=0,p,g;const m=Date.now();for(;h<s;){h++;const C=this.simulateHttpRequest(e.targetUrl,t,l);if(C.success){const S=`delivery-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,R={id:S,relayId:e.id,event:t.event||"unknown",payload:typeof t.body=="string"?t.body:JSON.stringify(t.body),status:"success",timestamp:new Date().toISOString(),attempts:h,responseCode:C.statusCode};return this.deliveries.set(S,R),{success:!0,status:C.statusCode||200,latency:Date.now()-m,deliveryId:S,attempts:h}}if(p=C.error,g=C.statusCode,!c||h>=s)break;this.calculateRetryDelay(h,r,d)}const v=`delivery-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,w={id:v,relayId:e.id,event:t.event||"unknown",payload:typeof t.body=="string"?t.body:JSON.stringify(t.body),status:"failed",timestamp:new Date().toISOString(),attempts:h,responseCode:g,error:p};return this.deliveries.set(v,w),{success:!1,status:g||500,latency:Date.now()-m,deliveryId:v,attempts:h,error:p||"Delivery failed after all retry attempts"}}simulateHttpRequest(e,t,s){const r=10+Math.random()*40,l=5+Math.random()*95,c=Math.random()<.05;if(Math.random()<.02)return{success:!1,statusCode:504,error:"Request timeout",latency:s*1e3};if(c){const h=[500,502,503,429],p=h[Math.floor(Math.random()*h.length)];return{success:!1,statusCode:p,error:`HTTP ${p} error`,latency:r+l}}return{success:!0,statusCode:200,latency:r+l}}calculateRetryDelay(e,t,s){switch(s){case"exponential":return t*Math.pow(2,e-1);case"linear":return t*e;case"constant":default:return t}}updateRelayMetrics(e,t,s){let r=this.relayMetrics.get(e);r||(r={totalRequests:0,successfulDeliveries:0,failedDeliveries:0,totalRetries:0,averageLatency:0,totalLatency:0,lastRequestTime:0},this.relayMetrics.set(e,r)),r.totalRequests++,r.totalLatency+=s,r.averageLatency=r.totalLatency/r.totalRequests,r.lastRequestTime=Date.now(),t?r.successfulDeliveries++:r.failedDeliveries++}getDeliveries(e){const t=Array.from(this.deliveries.values());return e?t.filter(s=>s.relayId===e):t}getRelayMetrics(e){return this.relayMetrics.get(e)}getAllRelayMetrics(){return new Map(this.relayMetrics)}getRelay(e){return this.relays.get(e)}getAllRelays(){return Array.from(this.relays.values())}}class MN{keys=new Map;config={};maxMemoryBytes=256*1024*1024;currentMemoryUsage=0;metrics={totalKeys:0,keysByType:{string:0,hash:0,list:0,set:0,zset:0,stream:0},memoryUsage:0,memoryUsagePercent:0,operationsPerSecond:0,hitCount:0,missCount:0,hitRate:0,expiredKeys:0,evictedKeys:0,connectedClients:0};operationCount=0;lastMetricsUpdate=Date.now();operationHistory=[];clusterSlots=new Map;clusterNodes=[];initialize(e){if(this.config={...e},this.keys.clear(),this.currentMemoryUsage=0,this.operationCount=0,this.lastMetricsUpdate=Date.now(),this.operationHistory=[],e.maxMemory&&(this.maxMemoryBytes=this.parseMemorySize(e.maxMemory)),e.enableCluster&&e.clusterNodes&&(this.clusterNodes=[...e.clusterNodes],this.initializeClusterSlots()),e.keys)for(const t of e.keys)this.setKey(t.key,t.type,t.value,t.ttl);this.updateMetrics()}parseMemorySize(e){const t=e.match(/^(\d+)([kmg]?b?)$/i);if(!t)return 256*1024*1024;const s=parseInt(t[1]);switch(t[2].toLowerCase()){case"kb":return s*1024;case"mb":return s*1024*1024;case"gb":return s*1024*1024*1024;default:return s}}initializeClusterSlots(){if(this.clusterNodes.length===0)return;const e=Math.floor(16384/this.clusterNodes.length);let t=0;for(let s=0;s<this.clusterNodes.length;s++){const r=s===this.clusterNodes.length-1?16383:t+e-1;for(let l=t;l<=r;l++)this.clusterSlots.set(l,this.clusterNodes[s]);t=r+1}}getClusterSlot(e){const t=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935];let s=0;for(let r=0;r<e.length;r++){const l=e.charCodeAt(r);s=(s<<8^t[(s>>8^l)&255])&65535}return s%16384}isKeyForThisNode(e){if(!this.config.enableCluster||this.clusterNodes.length===0)return!0;const t=this.getClusterSlot(e);return this.clusterSlots.get(t),!0}executeCommand(e,t){const s=Date.now(),r=e.toUpperCase();try{let l;switch(r){case"GET":l=this.get(t[0]);break;case"SET":l=this.set(t[0],t[1],t[2]?parseInt(t[2]):void 0);break;case"DEL":l=this.del(t);break;case"EXISTS":l=this.exists(t);break;case"EXPIRE":l=this.expire(t[0],parseInt(t[1]));break;case"TTL":l=this.ttl(t[0]);break;case"KEYS":l=this.keys(t[0]||"*");break;case"HGET":l=this.hget(t[0],t[1]);break;case"HSET":l=this.hset(t[0],t.slice(1));break;case"HGETALL":l=this.hgetall(t[0]);break;case"HDEL":l=this.hdel(t[0],t.slice(1));break;case"HKEYS":l=this.hkeys(t[0]);break;case"HVALS":l=this.hvals(t[0]);break;case"LPUSH":l=this.lpush(t[0],t.slice(1));break;case"RPUSH":l=this.rpush(t[0],t.slice(1));break;case"LPOP":l=this.lpop(t[0]);break;case"RPOP":l=this.rpop(t[0]);break;case"LLEN":l=this.llen(t[0]);break;case"LRANGE":l=this.lrange(t[0],parseInt(t[1]),parseInt(t[2]));break;case"SADD":l=this.sadd(t[0],t.slice(1));break;case"SREM":l=this.srem(t[0],t.slice(1));break;case"SMEMBERS":l=this.smembers(t[0]);break;case"SISMEMBER":l=this.sismember(t[0],t[1]);break;case"SCARD":l=this.scard(t[0]);break;case"ZADD":l=this.zadd(t[0],t.slice(1));break;case"ZREM":l=this.zrem(t[0],t.slice(1));break;case"ZRANGE":l=this.zrange(t[0],parseInt(t[1]),parseInt(t[2]));break;case"ZSCORE":l=this.zscore(t[0],t[1]);break;case"ZCARD":l=this.zcard(t[0]);break;case"PING":l="PONG";break;case"INFO":l=this.info(t[0]);break;case"DBSIZE":l=this.dbsize();break;default:return{success:!1,error:`Unknown command: ${e}`,latency:Date.now()-s}}const c=Date.now()-s;return this.recordOperation(),{success:!0,value:l,latency:c}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Unknown error",latency:Date.now()-s}}}recordOperation(){this.operationCount++,this.operationHistory.push({timestamp:Date.now()}),this.operationHistory.length>1e3&&this.operationHistory.shift()}get(e){if(!this.isKeyForThisNode(e))throw new Error("MOVED - key belongs to different node");const t=this.keys.get(e);return t?this.isExpired(t)?(this.deleteKey(e),this.metrics.missCount++,null):(this.metrics.hitCount++,typeof t.value=="string"?t.value:JSON.stringify(t.value)):(this.metrics.missCount++,null)}set(e,t,s){if(!this.isKeyForThisNode(e))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();const r=this.keys.get(e);r&&(this.currentMemoryUsage-=this.calculateKeySize(r));const l={key:e,type:"string",value:t,ttl:s!==void 0?s:r?.ttl,expiresAt:s!==void 0&&s>0?Date.now()+s*1e3:r?.expiresAt,size:this.estimateSize(t)};return this.keys.set(e,l),this.currentMemoryUsage+=this.calculateKeySize(l),"OK"}del(e){let t=0;for(const s of e)this.deleteKey(s)&&t++;return t}exists(e){let t=0;for(const s of e){const r=this.keys.get(s);r&&!this.isExpired(r)&&t++}return t}expire(e,t){const s=this.keys.get(e);return s?this.isExpired(s)?(this.deleteKey(e),0):(s.ttl=t,s.expiresAt=t>0?Date.now()+t*1e3:void 0,1):0}ttl(e){const t=this.keys.get(e);if(!t)return-2;if(this.isExpired(t))return this.deleteKey(e),-2;if(!t.expiresAt)return-1;const s=Math.floor((t.expiresAt-Date.now())/1e3);return s>0?s:-2}keys(e){const t=this.patternToRegex(e),s=[];for(const[r,l]of this.keys.entries()){if(this.isExpired(l)){this.deleteKey(r);continue}t.test(r)&&s.push(r)}return s}hget(e,t){const s=this.keys.get(e);return!s||s.type!=="hash"?null:this.isExpired(s)?(this.deleteKey(e),null):s.value[t]||null}hset(e,t){if(!this.isKeyForThisNode(e))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();let s=this.keys.get(e);(!s||s.type!=="hash")&&(s&&(this.currentMemoryUsage-=this.calculateKeySize(s)),s={key:e,type:"hash",value:{},size:0});const r=s.value;let l=0;for(let c=0;c<t.length;c+=2){const d=t[c],h=t[c+1];r[d]||l++,r[d]=h}return s.size=this.estimateSize(JSON.stringify(r)),this.keys.set(e,s),this.currentMemoryUsage+=this.calculateKeySize(s),l}hgetall(e){const t=this.keys.get(e);return!t||t.type!=="hash"?{}:this.isExpired(t)?(this.deleteKey(e),{}):{...t.value}}hdel(e,t){const s=this.keys.get(e);if(!s||s.type!=="hash")return 0;if(this.isExpired(s))return this.deleteKey(e),0;const r=s.value;let l=0;for(const c of t)r[c]&&(delete r[c],l++);return l>0&&(s.size=this.estimateSize(JSON.stringify(r)),this.keys.set(e,s)),l}hkeys(e){const t=this.keys.get(e);return!t||t.type!=="hash"?[]:this.isExpired(t)?(this.deleteKey(e),[]):Object.keys(t.value)}hvals(e){const t=this.keys.get(e);return!t||t.type!=="hash"?[]:this.isExpired(t)?(this.deleteKey(e),[]):Object.values(t.value)}lpush(e,t){if(!this.isKeyForThisNode(e))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();let s=this.keys.get(e);(!s||s.type!=="list")&&(s&&(this.currentMemoryUsage-=this.calculateKeySize(s)),s={key:e,type:"list",value:[],size:0});const r=s.value;return r.unshift(...t),s.size=this.estimateSize(JSON.stringify(r)),this.keys.set(e,s),this.currentMemoryUsage+=this.calculateKeySize(s),r.length}rpush(e,t){if(!this.isKeyForThisNode(e))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();let s=this.keys.get(e);(!s||s.type!=="list")&&(s&&(this.currentMemoryUsage-=this.calculateKeySize(s)),s={key:e,type:"list",value:[],size:0});const r=s.value;return r.push(...t),s.size=this.estimateSize(JSON.stringify(r)),this.keys.set(e,s),this.currentMemoryUsage+=this.calculateKeySize(s),r.length}lpop(e){const t=this.keys.get(e);if(!t||t.type!=="list")return null;if(this.isExpired(t))return this.deleteKey(e),null;const s=t.value;if(s.length===0)return null;const r=s.shift();return t.size=this.estimateSize(JSON.stringify(s)),this.keys.set(e,t),r}rpop(e){const t=this.keys.get(e);if(!t||t.type!=="list")return null;if(this.isExpired(t))return this.deleteKey(e),null;const s=t.value;if(s.length===0)return null;const r=s.pop();return t.size=this.estimateSize(JSON.stringify(s)),this.keys.set(e,t),r}llen(e){const t=this.keys.get(e);return!t||t.type!=="list"?0:this.isExpired(t)?(this.deleteKey(e),0):t.value.length}lrange(e,t,s){const r=this.keys.get(e);if(!r||r.type!=="list")return[];if(this.isExpired(r))return this.deleteKey(e),[];const l=r.value,c=l.length,d=t<0?Math.max(0,c+t):Math.min(t,c),h=s<0?Math.max(0,c+s):Math.min(s,c-1);return l.slice(d,h+1)}sadd(e,t){if(!this.isKeyForThisNode(e))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();let s=this.keys.get(e);(!s||s.type!=="set")&&(s&&(this.currentMemoryUsage-=this.calculateKeySize(s)),s={key:e,type:"set",value:new Set,size:0});const r=s.value;let l=0;for(const c of t)r.has(c)||(r.add(c),l++);return s.size=this.estimateSize(JSON.stringify(Array.from(r))),this.keys.set(e,s),this.currentMemoryUsage+=this.calculateKeySize(s),l}srem(e,t){const s=this.keys.get(e);if(!s||s.type!=="set")return 0;if(this.isExpired(s))return this.deleteKey(e),0;const r=s.value;let l=0;for(const c of t)r.has(c)&&(r.delete(c),l++);return l>0&&(s.size=this.estimateSize(JSON.stringify(Array.from(r))),this.keys.set(e,s)),l}smembers(e){const t=this.keys.get(e);return!t||t.type!=="set"?[]:this.isExpired(t)?(this.deleteKey(e),[]):Array.from(t.value)}sismember(e,t){const s=this.keys.get(e);return!s||s.type!=="set"?0:this.isExpired(s)?(this.deleteKey(e),0):s.value.has(t)?1:0}scard(e){const t=this.keys.get(e);return!t||t.type!=="set"?0:this.isExpired(t)?(this.deleteKey(e),0):t.value.size}zadd(e,t){if(!this.isKeyForThisNode(e))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();let s=this.keys.get(e);(!s||s.type!=="zset")&&(s&&(this.currentMemoryUsage-=this.calculateKeySize(s)),s={key:e,type:"zset",value:new Map,size:0});const r=s.value;let l=0;for(let c=0;c<t.length;c+=2){const d=parseFloat(t[c]),h=t[c+1];r.has(h)||l++,r.set(h,d)}return s.size=this.estimateSize(JSON.stringify(Array.from(r.entries()))),this.keys.set(e,s),this.currentMemoryUsage+=this.calculateKeySize(s),l}zrem(e,t){const s=this.keys.get(e);if(!s||s.type!=="zset")return 0;if(this.isExpired(s))return this.deleteKey(e),0;const r=s.value;let l=0;for(const c of t)r.has(c)&&(r.delete(c),l++);return l>0&&(s.size=this.estimateSize(JSON.stringify(Array.from(r.entries()))),this.keys.set(e,s)),l}zrange(e,t,s){const r=this.keys.get(e);if(!r||r.type!=="zset")return[];if(this.isExpired(r))return this.deleteKey(e),[];const l=r.value,c=Array.from(l.entries()).sort((g,m)=>g[1]-m[1]),d=c.length,h=t<0?Math.max(0,d+t):Math.min(t,d),p=s<0?Math.max(0,d+s):Math.min(s,d-1);return c.slice(h,p+1).map(g=>g[0])}zscore(e,t){const s=this.keys.get(e);return!s||s.type!=="zset"?null:this.isExpired(s)?(this.deleteKey(e),null):s.value.get(t)??null}zcard(e){const t=this.keys.get(e);return!t||t.type!=="zset"?0:this.isExpired(t)?(this.deleteKey(e),0):t.value.size}info(e){const t=this.getMetrics();return`# Server
redis_version:7.2.0
redis_mode:${this.config.enableCluster?"cluster":"standalone"}

# Memory
used_memory:${t.memoryUsage}
used_memory_human:${this.formatBytes(t.memoryUsage)}
maxmemory:${this.maxMemoryBytes}
maxmemory_human:${this.formatBytes(this.maxMemoryBytes)}
maxmemory_policy:${this.config.maxMemoryPolicy||"noeviction"}
mem_fragmentation_ratio:1.0

# Stats
total_keys:${t.totalKeys}
expired_keys:${t.expiredKeys}
evicted_keys:${t.evictedKeys}
keyspace_hits:${t.hitCount}
keyspace_misses:${t.missCount}

# Cluster
cluster_enabled:${this.config.enableCluster?1:0}
`}dbsize(){return this.cleanupExpiredKeys(),this.keys.size}setKey(e,t,s,r){const l={key:e,type:t,value:s,ttl:r!==void 0?r:-1,expiresAt:r!==void 0&&r>0?Date.now()+r*1e3:void 0,size:this.estimateSize(typeof s=="string"?s:JSON.stringify(s))};this.keys.set(e,l),this.currentMemoryUsage+=this.calculateKeySize(l)}deleteKey(e){const t=this.keys.get(e);return t?(this.currentMemoryUsage-=this.calculateKeySize(t),this.keys.delete(e),!0):!1}isExpired(e){return e.expiresAt?Date.now()>=e.expiresAt:!1}cleanupExpiredKeys(){let e=0;for(const[t,s]of this.keys.entries())this.isExpired(s)&&(this.deleteKey(t),e++);e>0&&(this.metrics.expiredKeys+=e)}checkMemoryAndEvict(){if(this.currentMemoryUsage<=this.maxMemoryBytes)return;const e=this.config.maxMemoryPolicy||"noeviction";if(e==="noeviction")return;const t=this.selectKeysToEvict(e);let s=0;for(const r of t)if(this.deleteKey(r),s++,this.currentMemoryUsage<=this.maxMemoryBytes*.9)break;s>0&&(this.metrics.evictedKeys+=s)}selectKeysToEvict(e){const t=Array.from(this.keys.keys());switch(e){case"allkeys-lru":case"allkeys-lfu":case"allkeys-random":return t;case"volatile-lru":case"volatile-lfu":case"volatile-ttl":case"volatile-random":return t.filter(s=>{const r=this.keys.get(s);return r&&r.expiresAt!==void 0});default:return[]}}calculateKeySize(e){if(e.size)return e.size;let t=0;return typeof e.value=="string"?t=Buffer.byteLength(e.value,"utf8"):t=Buffer.byteLength(JSON.stringify(e.value),"utf8"),Buffer.byteLength(e.key,"utf8")+t+100}estimateSize(e){return Buffer.byteLength(e,"utf8")}patternToRegex(e){const t=e.replace(/[.+^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*").replace(/\?/g,".");return new RegExp(`^${t}$`)}formatBytes(e){if(e===0)return"0B";const t=1024,s=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return Math.round(e/Math.pow(t,r)*100)/100+s[r]}getMetrics(){return this.cleanupExpiredKeys(),this.updateMetrics(),{...this.metrics}}updateMetrics(){const e=Date.now();(e-this.lastMetricsUpdate)/1e3;const t={string:0,hash:0,list:0,set:0,zset:0,stream:0};for(const c of this.keys.values())t[c.type]++;const s=this.operationHistory.filter(c=>c.timestamp>e-1e3).length,r=this.metrics.hitCount+this.metrics.missCount,l=r>0?this.metrics.hitCount/r:0;this.metrics={totalKeys:this.keys.size,keysByType:t,memoryUsage:this.currentMemoryUsage,memoryUsagePercent:this.maxMemoryBytes>0?this.currentMemoryUsage/this.maxMemoryBytes*100:0,operationsPerSecond:s,hitCount:this.metrics.hitCount,missCount:this.metrics.missCount,hitRate:l,expiredKeys:this.metrics.expiredKeys,evictedKeys:this.metrics.evictedKeys,connectedClients:1},this.lastMetricsUpdate=e}getAllKeys(){return this.cleanupExpiredKeys(),Array.from(this.keys.values())}getKey(e){const t=this.keys.get(e);if(t&&this.isExpired(t)){this.deleteKey(e);return}return t}syncKeysFromConfig(e){const t=new Map;for(const s of e)t.set(s.key,s);for(const[s,r]of this.keys.entries());for(const s of e){const r=this.keys.get(s.key);if(!r)this.setKey(s.key,s.type,s.value,s.ttl);else if(r.type!==s.type||JSON.stringify(r.value)!==JSON.stringify(s.value)||r.ttl!==s.ttl){this.currentMemoryUsage-=this.calculateKeySize(r);const l={...s,expiresAt:s.ttl!==void 0&&s.ttl>0?Date.now()+s.ttl*1e3:void 0,size:this.estimateSize(typeof s.value=="string"?s.value:JSON.stringify(s.value))};this.keys.set(s.key,l),this.currentMemoryUsage+=this.calculateKeySize(l)}}this.updateMetrics()}}class EN{clusterName="archiphoenix-cluster";nodes=new Map;keyspaces=new Map;tables=new Map;tableData=new Map;defaultConsistencyLevel="QUORUM";defaultReplicationFactor=3;enableCompaction=!0;compactionStrategy="SizeTieredCompactionStrategy";datacenter="dc1";metrics={readLatency:5,writeLatency:10,totalNodes:0,healthyNodes:0,totalKeyspaces:0,totalTables:0,totalRows:0,totalSize:0,readOperationsPerSecond:0,writeOperationsPerSecond:0,readConsistencyViolations:0,writeConsistencyViolations:0,pendingCompactions:0,hintedHandoffs:0};readOperations=[];writeOperations=[];lastMetricsUpdate=Date.now();initialize(e){if(this.clusterName=e.clusterName||"archiphoenix-cluster",this.defaultConsistencyLevel=e.defaultConsistencyLevel||"QUORUM",this.defaultReplicationFactor=e.defaultReplicationFactor||3,this.enableCompaction=e.enableCompaction??!0,this.compactionStrategy=e.compactionStrategy||"SizeTieredCompactionStrategy",this.datacenter=e.datacenter||"dc1",this.nodes.clear(),e.nodes)for(const t of e.nodes)this.nodes.set(t.address,{...t});else this.nodes.set("localhost:9042",{address:"localhost:9042",status:"up",load:.5,tokens:256});if(this.keyspaces.clear(),e.keyspaces)for(const t of e.keyspaces)this.keyspaces.set(t.name,{...t});else this.keyspaces.set("system",{name:"system",replication:3,replicationStrategy:"NetworkTopologyStrategy",tables:0,size:0,durableWrites:!0});if(this.tables.clear(),this.tableData.clear(),e.tables)for(const t of e.tables){const s=`${t.keyspace}.${t.name}`;this.tables.set(s,{...t}),this.tableData.set(s,[])}this.updateMetrics()}syncFromConfig(e){if(e.clusterName&&(this.clusterName=e.clusterName),e.defaultConsistencyLevel&&(this.defaultConsistencyLevel=e.defaultConsistencyLevel),e.defaultReplicationFactor!==void 0&&(this.defaultReplicationFactor=e.defaultReplicationFactor),e.nodes)for(const t of e.nodes)this.nodes.set(t.address,{...t});if(e.keyspaces){new Set(this.keyspaces.keys());for(const t of e.keyspaces)this.keyspaces.set(t.name,{...t,tables:this.countTablesInKeyspace(t.name)})}if(e.tables)for(const t of e.tables){const s=`${t.keyspace}.${t.name}`,r=this.tables.get(s);if(r){const l=this.tableData.get(s)||[];this.tables.set(s,{...t,rows:r.rows||l.length||0,size:r.size||l.length*1024||0})}else this.tables.set(s,{...t,rows:0,size:0}),this.tableData.has(s)||this.tableData.set(s,[])}this.updateMetrics()}executeCQL(e,t){const s=Date.now(),r=t||this.defaultConsistencyLevel;try{const l=e.trim().replace(/\s+/g," "),c=l.toUpperCase();return c.startsWith("SELECT")?this.executeSelect(l,r,s):c.startsWith("INSERT")?this.executeInsert(l,r,s):c.startsWith("UPDATE")?this.executeUpdate(l,r,s):c.startsWith("DELETE")?this.executeDelete(l,r,s):c.startsWith("CREATE KEYSPACE")?this.executeCreateKeyspace(l,s):c.startsWith("CREATE TABLE")?this.executeCreateTable(l,s):c.startsWith("DROP TABLE")?this.executeDropTable(l,s):c.startsWith("DROP KEYSPACE")?this.executeDropKeyspace(l,s):{success:!1,error:`Unsupported CQL statement: ${l}`,latency:Date.now()-s}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Unknown error",latency:Date.now()-s}}}executeSelect(e,t,s){const r=e.match(/FROM\s+([\w.]+)/i);if(!r)return{success:!1,error:"Invalid SELECT query: missing FROM clause",latency:Date.now()-s};const l=r[1].trim(),c=this.normalizeTableKey(l),d=this.tables.get(c);if(!d)return{success:!1,error:`Table ${l} does not exist`,latency:Date.now()-s};const h=this.tableData.get(c)||[],p=e.match(/LIMIT\s+(\d+)/i),g=p?parseInt(p[1],10):void 0;let m=[...h];const v=e.match(/WHERE\s+(.+?)(?:\s+LIMIT|$)/i);if(v){const E=v[1].trim().match(/(\w+)\s*=\s*['"]?([^'"\s]+)['"]?/);if(E){const T=E[1],N=E[2];m=h.filter(A=>String(A[T])===N)}}g!==void 0&&g>0&&(m=m.slice(0,g));const w=this.calculateReadLatency(t),C=this.checkConsistencyViolation(t,d.keyspace);this.recordReadOperation(w,C);const S=this.getRequiredReplicas(t,d.keyspace);return{success:!0,latency:w,consistency:t,rows:m,rowCount:m.length,replicasQueried:S}}executeInsert(e,t,s){const r=e.match(/INTO\s+([\w.]+)/i);if(!r)return{success:!1,error:"Invalid INSERT query: missing INTO clause",latency:Date.now()-s};const l=r[1].trim(),c=this.normalizeTableKey(l);let d=this.tables.get(c);if(!d)return{success:!1,error:`Table ${l} does not exist`,latency:Date.now()-s};const h=e.match(/\(([^)]+)\)\s*VALUES/i),p=e.match(/VALUES\s*\(([^)]+)\)/i);if(!h||!p)return{success:!1,error:"Invalid INSERT query: missing columns or values",latency:Date.now()-s};const g=h[1].split(",").map(T=>T.trim()),m=p[1],v=this.parseValueList(m);if(g.length!==v.length)return{success:!1,error:"Column count does not match value count",latency:Date.now()-s};const w={};for(let T=0;T<g.length;T++)w[g[T]]=v[T];const C=this.tableData.get(c)||[];C.push(w),this.tableData.set(c,C),d.rows=C.length,d.size=C.length*1024,this.tables.set(c,d);const S=this.calculateWriteLatency(t,d.keyspace),R=this.checkConsistencyViolation(t,d.keyspace);this.recordWriteOperation(S,R);const E=this.getRequiredReplicas(t,d.keyspace);return this.updateMetrics(),{success:!0,latency:S,consistency:t,rowCount:1,replicasQueried:E}}executeUpdate(e,t,s){const r=e.match(/UPDATE\s+([\w.]+)\s+SET/i);if(!r)return{success:!1,error:"Invalid UPDATE query",latency:Date.now()-s};const l=r[1].trim(),c=this.normalizeTableKey(l),d=this.tables.get(c);if(!d)return{success:!1,error:`Table ${l} does not exist`,latency:Date.now()-s};const h=e.match(/SET\s+(.+?)(?:\s+WHERE|$)/i);if(!h)return{success:!1,error:"Invalid UPDATE query: missing SET clause",latency:Date.now()-s};const p=h[1].trim(),g={},m=p.split(",").map(q=>q.trim());for(const q of m){const P=q.match(/(\w+)\s*=\s*(.+)/);if(P){const H=P[1].trim(),ee=this.parseValue(P[2].trim());g[H]=ee}}const v=e.match(/WHERE\s+(.+)/i);if(!v)return{success:!1,error:"UPDATE requires WHERE clause",latency:Date.now()-s};const C=v[1].trim().match(/(\w+)\s*=\s*['"]?([^'"\s]+)['"]?/);if(!C)return{success:!1,error:"Unsupported WHERE clause format",latency:Date.now()-s};const S=C[1],R=C[2],E=this.tableData.get(c)||[];let T=0;for(const q of E)String(q[S])===R&&(Object.assign(q,g),T++);d.rows=E.length,d.size=E.length*1024,this.tables.set(c,d);const N=this.calculateWriteLatency(t,d.keyspace),A=this.checkConsistencyViolation(t,d.keyspace);this.recordWriteOperation(N,A);const j=this.getRequiredReplicas(t,d.keyspace);return this.updateMetrics(),{success:!0,latency:N,consistency:t,rowCount:T,replicasQueried:j}}executeDelete(e,t,s){const r=e.match(/FROM\s+([\w.]+)/i);if(!r)return{success:!1,error:"Invalid DELETE query: missing FROM clause",latency:Date.now()-s};const l=r[1].trim(),c=this.normalizeTableKey(l),d=this.tables.get(c);if(!d)return{success:!1,error:`Table ${l} does not exist`,latency:Date.now()-s};const h=e.match(/WHERE\s+(.+)/i);if(!h)return{success:!1,error:"DELETE requires WHERE clause",latency:Date.now()-s};const g=h[1].trim().match(/(\w+)\s*=\s*['"]?([^'"\s]+)['"]?/);if(!g)return{success:!1,error:"Unsupported WHERE clause format",latency:Date.now()-s};const m=g[1],v=g[2],w=this.tableData.get(c)||[],C=w.length,S=w.filter(A=>String(A[m])!==v);this.tableData.set(c,S),d.rows=S.length,d.size=S.length*1024,this.tables.set(c,d);const R=C-S.length,E=this.calculateWriteLatency(t,d.keyspace),T=this.checkConsistencyViolation(t,d.keyspace);this.recordWriteOperation(E,T);const N=this.getRequiredReplicas(t,d.keyspace);return this.updateMetrics(),{success:!0,latency:E,consistency:t,rowCount:R,replicasQueried:N}}executeCreateKeyspace(e,t){const s=e.match(/KEYSPACE\s+(\w+)/i);if(!s)return{success:!1,error:"Invalid CREATE KEYSPACE query",latency:Date.now()-t};const r=s[1].trim();if(this.keyspaces.has(r))return{success:!1,error:`Keyspace ${r} already exists`,latency:Date.now()-t};let l=this.defaultReplicationFactor;const c=e.match(/replication.*?(\d+)/i);return c&&(l=parseInt(c[1],10)),this.keyspaces.set(r,{name:r,replication:l,replicationStrategy:"NetworkTopologyStrategy",tables:0,size:0,durableWrites:!0}),this.updateMetrics(),{success:!0,latency:Date.now()-t,rowCount:0}}executeCreateTable(e,t){const s=e.match(/TABLE\s+([\w.]+)/i);if(!s)return{success:!1,error:"Invalid CREATE TABLE query",latency:Date.now()-t};const r=s[1].trim(),l=this.normalizeTableKey(r);if(this.tables.has(l))return{success:!1,error:`Table ${r} already exists`,latency:Date.now()-t};let c=e;const d=e.toUpperCase().indexOf(" WITH ");d>0&&(c=e.substring(0,d));const h=c.match(/\(([^)]+)\)/);if(!h)return{success:!1,error:"Invalid CREATE TABLE query: missing column definitions",latency:Date.now()-t};const p=h[1],g=[],m=p.split(",").map(E=>E.trim());for(const E of m){if(E.toUpperCase().includes("PRIMARY KEY"))continue;const T=E.match(/(\w+)\s+(\w+)/);T&&g.push({name:T[1],type:T[2]})}const v=r.split("."),w=v.length>1?v[0]:"system",C=v.length>1?v[1]:v[0];if(!this.keyspaces.has(w))return{success:!1,error:`Keyspace ${w} does not exist`,latency:Date.now()-t};const S={name:C,keyspace:w,columns:g,rows:0,size:0};this.tables.set(l,S),this.tableData.set(l,[]);const R=this.keyspaces.get(w);return R&&(R.tables=this.countTablesInKeyspace(w),this.keyspaces.set(w,R)),this.updateMetrics(),{success:!0,latency:Date.now()-t,rowCount:0}}executeDropTable(e,t){const s=e.match(/TABLE\s+([\w.]+)/i);if(!s)return{success:!1,error:"Invalid DROP TABLE query",latency:Date.now()-t};const r=s[1].trim(),l=this.normalizeTableKey(r);if(!this.tables.has(l))return{success:!1,error:`Table ${r} does not exist`,latency:Date.now()-t};const c=this.tables.get(l);this.tables.delete(l),this.tableData.delete(l);const d=this.keyspaces.get(c.keyspace);return d&&(d.tables=this.countTablesInKeyspace(c.keyspace),this.keyspaces.set(c.keyspace,d)),this.updateMetrics(),{success:!0,latency:Date.now()-t,rowCount:0}}executeDropKeyspace(e,t){const s=e.match(/KEYSPACE\s+(\w+)/i);if(!s)return{success:!1,error:"Invalid DROP KEYSPACE query",latency:Date.now()-t};const r=s[1].trim();if(!this.keyspaces.has(r))return{success:!1,error:`Keyspace ${r} does not exist`,latency:Date.now()-t};const l=[];for(const[c,d]of this.tables.entries())d.keyspace===r&&l.push(c);for(const c of l)this.tables.delete(c),this.tableData.delete(c);return this.keyspaces.delete(r),this.updateMetrics(),{success:!0,latency:Date.now()-t,rowCount:0}}getNodes(){return Array.from(this.nodes.values())}getKeyspaces(){return Array.from(this.keyspaces.values())}getTables(){return Array.from(this.tables.values())}getMetrics(){return this.updateMetrics(),{...this.metrics}}calculateReadLatency(e){const s=this.getRequiredReplicas(e,"system"),r=Math.log(s+1)*3,l=Math.random()*2;return Math.round(2+r+l)}calculateWriteLatency(e,t){const l=this.getRequiredReplicas(e,t)*2,c=Math.random()*3;return Math.round(5+l+c)}getRequiredReplicas(e,t){const r=this.keyspaces.get(t)?.replication||this.defaultReplicationFactor;switch(e){case"ONE":case"LOCAL_ONE":return 1;case"TWO":return 2;case"THREE":return 3;case"QUORUM":case"LOCAL_QUORUM":return Math.floor(r/2)+1;case"ALL":case"EACH_QUORUM":return r;case"SERIAL":case"LOCAL_SERIAL":return Math.floor(r/2)+1;default:return Math.floor(r/2)+1}}checkConsistencyViolation(e,t){const s=this.metrics.healthyNodes,r=this.getRequiredReplicas(e,t),l=s<r?.8:.05;return Math.random()<l}recordReadOperation(e,t){const s=Date.now();this.readOperations.push({timestamp:s,latency:e,violated:t}),this.readOperations.length>1e3&&this.readOperations.shift(),t&&this.metrics.readConsistencyViolations++}recordWriteOperation(e,t){const s=Date.now();this.writeOperations.push({timestamp:s,latency:e,violated:t}),this.writeOperations.length>1e3&&this.writeOperations.shift(),t&&this.metrics.writeConsistencyViolations++}updateMetrics(){const e=Date.now();(e-this.lastMetricsUpdate)/1e3,this.metrics.totalNodes=this.nodes.size,this.metrics.healthyNodes=Array.from(this.nodes.values()).filter(p=>p.status==="up").length,this.metrics.totalKeyspaces=this.keyspaces.size,this.metrics.totalTables=this.tables.size;let t=0,s=0;for(const[p,g]of this.tableData.entries())t+=g.length,s+=g.length*1024;this.metrics.totalRows=t,this.metrics.totalSize=s;const r=e-1e3,l=this.readOperations.filter(p=>p.timestamp>r),c=this.writeOperations.filter(p=>p.timestamp>r);if(this.metrics.readOperationsPerSecond=l.length,this.metrics.writeOperationsPerSecond=c.length,l.length>0){const p=l.reduce((g,m)=>g+m.latency,0)/l.length;this.metrics.readLatency=Math.round(p*10)/10}if(c.length>0){const p=c.reduce((g,m)=>g+m.latency,0)/c.length;this.metrics.writeLatency=Math.round(p*10)/10}this.metrics.pendingCompactions=Math.floor(this.metrics.totalSize/(10*1024*1024));const d=this.metrics.totalNodes-this.metrics.healthyNodes;this.metrics.hintedHandoffs=d>0?d*5:0;const h=this.metrics.readOperationsPerSecond+this.metrics.writeOperationsPerSecond;for(const p of this.nodes.values())if(p.status==="up"){const g=Math.min(.95,.3+h/100*.3);p.load=p.load*.9+g*.1,p.load+=(Math.random()-.5)*.05,p.load=Math.max(.1,Math.min(.95,p.load))}this.lastMetricsUpdate=e}countTablesInKeyspace(e){let t=0;for(const s of this.tables.values())s.keyspace===e&&t++;return t}normalizeTableKey(e){return e.includes(".")?e:`system.${e}`}parseValueList(e){const t=[];let s="",r=!1,l="";for(let c=0;c<e.length;c++){const d=e[c];if((d==='"'||d==="'")&&!r){r=!0,l=d;continue}else if(d===l&&r){r=!1,l="";continue}d===","&&!r?(t.push(this.parseValue(s.trim())),s=""):s+=d}return s.trim()&&t.push(this.parseValue(s.trim())),t}parseValue(e){return e=e.trim(),e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):/^-?\d+$/.test(e)?parseInt(e,10):/^-?\d*\.\d+$/.test(e)?parseFloat(e):e.toUpperCase()==="TRUE"?!0:e.toUpperCase()==="FALSE"?!1:e.toUpperCase()==="NULL"?null:e}}class RN{cluster="archiphoenix-cluster";replication=!1;tables=new Map;tableData=new Map;tableParts=new Map;maxMemoryUsage=10*1024*1024*1024;compression="LZ4";metrics={queryThroughput:0,avgQueryTime:45,queriesPerSecond:0,readRowsPerSecond:0,writtenRowsPerSecond:0,totalRows:0,totalSize:0,compressionRatio:5,activeQueries:0,memoryUsage:0,memoryUsagePercent:0,partsCount:0,pendingMerges:0,totalTables:0,clusterNodes:1,healthyNodes:1};queryOperations=[];lastMetricsUpdate=Date.now();activeQueriesSet=new Set;initialize(e){if(this.cluster=e.cluster||"archiphoenix-cluster",this.replication=e.replication||!1,this.maxMemoryUsage=e.maxMemoryUsage||10*1024*1024*1024,this.compression=e.compression||"LZ4",this.tables.clear(),this.tableData.clear(),this.tableParts.clear(),e.tables)for(const t of e.tables){const s=`${t.database||"default"}.${t.name}`;this.tables.set(s,{...t}),this.tableData.set(s,[]),this.tableParts.set(s,[])}this.updateMetrics()}syncFromConfig(e){if(e.cluster&&(this.cluster=e.cluster),e.replication!==void 0&&(this.replication=e.replication),e.maxMemoryUsage&&(this.maxMemoryUsage=e.maxMemoryUsage),e.compression&&(this.compression=e.compression),e.tables)for(const t of e.tables){const s=`${t.database||"default"}.${t.name}`,r=this.tables.get(s),l=this.tableData.get(s)||[];r?this.tables.set(s,{...t,rows:r.rows||l.length||0,size:r.size||l.length*512||0}):(this.tables.set(s,{...t,rows:0,size:0}),this.tableData.has(s)||(this.tableData.set(s,[]),this.tableParts.set(s,[])))}this.updateMetrics()}executeQuery(e){const t=Date.now(),s=`query-${Date.now()}-${Math.random()}`;try{const r=e.trim().replace(/\s+/g," "),l=r.toUpperCase();this.activeQueriesSet.add(s),this.metrics.activeQueries=this.activeQueriesSet.size;let c;l.startsWith("SELECT")?c=this.executeSelect(r,t):l.startsWith("INSERT")?c=this.executeInsert(r,t):l.startsWith("ALTER")?c=this.executeAlter(r,t):l.startsWith("CREATE TABLE")?c=this.executeCreateTable(r,t):l.startsWith("DROP TABLE")?c=this.executeDropTable(r,t):c={success:!1,error:`Unsupported SQL statement: ${r}`,latency:Date.now()-t};const d=c.latency||Date.now()-t;return this.queryOperations.push({timestamp:Date.now(),latency:d,rowsRead:c.dataRead||0,rowsWritten:c.dataWritten||0}),this.activeQueriesSet.delete(s),this.metrics.activeQueries=this.activeQueriesSet.size,c}catch(r){return this.activeQueriesSet.delete(s),this.metrics.activeQueries=this.activeQueriesSet.size,{success:!1,error:r instanceof Error?r.message:"Unknown error",latency:Date.now()-t}}}executeSelect(e,t){const s=e.match(/FROM\s+([\w.]+)/i);if(!s)return{success:!1,error:"Invalid SELECT query: missing FROM clause",latency:Date.now()-t};const r=s[1].trim(),l=this.normalizeTableKey(r),c=this.tables.get(l);if(!c)return{success:!1,error:`Table ${r} does not exist`,latency:Date.now()-t};const d=this.tableData.get(l)||[],h=e.match(/SELECT\s+(.+?)\s+FROM/i),p=h?h[1].trim().split(",").map(T=>T.trim()):["*"];let g=[...d];const m=e.match(/WHERE\s+(.+?)(?:\s+GROUP\s+BY|\s+ORDER\s+BY|\s+LIMIT|$)/i);if(m){const N=m[1].trim().match(/(\w+)\s*=\s*['"]?([^'"\s]+)['"]?/);if(N){const A=N[1],j=N[2];g=d.filter(q=>String(q[A])===j)}}const v=e.match(/GROUP\s+BY\s+(\w+)/i);if(v){const T=v[1],N=new Map;g.forEach(A=>{const j=String(A[T]||"null");N.set(j,(N.get(j)||0)+1)}),g=Array.from(N.entries()).map(([A,j])=>({[T]:A,count:j}))}const w=e.match(/ORDER\s+BY\s+(\w+)(?:\s+(ASC|DESC))?/i);if(w){const T=w[1],N=(w[2]||"ASC").toUpperCase();g.sort((A,j)=>{const q=A[T],P=j[T];return N==="DESC"?q>P?-1:q<P?1:0:q<P?-1:q>P?1:0})}const C=e.match(/LIMIT\s+(\d+)/i),S=C?parseInt(C[1],10):void 0;S!==void 0&&S>0&&(g=g.slice(0,S));const R=this.calculateQueryLatency(e,c,g.length);let E=g;return!p.includes("*")&&p.length>0&&(E=g.map(T=>{const N={};return p.forEach(A=>{T.hasOwnProperty(A)&&(N[A]=T[A])}),N})),{success:!0,latency:R,rows:E,rowCount:E.length,columns:p.includes("*")?Object.keys(d[0]||{}):p,dataRead:d.length}}executeInsert(e,t){const s=e.match(/INTO\s+([\w.]+)/i);if(!s)return{success:!1,error:"Invalid INSERT query: missing INTO clause",latency:Date.now()-t};const r=s[1].trim(),l=this.normalizeTableKey(r);let c=this.tables.get(l);if(!c)return{success:!1,error:`Table ${r} does not exist`,latency:Date.now()-t};const d=e.match(/VALUES\s+(.+)/i);if(!d)return{success:!1,error:"Invalid INSERT query: missing VALUES clause",latency:Date.now()-t};const h=d[1].trim(),p=this.parseValues(h),g=this.tableData.get(l)||[],m={},v=e.match(/\(([^)]+)\)\s+VALUES/i),w=v?v[1].split(",").map(S=>S.trim()):[];w.length>0&&w.length===p.length?w.forEach((S,R)=>{m[S]=p[R]}):p.forEach((S,R)=>{m[`column_${R}`]=S}),g.push(m),this.tableData.set(l,g),c.rows=g.length,c.size=g.length*512,this.tables.set(l,c);const C=10+Math.random()*5;return this.simulatePartCreation(l),this.updateMetrics(),{success:!0,latency:C,rowCount:1,dataWritten:1}}executeCreateTable(e,t){const s=e.match(/CREATE\s+TABLE\s+([\w.]+)/i);if(!s)return{success:!1,error:"Invalid CREATE TABLE query",latency:Date.now()-t};const r=s[1].trim(),l=this.normalizeTableKey(r);if(this.tables.has(l))return{success:!1,error:`Table ${r} already exists`,latency:Date.now()-t};const c=e.match(/ENGINE\s*=\s*(\w+)/i),d=c?c[1]:"MergeTree",[h,p]=l.split("."),g={name:p,database:h||"default",engine:d,rows:0,size:0,partitions:0};return this.tables.set(l,g),this.tableData.set(l,[]),this.tableParts.set(l,[]),this.updateMetrics(),{success:!0,latency:Date.now()-t}}executeDropTable(e,t){const s=e.match(/DROP\s+TABLE\s+([\w.]+)/i);if(!s)return{success:!1,error:"Invalid DROP TABLE query",latency:Date.now()-t};const r=s[1].trim(),l=this.normalizeTableKey(r);return this.tables.has(l)?(this.tables.delete(l),this.tableData.delete(l),this.tableParts.delete(l),this.updateMetrics(),{success:!0,latency:Date.now()-t}):{success:!1,error:`Table ${r} does not exist`,latency:Date.now()-t}}executeAlter(e,t){const s=e.match(/ALTER\s+TABLE\s+([\w.]+)/i);if(!s)return{success:!1,error:"Invalid ALTER TABLE query",latency:Date.now()-t};const r=s[1].trim(),l=this.normalizeTableKey(r);return this.tables.get(l)?{success:!0,latency:Date.now()-t}:{success:!1,error:`Table ${r} does not exist`,latency:Date.now()-t}}calculateQueryLatency(e,t,s){const l=s/1e6*5;let c=1;const d=e.toUpperCase();d.includes("JOIN")&&(c*=2),d.includes("GROUP BY")&&(c*=1.5),d.includes("ORDER BY")&&(c*=1.3),d.includes("COUNT")&&(c*=.8),(d.includes("SUM")||d.includes("AVG"))&&(c*=.9);const h=this.tableParts.get(`${t.database}.${t.name}`)||[],p=Math.min(1.5,1+h.length/100);return 10+l*c*p}parseValues(e){let t=e.trim();t.startsWith("(")&&t.endsWith(")")&&(t=t.slice(1,-1));const s=[];let r="",l=!1,c="";for(let d=0;d<t.length;d++){const h=t[d];(h==='"'||h==="'")&&!l?(l=!0,c=h):h===c&&l?(l=!1,c=""):h===","&&!l?(s.push(this.parseValue(r.trim())),r=""):r+=h}return r.trim()&&s.push(this.parseValue(r.trim())),s}parseValue(e){const t=e.trim();return t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):/^-?\d+$/.test(t)?parseInt(t,10):/^-?\d*\.\d+$/.test(t)?parseFloat(t):t.toLowerCase()==="true"?!0:t.toLowerCase()==="false"?!1:t.toLowerCase()==="null"?null:t}normalizeTableKey(e){return e.includes(".")?e:`default.${e}`}simulatePartCreation(e){const t=this.tableParts.get(e)||[],s=new Date().toISOString().split("T")[0],r={name:`${s}_${t.length+1}`,minDate:s,maxDate:s,rows:1e3,size:512*1e3,level:0};if(t.push(r),this.tableParts.set(e,t),t.length>10){const l=t.splice(0,5),c={name:`merged_${Date.now()}`,minDate:l[0].minDate,maxDate:l[l.length-1].maxDate,rows:l.reduce((d,h)=>d+h.rows,0),size:l.reduce((d,h)=>d+h.size,0),level:Math.max(...l.map(d=>d.level))+1};t.unshift(c),this.tableParts.set(e,t)}}updateMetrics(){const e=Date.now(),t=(e-this.lastMetricsUpdate)/1e3;this.metrics.totalTables=this.tables.size;let s=0,r=0,l=0;for(const[p,g]of this.tables.entries()){s+=g.rows,r+=g.size;const m=this.tableParts.get(p)||[];l+=m.length}this.metrics.totalRows=s,this.metrics.totalSize=r,this.metrics.partsCount=l;const c=e-1e3,d=this.queryOperations.filter(p=>p.timestamp>c);if(this.metrics.queriesPerSecond=d.length,this.metrics.queryThroughput=d.length,d.length>0){const p=d.reduce((v,w)=>v+w.latency,0)/d.length;this.metrics.avgQueryTime=Math.round(p*10)/10;const g=d.reduce((v,w)=>v+w.rowsRead,0),m=d.reduce((v,w)=>v+w.rowsWritten,0);this.metrics.readRowsPerSecond=Math.round(g/t),this.metrics.writtenRowsPerSecond=Math.round(m/t)}const h=r/this.metrics.compressionRatio;this.metrics.memoryUsage=h,this.metrics.memoryUsagePercent=h/this.maxMemoryUsage*100,this.metrics.pendingMerges=Math.floor(l/10),this.metrics.clusterNodes=this.replication?3:1,this.metrics.healthyNodes=this.metrics.clusterNodes,this.lastMetricsUpdate=e}getMetrics(){return this.updateMetrics(),{...this.metrics}}insertData(e,t){const s=this.normalizeTableKey(e),r=this.tables.get(s);if(!r)return{success:!1,rowsInserted:0,error:`Table ${e} does not exist`};const l=this.tableData.get(s)||[];return l.push(...t),this.tableData.set(s,l),r.rows=l.length,r.size=l.length*512,this.tables.set(s,r),this.simulatePartCreation(s),this.updateMetrics(),{success:!0,rowsInserted:t.length}}}const or={"X-Small":{servers:1,creditsPerHour:1},Small:{servers:2,creditsPerHour:2},Medium:{servers:4,creditsPerHour:4},Large:{servers:8,creditsPerHour:8},"X-Large":{servers:16,creditsPerHour:16},"2X-Large":{servers:32,creditsPerHour:32},"3X-Large":{servers:64,creditsPerHour:64},"4X-Large":{servers:128,creditsPerHour:128}};class NN{account="archiphoenix";region="us-east-1";warehouses=new Map;databases=new Map;tables=new Map;tableData=new Map;queries=new Map;queryQueue=[];activeQueries=new Map;resultCache=new Map;cacheHits=0;cacheMisses=0;metrics={totalWarehouses:0,runningWarehouses:0,suspendedWarehouses:0,totalQueries:0,runningQueries:0,queuedQueries:0,queriesPerSecond:0,avgQueryTime:0,totalComputeTime:0,totalDataRead:0,totalDataWritten:0,cacheHitRate:0,warehouseUtilization:0,totalCost:0};queryOperations=[];lastMetricsUpdate=Date.now();warehouseLastUpdate=new Map;suspendTimers=new Map;initialize(e){if(this.account=e.account||"archiphoenix",this.region=e.region||"us-east-1",this.warehouses.clear(),e.warehouses&&e.warehouses.length>0)for(const t of e.warehouses)this.warehouses.set(t.name,{...t,status:t.status||"suspended",currentClusterCount:t.minClusterCount||1,runningQueries:0,queuedQueries:0,totalQueriesExecuted:0,totalComputeTime:0});else this.warehouses.set("COMPUTE_WH",{name:"COMPUTE_WH",size:"Small",status:"suspended",autoSuspend:60,autoResume:!0,minClusterCount:1,maxClusterCount:1,currentClusterCount:1,runningQueries:0,queuedQueries:0,totalQueriesExecuted:0,totalComputeTime:0});if(this.databases.clear(),this.tables.clear(),this.tableData.clear(),e.databases){for(const t of e.databases)if(this.databases.set(t.name,{...t}),t.schemas){for(const s of t.schemas)if(s.tables)for(const r of s.tables){const l=`${t.name}.${s.name}.${r.name}`;this.tables.set(l,{...r}),this.tableData.set(l,[])}}}this.databases.has("SNOWFLAKE")||this.databases.set("SNOWFLAKE",{name:"SNOWFLAKE",comment:"System database",retentionTime:1,size:0,schemas:[{name:"INFORMATION_SCHEMA",tables:[],views:0,functions:0}]}),this.updateMetrics()}syncFromConfig(e){if(e.account&&(this.account=e.account),e.region&&(this.region=e.region),e.warehouses){for(const s of e.warehouses){const r=this.warehouses.get(s.name);r?(this.warehouses.set(s.name,{...s,status:r.status,currentClusterCount:r.currentClusterCount,runningQueries:r.runningQueries,queuedQueries:r.queuedQueries,totalQueriesExecuted:r.totalQueriesExecuted,totalComputeTime:r.totalComputeTime,lastUsed:r.lastUsed}),this.updateWarehouseAutoSuspend(s.name,s)):this.warehouses.set(s.name,{...s,status:"suspended",currentClusterCount:s.minClusterCount||1,runningQueries:0,queuedQueries:0,totalQueriesExecuted:0,totalComputeTime:0})}const t=new Set(e.warehouses.map(s=>s.name));for(const[s]of this.warehouses.entries())if(!t.has(s)){this.warehouses.delete(s);const r=this.suspendTimers.get(s);r&&(clearTimeout(r),this.suspendTimers.delete(s))}}if(e.databases){for(const t of e.databases)if(this.databases.get(t.name),this.databases.set(t.name,{...t}),t.schemas){for(const s of t.schemas)if(s.tables)for(const r of s.tables){const l=`${t.name}.${s.name}.${r.name}`,c=this.tables.get(l),d=this.tableData.get(l)||[];c?this.tables.set(l,{...r,rows:c.rows||d.length||0,size:c.size||d.length*512||0}):(this.tables.set(l,{...r,rows:0,size:0}),this.tableData.set(l,[]))}}}this.updateMetrics()}executeQuery(e,t,s,r){const l=Date.now(),c=`query-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,d=this.getCacheKey(e,s,r),h=this.resultCache.get(d);if(h&&Date.now()-h.timestamp<h.ttl)return this.cacheHits++,this.updateMetrics(),{success:!0,latency:10,rows:h.data,rowCount:h.data.length,queryId:c,resultCacheUsed:!0};this.cacheMisses++;let p;if(t?p=this.warehouses.get(t):p=Array.from(this.warehouses.values()).find(m=>m.status==="running")||Array.from(this.warehouses.values())[0],!p)return{success:!1,error:"No warehouse available",latency:Date.now()-l,queryId:c};const g={id:c,queryText:e,status:"queued",warehouse:p.name,database:s,schema:r,startedAt:l};return this.queries.set(c,g),p.status==="suspended"&&p.autoResume&&this.resumeWarehouse(p.name),p.status==="running"?this.executeQueryOnWarehouse(g,p,l):(p.queuedQueries++,this.queryQueue.push(g),g.status="queued",p.autoResume&&this.resumeWarehouse(p.name),p.status==="running"&&this.processQueryQueue(p),{success:!0,latency:50,queryId:c,warehouse:p.name})}executeQueryOnWarehouse(e,t,s){e.status="running",e.startedAt=Date.now(),t.runningQueries++,this.activeQueries.set(e.id,e),1/(or[t.size]||or.Small).servers,this.estimateQueryComplexity(e.queryText);const l=this.executeSQL(e.queryText,e.database,e.schema),c=Date.now();if(e.completedAt=c,e.duration=c-(e.startedAt||s),e.status=l.success?"success":"failed",e.rowsReturned=l.rowCount,e.error=l.error,t.runningQueries--,t.totalQueriesExecuted++,t.totalComputeTime+=e.duration/1e3,t.lastUsed=c,this.activeQueries.delete(e.id),l.success&&l.rows){const d=this.getCacheKey(e.queryText,e.database,e.schema);this.resultCache.set(d,{data:l.rows,timestamp:c,ttl:3e5})}return this.queryOperations.push({timestamp:c,latency:e.duration,rowsRead:l.dataRead||0,rowsWritten:l.dataWritten||0}),t.autoSuspend&&t.runningQueries===0&&t.queuedQueries===0&&this.scheduleWarehouseSuspend(t.name,t.autoSuspend),this.updateMetrics(),{...l,queryId:e.id,warehouse:t.name,latency:e.duration}}executeSQL(e,t,s){const r=e.trim().replace(/\s+/g," "),l=r.toUpperCase();try{return l.startsWith("SELECT")?this.executeSelect(r,t,s):l.startsWith("INSERT")?this.executeInsert(r,t,s):l.startsWith("UPDATE")?this.executeUpdate(r,t,s):l.startsWith("DELETE")?this.executeDelete(r,t,s):l.startsWith("CREATE TABLE")?this.executeCreateTable(r,t,s):l.startsWith("DROP TABLE")?this.executeDropTable(r,t,s):{success:!1,error:`Unsupported SQL statement: ${r}`}}catch(c){return{success:!1,error:c instanceof Error?c.message:"Unknown error"}}}executeSelect(e,t,s){const r=e.match(/FROM\s+([\w.]+)/i);if(!r)return{success:!1,error:"Invalid SELECT query: missing FROM clause"};const l=r[1].trim(),c=this.normalizeTableKey(l,t,s),d=this.tables.get(c);if(!d)return{success:!1,error:`Table ${l} does not exist`};const h=this.tableData.get(c)||[],p=e.match(/SELECT\s+(.+?)\s+FROM/i),g=p?p[1].trim().split(",").map(C=>C.trim()):["*"];let m=[...h];const v=e.match(/WHERE\s+(.+?)(?:\s+GROUP\s+BY|\s+ORDER\s+BY|\s+LIMIT|$)/i);if(v){const S=v[1].trim().match(/(\w+)\s*=\s*['"]?([^'"\s]+)['"]?/);if(S){const R=S[1],E=S[2];m=h.filter(T=>String(T[R])===E)}}const w=e.match(/LIMIT\s+(\d+)/i);if(w){const C=parseInt(w[1],10);m=m.slice(0,C)}return{success:!0,rows:m,rowCount:m.length,columns:g.includes("*")?d.columns?.map(C=>C.name)||[]:g,dataRead:h.length}}executeInsert(e,t,s){const r=e.match(/INTO\s+([\w.]+)/i);if(!r)return{success:!1,error:"Invalid INSERT query: missing INTO clause"};const l=r[1].trim(),c=this.normalizeTableKey(l,t,s),d=this.tables.get(c);if(!d)return{success:!1,error:`Table ${l} does not exist`};const h=e.match(/VALUES\s*\((.+?)\)/i);if(!h)return{success:!1,error:"Invalid INSERT query: missing VALUES clause"};const p=h[1].split(",").map(w=>w.trim().replace(/^['"]|['"]$/g,"")),g=d.columns||[];if(p.length!==g.length)return{success:!1,error:`Column count mismatch: expected ${g.length}, got ${p.length}`};const m={};g.forEach((w,C)=>{m[w.name]=p[C]});const v=this.tableData.get(c)||[];return v.push(m),this.tableData.set(c,v),d.rows=v.length,d.size=v.length*512,{success:!0,rowCount:1,dataWritten:1}}executeUpdate(e,t,s){return{success:!0,rowCount:0,dataWritten:0}}executeDelete(e,t,s){return{success:!0,rowCount:0,dataWritten:0}}executeCreateTable(e,t,s){const r=e.match(/CREATE\s+TABLE\s+([\w.]+)/i);if(!r)return{success:!1,error:"Invalid CREATE TABLE query"};const l=r[1].trim(),c=this.normalizeTableKey(l,t,s);if(this.tables.has(c))return{success:!1,error:`Table ${l} already exists`};const d=e.match(/\((.+?)\)/),h=[];if(d){const w=d[1].split(",").map(C=>C.trim());for(const C of w){const S=C.split(/\s+/);S.length>=2&&h.push({name:S[0],type:S[1],nullable:!C.toUpperCase().includes("NOT NULL")})}}const[p,g,m]=this.parseTableName(l,t,s),v={name:m,schema:g,database:p,columns:h,rows:0,size:0,created:Date.now()};return this.tables.set(c,v),this.tableData.set(c,[]),{success:!0,rowCount:0}}executeDropTable(e,t,s){const r=e.match(/DROP\s+TABLE\s+([\w.]+)/i);if(!r)return{success:!1,error:"Invalid DROP TABLE query"};const l=r[1].trim(),c=this.normalizeTableKey(l,t,s);return this.tables.has(c)?(this.tables.delete(c),this.tableData.delete(c),{success:!0,rowCount:0}):{success:!1,error:`Table ${l} does not exist`}}resumeWarehouse(e){const t=this.warehouses.get(e);if(!t)return!1;if(t.status==="running")return!0;const s=this.suspendTimers.get(e);return s&&(clearTimeout(s),this.suspendTimers.delete(e)),t.status="running",t.currentClusterCount=t.minClusterCount,this.processQueryQueue(t),this.updateMetrics(),!0}suspendWarehouse(e){const t=this.warehouses.get(e);return t?t.status==="suspended"?!0:t.runningQueries>0?!1:(t.status="suspended",t.currentClusterCount=0,this.updateMetrics(),!0):!1}scheduleWarehouseSuspend(e,t){const s=this.suspendTimers.get(e);s&&clearTimeout(s);const r=setTimeout(()=>{const l=this.warehouses.get(e);l&&l.runningQueries===0&&l.queuedQueries===0&&this.suspendWarehouse(e),this.suspendTimers.delete(e)},t*1e3);this.suspendTimers.set(e,r)}updateWarehouseAutoSuspend(e,t){const s=this.warehouses.get(e);if(s){if(t.autoSuspend!==void 0||t.autoResume!==void 0){const r=this.suspendTimers.get(e);r&&(clearTimeout(r),this.suspendTimers.delete(e))}s.status==="running"&&s.autoSuspend&&s.runningQueries===0&&s.queuedQueries===0&&this.scheduleWarehouseSuspend(e,s.autoSuspend)}}processQueryQueue(e){if(e.status!=="running")return;const t=this.queryQueue.filter(s=>s.warehouse===e.name&&s.status==="queued");for(const s of t)e.runningQueries<this.getMaxConcurrentQueries(e)&&(e.queuedQueries--,this.queryQueue=this.queryQueue.filter(r=>r.id!==s.id),this.executeQueryOnWarehouse(s,e,s.startedAt||Date.now()))}getMaxConcurrentQueries(e){return(or[e.size]||or.Small).servers*e.currentClusterCount*8}estimateQueryComplexity(e){let t=1;const s=(e.match(/\bJOIN\b/gi)||[]).length;t+=s*.5,e.match(/\bGROUP\s+BY\b/i)&&(t+=.3),e.match(/\bORDER\s+BY\b/i)&&(t+=.2);const r=(e.match(/\b(COUNT|SUM|AVG|MAX|MIN)\s*\(/gi)||[]).length;return t+=r*.2,Math.max(1,t)}normalizeTableKey(e,t,s){const r=e.split(".");return r.length===3?r.join("."):r.length===2?`${t||"PUBLIC"}.${r.join(".")}`:`${t||"PUBLIC"}.${s||"PUBLIC"}.${r[0]}`}parseTableName(e,t,s){const r=e.split(".");return r.length===3?[r[0],r[1],r[2]]:r.length===2?[t||"PUBLIC",r[0],r[1]]:[t||"PUBLIC",s||"PUBLIC",r[0]]}getCacheKey(e,t,s){return`${e}|${t||""}|${s||""}`}updateMetrics(){const e=Date.now(),t=(e-this.lastMetricsUpdate)/1e3;if(this.metrics.totalWarehouses=this.warehouses.size,this.metrics.runningWarehouses=Array.from(this.warehouses.values()).filter(d=>d.status==="running").length,this.metrics.suspendedWarehouses=Array.from(this.warehouses.values()).filter(d=>d.status==="suspended").length,this.metrics.totalQueries=this.queries.size,this.metrics.runningQueries=Array.from(this.warehouses.values()).reduce((d,h)=>d+h.runningQueries,0),this.metrics.queuedQueries=Array.from(this.warehouses.values()).reduce((d,h)=>d+h.queuedQueries,0),t>0){const d=this.queryOperations.filter(h=>h.timestamp>e-1e3);this.metrics.queriesPerSecond=d.length}if(this.queryOperations.length>0){const d=this.queryOperations.slice(-100),h=d.reduce((p,g)=>p+g.latency,0)/d.length;this.metrics.avgQueryTime=h}this.metrics.totalComputeTime=Array.from(this.warehouses.values()).reduce((d,h)=>d+h.totalComputeTime,0);const s=this.queryOperations.slice(-1e3);this.metrics.totalDataRead=s.reduce((d,h)=>d+h.rowsRead,0),this.metrics.totalDataWritten=s.reduce((d,h)=>d+h.rowsWritten,0);const r=this.cacheHits+this.cacheMisses;this.metrics.cacheHitRate=r>0?this.cacheHits/r:0;let l=0;for(const d of this.warehouses.values())if(d.status==="running"){const h=this.getMaxConcurrentQueries(d),p=h>0?d.runningQueries/h:0;l+=p}this.metrics.warehouseUtilization=this.metrics.runningWarehouses>0?l/this.metrics.runningWarehouses:0;let c=0;for(const d of this.warehouses.values())if(d.status==="running"&&d.totalComputeTime>0){const h=or[d.size]||or.Small,p=d.totalComputeTime/3600;c+=h.creditsPerHour*p*d.currentClusterCount}this.metrics.totalCost=c,this.lastMetricsUpdate=e}getMetrics(){return this.updateMetrics(),{...this.metrics}}getWarehouse(e){return this.warehouses.get(e)}getWarehouses(){return Array.from(this.warehouses.values())}getQuery(e){return this.queries.get(e)}getRecentQueries(e=100){return Array.from(this.queries.values()).sort((t,s)=>(s.startedAt||0)-(t.startedAt||0)).slice(0,e)}getTables(e,t){return!e&&!t?Array.from(this.tables.values()):Array.from(this.tables.values()).filter(s=>!(e&&s.database!==e||t&&s.schema!==t))}}class AN{nodes=[];connections=[];metrics=new Map;connectionMetrics=new Map;isRunning=!1;simulationTime=0;baseTime=Date.now();pausedTime=0;updateInterval=100;intervalId=null;latencyHistory=new Map;connectionLatencyHistory=new Map;HISTORY_SIZE=500;rabbitMQRoutingEngines=new Map;lastRabbitMQUpdate=new Map;activeMQRoutingEngines=new Map;lastActiveMQUpdate=new Map;sqsRoutingEngines=new Map;lastSQSUpdate=new Map;azureServiceBusRoutingEngines=new Map;lastAzureServiceBusUpdate=new Map;pubSubRoutingEngines=new Map;lastPubSubUpdate=new Map;kongRoutingEngines=new Map;apigeeRoutingEngines=new Map;mulesoftRoutingEngines=new Map;graphQLGatewayRoutingEngines=new Map;lastGraphQLGatewayUpdate=new Map;bffRoutingEngines=new Map;webhookRelayRoutingEngines=new Map;redisRoutingEngines=new Map;cassandraRoutingEngines=new Map;clickHouseRoutingEngines=new Map;snowflakeRoutingEngines=new Map;postgresConnectionPools=new Map;constructor(){this.initializeMetrics()}calculatePercentile(e,t){if(e.length===0)return 0;const s=t/100*(e.length-1),r=Math.floor(s),l=Math.ceil(s),c=s-r;return r===l?e[r]:e[r]*(1-c)+e[l]*c}updateLatencyPercentiles(e,t,s){let r=this.latencyHistory.get(e);if(r||(r=[],this.latencyHistory.set(e,r)),r.push(t),r.length>this.HISTORY_SIZE&&r.shift(),r.length>0){const l=[...r].sort((c,d)=>c-d);s.latencyP50=this.calculatePercentile(l,50),s.latencyP99=this.calculatePercentile(l,99)}}updateConnectionLatencyPercentiles(e,t,s){let r=this.connectionLatencyHistory.get(e);if(r||(r=[],this.connectionLatencyHistory.set(e,r)),r.push(t),r.length>this.HISTORY_SIZE&&r.shift(),r.length>0){const l=[...r].sort((c,d)=>c-d);s.latencyP50=this.calculatePercentile(l,50),s.latencyP99=this.calculatePercentile(l,99)}}initialize(e,t){this.nodes=e,this.connections=t,this.initializeMetrics();for(const s of e)s.type==="rabbitmq"&&this.initializeRabbitMQRoutingEngine(s),s.type==="activemq"&&this.initializeActiveMQRoutingEngine(s),s.type==="aws-sqs"&&this.initializeSQSRoutingEngine(s),s.type==="azure-service-bus"&&this.initializeAzureServiceBusRoutingEngine(s),s.type==="gcp-pubsub"&&this.initializePubSubRoutingEngine(s),s.type==="kong"&&this.initializeKongRoutingEngine(s),s.type==="apigee"&&this.initializeApigeeRoutingEngine(s),s.type==="mulesoft"&&this.initializeMuleSoftRoutingEngine(s),s.type==="graphql-gateway"&&this.initializeGraphQLGatewayRoutingEngine(s),s.type==="bff-service"&&this.initializeBFFRoutingEngine(s),s.type==="webhook-relay"&&this.initializeWebhookRelayRoutingEngine(s),s.type==="postgres"&&this.initializePostgreSQLConnectionPool(s),s.type==="redis"&&this.initializeRedisRoutingEngine(s),s.type==="cassandra"&&this.initializeCassandraRoutingEngine(s),s.type==="clickhouse"&&this.initializeClickHouseRoutingEngine(s),s.type==="snowflake"&&this.initializeSnowflakeRoutingEngine(s);for(const s of e)if(s.type==="postgres"){const r=this.postgresConnectionPools.get(s.id);if(r){const l=s.data.config;r.updateConfig({maxConnections:l.maxConnections||100,minConnections:l.minConnections||0,idleTimeout:l.idleTimeout||3e5,maxLifetime:l.maxLifetime||36e5,connectionTimeout:l.connectionTimeout||5e3})}}un.initialize(e,t)}updateNodesAndConnections(e,t){this.nodes=e,this.connections=t;for(const l of e)this.metrics.has(l.id)||this.metrics.set(l.id,this.createDefaultMetrics(l.id,l.type)),l.type==="rabbitmq"&&this.initializeRabbitMQRoutingEngine(l),l.type==="activemq"&&this.initializeActiveMQRoutingEngine(l),l.type==="aws-sqs"&&this.initializeSQSRoutingEngine(l),l.type==="azure-service-bus"&&this.initializeAzureServiceBusRoutingEngine(l),l.type==="gcp-pubsub"&&this.initializePubSubRoutingEngine(l),l.type==="kong"&&this.initializeKongRoutingEngine(l),l.type==="apigee"&&this.initializeApigeeRoutingEngine(l),l.type==="mulesoft"&&this.initializeMuleSoftRoutingEngine(l),l.type==="graphql-gateway"&&this.initializeGraphQLGatewayRoutingEngine(l),l.type==="bff-service"&&this.initializeBFFRoutingEngine(l),l.type==="webhook-relay"&&this.initializeWebhookRelayRoutingEngine(l),l.type==="clickhouse"&&this.initializeClickHouseRoutingEngine(l),l.type==="snowflake"&&this.initializeSnowflakeRoutingEngine(l);const s=new Set(e.map(l=>l.id));for(const[l]of this.metrics.entries())s.has(l)||(this.metrics.delete(l),this.rabbitMQRoutingEngines.delete(l),this.activeMQRoutingEngines.delete(l),this.sqsRoutingEngines.delete(l),this.azureServiceBusRoutingEngines.delete(l),this.pubSubRoutingEngines.delete(l),this.kongRoutingEngines.delete(l),this.apigeeRoutingEngines.delete(l),this.mulesoftRoutingEngines.delete(l),this.graphQLGatewayRoutingEngines.delete(l),this.bffRoutingEngines.delete(l),this.webhookRelayRoutingEngines.delete(l),this.redisRoutingEngines.delete(l),this.cassandraRoutingEngines.delete(l),this.clickHouseRoutingEngines.delete(l),this.snowflakeRoutingEngines.delete(l),this.graphQLGatewayRoutingEngines.delete(l),this.lastRabbitMQUpdate.delete(l),this.lastActiveMQUpdate.delete(l),this.lastSQSUpdate.delete(l),this.lastAzureServiceBusUpdate.delete(l),this.lastPubSubUpdate.delete(l),this.lastGraphQLGatewayUpdate.delete(l));for(const l of t)this.connectionMetrics.has(l.id)||this.connectionMetrics.set(l.id,this.createDefaultConnectionMetrics(l));const r=new Set(t.map(l=>l.id));for(const[l]of this.connectionMetrics.entries())r.has(l)||this.connectionMetrics.delete(l);un.updateNodesAndConnections(e,t)}start(){this.isRunning||(this.isRunning=!0,this.baseTime=Date.now()-this.pausedTime,un.start(),this.intervalId=setInterval(()=>{this.simulate()},this.updateInterval))}stop(){this.isRunning&&(this.isRunning=!1,this.pausedTime=this.simulationTime,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),un.stop())}resetSimulation(){this.stop(),this.simulationTime=0,this.pausedTime=0,this.baseTime=Date.now(),this.initializeMetrics()}simulate(){this.simulationTime=Date.now()-this.baseTime;const e=Date.now();for(const[t,s]of this.rabbitMQRoutingEngines.entries()){const r=this.lastRabbitMQUpdate.get(t)||e,l=e-r;l>0&&(s.processConsumption(l),this.lastRabbitMQUpdate.set(t,e))}for(const[t,s]of this.activeMQRoutingEngines.entries()){const r=this.lastActiveMQUpdate.get(t)||e,l=e-r;l>0&&(s.processConsumption(l),this.lastActiveMQUpdate.set(t,e))}for(const[t,s]of this.sqsRoutingEngines.entries()){const r=this.lastSQSUpdate.get(t)||e,l=e-r;l>0&&(s.processConsumption(l),this.lastSQSUpdate.set(t,e))}for(const[t,s]of this.azureServiceBusRoutingEngines.entries()){const r=this.lastAzureServiceBusUpdate.get(t)||e,l=e-r;l>0&&(s.processConsumption(l),this.lastAzureServiceBusUpdate.set(t,e))}for(const[t,s]of this.pubSubRoutingEngines.entries()){const r=this.lastPubSubUpdate.get(t)||e,l=e-r;l>0&&(s.processConsumption(l),this.lastPubSubUpdate.set(t,e))}for(const t of this.nodes)this.updateComponentMetrics(t);for(const t of this.connections)this.updateConnectionMetrics(t)}updateComponentMetrics(e){const t=e.data.config||{},s=this.metrics.get(e.id)||this.createDefaultMetrics(e.id,e.type),r=this.connections.some(h=>h.target===e.id),l=this.connections.some(h=>h.source===e.id);if(!(r||l))s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0,s.customMetrics={};else switch(e.type){case"kafka":this.simulateKafka(e,t,s,r);break;case"rabbitmq":this.simulateRabbitMQ(e,t,s,r);break;case"activemq":this.simulateActiveMQ(e,t,s,r);break;case"aws-sqs":this.simulateSQS(e,t,s,r);break;case"azure-service-bus":this.simulateAzureServiceBus(e,t,s,r);break;case"gcp-pubsub":this.simulatePubSub(e,t,s,r);break;case"postgres":case"mongodb":case"redis":case"cassandra":this.simulateDatabase(e,t,s,r);break;case"nginx":this.simulateNginx(e,t,s,r);break;case"docker":case"kubernetes":this.simulateInfrastructure(e,t,s,r);break;case"rest":case"grpc":case"websocket":this.simulateAPI(e,t,s,r);break;case"kong":this.simulateKong(e,t,s,r);break;case"apigee":this.simulateApigee(e,t,s,r);break;case"mulesoft":this.simulateMuleSoft(e,t,s,r);break;case"bff-service":this.simulateBFF(e,t,s,r);break}this.applyCascadeEffects(e,s);const d=dr.applyStateEffects(e.id,{throughput:s.throughput,latency:s.latency,errorRate:s.errorRate,utilization:s.utilization});s.throughput=d.throughput,s.latency=d.latency,s.errorRate=d.errorRate,s.utilization=d.utilization,this.updateLatencyPercentiles(e.id,s.latency,s),s.timestamp=Date.now(),this.metrics.set(e.id,s)}applyCascadeEffects(e,t){const s=this.connections.filter(g=>g.target===e.id);if(s.length===0)return;let r=0,l=0,c=0;const d=t.latency;for(const g of s){const m=this.metrics.get(g.source),v=this.connectionMetrics.get(g.id);if(!m||!v)continue;const w=v.throughputDependency||.5;c+=w;const C=m.errorRate*w*.3;r+=C*w;const R=Math.min(m.latency,500)*w*.2;l+=R*w,(m.errorRate>.5||m.utilization>.95)&&(r+=.1*w,l+=100*w)}c>0&&(r/=c,l/=c),l=Math.min(l,500),t.errorRate=Math.min(1,t.errorRate+r),t.latency=d+l;const p=1e4;t.latency=Math.min(t.latency,p),l>50&&(t.utilization=Math.min(1,t.utilization+.1)),r>.1&&(t.throughput=t.throughput*(1-r*.5))}updateConnectionMetrics(e){const t=this.metrics.get(e.source),s=this.metrics.get(e.target);if(!t||!s)return;const r=this.connectionMetrics.get(e.id)||{id:e.id,source:e.source,target:e.target,traffic:0,latency:0,errorRate:0,utilization:0,timestamp:Date.now(),throughputDependency:0,backpressure:0,bottleneck:!1,effectiveThroughput:0,congestion:0},l=this.nodes.find(h=>h.id===e.source),c=this.nodes.find(h=>h.id===e.target),d=l?.data.config?.avgPayloadSize||1024;r.traffic=t.throughput*d/1024,r.latency=this.calculateConnectionLatency(e,t,s),r.errorRate=t.errorRate*.1,this.calculateInteractionMetrics(e,r,t,s,l,c),this.updateConnectionLatencyPercentiles(e.id,r.latency,r),r.timestamp=Date.now(),this.connectionMetrics.set(e.id,r)}calculateInteractionMetrics(e,t,s,r,l,c){const d=e.data||{},p=(d.bandwidthMbps||1e3)*1024*1024/8;this.getComponentCapacity(l);const g=this.getComponentCapacity(c),m=s.throughput,v=l?.data.config?.avgPayloadSize||1024,w=m*v,C=Math.min(w,p),S=g*v,R=Math.min(C,S);t.effectiveThroughput=R/v;const T=this.connections.filter(te=>te.target===e.target).reduce((te,ae)=>{const ce=this.metrics.get(ae.source);return te+(ce?.throughput||0)},0);t.throughputDependency=T>0?m/T:0;const N=r.utilization,A=w/p,j=m/g,q=(d.packetLossPercent||0)/100;t.backpressure=Math.min(1,N*.4+A*.3+j*.2+q*.1);const P=w>p*.8,H=m>g*.8,ee=t.backpressure>.7;t.bottleneck=P||H||ee;const se=this.getBaseLatency(e.type),le=Math.max(0,t.latency-se)/se;t.congestion=Math.min(1,A*.4+le*.3+q*.3),t.utilization=Math.min(1,t.effectiveThroughput/g)}getComponentCapacity(e){if(!e)return 1e3;const t=e.data.config||{};switch(e.type){case"kafka":case"rabbitmq":case"activemq":return t.throughputMsgs||1e3;case"postgres":case"mongodb":case"redis":return t.maxConnections?t.maxConnections*10:1e3;case"nginx":case"rest":case"grpc":case"websocket":return t.requestsPerSecond||1e3;case"docker":case"kubernetes":return(t.workerThreads||1)*500;default:return 1e3}}getBaseLatency(e){return{sync:5,async:2,http:10,grpc:5,websocket:3}[e]||10}simulateKafka(e,t,s,r){const l=e.data.config,c=l?.brokers||["localhost:9092"],d=l?.topics||[],h=l?.consumerGroups||[],p=d.length||t.topicCount||5,g=d.reduce((D,L)=>D+(L.partitions||3),0)||t.partitions||3,m=d.length>0?d.reduce((D,L)=>D+(L.replication||1),0)/d.length:t.replicationFactor||1,v=this.connections.filter(D=>D.target===e.id);let w=0;for(const D of v){const L=this.metrics.get(D.source);L&&(w+=L.throughput||0)}const C=t.throughputMsgs||Math.max(1e3,w);if(!r&&C<=0){if(s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0,d.length>0)for(const D of d)D.messages=D.messages||0,D.size=D.size||0;for(const D of h)D.lag=0;s.customMetrics={topics:p,partitions:g,replication:Math.round(m*10)/10,brokers:c.length,consumer_groups:h.length,total_lag:0};return}const S=.2*Math.sin(this.simulationTime/1e3);s.throughput=C*(1+S);const R=3,E=Math.min(g/10,10),T=Math.max(1,(m-1)*2),N=Math.max(0,(m-1)*1),A=this.calculateCompressionOverhead(d);if(s.latency=R+E+T+N+A,c.length>1){const D=Math.min(5,c.length*.5);s.latency+=D}const j=this.calculateUnderReplicatedPartitions(d,c.length),q=m>1?(m-1)*5e-4:0,P=j>0?j*.001:0,H=l?.acls||[];let ee=0,se=0;for(const D of v){const L=this.nodes.find(X=>X.id===D.source);if(!L)continue;const Y=L.data.config||{},he=Y.messaging?.producerId||Y.clientId||`User:${L.id.slice(0,8)}`,_=Y.messaging?.topic||d[0]?.name||"default-topic";if(!this.checkACLPermission(H,he,"Topic",_,"Write")){const X=this.metrics.get(D.source);X&&(se+=X.throughput*.9,ee+=.45)}}se>0&&(s.throughput=Math.max(0,s.throughput-se)),s.errorRate=Math.max(0,Math.min(.1,q+P+ee+1e-4));const te=Math.min(1,s.throughput/1e4),ae=Math.min(1,g/200);s.utilization=Math.min(1,te*.7+ae*.3);const ce=t.avgPayloadSize||1024,ue=this.updateInterval/1e3;for(const D of d){const L=s.throughput/p,Y=L*ue;D.messages=(D.messages||0)+Y;const he=this.getCompressionRatio(D.config?.compressionType),_=Y*ce*he;if(D.size=(D.size||0)+_,D.config?.retentionMs&&D.config.retentionMs>0){const $=D.config.retentionMs/1e3,W=L*$;if(D.messages>W){const K=D.messages-W;D.messages=W,D.size=Math.max(0,D.size-K*ce*he)}}if(D.config?.retentionBytes&&D.config.retentionBytes>0&&D.size>D.config.retentionBytes){const $=1-D.config.retentionBytes/D.size;D.size=D.config.retentionBytes,D.messages=Math.max(0,D.messages*(1-$))}if((D.config?.cleanupPolicy==="compact"||D.config?.cleanupPolicy==="delete,compact")&&this.simulationTime%3e5<this.updateInterval){const W=Math.round(D.messages*.85),K=D.messages-W;D.messages=W,D.size=Math.max(0,D.size-K*ce*he)}if(D.config?.minInsyncReplicas){const $=D.config.minInsyncReplicas,X=this.getAverageISRCount(D,c.length);if(X<$){const W=$-X;s.errorRate+=W*.01}}if(D.config?.maxMessageBytes&&ce>D.config.maxMessageBytes){const $=Math.min(.1,(ce-D.config.maxMessageBytes)/D.config.maxMessageBytes);s.errorRate+=$*.5}}let z=0;for(const D of h){const L=d.find(at=>at.name===D.topic);if(!L)continue;const Y=D.members||1,he=L.partitions||1,_=this.assignPartitionsToConsumers(Y,he),$=300;let X=0;for(const at of _){const We=at.partitions.length;X+=We*$}const W=Math.min(X,Y*$),K=s.throughput/p||0,oe=D.id||`Group:${D.id}`,B=this.checkACLPermission(H,oe,"Topic",D.topic,"Read"),V=this.checkACLPermission(H,oe,"Group",D.id,"Read");let pe=W;(!B||!V)&&(pe=0);const me=K,ye=pe,ve=Math.max(0,(me-ye)*ue),Pe=D.lag||0,Ue=Math.max(0,Pe+ve-ye*ue);D.lag=Ue,z+=Ue,this.isRebalancing(e.id,D.id)&&(D.lag=Math.min(Ue*1.2,Ue+me*ue*.3),z+=Ue*.2)}s.customMetrics={topics:p,partitions:g,replication:Math.round(m*10)/10,brokers:c.length,consumer_groups:h.length,total_lag:Math.round(z),avg_topic_messages:p>0?Math.round(d.reduce((D,L)=>D+(L.messages||0),0)/p):0,total_topic_size_mb:Math.round(d.reduce((D,L)=>D+(L.size||0),0)/1024/1024*100)/100,under_replicated_partitions:j}}calculateCompressionOverhead(e){if(e.length===0)return 0;const t={uncompressed:0,gzip:2,snappy:.5,lz4:.3,zstd:1};let s=0,r=0;for(const l of e){const c=l.config?.compressionType||"gzip",d=t[c]||0;d>0&&(s+=d,r++)}return r>0?s/r:0}getCompressionRatio(e){return{uncompressed:1,gzip:.3,snappy:.5,lz4:.4,zstd:.25}[e||"gzip"]||.3}calculateUnderReplicatedPartitions(e,t){let s=0;for(const r of e){const l=r.replication||1,c=r.partitions||1;if(r.partitionInfo&&Array.isArray(r.partitionInfo))for(const d of r.partitionInfo){const h=l;(d.isr?.length||d.replicas?.length||1)<h&&s++}else l>t&&(s+=c*Math.max(0,1-t/l)),Math.random()<.05&&l>1&&(s+=c*.1)}return Math.round(s)}assignPartitionsToConsumers(e,t){if(e===0||t===0)return[];const s=[],r=Math.floor(t/e),l=t%e;let c=0;for(let d=0;d<e;d++){const h=[],p=r+(d<l?1:0);for(let g=0;g<p;g++)c<t&&(h.push(c),c++);s.push({consumerId:d,partitions:h})}return s}consumerGroupMemberCounts=new Map;rebalancingGroups=new Map;isRebalancing(e,t){const s=`${e}:${t}`,r=this.rebalancingGroups.get(s);if(r&&Date.now()<r)return!0;const l=this.getCurrentGroupMembers(e,t),c=this.consumerGroupMemberCounts.get(s);return c!==void 0&&l!==c?(this.rebalancingGroups.set(s,Date.now()+2e3),this.consumerGroupMemberCounts.set(s,l),!0):((c===void 0||l!==c)&&this.consumerGroupMemberCounts.set(s,l),!1)}getCurrentGroupMembers(e,t){const s=this.nodes.find(d=>d.id===e);return s&&(s.data.config?.consumerGroups||[]).find(d=>d.id===t)?.members||0}getAverageISRCount(e,t){if(!e.partitionInfo||!Array.isArray(e.partitionInfo)||e.partitionInfo.length===0){const l=e.replication||1;return Math.min(l,t)*.95}let s=0,r=0;for(const l of e.partitionInfo){const c=l.isr?.length||l.replicas?.length||1;s+=c,r++}return r>0?s/r:1}checkACLPermission(e,t,s,r,l,c){if(!e||e.length===0)return!0;const d=t.includes(":")?t:`User:${t}`,h=e.filter(m=>{const v=m.principal||"";if(v!==d&&v!=="*"&&!d.includes(v)||m.resourceType!==s)return!1;const w=m.resourcePatternType||"Literal",C=m.resourceName||"";let S=!1;switch(w){case"Literal":S=C===r||C==="*";break;case"Prefixed":if(C==="*")S=!0;else if(C.endsWith("*")){const R=C.slice(0,-1);S=r.startsWith(R)}else S=r.startsWith(C);break;case"Match":if(C==="*")S=!0;else{const R=C.replace(/\./g,"\\.").replace(/\*/g,".*");S=new RegExp(`^${R}$`).test(r)}break;default:S=C===r||C==="*"}return!(!S||m.operation!==l&&m.operation!=="All"||m.host&&m.host!=="*"&&c&&m.host!==c)});return h.length===0||h.filter(m=>m.permission==="Deny").length>0?!1:h.filter(m=>m.permission==="Allow").length>0}simulateRabbitMQ(e,t,s,r){this.rabbitMQRoutingEngines.has(e.id)||this.initializeRabbitMQRoutingEngine(e);const l=this.rabbitMQRoutingEngines.get(e.id);if(e.data.config,!r){s.throughput=0,s.latency=2,s.errorRate=0;const N=l.getTotalQueueDepth();s.utilization=Math.min(1,N/1e5);const A=l.getAllQueueMetrics(),j=l.getActiveConnections();s.customMetrics={queue_depth:N,connections:j,replication:t.replicationFactor||1},this.updateQueueMetricsInConfig(e,A);return}const c=this.connections.filter(N=>N.target===e.id);let d=0;for(const N of c){const A=this.connectionMetrics.get(N.id);if(A){const q=A.traffic/1024;d+=q}}const h=t.throughputMsgs||d||1e3,p=t.replicationFactor||1,g=(Math.random()-.5)*.1;s.throughput=h*(1+g);const m=l.getTotalQueueDepth(),v=2,w=Math.min(50,m/1e3);s.latency=v+p*5+w+Math.random()*5;const C=5e-4,S=Math.min(.01,m/1e6);s.errorRate=C+S,s.utilization=Math.min(1,m/1e5);const R=l.getAllQueueMetrics(),E=l.getActiveConnections();let T=0;for(const N of R.values())T+=N.consumers;s.customMetrics={queue_depth:m,connections:E,replication:p,queues:R.size,consumers:T},this.updateQueueMetricsInConfig(e,R)}initializeRabbitMQRoutingEngine(e){const t=e.data.config||{},s=new oN;s.initialize({queues:t.queues||[],exchanges:t.exchanges||[{name:"amq.direct",type:"direct",durable:!0,autoDelete:!1,internal:!1},{name:"amq.topic",type:"topic",durable:!0,autoDelete:!1,internal:!1},{name:"amq.fanout",type:"fanout",durable:!0,autoDelete:!1,internal:!1}],bindings:t.bindings||[]}),this.rabbitMQRoutingEngines.set(e.id,s),this.lastRabbitMQUpdate.set(e.id,Date.now())}updateQueueMetricsInConfig(e,t){const s=e.data.config||{},r=s.queues||[];for(let l=0;l<r.length;l++){const c=r[l],d=t.get(c.name);d&&(r[l]={...c,messages:d.messages,ready:d.ready,unacked:d.unacked,consumers:d.consumers})}s.queues=r}simulateActiveMQ(e,t,s,r){this.activeMQRoutingEngines.has(e.id)||this.initializeActiveMQRoutingEngine(e);const l=this.activeMQRoutingEngines.get(e.id),c=e.data.config||{},d=c.protocol||"openwire",h=c.persistenceEnabled??!0,p=c.maxConnections||1e3,g=c.memoryLimit||1024,m=c.storeUsage||0,v=c.tempUsage||0,w=c.connections||[];if(!r){s.throughput=0,s.latency=this.getProtocolBaseLatency(d),s.errorRate=0;const W=l.getTotalQueueDepth(),K=l.getTotalTopicMessages(),oe=W+K;s.utilization=Math.min(1,oe/1e5);const B=l.getAllQueueMetrics(),V=l.getAllTopicMetrics(),pe=l.getActiveConnections();let me=0;for(const ve of B.values())me+=ve.consumerCount;let ye=0;for(const ve of V.values())ye+=ve.subscriberCount;s.customMetrics={queue_depth:W,topic_messages:K,connections:pe,queues:B.size,topics:V.size,consumers:me,subscribers:ye,memory_usage:m+v,memory_percent:g>0?(m+v)/g*100:0},this.updateActiveMQMetricsInConfig(e,B,V);return}const C=this.connections.filter(W=>W.target===e.id);let S=0;for(const W of C){const K=this.connectionMetrics.get(W.id);if(K){const B=K.traffic/1024;S+=B}}const R=t.throughputMsgs||S||1e3,E=(Math.random()-.5)*.1;s.throughput=R*(1+E);const T=l.getTotalQueueDepth(),N=l.getTotalTopicMessages(),A=T+N,j=this.getProtocolBaseLatency(d),q=h?5:0,P=Math.min(50,A/1e3),H=g>0&&m+v>g*.8?10:0;s.latency=j+q+P+H+Math.random()*5;const ee=c.acls||[];let se=0,le=0;for(const W of C){const K=this.nodes.find(pe=>pe.id===W.source);if(!K)continue;const oe=K.data.config,B=oe?.messaging||{},V=oe?.username||oe?.clientId||c.username||`user-${W.source.slice(0,8)}`;if(B.queue&&!this.checkActiveMQACLPermission(ee,V,`queue://${B.queue}`,"write")){const me=this.metrics.get(W.source);me&&(le+=me.throughput*.9,se+=.45)}if(B.topic&&!this.checkActiveMQACLPermission(ee,V,`topic://${B.topic}`,"write")){const me=this.metrics.get(W.source);me&&(le+=me.throughput*.9,se+=.45)}}for(const W of queues)W.consumerCount&&W.consumerCount>0&&(this.checkActiveMQACLPermission(ee,c.username||"admin",`queue://${W.name}`,"read")||(se+=.1));const te=5e-4,ae=Math.min(.01,A/1e6),ce=g>0&&m+v>g?.01:0,ue=w.length>=p?.005:0;le>0&&(s.throughput=Math.max(0,s.throughput-le)),s.errorRate=Math.min(1,te+ae+ce+ue+se);const z=Math.min(1,A/1e5),D=g>0?Math.min(1,(m+v)/g):0,L=Math.min(1,w.length/p);s.utilization=Math.max(z,D,L);const Y=l.getAllQueueMetrics(),he=l.getAllTopicMetrics(),_=l.getActiveConnections();let $=0;for(const W of Y.values())$+=W.consumerCount;let X=0;for(const W of he.values())X+=W.subscriberCount;s.customMetrics={queue_depth:T,topic_messages:N,connections:_,queues:Y.size,topics:he.size,consumers:$,subscribers:X,memory_usage:m+v,memory_percent:g>0?(m+v)/g*100:0,protocol:d},this.updateActiveMQMetricsInConfig(e,Y,he)}checkActiveMQACLPermission(e,t,s,r){if(!e||e.length===0)return!0;const l=e.filter(h=>{const p=h.principal||"";if(p!==t&&p!=="*"&&!t.includes(p))return!1;const g=h.resource||"";let m=!1;if(g==="*"||g===s)m=!0;else if(g.endsWith("*")){const C=g.slice(0,-1);m=s.startsWith(C)}else g.includes("://")?m=g===s:m=s.includes(g);if(!m)return!1;const v=(h.operation||"").toLowerCase(),w=r.toLowerCase();return!(v!==w&&v!=="all"&&v!=="*")});return l.length===0?!0:l.filter(h=>h.permission==="deny").length>0?!1:(l.filter(h=>h.permission==="allow").length>0,!0)}getProtocolBaseLatency(e){return{openwire:2,amqp:5,mqtt:8,stomp:10,ws:12}[e]||5}initializeActiveMQRoutingEngine(e){const t=e.data.config||{},s=new rN;s.initialize({queues:t.queues||[],topics:t.topics||[],subscriptions:t.subscriptions||[]}),this.activeMQRoutingEngines.set(e.id,s),this.lastActiveMQUpdate.set(e.id,Date.now())}updateActiveMQMetricsInConfig(e,t,s){const r=e.data.config||{},l=r,c=r.queues||[];for(let m=0;m<c.length;m++){const v=c[m],w=t.get(v.name);w&&(c[m]={...v,queueSize:w.queueSize,consumerCount:w.consumerCount,enqueueCount:w.enqueueCount,dequeueCount:w.dequeueCount})}r.queues=c;const d=r.topics||[];for(let m=0;m<d.length;m++){const v=d[m],w=s.get(v.name);w&&(d[m]={...v,subscriberCount:w.subscriberCount,enqueueCount:w.enqueueCount,dequeueCount:w.dequeueCount})}r.topics=d;const h=this.connections.filter(m=>m.target===e.id),p=[];for(const m of h){const v=this.nodes.find(E=>E.id===m.source);if(!v)continue;v.data.config?.messaging;const C=l.protocol||"openwire",S=this.connectionMetrics.get(m.id),R=S?Math.floor(S.traffic/1024):0;p.push({id:m.id,remoteAddress:`${v.label||v.id}`,clientId:`client-${m.source.slice(0,8)}`,userName:l.username||"admin",connectedSince:new Date().toISOString(),messageCount:R,protocol:C==="openwire"?"OpenWire":C==="amqp"?"AMQP":C==="mqtt"?"MQTT":C==="stomp"?"STOMP":C==="ws"?"WebSocket":"OpenWire"})}r.connections=p;const g=[];for(const m of d)for(const v of h){const w=this.nodes.find(R=>R.id===v.source);if(!w)continue;const S=w.data.config?.messaging||{};if(S.topic===m.name||!S.queue){const R=s.get(m.name);g.push({id:`sub-${v.id}-${m.name}`,destination:m.name,clientId:`client-${v.source.slice(0,8)}`,pendingQueueSize:0,dispatchedQueueSize:0,dispatchedCounter:R?.enqueueCount||0,enqueueCounter:R?.enqueueCount||0,dequeueCounter:R?.dequeueCount||0})}}r.subscriptions=g}simulateAzureServiceBus(e,t,s,r){this.azureServiceBusRoutingEngines.has(e.id)||this.initializeAzureServiceBusRoutingEngine(e);const l=this.azureServiceBusRoutingEngines.get(e.id),c=e.data.config||{};if(!r){s.throughput=0,s.latency=5,s.errorRate=0;const se=l.getTotalQueueDepth(),le=l.getTotalSubscriptionMessages(),te=se+le;s.utilization=Math.min(1,te/1e5);const ae=l.getAllQueueMetrics(),ce=l.getAllSubscriptionMetrics(),ue=l.getActiveConnections();s.customMetrics={queue_depth:se,subscription_messages:le,connections:ue,queues:c.queues?.length||0,topics:c.topics?.length||0},this.updateAzureServiceBusMetricsInConfig(e,ae,ce);return}const d=this.connections.filter(se=>se.target===e.id);let h=0;for(const se of d){const le=this.connectionMetrics.get(se.id);if(le){const ae=le.traffic/1024;h+=ae}}const p=t.throughputMsgs||h||1e3,g=(Math.random()-.5)*.1;s.throughput=p*(1+g);const m=l.getTotalQueueDepth(),v=l.getTotalSubscriptionMessages(),w=m+v,C=5,S=Math.min(50,w/1e3),R=2;s.latency=C+S+R+Math.random()*5;const E=l.getAllQueueMetrics(),T=l.getAllSubscriptionMetrics(),N=l.getActiveConnections(),A=5e-4,j=Math.min(.01,w/1e6);let q=0;for(const se of E.values())q+=se.deadLetterMessageCount||0;for(const se of T.values())q+=se.deadLetterMessageCount||0;const P=q>0?Math.min(.05,q/1e4):0;s.errorRate=Math.min(1,A+j+P),s.utilization=Math.min(1,w/1e5);let H=0;const ee=c.topics||[];for(const se of ee)H+=(se.subscriptions||[]).length;s.customMetrics={queue_depth:m,subscription_messages:v,dead_letter_messages:q,connections:N,queues:c.queues?.length||0,topics:c.topics?.length||0,subscriptions:H},this.updateAzureServiceBusMetricsInConfig(e,E,T)}initializeAzureServiceBusRoutingEngine(e){const t=e.data.config||{},s=new lN,r=(t.queues||[]).map(c=>({name:c.name,namespace:c.namespace||t.namespace||"archiphoenix.servicebus.windows.net",maxSizeInMegabytes:c.maxSizeInMegabytes||1024,defaultMessageTimeToLive:c.defaultMessageTimeToLive||2592e3,lockDuration:c.lockDuration||30,maxDeliveryCount:c.maxDeliveryCount||10,enablePartitioning:c.enablePartitioning||!1,enableDeadLetteringOnMessageExpiration:c.enableDeadLetteringOnMessageExpiration!==void 0?c.enableDeadLetteringOnMessageExpiration:!0,enableSessions:c.enableSessions||!1,activeMessageCount:c.activeMessageCount||0,deadLetterMessageCount:c.deadLetterMessageCount||0,scheduledMessageCount:c.scheduledMessageCount||0})),l=(t.topics||[]).map(c=>({name:c.name,namespace:c.namespace||t.namespace||"archiphoenix.servicebus.windows.net",maxSizeInMegabytes:c.maxSizeInMegabytes||1024,defaultMessageTimeToLive:c.defaultMessageTimeToLive||2592e3,enablePartitioning:c.enablePartitioning||!1,subscriptions:(c.subscriptions||[]).map(d=>({name:d.name,maxDeliveryCount:d.maxDeliveryCount||10,lockDuration:d.lockDuration||30,enableDeadLetteringOnMessageExpiration:d.enableDeadLetteringOnMessageExpiration!==void 0?d.enableDeadLetteringOnMessageExpiration:!0,activeMessageCount:d.activeMessageCount||0}))}));s.initialize({queues:r,topics:l}),this.azureServiceBusRoutingEngines.set(e.id,s),this.lastAzureServiceBusUpdate.set(e.id,Date.now())}updateAzureServiceBusMetricsInConfig(e,t,s){const r=e.data.config||{},l=r.queues||[];for(let d=0;d<l.length;d++){const h=l[d],p=t.get(h.name);p&&(l[d]={...h,activeMessageCount:p.activeMessageCount,deadLetterMessageCount:p.deadLetterMessageCount,scheduledMessageCount:p.scheduledMessageCount})}r.queues=l;const c=r.topics||[];for(let d=0;d<c.length;d++){const h=c[d],p=h.subscriptions||[];for(let g=0;g<p.length;g++){const m=p[g],v=`${h.name}/subscriptions/${m.name}`,w=s.get(v);w&&(p[g]={...m,activeMessageCount:w.activeMessageCount})}c[d]={...h,subscriptions:p}}r.topics=c}simulatePubSub(e,t,s,r){this.pubSubRoutingEngines.has(e.id)||this.initializePubSubRoutingEngine(e);const l=this.pubSubRoutingEngines.get(e.id),c=e.data.config||{},d=c.topics||[],h=c.subscriptions||[];if(!r){s.throughput=0,s.latency=3,s.errorRate=0;const z=l.getTotalTopicMessages(),D=l.getTotalUnackedMessages(),L=z+D;s.utilization=Math.min(1,L/1e5);const Y=l.getAllTopicMetrics(),he=l.getAllSubscriptionMetrics(),_=l.getActiveConnections();s.customMetrics={topic_messages:z,unacked_messages:D,connections:_,topics:d.length,subscriptions:h.length},this.updatePubSubMetricsInConfig(e,Y,he);return}const p=this.connections.filter(z=>z.target===e.id);let g=0;for(const z of p){const D=this.connectionMetrics.get(z.id);if(D){const Y=D.traffic/1024;g+=Y}}const m=t.throughputMsgs||g||1e3,v=(Math.random()-.5)*.1;s.throughput=m*(1+v);const w=l.getTotalTopicMessages(),C=l.getTotalUnackedMessages(),S=w+C,R=3,E=Math.min(15,S/1e4),T=h.filter(z=>z.pushEndpoint).length,N=T>0?2:0,A=C>0?.5:0;s.latency=R+E+N+A+Math.random()*2;const j=l.getAllTopicMetrics(),q=l.getAllSubscriptionMetrics(),P=l.getActiveConnections(),H=1e-4,ee=Math.min(.001,S/5e6),se=T>0&&C>0?Math.min(.002,C/1e5):0,le=h.length>0?h.reduce((z,D)=>z+(D.ackDeadlineSeconds||10),0)/h.length:10,te=C>0&&le<60?Math.min(.005,C/1e5):0;s.errorRate=Math.min(1,H+ee+se+te);const ae=Math.min(1,s.throughput/1e5),ce=Math.min(.3,S/5e5);s.utilization=Math.min(1,ae*.7+ce*.3);const ue=h.length-T;s.customMetrics={topic_messages:w,unacked_messages:C,connections:P,topics:d.length,subscriptions:h.length,push_subscriptions:T,pull_subscriptions:ue,total_bytes:Array.from(j.values()).reduce((z,D)=>z+D.byteCount,0)},this.updatePubSubMetricsInConfig(e,j,q)}initializePubSubRoutingEngine(e){const t=e.data.config||{},s=new cN,r=(t.topics||[]).map(c=>({name:c.name,projectId:c.projectId||t.projectId||"archiphoenix-lab",messageRetentionDuration:c.messageRetentionDuration||604800,labels:c.labels||{},messageCount:c.messageCount||0,byteCount:c.byteCount||0})),l=(t.subscriptions||[]).map(c=>({name:c.name,topic:c.topic,projectId:c.projectId||t.projectId||"archiphoenix-lab",ackDeadlineSeconds:c.ackDeadlineSeconds||10,messageRetentionDuration:c.messageRetentionDuration,enableMessageOrdering:c.enableMessageOrdering||!1,pushEndpoint:c.pushEndpoint,pushAttributes:c.pushAttributes||{},messageCount:c.messageCount||0,unackedMessageCount:c.unackedMessageCount||0}));s.initialize({topics:r,subscriptions:l}),this.pubSubRoutingEngines.set(e.id,s),this.lastPubSubUpdate.set(e.id,Date.now())}updatePubSubMetricsInConfig(e,t,s){const r=e.data.config||{},l=r.topics||[];for(let d=0;d<l.length;d++){const h=l[d],p=t.get(h.name);p&&(l[d]={...h,messageCount:p.messageCount,byteCount:p.byteCount})}r.topics=l;const c=r.subscriptions||[];for(let d=0;d<c.length;d++){const h=c[d],p=s.get(h.name);p&&(c[d]={...h,messageCount:p.messageCount,unackedMessageCount:p.unackedMessageCount})}r.subscriptions=c}simulateSQS(e,t,s,r){this.sqsRoutingEngines.has(e.id)||this.initializeSQSRoutingEngine(e);const l=this.sqsRoutingEngines.get(e.id);if(e.data.config,!r){s.throughput=0,s.latency=5,s.errorRate=0;const E=l.getTotalQueueDepth();s.utilization=Math.min(1,E/1e5);const T=l.getAllQueueMetrics(),N=l.getActiveConnections();s.customMetrics={queue_depth:E,connections:N,queues:T.size},this.updateSQSQueueMetricsInConfig(e,T);return}const c=this.connections.filter(E=>E.target===e.id);let d=0;for(const E of c){const T=this.connectionMetrics.get(E.id);if(T){const A=T.traffic/1024;d+=A}}const h=t.throughputMsgs||d||1e3,p=(Math.random()-.5)*.1;s.throughput=h*(1+p);const g=l.getTotalQueueDepth(),m=5,v=Math.min(50,g/1e3);s.latency=m+v+Math.random()*5;const w=5e-4,C=Math.min(.01,g/1e6);s.errorRate=w+C,s.utilization=Math.min(1,g/1e5);const S=l.getAllQueueMetrics(),R=l.getActiveConnections();s.customMetrics={queue_depth:g,connections:R,queues:S.size},this.updateSQSQueueMetricsInConfig(e,S)}initializeSQSRoutingEngine(e){const t=e.data.config||{},s=new iN,r=(t.queues||[]).map(l=>({name:l.name,type:l.type||"standard",region:l.region||t.defaultRegion||"us-east-1",visibilityTimeout:l.visibilityTimeout||30,messageRetention:l.messageRetention||4,delaySeconds:l.delaySeconds||0,maxReceiveCount:l.maxReceiveCount,deadLetterQueue:l.deadLetterQueue,contentBasedDedup:l.contentBasedDedup,fifoThroughputLimit:l.fifoThroughputLimit||"perQueue"}));s.initialize({queues:r}),this.sqsRoutingEngines.set(e.id,s),this.lastSQSUpdate.set(e.id,Date.now())}updateSQSQueueMetricsInConfig(e,t){const s=e.data.config||{},r=s.queues||[];for(let l=0;l<r.length;l++){const c=r[l],d=t.get(c.name);d&&(r[l]={...c,approximateMessages:d.approximateMessages,approximateMessagesNotVisible:d.approximateMessagesNotVisible,approximateMessagesDelayed:d.approximateMessagesDelayed})}s.queues=r}simulateDatabase(e,t,s,r){if(!r){if(s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0,s.customMetrics={},e.type==="postgres"){const v=this.postgresConnectionPools.get(e.id);v&&v.reset()}return}const l=t.maxConnections||100,c=t.queryLatency||10;if(e.type==="postgres"){const v=this.postgresConnectionPools.get(e.id);if(v){const C=this.connections.filter(q=>q.target===e.id).reduce((q,P)=>{const H=this.metrics.get(P.source);return q+(H?.throughput||0)},0),R=Math.min(C,l*10)*this.updateInterval/1e3;for(let q=0;q<Math.floor(R);q++){const P=v.acquireConnection("SELECT");if(P){const H=c+Math.random()*20;setTimeout(()=>{v.releaseConnection(P,H)},H)}}const E=v.getMetrics();s.throughput=E.queriesPerSecond,s.latency=E.averageQueryTime||c,s.utilization=E.utilization,s.errorRate=E.waitingConnections>0?.01:.001;const N=e.data.config.tables||[];let A=0;for(const q of N)A+=(q.indexes||[]).length;A===0&&(A=5);const j=this.calculateCacheHitRatio(e,E.queriesPerSecond);s.customMetrics={active_connections:E.activeConnections,idle_connections:E.idleConnections,waiting_connections:E.waitingConnections,total_connections:E.totalConnections,max_connections:l,indexes:A,cache_hit_ratio:j,connection_wait_time:E.connectionWaitTime};return}}if(e.type==="redis"){this.redisRoutingEngines.has(e.id)||this.initializeRedisRoutingEngine(e);const v=this.redisRoutingEngines.get(e.id),w=e.data.config;w?.keys&&v.syncKeysFromConfig(w.keys);const C=v.getMetrics(),R=this.connections.filter(A=>A.target===e.id).reduce((A,j)=>{const q=this.metrics.get(j.source);return A+(q?.throughput||0)},0);s.throughput=Math.max(C.operationsPerSecond,R);const E=.5,T=C.memoryUsagePercent/100,N=Math.min(1,C.totalKeys/1e5);s.latency=E+T*2+N*1,s.errorRate=T>.95?.01:.001,s.utilization=C.memoryUsagePercent/100,s.customMetrics={total_keys:C.totalKeys,keys_string:C.keysByType.string,keys_hash:C.keysByType.hash,keys_list:C.keysByType.list,keys_set:C.keysByType.set,keys_zset:C.keysByType.zset,keys_stream:C.keysByType.stream,memory_usage:C.memoryUsage,memory_usage_percent:C.memoryUsagePercent,operations_per_second:C.operationsPerSecond,hit_count:C.hitCount,miss_count:C.missCount,hit_rate:C.hitRate,expired_keys:C.expiredKeys,evicted_keys:C.evictedKeys,connected_clients:C.connectedClients};return}if(e.type==="cassandra"){this.cassandraRoutingEngines.has(e.id)||this.initializeCassandraRoutingEngine(e);const v=this.cassandraRoutingEngines.get(e.id),w=e.data.config;w&&v.syncFromConfig({clusterName:w.clusterName,nodes:w.nodes,keyspaces:w.keyspaces,tables:w.tables,defaultConsistencyLevel:w.consistencyLevel,defaultReplicationFactor:w.replicationFactor});const C=v.getMetrics(),R=this.connections.filter(j=>j.target===e.id).reduce((j,q)=>{const P=this.metrics.get(q.source);return j+(P?.throughput||0)},0);s.throughput=Math.max(C.readOperationsPerSecond+C.writeOperationsPerSecond,R);const E=C.readOperationsPerSecond+C.writeOperationsPerSecond;if(E>0){const j=C.readOperationsPerSecond/E,q=C.writeOperationsPerSecond/E;s.latency=C.readLatency*j+C.writeLatency*q}else s.latency=(C.readLatency+C.writeLatency)/2;const T=C.readConsistencyViolations+C.writeConsistencyViolations;s.errorRate=Math.min(.1,T/Math.max(1,E))||.001;const N=C.totalNodes>0?(C.totalNodes-C.healthyNodes)/C.totalNodes:0,A=Math.min(1,C.pendingCompactions/100);s.utilization=Math.min(1,N*.7+A*.3),s.customMetrics={total_nodes:C.totalNodes,healthy_nodes:C.healthyNodes,total_keyspaces:C.totalKeyspaces,total_tables:C.totalTables,total_rows:C.totalRows,total_size_gb:C.totalSize/(1024*1024*1024),read_latency_ms:C.readLatency,write_latency_ms:C.writeLatency,read_ops_per_sec:C.readOperationsPerSecond,write_ops_per_sec:C.writeOperationsPerSecond,pending_compactions:C.pendingCompactions,read_consistency_violations:C.readConsistencyViolations,write_consistency_violations:C.writeConsistencyViolations,hinted_handoffs:C.hintedHandoffs};return}if(e.type==="clickhouse"){this.clickHouseRoutingEngines.has(e.id)||this.initializeClickHouseRoutingEngine(e);const v=this.clickHouseRoutingEngines.get(e.id),w=e.data.config;w&&v.syncFromConfig({cluster:w.cluster,replication:w.replication,tables:w.tables?.map(A=>({name:A.name,database:w.database||"default",engine:A.engine||"MergeTree",rows:A.rows||0,size:A.size||0,partitions:A.partitions||0,columns:A.columns||[]})),maxMemoryUsage:w.maxMemoryUsage,compression:w.compression});const C=v.getMetrics(),R=this.connections.filter(A=>A.target===e.id).reduce((A,j)=>{const q=this.metrics.get(j.source);return A+(q?.throughput||0)},0);s.throughput=Math.max(C.queriesPerSecond,R),s.latency=C.avgQueryTime;const E=C.memoryUsagePercent/100;s.errorRate=E>.95?.01:.001;const T=Math.min(1,C.activeQueries/10),N=E;s.utilization=Math.max(T,N),s.customMetrics={total_tables:C.totalTables,total_rows:C.totalRows,total_size_gb:C.totalSize/(1024*1024*1024),queries_per_sec:C.queriesPerSecond,read_rows_per_sec:C.readRowsPerSecond,written_rows_per_sec:C.writtenRowsPerSecond,avg_query_time_ms:C.avgQueryTime,active_queries:C.activeQueries,memory_usage_bytes:C.memoryUsage,memory_usage_percent:C.memoryUsagePercent,parts_count:C.partsCount,pending_merges:C.pendingMerges,compression_ratio:C.compressionRatio,cluster_nodes:C.clusterNodes,healthy_nodes:C.healthyNodes};return}if(e.type==="snowflake"){this.snowflakeRoutingEngines.has(e.id)||this.initializeSnowflakeRoutingEngine(e);const v=this.snowflakeRoutingEngines.get(e.id),w=e.data.config;w&&v.syncFromConfig({account:w.account,region:w.region,warehouses:w.warehouses,databases:w.databases,role:w.role,enableAutoSuspend:w.enableAutoSuspend,autoSuspendSeconds:w.autoSuspendSeconds,enableAutoResume:w.enableAutoResume});const C=v.getMetrics(),R=this.connections.filter(E=>E.target===e.id).reduce((E,T)=>{const N=this.metrics.get(T.source);return E+(N?.throughput||0)},0);s.throughput=Math.max(C.queriesPerSecond,R),s.latency=C.avgQueryTime,s.errorRate=.001,s.utilization=C.warehouseUtilization,s.customMetrics={total_warehouses:C.totalWarehouses,running_warehouses:C.runningWarehouses,suspended_warehouses:C.suspendedWarehouses,total_queries:C.totalQueries,running_queries:C.runningQueries,queued_queries:C.queuedQueries,queries_per_sec:C.queriesPerSecond,avg_query_time_ms:C.avgQueryTime,total_compute_time_sec:C.totalComputeTime,total_data_read:C.totalDataRead,total_data_written:C.totalDataWritten,cache_hit_rate:C.cacheHitRate,warehouse_utilization:C.warehouseUtilization,total_cost_credits:C.totalCost};return}let d=t.indexCount||5;e.type==="mongodb"&&(d=(e.data.config?.collections||[]).reduce((C,S)=>C+(S.indexes?.length||0),0),d===0&&(d=1));const p=this.connections.filter(v=>v.target===e.id).reduce((v,w)=>{const C=this.metrics.get(w.source);return v+(C?.throughput||0)},0),g=Math.min(l,Math.floor(p/10)||Math.floor(l*.3));s.throughput=g*(1e3/(c+Math.random()*20));const m=Math.min(.3,d*.02);if(s.latency=c+g/l*50*(1-m),s.errorRate=.001,s.utilization=g/l,s.customMetrics={active_connections:g,max_connections:l,indexes:d,cache_hit_ratio:Math.random()*.8+.2},e.type==="mongodb"){const v=e.data.config,w=v?.collections||[],C=w.filter(N=>N.validation&&N.validation.validationLevel!=="off").length;if(C>0){const N=Math.min(.05,C*.01);s.errorRate=Math.max(s.errorRate,N)}const S=v?.enableReplicaSet||!1,R=v?.replicaSetMembers||[];if(S&&R.length>1){const N=R.length,A=Math.min(.3,(N-1)*.1);s.errorRate=Math.max(0,s.errorRate*(1-A)),s.latency=s.latency*(1+.05*(N-1))}const E=v?.enableSharding||!1,T=v?.shardConfig;if(E&&T?.shards){const N=T.shards.length,A=1+(N-1)*.3;s.throughput=s.throughput*A,s.latency=s.latency*(1+.02*(N-1))}s.customMetrics={...s.customMetrics,collections:w.length,collections_with_validation:C,total_documents:w.reduce((N,A)=>N+(A.documentCount||0),0),replica_set_enabled:S,replica_members:S?R.length:0,sharding_enabled:E,shard_count:E&&T?.shards?.length||0}}}simulateNginx(e,t,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=t.workerThreads||4,c=t.requestsPerSecond||1e4,d=.5*Math.sin(this.simulationTime/2e3)+.5;s.throughput=c*d,s.latency=1+(1-d)*4,s.errorRate=1e-5,s.utilization=Math.min(1,s.throughput/c*(l/4)),s.customMetrics={worker_threads:l,active_connections:Math.floor(s.throughput*.1),cache_hits:Math.floor(Math.random()*1e4),cache_misses:Math.floor(Math.random()*1e3)}}simulateInfrastructure(e,t,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=t.workerThreads||1;s.throughput=100*l+Math.random()*50,s.latency=50+Math.random()*100,s.errorRate=1e-4,s.utilization=Math.random()*.8,s.customMetrics={replicas:l,cpu_percent:Math.random()*80,memory_percent:Math.random()*70}}simulateAPI(e,t,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=t.requestsPerSecond||100,c=t.responseLatency||50,d=Math.sin(this.simulationTime/1500)*.1+1;s.throughput=l*d,s.latency=c+Math.random()*30,s.errorRate=.005,s.utilization=s.throughput/l*Math.random(),s.customMetrics={rps:l,p50_latency:Math.round(c*.5),p99_latency:Math.round(c*2),errors:Math.round(s.throughput*s.errorRate)}}simulateKong(e,t,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=this.kongRoutingEngines.get(e.id);if(!l){this.simulateAPI(e,t,s,r);return}const c=t||{},d=c.requestsPerSecond||t.requestsPerSecond||450,h=l.getStats(),p=.5*Math.sin(this.simulationTime/2e3)+.5;let g=d*p;const m=(c.plugins||[]).filter(E=>E.name==="rate-limiting"&&E.enabled);if(m.length>0){const E=Math.min(...m.map(T=>T.config?.minute||1e3));g=Math.min(g,E*p)}s.throughput=g;const v=2+Math.random()*3,w=h.plugins*.5,C=10+Math.random()*40;s.latency=v+w+C;const S=.001,R=h.consumers>0?.02:0;s.errorRate=Math.min(1,S+R),s.utilization=Math.min(1,s.throughput/d),s.customMetrics={services:h.services,routes:h.routes,upstreams:h.upstreams,consumers:h.consumers,plugins:h.plugins,requests_per_second:d,gateway_latency:v+w,upstream_latency:C}}simulateApigee(e,t,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=this.apigeeRoutingEngines.get(e.id);if(!l){this.simulateAPI(e,t,s,r);return}const c=t||{},d=c.proxies||[],h=c.requestsPerSecond||t.requestsPerSecond||500,p=l.getStats(),g=.5*Math.sin(this.simulationTime/2e3)+.5;let m=h*g;const v=d.filter(N=>N.status!=="undeployed");if(v.length>0){const N=v.filter(j=>j.quota&&j.quotaInterval).map(j=>j.quota/j.quotaInterval*g);if(N.length>0){const j=Math.min(...N);m=Math.min(m,j)}const A=v.filter(j=>j.spikeArrest&&j.spikeArrest>0).map(j=>j.spikeArrest);if(A.length>0){const j=Math.min(...A);m=Math.min(m,j*g)}}s.throughput=m;const w=3+Math.random()*2,C=p.policies*.8,S=15+Math.random()*35;s.latency=w+C+S;const R=.001,E=p.policies>0?.015:0,T=p.totalErrors>0?p.totalErrors/Math.max(p.totalRequests,1)*.1:0;s.errorRate=Math.min(1,R+E+T),s.utilization=Math.min(1,s.throughput/h),s.customMetrics={proxies:p.proxies,policies:p.policies,total_requests:p.totalRequests,total_errors:p.totalErrors,avg_latency:Math.round(p.avgLatency),requests_per_second:h,gateway_latency:w+C,upstream_latency:S}}simulateMuleSoft(e,t,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=this.mulesoftRoutingEngines.get(e.id);if(!l){this.simulateAPI(e,t,s,r);return}const d=(t||{}).applications||[],h=l.getStats(),p=.5*Math.sin(this.simulationTime/2e3)+.5;let g=0,m=0;for(const j of d)if(j.status==="running"){const q=j.workerCount||2;m+=q,g+=q*75}g===0&&(g=100);let v=g*p;s.throughput=v;const w=5+Math.random()*10,C=h.enabledConnectors*2,S=3+Math.random()*5,R=15+Math.random()*25;s.latency=w+C+S+R;const E=.002,T=h.totalErrors>0?h.totalErrors/Math.max(h.totalRequests,1)*.15:0,N=h.runningApplications>0?.005:.01;s.errorRate=Math.min(1,E+T+N);const A=m>0?Math.min(1,s.throughput/(m*75)):.5;s.utilization=Math.min(1,A),s.customMetrics={applications:h.applications,running_applications:h.runningApplications,connectors:h.connectors,enabled_connectors:h.enabledConnectors,total_requests:h.totalRequests,total_errors:h.totalErrors,avg_latency:Math.round(h.avgLatency),total_workers:m,runtime_latency:w,connector_latency:R,transformation_latency:S}}simulateBFF(e,t,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=this.bffRoutingEngines.get(e.id);if(!l){this.simulateAPI(e,t,s,r);return}const c=t||{},d=c.endpoints||[],h=c.backends||[],p=this.connections.filter(ee=>ee.target===e.id);let g=0;for(const ee of p){const se=this.connectionMetrics.get(ee.id);if(se){const te=se.traffic/2048;g+=te}}const m=t.requestsPerSecond||g||100,v=l.getStats(),w=.3*Math.sin(this.simulationTime/2e3)+.7;s.throughput=m*w;let C=v.averageLatency||100;const S=5+Math.random()*10,R=v.cacheHitRate||0,E=R*.8,T=C*(1-E)+S;s.latency=T+Math.random()*20;const N=v.totalRequests>0?v.totalErrors/v.totalRequests:.005,A=.001;s.errorRate=Math.min(1,N+A);const j=c.maxConcurrentRequests||100,q=s.throughput*(s.latency/1e3);s.utilization=Math.min(1,q/j);const P=d.reduce((ee,se)=>ee+(se.requests||0),0),H=h.filter(ee=>ee.status==="connected").length;s.customMetrics={endpoints:d.length,backends:h.length,connected_backends:H,total_requests:v.totalRequests,total_errors:v.totalErrors,avg_latency:Math.round(v.averageLatency),cache_hit_rate:Math.round(R*100)/100,endpoint_requests:P,aggregation_overhead:Math.round(S),concurrent_requests:Math.round(q)}}initializeKongRoutingEngine(e){const t=e.data.config||{},s=new uN;s.initialize({services:t.services||[],routes:t.routes||[],upstreams:t.upstreams||[],consumers:t.consumers||[],plugins:t.plugins||[]}),this.kongRoutingEngines.set(e.id,s)}initializeApigeeRoutingEngine(e){const t=e.data.config||{},s=new dN;s.initialize({organization:t.organization,environment:t.environment,proxies:t.proxies||[],policies:t.policies||[]}),this.apigeeRoutingEngines.set(e.id,s)}initializeMuleSoftRoutingEngine(e){const t=e.data.config||{},s=new fN,r=(t.applications||[]).map(c=>({name:c.name,runtimeVersion:c.runtimeVersion||"4.6.0",workerCount:c.workerCount||2,status:c.status||"stopped",connectors:c.connectors||[],errorStrategy:c.errorStrategy||"continue",reconnectionStrategy:c.reconnectionStrategy||"exponential",auditLogging:c.auditLogging||!1,flows:c.flows||[]})),l=(t.connectors||[]).map(c=>({name:c.name,type:c.type||"api",enabled:c.enabled!==!1,config:c.config||{},targetComponentType:c.targetComponentType,targetComponentId:c.targetComponentId}));s.initialize({organization:t.organization,environment:t.environment,applications:r,connectors:l}),this.mulesoftRoutingEngines.set(e.id,s)}initializeGraphQLGatewayRoutingEngine(e){const t=e.data.config||{},s=new wN;s.initialize({services:t.services||[],federation:t.federation,cacheTtl:t.cacheTtl,persistQueries:t.persistQueries,subscriptions:t.subscriptions,enableIntrospection:t.enableIntrospection,enableQueryComplexityAnalysis:t.enableQueryComplexityAnalysis,enableRateLimiting:t.enableRateLimiting,maxQueryDepth:t.maxQueryDepth,maxQueryComplexity:t.maxQueryComplexity,endpoint:t.endpoint}),this.graphQLGatewayRoutingEngines.set(e.id,s),this.lastGraphQLGatewayUpdate.set(e.id,Date.now())}initializeBFFRoutingEngine(e){const t=e.data.config||{},s=new CN;let r=null,l="";if(t.cacheMode==="redis"){const c=this.connections.find(d=>(d.source===e.id||d.target===e.id)&&this.nodes.find(h=>h.id===(d.source===e.id?d.target:d.source))?.type==="redis");if(c){const d=this.nodes.find(h=>h.id===(c.source===e.id?c.target:c.source));d&&d.type==="redis"&&(this.redisRoutingEngines.has(d.id)||this.initializeRedisRoutingEngine(d),r=this.redisRoutingEngines.get(d.id),l=d.id)}}s.initialize({backends:t.backends||[],endpoints:t.endpoints||[],enableCaching:t.enableCaching??!0,enableRequestBatching:t.enableRequestBatching??!1,enableResponseCompression:t.enableResponseCompression??!0,defaultTimeout:t.defaultTimeout||5e3,maxConcurrentRequests:t.maxConcurrentRequests||100,cacheMode:t.cacheMode||"memory",cacheTtl:t.cacheTtl||5,fallbackEnabled:t.fallbackEnabled??!0,fallbackComponent:t.fallbackComponent,redisEngine:r||void 0,redisNodeId:l||void 0}),this.bffRoutingEngines.set(e.id,s)}initializeWebhookRelayRoutingEngine(e){const t=e.data.config||{},s=new SN;s.initialize({relays:t.relays||[],enableRetryOnFailure:t.enableRetryOnFailure??!0,enableSignatureVerification:t.enableSignatureVerification??!0,enableRequestLogging:t.enableRequestLogging??!0,maxRetryAttempts:t.maxRetryAttempts||3,retryDelay:t.retryDelay||5,timeout:t.timeout||30}),this.webhookRelayRoutingEngines.set(e.id,s)}initializeRedisRoutingEngine(e){const t=e.data.config||{},s=new MN;s.initialize({host:t.host||"localhost",port:t.port||6379,password:t.password||"",database:t.database||0,maxMemory:t.maxMemory||"256mb",maxMemoryPolicy:t.maxMemoryPolicy||"noeviction",enablePersistence:t.enablePersistence??!0,persistenceType:t.persistenceType||"rdb",enableCluster:t.enableCluster??!1,clusterNodes:t.clusterNodes||[],keys:t.keys||[]}),this.redisRoutingEngines.set(e.id,s)}initializeCassandraRoutingEngine(e){const t=e.data.config||{},s=new EN;s.initialize({clusterName:t.clusterName||"archiphoenix-cluster",nodes:t.nodes||[],keyspaces:t.keyspaces||[],tables:t.tables||[],defaultConsistencyLevel:t.consistencyLevel||"QUORUM",defaultReplicationFactor:t.replicationFactor||3,datacenter:t.datacenter||"dc1"}),this.cassandraRoutingEngines.set(e.id,s)}initializeClickHouseRoutingEngine(e){const t=e.data.config||{},s=new RN;s.initialize({cluster:t.cluster||"archiphoenix-cluster",replication:t.replication||!1,tables:t.tables?.map(r=>({name:r.name,database:t.database||"default",engine:r.engine||"MergeTree",rows:r.rows||0,size:r.size||0,partitions:r.partitions||0,columns:r.columns||[]}))||[],maxMemoryUsage:t.maxMemoryUsage||10*1024*1024*1024,compression:t.compression||"LZ4"}),this.clickHouseRoutingEngines.set(e.id,s)}initializeSnowflakeRoutingEngine(e){const t=e.data.config||{},s=new NN;s.initialize({account:t.account||"archiphoenix",region:t.region||"us-east-1",warehouses:t.warehouses?.map(r=>({name:r.name,size:r.size||"Small",status:r.status||"suspended",autoSuspend:r.autoSuspend||(t.enableAutoSuspend?t.autoSuspendSeconds:void 0),autoResume:r.autoResume!==void 0?r.autoResume:t.enableAutoResume!==!1,minClusterCount:r.minClusterCount||1,maxClusterCount:r.maxClusterCount||1,currentClusterCount:r.minClusterCount||1,runningQueries:0,queuedQueries:0,totalQueriesExecuted:0,totalComputeTime:0}))||[],databases:t.databases?.map(r=>({name:r.name,comment:r.comment,retentionTime:r.retentionTime,size:r.size,schemas:r.schemas?.map(l=>({name:l.name,tables:l.tables||[],views:l.views||0,functions:l.functions||0}))||[]}))||[],role:t.role||"ACCOUNTADMIN",enableAutoSuspend:t.enableAutoSuspend,autoSuspendSeconds:t.autoSuspendSeconds,enableAutoResume:t.enableAutoResume}),this.snowflakeRoutingEngines.set(e.id,s)}calculateConnectionLatency(e,t,s){const l={sync:5,async:2,http:10,grpc:5,websocket:3}[e.type]||10,c=t.latency||0,d=s.latency||0,h=e.data||{},p=h.latencyMs||0,g=(h.jitterMs||0)*(Math.random()-.5),m=2+Math.random()*8+p+g;return l+(c+d)/2+m}createDefaultMetrics(e,t){return{id:e,type:t,throughput:0,latency:0,errorRate:0,utilization:0,timestamp:Date.now()}}createDefaultConnectionMetrics(e){return{id:e.id,source:e.source,target:e.target,traffic:0,latency:0,errorRate:0,utilization:0,timestamp:Date.now(),throughputDependency:0,backpressure:0,bottleneck:!1,effectiveThroughput:0,congestion:0}}initializeMetrics(){this.metrics.clear(),this.connectionMetrics.clear(),this.latencyHistory.clear(),this.connectionLatencyHistory.clear();for(const e of this.nodes)this.metrics.set(e.id,this.createDefaultMetrics(e.id,e.type))}getComponentMetrics(e){return this.metrics.get(e)}getRabbitMQRoutingEngine(e){return this.rabbitMQRoutingEngines.get(e)}getActiveMQRoutingEngine(e){return this.activeMQRoutingEngines.get(e)}getSQSRoutingEngine(e){return this.sqsRoutingEngines.get(e)}getAzureServiceBusRoutingEngine(e){return this.azureServiceBusRoutingEngines.get(e)}getPubSubRoutingEngine(e){return this.pubSubRoutingEngines.get(e)}getRedisRoutingEngine(e){return this.redisRoutingEngines.get(e)}getCassandraRoutingEngine(e){return this.cassandraRoutingEngines.get(e)}getClickHouseRoutingEngine(e){return this.clickHouseRoutingEngines.get(e)}getSnowflakeRoutingEngine(e){return this.snowflakeRoutingEngines.get(e)}getKongRoutingEngine(e){return this.kongRoutingEngines.get(e)}getApigeeRoutingEngine(e){return this.apigeeRoutingEngines.get(e)}getMuleSoftRoutingEngine(e){return this.mulesoftRoutingEngines.get(e)}getGraphQLGatewayRoutingEngine(e){return this.graphQLGatewayRoutingEngines.get(e)}getBFFRoutingEngine(e){return this.bffRoutingEngines.get(e)}getWebhookRelayRoutingEngine(e){return this.webhookRelayRoutingEngines.get(e)}checkSQSIAMPolicy(e,t,s,r){if(!e||e.length===0)return!0;const l=e.filter(h=>{const p=h.principal||"";if(p!==t&&p!=="*"&&!t.includes(p))return!1;const g=h.resource||"";let m=!1;if(g==="*"||g===s)m=!0;else if(g.endsWith("*")){const w=g.slice(0,-1);m=s.startsWith(w.replace(/.*:/,""))}else if(g.includes("sqs:")||g.includes("arn:aws:sqs")){const w=g.split(":").pop()||g.split("/").pop()||"";m=w===s||w==="*"||s.includes(w)}else m=s.includes(g)||g==="*";if(!m)return!1;const v=h.action||"";return!(v!==r&&v!=="*"&&!v.includes(r))});return l.length===0?!0:l.filter(h=>h.effect==="Deny").length>0?!1:(l.filter(h=>h.effect==="Allow").length>0,!0)}checkActiveMQACLPermissionPublic(e,t,s,r){return this.checkActiveMQACLPermission(e,t,s,r)}getConnectionMetrics(e){return this.connectionMetrics.get(e)}getAllComponentMetrics(){return Array.from(this.metrics.values())}getAllConnectionMetrics(){return Array.from(this.connectionMetrics.values())}getIsRunning(){return this.isRunning}getSimulationTime(){return this.simulationTime}}const nt=new AN;function TN(o,e){let t=null;return function(...r){const l=()=>{t=null,o(...r)};t!==null&&clearTimeout(t),t=setTimeout(l,e)}}class kN{logLevel;logs=[];maxLogs=100;constructor(){this.logLevel=2}debug(e,t){this.log(0,e,void 0,t)}info(e,t){this.log(1,e,void 0,t)}warn(e,t,s){this.log(2,e,t,s)}error(e,t,s){this.log(3,e,t,s)}log(e,t,s,r){if(e<this.logLevel)return;const l={level:e,message:t,error:s,timestamp:Date.now(),context:r};this.logs.push(l),this.logs.length>this.maxLogs&&this.logs.shift();const c=`[${this.getLevelName(e)}] ${t}`,d=r?{...r,error:s}:s;switch(e){case 0:console.debug(c,d||"");break;case 1:console.info(c,d||"");break;case 2:console.warn(c,d||"");break;case 3:console.error(c,d||"");break}}getLevelName(e){switch(e){case 0:return"DEBUG";case 1:return"INFO";case 2:return"WARN";case 3:return"ERROR";default:return"UNKNOWN"}}getRecentLogs(e,t=50){let s=this.logs;return e!==void 0&&(s=this.logs.filter(r=>r.level>=e)),s.slice(-t)}clearLogs(){this.logs=[]}setLogLevel(e){this.logLevel=e}}const sb=new kN,ab=(o,e,t)=>sb.warn(o,e,t),ta=(o,e,t)=>sb.error(o,e,t),vc="archiphoenix_diagram",Lh=1,jN=500,DN=()=>{try{const o=localStorage.getItem(vc);if(!o)return null;const e=JSON.parse(o);return e.version!==Lh?(ab("Diagram version mismatch, using defaults"),null):e}catch(o){return ta("Failed to load diagram from storage",o instanceof Error?o:new Error(String(o))),null}},_N=(o,e="My Diagram")=>{try{const t={...o,version:Lh,name:e,createdAt:localStorage.getItem(`${vc}_createdAt`)||new Date().toISOString(),updatedAt:new Date().toISOString()};localStorage.setItem(vc,JSON.stringify(t)),localStorage.setItem(`${vc}_createdAt`,t.createdAt)}catch(t){ta("Failed to save diagram to storage",t instanceof Error?t:new Error(String(t)))}},ht=TN(_N,jN),zN=(o,e="diagram.json")=>{try{const t={...o,version:Lh,name:e.replace(".json",""),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},s=JSON.stringify(t,null,2),r=new Blob([s],{type:"application/json"}),l=URL.createObjectURL(r),c=document.createElement("a");c.href=l,c.download=e,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)}catch(t){ta("Failed to export diagram",t instanceof Error?t:new Error(String(t)))}},ON=o=>new Promise(e=>{try{const t=new FileReader;t.onload=s=>{try{const r=s.target?.result,l=JSON.parse(r);if(!l.nodes||!l.connections||typeof l.zoom!="number"||!l.pan)throw new Error("Invalid diagram format");l.groups||(l.groups=[]),e(l)}catch(r){ta("Failed to parse diagram file",r instanceof Error?r:new Error(String(r))),e(null)}},t.readAsText(o)}catch(t){ta("Failed to import diagram",t instanceof Error?t:new Error(String(t))),e(null)}}),LN=50,Mi=Ss((o,e)=>({past:[],future:[],canUndo:!1,canRedo:!1,pushState:t=>{o(s=>{const r=[...s.past,t];return r.length>LN&&r.shift(),{past:r,future:[],canUndo:!0,canRedo:!1}})},undo:()=>{const{past:t,future:s}=e();if(t.length===0)return null;const r=t[t.length-1],l=t.slice(0,-1);return o({past:l,future:[r,...s],canUndo:l.length>0,canRedo:!0}),r},redo:()=>{const{past:t,future:s}=e();if(s.length===0)return null;const r=s[0],l=s.slice(1);return o({past:[...t,r],future:l,canUndo:!0,canRedo:l.length>0}),r},clearHistory:()=>{o({past:[],future:[],canUndo:!1,canRedo:!1})}}));class PN{rules=new Map;allRules=[];register(e){const t=e.sourceType;this.rules.has(t)||this.rules.set(t,[]);const s=this.rules.get(t);s&&(s.push(e),this.allRules.push(e),s.sort((r,l)=>(l.priority||0)-(r.priority||0)))}registerMany(e){e.forEach(t=>this.register(t))}findRules(e,t){const s=[],r=this.rules.get(e)||[];for(const c of r)(c.targetTypes==="*"||Array.isArray(c.targetTypes)&&c.targetTypes.includes(t))&&s.push(c);const l=this.rules.get("*")||[];for(const c of l)(c.targetTypes==="*"||Array.isArray(c.targetTypes)&&c.targetTypes.includes(t))&&s.push(c);return s.sort((c,d)=>(d.priority||0)-(c.priority||0))}getAllRules(){return[...this.allRules]}getRulesForSource(e){return this.rules.get(e)||[]}clear(){this.rules.clear(),this.allRules=[]}}const IN={postgres:5432,mongodb:27017,redis:6379,cassandra:9042,clickhouse:8123,elasticsearch:9200,rest:8080,grpc:50051,graphql:4e3,websocket:8080,webhook:8080,soap:8080,nginx:80,envoy:80,haproxy:80,traefik:80,docker:2375,kubernetes:6443,kafka:9092,rabbitmq:5672,activemq:61616,"aws-sqs":9324,prometheus:9090,grafana:3e3,loki:3100,jaeger:16686,keycloak:8080,"secrets-vault":8200,crm:8080,erp:8080,"payment-gateway":443},qN={"api-gateway":9100,postgres:9187,redis:9121,"service-mesh":15014,istio:15014,envoy:9901,cdn:9101,"aws-sqs":9102};class ob{getHost(e){return e.data.label?e.data.label.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):e.id.slice(0,8)}getPort(e,t){const s=e.data.config||{};switch(t){case"main":return s.port||s.host?.split(":")[1]||IN[e.type];case"metrics":return s.metricsPort||s.metrics?.port||qN[e.type];case"admin":return s.adminPort||s.admin?.port}}getEndpoint(e,t="main"){const s=this.getHost(e),r=this.getPort(e,t);if(!r)throw new Error(`Port not found for ${e.type}:${t}`);return`${s}:${r}`}getURL(e,t="main",s="http"){const r=this.getEndpoint(e,t);return`${s}://${r}`}getConnectionMetadata(e,t,s){const r=this.getHost(e),l=this.getHost(t),c=this.getPort(e,"main"),d=this.getPort(t,"main");let h="http";return s.type==="grpc"?h="grpc":s.type==="websocket"?h="websocket":t.type==="kafka"?h="kafka":t.type==="rabbitmq"||t.type==="activemq"?h="rabbitmq":s.type==="async"?h="async":s.type==="sync"&&(h="sync"),{protocol:h,sourceHost:r,targetHost:l,sourcePort:c,targetPort:d,endpoint:d?`${l}:${d}`:void 0}}getCapabilities(e){return{defaultPort:this.getPort(e,"main"),metricsPort:this.getPort(e,"metrics"),adminPort:this.getPort(e,"admin"),getHost:t=>this.getHost(t),getPort:(t,s)=>this.getPort(t,s)}}}class HN{registry;discovery;constructor(){this.registry=new PN,this.discovery=new ob}initialize(e){this.registry.registerMany(e)}handleConnectionCreated(e,t,s,r){const l=this.registry.findRules(e.type,t.type);if(l.length===0)return{sourceUpdated:!1,targetUpdated:!1};let c=!1,d=!1;const h=this.discovery.getConnectionMetadata(e,t,s);for(const p of l)try{const g=p.updateSourceConfig(e,t,s,h);if(g&&Object.keys(g).length>0&&(r(e.id,{data:{...e.data,config:{...e.data.config,...g}}}),c=!0),p.updateTargetConfig){const m=p.updateTargetConfig(e,t,s,h);m&&Object.keys(m).length>0&&(r(t.id,{data:{...t.data,config:{...t.data.config,...m}}}),d=!0)}}catch(g){ta(`Error applying rule for ${e.type} -> ${t.type}`,g instanceof Error?g:new Error(String(g)),{sourceType:e.type,targetType:t.type})}return{sourceUpdated:c,targetUpdated:d}}handleConnectionDeleted(e,t,s,r){const l=this.registry.findRules(e.type,t.type);if(l.length===0)return{sourceUpdated:!1,targetUpdated:!1};let c=!1,d=!1;const h=this.discovery.getConnectionMetadata(e,t,s);for(const p of l)try{if(p.cleanupSourceConfig){const g=p.cleanupSourceConfig(e,t,s,h);g&&Object.keys(g).length>0&&(r(e.id,{data:{...e.data,config:{...e.data.config,...g}}}),c=!0)}if(p.cleanupTargetConfig){const g=p.cleanupTargetConfig(e,t,s,h);g&&Object.keys(g).length>0&&(r(t.id,{data:{...t.data,config:{...t.data.config,...g}}}),d=!0)}}catch(g){ta(`Error cleaning up rule for ${e.type} -> ${t.type}`,g instanceof Error?g:new Error(String(g)),{sourceType:e.type,targetType:t.type})}return{sourceUpdated:c,targetUpdated:d}}getDiscovery(){return this.discovery}getRegistry(){return this.registry}}function UN(o){return{sourceType:"envoy",targetTypes:["rest","grpc","graphql","websocket","soap","webhook","postgres","mongodb","redis","cassandra","clickhouse","crm","erp","payment-gateway","bpmn-engine"],priority:10,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(e.data.config||{}).clusters||[],d=c.find(m=>!m.hosts||!Array.isArray(m.hosts)?!1:m.hosts.some(v=>v.address===r.targetHost&&v.port===r.targetPort));if(d)return d.hosts.some(v=>v.address===r.targetHost&&v.port===r.targetPort)?null:{clusters:c.map(v=>v===d?{...v,hosts:[...v.hosts||[],{address:r.targetHost,port:r.targetPort}]}:v)};t.data.label||t.type;const h=`${t.type}-${t.id.slice(0,8)}-cluster`;let p="STRICT_DNS";r.protocol==="grpc"?p="STRICT_DNS":(t.type==="postgres"||t.type==="mongodb"||t.type==="redis")&&(p="STATIC_DNS");const g={name:h,type:p,hosts:[{address:r.targetHost,port:r.targetPort}],healthChecks:!0,connectTimeout:5e3,requests:0,errors:0};return{clusters:[...c,g],totalClusters:c.length+1}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function BN(o){return{sourceType:"api-gateway",targetTypes:["rest","grpc","graphql","websocket","soap","webhook"],priority:10,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(e.data.config||{}).apis||[];if(c.find(S=>S.backendUrl===`http://${r.targetHost}:${r.targetPort}`||S.backendUrl===`https://${r.targetHost}:${r.targetPort}`))return null;const p=`${t.data.label||t.type}-api`,g=`/api/${t.type}`;let m="GET";t.type==="grpc"?m="POST":t.type==="websocket"&&(m="GET");const w=`${r.protocol==="grpc","http"}://${r.targetHost}:${r.targetPort}`,C={name:p,path:g,method:m,backendUrl:w,enabled:!0,requests:0,errors:0};return{apis:[...c,C]}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function $N(o){return{sourceType:"kong",targetTypes:["rest","grpc","graphql","websocket","soap","webhook"],priority:10,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const l=e.data.config||{},c=l.services||[],d=l.routes||[],p=`${r.protocol==="grpc","http"}://${r.targetHost}:${r.targetPort}`,m=`${t.data.label||t.type}-service`;let v=c.find(E=>E.name===m||E.url===p);v||(v={id:String(c.length+1),name:m,url:p,routes:0,enabled:!0},c.push(v));const w=`/api/${t.type}`;if(d.find(E=>E.service===v.name&&E.path===w))return null;let S="GET";t.type==="grpc"?S="POST":(t.type==="websocket"||t.type==="rest"||t.type==="graphql")&&(S="GET");const R={id:String(d.length+1),path:w,method:S,service:v.name,stripPath:!0,protocols:["http","https"]};return v.routes=(v.routes||0)+1,{services:c,routes:[...d,R]}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function QN(o){return{sourceType:"service-mesh",targetTypes:"*",priority:10,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(e.data.config||{}).services||[];if(c.find(v=>v.host===r.targetHost&&v.port===r.targetPort))return null;const p=(t.data.label||t.type).toLowerCase().replace(/\s+/g,"-");let g="http";r.protocol==="grpc"?g="grpc":(t.type==="postgres"||t.type==="mongodb"||t.type==="redis")&&(g="tcp");const m={name:p,namespace:"default",host:r.targetHost,port:r.targetPort,protocol:g,enabled:!0};return{services:[...c,m]}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function GN(o){return{sourceType:"istio",targetTypes:"*",priority:10,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(e.data.config||{}).services||[];if(c.find(v=>v.host===r.targetHost&&v.port===r.targetPort))return null;const p=(t.data.label||t.type).toLowerCase().replace(/\s+/g,"-");let g="http";r.protocol==="grpc"?g="grpc":(t.type==="postgres"||t.type==="mongodb"||t.type==="redis")&&(g="tcp");const m={name:p,namespace:"default",host:r.targetHost,port:r.targetPort,protocol:g,enabled:!0};return{services:[...c,m]}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function KN(o){return{sourceType:"nginx",targetTypes:["rest","grpc","graphql","websocket","postgres","mongodb","redis","crm","erp","payment-gateway"],priority:10,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(e.data.config||{}).upstreams||[],d=`${t.type}-upstream`;let h=c.find(g=>g.name===d);if(h)return h.servers?.some(m=>(m.host===r.targetHost||m.address===`${r.targetHost}:${r.targetPort}`)&&(m.port===r.targetPort||m.address?.includes(`:${r.targetPort}`)))?null:{upstreams:c.map(m=>m.name===d?{...m,servers:[...m.servers||[],{host:r.targetHost,port:r.targetPort}]}:m)};const p={name:d,servers:[{host:r.targetHost,port:r.targetPort}],loadBalancing:"round-robin"};return{upstreams:[...c,p]}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function VN(o){return{sourceType:"haproxy",targetTypes:["rest","grpc","graphql","websocket","postgres","mongodb","redis","crm","erp","payment-gateway"],priority:10,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(e.data.config||{}).backends||[],d=`${t.type}-backend`;let h=c.find(g=>g.name===d);if(h)return h.servers?.some(m=>(m.host===r.targetHost||m.address===`${r.targetHost}:${r.targetPort}`)&&(m.port===r.targetPort||m.address?.includes(`:${r.targetPort}`)))?null:{backends:c.map(m=>m.name===d?{...m,servers:[...m.servers||[],{host:r.targetHost,port:r.targetPort}]}:m)};const p={name:d,servers:[{host:r.targetHost,port:r.targetPort}],balance:"roundrobin"};return{backends:[...c,p]}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function FN(o){return{sourceType:"traefik",targetTypes:["rest","grpc","graphql","websocket","postgres","mongodb","redis","crm","erp","payment-gateway"],priority:10,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const l=e.data.config||{},c=l.services||{},d=l.routers||{},h=`${t.type}-service`,p=`${t.type}-router`;if(c[h])return c[h].servers?.some(w=>w.url===`http://${r.targetHost}:${r.targetPort}`)?null:{services:{...c,[h]:{...c[h],servers:[...c[h].servers||[],{url:`http://${r.targetHost}:${r.targetPort}`}]}}};const m=`Host(\`${(t.data.label||t.type).toLowerCase()}.local\`)`;return{services:{...c,[h]:{loadBalancer:{servers:[{url:`http://${r.targetHost}:${r.targetPort}`}]}}},routers:{...d,[p]:{rule:m,service:h}}}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function YN(o){return{sourceType:"*",targetTypes:["postgres","mongodb","redis","cassandra","clickhouse","elasticsearch"],priority:5,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const l=e.data.config||{},c=t.type;let d={};switch(c){case"postgres":d={database:{host:r.targetHost,port:r.targetPort,database:l.database?.database||"postgres",username:l.database?.username||"postgres",password:l.database?.password||""}};break;case"mongodb":d={database:{connectionString:`mongodb://${r.targetHost}:${r.targetPort}`,database:l.database?.database||"admin"}};break;case"redis":d={database:{host:r.targetHost,port:r.targetPort,password:l.database?.password||""}};break;case"cassandra":d={database:{hosts:[`${r.targetHost}:${r.targetPort}`],keyspace:l.database?.keyspace||"system"}};break;case"clickhouse":d={database:{host:r.targetHost,port:r.targetPort,database:l.database?.database||"default"}};break;case"elasticsearch":d={database:{hosts:[`http://${r.targetHost}:${r.targetPort}`]}};break;default:return null}return d},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function XN(o){return{sourceType:"*",targetTypes:["kafka","rabbitmq","activemq","aws-sqs","azure-service-bus","gcp-pubsub"],priority:5,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const l=e.data.config||{},c=t.type;let d={};switch(c){case"kafka":d={messaging:{broker:`${r.targetHost}:${r.targetPort}`,topic:l.messaging?.topic||t.data.config?.defaultTopic||"default-topic",producerId:l.messaging?.producerId||e.id.slice(0,8)}};break;case"rabbitmq":d={messaging:{broker:`${r.targetHost}:${r.targetPort}`,exchange:l.messaging?.exchange||t.data.config?.defaultExchange||"amq.topic",routingKey:l.messaging?.routingKey||"default"}};break;case"activemq":const h=t.data.config?.queues||[],p=h.length>0&&typeof h[0]=="object"?h[0].name:h.length>0?h[0]:null;d={messaging:{broker:`${r.targetHost}:${r.targetPort}`,queue:l.messaging?.queue||p||"default-queue"}};break;case"aws-sqs":{const g=t.data.config?.queues||[],m=g.length>0&&typeof g[0]=="object"?g[0].name:g.length>0?g[0]:null,v=g.length>0&&typeof g[0]=="object"?g[0].region:t.data.config?.defaultRegion||"us-east-1";d={messaging:{queueUrl:`https://sqs.${v}.amazonaws.com/account/${m||"default-queue"}`,queueName:m||"default-queue",region:l.messaging?.region||v}};break}case"azure-service-bus":{const g=t.data.config||{},m=g.namespace||"archiphoenix.servicebus.windows.net";g.connectionString||`${m}`;const v=l.messaging?.entityType||g.entityType||"queue",w=l.messaging?.entityName||l.messaging?.queue||l.messaging?.topic||g.entityName||(v==="queue"?"events":"events-topic"),C=l.messaging?.subscriptionName||g.subscriptionName;d={messaging:{connectionString:g.connectionString||`Endpoint=sb://${m}/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=...`,namespace:m,entityType:v,queue:v==="queue"?w:void 0,topic:v==="topic"?w:void 0,subscriptionName:v==="topic"&&C?C:void 0}};break}case"gcp-pubsub":d={messaging:{projectId:l.messaging?.projectId||"default-project",topic:l.messaging?.topic||t.data.config?.defaultTopic||"default-topic"}};break;default:return null}return d},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function WN(o,e){const t=o.data.config||{};return t.metrics?.port?t.metrics.port:t.metricsPort?t.metricsPort:(o.type==="service-mesh"||o.type==="istio")&&t.metrics?.controlPlanePort?t.metrics.controlPlanePort:e.getPort(o,"metrics")}function lh(o){const e=o.data.config||{};return e.metrics?.path?e.metrics.path:e.metricsPath?e.metricsPath:o.type==="envoy"?e.metrics?.prometheusPath||"/stats/prometheus":"/metrics"}function $0(o){return o.data.label?o.data.label.toLowerCase().replace(/\s+/g,"-"):`${o.type}-${o.id.slice(0,8)}`}function Q0(o,e){const t=e.getHost(o),s=WN(o,e);if(!s){const l=e.getPort(o,"main");if(!l)return null;const c=lh(o);return`http://${t}:${l}${c}`}const r=lh(o);return`http://${t}:${s}${r}`}function ZN(o){return{sourceType:"*",targetTypes:["prometheus"],priority:5,updateTargetConfig:(e,t,s,r)=>{const l=t.data.config||{},c=l.targets||[],d=l.scrapeInterval||"15s",h=Q0(e,o);if(!h)return null;const p=$0(e);if(c.find(v=>v.endpoint===h||v.job===p&&v.endpoint?.includes(o.getHost(e))))return null;const m={job:p,endpoint:h,interval:d,metricsPath:lh(e),status:"up",labels:{component:e.type,componentId:e.id}};return{targets:[...c,m]}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s),cleanupTargetConfig:(e,t,s,r)=>{const c=(t.data.config||{}).targets||[];if(!c||c.length===0)return null;const d=Q0(e,o),h=$0(e),p=o.getHost(e),g=c.filter(m=>!(d&&m.endpoint===d||m.job===h&&m.endpoint?.includes(p)||m.labels?.componentId===e.id));return g.length===c.length?null:{targets:g}}}}function rb(o){const e=["postgres","mongodb","redis","cassandra","clickhouse","snowflake","elasticsearch"],t=["rest","grpc","graphql","soap","websocket","webhook"],s=["kafka","rabbitmq","activemq","aws-sqs","azure-service-bus","gcp-pubsub"],r=["s3-datalake"],l=["crm","erp","payment-gateway"];return e.includes(o)?"database":t.includes(o)?"api":s.includes(o)?"messaging":r.includes(o)?"file":l.includes(o)?"api":"custom"}function Nc(o,e,t){const s=t?o.label||o.type:e.label||e.type,r=t?o.id.slice(0,8):e.id.slice(0,8);return`${s}-${r}`.toLowerCase().replace(/\s+/g,"-")}function JN(o){return{sourceType:"*",targetTypes:["mulesoft"],priority:5,updateTargetConfig:(e,t,s,r)=>{const c=(t.data.config||{}).connectors||[];if(c.find(m=>m.targetComponentId===e.id||m.name===Nc(e,t,!0)))return null;const h=rb(e.type),g={name:Nc(e,t,!0),type:h,enabled:!0,config:{},targetComponentType:e.type,targetComponentId:e.id};return h==="database"&&r.targetHost&&r.targetPort?g.config={host:r.targetHost,port:r.targetPort}:h==="api"&&r.targetHost&&r.targetPort?g.config={baseUrl:`http://${r.targetHost}:${r.targetPort}`}:h==="messaging"&&(g.config={broker:r.targetHost&&r.targetPort?`${r.targetHost}:${r.targetPort}`:void 0}),{connectors:[...c,g]}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function e2(o){return{sourceType:"mulesoft",targetTypes:"*",priority:5,updateSourceConfig:(e,t,s,r)=>{const c=(e.data.config||{}).connectors||[];if(c.find(m=>m.targetComponentId===t.id||m.name===Nc(e,t,!1)))return null;const h=rb(t.type),g={name:Nc(e,t,!1),type:h,enabled:!0,config:{},targetComponentType:t.type,targetComponentId:t.id};return h==="database"&&r.targetHost&&r.targetPort?g.config={host:r.targetHost,port:r.targetPort}:h==="api"&&r.targetHost&&r.targetPort?g.config={baseUrl:`http://${r.targetHost}:${r.targetPort}`}:h==="messaging"&&r.targetHost&&r.targetPort&&(g.config={broker:`${r.targetHost}:${r.targetPort}`}),{connectors:[...c,g]}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function t2(o){return{sourceType:"graphql-gateway",targetTypes:["graphql"],priority:10,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(e.data.config||{}).services||[],d=`http://${r.targetHost}:${r.targetPort}/graphql`;if(c.find(m=>m.endpoint===d||m.name===t.data.label))return null;const p=t.data.label||t.type,g={id:`svc-${c.length+1}`,name:p,endpoint:d,status:"connected",requests:0,errors:0};return{services:[...c,g]}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function n2(o){return{sourceType:"bff-service",targetTypes:["rest","grpc","graphql","websocket","soap","webhook"],priority:10,updateSourceConfig:(e,t,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(e.data.config||{}).backends||[],d=t.data.label||t.type;if(c.find(m=>m.name===d||m.endpoint===`http://${r.targetHost}:${r.targetPort}`||m.id===t.id))return null;let p="http";t.type==="grpc"?p="grpc":t.type==="graphql"&&(p="graphql");const g={id:t.id||`backend-${Date.now()}`,name:d,endpoint:`http://${r.targetHost}:${r.targetPort}`,protocol:p,status:"connected",timeout:5e3,retries:3,retryBackoff:"exponential",circuitBreaker:{enabled:!0,failureThreshold:5,successThreshold:2,timeout:6e4}};return{backends:[...c,g]}},extractMetadata:(e,t,s)=>o.getConnectionMetadata(e,t,s)}}function s2(o){return[UN(o),KN(o),VN(o),FN(o),BN(o),$N(o),t2(o),n2(o),QN(o),GN(o),YN(o),XN(o),ZN(o),JN(o),e2(o)]}let Bf=null;function G0(){if(!Bf){const o=new ob,e=new HN,t=s2(o);e.initialize(t),Bf=e}return Bf}const Kn=2e3,K0=140,V0=200,ic=(o,e)=>({x:Math.floor(o/Kn),y:Math.floor(e/Kn)}),a2=(o,e,t,s,r,l)=>{const c=r*Kn,d=(r+1)*Kn,h=l*Kn,p=(l+1)*Kn,g=o,m=o+t,v=e,w=e+s;return!(m<c||g>d||w<h||v>p)},$f=o=>{const e=new Set,t=K0+V0,s=K0+V0,r=o.position.x,l=r+t,c=o.position.y,d=c+s,h=ic(r,c).x,p=ic(l,d).x,g=ic(r,c).y,m=ic(l,d).y;for(let v=h;v<=p;v++)for(let w=g;w<=m;w++)a2(r,c,t,s,v,w)&&e.add(`${v},${w}`);return e},$n=(o,e=[])=>{if(o.length===0)return[];const t=new Set,s=new Map(o.map(r=>[r.id,r]));return o.forEach(r=>{$f(r).forEach(c=>t.add(c))}),e.forEach(r=>{const l=s.get(r.source),c=s.get(r.target);l&&$f(l).forEach(h=>t.add(h)),c&&$f(c).forEach(h=>t.add(h))}),Array.from(t).map(r=>{const[l,c]=r.split(",").map(Number);return{x:l,y:c}})},Qn=o=>{if(o.length===0)return{minX:0,minY:0,maxX:Kn,maxY:Kn};const e=o.map(d=>d.x),t=o.map(d=>d.y),s=Math.min(...e),r=Math.min(...t),l=Math.max(...e),c=Math.max(...t);return{minX:s*Kn,minY:r*Kn,maxX:(l+1)*Kn,maxY:(c+1)*Kn}},Qf={nodes:[],connections:[],groups:[],zoom:1,pan:{x:0,y:0}},Re=Ss((o,e)=>{const t=DN(),s=t?{...Qf,...t,groups:t.groups||[]}:Qf;let r=!1,l=!1;const c=()=>{const g=e();return{nodes:g.nodes,connections:g.connections,groups:g.groups||[],zoom:g.zoom,pan:g.pan}},d=()=>{Mi.getState().pushState(c())},h=$n(s.nodes,s.connections||[]),p=Qn(h);return{...s,selectedNodeId:null,selectedConnectionId:null,diagramName:t?.name||"Untitled Diagram",viewportWidth:0,viewportHeight:0,canvasBounds:p,canvasChunks:h,getDiagramState:c,updateCanvasBounds:()=>o(g=>{const m=$n(g.nodes,g.connections);return{canvasChunks:m,canvasBounds:Qn(m)}}),addNode:g=>o(m=>{d();const v=[...m.nodes,g],w=$n(v,m.connections),C={nodes:v,canvasChunks:w,canvasBounds:Qn(w)};return ht({...m,...C},m.diagramName),C}),updateNode:(g,m,v=!1)=>o(w=>{!v&&!r&&d();const C=w.nodes.map(E=>E.id===g?{...E,...m}:E),S=$n(C,w.connections),R={nodes:C,canvasChunks:S,canvasBounds:Qn(S)};return(!r||!v)&&ht({...w,...R},w.diagramName),R}),updateNodes:(g,m=!1)=>o(v=>{!m&&!r&&!l&&d();const w=new Map(g.map(E=>[E.id,E.updates])),C=v.nodes.map(E=>{const T=w.get(E.id);return T?{...E,...T}:E}),S=$n(C,v.connections),R={nodes:C,canvasChunks:S,canvasBounds:Qn(S)};return(!l||!m)&&ht({...v,...R},v.diagramName),R}),deleteNode:g=>o(m=>{d();const v=m.nodes.filter(R=>R.id!==g),w=m.connections.filter(R=>R.source!==g&&R.target!==g),C=$n(v,w),S={nodes:v,connections:w,selectedNodeId:m.selectedNodeId===g?null:m.selectedNodeId,canvasChunks:C,canvasBounds:Qn(C)};return ht({...m,...S},m.diagramName),S}),selectNode:(g,m=!1)=>o(v=>m&&g&&v.nodes.find(C=>C.id===g)?{selectedNodeId:g,nodes:v.nodes.map(C=>({...C,selected:C.id===g?!C.selected:C.selected||!1}))}:{selectedNodeId:g,nodes:v.nodes.map(w=>({...w,selected:w.id===g}))}),selectNodesByIds:g=>o(m=>({selectedNodeId:g.length>0?g[0]:null,nodes:m.nodes.map(v=>({...v,selected:g.includes(v.id)}))})),addConnection:g=>o(m=>{d();const v={...g,type:g.type||"async"},w=m.nodes.find(N=>N.id===v.source),C=m.nodes.find(N=>N.id===v.target);let S=[...m.nodes];if(w&&C){const N=G0(),A=(j,q)=>{const P=S.findIndex(H=>H.id===j);P!==-1&&(S[P]={...S[P],...q})};N.handleConnectionCreated(w,C,v,A)}const R=[...m.connections,v],E=$n(S,R),T={nodes:S,connections:R,canvasChunks:E,canvasBounds:Qn(E)};return ht({...m,...T},m.diagramName),T}),updateConnection:(g,m)=>o(v=>{d();const w={connections:v.connections.map(C=>C.id===g?{...C,...m}:C)};return ht({...v,...w},v.diagramName),w}),deleteConnection:g=>o(m=>{d();const v=m.connections.find(E=>E.id===g);let w=[...m.nodes];if(v){const E=m.nodes.find(N=>N.id===v.source),T=m.nodes.find(N=>N.id===v.target);if(E&&T){const N=G0(),A=(j,q)=>{const P=w.findIndex(H=>H.id===j);P!==-1&&(w[P]={...w[P],...q})};N.handleConnectionDeleted(E,T,v,A)}}const C=m.connections.filter(E=>E.id!==g),S=$n(w,C),R={nodes:w,connections:C,selectedConnectionId:m.selectedConnectionId===g?null:m.selectedConnectionId,canvasChunks:S,canvasBounds:Qn(S)};return ht({...m,...R},m.diagramName),R}),selectConnection:g=>o(m=>({selectedConnectionId:g,selectedNodeId:null,selectedGroupId:null,connections:m.connections.map(v=>({...v,selected:v.id===g}))})),addGroup:g=>o(m=>{d();const v={groups:[...m.groups,g]};return ht({...m,...v},m.diagramName),v}),updateGroup:(g,m)=>o(v=>{d();const w={groups:v.groups.map(C=>C.id===g?{...C,...m}:C)};return ht({...v,...w},v.diagramName),w}),deleteGroup:g=>o(m=>{d();const v={groups:m.groups.filter(w=>w.id!==g)};return ht({...m,...v},m.diagramName),v}),addNodeToGroup:(g,m)=>o(v=>{d();const w={groups:v.groups.map(C=>C.id===g&&!C.nodeIds.includes(m)?{...C,nodeIds:[...C.nodeIds,m]}:C)};return ht({...v,...w},v.diagramName),w}),removeNodeFromGroup:(g,m)=>o(v=>{d();const w={groups:v.groups.map(C=>C.id===g?{...C,nodeIds:C.nodeIds.filter(S=>S!==m)}:C)};return ht({...v,...w},v.diagramName),w}),selectGroup:g=>o(m=>({selectedGroupId:g,selectedNodeId:null,selectedConnectionId:null})),createGroupFromSelection:g=>o(m=>{d();const v=m.nodes.filter(S=>S.selected||S.id===m.selectedNodeId).map(S=>S.id);if(v.length===0)return m;const w={id:`group-${Date.now()}`,name:g,nodeIds:v,color:`hsl(${Math.random()*360}, 70%, 50%)`},C={groups:[...m.groups,w],nodes:m.nodes.map(S=>({...S,selected:!1})),selectedNodeId:null};return ht({...m,...C},m.diagramName),C}),autoGroupByConnections:()=>o(g=>{d();const m=new Set;g.groups.forEach(N=>{N.nodeIds.forEach(A=>m.add(A))});const v=new Map,w=N=>{v.has(N)||v.set(N,N);const A=v.get(N);if(A!==void 0&&A!==N){const j=w(A);return v.set(N,j),j}return A??N},C=(N,A)=>{const j=w(N),q=w(A);j!==q&&v.set(j,q)};g.connections.forEach(N=>{!m.has(N.source)&&!m.has(N.target)&&C(N.source,N.target)});const S=new Map;g.nodes.forEach(N=>{if(!m.has(N.id)){const A=w(N.id);S.has(A)||S.set(A,[]);const j=S.get(A);j&&j.push(N.id)}});const R=[];let E=g.groups.length+1;S.forEach((N,A)=>{N.length>=2&&R.push({id:`group-${Date.now()}-${R.length}`,name:`Group ${E++}`,nodeIds:N,color:`hsl(${Math.random()*360}, 70%, 50%)`})});const T={groups:[...g.groups,...R]};return ht({...g,...T},g.diagramName),T}),setZoom:g=>o(m=>(ht({...m,zoom:g},m.diagramName),{zoom:g})),setPan:g=>o(m=>(ht({...m,pan:g},m.diagramName),{pan:g})),setViewportSize:g=>o(()=>({viewportWidth:g.width,viewportHeight:g.height})),setDiagramName:g=>o(m=>(ht(m,g),{diagramName:g})),loadDiagramState:(g,m=!1)=>o(()=>{m||d();const v=$n(g.nodes||[],g.connections||[]),w={...g,canvasChunks:v,canvasBounds:Qn(v)};return ht(w,e().diagramName),w}),saveDiagram:()=>{const g=e();ht(g,g.diagramName)},resetCanvas:()=>{d();const g=$n([],[]);o({...Qf,canvasChunks:g,canvasBounds:Qn(g)})},undo:()=>{const g=Mi.getState().undo();g&&o(()=>{const m=$n(g.nodes||[],g.connections||[]),v={...g,canvasChunks:m,canvasBounds:Qn(m)};return ht(v,e().diagramName),v})},redo:()=>{const g=Mi.getState().redo();g&&o(()=>{const m=$n(g.nodes||[],g.connections||[]),v={...g,canvasChunks:m,canvasBounds:Qn(m)};return ht(v,e().diagramName),v})},startDragOperation:g=>{const m=e();r=!0,m.nodes.find(v=>v.id===g),d()},endDragOperation:()=>{r=!1;const g=e();ht(g,g.diagramName)},setGroupDragging:g=>{l=g},getIsGroupDragging:()=>l,bringToFront:g=>o(m=>{d();const v=m.nodes.findIndex(R=>R.id===g);if(v===-1)return m;const w=[...m.nodes],[C]=w.splice(v,1);w.push(C);const S={nodes:w};return ht({...m,...S},m.diagramName),S}),sendToBack:g=>o(m=>{d();const v=m.nodes.findIndex(R=>R.id===g);if(v===-1)return m;const w=[...m.nodes],[C]=w.splice(v,1);w.unshift(C);const S={nodes:w};return ht({...m,...S},m.diagramName),S}),bringForward:g=>o(m=>{d();const v=m.nodes.findIndex(S=>S.id===g);if(v===-1||v===m.nodes.length-1)return m;const w=[...m.nodes];[w[v],w[v+1]]=[w[v+1],w[v]];const C={nodes:w};return ht({...m,...C},m.diagramName),C}),sendBackward:g=>o(m=>{d();const v=m.nodes.findIndex(S=>S.id===g);if(v===-1||v===0)return m;const w=[...m.nodes];[w[v],w[v-1]]=[w[v-1],w[v]];const C={nodes:w};return ht({...m,...C},m.diagramName),C})}}),Da=Ss((o,e)=>({isRunning:!1,messages:new Map,messageHistory:[],initialize:(t,s)=>{un.initialize(t,s),e().updateMessages(t,s)},start:()=>{un.start(),o({isRunning:!0});const t=setInterval(()=>{const{nodes:s,connections:r}=Re.getState();e().updateMessages(s,r)},200);un._pollInterval=t},stop:()=>{un.stop();const t=un._pollInterval;t&&clearInterval(t),o({isRunning:!1})},updateMessages:(t,s)=>{un.updateNodesAndConnections(t,s);const r=new Map;for(const c of s)r.set(c.id,un.getConnectionMessages(c.id));const l=un.getMessageHistory(100);o({messages:r,messageHistory:l})},getConnectionMessages:t=>un.getConnectionMessages(t),getComponentMessages:t=>un.getComponentMessages(t),getMessageHistory:t=>un.getMessageHistory(t)}));class o2{alerts=new Map;alertCallbacks=[];onAlert(e){this.alertCallbacks.push(e)}analyze(e,t,s,r){const l=[];for(const c of e){const d=t.get(c.id),h=r.find(p=>p.nodeId===c.id);if(!(!d||!h)){if(h.health==="down"){const p=`down-${c.id}`;if(!this.alerts.has(p)){const g={id:p,type:"critical",title:"Component Down",message:`${c.data.label} is down and not responding`,nodeId:c.id,nodeLabel:c.data.label,timestamp:Date.now(),acknowledged:!1,severity:1};this.addAlert(g),l.push(g)}}if(d.errorRate>.1){const p=`error-${c.id}`,g=this.alerts.get(p);if(!g||g.acknowledged){const m={id:p,type:"critical",title:"High Error Rate",message:`${c.data.label} has ${(d.errorRate*100).toFixed(1)}% error rate`,nodeId:c.id,nodeLabel:c.data.label,timestamp:Date.now(),acknowledged:!1,severity:.9};this.addAlert(m),l.push(m)}}if(d.latency>2e3){const p=`latency-${c.id}`,g=this.alerts.get(p);if(!g||g.acknowledged){const m={id:p,type:"warning",title:"High Latency",message:`${c.data.label} has latency of ${d.latency.toFixed(0)}ms`,nodeId:c.id,nodeLabel:c.data.label,timestamp:Date.now(),acknowledged:!1,severity:.7};this.addAlert(m),l.push(m)}}if(d.utilization>.9){const p=`utilization-${c.id}`,g=this.alerts.get(p);if(!g||g.acknowledged){const m={id:p,type:"warning",title:"High Utilization",message:`${c.data.label} is at ${(d.utilization*100).toFixed(0)}% capacity`,nodeId:c.id,nodeLabel:c.data.label,timestamp:Date.now(),acknowledged:!1,severity:.6};this.addAlert(m),l.push(m)}}}}for(const[c,d]of s.entries())if(d.bottleneck){const h=`bottleneck-${c}`,p=this.alerts.get(h);if(!p||p.acknowledged){const g={id:h,type:"critical",title:"Connection Bottleneck",message:"Bottleneck detected in connection",timestamp:Date.now(),acknowledged:!1,severity:.85};this.addAlert(g),l.push(g)}}return this.cleanupResolvedAlerts(e,t,s,r),l}addAlert(e){this.alerts.set(e.id,e),this.alertCallbacks.forEach(t=>t(e))}cleanupResolvedAlerts(e,t,s,r){new Set(e.map(l=>l.id)),new Set(s.keys());for(const[l,c]of this.alerts.entries()){if(c.acknowledged)continue;let d=!1;if(c.nodeId)if(!e.find(p=>p.id===c.nodeId))d=!0;else{const p=t.get(c.nodeId),g=r.find(m=>m.nodeId===c.nodeId);(l.startsWith("down-")&&g&&g.health!=="down"||l.startsWith("error-")&&p&&p.errorRate<=.1||l.startsWith("latency-")&&p&&p.latency<=2e3||l.startsWith("utilization-")&&p&&p.utilization<=.9)&&(d=!0)}else if(l.startsWith("bottleneck-")){const h=l.replace("bottleneck-",""),p=s.get(h);(!p||!p.bottleneck)&&(d=!0)}d&&this.alerts.delete(l)}}acknowledge(e){const t=this.alerts.get(e);t&&(t.acknowledged=!0,this.alerts.set(e,t))}getAlerts(){return Array.from(this.alerts.values()).filter(e=>!e.acknowledged).sort((e,t)=>t.severity-e.severity)}getAlertsByType(e){return this.getAlerts().filter(t=>t.type===e)}clear(){this.alerts.clear()}}const rr=new o2;class r2{nodes=[];connections=[];componentMetrics=new Map;connectionMetrics=new Map;dependencyGraph=new Map;componentStatuses=new Map;update(e,t,s,r){this.nodes=e,this.connections=t,this.componentMetrics=s,this.connectionMetrics=r,this.buildDependencyGraph(),this.analyzeComponentHealth(),this.identifyCriticalPaths(),this.calculateImpactScores()}buildDependencyGraph(){this.dependencyGraph.clear();for(const e of this.nodes){const t=[],s=this.connections.filter(r=>r.target===e.id);for(const r of s){const l=this.connectionMetrics.get(r.id),c=this.componentMetrics.get(r.source);if(!l||!c)continue;const d=Math.max(l.throughputDependency,l.utilization,l.backpressure);let h="direct";l.bottleneck?h="critical":d>.7&&(h="indirect"),t.push({sourceId:r.source,targetId:e.id,connectionId:r.id,type:h,strength:d,impact:this.calculateDependencyImpact(r,c)})}this.dependencyGraph.set(e.id,t)}}calculateDependencyImpact(e,t){const s=this.connectionMetrics.get(e.id);if(!s)return 0;const r=t.errorRate,l=Math.min(1,s.latency/1e3),c=s.backpressure,d=t.utilization>.8?.5:0;return Math.min(1,r*.4+l*.2+c*.3+d*.1)}analyzeComponentHealth(){this.componentStatuses.clear();for(const e of this.nodes){const t=this.componentMetrics.get(e.id),s=this.dependencyGraph.get(e.id)||[];if(!t){this.componentStatuses.set(e.id,{nodeId:e.id,health:"down",dependencies:s,dependents:[],criticalPath:!1,impactScore:0,failureRisk:1});continue}let r="healthy",l=0;t.errorRate>.1?(r="critical",l+=.4):t.errorRate>.05&&(r="degraded",l+=.2),t.utilization>.9?(r==="healthy"&&(r="degraded"),l+=.3):t.utilization>.8&&(l+=.15),t.latency>1e3?(r==="healthy"&&(r="degraded"),l+=.2):t.latency>500&&(l+=.1);for(const d of s){const h=this.componentStatuses.get(d.sourceId);h&&(h.health==="critical"||h.health==="down"?(r==="healthy"&&(r="degraded"),l+=d.impact*.3):h.health==="degraded"&&(l+=d.impact*.15))}l=Math.min(1,l);const c=[];for(const d of this.connections)if(d.source===e.id){const h=this.connectionMetrics.get(d.id);h&&c.push({sourceId:e.id,targetId:d.target,connectionId:d.id,type:h.bottleneck?"critical":"direct",strength:h.throughputDependency,impact:this.calculateDependencyImpact(d,t)})}this.componentStatuses.set(e.id,{nodeId:e.id,health:r,dependencies:s,dependents:c,criticalPath:!1,impactScore:0,failureRisk:l})}}identifyCriticalPaths(){const e=this.nodes.filter(s=>!this.connections.some(r=>r.target===s.id)),t=this.nodes.filter(s=>!this.connections.some(r=>r.source===s.id));for(const s of e)for(const r of t){const l=this.findPath(s.id,r.id);l&&l.length>1&&l.some(d=>{const h=this.componentStatuses.get(d),p=this.connections.find(g=>l.includes(g.source)&&l.includes(g.target)&&l.indexOf(g.source)<l.indexOf(g.target));if(p){const g=this.connectionMetrics.get(p.id);return g?.bottleneck||(g?.backpressure||0)>.7}return h?.health==="critical"||h?.health==="down"})&&l.forEach(d=>{const h=this.componentStatuses.get(d);h&&(h.criticalPath=!0)})}}findPath(e,t){if(e===t)return[e];const s=[{nodeId:e,path:[e]}],r=new Set([e]);for(;s.length>0;){const{nodeId:l,path:c}=s.shift(),d=this.connections.filter(h=>h.source===l);for(const h of d){if(h.target===t)return[...c,t];r.has(h.target)||(r.add(h.target),s.push({nodeId:h.target,path:[...c,h.target]}))}}return null}calculateImpactScores(){for(const[e,t]of this.componentStatuses.entries()){let s=0;s+=Math.min(1,t.dependents.length/5)*.3,t.health==="critical"||t.health==="down"?s+=.4:t.health==="degraded"&&(s+=.2),t.criticalPath&&(s+=.2),s+=t.failureRisk*.1,t.impactScore=Math.min(1,s),this.componentStatuses.set(e,t)}}analyzeSystem(){const e=[],t=[],s=[],r=[];for(const[h,p]of this.componentStatuses.entries())if(p.criticalPath){const g=this.findPathToSink(h);g&&!e.some(m=>JSON.stringify(m)===JSON.stringify(g))&&e.push(g)}for(const[h,p]of this.connectionMetrics.entries())if(p.bottleneck){const g=this.connections.find(m=>m.id===h);g&&(t.includes(g.source)||t.push(g.source),t.includes(g.target)||t.push(g.target))}for(const[h,p]of this.componentStatuses.entries())(p.failureRisk>.6||p.health==="critical"||p.health==="down")&&s.push(h);this.generateRecommendations(r);const l=Array.from(this.componentStatuses.values()).map(h=>{switch(h.health){case"down":return 0;case"critical":return .25;case"degraded":return .5;case"healthy":return 1}}),c=l.length>0?l.reduce((h,p)=>h+p,0)/l.length:1;let d="healthy";return c<.25?d="down":c<.5?d="critical":c<.75&&(d="degraded"),{criticalPaths:e,bottlenecks:t,riskComponents:s,recommendations:r,overallHealth:d}}findPathToSink(e){const t=this.nodes.filter(s=>!this.connections.some(r=>r.source===s.id));for(const s of t){const r=this.findPath(e,s.id);if(r)return r}return null}generateRecommendations(e){for(const[s,r]of this.componentStatuses.entries()){const l=this.nodes.find(d=>d.id===s),c=this.componentMetrics.get(s);!l||!c||(c.utilization>.85&&e.push({type:"scaling",priority:c.utilization>.95?"critical":"high",componentId:s,message:`${l.data.label} is highly utilized (${(c.utilization*100).toFixed(0)}%)`,impact:"May cause performance degradation and increased latency",suggestion:`Consider scaling ${l.data.label} horizontally or vertically`}),c.errorRate>.05&&e.push({type:"monitoring",priority:c.errorRate>.1?"critical":"high",componentId:s,message:`${l.data.label} has high error rate (${(c.errorRate*100).toFixed(1)}%)`,impact:"Affects system reliability and user experience",suggestion:`Investigate error logs and implement error handling for ${l.data.label}`}),c.latency>500&&e.push({type:"optimization",priority:c.latency>1e3?"high":"medium",componentId:s,message:`${l.data.label} has high latency (${c.latency.toFixed(0)}ms)`,impact:"Affects end-to-end response time",suggestion:`Optimize ${l.data.label} performance or add caching`}),r.criticalPath&&r.failureRisk>.5&&e.push({type:"redundancy",priority:"high",componentId:s,message:`${l.data.label} is on a critical path and at risk`,impact:"Failure would significantly impact system",suggestion:`Add redundancy or failover for ${l.data.label}`}))}for(const[s,r]of this.connectionMetrics.entries()){const l=this.connections.find(h=>h.id===s);if(!l)continue;const c=this.nodes.find(h=>h.id===l.source),d=this.nodes.find(h=>h.id===l.target);r.bottleneck&&e.push({type:"optimization",priority:"critical",connectionId:s,message:`Connection between ${c?.data.label||"source"} and ${d?.data.label||"target"} is a bottleneck`,impact:"Limiting overall system throughput",suggestion:"Increase bandwidth or optimize data transfer between these components"}),r.backpressure>.7&&e.push({type:"optimization",priority:"high",connectionId:s,message:`High backpressure (${(r.backpressure*100).toFixed(0)}%) on connection`,impact:"Target component cannot process data fast enough",suggestion:"Scale target component or implement buffering/queuing"})}const t={critical:0,high:1,medium:2,low:3};e.sort((s,r)=>t[s.priority]-t[r.priority])}getComponentStatus(e){return this.componentStatuses.get(e)}getAllComponentStatuses(){return Array.from(this.componentStatuses.values())}getDependencies(e){return this.dependencyGraph.get(e)||[]}}const Gf=new r2,fo=Ss((o,e)=>({componentStatuses:new Map,systemAnalysis:null,updateAnalysis:()=>{const{nodes:t,connections:s}=Re.getState(),{componentMetrics:r,connectionMetrics:l}=kt.getState();Gf.update(t,s,r,l);const c=Gf.analyzeSystem(),d=new Map(Gf.getAllComponentStatuses().map(h=>[h.nodeId,h]));o({componentStatuses:d,systemAnalysis:c})},getComponentStatus:t=>e().componentStatuses.get(t),getAllComponentStatuses:()=>Array.from(e().componentStatuses.values()),getSystemAnalysis:()=>e().systemAnalysis})),Ph=Ss((o,e)=>(rr.onAlert(t=>{e().updateAlerts()}),{alerts:[],updateAlerts:()=>{const{nodes:t,connections:s}=Re.getState(),{componentMetrics:r,connectionMetrics:l}=kt.getState(),c=fo.getState().getAllComponentStatuses();rr.analyze(t,r,l,c);const d=rr.getAlerts();o({alerts:d})},acknowledgeAlert:t=>{rr.acknowledge(t);const s=rr.getAlerts();o({alerts:s})},clearAlerts:()=>{rr.clear(),o({alerts:[]})},getCriticalAlerts:()=>e().alerts.filter(t=>t.type==="critical"),getWarningAlerts:()=>e().alerts.filter(t=>t.type==="warning")})),kt=Ss((o,e)=>({isRunning:!1,simulationTime:0,updateInterval:100,componentMetrics:new Map,connectionMetrics:new Map,initialize:(t,s)=>{nt.initialize(t,s),o({componentMetrics:new Map(nt.getAllComponentMetrics().map(r=>[r.id,r])),connectionMetrics:new Map(nt.getAllConnectionMetrics().map(r=>[r.id,r]))}),Da.getState().initialize(t,s)},start:()=>{nt.start(),o({isRunning:!0}),Da.getState().start();const t=setInterval(()=>{e().updateMetrics()},e().updateInterval);nt._pollInterval=t},stop:()=>{nt.stop();const t=nt._pollInterval;t&&clearInterval(t),Da.getState().stop(),o({isRunning:!1})},reset:()=>{nt.resetSimulation();const t=nt._pollInterval;t&&clearInterval(t),Da.getState().stop(),o({isRunning:!1,simulationTime:0,componentMetrics:new Map,connectionMetrics:new Map})},setUpdateInterval:t=>{o({updateInterval:t})},updateMetrics:()=>{const{nodes:t,connections:s}=Re.getState();nt.updateNodesAndConnections(t,s),o(r=>({simulationTime:nt.getSimulationTime(),componentMetrics:new Map(nt.getAllComponentMetrics().map(l=>[l.id,l])),connectionMetrics:new Map(nt.getAllConnectionMetrics().map(l=>[l.id,l]))})),Da.getState().updateMessages(t,s),fo.getState().updateAnalysis(),Ph.getState().updateAlerts()},getComponentMetrics:t=>e().componentMetrics.get(t),getConnectionMetrics:t=>e().connectionMetrics.get(t)}));const i2=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l2=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),F0=o=>{const e=l2(o);return e.charAt(0).toUpperCase()+e.slice(1)},ib=(...o)=>o.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),c2=o=>{for(const e in o)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var u2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const d2=x.forwardRef(({color:o="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:c,...d},h)=>x.createElement("svg",{ref:h,...u2,width:e,height:e,stroke:o,strokeWidth:s?Number(t)*24/Number(e):t,className:ib("lucide",r),...!l&&!c2(d)&&{"aria-hidden":"true"},...d},[...c.map(([p,g])=>x.createElement(p,g)),...Array.isArray(l)?l:[l]]));const je=(o,e)=>{const t=x.forwardRef(({className:s,...r},l)=>x.createElement(d2,{ref:l,iconNode:e,className:ib(`lucide-${i2(F0(o))}`,`lucide-${o}`,s),...r}));return t.displayName=F0(o),t};const f2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ho=je("activity",f2);const h2=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],p2=je("arrow-down",h2);const g2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],m2=je("arrow-right",g2);const y2=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],v2=je("arrow-up",y2);const b2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ih=je("check",b2);const x2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Uc=je("chevron-down",x2);const w2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qh=je("chevron-right",w2);const C2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],lb=je("chevron-up",C2);const S2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ri=je("circle-alert",S2);const M2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hh=je("circle-check",M2);const E2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],R2=je("circle-question-mark",E2);const N2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],uo=je("circle-x",N2);const A2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],T2=je("circle",A2);const k2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],cb=je("copy",k2);const j2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],D2=je("download",j2);const _2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],z2=je("eye",_2);const O2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Y0=je("file-text",O2);const L2=[["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],P2=je("folder-minus",L2);const I2=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ch=je("folder-plus",I2);const q2=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],H2=je("funnel",q2);const U2=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],B2=je("grip-vertical",U2);const $2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Q2=je("info",$2);const G2=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ub=je("layers",G2);const K2=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],V2=je("map",K2);const F2=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Y2=je("maximize-2",F2);const X2=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],W2=je("network",X2);const Z2=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],J2=je("pause",Z2);const eA=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],tA=je("play",eA);const nA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ac=je("plus",nA);const sA=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bc=je("power-off",sA);const aA=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],Kf=je("power",aA);const oA=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],rA=je("redo-2",oA);const iA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],lA=je("refresh-cw",iA);const cA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],db=je("rotate-ccw",cA);const uA=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],dA=je("ruler",uA);const fA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hA=je("save",fA);const pA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Bc=je("search",pA);const gA=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Vf=je("settings-2",gA);const mA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yA=je("settings",mA);const vA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],bA=je("sparkles",vA);const xA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],wA=je("square-pen",xA);const CA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],SA=je("star",CA);const MA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Uh=je("trash-2",MA);const EA=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],fb=je("trending-down",EA);const RA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ys=je("triangle-alert",RA);const NA=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],AA=je("undo-2",NA);const TA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],kA=je("upload",TA);const jA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vs=je("x",jA);const DA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hb=je("zap",DA);const _A=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],zA=je("zoom-in",_A);const OA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],LA=je("zoom-out",OA);function PA(){const{isRunning:o,simulationTime:e,initialize:t,start:s,stop:r,reset:l}=kt(),{nodes:c,connections:d}=Re(),h=()=>{e===0&&t(c,d),s()},p=()=>{r()},g=()=>{l()},m=v=>{const w=Math.floor(v/1e3),C=Math.floor(w/60),S=w%60;return`${C}:${S.toString().padStart(2,"0")}`};return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"text-sm text-muted-foreground w-12",children:m(e)}),f.jsx(Te,{size:"sm",variant:o?"default":"outline",onClick:h,disabled:o,title:"Start emulation",children:f.jsx(tA,{className:"w-4 h-4"})}),f.jsx(Te,{size:"sm",variant:o?"default":"outline",onClick:p,disabled:!o,title:"Stop emulation",children:f.jsx(J2,{className:"w-4 h-4"})}),f.jsx(Te,{size:"sm",variant:"outline",onClick:g,title:"Reset simulation",children:f.jsx(db,{className:"w-4 h-4"})})]})}const Tt=x.forwardRef(({className:o,type:e,...t},s)=>f.jsx("input",{type:e,className:Ee("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),ref:s,...t}));Tt.displayName="Input";function IA(o){const e=qA(o),t=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(UA);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(e,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(e,{...c,ref:r,children:l})});return t.displayName=`${o}.Slot`,t}function qA(o){const e=x.forwardRef((t,s)=>{const{children:r,...l}=t;if(x.isValidElement(r)){const c=$A(r),d=BA(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${o}.SlotClone`,e}var HA=Symbol("radix.slottable");function UA(o){return x.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===HA}function BA(o,e){const t={...e};for(const s in e){const r=o[s],l=e[s];/^on[A-Z]/.test(s)?r&&l?t[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...l}:s==="className"&&(t[s]=[r,l].filter(Boolean).join(" "))}return{...o,...t}}function $A(o){let e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}var QA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ae=QA.reduce((o,e)=>{const t=IA(`Primitive.${e}`),s=x.forwardRef((r,l)=>{const{asChild:c,...d}=r,h=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(h,{...d,ref:l})});return s.displayName=`Primitive.${e}`,{...o,[e]:s}},{});function pb(o,e){o&&zi.flushSync(()=>o.dispatchEvent(e))}var sn=globalThis?.document?x.useLayoutEffect:()=>{};function GA(o,e){return x.useReducer((t,s)=>e[t][s]??t,o)}var rn=o=>{const{present:e,children:t}=o,s=KA(e),r=typeof t=="function"?t({present:s.isPresent}):x.Children.only(t),l=De(s.ref,VA(r));return typeof t=="function"||s.isPresent?x.cloneElement(r,{ref:l}):null};rn.displayName="Presence";function KA(o){const[e,t]=x.useState(),s=x.useRef(null),r=x.useRef(o),l=x.useRef("none"),c=o?"mounted":"unmounted",[d,h]=GA(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const p=lc(s.current);l.current=d==="mounted"?p:"none"},[d]),sn(()=>{const p=s.current,g=r.current;if(g!==o){const v=l.current,w=lc(p);o?h("MOUNT"):w==="none"||p?.display==="none"?h("UNMOUNT"):h(g&&v!==w?"ANIMATION_OUT":"UNMOUNT"),r.current=o}},[o,h]),sn(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,m=w=>{const S=lc(s.current).includes(CSS.escape(w.animationName));if(w.target===e&&S&&(h("ANIMATION_END"),!r.current)){const R=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=R)})}},v=w=>{w.target===e&&(l.current=lc(s.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:x.useCallback(p=>{s.current=p?getComputedStyle(p):null,t(p)},[])}}function lc(o){return o?.animationName||"none"}function VA(o){let e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}function FA(o,e){const t=x.createContext(e),s=l=>{const{children:c,...d}=l,h=x.useMemo(()=>d,Object.values(d));return f.jsx(t.Provider,{value:h,children:c})};s.displayName=o+"Provider";function r(l){const c=x.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${l}\` must be used within \`${o}\``)}return[s,r]}function bn(o,e=[]){let t=[];function s(l,c){const d=x.createContext(c),h=t.length;t=[...t,c];const p=m=>{const{scope:v,children:w,...C}=m,S=v?.[o]?.[h]||d,R=x.useMemo(()=>C,Object.values(C));return f.jsx(S.Provider,{value:R,children:w})};p.displayName=l+"Provider";function g(m,v){const w=v?.[o]?.[h]||d,C=x.useContext(w);if(C)return C;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${l}\``)}return[p,g]}const r=()=>{const l=t.map(c=>x.createContext(c));return function(d){const h=d?.[o]||l;return x.useMemo(()=>({[`__scope${o}`]:{...d,[o]:h}}),[d,h])}};return r.scopeName=o,[s,YA(r,...e)]}function YA(...o){const e=o[0];if(o.length===1)return e;const t=()=>{const s=o.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(l){const c=s.reduce((d,{useScope:h,scopeName:p})=>{const m=h(l)[`__scope${p}`];return{...d,...m}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}function nn(o){const e=x.useRef(o);return x.useEffect(()=>{e.current=o}),x.useMemo(()=>(...t)=>e.current?.(...t),[])}var XA=x.createContext(void 0);function Cr(o){const e=x.useContext(XA);return o||e||"ltr"}function Ni(o,[e,t]){return Math.min(t,Math.max(e,o))}function ge(o,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(o?.(r),t===!1||!r.defaultPrevented)return e?.(r)}}function WA(o,e){return x.useReducer((t,s)=>e[t][s]??t,o)}var Bh="ScrollArea",[gb]=bn(Bh),[ZA,Fn]=gb(Bh),mb=x.forwardRef((o,e)=>{const{__scopeScrollArea:t,type:s="hover",dir:r,scrollHideDelay:l=600,...c}=o,[d,h]=x.useState(null),[p,g]=x.useState(null),[m,v]=x.useState(null),[w,C]=x.useState(null),[S,R]=x.useState(null),[E,T]=x.useState(0),[N,A]=x.useState(0),[j,q]=x.useState(!1),[P,H]=x.useState(!1),ee=De(e,le=>h(le)),se=Cr(r);return f.jsx(ZA,{scope:t,type:s,dir:se,scrollHideDelay:l,scrollArea:d,viewport:p,onViewportChange:g,content:m,onContentChange:v,scrollbarX:w,onScrollbarXChange:C,scrollbarXEnabled:j,onScrollbarXEnabledChange:q,scrollbarY:S,onScrollbarYChange:R,scrollbarYEnabled:P,onScrollbarYEnabledChange:H,onCornerWidthChange:T,onCornerHeightChange:A,children:f.jsx(Ae.div,{dir:se,...c,ref:ee,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":N+"px",...o.style}})})});mb.displayName=Bh;var yb="ScrollAreaViewport",vb=x.forwardRef((o,e)=>{const{__scopeScrollArea:t,children:s,nonce:r,...l}=o,c=Fn(yb,t),d=x.useRef(null),h=De(e,d,c.onViewportChange);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),f.jsx(Ae.div,{"data-radix-scroll-area-viewport":"",...l,ref:h,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...o.style},children:f.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});vb.displayName=yb;var Ms="ScrollAreaScrollbar",$h=x.forwardRef((o,e)=>{const{forceMount:t,...s}=o,r=Fn(Ms,o.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:c}=r,d=o.orientation==="horizontal";return x.useEffect(()=>(d?l(!0):c(!0),()=>{d?l(!1):c(!1)}),[d,l,c]),r.type==="hover"?f.jsx(JA,{...s,ref:e,forceMount:t}):r.type==="scroll"?f.jsx(eT,{...s,ref:e,forceMount:t}):r.type==="auto"?f.jsx(bb,{...s,ref:e,forceMount:t}):r.type==="always"?f.jsx(Qh,{...s,ref:e}):null});$h.displayName=Ms;var JA=x.forwardRef((o,e)=>{const{forceMount:t,...s}=o,r=Fn(Ms,o.__scopeScrollArea),[l,c]=x.useState(!1);return x.useEffect(()=>{const d=r.scrollArea;let h=0;if(d){const p=()=>{window.clearTimeout(h),c(!0)},g=()=>{h=window.setTimeout(()=>c(!1),r.scrollHideDelay)};return d.addEventListener("pointerenter",p),d.addEventListener("pointerleave",g),()=>{window.clearTimeout(h),d.removeEventListener("pointerenter",p),d.removeEventListener("pointerleave",g)}}},[r.scrollArea,r.scrollHideDelay]),f.jsx(rn,{present:t||l,children:f.jsx(bb,{"data-state":l?"visible":"hidden",...s,ref:e})})}),eT=x.forwardRef((o,e)=>{const{forceMount:t,...s}=o,r=Fn(Ms,o.__scopeScrollArea),l=o.orientation==="horizontal",c=Qc(()=>h("SCROLL_END"),100),[d,h]=WA("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(d==="idle"){const p=window.setTimeout(()=>h("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(p)}},[d,r.scrollHideDelay,h]),x.useEffect(()=>{const p=r.viewport,g=l?"scrollLeft":"scrollTop";if(p){let m=p[g];const v=()=>{const w=p[g];m!==w&&(h("SCROLL"),c()),m=w};return p.addEventListener("scroll",v),()=>p.removeEventListener("scroll",v)}},[r.viewport,l,h,c]),f.jsx(rn,{present:t||d!=="hidden",children:f.jsx(Qh,{"data-state":d==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:ge(o.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:ge(o.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),bb=x.forwardRef((o,e)=>{const t=Fn(Ms,o.__scopeScrollArea),{forceMount:s,...r}=o,[l,c]=x.useState(!1),d=o.orientation==="horizontal",h=Qc(()=>{if(t.viewport){const p=t.viewport.offsetWidth<t.viewport.scrollWidth,g=t.viewport.offsetHeight<t.viewport.scrollHeight;c(d?p:g)}},10);return mr(t.viewport,h),mr(t.content,h),f.jsx(rn,{present:s||l,children:f.jsx(Qh,{"data-state":l?"visible":"hidden",...r,ref:e})})}),Qh=x.forwardRef((o,e)=>{const{orientation:t="vertical",...s}=o,r=Fn(Ms,o.__scopeScrollArea),l=x.useRef(null),c=x.useRef(0),[d,h]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=Mb(d.viewport,d.content),g={...s,sizes:d,onSizesChange:h,hasThumb:p>0&&p<1,onThumbChange:v=>l.current=v,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:v=>c.current=v};function m(v,w){return rT(v,c.current,d,w)}return t==="horizontal"?f.jsx(tT,{...g,ref:e,onThumbPositionChange:()=>{if(r.viewport&&l.current){const v=r.viewport.scrollLeft,w=X0(v,d,r.dir);l.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:v=>{r.viewport&&(r.viewport.scrollLeft=v)},onDragScroll:v=>{r.viewport&&(r.viewport.scrollLeft=m(v,r.dir))}}):t==="vertical"?f.jsx(nT,{...g,ref:e,onThumbPositionChange:()=>{if(r.viewport&&l.current){const v=r.viewport.scrollTop,w=X0(v,d);l.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:v=>{r.viewport&&(r.viewport.scrollTop=v)},onDragScroll:v=>{r.viewport&&(r.viewport.scrollTop=m(v))}}):null}),tT=x.forwardRef((o,e)=>{const{sizes:t,onSizesChange:s,...r}=o,l=Fn(Ms,o.__scopeScrollArea),[c,d]=x.useState(),h=x.useRef(null),p=De(e,h,l.onScrollbarXChange);return x.useEffect(()=>{h.current&&d(getComputedStyle(h.current))},[h]),f.jsx(wb,{"data-orientation":"horizontal",...r,ref:p,sizes:t,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":$c(t)+"px",...o.style},onThumbPointerDown:g=>o.onThumbPointerDown(g.x),onDragScroll:g=>o.onDragScroll(g.x),onWheelScroll:(g,m)=>{if(l.viewport){const v=l.viewport.scrollLeft+g.deltaX;o.onWheelScroll(v),Rb(v,m)&&g.preventDefault()}},onResize:()=>{h.current&&l.viewport&&c&&s({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:kc(c.paddingLeft),paddingEnd:kc(c.paddingRight)}})}})}),nT=x.forwardRef((o,e)=>{const{sizes:t,onSizesChange:s,...r}=o,l=Fn(Ms,o.__scopeScrollArea),[c,d]=x.useState(),h=x.useRef(null),p=De(e,h,l.onScrollbarYChange);return x.useEffect(()=>{h.current&&d(getComputedStyle(h.current))},[h]),f.jsx(wb,{"data-orientation":"vertical",...r,ref:p,sizes:t,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":$c(t)+"px",...o.style},onThumbPointerDown:g=>o.onThumbPointerDown(g.y),onDragScroll:g=>o.onDragScroll(g.y),onWheelScroll:(g,m)=>{if(l.viewport){const v=l.viewport.scrollTop+g.deltaY;o.onWheelScroll(v),Rb(v,m)&&g.preventDefault()}},onResize:()=>{h.current&&l.viewport&&c&&s({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:kc(c.paddingTop),paddingEnd:kc(c.paddingBottom)}})}})}),[sT,xb]=gb(Ms),wb=x.forwardRef((o,e)=>{const{__scopeScrollArea:t,sizes:s,hasThumb:r,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:d,onThumbPositionChange:h,onDragScroll:p,onWheelScroll:g,onResize:m,...v}=o,w=Fn(Ms,t),[C,S]=x.useState(null),R=De(e,ee=>S(ee)),E=x.useRef(null),T=x.useRef(""),N=w.viewport,A=s.content-s.viewport,j=nn(g),q=nn(h),P=Qc(m,10);function H(ee){if(E.current){const se=ee.clientX-E.current.left,le=ee.clientY-E.current.top;p({x:se,y:le})}}return x.useEffect(()=>{const ee=se=>{const le=se.target;C?.contains(le)&&j(se,A)};return document.addEventListener("wheel",ee,{passive:!1}),()=>document.removeEventListener("wheel",ee,{passive:!1})},[N,C,A,j]),x.useEffect(q,[s,q]),mr(C,P),mr(w.content,P),f.jsx(sT,{scope:t,scrollbar:C,hasThumb:r,onThumbChange:nn(l),onThumbPointerUp:nn(c),onThumbPositionChange:q,onThumbPointerDown:nn(d),children:f.jsx(Ae.div,{...v,ref:R,style:{position:"absolute",...v.style},onPointerDown:ge(o.onPointerDown,ee=>{ee.button===0&&(ee.target.setPointerCapture(ee.pointerId),E.current=C.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),H(ee))}),onPointerMove:ge(o.onPointerMove,H),onPointerUp:ge(o.onPointerUp,ee=>{const se=ee.target;se.hasPointerCapture(ee.pointerId)&&se.releasePointerCapture(ee.pointerId),document.body.style.webkitUserSelect=T.current,w.viewport&&(w.viewport.style.scrollBehavior=""),E.current=null})})})}),Tc="ScrollAreaThumb",Cb=x.forwardRef((o,e)=>{const{forceMount:t,...s}=o,r=xb(Tc,o.__scopeScrollArea);return f.jsx(rn,{present:t||r.hasThumb,children:f.jsx(aT,{ref:e,...s})})}),aT=x.forwardRef((o,e)=>{const{__scopeScrollArea:t,style:s,...r}=o,l=Fn(Tc,t),c=xb(Tc,t),{onThumbPositionChange:d}=c,h=De(e,m=>c.onThumbChange(m)),p=x.useRef(void 0),g=Qc(()=>{p.current&&(p.current(),p.current=void 0)},100);return x.useEffect(()=>{const m=l.viewport;if(m){const v=()=>{if(g(),!p.current){const w=iT(m,d);p.current=w,d()}};return d(),m.addEventListener("scroll",v),()=>m.removeEventListener("scroll",v)}},[l.viewport,g,d]),f.jsx(Ae.div,{"data-state":c.hasThumb?"visible":"hidden",...r,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ge(o.onPointerDownCapture,m=>{const w=m.target.getBoundingClientRect(),C=m.clientX-w.left,S=m.clientY-w.top;c.onThumbPointerDown({x:C,y:S})}),onPointerUp:ge(o.onPointerUp,c.onThumbPointerUp)})});Cb.displayName=Tc;var Gh="ScrollAreaCorner",Sb=x.forwardRef((o,e)=>{const t=Fn(Gh,o.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&s?f.jsx(oT,{...o,ref:e}):null});Sb.displayName=Gh;var oT=x.forwardRef((o,e)=>{const{__scopeScrollArea:t,...s}=o,r=Fn(Gh,t),[l,c]=x.useState(0),[d,h]=x.useState(0),p=!!(l&&d);return mr(r.scrollbarX,()=>{const g=r.scrollbarX?.offsetHeight||0;r.onCornerHeightChange(g),h(g)}),mr(r.scrollbarY,()=>{const g=r.scrollbarY?.offsetWidth||0;r.onCornerWidthChange(g),c(g)}),p?f.jsx(Ae.div,{...s,ref:e,style:{width:l,height:d,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...o.style}}):null});function kc(o){return o?parseInt(o,10):0}function Mb(o,e){const t=o/e;return isNaN(t)?0:t}function $c(o){const e=Mb(o.viewport,o.content),t=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,s=(o.scrollbar.size-t)*e;return Math.max(s,18)}function rT(o,e,t,s="ltr"){const r=$c(t),l=r/2,c=e||l,d=r-c,h=t.scrollbar.paddingStart+c,p=t.scrollbar.size-t.scrollbar.paddingEnd-d,g=t.content-t.viewport,m=s==="ltr"?[0,g]:[g*-1,0];return Eb([h,p],m)(o)}function X0(o,e,t="ltr"){const s=$c(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,l=e.scrollbar.size-r,c=e.content-e.viewport,d=l-s,h=t==="ltr"?[0,c]:[c*-1,0],p=Ni(o,h);return Eb([0,c],[0,d])(p)}function Eb(o,e){return t=>{if(o[0]===o[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(o[1]-o[0]);return e[0]+s*(t-o[0])}}function Rb(o,e){return o>0&&o<e}var iT=(o,e=()=>{})=>{let t={left:o.scrollLeft,top:o.scrollTop},s=0;return(function r(){const l={left:o.scrollLeft,top:o.scrollTop},c=t.left!==l.left,d=t.top!==l.top;(c||d)&&e(),t=l,s=window.requestAnimationFrame(r)})(),()=>window.cancelAnimationFrame(s)};function Qc(o,e){const t=nn(o),s=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),x.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,e)},[t,e])}function mr(o,e){const t=nn(e);sn(()=>{let s=0;if(o){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(t)});return r.observe(o),()=>{window.cancelAnimationFrame(s),r.unobserve(o)}}},[o,t])}var Nb=mb,lT=vb,cT=Sb;const on=x.forwardRef(({className:o,children:e,...t},s)=>f.jsxs(Nb,{ref:s,className:Ee("relative overflow-hidden",o),scrollHideDelay:0,...t,children:[f.jsx(lT,{className:"h-full w-full rounded-[inherit]",children:e}),f.jsx(Gc,{}),f.jsx(cT,{})]}));on.displayName=Nb.displayName;const Gc=x.forwardRef(({className:o,orientation:e="vertical",...t},s)=>f.jsx($h,{ref:s,orientation:e,className:Ee("flex touch-none select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]","data-[state=visible]:bg-accent/20 data-[state=visible]:hover:bg-accent/30","[&[data-state=hidden]]:opacity-0 [&[data-state=visible]]:opacity-100",o),style:{transition:"none !important",transitionDelay:"0ms !important",transitionDuration:"0ms !important"},...t,children:f.jsx(Cb,{className:"relative flex-1 rounded-full bg-accent/80 hover:bg-accent",style:{transition:"none !important"}})}));Gc.displayName=$h.displayName;const Oi=Ss(o=>({showMinimap:!0,setShowMinimap:e=>o({showMinimap:e}),toggleMinimap:()=>o(e=>({showMinimap:!e.showMinimap})),showHeatMapLegend:!0,setShowHeatMapLegend:e=>o({showHeatMapLegend:e}),toggleHeatMapLegend:()=>o(e=>({showHeatMapLegend:!e.showHeatMapLegend})),showRuler:!1,setShowRuler:e=>o({showRuler:e}),toggleRuler:()=>o(e=>({showRuler:!e.showRuler})),autoCenterOnSelect:!0,setAutoCenterOnSelect:e=>o({autoCenterOnSelect:e}),searchQuery:"",setSearchQuery:e=>o({searchQuery:e}),highlightedNodeId:null,setHighlightedNodeId:e=>o({highlightedNodeId:e})})),Ai=[{id:"kafka",type:"kafka",label:"Apache Kafka",icon:"",color:"#000000",category:"messaging"},{id:"rabbitmq",type:"rabbitmq",label:"RabbitMQ",icon:"",color:"#FF6600",category:"messaging"},{id:"activemq",type:"activemq",label:"ActiveMQ",icon:"",color:"#A1005A",category:"messaging"},{id:"aws-sqs",type:"aws-sqs",label:"AWS SQS",icon:"",color:"#FF9900",category:"messaging"},{id:"azure-service-bus",type:"azure-service-bus",label:"Azure Service Bus",icon:"",color:"#0078D7",category:"messaging"},{id:"gcp-pubsub",type:"gcp-pubsub",label:"Google Pub/Sub",icon:"",color:"#4285F4",category:"messaging"},{id:"kong",type:"kong",label:"Kong Gateway",icon:"",color:"#003459",category:"integration"},{id:"apigee",type:"apigee",label:"Apigee",icon:"",color:"#F26522",category:"integration"},{id:"mulesoft",type:"mulesoft",label:"MuleSoft",icon:"",color:"#00A0DF",category:"integration"},{id:"graphql-gateway",type:"graphql-gateway",label:"GraphQL Gateway",icon:"",color:"#E10098",category:"integration"},{id:"bff-service",type:"bff-service",label:"BFF Service",icon:"",color:"#6C5CE7",category:"integration"},{id:"webhook-relay",type:"webhook-relay",label:"Webhook Relay",icon:"",color:"#1ABC9C",category:"integration"},{id:"postgres",type:"postgres",label:"PostgreSQL",icon:"",color:"#336791",category:"data"},{id:"mongodb",type:"mongodb",label:"MongoDB",icon:"",color:"#47A248",category:"data"},{id:"redis",type:"redis",label:"Redis",icon:"",color:"#DC382D",category:"data"},{id:"cassandra",type:"cassandra",label:"Apache Cassandra",icon:"",color:"#1287B1",category:"data"},{id:"clickhouse",type:"clickhouse",label:"ClickHouse",icon:"",color:"#FFCC00",category:"data"},{id:"snowflake",type:"snowflake",label:"Snowflake",icon:"",color:"#29B5E8",category:"data"},{id:"elasticsearch",type:"elasticsearch",label:"Elasticsearch",icon:"",color:"#00A79D",category:"data"},{id:"s3-datalake",type:"s3-datalake",label:"S3 Data Lake",icon:"",color:"#FF9900",category:"data"},{id:"prometheus",type:"prometheus",label:"Prometheus",icon:"",color:"#E6522C",category:"observability"},{id:"grafana",type:"grafana",label:"Grafana",icon:"",color:"#F56815",category:"observability"},{id:"loki",type:"loki",label:"Loki",icon:"",color:"#7CBA3C",category:"observability"},{id:"jaeger",type:"jaeger",label:"Jaeger",icon:"",color:"#65D6AD",category:"observability"},{id:"otel-collector",type:"otel-collector",label:"OpenTelemetry Collector",icon:"",color:"#6E56CF",category:"observability"},{id:"pagerduty",type:"pagerduty",label:"PagerDuty",icon:"",color:"#06AC38",category:"observability"},{id:"keycloak",type:"keycloak",label:"Keycloak",icon:"",color:"#5C6BC0",category:"security"},{id:"waf",type:"waf",label:"WAF / API Shield",icon:"",color:"#F44336",category:"security"},{id:"firewall",type:"firewall",label:"Firewall",icon:"",color:"#FF7043",category:"security"},{id:"secrets-vault",type:"secrets-vault",label:"Secrets Vault",icon:"",color:"#009688",category:"security"},{id:"ids-ips",type:"ids-ips",label:"IDS / IPS",icon:"",color:"#512DA8",category:"security"},{id:"jenkins",type:"jenkins",label:"Jenkins",icon:"",color:"#D24939",category:"devops"},{id:"gitlab-ci",type:"gitlab-ci",label:"GitLab CI",icon:"",color:"#FC6D26",category:"devops"},{id:"argo-cd",type:"argo-cd",label:"Argo CD",icon:"",color:"#EF7B45",category:"devops"},{id:"terraform",type:"terraform",label:"Terraform",icon:"",color:"#7B42BC",category:"devops"},{id:"ansible",type:"ansible",label:"Ansible",icon:"",color:"#000000",category:"devops"},{id:"harbor",type:"harbor",label:"Harbor Registry",icon:"",color:"#3BC1C4",category:"devops"},{id:"nginx",type:"nginx",label:"NGINX",icon:"",color:"#009639",category:"infrastructure"},{id:"docker",type:"docker",label:"Docker",icon:"",color:"#2496ED",category:"infrastructure"},{id:"kubernetes",type:"kubernetes",label:"Kubernetes",icon:"",color:"#326CE5",category:"infrastructure"},{id:"haproxy",type:"haproxy",label:"HAProxy",icon:"",color:"#009FDF",category:"infrastructure"},{id:"envoy",type:"envoy",label:"Envoy Proxy",icon:"",color:"#D63384",category:"infrastructure"},{id:"traefik",type:"traefik",label:"Traefik",icon:"",color:"#24A1DE",category:"infrastructure"},{id:"istio",type:"istio",label:"Istio Mesh",icon:"",color:"#466BB0",category:"edge"},{id:"service-mesh",type:"service-mesh",label:"Service Mesh",icon:"",color:"#5E81AC",category:"edge"},{id:"api-gateway",type:"api-gateway",label:"Cloud API Gateway",icon:"",color:"#FFB300",category:"edge"},{id:"vpn",type:"vpn",label:"VPN Concentrator",icon:"",color:"#2D9CDB",category:"edge"},{id:"cdn",type:"cdn",label:"CDN Edge",icon:"",color:"#FF5A5F",category:"edge"},{id:"rest",type:"rest",label:"REST API",icon:"",color:"#61DAFB",category:"api"},{id:"grpc",type:"grpc",label:"gRPC",icon:"",color:"#244C5A",category:"api"},{id:"graphql",type:"graphql",label:"GraphQL",icon:"",color:"#DE33A6",category:"api"},{id:"soap",type:"soap",label:"SOAP",icon:"",color:"#2196F3",category:"api"},{id:"websocket",type:"websocket",label:"WebSocket",icon:"",color:"#010101",category:"api"},{id:"webhook",type:"webhook",label:"Webhook Endpoint",icon:"",color:"#0FA3B1",category:"api"},{id:"spark",type:"spark",label:"Apache Spark",icon:"",color:"#E25A1C",category:"ml"},{id:"tensorflow-serving",type:"tensorflow-serving",label:"TensorFlow Serving",icon:"",color:"#FF6F00",category:"ml"},{id:"pytorch-serve",type:"pytorch-serve",label:"PyTorch Serve",icon:"",color:"#EE4C2C",category:"ml"},{id:"mlflow",type:"mlflow",label:"MLflow",icon:"",color:"#4285F4",category:"ml"},{id:"feature-store",type:"feature-store",label:"Feature Store",icon:"",color:"#8E44AD",category:"ml"},{id:"crm",type:"crm",label:"CRM System",icon:"",color:"#F39C12",category:"business"},{id:"erp",type:"erp",label:"ERP / SAP",icon:"",color:"#1B75BC",category:"business"},{id:"payment-gateway",type:"payment-gateway",label:"Payment Gateway",icon:"",color:"#4CAF50",category:"business"},{id:"bpmn-engine",type:"bpmn-engine",label:"BPMN Engine",icon:"",color:"#34495E",category:"business"},{id:"rpa-bot",type:"rpa-bot",label:"RPA Bot",icon:"",color:"#9B59B6",category:"business"}],xi=[{id:"messaging",label:"Messaging & Event Bus",icon:""},{id:"integration",label:"Integration & API",icon:""},{id:"data",label:"Data & Storage",icon:""},{id:"observability",label:"Observability",icon:""},{id:"security",label:"Security & IAM",icon:""},{id:"devops",label:"DevOps & Platform",icon:""},{id:"infrastructure",label:"Runtime & Infra",icon:""},{id:"edge",label:"Edge & Networking",icon:""},{id:"api",label:"Protocols & APIs",icon:""},{id:"ml",label:"ML & Analytics",icon:""},{id:"business",label:"Business Systems",icon:""}];function uT(){const{nodes:o,selectNode:e,zoom:t,pan:s,setPan:r,setZoom:l}=Re(),{searchQuery:c,setSearchQuery:d,highlightedNodeId:h,setHighlightedNodeId:p}=Oi(),[g,m]=x.useState(!1),v=x.useRef(null);x.useEffect(()=>{const S=R=>{v.current&&!v.current.contains(R.target)&&m(!1)};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]);const w=x.useMemo(()=>{if(!c.trim())return[];const S=c.toLowerCase();return o.filter(R=>{const E=Ai.find(j=>j.type===R.type),T=R.data?.label||"",N=R.type||"",A=E?.category||"";return T.toLowerCase().includes(S)||N.toLowerCase().includes(S)||A.toLowerCase().includes(S)})},[o,c]),C=S=>{e(S),p(S);const R=o.find(E=>E.id===S);if(R&&g){const E=window.innerWidth/2,T=window.innerHeight/2,N=R.position.x+70,A=R.position.y+70,j=E-N*t,q=T-A*t;r({x:j,y:q}),t<.8&&l(1)}setTimeout(()=>p(null),2e3)};return f.jsxs("div",{className:"relative",ref:v,children:[f.jsxs("div",{className:"relative",children:[f.jsx(Bc,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),f.jsx(Tt,{type:"text",placeholder:"Search components...",value:c,onChange:S=>{d(S.target.value),m(!0)},onFocus:()=>m(!0),className:"pl-8 pr-8 w-64"}),c&&f.jsx(Te,{variant:"ghost",size:"icon",className:"absolute right-0 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>{d(""),m(!1),p(null)},children:f.jsx(vs,{className:"h-3 w-3"})})]}),g&&c&&f.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 bg-card border border-border rounded-md shadow-lg z-50 max-h-80 overflow-hidden",children:w.length>0?f.jsx(on,{className:"max-h-80",children:f.jsx("div",{className:"p-1",children:w.map(S=>{const R=Ai.find(T=>T.type===S.type),E=h===S.id;return f.jsxs("button",{onClick:()=>C(S.id),className:Ee("w-full text-left px-3 py-2 rounded-sm hover:bg-accent transition-colors flex items-center justify-between",E&&"bg-accent"),children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-sm font-medium truncate",children:S.data?.label||S.type}),f.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[R?.category||"Unknown","  ",S.type]})]}),f.jsx(qh,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 ml-2"})]},S.id)})})}):f.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No components found"})})]})}function dT(o){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o))}Array(12).fill(0);let uh=1;class fT{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...r}=e,l=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:uh++,c=this.toasts.find(h=>h.id===l),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(h=>h.id===l?(this.publish({...h,...e,id:l,title:s}),{...h,...e,id:l,dismissible:d,title:s}):h):this.addToast({title:s,...r,dismissible:d,id:l}),l},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let l=s!==void 0,c;const d=r.then(async p=>{if(c=["resolve",p],Et.isValidElement(p))l=!1,this.create({id:s,type:"default",message:p});else if(pT(p)&&!p.ok){l=!1;const m=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,v=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,C=typeof m=="object"&&!Et.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:v,...C})}else if(p instanceof Error){l=!1;const m=typeof t.error=="function"?await t.error(p):t.error,v=typeof t.description=="function"?await t.description(p):t.description,C=typeof m=="object"&&!Et.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:v,...C})}else if(t.success!==void 0){l=!1;const m=typeof t.success=="function"?await t.success(p):t.success,v=typeof t.description=="function"?await t.description(p):t.description,C=typeof m=="object"&&!Et.isValidElement(m)?m:{message:m};this.create({id:s,type:"success",description:v,...C})}}).catch(async p=>{if(c=["reject",p],t.error!==void 0){l=!1;const g=typeof t.error=="function"?await t.error(p):t.error,m=typeof t.description=="function"?await t.description(p):t.description,w=typeof g=="object"&&!Et.isValidElement(g)?g:{message:g};this.create({id:s,type:"error",description:m,...w})}}).finally(()=>{l&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),h=()=>new Promise((p,g)=>d.then(()=>c[0]==="reject"?g(c[1]):p(c[1])).catch(g));return typeof s!="string"&&typeof s!="number"?{unwrap:h}:Object.assign(s,{unwrap:h})},this.custom=(e,t)=>{const s=t?.id||uh++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Gn=new fT,hT=(o,e)=>{const t=e?.id||uh++;return Gn.addToast({title:o,...e,id:t}),t},pT=o=>o&&typeof o=="object"&&"ok"in o&&typeof o.ok=="boolean"&&"status"in o&&typeof o.status=="number",gT=hT,mT=()=>Gn.toasts,yT=()=>Gn.getActiveToasts(),Fe=Object.assign(gT,{success:Gn.success,info:Gn.info,warning:Gn.warning,error:Gn.error,custom:Gn.custom,message:Gn.message,promise:Gn.promise,dismiss:Gn.dismiss,loading:Gn.loading},{getHistory:mT,getToasts:yT});dT("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");var vT=kh[" useId ".trim().toString()]||(()=>{}),bT=0;function ns(o){const[e,t]=x.useState(vT());return sn(()=>{t(s=>s??String(bT++))},[o]),e?`radix-${e}`:""}var xT=kh[" useInsertionEffect ".trim().toString()]||sn;function xs({prop:o,defaultProp:e,onChange:t=()=>{},caller:s}){const[r,l,c]=wT({defaultProp:e,onChange:t}),d=o!==void 0,h=d?o:r;{const g=x.useRef(o!==void 0);x.useEffect(()=>{const m=g.current;m!==d&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=d},[d,s])}const p=x.useCallback(g=>{if(d){const m=CT(g)?g(o):g;m!==o&&c.current?.(m)}else l(g)},[d,o,l,c]);return[h,p]}function wT({defaultProp:o,onChange:e}){const[t,s]=x.useState(o),r=x.useRef(t),l=x.useRef(e);return xT(()=>{l.current=e},[e]),x.useEffect(()=>{r.current!==t&&(l.current?.(t),r.current=t)},[t,r]),[t,s,l]}function CT(o){return typeof o=="function"}function ST(o,e=globalThis?.document){const t=nn(o);x.useEffect(()=>{const s=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var MT="DismissableLayer",dh="dismissableLayer.update",ET="dismissableLayer.pointerDownOutside",RT="dismissableLayer.focusOutside",W0,Ab=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Li=x.forwardRef((o,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:l,onInteractOutside:c,onDismiss:d,...h}=o,p=x.useContext(Ab),[g,m]=x.useState(null),v=g?.ownerDocument??globalThis?.document,[,w]=x.useState({}),C=De(e,P=>m(P)),S=Array.from(p.layers),[R]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),E=S.indexOf(R),T=g?S.indexOf(g):-1,N=p.layersWithOutsidePointerEventsDisabled.size>0,A=T>=E,j=TT(P=>{const H=P.target,ee=[...p.branches].some(se=>se.contains(H));!A||ee||(r?.(P),c?.(P),P.defaultPrevented||d?.())},v),q=kT(P=>{const H=P.target;[...p.branches].some(se=>se.contains(H))||(l?.(P),c?.(P),P.defaultPrevented||d?.())},v);return ST(P=>{T===p.layers.size-1&&(s?.(P),!P.defaultPrevented&&d&&(P.preventDefault(),d()))},v),x.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(W0=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),Z0(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=W0)}},[g,v,t,p]),x.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),Z0())},[g,p]),x.useEffect(()=>{const P=()=>w({});return document.addEventListener(dh,P),()=>document.removeEventListener(dh,P)},[]),f.jsx(Ae.div,{...h,ref:C,style:{pointerEvents:N?A?"auto":"none":void 0,...o.style},onFocusCapture:ge(o.onFocusCapture,q.onFocusCapture),onBlurCapture:ge(o.onBlurCapture,q.onBlurCapture),onPointerDownCapture:ge(o.onPointerDownCapture,j.onPointerDownCapture)})});Li.displayName=MT;var NT="DismissableLayerBranch",AT=x.forwardRef((o,e)=>{const t=x.useContext(Ab),s=x.useRef(null),r=De(e,s);return x.useEffect(()=>{const l=s.current;if(l)return t.branches.add(l),()=>{t.branches.delete(l)}},[t.branches]),f.jsx(Ae.div,{...o,ref:r})});AT.displayName=NT;function TT(o,e=globalThis?.document){const t=nn(o),s=x.useRef(!1),r=x.useRef(()=>{});return x.useEffect(()=>{const l=d=>{if(d.target&&!s.current){let h=function(){Tb(ET,t,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=h,e.addEventListener("click",r.current,{once:!0})):h()}else e.removeEventListener("click",r.current);s.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",l),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function kT(o,e=globalThis?.document){const t=nn(o),s=x.useRef(!1);return x.useEffect(()=>{const r=l=>{l.target&&!s.current&&Tb(RT,t,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Z0(){const o=new CustomEvent(dh);document.dispatchEvent(o)}function Tb(o,e,t,{discrete:s}){const r=t.originalEvent.target,l=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(o,e,{once:!0}),s?pb(r,l):r.dispatchEvent(l)}var Ff="focusScope.autoFocusOnMount",Yf="focusScope.autoFocusOnUnmount",J0={bubbles:!1,cancelable:!0},jT="FocusScope",Pi=x.forwardRef((o,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:l,...c}=o,[d,h]=x.useState(null),p=nn(r),g=nn(l),m=x.useRef(null),v=De(e,S=>h(S)),w=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(s){let S=function(N){if(w.paused||!d)return;const A=N.target;d.contains(A)?m.current=A:ka(m.current,{select:!0})},R=function(N){if(w.paused||!d)return;const A=N.relatedTarget;A!==null&&(d.contains(A)||ka(m.current,{select:!0}))},E=function(N){if(document.activeElement===document.body)for(const j of N)j.removedNodes.length>0&&ka(d)};document.addEventListener("focusin",S),document.addEventListener("focusout",R);const T=new MutationObserver(E);return d&&T.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",R),T.disconnect()}}},[s,d,w.paused]),x.useEffect(()=>{if(d){tv.add(w);const S=document.activeElement;if(!d.contains(S)){const E=new CustomEvent(Ff,J0);d.addEventListener(Ff,p),d.dispatchEvent(E),E.defaultPrevented||(DT(PT(kb(d)),{select:!0}),document.activeElement===S&&ka(d))}return()=>{d.removeEventListener(Ff,p),setTimeout(()=>{const E=new CustomEvent(Yf,J0);d.addEventListener(Yf,g),d.dispatchEvent(E),E.defaultPrevented||ka(S??document.body,{select:!0}),d.removeEventListener(Yf,g),tv.remove(w)},0)}}},[d,p,g,w]);const C=x.useCallback(S=>{if(!t&&!s||w.paused)return;const R=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,E=document.activeElement;if(R&&E){const T=S.currentTarget,[N,A]=_T(T);N&&A?!S.shiftKey&&E===A?(S.preventDefault(),t&&ka(N,{select:!0})):S.shiftKey&&E===N&&(S.preventDefault(),t&&ka(A,{select:!0})):E===T&&S.preventDefault()}},[t,s,w.paused]);return f.jsx(Ae.div,{tabIndex:-1,...c,ref:v,onKeyDown:C})});Pi.displayName=jT;function DT(o,{select:e=!1}={}){const t=document.activeElement;for(const s of o)if(ka(s,{select:e}),document.activeElement!==t)return}function _T(o){const e=kb(o),t=ev(e,o),s=ev(e.reverse(),o);return[t,s]}function kb(o){const e=[],t=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function ev(o,e){for(const t of o)if(!zT(t,{upTo:e}))return t}function zT(o,{upTo:e}){if(getComputedStyle(o).visibility==="hidden")return!0;for(;o;){if(e!==void 0&&o===e)return!1;if(getComputedStyle(o).display==="none")return!0;o=o.parentElement}return!1}function OT(o){return o instanceof HTMLInputElement&&"select"in o}function ka(o,{select:e=!1}={}){if(o&&o.focus){const t=document.activeElement;o.focus({preventScroll:!0}),o!==t&&OT(o)&&e&&o.select()}}var tv=LT();function LT(){let o=[];return{add(e){const t=o[0];e!==t&&t?.pause(),o=nv(o,e),o.unshift(e)},remove(e){o=nv(o,e),o[0]?.resume()}}}function nv(o,e){const t=[...o],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function PT(o){return o.filter(e=>e.tagName!=="A")}var IT="Portal",Ii=x.forwardRef((o,e)=>{const{container:t,...s}=o,[r,l]=x.useState(!1);sn(()=>l(!0),[]);const c=t||r&&globalThis?.document?.body;return c?FR.createPortal(f.jsx(Ae.div,{...s,ref:e}),c):null});Ii.displayName=IT;var Xf=0;function Kc(){x.useEffect(()=>{const o=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",o[0]??sv()),document.body.insertAdjacentElement("beforeend",o[1]??sv()),Xf++,()=>{Xf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Xf--}},[])}function sv(){const o=document.createElement("span");return o.setAttribute("data-radix-focus-guard",""),o.tabIndex=0,o.style.outline="none",o.style.opacity="0",o.style.position="fixed",o.style.pointerEvents="none",o}var fs=function(){return fs=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},fs.apply(this,arguments)};function jb(o,e){var t={};for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&e.indexOf(s)<0&&(t[s]=o[s]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(o);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(o,s[r])&&(t[s[r]]=o[s[r]]);return t}function qT(o,e,t){if(t||arguments.length===2)for(var s=0,r=e.length,l;s<r;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return o.concat(l||Array.prototype.slice.call(e))}var xc="right-scroll-bar-position",wc="width-before-scroll-bar",HT="with-scroll-bars-hidden",UT="--removed-body-scroll-bar-size";function Wf(o,e){return typeof o=="function"?o(e):o&&(o.current=e),o}function BT(o,e){var t=x.useState(function(){return{value:o,callback:e,facade:{get current(){return t.value},set current(s){var r=t.value;r!==s&&(t.value=s,t.callback(s,r))}}}})[0];return t.callback=e,t.facade}var $T=typeof window<"u"?x.useLayoutEffect:x.useEffect,av=new WeakMap;function QT(o,e){var t=BT(null,function(s){return o.forEach(function(r){return Wf(r,s)})});return $T(function(){var s=av.get(t);if(s){var r=new Set(s),l=new Set(o),c=t.current;r.forEach(function(d){l.has(d)||Wf(d,null)}),l.forEach(function(d){r.has(d)||Wf(d,c)})}av.set(t,o)},[o]),t}function GT(o){return o}function KT(o,e){e===void 0&&(e=GT);var t=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:o},useMedium:function(l){var c=e(l,s);return t.push(c),function(){t=t.filter(function(d){return d!==c})}},assignSyncMedium:function(l){for(s=!0;t.length;){var c=t;t=[],c.forEach(l)}t={push:function(d){return l(d)},filter:function(){return t}}},assignMedium:function(l){s=!0;var c=[];if(t.length){var d=t;t=[],d.forEach(l),c=t}var h=function(){var g=c;c=[],g.forEach(l)},p=function(){return Promise.resolve().then(h)};p(),t={push:function(g){c.push(g),p()},filter:function(g){return c=c.filter(g),t}}}};return r}function VT(o){o===void 0&&(o={});var e=KT(null);return e.options=fs({async:!0,ssr:!1},o),e}var Db=function(o){var e=o.sideCar,t=jb(o,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return x.createElement(s,fs({},t))};Db.isSideCarExport=!0;function FT(o,e){return o.useMedium(e),Db}var _b=VT(),Zf=function(){},Vc=x.forwardRef(function(o,e){var t=x.useRef(null),s=x.useState({onScrollCapture:Zf,onWheelCapture:Zf,onTouchMoveCapture:Zf}),r=s[0],l=s[1],c=o.forwardProps,d=o.children,h=o.className,p=o.removeScrollBar,g=o.enabled,m=o.shards,v=o.sideCar,w=o.noRelative,C=o.noIsolation,S=o.inert,R=o.allowPinchZoom,E=o.as,T=E===void 0?"div":E,N=o.gapMode,A=jb(o,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=v,q=QT([t,e]),P=fs(fs({},A),r);return x.createElement(x.Fragment,null,g&&x.createElement(j,{sideCar:_b,removeScrollBar:p,shards:m,noRelative:w,noIsolation:C,inert:S,setCallbacks:l,allowPinchZoom:!!R,lockRef:t,gapMode:N}),c?x.cloneElement(x.Children.only(d),fs(fs({},P),{ref:q})):x.createElement(T,fs({},P,{className:h,ref:q}),d))});Vc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vc.classNames={fullWidth:wc,zeroRight:xc};var YT=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XT(){if(!document)return null;var o=document.createElement("style");o.type="text/css";var e=YT();return e&&o.setAttribute("nonce",e),o}function WT(o,e){o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}function ZT(o){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(o)}var JT=function(){var o=0,e=null;return{add:function(t){o==0&&(e=XT())&&(WT(e,t),ZT(e)),o++},remove:function(){o--,!o&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},ek=function(){var o=JT();return function(e,t){x.useEffect(function(){return o.add(e),function(){o.remove()}},[e&&t])}},zb=function(){var o=ek(),e=function(t){var s=t.styles,r=t.dynamic;return o(s,r),null};return e},tk={left:0,top:0,right:0,gap:0},Jf=function(o){return parseInt(o||"",10)||0},nk=function(o){var e=window.getComputedStyle(document.body),t=e[o==="padding"?"paddingLeft":"marginLeft"],s=e[o==="padding"?"paddingTop":"marginTop"],r=e[o==="padding"?"paddingRight":"marginRight"];return[Jf(t),Jf(s),Jf(r)]},sk=function(o){if(o===void 0&&(o="margin"),typeof window>"u")return tk;var e=nk(o),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},ak=zb(),fr="data-scroll-locked",ok=function(o,e,t,s){var r=o.left,l=o.top,c=o.right,d=o.gap;return t===void 0&&(t="margin"),`
  .`.concat(HT,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(d,"px ").concat(s,`;
  }
  body[`).concat(fr,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(d,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(xc,` {
    right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat(wc,` {
    margin-right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat(xc," .").concat(xc,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(wc," .").concat(wc,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(fr,`] {
    `).concat(UT,": ").concat(d,`px;
  }
`)},ov=function(){var o=parseInt(document.body.getAttribute(fr)||"0",10);return isFinite(o)?o:0},rk=function(){x.useEffect(function(){return document.body.setAttribute(fr,(ov()+1).toString()),function(){var o=ov()-1;o<=0?document.body.removeAttribute(fr):document.body.setAttribute(fr,o.toString())}},[])},ik=function(o){var e=o.noRelative,t=o.noImportant,s=o.gapMode,r=s===void 0?"margin":s;rk();var l=x.useMemo(function(){return sk(r)},[r]);return x.createElement(ak,{styles:ok(l,!e,r,t?"":"!important")})},fh=!1;if(typeof window<"u")try{var cc=Object.defineProperty({},"passive",{get:function(){return fh=!0,!0}});window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{fh=!1}var ir=fh?{passive:!1}:!1,lk=function(o){return o.tagName==="TEXTAREA"},Ob=function(o,e){if(!(o instanceof Element))return!1;var t=window.getComputedStyle(o);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!lk(o)&&t[e]==="visible")},ck=function(o){return Ob(o,"overflowY")},uk=function(o){return Ob(o,"overflowX")},rv=function(o,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=Lb(o,s);if(r){var l=Pb(o,s),c=l[1],d=l[2];if(c>d)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},dk=function(o){var e=o.scrollTop,t=o.scrollHeight,s=o.clientHeight;return[e,t,s]},fk=function(o){var e=o.scrollLeft,t=o.scrollWidth,s=o.clientWidth;return[e,t,s]},Lb=function(o,e){return o==="v"?ck(e):uk(e)},Pb=function(o,e){return o==="v"?dk(e):fk(e)},hk=function(o,e){return o==="h"&&e==="rtl"?-1:1},pk=function(o,e,t,s,r){var l=hk(o,window.getComputedStyle(e).direction),c=l*s,d=t.target,h=e.contains(d),p=!1,g=c>0,m=0,v=0;do{if(!d)break;var w=Pb(o,d),C=w[0],S=w[1],R=w[2],E=S-R-l*C;(C||E)&&Lb(o,d)&&(m+=E,v+=C);var T=d.parentNode;d=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!h&&d!==document.body||h&&(e.contains(d)||e===d));return(g&&Math.abs(m)<1||!g&&Math.abs(v)<1)&&(p=!0),p},uc=function(o){return"changedTouches"in o?[o.changedTouches[0].clientX,o.changedTouches[0].clientY]:[0,0]},iv=function(o){return[o.deltaX,o.deltaY]},lv=function(o){return o&&"current"in o?o.current:o},gk=function(o,e){return o[0]===e[0]&&o[1]===e[1]},mk=function(o){return`
  .block-interactivity-`.concat(o,` {pointer-events: none;}
  .allow-interactivity-`).concat(o,` {pointer-events: all;}
`)},yk=0,lr=[];function vk(o){var e=x.useRef([]),t=x.useRef([0,0]),s=x.useRef(),r=x.useState(yk++)[0],l=x.useState(zb)[0],c=x.useRef(o);x.useEffect(function(){c.current=o},[o]),x.useEffect(function(){if(o.inert){document.body.classList.add("block-interactivity-".concat(r));var S=qT([o.lockRef.current],(o.shards||[]).map(lv),!0).filter(Boolean);return S.forEach(function(R){return R.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),S.forEach(function(R){return R.classList.remove("allow-interactivity-".concat(r))})}}},[o.inert,o.lockRef.current,o.shards]);var d=x.useCallback(function(S,R){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!c.current.allowPinchZoom;var E=uc(S),T=t.current,N="deltaX"in S?S.deltaX:T[0]-E[0],A="deltaY"in S?S.deltaY:T[1]-E[1],j,q=S.target,P=Math.abs(N)>Math.abs(A)?"h":"v";if("touches"in S&&P==="h"&&q.type==="range")return!1;var H=rv(P,q);if(!H)return!0;if(H?j=P:(j=P==="v"?"h":"v",H=rv(P,q)),!H)return!1;if(!s.current&&"changedTouches"in S&&(N||A)&&(s.current=j),!j)return!0;var ee=s.current||j;return pk(ee,R,S,ee==="h"?N:A)},[]),h=x.useCallback(function(S){var R=S;if(!(!lr.length||lr[lr.length-1]!==l)){var E="deltaY"in R?iv(R):uc(R),T=e.current.filter(function(j){return j.name===R.type&&(j.target===R.target||R.target===j.shadowParent)&&gk(j.delta,E)})[0];if(T&&T.should){R.cancelable&&R.preventDefault();return}if(!T){var N=(c.current.shards||[]).map(lv).filter(Boolean).filter(function(j){return j.contains(R.target)}),A=N.length>0?d(R,N[0]):!c.current.noIsolation;A&&R.cancelable&&R.preventDefault()}}},[]),p=x.useCallback(function(S,R,E,T){var N={name:S,delta:R,target:E,should:T,shadowParent:bk(E)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(A){return A!==N})},1)},[]),g=x.useCallback(function(S){t.current=uc(S),s.current=void 0},[]),m=x.useCallback(function(S){p(S.type,iv(S),S.target,d(S,o.lockRef.current))},[]),v=x.useCallback(function(S){p(S.type,uc(S),S.target,d(S,o.lockRef.current))},[]);x.useEffect(function(){return lr.push(l),o.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",h,ir),document.addEventListener("touchmove",h,ir),document.addEventListener("touchstart",g,ir),function(){lr=lr.filter(function(S){return S!==l}),document.removeEventListener("wheel",h,ir),document.removeEventListener("touchmove",h,ir),document.removeEventListener("touchstart",g,ir)}},[]);var w=o.removeScrollBar,C=o.inert;return x.createElement(x.Fragment,null,C?x.createElement(l,{styles:mk(r)}):null,w?x.createElement(ik,{noRelative:o.noRelative,gapMode:o.gapMode}):null)}function bk(o){for(var e=null;o!==null;)o instanceof ShadowRoot&&(e=o.host,o=o.host),o=o.parentNode;return e}const xk=FT(_b,vk);var qi=x.forwardRef(function(o,e){return x.createElement(Vc,fs({},o,{ref:e,sideCar:xk}))});qi.classNames=Vc.classNames;var wk=function(o){if(typeof document>"u")return null;var e=Array.isArray(o)?o[0]:o;return e.ownerDocument.body},cr=new WeakMap,dc=new WeakMap,fc={},eh=0,Ib=function(o){return o&&(o.host||Ib(o.parentNode))},Ck=function(o,e){return e.map(function(t){if(o.contains(t))return t;var s=Ib(t);return s&&o.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",o,". Doing nothing"),null)}).filter(function(t){return!!t})},Sk=function(o,e,t,s){var r=Ck(e,Array.isArray(o)?o:[o]);fc[t]||(fc[t]=new WeakMap);var l=fc[t],c=[],d=new Set,h=new Set(r),p=function(m){!m||d.has(m)||(d.add(m),p(m.parentNode))};r.forEach(p);var g=function(m){!m||h.has(m)||Array.prototype.forEach.call(m.children,function(v){if(d.has(v))g(v);else try{var w=v.getAttribute(s),C=w!==null&&w!=="false",S=(cr.get(v)||0)+1,R=(l.get(v)||0)+1;cr.set(v,S),l.set(v,R),c.push(v),S===1&&C&&dc.set(v,!0),R===1&&v.setAttribute(t,"true"),C||v.setAttribute(s,"true")}catch(E){console.error("aria-hidden: cannot operate on ",v,E)}})};return g(e),d.clear(),eh++,function(){c.forEach(function(m){var v=cr.get(m)-1,w=l.get(m)-1;cr.set(m,v),l.set(m,w),v||(dc.has(m)||m.removeAttribute(s),dc.delete(m)),w||m.removeAttribute(t)}),eh--,eh||(cr=new WeakMap,cr=new WeakMap,dc=new WeakMap,fc={})}},Fc=function(o,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(o)?o:[o]),r=wk(o);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),Sk(s,r,t,"aria-hidden")):function(){return null}};function Mk(o){const e=Ek(o),t=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(Nk);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(e,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(e,{...c,ref:r,children:l})});return t.displayName=`${o}.Slot`,t}function Ek(o){const e=x.forwardRef((t,s)=>{const{children:r,...l}=t;if(x.isValidElement(r)){const c=Tk(r),d=Ak(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${o}.SlotClone`,e}var Rk=Symbol("radix.slottable");function Nk(o){return x.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===Rk}function Ak(o,e){const t={...e};for(const s in e){const r=o[s],l=e[s];/^on[A-Z]/.test(s)?r&&l?t[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...l}:s==="className"&&(t[s]=[r,l].filter(Boolean).join(" "))}return{...o,...t}}function Tk(o){let e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}var Yc="Dialog",[qb,Hb]=bn(Yc),[kk,os]=qb(Yc),Ub=o=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:r,onOpenChange:l,modal:c=!0}=o,d=x.useRef(null),h=x.useRef(null),[p,g]=xs({prop:s,defaultProp:r??!1,onChange:l,caller:Yc});return f.jsx(kk,{scope:e,triggerRef:d,contentRef:h,contentId:ns(),titleId:ns(),descriptionId:ns(),open:p,onOpenChange:g,onOpenToggle:x.useCallback(()=>g(m=>!m),[g]),modal:c,children:t})};Ub.displayName=Yc;var Bb="DialogTrigger",$b=x.forwardRef((o,e)=>{const{__scopeDialog:t,...s}=o,r=os(Bb,t),l=De(e,r.triggerRef);return f.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Fh(r.open),...s,ref:l,onClick:ge(o.onClick,r.onOpenToggle)})});$b.displayName=Bb;var Kh="DialogPortal",[jk,Qb]=qb(Kh,{forceMount:void 0}),Gb=o=>{const{__scopeDialog:e,forceMount:t,children:s,container:r}=o,l=os(Kh,e);return f.jsx(jk,{scope:e,forceMount:t,children:x.Children.map(s,c=>f.jsx(rn,{present:t||l.open,children:f.jsx(Ii,{asChild:!0,container:r,children:c})}))})};Gb.displayName=Kh;var jc="DialogOverlay",Kb=x.forwardRef((o,e)=>{const t=Qb(jc,o.__scopeDialog),{forceMount:s=t.forceMount,...r}=o,l=os(jc,o.__scopeDialog);return l.modal?f.jsx(rn,{present:s||l.open,children:f.jsx(_k,{...r,ref:e})}):null});Kb.displayName=jc;var Dk=Mk("DialogOverlay.RemoveScroll"),_k=x.forwardRef((o,e)=>{const{__scopeDialog:t,...s}=o,r=os(jc,t);return f.jsx(qi,{as:Dk,allowPinchZoom:!0,shards:[r.contentRef],children:f.jsx(Ae.div,{"data-state":Fh(r.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),po="DialogContent",Vb=x.forwardRef((o,e)=>{const t=Qb(po,o.__scopeDialog),{forceMount:s=t.forceMount,...r}=o,l=os(po,o.__scopeDialog);return f.jsx(rn,{present:s||l.open,children:l.modal?f.jsx(zk,{...r,ref:e}):f.jsx(Ok,{...r,ref:e})})});Vb.displayName=po;var zk=x.forwardRef((o,e)=>{const t=os(po,o.__scopeDialog),s=x.useRef(null),r=De(e,t.contentRef,s);return x.useEffect(()=>{const l=s.current;if(l)return Fc(l)},[]),f.jsx(Fb,{...o,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(o.onCloseAutoFocus,l=>{l.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:ge(o.onPointerDownOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0;(c.button===2||d)&&l.preventDefault()}),onFocusOutside:ge(o.onFocusOutside,l=>l.preventDefault())})}),Ok=x.forwardRef((o,e)=>{const t=os(po,o.__scopeDialog),s=x.useRef(!1),r=x.useRef(!1);return f.jsx(Fb,{...o,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{o.onCloseAutoFocus?.(l),l.defaultPrevented||(s.current||t.triggerRef.current?.focus(),l.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:l=>{o.onInteractOutside?.(l),l.defaultPrevented||(s.current=!0,l.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const c=l.target;t.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&r.current&&l.preventDefault()}})}),Fb=x.forwardRef((o,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:l,...c}=o,d=os(po,t),h=x.useRef(null),p=De(e,h);return Kc(),f.jsxs(f.Fragment,{children:[f.jsx(Pi,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:l,children:f.jsx(Li,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":Fh(d.open),...c,ref:p,onDismiss:()=>d.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(Pk,{titleId:d.titleId}),f.jsx(qk,{contentRef:h,descriptionId:d.descriptionId})]})]})}),Vh="DialogTitle",Yb=x.forwardRef((o,e)=>{const{__scopeDialog:t,...s}=o,r=os(Vh,t);return f.jsx(Ae.h2,{id:r.titleId,...s,ref:e})});Yb.displayName=Vh;var Xb="DialogDescription",Wb=x.forwardRef((o,e)=>{const{__scopeDialog:t,...s}=o,r=os(Xb,t);return f.jsx(Ae.p,{id:r.descriptionId,...s,ref:e})});Wb.displayName=Xb;var Zb="DialogClose",Jb=x.forwardRef((o,e)=>{const{__scopeDialog:t,...s}=o,r=os(Zb,t);return f.jsx(Ae.button,{type:"button",...s,ref:e,onClick:ge(o.onClick,()=>r.onOpenChange(!1))})});Jb.displayName=Zb;function Fh(o){return o?"open":"closed"}var ex="DialogTitleWarning",[Lk,tx]=FA(ex,{contentName:po,titleName:Vh,docsSlug:"dialog"}),Pk=({titleId:o})=>{const e=tx(ex),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{o&&(document.getElementById(o)||console.error(t))},[t,o]),null},Ik="DialogDescriptionWarning",qk=({contentRef:o,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tx(Ik).contentName}}.`;return x.useEffect(()=>{const r=o.current?.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(s))},[s,o,e]),null},nx=Ub,Hk=$b,sx=Gb,Yh=Kb,Xh=Vb,Wh=Yb,Zh=Wb,Jh=Jb,Uk=Symbol("radix.slottable");function Bk(o){const e=({children:t})=>f.jsx(f.Fragment,{children:t});return e.displayName=`${o}.Slottable`,e.__radixId=Uk,e}var ax="AlertDialog",[$k]=bn(ax,[Hb]),aa=Hb(),ox=o=>{const{__scopeAlertDialog:e,...t}=o,s=aa(e);return f.jsx(nx,{...s,...t,modal:!0})};ox.displayName=ax;var Qk="AlertDialogTrigger",Gk=x.forwardRef((o,e)=>{const{__scopeAlertDialog:t,...s}=o,r=aa(t);return f.jsx(Hk,{...r,...s,ref:e})});Gk.displayName=Qk;var Kk="AlertDialogPortal",rx=o=>{const{__scopeAlertDialog:e,...t}=o,s=aa(e);return f.jsx(sx,{...s,...t})};rx.displayName=Kk;var Vk="AlertDialogOverlay",ix=x.forwardRef((o,e)=>{const{__scopeAlertDialog:t,...s}=o,r=aa(t);return f.jsx(Yh,{...r,...s,ref:e})});ix.displayName=Vk;var hr="AlertDialogContent",[Fk,Yk]=$k(hr),Xk=Bk("AlertDialogContent"),lx=x.forwardRef((o,e)=>{const{__scopeAlertDialog:t,children:s,...r}=o,l=aa(t),c=x.useRef(null),d=De(e,c),h=x.useRef(null);return f.jsx(Lk,{contentName:hr,titleName:cx,docsSlug:"alert-dialog",children:f.jsx(Fk,{scope:t,cancelRef:h,children:f.jsxs(Xh,{role:"alertdialog",...l,...r,ref:d,onOpenAutoFocus:ge(r.onOpenAutoFocus,p=>{p.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[f.jsx(Xk,{children:s}),f.jsx(Zk,{contentRef:c})]})})})});lx.displayName=hr;var cx="AlertDialogTitle",ux=x.forwardRef((o,e)=>{const{__scopeAlertDialog:t,...s}=o,r=aa(t);return f.jsx(Wh,{...r,...s,ref:e})});ux.displayName=cx;var dx="AlertDialogDescription",fx=x.forwardRef((o,e)=>{const{__scopeAlertDialog:t,...s}=o,r=aa(t);return f.jsx(Zh,{...r,...s,ref:e})});fx.displayName=dx;var Wk="AlertDialogAction",hx=x.forwardRef((o,e)=>{const{__scopeAlertDialog:t,...s}=o,r=aa(t);return f.jsx(Jh,{...r,...s,ref:e})});hx.displayName=Wk;var px="AlertDialogCancel",gx=x.forwardRef((o,e)=>{const{__scopeAlertDialog:t,...s}=o,{cancelRef:r}=Yk(px,t),l=aa(t),c=De(e,r);return f.jsx(Jh,{...l,...s,ref:c})});gx.displayName=px;var Zk=({contentRef:o})=>{const e=`\`${hr}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${hr}\` by passing a \`${dx}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${hr}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{document.getElementById(o.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,o]),null},Jk=ox,ej=rx,mx=ix,yx=lx,vx=hx,bx=gx,xx=ux,wx=fx;const Cx=Jk,tj=ej,Sx=x.forwardRef(({className:o,...e},t)=>f.jsx(mx,{className:Ee("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",o),...e,ref:t}));Sx.displayName=mx.displayName;const ep=x.forwardRef(({className:o,...e},t)=>f.jsxs(tj,{children:[f.jsx(Sx,{}),f.jsx(yx,{ref:t,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",o),...e})]}));ep.displayName=yx.displayName;const Mx=({className:o,...e})=>f.jsx("div",{className:Ee("flex flex-col space-y-2 text-center sm:text-left",o),...e});Mx.displayName="AlertDialogHeader";const Ex=({className:o,...e})=>f.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",o),...e});Ex.displayName="AlertDialogFooter";const tp=x.forwardRef(({className:o,...e},t)=>f.jsx(xx,{ref:t,className:Ee("text-lg font-semibold",o),...e}));tp.displayName=xx.displayName;const np=x.forwardRef(({className:o,...e},t)=>f.jsx(wx,{ref:t,className:Ee("text-sm text-muted-foreground",o),...e}));np.displayName=wx.displayName;const sp=x.forwardRef(({className:o,...e},t)=>f.jsx(vx,{ref:t,className:Ee(Oh(),o),...e}));sp.displayName=vx.displayName;const ap=x.forwardRef(({className:o,...e},t)=>f.jsx(bx,{ref:t,className:Ee(Oh({variant:"outline"}),"mt-2 sm:mt-0",o),...e}));ap.displayName=bx.displayName;const op=nx,nj=sx,Rx=x.forwardRef(({className:o,...e},t)=>f.jsx(Yh,{ref:t,className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",o),...e}));Rx.displayName=Yh.displayName;const Xc=x.forwardRef(({className:o,children:e,...t},s)=>f.jsxs(nj,{children:[f.jsx(Rx,{}),f.jsxs(Xh,{ref:s,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",o),...t,children:[e,f.jsxs(Jh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[f.jsx(vs,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Xc.displayName=Xh.displayName;const Wc=({className:o,...e})=>f.jsx("div",{className:Ee("flex flex-col space-y-1.5 text-center sm:text-left",o),...e});Wc.displayName="DialogHeader";const Zc=({className:o,...e})=>f.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",o),...e});Zc.displayName="DialogFooter";const Jc=x.forwardRef(({className:o,...e},t)=>f.jsx(Wh,{ref:t,className:Ee("text-lg font-semibold leading-none tracking-tight",o),...e}));Jc.displayName=Wh.displayName;const eu=x.forwardRef(({className:o,...e},t)=>f.jsx(Zh,{ref:t,className:Ee("text-sm text-muted-foreground",o),...e}));eu.displayName=Zh.displayName;var sj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],aj=sj.reduce((o,e)=>{const t=Dh(`Primitive.${e}`),s=x.forwardRef((r,l)=>{const{asChild:c,...d}=r,h=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(h,{...d,ref:l})});return s.displayName=`Primitive.${e}`,{...o,[e]:s}},{}),oj="Label",Nx=x.forwardRef((o,e)=>f.jsx(aj.label,{...o,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(o.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Nx.displayName=oj;var Ax=Nx;const rj=_h("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),st=x.forwardRef(({className:o,...e},t)=>f.jsx(Ax,{ref:t,className:Ee(rj(),o),...e}));st.displayName=Ax.displayName;function rp({open:o,initialName:e="",onConfirm:t,onCancel:s}){const[r,l]=x.useState(e);x.useEffect(()=>{o&&l(e)},[o,e]);const c=()=>{r.trim()&&t(r.trim())};return f.jsx(op,{open:o,onOpenChange:d=>!d&&s(),children:f.jsxs(Xc,{children:[f.jsxs(Wc,{children:[f.jsx(Jc,{children:e?"Rename Group":"Create Group"}),f.jsx(eu,{children:e?"Enter a new name for the group":"Enter a name for the new group"})]}),f.jsxs("div",{className:"py-4",children:[f.jsx(st,{htmlFor:"group-name",children:"Group Name"}),f.jsx(Tt,{id:"group-name",value:r,onChange:d=>l(d.target.value),onKeyDown:d=>{d.key==="Enter"&&c()},className:"mt-2",autoFocus:!0})]}),f.jsxs(Zc,{children:[f.jsx(Te,{variant:"outline",onClick:s,children:"Cancel"}),f.jsx(Te,{onClick:c,disabled:!r.trim(),children:e?"Save":"Create"})]})]})})}function ij(){const{zoom:o,setZoom:e,diagramName:t,setDiagramName:s,saveDiagram:r,loadDiagramState:l,undo:c,redo:d,selectedNodeId:h,createGroupFromSelection:p,autoGroupByConnections:g,nodes:m,pan:v,setPan:w,viewportWidth:C,viewportHeight:S}=Re(),{canUndo:R,canRedo:E}=Mi(),T=x.useRef(null),[N,A]=x.useState(!1),[j,q]=x.useState(t),[P,H]=x.useState(!1),{showMinimap:ee,toggleMinimap:se,showHeatMapLegend:le,toggleHeatMapLegend:te,showRuler:ae,toggleRuler:ce}=Oi(),ue=()=>e(Math.min(o+.1,2)),z=()=>e(o-.1),D=()=>{const oe=m;if(!oe.length){e(1),w({x:0,y:0});return}const B=100,V=oe.map(Gt=>Gt.position.x),pe=oe.map(Gt=>Gt.position.y),me=oe.map(Gt=>Gt.position.x+140),ye=oe.map(Gt=>Gt.position.y+140),ve=Math.min(...V)-B,Pe=Math.min(...pe)-B,Ue=Math.max(...me)+B,at=Math.max(...ye)+B,We=Ue-ve,jt=at-Pe,de=C||window.innerWidth,He=S||window.innerHeight-56,Be=de/We,yt=He/jt;let pt=Math.min(Be,yt);pt=Math.min(Math.max(pt,.2),2.5);const qt=ve+We/2,Ze=Pe+jt/2,Dt=de/2,vt=He/2,gt=Dt-qt*pt,Yt=vt-Ze*pt;e(pt),w({x:gt,y:Yt})},L=()=>{r(),Fe.success("Diagram saved to browser storage")},Y=()=>{const oe=`${t.replace(/\s+/g,"_")}_${Date.now()}.json`;zN(Re.getState(),oe),Fe.success("Diagram exported as JSON")},he=()=>{T.current?.click()},_=async oe=>{const B=oe.target.files?.[0];if(B){try{const V=await ON(B);if(!V){Fe.error("Failed to import diagram: Invalid file format");return}l({nodes:V.nodes||[],connections:V.connections||[],groups:V.groups||[],zoom:V.zoom||1,pan:V.pan||{x:0,y:0}}),s(V.name),Fe.success(`Diagram "${V.name}" imported successfully`)}catch(V){Fe.error("Failed to import diagram"),ta("Failed to import diagram",V instanceof Error?V:new Error(String(V)))}T.current&&(T.current.value="")}},$=()=>{j.trim()&&(s(j.trim()),Fe.success("Diagram renamed")),A(!1)},X=()=>{const{nodes:oe}=Re.getState();if(oe.filter(V=>V.selected||V.id===h).length===0){Fe.error("Select at least one component to create a group");return}H(!0)},W=oe=>{p(oe),Fe.success(`Group "${oe}" created`),H(!1)},K=()=>{g(),Fe.success("Groups created automatically from connections")};return f.jsxs(f.Fragment,{children:[f.jsx(rp,{open:P,onConfirm:W,onCancel:()=>H(!1)}),f.jsxs("div",{className:"h-14 bg-toolbar-bg border-b border-border flex items-center justify-between px-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{onClick:()=>A(!0),className:"text-lg font-semibold text-foreground hover:text-primary transition-colors cursor-pointer",title:"Click to rename diagram",children:[f.jsx("span",{className:"text-primary",children:"Archi"}),"Phoenix",f.jsxs("span",{className:"text-xs text-secondary-foreground ml-2",children:[" ",t]})]}),f.jsx(vn,{orientation:"vertical",className:"h-6 mx-2"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:c,disabled:!R,title:"Undo (Ctrl/Cmd+Z)",children:f.jsx(AA,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:d,disabled:!E,title:"Redo (Ctrl/Cmd+Shift+Z or Ctrl/Cmd+Y)",children:f.jsx(rA,{className:"h-4 w-4"})})]}),f.jsx(vn,{orientation:"vertical",className:"h-6 mx-2"}),f.jsx(uT,{})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"flex items-center gap-1 bg-secondary/50 rounded-md p-1",children:[f.jsx(Te,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:ue,title:"Zoom In",children:f.jsx(zA,{className:"h-4 w-4"})}),f.jsxs("span",{className:"text-sm font-mono px-2 min-w-[60px] text-center",children:[Math.round(o*100),"%"]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:z,title:"Zoom Out",children:f.jsx(LA,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:D,title:"Fit to View",children:f.jsx(Y2,{className:"h-4 w-4"})})]}),f.jsx(vn,{orientation:"vertical",className:"h-6"}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:L,title:"Save diagram to browser storage (auto-saves on changes)",children:f.jsx(hA,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:Y,title:"Export diagram as JSON file",children:f.jsx(D2,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:he,title:"Import diagram from JSON file",children:f.jsx(kA,{className:"h-4 w-4"})}),f.jsx(vn,{orientation:"vertical",className:"h-6"}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",title:"Create group from selection",onClick:X,disabled:!h,children:f.jsx(ub,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",title:"Auto-group by connections",onClick:K,children:f.jsx(bA,{className:"h-4 w-4"})}),f.jsx(vn,{orientation:"vertical",className:"h-6"}),f.jsx(PA,{}),f.jsx(Te,{variant:ee?"default":"ghost",size:"icon",className:"h-9 w-9",title:ee?"Hide minimap":"Show minimap",onClick:se,children:f.jsx(V2,{className:"h-4 w-4"})}),f.jsx(Te,{variant:le?"default":"ghost",size:"icon",className:"h-9 w-9",title:le?"Hide heat map legend":"Show heat map legend",onClick:te,children:f.jsx(ho,{className:"h-4 w-4"})}),f.jsx(Te,{variant:ae?"default":"ghost",size:"icon",className:"h-9 w-9",title:ae?"Hide ruler":"Show ruler",onClick:ce,children:f.jsx(dA,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",title:"Settings",children:f.jsx(yA,{className:"h-4 w-4"})})]})]}),f.jsx("input",{ref:T,type:"file",accept:".json",onChange:_,className:"hidden","aria-label":"Import diagram from file"}),f.jsx(Cx,{open:N,onOpenChange:A,children:f.jsxs(ep,{children:[f.jsx(tp,{children:"Rename Diagram"}),f.jsx(np,{children:"Enter a new name for your diagram"}),f.jsx("div",{className:"py-4",children:f.jsx(Tt,{value:j,onChange:oe=>q(oe.target.value),placeholder:"Diagram name",onKeyDown:oe=>{oe.key==="Enter"&&$()},autoFocus:!0})}),f.jsxs("div",{className:"flex gap-2 justify-end",children:[f.jsx(ap,{children:"Cancel"}),f.jsx(sp,{onClick:$,children:"Save"})]})]})})]})}function cv(o){const e=lj(o),t=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(uj);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(e,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(e,{...c,ref:r,children:l})});return t.displayName=`${o}.Slot`,t}function lj(o){const e=x.forwardRef((t,s)=>{const{children:r,...l}=t;if(x.isValidElement(r)){const c=fj(r),d=dj(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${o}.SlotClone`,e}var cj=Symbol("radix.slottable");function uj(o){return x.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===cj}function dj(o,e){const t={...e};for(const s in e){const r=o[s],l=e[s];/^on[A-Z]/.test(s)?r&&l?t[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...l}:s==="className"&&(t[s]=[r,l].filter(Boolean).join(" "))}return{...o,...t}}function fj(o){let e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}function tu(o){const e=o+"CollectionProvider",[t,s]=bn(e),[r,l]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=S=>{const{scope:R,children:E}=S,T=Et.useRef(null),N=Et.useRef(new Map).current;return f.jsx(r,{scope:R,itemMap:N,collectionRef:T,children:E})};c.displayName=e;const d=o+"CollectionSlot",h=cv(d),p=Et.forwardRef((S,R)=>{const{scope:E,children:T}=S,N=l(d,E),A=De(R,N.collectionRef);return f.jsx(h,{ref:A,children:T})});p.displayName=d;const g=o+"CollectionItemSlot",m="data-radix-collection-item",v=cv(g),w=Et.forwardRef((S,R)=>{const{scope:E,children:T,...N}=S,A=Et.useRef(null),j=De(R,A),q=l(g,E);return Et.useEffect(()=>(q.itemMap.set(A,{ref:A,...N}),()=>void q.itemMap.delete(A))),f.jsx(v,{[m]:"",ref:j,children:T})});w.displayName=g;function C(S){const R=l(o+"CollectionConsumer",S);return Et.useCallback(()=>{const T=R.collectionRef.current;if(!T)return[];const N=Array.from(T.querySelectorAll(`[${m}]`));return Array.from(R.itemMap.values()).sort((q,P)=>N.indexOf(q.ref.current)-N.indexOf(P.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:c,Slot:p,ItemSlot:w},C,s]}var th="rovingFocusGroup.onEntryFocus",hj={bubbles:!1,cancelable:!0},Hi="RovingFocusGroup",[hh,Tx,pj]=tu(Hi),[gj,nu]=bn(Hi,[pj]),[mj,yj]=gj(Hi),kx=x.forwardRef((o,e)=>f.jsx(hh.Provider,{scope:o.__scopeRovingFocusGroup,children:f.jsx(hh.Slot,{scope:o.__scopeRovingFocusGroup,children:f.jsx(vj,{...o,ref:e})})}));kx.displayName=Hi;var vj=x.forwardRef((o,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:r=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,...m}=o,v=x.useRef(null),w=De(e,v),C=Cr(l),[S,R]=xs({prop:c,defaultProp:d??null,onChange:h,caller:Hi}),[E,T]=x.useState(!1),N=nn(p),A=Tx(t),j=x.useRef(!1),[q,P]=x.useState(0);return x.useEffect(()=>{const H=v.current;if(H)return H.addEventListener(th,N),()=>H.removeEventListener(th,N)},[N]),f.jsx(mj,{scope:t,orientation:s,dir:C,loop:r,currentTabStopId:S,onItemFocus:x.useCallback(H=>R(H),[R]),onItemShiftTab:x.useCallback(()=>T(!0),[]),onFocusableItemAdd:x.useCallback(()=>P(H=>H+1),[]),onFocusableItemRemove:x.useCallback(()=>P(H=>H-1),[]),children:f.jsx(Ae.div,{tabIndex:E||q===0?-1:0,"data-orientation":s,...m,ref:w,style:{outline:"none",...o.style},onMouseDown:ge(o.onMouseDown,()=>{j.current=!0}),onFocus:ge(o.onFocus,H=>{const ee=!j.current;if(H.target===H.currentTarget&&ee&&!E){const se=new CustomEvent(th,hj);if(H.currentTarget.dispatchEvent(se),!se.defaultPrevented){const le=A().filter(z=>z.focusable),te=le.find(z=>z.active),ae=le.find(z=>z.id===S),ue=[te,ae,...le].filter(Boolean).map(z=>z.ref.current);_x(ue,g)}}j.current=!1}),onBlur:ge(o.onBlur,()=>T(!1))})})}),jx="RovingFocusGroupItem",Dx=x.forwardRef((o,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:r=!1,tabStopId:l,children:c,...d}=o,h=ns(),p=l||h,g=yj(jx,t),m=g.currentTabStopId===p,v=Tx(t),{onFocusableItemAdd:w,onFocusableItemRemove:C,currentTabStopId:S}=g;return x.useEffect(()=>{if(s)return w(),()=>C()},[s,w,C]),f.jsx(hh.ItemSlot,{scope:t,id:p,focusable:s,active:r,children:f.jsx(Ae.span,{tabIndex:m?0:-1,"data-orientation":g.orientation,...d,ref:e,onMouseDown:ge(o.onMouseDown,R=>{s?g.onItemFocus(p):R.preventDefault()}),onFocus:ge(o.onFocus,()=>g.onItemFocus(p)),onKeyDown:ge(o.onKeyDown,R=>{if(R.key==="Tab"&&R.shiftKey){g.onItemShiftTab();return}if(R.target!==R.currentTarget)return;const E=wj(R,g.orientation,g.dir);if(E!==void 0){if(R.metaKey||R.ctrlKey||R.altKey||R.shiftKey)return;R.preventDefault();let N=v().filter(A=>A.focusable).map(A=>A.ref.current);if(E==="last")N.reverse();else if(E==="prev"||E==="next"){E==="prev"&&N.reverse();const A=N.indexOf(R.currentTarget);N=g.loop?Cj(N,A+1):N.slice(A+1)}setTimeout(()=>_x(N))}}),children:typeof c=="function"?c({isCurrentTabStop:m,hasTabStop:S!=null}):c})})});Dx.displayName=jx;var bj={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function xj(o,e){return e!=="rtl"?o:o==="ArrowLeft"?"ArrowRight":o==="ArrowRight"?"ArrowLeft":o}function wj(o,e,t){const s=xj(o.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return bj[s]}function _x(o,e=!1){const t=document.activeElement;for(const s of o)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function Cj(o,e){return o.map((t,s)=>o[(e+s)%o.length])}var zx=kx,Ox=Dx,su="Tabs",[Sj]=bn(su,[nu]),Lx=nu(),[Mj,ip]=Sj(su),Px=x.forwardRef((o,e)=>{const{__scopeTabs:t,value:s,onValueChange:r,defaultValue:l,orientation:c="horizontal",dir:d,activationMode:h="automatic",...p}=o,g=Cr(d),[m,v]=xs({prop:s,onChange:r,defaultProp:l??"",caller:su});return f.jsx(Mj,{scope:t,baseId:ns(),value:m,onValueChange:v,orientation:c,dir:g,activationMode:h,children:f.jsx(Ae.div,{dir:g,"data-orientation":c,...p,ref:e})})});Px.displayName=su;var Ix="TabsList",qx=x.forwardRef((o,e)=>{const{__scopeTabs:t,loop:s=!0,...r}=o,l=ip(Ix,t),c=Lx(t);return f.jsx(zx,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:s,children:f.jsx(Ae.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:e})})});qx.displayName=Ix;var Hx="TabsTrigger",Ux=x.forwardRef((o,e)=>{const{__scopeTabs:t,value:s,disabled:r=!1,...l}=o,c=ip(Hx,t),d=Lx(t),h=Qx(c.baseId,s),p=Gx(c.baseId,s),g=s===c.value;return f.jsx(Ox,{asChild:!0,...d,focusable:!r,active:g,children:f.jsx(Ae.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":p,"data-state":g?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:h,...l,ref:e,onMouseDown:ge(o.onMouseDown,m=>{!r&&m.button===0&&m.ctrlKey===!1?c.onValueChange(s):m.preventDefault()}),onKeyDown:ge(o.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&c.onValueChange(s)}),onFocus:ge(o.onFocus,()=>{const m=c.activationMode!=="manual";!g&&!r&&m&&c.onValueChange(s)})})})});Ux.displayName=Hx;var Bx="TabsContent",$x=x.forwardRef((o,e)=>{const{__scopeTabs:t,value:s,forceMount:r,children:l,...c}=o,d=ip(Bx,t),h=Qx(d.baseId,s),p=Gx(d.baseId,s),g=s===d.value,m=x.useRef(g);return x.useEffect(()=>{const v=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(v)},[]),f.jsx(rn,{present:r||g,children:({present:v})=>f.jsx(Ae.div,{"data-state":g?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:p,tabIndex:0,...c,ref:e,style:{...o.style,animationDuration:m.current?"0s":void 0},children:v&&l})})});$x.displayName=Bx;function Qx(o,e){return`${o}-trigger-${e}`}function Gx(o,e){return`${o}-content-${e}`}var Ej=Px,Kx=qx,Vx=Ux,Fx=$x;const lp=Ej,au=x.forwardRef(({className:o,...e},t)=>f.jsx(Kx,{ref:t,className:Ee("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",o),...e}));au.displayName=Kx.displayName;const hs=x.forwardRef(({className:o,...e},t)=>f.jsx(Vx,{ref:t,className:Ee("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",o),...e}));hs.displayName=Vx.displayName;const _a=x.forwardRef(({className:o,...e},t)=>f.jsx(Fx,{ref:t,className:Ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",o),...e}));_a.displayName=Fx.displayName;const Rj=["top","right","bottom","left"],Oa=Math.min,Nn=Math.max,Dc=Math.round,hc=Math.floor,bs=o=>({x:o,y:o}),Nj={left:"right",right:"left",bottom:"top",top:"bottom"},Aj={start:"end",end:"start"};function ph(o,e,t){return Nn(o,Oa(e,t))}function na(o,e){return typeof o=="function"?o(e):o}function sa(o){return o.split("-")[0]}function Sr(o){return o.split("-")[1]}function cp(o){return o==="x"?"y":"x"}function up(o){return o==="y"?"height":"width"}const Tj=new Set(["top","bottom"]);function gs(o){return Tj.has(sa(o))?"y":"x"}function dp(o){return cp(gs(o))}function kj(o,e,t){t===void 0&&(t=!1);const s=Sr(o),r=dp(o),l=up(r);let c=r==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(c=_c(c)),[c,_c(c)]}function jj(o){const e=_c(o);return[gh(o),e,gh(e)]}function gh(o){return o.replace(/start|end/g,e=>Aj[e])}const uv=["left","right"],dv=["right","left"],Dj=["top","bottom"],_j=["bottom","top"];function zj(o,e,t){switch(o){case"top":case"bottom":return t?e?dv:uv:e?uv:dv;case"left":case"right":return e?Dj:_j;default:return[]}}function Oj(o,e,t,s){const r=Sr(o);let l=zj(sa(o),t==="start",s);return r&&(l=l.map(c=>c+"-"+r),e&&(l=l.concat(l.map(gh)))),l}function _c(o){return o.replace(/left|right|bottom|top/g,e=>Nj[e])}function Lj(o){return{top:0,right:0,bottom:0,left:0,...o}}function Yx(o){return typeof o!="number"?Lj(o):{top:o,right:o,bottom:o,left:o}}function zc(o){const{x:e,y:t,width:s,height:r}=o;return{width:s,height:r,top:t,left:e,right:e+s,bottom:t+r,x:e,y:t}}function fv(o,e,t){let{reference:s,floating:r}=o;const l=gs(e),c=dp(e),d=up(c),h=sa(e),p=l==="y",g=s.x+s.width/2-r.width/2,m=s.y+s.height/2-r.height/2,v=s[d]/2-r[d]/2;let w;switch(h){case"top":w={x:g,y:s.y-r.height};break;case"bottom":w={x:g,y:s.y+s.height};break;case"right":w={x:s.x+s.width,y:m};break;case"left":w={x:s.x-r.width,y:m};break;default:w={x:s.x,y:s.y}}switch(Sr(e)){case"start":w[c]-=v*(t&&p?-1:1);break;case"end":w[c]+=v*(t&&p?-1:1);break}return w}const Pj=async(o,e,t)=>{const{placement:s="bottom",strategy:r="absolute",middleware:l=[],platform:c}=t,d=l.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let p=await c.getElementRects({reference:o,floating:e,strategy:r}),{x:g,y:m}=fv(p,s,h),v=s,w={},C=0;for(let S=0;S<d.length;S++){const{name:R,fn:E}=d[S],{x:T,y:N,data:A,reset:j}=await E({x:g,y:m,initialPlacement:s,placement:v,strategy:r,middlewareData:w,rects:p,platform:c,elements:{reference:o,floating:e}});g=T??g,m=N??m,w={...w,[R]:{...w[R],...A}},j&&C<=50&&(C++,typeof j=="object"&&(j.placement&&(v=j.placement),j.rects&&(p=j.rects===!0?await c.getElementRects({reference:o,floating:e,strategy:r}):j.rects),{x:g,y:m}=fv(p,v,h)),S=-1)}return{x:g,y:m,placement:v,strategy:r,middlewareData:w}};async function Ti(o,e){var t;e===void 0&&(e={});const{x:s,y:r,platform:l,rects:c,elements:d,strategy:h}=o,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:m="floating",altBoundary:v=!1,padding:w=0}=na(e,o),C=Yx(w),R=d[v?m==="floating"?"reference":"floating":m],E=zc(await l.getClippingRect({element:(t=await(l.isElement==null?void 0:l.isElement(R)))==null||t?R:R.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:p,rootBoundary:g,strategy:h})),T=m==="floating"?{x:s,y:r,width:c.floating.width,height:c.floating.height}:c.reference,N=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),A=await(l.isElement==null?void 0:l.isElement(N))?await(l.getScale==null?void 0:l.getScale(N))||{x:1,y:1}:{x:1,y:1},j=zc(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:T,offsetParent:N,strategy:h}):T);return{top:(E.top-j.top+C.top)/A.y,bottom:(j.bottom-E.bottom+C.bottom)/A.y,left:(E.left-j.left+C.left)/A.x,right:(j.right-E.right+C.right)/A.x}}const Ij=o=>({name:"arrow",options:o,async fn(e){const{x:t,y:s,placement:r,rects:l,platform:c,elements:d,middlewareData:h}=e,{element:p,padding:g=0}=na(o,e)||{};if(p==null)return{};const m=Yx(g),v={x:t,y:s},w=dp(r),C=up(w),S=await c.getDimensions(p),R=w==="y",E=R?"top":"left",T=R?"bottom":"right",N=R?"clientHeight":"clientWidth",A=l.reference[C]+l.reference[w]-v[w]-l.floating[C],j=v[w]-l.reference[w],q=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let P=q?q[N]:0;(!P||!await(c.isElement==null?void 0:c.isElement(q)))&&(P=d.floating[N]||l.floating[C]);const H=A/2-j/2,ee=P/2-S[C]/2-1,se=Oa(m[E],ee),le=Oa(m[T],ee),te=se,ae=P-S[C]-le,ce=P/2-S[C]/2+H,ue=ph(te,ce,ae),z=!h.arrow&&Sr(r)!=null&&ce!==ue&&l.reference[C]/2-(ce<te?se:le)-S[C]/2<0,D=z?ce<te?ce-te:ce-ae:0;return{[w]:v[w]+D,data:{[w]:ue,centerOffset:ce-ue-D,...z&&{alignmentOffset:D}},reset:z}}}),qj=function(o){return o===void 0&&(o={}),{name:"flip",options:o,async fn(e){var t,s;const{placement:r,middlewareData:l,rects:c,initialPlacement:d,platform:h,elements:p}=e,{mainAxis:g=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:S=!0,...R}=na(o,e);if((t=l.arrow)!=null&&t.alignmentOffset)return{};const E=sa(r),T=gs(d),N=sa(d)===d,A=await(h.isRTL==null?void 0:h.isRTL(p.floating)),j=v||(N||!S?[_c(d)]:jj(d)),q=C!=="none";!v&&q&&j.push(...Oj(d,S,C,A));const P=[d,...j],H=await Ti(e,R),ee=[];let se=((s=l.flip)==null?void 0:s.overflows)||[];if(g&&ee.push(H[E]),m){const ce=kj(r,c,A);ee.push(H[ce[0]],H[ce[1]])}if(se=[...se,{placement:r,overflows:ee}],!ee.every(ce=>ce<=0)){var le,te;const ce=(((le=l.flip)==null?void 0:le.index)||0)+1,ue=P[ce];if(ue&&(!(m==="alignment"?T!==gs(ue):!1)||se.every(L=>gs(L.placement)===T?L.overflows[0]>0:!0)))return{data:{index:ce,overflows:se},reset:{placement:ue}};let z=(te=se.filter(D=>D.overflows[0]<=0).sort((D,L)=>D.overflows[1]-L.overflows[1])[0])==null?void 0:te.placement;if(!z)switch(w){case"bestFit":{var ae;const D=(ae=se.filter(L=>{if(q){const Y=gs(L.placement);return Y===T||Y==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(Y=>Y>0).reduce((Y,he)=>Y+he,0)]).sort((L,Y)=>L[1]-Y[1])[0])==null?void 0:ae[0];D&&(z=D);break}case"initialPlacement":z=d;break}if(r!==z)return{reset:{placement:z}}}return{}}}};function hv(o,e){return{top:o.top-e.height,right:o.right-e.width,bottom:o.bottom-e.height,left:o.left-e.width}}function pv(o){return Rj.some(e=>o[e]>=0)}const Hj=function(o){return o===void 0&&(o={}),{name:"hide",options:o,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...r}=na(o,e);switch(s){case"referenceHidden":{const l=await Ti(e,{...r,elementContext:"reference"}),c=hv(l,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:pv(c)}}}case"escaped":{const l=await Ti(e,{...r,altBoundary:!0}),c=hv(l,t.floating);return{data:{escapedOffsets:c,escaped:pv(c)}}}default:return{}}}}},Xx=new Set(["left","top"]);async function Uj(o,e){const{placement:t,platform:s,elements:r}=o,l=await(s.isRTL==null?void 0:s.isRTL(r.floating)),c=sa(t),d=Sr(t),h=gs(t)==="y",p=Xx.has(c)?-1:1,g=l&&h?-1:1,m=na(e,o);let{mainAxis:v,crossAxis:w,alignmentAxis:C}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return d&&typeof C=="number"&&(w=d==="end"?C*-1:C),h?{x:w*g,y:v*p}:{x:v*p,y:w*g}}const Bj=function(o){return o===void 0&&(o=0),{name:"offset",options:o,async fn(e){var t,s;const{x:r,y:l,placement:c,middlewareData:d}=e,h=await Uj(e,o);return c===((t=d.offset)==null?void 0:t.placement)&&(s=d.arrow)!=null&&s.alignmentOffset?{}:{x:r+h.x,y:l+h.y,data:{...h,placement:c}}}}},$j=function(o){return o===void 0&&(o={}),{name:"shift",options:o,async fn(e){const{x:t,y:s,placement:r}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:d={fn:R=>{let{x:E,y:T}=R;return{x:E,y:T}}},...h}=na(o,e),p={x:t,y:s},g=await Ti(e,h),m=gs(sa(r)),v=cp(m);let w=p[v],C=p[m];if(l){const R=v==="y"?"top":"left",E=v==="y"?"bottom":"right",T=w+g[R],N=w-g[E];w=ph(T,w,N)}if(c){const R=m==="y"?"top":"left",E=m==="y"?"bottom":"right",T=C+g[R],N=C-g[E];C=ph(T,C,N)}const S=d.fn({...e,[v]:w,[m]:C});return{...S,data:{x:S.x-t,y:S.y-s,enabled:{[v]:l,[m]:c}}}}}},Qj=function(o){return o===void 0&&(o={}),{options:o,fn(e){const{x:t,y:s,placement:r,rects:l,middlewareData:c}=e,{offset:d=0,mainAxis:h=!0,crossAxis:p=!0}=na(o,e),g={x:t,y:s},m=gs(r),v=cp(m);let w=g[v],C=g[m];const S=na(d,e),R=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(h){const N=v==="y"?"height":"width",A=l.reference[v]-l.floating[N]+R.mainAxis,j=l.reference[v]+l.reference[N]-R.mainAxis;w<A?w=A:w>j&&(w=j)}if(p){var E,T;const N=v==="y"?"width":"height",A=Xx.has(sa(r)),j=l.reference[m]-l.floating[N]+(A&&((E=c.offset)==null?void 0:E[m])||0)+(A?0:R.crossAxis),q=l.reference[m]+l.reference[N]+(A?0:((T=c.offset)==null?void 0:T[m])||0)-(A?R.crossAxis:0);C<j?C=j:C>q&&(C=q)}return{[v]:w,[m]:C}}}},Gj=function(o){return o===void 0&&(o={}),{name:"size",options:o,async fn(e){var t,s;const{placement:r,rects:l,platform:c,elements:d}=e,{apply:h=()=>{},...p}=na(o,e),g=await Ti(e,p),m=sa(r),v=Sr(r),w=gs(r)==="y",{width:C,height:S}=l.floating;let R,E;m==="top"||m==="bottom"?(R=m,E=v===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(E=m,R=v==="end"?"top":"bottom");const T=S-g.top-g.bottom,N=C-g.left-g.right,A=Oa(S-g[R],T),j=Oa(C-g[E],N),q=!e.middlewareData.shift;let P=A,H=j;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(H=N),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(P=T),q&&!v){const se=Nn(g.left,0),le=Nn(g.right,0),te=Nn(g.top,0),ae=Nn(g.bottom,0);w?H=C-2*(se!==0||le!==0?se+le:Nn(g.left,g.right)):P=S-2*(te!==0||ae!==0?te+ae:Nn(g.top,g.bottom))}await h({...e,availableWidth:H,availableHeight:P});const ee=await c.getDimensions(d.floating);return C!==ee.width||S!==ee.height?{reset:{rects:!0}}:{}}}};function ou(){return typeof window<"u"}function Mr(o){return Wx(o)?(o.nodeName||"").toLowerCase():"#document"}function An(o){var e;return(o==null||(e=o.ownerDocument)==null?void 0:e.defaultView)||window}function Es(o){var e;return(e=(Wx(o)?o.ownerDocument:o.document)||window.document)==null?void 0:e.documentElement}function Wx(o){return ou()?o instanceof Node||o instanceof An(o).Node:!1}function ss(o){return ou()?o instanceof Element||o instanceof An(o).Element:!1}function ws(o){return ou()?o instanceof HTMLElement||o instanceof An(o).HTMLElement:!1}function gv(o){return!ou()||typeof ShadowRoot>"u"?!1:o instanceof ShadowRoot||o instanceof An(o).ShadowRoot}const Kj=new Set(["inline","contents"]);function Ui(o){const{overflow:e,overflowX:t,overflowY:s,display:r}=as(o);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!Kj.has(r)}const Vj=new Set(["table","td","th"]);function Fj(o){return Vj.has(Mr(o))}const Yj=[":popover-open",":modal"];function ru(o){return Yj.some(e=>{try{return o.matches(e)}catch{return!1}})}const Xj=["transform","translate","scale","rotate","perspective"],Wj=["transform","translate","scale","rotate","perspective","filter"],Zj=["paint","layout","strict","content"];function fp(o){const e=hp(),t=ss(o)?as(o):o;return Xj.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||Wj.some(s=>(t.willChange||"").includes(s))||Zj.some(s=>(t.contain||"").includes(s))}function Jj(o){let e=La(o);for(;ws(e)&&!yr(e);){if(fp(e))return e;if(ru(e))return null;e=La(e)}return null}function hp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const eD=new Set(["html","body","#document"]);function yr(o){return eD.has(Mr(o))}function as(o){return An(o).getComputedStyle(o)}function iu(o){return ss(o)?{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}:{scrollLeft:o.scrollX,scrollTop:o.scrollY}}function La(o){if(Mr(o)==="html")return o;const e=o.assignedSlot||o.parentNode||gv(o)&&o.host||Es(o);return gv(e)?e.host:e}function Zx(o){const e=La(o);return yr(e)?o.ownerDocument?o.ownerDocument.body:o.body:ws(e)&&Ui(e)?e:Zx(e)}function ki(o,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=Zx(o),l=r===((s=o.ownerDocument)==null?void 0:s.body),c=An(r);if(l){const d=mh(c);return e.concat(c,c.visualViewport||[],Ui(r)?r:[],d&&t?ki(d):[])}return e.concat(r,ki(r,[],t))}function mh(o){return o.parent&&Object.getPrototypeOf(o.parent)?o.frameElement:null}function Jx(o){const e=as(o);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=ws(o),l=r?o.offsetWidth:t,c=r?o.offsetHeight:s,d=Dc(t)!==l||Dc(s)!==c;return d&&(t=l,s=c),{width:t,height:s,$:d}}function pp(o){return ss(o)?o:o.contextElement}function pr(o){const e=pp(o);if(!ws(e))return bs(1);const t=e.getBoundingClientRect(),{width:s,height:r,$:l}=Jx(e);let c=(l?Dc(t.width):t.width)/s,d=(l?Dc(t.height):t.height)/r;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const tD=bs(0);function ew(o){const e=An(o);return!hp()||!e.visualViewport?tD:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function nD(o,e,t){return e===void 0&&(e=!1),!t||e&&t!==An(o)?!1:e}function go(o,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=o.getBoundingClientRect(),l=pp(o);let c=bs(1);e&&(s?ss(s)&&(c=pr(s)):c=pr(o));const d=nD(l,t,s)?ew(l):bs(0);let h=(r.left+d.x)/c.x,p=(r.top+d.y)/c.y,g=r.width/c.x,m=r.height/c.y;if(l){const v=An(l),w=s&&ss(s)?An(s):s;let C=v,S=mh(C);for(;S&&s&&w!==C;){const R=pr(S),E=S.getBoundingClientRect(),T=as(S),N=E.left+(S.clientLeft+parseFloat(T.paddingLeft))*R.x,A=E.top+(S.clientTop+parseFloat(T.paddingTop))*R.y;h*=R.x,p*=R.y,g*=R.x,m*=R.y,h+=N,p+=A,C=An(S),S=mh(C)}}return zc({width:g,height:m,x:h,y:p})}function lu(o,e){const t=iu(o).scrollLeft;return e?e.left+t:go(Es(o)).left+t}function tw(o,e){const t=o.getBoundingClientRect(),s=t.left+e.scrollLeft-lu(o,t),r=t.top+e.scrollTop;return{x:s,y:r}}function sD(o){let{elements:e,rect:t,offsetParent:s,strategy:r}=o;const l=r==="fixed",c=Es(s),d=e?ru(e.floating):!1;if(s===c||d&&l)return t;let h={scrollLeft:0,scrollTop:0},p=bs(1);const g=bs(0),m=ws(s);if((m||!m&&!l)&&((Mr(s)!=="body"||Ui(c))&&(h=iu(s)),ws(s))){const w=go(s);p=pr(s),g.x=w.x+s.clientLeft,g.y=w.y+s.clientTop}const v=c&&!m&&!l?tw(c,h):bs(0);return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-h.scrollLeft*p.x+g.x+v.x,y:t.y*p.y-h.scrollTop*p.y+g.y+v.y}}function aD(o){return Array.from(o.getClientRects())}function oD(o){const e=Es(o),t=iu(o),s=o.ownerDocument.body,r=Nn(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),l=Nn(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let c=-t.scrollLeft+lu(o);const d=-t.scrollTop;return as(s).direction==="rtl"&&(c+=Nn(e.clientWidth,s.clientWidth)-r),{width:r,height:l,x:c,y:d}}const mv=25;function rD(o,e){const t=An(o),s=Es(o),r=t.visualViewport;let l=s.clientWidth,c=s.clientHeight,d=0,h=0;if(r){l=r.width,c=r.height;const g=hp();(!g||g&&e==="fixed")&&(d=r.offsetLeft,h=r.offsetTop)}const p=lu(s);if(p<=0){const g=s.ownerDocument,m=g.body,v=getComputedStyle(m),w=g.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,C=Math.abs(s.clientWidth-m.clientWidth-w);C<=mv&&(l-=C)}else p<=mv&&(l+=p);return{width:l,height:c,x:d,y:h}}const iD=new Set(["absolute","fixed"]);function lD(o,e){const t=go(o,!0,e==="fixed"),s=t.top+o.clientTop,r=t.left+o.clientLeft,l=ws(o)?pr(o):bs(1),c=o.clientWidth*l.x,d=o.clientHeight*l.y,h=r*l.x,p=s*l.y;return{width:c,height:d,x:h,y:p}}function yv(o,e,t){let s;if(e==="viewport")s=rD(o,t);else if(e==="document")s=oD(Es(o));else if(ss(e))s=lD(e,t);else{const r=ew(o);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return zc(s)}function nw(o,e){const t=La(o);return t===e||!ss(t)||yr(t)?!1:as(t).position==="fixed"||nw(t,e)}function cD(o,e){const t=e.get(o);if(t)return t;let s=ki(o,[],!1).filter(d=>ss(d)&&Mr(d)!=="body"),r=null;const l=as(o).position==="fixed";let c=l?La(o):o;for(;ss(c)&&!yr(c);){const d=as(c),h=fp(c);!h&&d.position==="fixed"&&(r=null),(l?!h&&!r:!h&&d.position==="static"&&!!r&&iD.has(r.position)||Ui(c)&&!h&&nw(o,c))?s=s.filter(g=>g!==c):r=d,c=La(c)}return e.set(o,s),s}function uD(o){let{element:e,boundary:t,rootBoundary:s,strategy:r}=o;const c=[...t==="clippingAncestors"?ru(e)?[]:cD(e,this._c):[].concat(t),s],d=c[0],h=c.reduce((p,g)=>{const m=yv(e,g,r);return p.top=Nn(m.top,p.top),p.right=Oa(m.right,p.right),p.bottom=Oa(m.bottom,p.bottom),p.left=Nn(m.left,p.left),p},yv(e,d,r));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function dD(o){const{width:e,height:t}=Jx(o);return{width:e,height:t}}function fD(o,e,t){const s=ws(e),r=Es(e),l=t==="fixed",c=go(o,!0,l,e);let d={scrollLeft:0,scrollTop:0};const h=bs(0);function p(){h.x=lu(r)}if(s||!s&&!l)if((Mr(e)!=="body"||Ui(r))&&(d=iu(e)),s){const w=go(e,!0,l,e);h.x=w.x+e.clientLeft,h.y=w.y+e.clientTop}else r&&p();l&&!s&&r&&p();const g=r&&!s&&!l?tw(r,d):bs(0),m=c.left+d.scrollLeft-h.x-g.x,v=c.top+d.scrollTop-h.y-g.y;return{x:m,y:v,width:c.width,height:c.height}}function nh(o){return as(o).position==="static"}function vv(o,e){if(!ws(o)||as(o).position==="fixed")return null;if(e)return e(o);let t=o.offsetParent;return Es(o)===t&&(t=t.ownerDocument.body),t}function sw(o,e){const t=An(o);if(ru(o))return t;if(!ws(o)){let r=La(o);for(;r&&!yr(r);){if(ss(r)&&!nh(r))return r;r=La(r)}return t}let s=vv(o,e);for(;s&&Fj(s)&&nh(s);)s=vv(s,e);return s&&yr(s)&&nh(s)&&!fp(s)?t:s||Jj(o)||t}const hD=async function(o){const e=this.getOffsetParent||sw,t=this.getDimensions,s=await t(o.floating);return{reference:fD(o.reference,await e(o.floating),o.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function pD(o){return as(o).direction==="rtl"}const gD={convertOffsetParentRelativeRectToViewportRelativeRect:sD,getDocumentElement:Es,getClippingRect:uD,getOffsetParent:sw,getElementRects:hD,getClientRects:aD,getDimensions:dD,getScale:pr,isElement:ss,isRTL:pD};function aw(o,e){return o.x===e.x&&o.y===e.y&&o.width===e.width&&o.height===e.height}function mD(o,e){let t=null,s;const r=Es(o);function l(){var d;clearTimeout(s),(d=t)==null||d.disconnect(),t=null}function c(d,h){d===void 0&&(d=!1),h===void 0&&(h=1),l();const p=o.getBoundingClientRect(),{left:g,top:m,width:v,height:w}=p;if(d||e(),!v||!w)return;const C=hc(m),S=hc(r.clientWidth-(g+v)),R=hc(r.clientHeight-(m+w)),E=hc(g),N={rootMargin:-C+"px "+-S+"px "+-R+"px "+-E+"px",threshold:Nn(0,Oa(1,h))||1};let A=!0;function j(q){const P=q[0].intersectionRatio;if(P!==h){if(!A)return c();P?c(!1,P):s=setTimeout(()=>{c(!1,1e-7)},1e3)}P===1&&!aw(p,o.getBoundingClientRect())&&c(),A=!1}try{t=new IntersectionObserver(j,{...N,root:r.ownerDocument})}catch{t=new IntersectionObserver(j,N)}t.observe(o)}return c(!0),l}function yD(o,e,t,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:h=!1}=s,p=pp(o),g=r||l?[...p?ki(p):[],...ki(e)]:[];g.forEach(E=>{r&&E.addEventListener("scroll",t,{passive:!0}),l&&E.addEventListener("resize",t)});const m=p&&d?mD(p,t):null;let v=-1,w=null;c&&(w=new ResizeObserver(E=>{let[T]=E;T&&T.target===p&&w&&(w.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var N;(N=w)==null||N.observe(e)})),t()}),p&&!h&&w.observe(p),w.observe(e));let C,S=h?go(o):null;h&&R();function R(){const E=go(o);S&&!aw(S,E)&&t(),S=E,C=requestAnimationFrame(R)}return t(),()=>{var E;g.forEach(T=>{r&&T.removeEventListener("scroll",t),l&&T.removeEventListener("resize",t)}),m?.(),(E=w)==null||E.disconnect(),w=null,h&&cancelAnimationFrame(C)}}const vD=Bj,bD=$j,xD=qj,wD=Gj,CD=Hj,bv=Ij,SD=Qj,MD=(o,e,t)=>{const s=new Map,r={platform:gD,...t},l={...r.platform,_c:s};return Pj(o,e,{...r,platform:l})};var ED=typeof document<"u",RD=function(){},Cc=ED?x.useLayoutEffect:RD;function Oc(o,e){if(o===e)return!0;if(typeof o!=typeof e)return!1;if(typeof o=="function"&&o.toString()===e.toString())return!0;let t,s,r;if(o&&e&&typeof o=="object"){if(Array.isArray(o)){if(t=o.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!Oc(o[s],e[s]))return!1;return!0}if(r=Object.keys(o),t=r.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=t;s--!==0;){const l=r[s];if(!(l==="_owner"&&o.$$typeof)&&!Oc(o[l],e[l]))return!1}return!0}return o!==o&&e!==e}function ow(o){return typeof window>"u"?1:(o.ownerDocument.defaultView||window).devicePixelRatio||1}function xv(o,e){const t=ow(o);return Math.round(e*t)/t}function sh(o){const e=x.useRef(o);return Cc(()=>{e.current=o}),e}function ND(o){o===void 0&&(o={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:r,elements:{reference:l,floating:c}={},transform:d=!0,whileElementsMounted:h,open:p}=o,[g,m]=x.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,w]=x.useState(s);Oc(v,s)||w(s);const[C,S]=x.useState(null),[R,E]=x.useState(null),T=x.useCallback(L=>{L!==q.current&&(q.current=L,S(L))},[]),N=x.useCallback(L=>{L!==P.current&&(P.current=L,E(L))},[]),A=l||C,j=c||R,q=x.useRef(null),P=x.useRef(null),H=x.useRef(g),ee=h!=null,se=sh(h),le=sh(r),te=sh(p),ae=x.useCallback(()=>{if(!q.current||!P.current)return;const L={placement:e,strategy:t,middleware:v};le.current&&(L.platform=le.current),MD(q.current,P.current,L).then(Y=>{const he={...Y,isPositioned:te.current!==!1};ce.current&&!Oc(H.current,he)&&(H.current=he,zi.flushSync(()=>{m(he)}))})},[v,e,t,le,te]);Cc(()=>{p===!1&&H.current.isPositioned&&(H.current.isPositioned=!1,m(L=>({...L,isPositioned:!1})))},[p]);const ce=x.useRef(!1);Cc(()=>(ce.current=!0,()=>{ce.current=!1}),[]),Cc(()=>{if(A&&(q.current=A),j&&(P.current=j),A&&j){if(se.current)return se.current(A,j,ae);ae()}},[A,j,ae,se,ee]);const ue=x.useMemo(()=>({reference:q,floating:P,setReference:T,setFloating:N}),[T,N]),z=x.useMemo(()=>({reference:A,floating:j}),[A,j]),D=x.useMemo(()=>{const L={position:t,left:0,top:0};if(!z.floating)return L;const Y=xv(z.floating,g.x),he=xv(z.floating,g.y);return d?{...L,transform:"translate("+Y+"px, "+he+"px)",...ow(z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Y,top:he}},[t,d,z.floating,g.x,g.y]);return x.useMemo(()=>({...g,update:ae,refs:ue,elements:z,floatingStyles:D}),[g,ae,ue,z,D])}const AD=o=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:o,fn(t){const{element:s,padding:r}=typeof o=="function"?o(t):o;return s&&e(s)?s.current!=null?bv({element:s.current,padding:r}).fn(t):{}:s?bv({element:s,padding:r}).fn(t):{}}}},TD=(o,e)=>({...vD(o),options:[o,e]}),kD=(o,e)=>({...bD(o),options:[o,e]}),jD=(o,e)=>({...SD(o),options:[o,e]}),DD=(o,e)=>({...xD(o),options:[o,e]}),_D=(o,e)=>({...wD(o),options:[o,e]}),zD=(o,e)=>({...CD(o),options:[o,e]}),OD=(o,e)=>({...AD(o),options:[o,e]});var LD="Arrow",rw=x.forwardRef((o,e)=>{const{children:t,width:s=10,height:r=5,...l}=o;return f.jsx(Ae.svg,{...l,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:o.asChild?t:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});rw.displayName=LD;var PD=rw;function cu(o){const[e,t]=x.useState(void 0);return sn(()=>{if(o){t({width:o.offsetWidth,height:o.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const l=r[0];let c,d;if("borderBoxSize"in l){const h=l.borderBoxSize,p=Array.isArray(h)?h[0]:h;c=p.inlineSize,d=p.blockSize}else c=o.offsetWidth,d=o.offsetHeight;t({width:c,height:d})});return s.observe(o,{box:"border-box"}),()=>s.unobserve(o)}else t(void 0)},[o]),e}var gp="Popper",[iw,Er]=bn(gp),[ID,lw]=iw(gp),cw=o=>{const{__scopePopper:e,children:t}=o,[s,r]=x.useState(null);return f.jsx(ID,{scope:e,anchor:s,onAnchorChange:r,children:t})};cw.displayName=gp;var uw="PopperAnchor",dw=x.forwardRef((o,e)=>{const{__scopePopper:t,virtualRef:s,...r}=o,l=lw(uw,t),c=x.useRef(null),d=De(e,c),h=x.useRef(null);return x.useEffect(()=>{const p=h.current;h.current=s?.current||c.current,p!==h.current&&l.onAnchorChange(h.current)}),s?null:f.jsx(Ae.div,{...r,ref:d})});dw.displayName=uw;var mp="PopperContent",[qD,HD]=iw(mp),fw=x.forwardRef((o,e)=>{const{__scopePopper:t,side:s="bottom",sideOffset:r=0,align:l="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:w="optimized",onPlaced:C,...S}=o,R=lw(mp,t),[E,T]=x.useState(null),N=De(e,B=>T(B)),[A,j]=x.useState(null),q=cu(A),P=q?.width??0,H=q?.height??0,ee=s+(l!=="center"?"-"+l:""),se=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},le=Array.isArray(p)?p:[p],te=le.length>0,ae={padding:se,boundary:le.filter(BD),altBoundary:te},{refs:ce,floatingStyles:ue,placement:z,isPositioned:D,middlewareData:L}=ND({strategy:"fixed",placement:ee,whileElementsMounted:(...B)=>yD(...B,{animationFrame:w==="always"}),elements:{reference:R.anchor},middleware:[TD({mainAxis:r+H,alignmentAxis:c}),h&&kD({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?jD():void 0,...ae}),h&&DD({...ae}),_D({...ae,apply:({elements:B,rects:V,availableWidth:pe,availableHeight:me})=>{const{width:ye,height:ve}=V.reference,Pe=B.floating.style;Pe.setProperty("--radix-popper-available-width",`${pe}px`),Pe.setProperty("--radix-popper-available-height",`${me}px`),Pe.setProperty("--radix-popper-anchor-width",`${ye}px`),Pe.setProperty("--radix-popper-anchor-height",`${ve}px`)}}),A&&OD({element:A,padding:d}),$D({arrowWidth:P,arrowHeight:H}),v&&zD({strategy:"referenceHidden",...ae})]}),[Y,he]=gw(z),_=nn(C);sn(()=>{D&&_?.()},[D,_]);const $=L.arrow?.x,X=L.arrow?.y,W=L.arrow?.centerOffset!==0,[K,oe]=x.useState();return sn(()=>{E&&oe(window.getComputedStyle(E).zIndex)},[E]),f.jsx("div",{ref:ce.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:D?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:o.dir,children:f.jsx(qD,{scope:t,placedSide:Y,onArrowChange:j,arrowX:$,arrowY:X,shouldHideArrow:W,children:f.jsx(Ae.div,{"data-side":Y,"data-align":he,...S,ref:N,style:{...S.style,animation:D?void 0:"none"}})})})});fw.displayName=mp;var hw="PopperArrow",UD={top:"bottom",right:"left",bottom:"top",left:"right"},pw=x.forwardRef(function(e,t){const{__scopePopper:s,...r}=e,l=HD(hw,s),c=UD[l.placedSide];return f.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:f.jsx(PD,{...r,ref:t,style:{...r.style,display:"block"}})})});pw.displayName=hw;function BD(o){return o!==null}var $D=o=>({name:"transformOrigin",options:o,fn(e){const{placement:t,rects:s,middlewareData:r}=e,c=r.arrow?.centerOffset!==0,d=c?0:o.arrowWidth,h=c?0:o.arrowHeight,[p,g]=gw(t),m={start:"0%",center:"50%",end:"100%"}[g],v=(r.arrow?.x??0)+d/2,w=(r.arrow?.y??0)+h/2;let C="",S="";return p==="bottom"?(C=c?m:`${v}px`,S=`${-h}px`):p==="top"?(C=c?m:`${v}px`,S=`${s.floating.height+h}px`):p==="right"?(C=`${-h}px`,S=c?m:`${w}px`):p==="left"&&(C=`${s.floating.width+h}px`,S=c?m:`${w}px`),{data:{x:C,y:S}}}});function gw(o){const[e,t="center"]=o.split("-");return[e,t]}var yp=cw,uu=dw,vp=fw,bp=pw;function QD(o){const e=GD(o),t=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(VD);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(e,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(e,{...c,ref:r,children:l})});return t.displayName=`${o}.Slot`,t}function GD(o){const e=x.forwardRef((t,s)=>{const{children:r,...l}=t;if(x.isValidElement(r)){const c=YD(r),d=FD(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${o}.SlotClone`,e}var KD=Symbol("radix.slottable");function VD(o){return x.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===KD}function FD(o,e){const t={...e};for(const s in e){const r=o[s],l=e[s];/^on[A-Z]/.test(s)?r&&l?t[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...l}:s==="className"&&(t[s]=[r,l].filter(Boolean).join(" "))}return{...o,...t}}function YD(o){let e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}var yh=["Enter"," "],XD=["ArrowDown","PageUp","Home"],mw=["ArrowUp","PageDown","End"],WD=[...XD,...mw],ZD={ltr:[...yh,"ArrowRight"],rtl:[...yh,"ArrowLeft"]},JD={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Bi="Menu",[ji,e_,t_]=tu(Bi),[vo,yw]=bn(Bi,[t_,Er,nu]),du=Er(),vw=nu(),[n_,bo]=vo(Bi),[s_,$i]=vo(Bi),bw=o=>{const{__scopeMenu:e,open:t=!1,children:s,dir:r,onOpenChange:l,modal:c=!0}=o,d=du(e),[h,p]=x.useState(null),g=x.useRef(!1),m=nn(l),v=Cr(r);return x.useEffect(()=>{const w=()=>{g.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>g.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),f.jsx(yp,{...d,children:f.jsx(n_,{scope:e,open:t,onOpenChange:m,content:h,onContentChange:p,children:f.jsx(s_,{scope:e,onClose:x.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:g,dir:v,modal:c,children:s})})})};bw.displayName=Bi;var a_="MenuAnchor",xp=x.forwardRef((o,e)=>{const{__scopeMenu:t,...s}=o,r=du(t);return f.jsx(uu,{...r,...s,ref:e})});xp.displayName=a_;var wp="MenuPortal",[o_,xw]=vo(wp,{forceMount:void 0}),ww=o=>{const{__scopeMenu:e,forceMount:t,children:s,container:r}=o,l=bo(wp,e);return f.jsx(o_,{scope:e,forceMount:t,children:f.jsx(rn,{present:t||l.open,children:f.jsx(Ii,{asChild:!0,container:r,children:s})})})};ww.displayName=wp;var Vn="MenuContent",[r_,Cp]=vo(Vn),Cw=x.forwardRef((o,e)=>{const t=xw(Vn,o.__scopeMenu),{forceMount:s=t.forceMount,...r}=o,l=bo(Vn,o.__scopeMenu),c=$i(Vn,o.__scopeMenu);return f.jsx(ji.Provider,{scope:o.__scopeMenu,children:f.jsx(rn,{present:s||l.open,children:f.jsx(ji.Slot,{scope:o.__scopeMenu,children:c.modal?f.jsx(i_,{...r,ref:e}):f.jsx(l_,{...r,ref:e})})})})}),i_=x.forwardRef((o,e)=>{const t=bo(Vn,o.__scopeMenu),s=x.useRef(null),r=De(e,s);return x.useEffect(()=>{const l=s.current;if(l)return Fc(l)},[]),f.jsx(Sp,{...o,ref:r,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:ge(o.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),l_=x.forwardRef((o,e)=>{const t=bo(Vn,o.__scopeMenu);return f.jsx(Sp,{...o,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),c_=QD("MenuContent.ScrollLock"),Sp=x.forwardRef((o,e)=>{const{__scopeMenu:t,loop:s=!1,trapFocus:r,onOpenAutoFocus:l,onCloseAutoFocus:c,disableOutsidePointerEvents:d,onEntryFocus:h,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:v,onDismiss:w,disableOutsideScroll:C,...S}=o,R=bo(Vn,t),E=$i(Vn,t),T=du(t),N=vw(t),A=e_(t),[j,q]=x.useState(null),P=x.useRef(null),H=De(e,P,R.onContentChange),ee=x.useRef(0),se=x.useRef(""),le=x.useRef(0),te=x.useRef(null),ae=x.useRef("right"),ce=x.useRef(0),ue=C?qi:x.Fragment,z=C?{as:c_,allowPinchZoom:!0}:void 0,D=Y=>{const he=se.current+Y,_=A().filter(B=>!B.disabled),$=document.activeElement,X=_.find(B=>B.ref.current===$)?.textValue,W=_.map(B=>B.textValue),K=w_(W,he,X),oe=_.find(B=>B.textValue===K)?.ref.current;(function B(V){se.current=V,window.clearTimeout(ee.current),V!==""&&(ee.current=window.setTimeout(()=>B(""),1e3))})(he),oe&&setTimeout(()=>oe.focus())};x.useEffect(()=>()=>window.clearTimeout(ee.current),[]),Kc();const L=x.useCallback(Y=>ae.current===te.current?.side&&S_(Y,te.current?.area),[]);return f.jsx(r_,{scope:t,searchRef:se,onItemEnter:x.useCallback(Y=>{L(Y)&&Y.preventDefault()},[L]),onItemLeave:x.useCallback(Y=>{L(Y)||(P.current?.focus(),q(null))},[L]),onTriggerLeave:x.useCallback(Y=>{L(Y)&&Y.preventDefault()},[L]),pointerGraceTimerRef:le,onPointerGraceIntentChange:x.useCallback(Y=>{te.current=Y},[]),children:f.jsx(ue,{...z,children:f.jsx(Pi,{asChild:!0,trapped:r,onMountAutoFocus:ge(l,Y=>{Y.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:f.jsx(Li,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:v,onDismiss:w,children:f.jsx(zx,{asChild:!0,...N,dir:E.dir,orientation:"vertical",loop:s,currentTabStopId:j,onCurrentTabStopIdChange:q,onEntryFocus:ge(h,Y=>{E.isUsingKeyboardRef.current||Y.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(vp,{role:"menu","aria-orientation":"vertical","data-state":Iw(R.open),"data-radix-menu-content":"",dir:E.dir,...T,...S,ref:H,style:{outline:"none",...S.style},onKeyDown:ge(S.onKeyDown,Y=>{const _=Y.target.closest("[data-radix-menu-content]")===Y.currentTarget,$=Y.ctrlKey||Y.altKey||Y.metaKey,X=Y.key.length===1;_&&(Y.key==="Tab"&&Y.preventDefault(),!$&&X&&D(Y.key));const W=P.current;if(Y.target!==W||!WD.includes(Y.key))return;Y.preventDefault();const oe=A().filter(B=>!B.disabled).map(B=>B.ref.current);mw.includes(Y.key)&&oe.reverse(),b_(oe)}),onBlur:ge(o.onBlur,Y=>{Y.currentTarget.contains(Y.target)||(window.clearTimeout(ee.current),se.current="")}),onPointerMove:ge(o.onPointerMove,Di(Y=>{const he=Y.target,_=ce.current!==Y.clientX;if(Y.currentTarget.contains(he)&&_){const $=Y.clientX>ce.current?"right":"left";ae.current=$,ce.current=Y.clientX}}))})})})})})})});Cw.displayName=Vn;var u_="MenuGroup",Mp=x.forwardRef((o,e)=>{const{__scopeMenu:t,...s}=o;return f.jsx(Ae.div,{role:"group",...s,ref:e})});Mp.displayName=u_;var d_="MenuLabel",Sw=x.forwardRef((o,e)=>{const{__scopeMenu:t,...s}=o;return f.jsx(Ae.div,{...s,ref:e})});Sw.displayName=d_;var Lc="MenuItem",wv="menu.itemSelect",fu=x.forwardRef((o,e)=>{const{disabled:t=!1,onSelect:s,...r}=o,l=x.useRef(null),c=$i(Lc,o.__scopeMenu),d=Cp(Lc,o.__scopeMenu),h=De(e,l),p=x.useRef(!1),g=()=>{const m=l.current;if(!t&&m){const v=new CustomEvent(wv,{bubbles:!0,cancelable:!0});m.addEventListener(wv,w=>s?.(w),{once:!0}),pb(m,v),v.defaultPrevented?p.current=!1:c.onClose()}};return f.jsx(Mw,{...r,ref:h,disabled:t,onClick:ge(o.onClick,g),onPointerDown:m=>{o.onPointerDown?.(m),p.current=!0},onPointerUp:ge(o.onPointerUp,m=>{p.current||m.currentTarget?.click()}),onKeyDown:ge(o.onKeyDown,m=>{const v=d.searchRef.current!=="";t||v&&m.key===" "||yh.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});fu.displayName=Lc;var Mw=x.forwardRef((o,e)=>{const{__scopeMenu:t,disabled:s=!1,textValue:r,...l}=o,c=Cp(Lc,t),d=vw(t),h=x.useRef(null),p=De(e,h),[g,m]=x.useState(!1),[v,w]=x.useState("");return x.useEffect(()=>{const C=h.current;C&&w((C.textContent??"").trim())},[l.children]),f.jsx(ji.ItemSlot,{scope:t,disabled:s,textValue:r??v,children:f.jsx(Ox,{asChild:!0,...d,focusable:!s,children:f.jsx(Ae.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...l,ref:p,onPointerMove:ge(o.onPointerMove,Di(C=>{s?c.onItemLeave(C):(c.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ge(o.onPointerLeave,Di(C=>c.onItemLeave(C))),onFocus:ge(o.onFocus,()=>m(!0)),onBlur:ge(o.onBlur,()=>m(!1))})})})}),f_="MenuCheckboxItem",Ew=x.forwardRef((o,e)=>{const{checked:t=!1,onCheckedChange:s,...r}=o;return f.jsx(kw,{scope:o.__scopeMenu,checked:t,children:f.jsx(fu,{role:"menuitemcheckbox","aria-checked":Pc(t)?"mixed":t,...r,ref:e,"data-state":Rp(t),onSelect:ge(r.onSelect,()=>s?.(Pc(t)?!0:!t),{checkForDefaultPrevented:!1})})})});Ew.displayName=f_;var Rw="MenuRadioGroup",[h_,p_]=vo(Rw,{value:void 0,onValueChange:()=>{}}),Nw=x.forwardRef((o,e)=>{const{value:t,onValueChange:s,...r}=o,l=nn(s);return f.jsx(h_,{scope:o.__scopeMenu,value:t,onValueChange:l,children:f.jsx(Mp,{...r,ref:e})})});Nw.displayName=Rw;var Aw="MenuRadioItem",Tw=x.forwardRef((o,e)=>{const{value:t,...s}=o,r=p_(Aw,o.__scopeMenu),l=t===r.value;return f.jsx(kw,{scope:o.__scopeMenu,checked:l,children:f.jsx(fu,{role:"menuitemradio","aria-checked":l,...s,ref:e,"data-state":Rp(l),onSelect:ge(s.onSelect,()=>r.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});Tw.displayName=Aw;var Ep="MenuItemIndicator",[kw,g_]=vo(Ep,{checked:!1}),jw=x.forwardRef((o,e)=>{const{__scopeMenu:t,forceMount:s,...r}=o,l=g_(Ep,t);return f.jsx(rn,{present:s||Pc(l.checked)||l.checked===!0,children:f.jsx(Ae.span,{...r,ref:e,"data-state":Rp(l.checked)})})});jw.displayName=Ep;var m_="MenuSeparator",Dw=x.forwardRef((o,e)=>{const{__scopeMenu:t,...s}=o;return f.jsx(Ae.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});Dw.displayName=m_;var y_="MenuArrow",_w=x.forwardRef((o,e)=>{const{__scopeMenu:t,...s}=o,r=du(t);return f.jsx(bp,{...r,...s,ref:e})});_w.displayName=y_;var v_="MenuSub",[iL,zw]=vo(v_),wi="MenuSubTrigger",Ow=x.forwardRef((o,e)=>{const t=bo(wi,o.__scopeMenu),s=$i(wi,o.__scopeMenu),r=zw(wi,o.__scopeMenu),l=Cp(wi,o.__scopeMenu),c=x.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:h}=l,p={__scopeMenu:o.__scopeMenu},g=x.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return x.useEffect(()=>g,[g]),x.useEffect(()=>{const m=d.current;return()=>{window.clearTimeout(m),h(null)}},[d,h]),f.jsx(xp,{asChild:!0,...p,children:f.jsx(Mw,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":r.contentId,"data-state":Iw(t.open),...o,ref:Cs(e,r.onTriggerChange),onClick:m=>{o.onClick?.(m),!(o.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:ge(o.onPointerMove,Di(m=>{l.onItemEnter(m),!m.defaultPrevented&&!o.disabled&&!t.open&&!c.current&&(l.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{t.onOpenChange(!0),g()},100))})),onPointerLeave:ge(o.onPointerLeave,Di(m=>{g();const v=t.content?.getBoundingClientRect();if(v){const w=t.content?.dataset.side,C=w==="right",S=C?-5:5,R=v[C?"left":"right"],E=v[C?"right":"left"];l.onPointerGraceIntentChange({area:[{x:m.clientX+S,y:m.clientY},{x:R,y:v.top},{x:E,y:v.top},{x:E,y:v.bottom},{x:R,y:v.bottom}],side:w}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(m),m.defaultPrevented)return;l.onPointerGraceIntentChange(null)}})),onKeyDown:ge(o.onKeyDown,m=>{const v=l.searchRef.current!=="";o.disabled||v&&m.key===" "||ZD[s.dir].includes(m.key)&&(t.onOpenChange(!0),t.content?.focus(),m.preventDefault())})})})});Ow.displayName=wi;var Lw="MenuSubContent",Pw=x.forwardRef((o,e)=>{const t=xw(Vn,o.__scopeMenu),{forceMount:s=t.forceMount,...r}=o,l=bo(Vn,o.__scopeMenu),c=$i(Vn,o.__scopeMenu),d=zw(Lw,o.__scopeMenu),h=x.useRef(null),p=De(e,h);return f.jsx(ji.Provider,{scope:o.__scopeMenu,children:f.jsx(rn,{present:s||l.open,children:f.jsx(ji.Slot,{scope:o.__scopeMenu,children:f.jsx(Sp,{id:d.contentId,"aria-labelledby":d.triggerId,...r,ref:p,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{c.isUsingKeyboardRef.current&&h.current?.focus(),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:ge(o.onFocusOutside,g=>{g.target!==d.trigger&&l.onOpenChange(!1)}),onEscapeKeyDown:ge(o.onEscapeKeyDown,g=>{c.onClose(),g.preventDefault()}),onKeyDown:ge(o.onKeyDown,g=>{const m=g.currentTarget.contains(g.target),v=JD[c.dir].includes(g.key);m&&v&&(l.onOpenChange(!1),d.trigger?.focus(),g.preventDefault())})})})})})});Pw.displayName=Lw;function Iw(o){return o?"open":"closed"}function Pc(o){return o==="indeterminate"}function Rp(o){return Pc(o)?"indeterminate":o?"checked":"unchecked"}function b_(o){const e=document.activeElement;for(const t of o)if(t===e||(t.focus(),document.activeElement!==e))return}function x_(o,e){return o.map((t,s)=>o[(e+s)%o.length])}function w_(o,e,t){const r=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,l=t?o.indexOf(t):-1;let c=x_(o,Math.max(l,0));r.length===1&&(c=c.filter(p=>p!==t));const h=c.find(p=>p.toLowerCase().startsWith(r.toLowerCase()));return h!==t?h:void 0}function C_(o,e){const{x:t,y:s}=o;let r=!1;for(let l=0,c=e.length-1;l<e.length;c=l++){const d=e[l],h=e[c],p=d.x,g=d.y,m=h.x,v=h.y;g>s!=v>s&&t<(m-p)*(s-g)/(v-g)+p&&(r=!r)}return r}function S_(o,e){if(!e)return!1;const t={x:o.clientX,y:o.clientY};return C_(t,e)}function Di(o){return e=>e.pointerType==="mouse"?o(e):void 0}var M_=bw,E_=xp,R_=ww,N_=Cw,A_=Mp,T_=Sw,k_=fu,j_=Ew,D_=Nw,__=Tw,z_=jw,O_=Dw,L_=_w,P_=Ow,I_=Pw,hu="DropdownMenu",[q_]=bn(hu,[yw]),dn=yw(),[H_,qw]=q_(hu),Hw=o=>{const{__scopeDropdownMenu:e,children:t,dir:s,open:r,defaultOpen:l,onOpenChange:c,modal:d=!0}=o,h=dn(e),p=x.useRef(null),[g,m]=xs({prop:r,defaultProp:l??!1,onChange:c,caller:hu});return f.jsx(H_,{scope:e,triggerId:ns(),triggerRef:p,contentId:ns(),open:g,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(v=>!v),[m]),modal:d,children:f.jsx(M_,{...h,open:g,onOpenChange:m,dir:s,modal:d,children:t})})};Hw.displayName=hu;var Uw="DropdownMenuTrigger",Bw=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,disabled:s=!1,...r}=o,l=qw(Uw,t),c=dn(t);return f.jsx(E_,{asChild:!0,...c,children:f.jsx(Ae.button,{type:"button",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":l.open?l.contentId:void 0,"data-state":l.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:Cs(e,l.triggerRef),onPointerDown:ge(o.onPointerDown,d=>{!s&&d.button===0&&d.ctrlKey===!1&&(l.onOpenToggle(),l.open||d.preventDefault())}),onKeyDown:ge(o.onKeyDown,d=>{s||(["Enter"," "].includes(d.key)&&l.onOpenToggle(),d.key==="ArrowDown"&&l.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});Bw.displayName=Uw;var U_="DropdownMenuPortal",$w=o=>{const{__scopeDropdownMenu:e,...t}=o,s=dn(e);return f.jsx(R_,{...s,...t})};$w.displayName=U_;var Qw="DropdownMenuContent",Gw=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=qw(Qw,t),l=dn(t),c=x.useRef(!1);return f.jsx(N_,{id:r.contentId,"aria-labelledby":r.triggerId,...l,...s,ref:e,onCloseAutoFocus:ge(o.onCloseAutoFocus,d=>{c.current||r.triggerRef.current?.focus(),c.current=!1,d.preventDefault()}),onInteractOutside:ge(o.onInteractOutside,d=>{const h=d.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,g=h.button===2||p;(!r.modal||g)&&(c.current=!0)}),style:{...o.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Gw.displayName=Qw;var B_="DropdownMenuGroup",$_=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=dn(t);return f.jsx(A_,{...r,...s,ref:e})});$_.displayName=B_;var Q_="DropdownMenuLabel",Kw=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=dn(t);return f.jsx(T_,{...r,...s,ref:e})});Kw.displayName=Q_;var G_="DropdownMenuItem",Vw=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=dn(t);return f.jsx(k_,{...r,...s,ref:e})});Vw.displayName=G_;var K_="DropdownMenuCheckboxItem",Fw=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=dn(t);return f.jsx(j_,{...r,...s,ref:e})});Fw.displayName=K_;var V_="DropdownMenuRadioGroup",F_=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=dn(t);return f.jsx(D_,{...r,...s,ref:e})});F_.displayName=V_;var Y_="DropdownMenuRadioItem",Yw=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=dn(t);return f.jsx(__,{...r,...s,ref:e})});Yw.displayName=Y_;var X_="DropdownMenuItemIndicator",Xw=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=dn(t);return f.jsx(z_,{...r,...s,ref:e})});Xw.displayName=X_;var W_="DropdownMenuSeparator",Ww=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=dn(t);return f.jsx(O_,{...r,...s,ref:e})});Ww.displayName=W_;var Z_="DropdownMenuArrow",J_=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=dn(t);return f.jsx(L_,{...r,...s,ref:e})});J_.displayName=Z_;var e5="DropdownMenuSubTrigger",Zw=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=dn(t);return f.jsx(P_,{...r,...s,ref:e})});Zw.displayName=e5;var t5="DropdownMenuSubContent",Jw=x.forwardRef((o,e)=>{const{__scopeDropdownMenu:t,...s}=o,r=dn(t);return f.jsx(I_,{...r,...s,ref:e,style:{...o.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Jw.displayName=t5;var n5=Hw,s5=Bw,a5=$w,e1=Gw,t1=Kw,n1=Vw,s1=Fw,a1=Yw,o1=Xw,r1=Ww,i1=Zw,l1=Jw;const o5=n5,r5=s5,i5=x.forwardRef(({className:o,inset:e,children:t,...s},r)=>f.jsxs(i1,{ref:r,className:Ee("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",o),...s,children:[t,f.jsx(qh,{className:"ml-auto"})]}));i5.displayName=i1.displayName;const l5=x.forwardRef(({className:o,...e},t)=>f.jsx(l1,{ref:t,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",o),...e}));l5.displayName=l1.displayName;const c1=x.forwardRef(({className:o,sideOffset:e=4,...t},s)=>f.jsx(a5,{children:f.jsx(e1,{ref:s,sideOffset:e,className:Ee("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",o),...t})}));c1.displayName=e1.displayName;const Sc=x.forwardRef(({className:o,inset:e,...t},s)=>f.jsx(n1,{ref:s,className:Ee("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",e&&"pl-8",o),...t}));Sc.displayName=n1.displayName;const c5=x.forwardRef(({className:o,children:e,checked:t,...s},r)=>f.jsxs(s1,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),checked:t,...s,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(o1,{children:f.jsx(Ih,{className:"h-4 w-4"})})}),e]}));c5.displayName=s1.displayName;const u5=x.forwardRef(({className:o,children:e,...t},s)=>f.jsxs(a1,{ref:s,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...t,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(o1,{children:f.jsx(T2,{className:"h-2 w-2 fill-current"})})}),e]}));u5.displayName=a1.displayName;const vh=x.forwardRef(({className:o,inset:e,...t},s)=>f.jsx(t1,{ref:s,className:Ee("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",o),...t}));vh.displayName=t1.displayName;const u1=x.forwardRef(({className:o,...e},t)=>f.jsx(r1,{ref:t,className:Ee("-mx-1 my-1 h-px bg-muted",o),...e}));u1.displayName=r1.displayName;const d1="archiphoenix_component_library",Cv=()=>{if(typeof window>"u")return{favorites:[],collections:[]};try{const o=window.localStorage.getItem(d1);if(!o)return{favorites:[],collections:[]};const e=JSON.parse(o);return{favorites:Array.isArray(e.favorites)?e.favorites:[],collections:Array.isArray(e.collections)?e.collections:[]}}catch(o){return ab("Failed to load component library state",o instanceof Error?o:new Error(String(o))),{favorites:[],collections:[]}}},ur=o=>{typeof window>"u"||window.localStorage.setItem(d1,JSON.stringify(o))},d5=Ss((o,e)=>({favorites:Cv().favorites,collections:Cv().collections,toggleFavorite:t=>{o(s=>{const l=s.favorites.includes(t)?s.favorites.filter(c=>c!==t):[...s.favorites,t];return ur({favorites:l,collections:s.collections}),{favorites:l}})},createCollection:t=>{const s=t.trim();if(!s)return null;const r={id:`collection-${Date.now()}`,name:s,componentIds:[]};return o(l=>{const c=[...l.collections,r];return ur({favorites:l.favorites,collections:c}),{collections:c}}),r.id},renameCollection:(t,s)=>{o(r=>{const l=r.collections.map(c=>c.id===t?{...c,name:s}:c);return ur({favorites:r.favorites,collections:l}),{collections:l}})},deleteCollection:t=>{o(s=>{const r=s.collections.filter(l=>l.id!==t);return ur({favorites:s.favorites,collections:r}),{collections:r}})},addComponentToCollection:(t,s)=>{o(r=>{const l=r.collections.map(c=>c.id!==t||c.componentIds.includes(s)?c:{...c,componentIds:[...c.componentIds,s]});return ur({favorites:r.favorites,collections:l}),{collections:l}})},removeComponentFromCollection:(t,s)=>{o(r=>{const l=r.collections.map(c=>c.id!==t?c:{...c,componentIds:c.componentIds.filter(d=>d!==s)});return ur({favorites:r.favorites,collections:l}),{collections:l}})}}));function Sv({open:o,initialName:e="",onConfirm:t,onCancel:s}){const[r,l]=x.useState(e);x.useEffect(()=>{o&&l(e)},[o,e]);const c=()=>{r.trim()&&t(r.trim())};return f.jsx(op,{open:o,onOpenChange:d=>!d&&s(),children:f.jsxs(Xc,{children:[f.jsxs(Wc,{children:[f.jsx(Jc,{children:e?"Rename Collection":"Create Collection"}),f.jsx(eu,{children:e?"Enter a new name for the collection":"Enter a name for the new collection"})]}),f.jsxs("div",{className:"py-4",children:[f.jsx(st,{htmlFor:"collection-name",children:"Collection Name"}),f.jsx(Tt,{id:"collection-name",value:r,onChange:d=>l(d.target.value),onKeyDown:d=>{d.key==="Enter"&&c()},className:"mt-2",autoFocus:!0})]}),f.jsxs(Zc,{children:[f.jsx(Te,{variant:"outline",onClick:s,children:"Cancel"}),f.jsx(Te,{onClick:c,disabled:!r.trim(),children:e?"Save":"Create"})]})]})})}function f5(){const[o,e]=x.useState(""),[t,s]=x.useState("all"),[r,l]=x.useState(!1),[c,d]=x.useState(!1),[h,p]=x.useState(null),[g,m]=x.useState(null),[v,w]=x.useState(180),[C,S]=x.useState(!1),R=x.useRef(null),[E,T]=x.useState(()=>{const K=localStorage.getItem("sidebar-expanded-categories");if(K)try{const oe=JSON.parse(K);return xi.reduce((B,V)=>(B[V.id]=oe[V.id]!==void 0?oe[V.id]:!0,B),{})}catch{}return xi.reduce((oe,B)=>(oe[B.id]=!0,oe),{})}),{favorites:N,collections:A,toggleFavorite:j,createCollection:q,renameCollection:P,deleteCollection:H,addComponentToCollection:ee,removeComponentFromCollection:se}=d5(),le=K=>{T(oe=>({...oe,[K]:!oe[K]}))},te=o.toLowerCase(),ae=x.useMemo(()=>Ai.filter(K=>K.label.toLowerCase().includes(te)),[te]),ce=x.useMemo(()=>ae.filter(K=>N.includes(K.id)),[N,ae]),ue=(K,oe)=>{K.dataTransfer.setData("application/json",JSON.stringify(oe)),K.dataTransfer.effectAllowed="copy"},z=()=>{p(null),l(!0)},D=K=>{if(h)P(h.id,K),p(null);else{if(A.some(V=>V.name.toLowerCase()===K.toLowerCase())){alert("A collection with this name already exists");return}q(K)||alert("Failed to create collection")}l(!1)},L=()=>{l(!1),p(null)},Y=K=>{m(K),p(null),d(!0)},he=K=>{if(!g)return;if(A.some(V=>V.name.toLowerCase()===K.toLowerCase())){alert("A collection with this name already exists");return}const B=q(K);B?ee(B,g):alert("Failed to create collection"),d(!1),m(null)},_=()=>{d(!1),m(null)},$=K=>{p(K),l(!0)};x.useEffect(()=>{localStorage.setItem("sidebar-expanded-categories",JSON.stringify(E))},[E]),x.useEffect(()=>{if(!C)return;const K=B=>{if(!R.current)return;const V=R.current.closest(".h-full");if(!V)return;const pe=V.getBoundingClientRect();R.current.getBoundingClientRect();const me=pe.bottom-B.clientY,ye=70,ve=pe.height*.8;w(Math.max(ye,Math.min(ve,me)))},oe=()=>{S(!1)};return document.addEventListener("mousemove",K),document.addEventListener("mouseup",oe),()=>{document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",oe)}},[C]);const X=(K,oe)=>{const B=N.includes(K.id);return f.jsxs("div",{draggable:!0,onDragStart:V=>ue(V,K),className:`flex items-center gap-1 px-1 ${oe?.compact?"py-0.5 text-[10px]":"py-1 text-xs"} rounded-md bg-secondary/50 hover:bg-secondary cursor-move transition-colors border border-border/50`,children:[f.jsxs("div",{className:"flex items-center gap-0.5 flex-1 min-w-0",children:[f.jsx("span",{className:"text-sm flex-shrink-0",children:K.icon}),f.jsx("span",{className:"text-foreground truncate min-w-0",children:K.label})]}),f.jsxs("div",{className:"ml-auto flex items-center gap-1",children:[f.jsx("button",{type:"button",onClick:V=>{V.preventDefault(),V.stopPropagation(),j(K.id)},onMouseDown:V=>V.stopPropagation(),className:"p-1 rounded-md hover:bg-muted transition-colors",title:B?"Remove from favorites":"Add to favorites",children:f.jsx(SA,{className:`h-4 w-4 ${B?"text-yellow-400":"text-muted-foreground"}`,fill:B?"currentColor":"none"})}),f.jsxs(o5,{children:[f.jsx(r5,{asChild:!0,children:f.jsx("button",{type:"button",onMouseDown:V=>V.stopPropagation(),className:"p-1 rounded-md hover:bg-muted transition-colors",title:"Add to collection",children:f.jsx(Ac,{className:"h-4 w-4 text-muted-foreground"})})}),f.jsxs(c1,{align:"end",className:"w-48",children:[A.length===0&&f.jsxs(f.Fragment,{children:[f.jsx(vh,{children:"No collections"}),f.jsxs(Sc,{onSelect:V=>{V.preventDefault(),Y(K.id)},children:[f.jsx(ch,{className:"h-4 w-4 mr-2"}),"Create and add"]})]}),A.length>0&&f.jsxs(f.Fragment,{children:[f.jsx(vh,{children:"Add to collection"}),A.map(V=>f.jsx(Sc,{onSelect:pe=>{pe.preventDefault(),ee(V.id,K.id)},children:V.name},V.id)),f.jsx(u1,{}),f.jsxs(Sc,{onSelect:V=>{V.preventDefault(),Y(K.id)},children:[f.jsx(ch,{className:"h-4 w-4 mr-2"}),"New collection"]})]})]})]}),oe?.onRemove&&f.jsx("button",{type:"button",onClick:V=>{V.preventDefault(),V.stopPropagation(),oe.onRemove?.()},onMouseDown:V=>V.stopPropagation(),className:"p-1 rounded-md hover:bg-muted transition-colors",title:"Remove from collection",children:f.jsx(vs,{className:"h-4 w-4 text-muted-foreground"})})]})]},`${K.id}-${oe?.compact?"compact":"default"}`)},W=t==="all"?xi:xi.filter(K=>K.id===t);return f.jsxs("div",{className:"w-60 h-full bg-sidebar-bg border-r border-border flex flex-col",children:[f.jsxs("div",{className:"p-3 border-b border-border",children:[f.jsx("h2",{className:"text-xs font-semibold text-foreground mb-2",children:"Components"}),f.jsxs("div",{className:"relative",children:[f.jsx(Bc,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),f.jsx(Tt,{type:"text",placeholder:"Search...",value:o,onChange:K=>e(K.target.value),className:"pl-7 h-8 text-xs"})]})]}),f.jsx("div",{className:"px-3 py-1.5 border-b border-border pb-2",children:f.jsx(lp,{value:t,onValueChange:s,children:f.jsxs(on,{orientation:"horizontal",className:"w-full",children:[f.jsxs(au,{className:"flex w-max gap-0.5",children:[f.jsx(hs,{value:"all",className:"text-xs px-2 py-1",children:"All"}),xi.map(K=>f.jsx(hs,{value:K.id,className:"text-xs px-2 py-1",children:K.icon},K.id))]}),f.jsx(Gc,{orientation:"horizontal",className:"data-[state=visible]:bg-accent/20 data-[state=visible]:hover:bg-accent/30 [&>[data-radix-scroll-area-thumb]]:bg-accent/80 hover:[&>[data-radix-scroll-area-thumb]]:bg-accent rounded-full",style:{transition:"none"}})]})})}),ce.length>0&&f.jsxs("div",{className:"px-3 py-2 border-b border-border",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsx("span",{className:"text-[10px] font-semibold uppercase text-muted-foreground",children:"Favorites"}),f.jsx("span",{className:"text-[10px] text-muted-foreground",children:ce.length})]}),f.jsx("div",{className:"space-y-1",children:ce.map(K=>X(K,{compact:!0}))})]}),f.jsx(on,{className:"flex-1",children:f.jsx("div",{className:"pl-3 pr-6 py-2",children:W.map(K=>{const oe=ae.filter(B=>B.category===K.id);return oe.length===0&&o?null:f.jsxs("div",{className:"mb-1.5",children:[f.jsxs(Te,{variant:"ghost",className:"w-full justify-start px-1 h-7 text-xs",onClick:()=>le(K.id),children:[E[K.id]?f.jsx(Uc,{className:"h-3.5 w-3.5 mr-0.5"}):f.jsx(qh,{className:"h-3.5 w-3.5 mr-0.5"}),f.jsx("span",{className:"mr-1",children:K.icon}),f.jsx("span",{className:"flex-1 text-left truncate min-w-0 mr-1",children:K.label}),f.jsx("span",{className:"text-[10px] text-muted-foreground flex-shrink-0",children:oe.length})]}),E[K.id]&&f.jsx("div",{className:"ml-1.5 mt-1 space-y-1",children:oe.map(B=>X(B,{compact:!0}))})]},K.id)})})}),f.jsx("div",{ref:R,className:"h-2 border-t border-border cursor-row-resize hover:bg-accent/50 transition-colors relative group flex items-center justify-center",onMouseDown:K=>{K.preventDefault(),S(!0)},style:{userSelect:"none"},children:f.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:f.jsx(B2,{className:"h-3 w-3 text-muted-foreground"})})}),f.jsxs("div",{className:"border-t border-border overflow-hidden flex flex-col",style:{height:`${v}px`},children:[f.jsx("div",{className:"p-2 pb-1.5 flex-shrink-0",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-[10px] uppercase font-semibold text-muted-foreground",children:"Collections"}),f.jsxs(Te,{size:"xs",variant:"outline",className:"h-6 text-[10px] px-2",onClick:K=>{K.preventDefault(),K.stopPropagation(),z()},type:"button",children:[f.jsx(Ac,{className:"h-3 w-3 mr-0.5"}),"New"]})]})}),f.jsx(on,{className:"flex-1",children:f.jsx("div",{className:"pl-1.5 pr-4 pb-2 space-y-1.5",children:A.length===0?f.jsx("p",{className:"text-[10px] text-muted-foreground px-0.5",children:"Create collections to quickly build typical architectures."}):A.map(K=>{const oe=K.componentIds.map(B=>Ai.find(V=>V.id===B)).filter(B=>!!B).filter(B=>B.label.toLowerCase().includes(te));return f.jsxs("div",{className:"rounded-md border border-border/60 p-1.5",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-xs font-medium text-foreground truncate",children:K.name}),f.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[oe.length," items"]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Te,{size:"icon",variant:"ghost",className:"h-7 w-7",title:"Rename",onClick:()=>$(K),children:""}),f.jsx(Te,{size:"icon",variant:"ghost",className:"h-7 w-7",title:"Delete collection",onClick:()=>H(K.id),children:f.jsx(vs,{className:"h-4 w-4"})})]})]}),oe.length===0?f.jsx("p",{className:"text-[10px] text-muted-foreground",children:'Add components via "+" menu.'}):f.jsx("div",{className:"space-y-1",children:oe.map(B=>X(B,{compact:!0,onRemove:()=>se(K.id,B.id)}))})]},K.id)})})})]}),f.jsx(Sv,{open:r,initialName:h?.name||"",onConfirm:D,onCancel:L}),f.jsx(Sv,{open:c,initialName:"",onConfirm:he,onCancel:_})]})}const pu=Ss(o=>({tabs:[{id:"diagram-1",title:"Untitled Diagram",type:"diagram",active:!0}],addTab:e=>o(t=>{if(e.componentId){const r=t.tabs.find(l=>l.componentId===e.componentId);if(r)return{tabs:t.tabs.map(l=>({...l,active:l.id===r.id}))}}const s={...e,id:`${e.type}-${Date.now()}`,active:!0};return{tabs:[...t.tabs.map(r=>({...r,active:!1})),s]}}),closeTab:e=>o(t=>{const s=t.tabs.filter(c=>c.id!==e);if(s.length===0)return{tabs:[{id:"diagram-1",title:"Untitled Diagram",type:"diagram",active:!0}]};const r=t.tabs.findIndex(c=>c.id===e);if(t.tabs[r]?.active&&s.length>0){const c=Math.min(r,s.length-1);s[c].active=!0}return{tabs:s}}),setActiveTab:e=>o(t=>({tabs:t.tabs.map(s=>({...s,active:s.id===e}))})),updateTab:(e,t)=>o(s=>({tabs:s.tabs.map(r=>r.id===e?{...r,...t}:r)}))}));function h5(o){const e=p5(o),t=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(m5);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(e,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(e,{...c,ref:r,children:l})});return t.displayName=`${o}.Slot`,t}function p5(o){const e=x.forwardRef((t,s)=>{const{children:r,...l}=t;if(x.isValidElement(r)){const c=v5(r),d=y5(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${o}.SlotClone`,e}var g5=Symbol("radix.slottable");function m5(o){return x.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===g5}function y5(o,e){const t={...e};for(const s in e){const r=o[s],l=e[s];/^on[A-Z]/.test(s)?r&&l?t[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...l}:s==="className"&&(t[s]=[r,l].filter(Boolean).join(" "))}return{...o,...t}}function v5(o){let e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}function gu(o){const e=x.useRef({value:o,previous:o});return x.useMemo(()=>(e.current.value!==o&&(e.current.previous=e.current.value,e.current.value=o),e.current.previous),[o])}var f1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),b5="VisuallyHidden",x5=x.forwardRef((o,e)=>f.jsx(Ae.span,{...o,ref:e,style:{...f1,...o.style}}));x5.displayName=b5;var w5=[" ","Enter","ArrowUp","ArrowDown"],C5=[" ","Enter"],mo="Select",[mu,yu,S5]=tu(mo),[Rr]=bn(mo,[S5,Er]),vu=Er(),[M5,Ia]=Rr(mo),[E5,R5]=Rr(mo),h1=o=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:r,onOpenChange:l,value:c,defaultValue:d,onValueChange:h,dir:p,name:g,autoComplete:m,disabled:v,required:w,form:C}=o,S=vu(e),[R,E]=x.useState(null),[T,N]=x.useState(null),[A,j]=x.useState(!1),q=Cr(p),[P,H]=xs({prop:s,defaultProp:r??!1,onChange:l,caller:mo}),[ee,se]=xs({prop:c,defaultProp:d,onChange:h,caller:mo}),le=x.useRef(null),te=R?C||!!R.closest("form"):!0,[ae,ce]=x.useState(new Set),ue=Array.from(ae).map(z=>z.props.value).join(";");return f.jsx(yp,{...S,children:f.jsxs(M5,{required:w,scope:e,trigger:R,onTriggerChange:E,valueNode:T,onValueNodeChange:N,valueNodeHasChildren:A,onValueNodeHasChildrenChange:j,contentId:ns(),value:ee,onValueChange:se,open:P,onOpenChange:H,dir:q,triggerPointerDownPosRef:le,disabled:v,children:[f.jsx(mu.Provider,{scope:e,children:f.jsx(E5,{scope:o.__scopeSelect,onNativeOptionAdd:x.useCallback(z=>{ce(D=>new Set(D).add(z))},[]),onNativeOptionRemove:x.useCallback(z=>{ce(D=>{const L=new Set(D);return L.delete(z),L})},[]),children:t})}),te?f.jsxs(P1,{"aria-hidden":!0,required:w,tabIndex:-1,name:g,autoComplete:m,value:ee,onChange:z=>se(z.target.value),disabled:v,form:C,children:[ee===void 0?f.jsx("option",{value:""}):null,Array.from(ae)]},ue):null]})})};h1.displayName=mo;var p1="SelectTrigger",g1=x.forwardRef((o,e)=>{const{__scopeSelect:t,disabled:s=!1,...r}=o,l=vu(t),c=Ia(p1,t),d=c.disabled||s,h=De(e,c.onTriggerChange),p=yu(t),g=x.useRef("touch"),[m,v,w]=q1(S=>{const R=p().filter(N=>!N.disabled),E=R.find(N=>N.value===c.value),T=H1(R,S,E);T!==void 0&&c.onValueChange(T.value)}),C=S=>{d||(c.onOpenChange(!0),w()),S&&(c.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return f.jsx(uu,{asChild:!0,...l,children:f.jsx(Ae.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":I1(c.value)?"":void 0,...r,ref:h,onClick:ge(r.onClick,S=>{S.currentTarget.focus(),g.current!=="mouse"&&C(S)}),onPointerDown:ge(r.onPointerDown,S=>{g.current=S.pointerType;const R=S.target;R.hasPointerCapture(S.pointerId)&&R.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(C(S),S.preventDefault())}),onKeyDown:ge(r.onKeyDown,S=>{const R=m.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&v(S.key),!(R&&S.key===" ")&&w5.includes(S.key)&&(C(),S.preventDefault())})})})});g1.displayName=p1;var m1="SelectValue",y1=x.forwardRef((o,e)=>{const{__scopeSelect:t,className:s,style:r,children:l,placeholder:c="",...d}=o,h=Ia(m1,t),{onValueNodeHasChildrenChange:p}=h,g=l!==void 0,m=De(e,h.onValueNodeChange);return sn(()=>{p(g)},[p,g]),f.jsx(Ae.span,{...d,ref:m,style:{pointerEvents:"none"},children:I1(h.value)?f.jsx(f.Fragment,{children:c}):l})});y1.displayName=m1;var N5="SelectIcon",v1=x.forwardRef((o,e)=>{const{__scopeSelect:t,children:s,...r}=o;return f.jsx(Ae.span,{"aria-hidden":!0,...r,ref:e,children:s||""})});v1.displayName=N5;var A5="SelectPortal",b1=o=>f.jsx(Ii,{asChild:!0,...o});b1.displayName=A5;var yo="SelectContent",x1=x.forwardRef((o,e)=>{const t=Ia(yo,o.__scopeSelect),[s,r]=x.useState();if(sn(()=>{r(new DocumentFragment)},[]),!t.open){const l=s;return l?zi.createPortal(f.jsx(w1,{scope:o.__scopeSelect,children:f.jsx(mu.Slot,{scope:o.__scopeSelect,children:f.jsx("div",{children:o.children})})}),l):null}return f.jsx(C1,{...o,ref:e})});x1.displayName=yo;var es=10,[w1,qa]=Rr(yo),T5="SelectContentImpl",k5=h5("SelectContent.RemoveScroll"),C1=x.forwardRef((o,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:l,onPointerDownOutside:c,side:d,sideOffset:h,align:p,alignOffset:g,arrowPadding:m,collisionBoundary:v,collisionPadding:w,sticky:C,hideWhenDetached:S,avoidCollisions:R,...E}=o,T=Ia(yo,t),[N,A]=x.useState(null),[j,q]=x.useState(null),P=De(e,B=>A(B)),[H,ee]=x.useState(null),[se,le]=x.useState(null),te=yu(t),[ae,ce]=x.useState(!1),ue=x.useRef(!1);x.useEffect(()=>{if(N)return Fc(N)},[N]),Kc();const z=x.useCallback(B=>{const[V,...pe]=te().map(ve=>ve.ref.current),[me]=pe.slice(-1),ye=document.activeElement;for(const ve of B)if(ve===ye||(ve?.scrollIntoView({block:"nearest"}),ve===V&&j&&(j.scrollTop=0),ve===me&&j&&(j.scrollTop=j.scrollHeight),ve?.focus(),document.activeElement!==ye))return},[te,j]),D=x.useCallback(()=>z([H,N]),[z,H,N]);x.useEffect(()=>{ae&&D()},[ae,D]);const{onOpenChange:L,triggerPointerDownPosRef:Y}=T;x.useEffect(()=>{if(N){let B={x:0,y:0};const V=me=>{B={x:Math.abs(Math.round(me.pageX)-(Y.current?.x??0)),y:Math.abs(Math.round(me.pageY)-(Y.current?.y??0))}},pe=me=>{B.x<=10&&B.y<=10?me.preventDefault():N.contains(me.target)||L(!1),document.removeEventListener("pointermove",V),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",V),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",pe,{capture:!0})}}},[N,L,Y]),x.useEffect(()=>{const B=()=>L(!1);return window.addEventListener("blur",B),window.addEventListener("resize",B),()=>{window.removeEventListener("blur",B),window.removeEventListener("resize",B)}},[L]);const[he,_]=q1(B=>{const V=te().filter(ye=>!ye.disabled),pe=V.find(ye=>ye.ref.current===document.activeElement),me=H1(V,B,pe);me&&setTimeout(()=>me.ref.current.focus())}),$=x.useCallback((B,V,pe)=>{const me=!ue.current&&!pe;(T.value!==void 0&&T.value===V||me)&&(ee(B),me&&(ue.current=!0))},[T.value]),X=x.useCallback(()=>N?.focus(),[N]),W=x.useCallback((B,V,pe)=>{const me=!ue.current&&!pe;(T.value!==void 0&&T.value===V||me)&&le(B)},[T.value]),K=s==="popper"?bh:S1,oe=K===bh?{side:d,sideOffset:h,align:p,alignOffset:g,arrowPadding:m,collisionBoundary:v,collisionPadding:w,sticky:C,hideWhenDetached:S,avoidCollisions:R}:{};return f.jsx(w1,{scope:t,content:N,viewport:j,onViewportChange:q,itemRefCallback:$,selectedItem:H,onItemLeave:X,itemTextRefCallback:W,focusSelectedItem:D,selectedItemText:se,position:s,isPositioned:ae,searchRef:he,children:f.jsx(qi,{as:k5,allowPinchZoom:!0,children:f.jsx(Pi,{asChild:!0,trapped:T.open,onMountAutoFocus:B=>{B.preventDefault()},onUnmountAutoFocus:ge(r,B=>{T.trigger?.focus({preventScroll:!0}),B.preventDefault()}),children:f.jsx(Li,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:B=>B.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:f.jsx(K,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:B=>B.preventDefault(),...E,...oe,onPlaced:()=>ce(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:ge(E.onKeyDown,B=>{const V=B.ctrlKey||B.altKey||B.metaKey;if(B.key==="Tab"&&B.preventDefault(),!V&&B.key.length===1&&_(B.key),["ArrowUp","ArrowDown","Home","End"].includes(B.key)){let me=te().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(B.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(B.key)){const ye=B.target,ve=me.indexOf(ye);me=me.slice(ve+1)}setTimeout(()=>z(me)),B.preventDefault()}})})})})})})});C1.displayName=T5;var j5="SelectItemAlignedPosition",S1=x.forwardRef((o,e)=>{const{__scopeSelect:t,onPlaced:s,...r}=o,l=Ia(yo,t),c=qa(yo,t),[d,h]=x.useState(null),[p,g]=x.useState(null),m=De(e,P=>g(P)),v=yu(t),w=x.useRef(!1),C=x.useRef(!0),{viewport:S,selectedItem:R,selectedItemText:E,focusSelectedItem:T}=c,N=x.useCallback(()=>{if(l.trigger&&l.valueNode&&d&&p&&S&&R&&E){const P=l.trigger.getBoundingClientRect(),H=p.getBoundingClientRect(),ee=l.valueNode.getBoundingClientRect(),se=E.getBoundingClientRect();if(l.dir!=="rtl"){const ye=se.left-H.left,ve=ee.left-ye,Pe=P.left-ve,Ue=P.width+Pe,at=Math.max(Ue,H.width),We=window.innerWidth-es,jt=Ni(ve,[es,Math.max(es,We-at)]);d.style.minWidth=Ue+"px",d.style.left=jt+"px"}else{const ye=H.right-se.right,ve=window.innerWidth-ee.right-ye,Pe=window.innerWidth-P.right-ve,Ue=P.width+Pe,at=Math.max(Ue,H.width),We=window.innerWidth-es,jt=Ni(ve,[es,Math.max(es,We-at)]);d.style.minWidth=Ue+"px",d.style.right=jt+"px"}const le=v(),te=window.innerHeight-es*2,ae=S.scrollHeight,ce=window.getComputedStyle(p),ue=parseInt(ce.borderTopWidth,10),z=parseInt(ce.paddingTop,10),D=parseInt(ce.borderBottomWidth,10),L=parseInt(ce.paddingBottom,10),Y=ue+z+ae+L+D,he=Math.min(R.offsetHeight*5,Y),_=window.getComputedStyle(S),$=parseInt(_.paddingTop,10),X=parseInt(_.paddingBottom,10),W=P.top+P.height/2-es,K=te-W,oe=R.offsetHeight/2,B=R.offsetTop+oe,V=ue+z+B,pe=Y-V;if(V<=W){const ye=le.length>0&&R===le[le.length-1].ref.current;d.style.bottom="0px";const ve=p.clientHeight-S.offsetTop-S.offsetHeight,Pe=Math.max(K,oe+(ye?X:0)+ve+D),Ue=V+Pe;d.style.height=Ue+"px"}else{const ye=le.length>0&&R===le[0].ref.current;d.style.top="0px";const Pe=Math.max(W,ue+S.offsetTop+(ye?$:0)+oe)+pe;d.style.height=Pe+"px",S.scrollTop=V-W+S.offsetTop}d.style.margin=`${es}px 0`,d.style.minHeight=he+"px",d.style.maxHeight=te+"px",s?.(),requestAnimationFrame(()=>w.current=!0)}},[v,l.trigger,l.valueNode,d,p,S,R,E,l.dir,s]);sn(()=>N(),[N]);const[A,j]=x.useState();sn(()=>{p&&j(window.getComputedStyle(p).zIndex)},[p]);const q=x.useCallback(P=>{P&&C.current===!0&&(N(),T?.(),C.current=!1)},[N,T]);return f.jsx(_5,{scope:t,contentWrapper:d,shouldExpandOnScrollRef:w,onScrollButtonChange:q,children:f.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:f.jsx(Ae.div,{...r,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});S1.displayName=j5;var D5="SelectPopperPosition",bh=x.forwardRef((o,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:r=es,...l}=o,c=vu(t);return f.jsx(vp,{...c,...l,ref:e,align:s,collisionPadding:r,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bh.displayName=D5;var[_5,Np]=Rr(yo,{}),xh="SelectViewport",M1=x.forwardRef((o,e)=>{const{__scopeSelect:t,nonce:s,...r}=o,l=qa(xh,t),c=Np(xh,t),d=De(e,l.onViewportChange),h=x.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),f.jsx(mu.Slot,{scope:t,children:f.jsx(Ae.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ge(r.onScroll,p=>{const g=p.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:v}=c;if(v?.current&&m){const w=Math.abs(h.current-g.scrollTop);if(w>0){const C=window.innerHeight-es*2,S=parseFloat(m.style.minHeight),R=parseFloat(m.style.height),E=Math.max(S,R);if(E<C){const T=E+w,N=Math.min(C,T),A=T-N;m.style.height=N+"px",m.style.bottom==="0px"&&(g.scrollTop=A>0?A:0,m.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});M1.displayName=xh;var E1="SelectGroup",[z5,O5]=Rr(E1),L5=x.forwardRef((o,e)=>{const{__scopeSelect:t,...s}=o,r=ns();return f.jsx(z5,{scope:t,id:r,children:f.jsx(Ae.div,{role:"group","aria-labelledby":r,...s,ref:e})})});L5.displayName=E1;var R1="SelectLabel",N1=x.forwardRef((o,e)=>{const{__scopeSelect:t,...s}=o,r=O5(R1,t);return f.jsx(Ae.div,{id:r.id,...s,ref:e})});N1.displayName=R1;var Ic="SelectItem",[P5,A1]=Rr(Ic),T1=x.forwardRef((o,e)=>{const{__scopeSelect:t,value:s,disabled:r=!1,textValue:l,...c}=o,d=Ia(Ic,t),h=qa(Ic,t),p=d.value===s,[g,m]=x.useState(l??""),[v,w]=x.useState(!1),C=De(e,T=>h.itemRefCallback?.(T,s,r)),S=ns(),R=x.useRef("touch"),E=()=>{r||(d.onValueChange(s),d.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(P5,{scope:t,value:s,disabled:r,textId:S,isSelected:p,onItemTextChange:x.useCallback(T=>{m(N=>N||(T?.textContent??"").trim())},[]),children:f.jsx(mu.ItemSlot,{scope:t,value:s,disabled:r,textValue:g,children:f.jsx(Ae.div,{role:"option","aria-labelledby":S,"data-highlighted":v?"":void 0,"aria-selected":p&&v,"data-state":p?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...c,ref:C,onFocus:ge(c.onFocus,()=>w(!0)),onBlur:ge(c.onBlur,()=>w(!1)),onClick:ge(c.onClick,()=>{R.current!=="mouse"&&E()}),onPointerUp:ge(c.onPointerUp,()=>{R.current==="mouse"&&E()}),onPointerDown:ge(c.onPointerDown,T=>{R.current=T.pointerType}),onPointerMove:ge(c.onPointerMove,T=>{R.current=T.pointerType,r?h.onItemLeave?.():R.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(c.onPointerLeave,T=>{T.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:ge(c.onKeyDown,T=>{h.searchRef?.current!==""&&T.key===" "||(C5.includes(T.key)&&E(),T.key===" "&&T.preventDefault())})})})})});T1.displayName=Ic;var Ci="SelectItemText",k1=x.forwardRef((o,e)=>{const{__scopeSelect:t,className:s,style:r,...l}=o,c=Ia(Ci,t),d=qa(Ci,t),h=A1(Ci,t),p=R5(Ci,t),[g,m]=x.useState(null),v=De(e,E=>m(E),h.onItemTextChange,E=>d.itemTextRefCallback?.(E,h.value,h.disabled)),w=g?.textContent,C=x.useMemo(()=>f.jsx("option",{value:h.value,disabled:h.disabled,children:w},h.value),[h.disabled,h.value,w]),{onNativeOptionAdd:S,onNativeOptionRemove:R}=p;return sn(()=>(S(C),()=>R(C)),[S,R,C]),f.jsxs(f.Fragment,{children:[f.jsx(Ae.span,{id:h.textId,...l,ref:v}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?zi.createPortal(l.children,c.valueNode):null]})});k1.displayName=Ci;var j1="SelectItemIndicator",D1=x.forwardRef((o,e)=>{const{__scopeSelect:t,...s}=o;return A1(j1,t).isSelected?f.jsx(Ae.span,{"aria-hidden":!0,...s,ref:e}):null});D1.displayName=j1;var wh="SelectScrollUpButton",_1=x.forwardRef((o,e)=>{const t=qa(wh,o.__scopeSelect),s=Np(wh,o.__scopeSelect),[r,l]=x.useState(!1),c=De(e,s.onScrollButtonChange);return sn(()=>{if(t.viewport&&t.isPositioned){let d=function(){const p=h.scrollTop>0;l(p)};const h=t.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),r?f.jsx(O1,{...o,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:h}=t;d&&h&&(d.scrollTop=d.scrollTop-h.offsetHeight)}}):null});_1.displayName=wh;var Ch="SelectScrollDownButton",z1=x.forwardRef((o,e)=>{const t=qa(Ch,o.__scopeSelect),s=Np(Ch,o.__scopeSelect),[r,l]=x.useState(!1),c=De(e,s.onScrollButtonChange);return sn(()=>{if(t.viewport&&t.isPositioned){let d=function(){const p=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<p;l(g)};const h=t.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),r?f.jsx(O1,{...o,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:h}=t;d&&h&&(d.scrollTop=d.scrollTop+h.offsetHeight)}}):null});z1.displayName=Ch;var O1=x.forwardRef((o,e)=>{const{__scopeSelect:t,onAutoScroll:s,...r}=o,l=qa("SelectScrollButton",t),c=x.useRef(null),d=yu(t),h=x.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return x.useEffect(()=>()=>h(),[h]),sn(()=>{d().find(g=>g.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),f.jsx(Ae.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ge(r.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(s,50))}),onPointerMove:ge(r.onPointerMove,()=>{l.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(s,50))}),onPointerLeave:ge(r.onPointerLeave,()=>{h()})})}),I5="SelectSeparator",L1=x.forwardRef((o,e)=>{const{__scopeSelect:t,...s}=o;return f.jsx(Ae.div,{"aria-hidden":!0,...s,ref:e})});L1.displayName=I5;var Sh="SelectArrow",q5=x.forwardRef((o,e)=>{const{__scopeSelect:t,...s}=o,r=vu(t),l=Ia(Sh,t),c=qa(Sh,t);return l.open&&c.position==="popper"?f.jsx(bp,{...r,...s,ref:e}):null});q5.displayName=Sh;var H5="SelectBubbleInput",P1=x.forwardRef(({__scopeSelect:o,value:e,...t},s)=>{const r=x.useRef(null),l=De(s,r),c=gu(e);return x.useEffect(()=>{const d=r.current;if(!d)return;const h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==e&&g){const m=new Event("change",{bubbles:!0});g.call(d,e),d.dispatchEvent(m)}},[c,e]),f.jsx(Ae.select,{...t,style:{...f1,...t.style},ref:l,defaultValue:e})});P1.displayName=H5;function I1(o){return o===""||o===void 0}function q1(o){const e=nn(o),t=x.useRef(""),s=x.useRef(0),r=x.useCallback(c=>{const d=t.current+c;e(d),(function h(p){t.current=p,window.clearTimeout(s.current),p!==""&&(s.current=window.setTimeout(()=>h(""),1e3))})(d)},[e]),l=x.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,r,l]}function H1(o,e,t){const r=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,l=t?o.indexOf(t):-1;let c=U5(o,Math.max(l,0));r.length===1&&(c=c.filter(p=>p!==t));const h=c.find(p=>p.textValue.toLowerCase().startsWith(r.toLowerCase()));return h!==t?h:void 0}function U5(o,e){return o.map((t,s)=>o[(e+s)%o.length])}var B5=h1,U1=g1,$5=y1,Q5=v1,G5=b1,B1=x1,K5=M1,$1=N1,Q1=T1,V5=k1,F5=D1,G1=_1,K1=z1,V1=L1;const Y5=B5,X5=$5,F1=x.forwardRef(({className:o,children:e,...t},s)=>f.jsxs(U1,{ref:s,className:Ee("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",o),...t,children:[e,f.jsx(Q5,{asChild:!0,children:f.jsx(Uc,{className:"h-4 w-4 opacity-50"})})]}));F1.displayName=U1.displayName;const Y1=x.forwardRef(({className:o,...e},t)=>f.jsx(G1,{ref:t,className:Ee("flex cursor-default items-center justify-center py-1",o),...e,children:f.jsx(lb,{className:"h-4 w-4"})}));Y1.displayName=G1.displayName;const X1=x.forwardRef(({className:o,...e},t)=>f.jsx(K1,{ref:t,className:Ee("flex cursor-default items-center justify-center py-1",o),...e,children:f.jsx(Uc,{className:"h-4 w-4"})}));X1.displayName=K1.displayName;const W1=x.forwardRef(({className:o,children:e,position:t="popper",...s},r)=>f.jsx(G5,{children:f.jsxs(B1,{ref:r,className:Ee("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:t,...s,children:[f.jsx(Y1,{}),f.jsx(K5,{className:Ee("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),f.jsx(X1,{})]})}));W1.displayName=B1.displayName;const W5=x.forwardRef(({className:o,...e},t)=>f.jsx($1,{ref:t,className:Ee("px-2 py-1.5 text-sm font-semibold",o),...e}));W5.displayName=$1.displayName;const Si=x.forwardRef(({className:o,children:e,...t},s)=>f.jsxs(Q1,{ref:s,className:Ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...t,children:[f.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(F5,{children:f.jsx(Ih,{className:"h-4 w-4"})})}),f.jsx(V5,{children:e})]}));Si.displayName=Q1.displayName;const Z5=x.forwardRef(({className:o,...e},t)=>f.jsx(V1,{ref:t,className:Ee("-mx-1 my-1 h-px bg-muted",o),...e}));Z5.displayName=V1.displayName;var Z1=["PageUp","PageDown"],J1=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],eC={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Nr="Slider",[Mh,J5,ez]=tu(Nr),[tC]=bn(Nr,[ez]),[tz,bu]=tC(Nr),nC=x.forwardRef((o,e)=>{const{name:t,min:s=0,max:r=100,step:l=1,orientation:c="horizontal",disabled:d=!1,minStepsBetweenThumbs:h=0,defaultValue:p=[s],value:g,onValueChange:m=()=>{},onValueCommit:v=()=>{},inverted:w=!1,form:C,...S}=o,R=x.useRef(new Set),E=x.useRef(0),N=c==="horizontal"?nz:sz,[A=[],j]=xs({prop:g,defaultProp:p,onChange:le=>{[...R.current][E.current]?.focus(),m(le)}}),q=x.useRef(A);function P(le){const te=lz(A,le);se(le,te)}function H(le){se(le,E.current)}function ee(){const le=q.current[E.current];A[E.current]!==le&&v(A)}function se(le,te,{commit:ae}={commit:!1}){const ce=fz(l),ue=hz(Math.round((le-s)/l)*l+s,ce),z=Ni(ue,[s,r]);j((D=[])=>{const L=rz(D,z,te);if(dz(L,h*l)){E.current=L.indexOf(z);const Y=String(L)!==String(D);return Y&&ae&&v(L),Y?L:D}else return D})}return f.jsx(tz,{scope:o.__scopeSlider,name:t,disabled:d,min:s,max:r,valueIndexToChangeRef:E,thumbs:R.current,values:A,orientation:c,form:C,children:f.jsx(Mh.Provider,{scope:o.__scopeSlider,children:f.jsx(Mh.Slot,{scope:o.__scopeSlider,children:f.jsx(N,{"aria-disabled":d,"data-disabled":d?"":void 0,...S,ref:e,onPointerDown:ge(S.onPointerDown,()=>{d||(q.current=A)}),min:s,max:r,inverted:w,onSlideStart:d?void 0:P,onSlideMove:d?void 0:H,onSlideEnd:d?void 0:ee,onHomeKeyDown:()=>!d&&se(s,0,{commit:!0}),onEndKeyDown:()=>!d&&se(r,A.length-1,{commit:!0}),onStepKeyDown:({event:le,direction:te})=>{if(!d){const ue=Z1.includes(le.key)||le.shiftKey&&J1.includes(le.key)?10:1,z=E.current,D=A[z],L=l*ue*te;se(D+L,z,{commit:!0})}}})})})})});nC.displayName=Nr;var[sC,aC]=tC(Nr,{startEdge:"left",endEdge:"right",size:"width",direction:1}),nz=x.forwardRef((o,e)=>{const{min:t,max:s,dir:r,inverted:l,onSlideStart:c,onSlideMove:d,onSlideEnd:h,onStepKeyDown:p,...g}=o,[m,v]=x.useState(null),w=De(e,N=>v(N)),C=x.useRef(void 0),S=Cr(r),R=S==="ltr",E=R&&!l||!R&&l;function T(N){const A=C.current||m.getBoundingClientRect(),j=[0,A.width],P=Ap(j,E?[t,s]:[s,t]);return C.current=A,P(N-A.left)}return f.jsx(sC,{scope:o.__scopeSlider,startEdge:E?"left":"right",endEdge:E?"right":"left",direction:E?1:-1,size:"width",children:f.jsx(oC,{dir:S,"data-orientation":"horizontal",...g,ref:w,style:{...g.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const A=T(N.clientX);c?.(A)},onSlideMove:N=>{const A=T(N.clientX);d?.(A)},onSlideEnd:()=>{C.current=void 0,h?.()},onStepKeyDown:N=>{const j=eC[E?"from-left":"from-right"].includes(N.key);p?.({event:N,direction:j?-1:1})}})})}),sz=x.forwardRef((o,e)=>{const{min:t,max:s,inverted:r,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:h,...p}=o,g=x.useRef(null),m=De(e,g),v=x.useRef(void 0),w=!r;function C(S){const R=v.current||g.current.getBoundingClientRect(),E=[0,R.height],N=Ap(E,w?[s,t]:[t,s]);return v.current=R,N(S-R.top)}return f.jsx(sC,{scope:o.__scopeSlider,startEdge:w?"bottom":"top",endEdge:w?"top":"bottom",size:"height",direction:w?1:-1,children:f.jsx(oC,{"data-orientation":"vertical",...p,ref:m,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:S=>{const R=C(S.clientY);l?.(R)},onSlideMove:S=>{const R=C(S.clientY);c?.(R)},onSlideEnd:()=>{v.current=void 0,d?.()},onStepKeyDown:S=>{const E=eC[w?"from-bottom":"from-top"].includes(S.key);h?.({event:S,direction:E?-1:1})}})})}),oC=x.forwardRef((o,e)=>{const{__scopeSlider:t,onSlideStart:s,onSlideMove:r,onSlideEnd:l,onHomeKeyDown:c,onEndKeyDown:d,onStepKeyDown:h,...p}=o,g=bu(Nr,t);return f.jsx(Ae.span,{...p,ref:e,onKeyDown:ge(o.onKeyDown,m=>{m.key==="Home"?(c(m),m.preventDefault()):m.key==="End"?(d(m),m.preventDefault()):Z1.concat(J1).includes(m.key)&&(h(m),m.preventDefault())}),onPointerDown:ge(o.onPointerDown,m=>{const v=m.target;v.setPointerCapture(m.pointerId),m.preventDefault(),g.thumbs.has(v)?v.focus():s(m)}),onPointerMove:ge(o.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&r(m)}),onPointerUp:ge(o.onPointerUp,m=>{const v=m.target;v.hasPointerCapture(m.pointerId)&&(v.releasePointerCapture(m.pointerId),l(m))})})}),rC="SliderTrack",iC=x.forwardRef((o,e)=>{const{__scopeSlider:t,...s}=o,r=bu(rC,t);return f.jsx(Ae.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...s,ref:e})});iC.displayName=rC;var Eh="SliderRange",lC=x.forwardRef((o,e)=>{const{__scopeSlider:t,...s}=o,r=bu(Eh,t),l=aC(Eh,t),c=x.useRef(null),d=De(e,c),h=r.values.length,p=r.values.map(v=>dC(v,r.min,r.max)),g=h>1?Math.min(...p):0,m=100-Math.max(...p);return f.jsx(Ae.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:d,style:{...o.style,[l.startEdge]:g+"%",[l.endEdge]:m+"%"}})});lC.displayName=Eh;var Rh="SliderThumb",cC=x.forwardRef((o,e)=>{const t=J5(o.__scopeSlider),[s,r]=x.useState(null),l=De(e,d=>r(d)),c=x.useMemo(()=>s?t().findIndex(d=>d.ref.current===s):-1,[t,s]);return f.jsx(az,{...o,ref:l,index:c})}),az=x.forwardRef((o,e)=>{const{__scopeSlider:t,index:s,name:r,...l}=o,c=bu(Rh,t),d=aC(Rh,t),[h,p]=x.useState(null),g=De(e,T=>p(T)),m=h?c.form||!!h.closest("form"):!0,v=cu(h),w=c.values[s],C=w===void 0?0:dC(w,c.min,c.max),S=iz(s,c.values.length),R=v?.[d.size],E=R?cz(R,C,d.direction):0;return x.useEffect(()=>{if(h)return c.thumbs.add(h),()=>{c.thumbs.delete(h)}},[h,c.thumbs]),f.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${C}% + ${E}px)`},children:[f.jsx(Mh.ItemSlot,{scope:o.__scopeSlider,children:f.jsx(Ae.span,{role:"slider","aria-label":o["aria-label"]||S,"aria-valuemin":c.min,"aria-valuenow":w,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...l,ref:g,style:w===void 0?{display:"none"}:o.style,onFocus:ge(o.onFocus,()=>{c.valueIndexToChangeRef.current=s})})}),m&&f.jsx(uC,{name:r??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:w},s)]})});cC.displayName=Rh;var oz="RadioBubbleInput",uC=x.forwardRef(({__scopeSlider:o,value:e,...t},s)=>{const r=x.useRef(null),l=De(r,s),c=gu(e);return x.useEffect(()=>{const d=r.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==e&&g){const m=new Event("input",{bubbles:!0});g.call(d,e),d.dispatchEvent(m)}},[c,e]),f.jsx(Ae.input,{style:{display:"none"},...t,ref:l,defaultValue:e})});uC.displayName=oz;function rz(o=[],e,t){const s=[...o];return s[t]=e,s.sort((r,l)=>r-l)}function dC(o,e,t){const l=100/(t-e)*(o-e);return Ni(l,[0,100])}function iz(o,e){return e>2?`Value ${o+1} of ${e}`:e===2?["Minimum","Maximum"][o]:void 0}function lz(o,e){if(o.length===1)return 0;const t=o.map(r=>Math.abs(r-e)),s=Math.min(...t);return t.indexOf(s)}function cz(o,e,t){const s=o/2,l=Ap([0,50],[0,s]);return(s-l(e)*t)*t}function uz(o){return o.slice(0,-1).map((e,t)=>o[t+1]-e)}function dz(o,e){if(e>0){const t=uz(o);return Math.min(...t)>=e}return!0}function Ap(o,e){return t=>{if(o[0]===o[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(o[1]-o[0]);return e[0]+s*(t-o[0])}}function fz(o){return(String(o).split(".")[1]||"").length}function hz(o,e){const t=Math.pow(10,e);return Math.round(o*t)/t}var fC=nC,pz=iC,gz=lC,mz=cC;const ts=x.forwardRef(({className:o,...e},t)=>f.jsxs(fC,{ref:t,className:Ee("relative flex w-full touch-none select-none items-center",o),...e,children:[f.jsx(pz,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:f.jsx(gz,{className:"absolute h-full bg-primary"})}),f.jsx(mz,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));ts.displayName=fC.displayName;var xu="Switch",[yz]=bn(xu),[vz,bz]=yz(xu),hC=x.forwardRef((o,e)=>{const{__scopeSwitch:t,name:s,checked:r,defaultChecked:l,required:c,disabled:d,value:h="on",onCheckedChange:p,form:g,...m}=o,[v,w]=x.useState(null),C=De(e,N=>w(N)),S=x.useRef(!1),R=v?g||!!v.closest("form"):!0,[E,T]=xs({prop:r,defaultProp:l??!1,onChange:p,caller:xu});return f.jsxs(vz,{scope:t,checked:E,disabled:d,children:[f.jsx(Ae.button,{type:"button",role:"switch","aria-checked":E,"aria-required":c,"data-state":yC(E),"data-disabled":d?"":void 0,disabled:d,value:h,...m,ref:C,onClick:ge(o.onClick,N=>{T(A=>!A),R&&(S.current=N.isPropagationStopped(),S.current||N.stopPropagation())})}),R&&f.jsx(mC,{control:v,bubbles:!S.current,name:s,value:h,checked:E,required:c,disabled:d,form:g,style:{transform:"translateX(-100%)"}})]})});hC.displayName=xu;var pC="SwitchThumb",gC=x.forwardRef((o,e)=>{const{__scopeSwitch:t,...s}=o,r=bz(pC,t);return f.jsx(Ae.span,{"data-state":yC(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:e})});gC.displayName=pC;var xz="SwitchBubbleInput",mC=x.forwardRef(({__scopeSwitch:o,control:e,checked:t,bubbles:s=!0,...r},l)=>{const c=x.useRef(null),d=De(c,l),h=gu(t),p=cu(e);return x.useEffect(()=>{const g=c.current;if(!g)return;const m=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(m,"checked").set;if(h!==t&&w){const C=new Event("click",{bubbles:s});w.call(g,t),g.dispatchEvent(C)}},[h,t,s]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:d,style:{...r.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});mC.displayName=xz;function yC(o){return o?"checked":"unchecked"}var vC=hC,wz=gC;const co=x.forwardRef(({className:o,...e},t)=>f.jsx(vC,{className:Ee("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",o),...e,ref:t,children:f.jsx(wz,{className:Ee("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));co.displayName=vC.displayName;const Tn=x.forwardRef(({className:o,...e},t)=>f.jsx("div",{ref:t,className:Ee("rounded-xl border bg-card text-card-foreground shadow",o),...e}));Tn.displayName="Card";const Ws=x.forwardRef(({className:o,...e},t)=>f.jsx("div",{ref:t,className:Ee("flex flex-col space-y-1.5 p-6",o),...e}));Ws.displayName="CardHeader";const Zs=x.forwardRef(({className:o,...e},t)=>f.jsx("div",{ref:t,className:Ee("font-semibold leading-none tracking-tight",o),...e}));Zs.displayName="CardTitle";const gr=x.forwardRef(({className:o,...e},t)=>f.jsx("div",{ref:t,className:Ee("text-sm text-muted-foreground",o),...e}));gr.displayName="CardDescription";const Js=x.forwardRef(({className:o,...e},t)=>f.jsx("div",{ref:t,className:Ee("p-6 pt-0",o),...e}));Js.displayName="CardContent";const Cz=x.forwardRef(({className:o,...e},t)=>f.jsx("div",{ref:t,className:Ee("flex items-center p-6 pt-0",o),...e}));Cz.displayName="CardFooter";const Sz=_h("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Qt({className:o,variant:e,...t}){return f.jsx("div",{className:Ee(Sz({variant:e}),o),...t})}const Ei={heading:{h1:"text-2xl font-bold text-foreground",h2:"text-lg font-semibold text-foreground",h3:"text-sm font-semibold text-foreground",h4:"text-xs font-semibold text-foreground",h5:"text-[10px] font-semibold text-muted-foreground uppercase"},body:{base:"text-sm text-foreground",small:"text-xs text-foreground",micro:"text-[10px] text-foreground"},muted:{base:"text-sm text-muted-foreground",small:"text-xs text-muted-foreground",micro:"text-[10px] text-muted-foreground"},mono:{base:"font-mono text-sm text-foreground",small:"font-mono text-xs text-foreground",micro:"font-mono text-[10px] text-foreground"},status:{success:"text-success",warning:"text-warning",error:"text-destructive",info:"text-primary"}},ms=x.forwardRef(({level:o,as:e,className:t,children:s,...r},l)=>{const c=e||`h${o}`,d=`h${o}`;return f.jsx(c,{ref:l,className:Ee(Ei.heading[d],t),...r,children:s})});ms.displayName="Heading";const Ye=x.forwardRef(({size:o="base",muted:e=!1,mono:t=!1,as:s="p",className:r,children:l,...c},d)=>{const h=s;let p;return t?p=Ei.mono[o]:e?p=Ei.muted[o]:p=Ei.body[o],f.jsx(h,{ref:d,className:Ee(p,r),...c,children:l})});Ye.displayName="Text";const lo=x.forwardRef(({status:o,size:e="base",weight:t="normal",as:s="span",className:r,children:l,...c},d)=>{const h=s,p={base:"text-sm",small:"text-xs",micro:"text-[10px]"},g={normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold"};return f.jsx(h,{ref:d,className:Ee(p[e],g[t],Ei.status[o],r),...c,children:l})});lo.displayName="StatusText";const Mz=x.forwardRef(({as:o="h2",className:e,children:t,...s},r)=>f.jsx(ms,{ref:r,level:1,as:o,className:e,...s,children:t}));Mz.displayName="PageTitle";const Ez=x.forwardRef(({as:o="h3",className:e,children:t,...s},r)=>f.jsx(ms,{ref:r,level:2,as:o,className:e,...s,children:t}));Ez.displayName="SectionTitle";const Xs=x.forwardRef(({as:o="h3",className:e,children:t,...s},r)=>f.jsx(ms,{ref:r,level:3,as:o,className:e,...s,children:t}));Xs.displayName="PanelTitle";const Rz=x.forwardRef(({as:o="p",className:e,children:t,...s},r)=>f.jsx(Ye,{ref:r,size:"base",muted:!0,as:o,className:Ee("mt-1",e),...s,children:t}));Rz.displayName="Description";function Nz({connection:o,onUpdate:e}){const t=o.data||{},{isRunning:s}=kt(),{getConnectionMessages:r,getMessageHistory:l}=Da(),[c,d]=x.useState([]),[h,p]=x.useState([]);x.useEffect(()=>{if(!s){d([]),p([]);return}const E=setInterval(()=>{const T=r(o.id),N=l(50).filter(A=>A.connectionId===o.id);d(T),p(N)},200);return()=>clearInterval(E)},[s,o.id,r,l]);const g=E=>{const T={...t,...E};e(o.id,{data:T})},m=E=>{g({latencyMs:Math.max(0,E)})},v=E=>{g({bandwidthMbps:Math.max(1,E)})},w=E=>{g({packetLossPercent:Math.max(0,Math.min(100,E))})},C=E=>{g({jitterMs:Math.max(0,E)})},S=E=>{g({retryCount:Math.max(0,E)})},R=E=>{g({timeoutMs:Math.max(1e3,E)})};return f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx(Xs,{children:"Connection"}),f.jsxs("div",{className:"space-y-0.5",children:[f.jsxs(Ye,{size:"micro",muted:!0,children:["From: ",o.source]}),f.jsxs(Ye,{size:"micro",muted:!0,children:["To: ",o.target]}),f.jsxs(Ye,{size:"micro",muted:!0,children:["Type: ",o.type]})]})]}),f.jsxs("div",{className:"border-t border-border pt-2 space-y-2",children:[f.jsxs("div",{children:[f.jsx(ms,{level:5,className:"mb-1.5 opacity-70",children:"Network Parameters"}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(st,{className:"text-xs",children:"Latency (ms)"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:t.latencyMs??0})]}),f.jsx(ts,{value:[t.latencyMs??0],onValueChange:E=>m(E[0]),min:0,max:5e3,step:10,className:"w-full"}),f.jsx(Tt,{type:"number",value:t.latencyMs??0,onChange:E=>m(parseInt(E.target.value)||0),placeholder:"0-5000",className:"h-7 text-xs"})]}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(st,{className:"text-xs",children:"Bandwidth (Mbps)"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:t.bandwidthMbps??1e3})]}),f.jsx(ts,{value:[t.bandwidthMbps??1e3],onValueChange:E=>v(E[0]),min:1,max:1e5,step:10,className:"w-full"}),f.jsx(Tt,{type:"number",value:t.bandwidthMbps??1e3,onChange:E=>v(parseInt(E.target.value)||1e3),placeholder:"1-100000",className:"h-7 text-xs"})]}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(st,{className:"text-xs",children:"Packet Loss (%)"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:t.packetLossPercent??0})]}),f.jsx(ts,{value:[t.packetLossPercent??0],onValueChange:E=>w(E[0]),min:0,max:100,step:.1,className:"w-full"}),f.jsx(Tt,{type:"number",step:"0.1",value:t.packetLossPercent??0,onChange:E=>w(parseFloat(E.target.value)||0),placeholder:"0-100",className:"h-7 text-xs"})]}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(st,{className:"text-xs",children:"Jitter (ms)"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:t.jitterMs??0})]}),f.jsx(ts,{value:[t.jitterMs??0],onValueChange:E=>C(E[0]),min:0,max:1e3,step:5,className:"w-full"}),f.jsx(Tt,{type:"number",value:t.jitterMs??0,onChange:E=>C(parseInt(E.target.value)||0),placeholder:"0-1000",className:"h-7 text-xs"})]})]}),f.jsxs("div",{className:"border-t border-border pt-2",children:[f.jsx("h4",{className:"text-[9px] font-semibold text-foreground mb-1.5 uppercase opacity-70",children:"Traffic Characteristics"}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsx(st,{className:"text-xs",children:"Priority Level"}),f.jsxs(Y5,{value:t.priorityLevel||"medium",onValueChange:E=>g({priorityLevel:E}),children:[f.jsx(F1,{className:"h-7 text-[11px]",children:f.jsx(X5,{})}),f.jsxs(W1,{children:[f.jsx(Si,{value:"low",children:"Low"}),f.jsx(Si,{value:"medium",children:"Medium"}),f.jsx(Si,{value:"high",children:"High"}),f.jsx(Si,{value:"critical",children:"Critical"})]})]})]}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(st,{className:"text-xs",children:"Retry Count"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:t.retryCount??3})]}),f.jsx(ts,{value:[t.retryCount??3],onValueChange:E=>S(E[0]),min:0,max:10,step:1,className:"w-full"}),f.jsx(Tt,{type:"number",value:t.retryCount??3,onChange:E=>S(parseInt(E.target.value)||0),placeholder:"0-10",className:"h-7 text-xs"})]}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(st,{className:"text-xs",children:"Timeout (ms)"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:t.timeoutMs??3e4})]}),f.jsx(ts,{value:[t.timeoutMs??3e4],onValueChange:E=>R(E[0]),min:1e3,max:12e4,step:1e3,className:"w-full"}),f.jsx(Tt,{type:"number",value:t.timeoutMs??3e4,onChange:E=>R(parseInt(E.target.value)||3e4),placeholder:"1000-120000",className:"h-7 text-xs"})]})]}),f.jsxs("div",{className:"border-t border-border pt-2",children:[f.jsx(ms,{level:5,className:"mb-1.5 opacity-70",children:"Monitoring"}),f.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-accent/20 rounded-md",children:[f.jsx(st,{className:"text-xs cursor-pointer",children:"Enable Monitoring"}),f.jsx(co,{checked:t.enableMonitoring??!1,onCheckedChange:E=>g({enableMonitoring:E})})]})]}),f.jsx(Tn,{className:"bg-card/50 border-border/50 p-1.5 mt-2",children:f.jsxs("div",{className:"space-y-0.5",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx(Ye,{size:"micro",muted:!0,children:"Effective Bandwidth:"}),f.jsxs(Ye,{mono:!0,size:"micro",children:[Math.max(1,(t.bandwidthMbps??1e3)*(1-(t.packetLossPercent??0)/100)).toFixed(2)," Mbps"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx(Ye,{size:"micro",muted:!0,children:"Effective Latency:"}),f.jsxs(Ye,{mono:!0,size:"micro",children:[((t.latencyMs??0)+(t.jitterMs??0)/2).toFixed(0)," ms"]})]})]})}),s&&f.jsx("div",{className:"border-t border-border pt-2 mt-2",children:f.jsxs(lp,{defaultValue:"active",className:"w-full",children:[f.jsxs(au,{className:"grid w-full grid-cols-2 h-7",children:[f.jsxs(hs,{value:"active",className:"text-xs px-2",children:[f.jsx(ho,{className:"h-3 w-3 mr-1"}),"Active (",c.length,")"]}),f.jsxs(hs,{value:"history",className:"text-xs px-2",children:[f.jsx(Y0,{className:"h-3 w-3 mr-1"}),"History (",h.length,")"]})]}),f.jsx(_a,{value:"active",className:"mt-1.5 space-y-1",children:c.length===0?f.jsxs("div",{className:"text-center py-3",children:[f.jsx(ho,{className:"h-5 w-5 mx-auto mb-1 opacity-50"}),f.jsx(Ye,{size:"micro",muted:!0,children:"No active messages"})]}):f.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:c.map((E,T)=>f.jsxs(Tn,{className:"p-1 border-border/50",children:[f.jsx("div",{className:"flex items-start justify-between gap-1.5",children:f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(Qt,{variant:"outline",className:"text-xs px-0.5 py-0",children:E.format}),f.jsx(Qt,{variant:E.status==="delivered"?"default":E.status==="failed"?"destructive":E.status==="transformed"?"secondary":"outline",className:"text-xs px-0.5 py-0",children:E.status})]}),f.jsxs("div",{className:"text-[9px] text-muted-foreground space-y-0.5",children:[f.jsxs("div",{children:["Size: ",(E.size/1024).toFixed(2)," KB"]}),E.latency&&f.jsxs("div",{children:["Latency: ",E.latency.toFixed(0)," ms"]})]}),E.error&&f.jsxs("div",{className:"text-[10px] text-destructive mt-0.5 flex items-center gap-0.5",children:[f.jsx(Ri,{className:"h-2.5 w-2.5"}),E.error]})]})}),E.payload&&f.jsxs("details",{className:"mt-1",children:[f.jsx("summary",{className:"text-[9px] cursor-pointer text-muted-foreground hover:text-foreground",children:"Show Data"}),f.jsx("pre",{className:"mt-1 p-1 bg-muted rounded text-[9px] overflow-x-auto max-h-32 overflow-y-auto",children:JSON.stringify(E.payload,null,2)})]})]},E.id||T))})}),f.jsx(_a,{value:"history",className:"mt-1.5 space-y-1",children:h.length===0?f.jsxs("div",{className:"text-center py-3",children:[f.jsx(Y0,{className:"h-5 w-5 mx-auto mb-1 opacity-50"}),f.jsx(Ye,{size:"micro",muted:!0,children:"History is empty"})]}):f.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:h.map((E,T)=>f.jsxs(Tn,{className:"p-1 border-border/50",children:[f.jsx("div",{className:"flex items-start justify-between gap-1.5",children:f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(Qt,{variant:"outline",className:"text-xs px-0.5 py-0",children:E.format}),f.jsx(Qt,{variant:E.status==="delivered"?"default":E.status==="failed"?"destructive":"outline",className:"text-xs px-0.5 py-0",children:E.status}),f.jsx("span",{className:"text-[9px] text-muted-foreground",children:new Date(E.timestamp).toLocaleTimeString()})]}),f.jsxs("div",{className:"text-[9px] text-muted-foreground space-y-0.5",children:[f.jsxs("div",{children:["Size: ",(E.size/1024).toFixed(2)," KB"]}),E.latency&&f.jsxs("div",{children:["Latency: ",E.latency.toFixed(0)," ms"]})]}),E.error&&f.jsxs("div",{className:"text-[10px] text-destructive mt-0.5 flex items-center gap-0.5",children:[f.jsx(Ri,{className:"h-2.5 w-2.5"}),E.error]})]})}),E.payload&&f.jsxs("details",{className:"mt-1",children:[f.jsx("summary",{className:"text-[9px] cursor-pointer text-muted-foreground hover:text-foreground",children:"Show Data"}),f.jsx("pre",{className:"mt-1 p-1 bg-muted rounded text-[9px] overflow-x-auto max-h-32 overflow-y-auto",children:JSON.stringify(E.payload,null,2)})]})]},E.id||T))})})]})})]})]})}function Az(o){const e=Tz(o),t=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(jz);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(e,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(e,{...c,ref:r,children:l})});return t.displayName=`${o}.Slot`,t}function Tz(o){const e=x.forwardRef((t,s)=>{const{children:r,...l}=t;if(x.isValidElement(r)){const c=_z(r),d=Dz(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${o}.SlotClone`,e}var kz=Symbol("radix.slottable");function jz(o){return x.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===kz}function Dz(o,e){const t={...e};for(const s in e){const r=o[s],l=e[s];/^on[A-Z]/.test(s)?r&&l?t[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(t[s]=r):s==="style"?t[s]={...r,...l}:s==="className"&&(t[s]=[r,l].filter(Boolean).join(" "))}return{...o,...t}}function _z(o){let e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}var wu="Popover",[bC]=bn(wu,[Er]),Qi=Er(),[zz,Ha]=bC(wu),xC=o=>{const{__scopePopover:e,children:t,open:s,defaultOpen:r,onOpenChange:l,modal:c=!1}=o,d=Qi(e),h=x.useRef(null),[p,g]=x.useState(!1),[m,v]=xs({prop:s,defaultProp:r??!1,onChange:l,caller:wu});return f.jsx(yp,{...d,children:f.jsx(zz,{scope:e,contentId:ns(),triggerRef:h,open:m,onOpenChange:v,onOpenToggle:x.useCallback(()=>v(w=>!w),[v]),hasCustomAnchor:p,onCustomAnchorAdd:x.useCallback(()=>g(!0),[]),onCustomAnchorRemove:x.useCallback(()=>g(!1),[]),modal:c,children:t})})};xC.displayName=wu;var wC="PopoverAnchor",Oz=x.forwardRef((o,e)=>{const{__scopePopover:t,...s}=o,r=Ha(wC,t),l=Qi(t),{onCustomAnchorAdd:c,onCustomAnchorRemove:d}=r;return x.useEffect(()=>(c(),()=>d()),[c,d]),f.jsx(uu,{...l,...s,ref:e})});Oz.displayName=wC;var CC="PopoverTrigger",SC=x.forwardRef((o,e)=>{const{__scopePopover:t,...s}=o,r=Ha(CC,t),l=Qi(t),c=De(e,r.triggerRef),d=f.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":AC(r.open),...s,ref:c,onClick:ge(o.onClick,r.onOpenToggle)});return r.hasCustomAnchor?d:f.jsx(uu,{asChild:!0,...l,children:d})});SC.displayName=CC;var Tp="PopoverPortal",[Lz,Pz]=bC(Tp,{forceMount:void 0}),MC=o=>{const{__scopePopover:e,forceMount:t,children:s,container:r}=o,l=Ha(Tp,e);return f.jsx(Lz,{scope:e,forceMount:t,children:f.jsx(rn,{present:t||l.open,children:f.jsx(Ii,{asChild:!0,container:r,children:s})})})};MC.displayName=Tp;var vr="PopoverContent",EC=x.forwardRef((o,e)=>{const t=Pz(vr,o.__scopePopover),{forceMount:s=t.forceMount,...r}=o,l=Ha(vr,o.__scopePopover);return f.jsx(rn,{present:s||l.open,children:l.modal?f.jsx(qz,{...r,ref:e}):f.jsx(Hz,{...r,ref:e})})});EC.displayName=vr;var Iz=Az("PopoverContent.RemoveScroll"),qz=x.forwardRef((o,e)=>{const t=Ha(vr,o.__scopePopover),s=x.useRef(null),r=De(e,s),l=x.useRef(!1);return x.useEffect(()=>{const c=s.current;if(c)return Fc(c)},[]),f.jsx(qi,{as:Iz,allowPinchZoom:!0,children:f.jsx(RC,{...o,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(o.onCloseAutoFocus,c=>{c.preventDefault(),l.current||t.triggerRef.current?.focus()}),onPointerDownOutside:ge(o.onPointerDownOutside,c=>{const d=c.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,p=d.button===2||h;l.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:ge(o.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),Hz=x.forwardRef((o,e)=>{const t=Ha(vr,o.__scopePopover),s=x.useRef(!1),r=x.useRef(!1);return f.jsx(RC,{...o,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{o.onCloseAutoFocus?.(l),l.defaultPrevented||(s.current||t.triggerRef.current?.focus(),l.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:l=>{o.onInteractOutside?.(l),l.defaultPrevented||(s.current=!0,l.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const c=l.target;t.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&r.current&&l.preventDefault()}})}),RC=x.forwardRef((o,e)=>{const{__scopePopover:t,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:g,...m}=o,v=Ha(vr,t),w=Qi(t);return Kc(),f.jsx(Pi,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:l,children:f.jsx(Li,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:g,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onDismiss:()=>v.onOpenChange(!1),children:f.jsx(vp,{"data-state":AC(v.open),role:"dialog",id:v.contentId,...w,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),NC="PopoverClose",Uz=x.forwardRef((o,e)=>{const{__scopePopover:t,...s}=o,r=Ha(NC,t);return f.jsx(Ae.button,{type:"button",...s,ref:e,onClick:ge(o.onClick,()=>r.onOpenChange(!1))})});Uz.displayName=NC;var Bz="PopoverArrow",$z=x.forwardRef((o,e)=>{const{__scopePopover:t,...s}=o,r=Qi(t);return f.jsx(bp,{...r,...s,ref:e})});$z.displayName=Bz;function AC(o){return o?"open":"closed"}var Qz=xC,Gz=SC,Kz=MC,TC=EC;const Vz=Qz,Fz=Gz,kC=x.forwardRef(({className:o,align:e="center",sideOffset:t=4,...s},r)=>f.jsx(Kz,{children:f.jsx(TC,{ref:r,align:e,sideOffset:t,className:Ee("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",o),...s})}));kC.displayName=TC.displayName;const jC=Ss((o,e)=>({componentStates:new Map,setComponentState:(t,s,r)=>{dr.setComponentState(t,s,r);const l=dr.getComponentState(t);l&&o(c=>({componentStates:new Map(c.componentStates).set(t,l)}))},resetComponent:t=>{dr.resetComponent(t),o(s=>{const r=new Map(s.componentStates);return r.delete(t),{componentStates:r}})},resetAll:()=>{dr.reset(),o({componentStates:new Map})},getComponentState:t=>e().componentStates.get(t),isEnabled:t=>dr.isEnabled(t),getAllStates:()=>Array.from(e().componentStates.values())}));function Yz({componentId:o,componentLabel:e}){const{isRunning:t}=kt(),{getComponentState:s,setComponentState:r,resetComponent:l}=jC(),c=s(o),d=c?.state||"enabled",[h,p]=x.useState(c?.degradedLevel||.5),[g,m]=x.useState(c?.failureRate||.1),[v,w]=x.useState(c?.latencyMultiplier||2),[C,S]=x.useState(c?.throughputMultiplier||.5),R=A=>{A==="degraded"?r(o,A,{degradedLevel:h,failureRate:g,latencyMultiplier:v,throughputMultiplier:C}):r(o,A)},E=()=>{l(o),p(.5),m(.1),w(2),S(.5)},T=A=>{switch(A){case"enabled":return"bg-green-500/20 text-green-500 border-green-500/50";case"disabled":return"bg-gray-500/20 text-gray-500 border-gray-500/50";case"degraded":return"bg-yellow-500/20 text-yellow-500 border-yellow-500/50";case"failed":return"bg-red-500/20 text-red-500 border-red-500/50"}},N=A=>{switch(A){case"enabled":return f.jsx(Kf,{className:"w-4 h-4"});case"disabled":return f.jsx(bc,{className:"w-4 h-4"});case"degraded":return f.jsx(ys,{className:"w-4 h-4"});case"failed":return f.jsx(uo,{className:"w-4 h-4"})}};return f.jsxs(Tn,{className:"border",children:[f.jsx(Ws,{className:"p-2 pb-1.5",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsxs(Zs,{className:"text-[11px] flex items-center gap-1",children:[f.jsx(ho,{className:"w-3 h-3"}),"Component State",f.jsxs(Vz,{children:[f.jsx(Fz,{asChild:!0,children:f.jsx(Te,{variant:"ghost",size:"icon",className:"h-3.5 w-3.5 rounded-full",children:f.jsx(R2,{className:"w-2.5 h-2.5 text-muted-foreground"})})}),f.jsx(kC,{className:"w-72 text-xs",align:"start",children:f.jsxs("div",{className:"space-y-2",children:[f.jsx("h4",{className:"font-semibold text-sm",children:"Component States"}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(Kf,{className:"w-3.5 h-3.5 text-green-500 mt-0.5 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-green-500",children:"Enabled"}),f.jsx("span",{className:"text-muted-foreground",children:"  normal operation"})]})]}),f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(bc,{className:"w-3.5 h-3.5 text-gray-500 mt-0.5 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-gray-500",children:"Disabled"}),f.jsx("span",{className:"text-muted-foreground",children:"  turned off. Throughput=0, Errors=100%"})]})]}),f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(ys,{className:"w-3.5 h-3.5 text-yellow-500 mt-0.5 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-yellow-500",children:"Degraded"}),f.jsx("span",{className:"text-muted-foreground",children:"  partial failure. Throughput 50%, Latency 2x, Errors 10%"})]})]}),f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(uo,{className:"w-3.5 h-3.5 text-red-500 mt-0.5 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-red-500",children:"Failed"}),f.jsx("span",{className:"text-muted-foreground",children:"  crashed. Same as Disabled but indicates failure"})]})]})]}),f.jsx("p",{className:"text-muted-foreground pt-1 border-t border-border",children:"Use to simulate failures and test architecture resilience."})]})})]})]}),f.jsx(gr,{className:"text-[9px] mt-0.5",children:"Control operational state"})]}),c&&f.jsxs(Qt,{variant:"outline",className:`${T(d)} text-xs px-1 py-0.5`,children:[N(d),f.jsx("span",{className:"ml-0.5",children:d.toUpperCase()})]})]})}),f.jsxs(Js,{className:"p-2 pt-1.5 space-y-2",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[f.jsxs(Te,{variant:d==="enabled"?"default":"outline",size:"sm",onClick:()=>R("enabled"),className:"flex items-center gap-1 h-7 text-xs",disabled:!t,children:[f.jsx(Kf,{className:"w-3.5 h-3.5"}),"Enabled"]}),f.jsxs(Te,{variant:d==="disabled"?"destructive":"outline",size:"sm",onClick:()=>R("disabled"),className:"flex items-center gap-1 h-7 text-xs",disabled:!t,children:[f.jsx(bc,{className:"w-3.5 h-3.5"}),"Disabled"]}),f.jsxs(Te,{variant:d==="degraded"?"default":"outline",size:"sm",onClick:()=>R("degraded"),className:"flex items-center gap-1 h-7 text-xs bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-600 dark:text-yellow-400",disabled:!t,children:[f.jsx(ys,{className:"w-3.5 h-3.5"}),"Degraded"]}),f.jsxs(Te,{variant:d==="failed"?"destructive":"outline",size:"sm",onClick:()=>R("failed"),className:"flex items-center gap-1 h-7 text-xs",disabled:!t,children:[f.jsx(uo,{className:"w-3.5 h-3.5"}),"Failed"]})]}),d==="degraded"&&f.jsxs("div",{className:"space-y-2 p-2 bg-yellow-500/10 rounded-lg border border-yellow-500/20",children:[f.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[f.jsx(fb,{className:"w-3 h-3 text-yellow-600 dark:text-yellow-400"}),f.jsx(st,{className:"text-[11px] font-semibold text-yellow-600 dark:text-yellow-400",children:"Degradation Settings"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[f.jsx(st,{className:"text-[10px]",children:"Degradation Level"}),f.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[(h*100).toFixed(0),"%"]})]}),f.jsx(ts,{value:[h],onValueChange:A=>{p(A[0]),R("degraded")},min:0,max:1,step:.1,className:"w-full"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[f.jsx(st,{className:"text-[10px]",children:"Failure Rate"}),f.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[(g*100).toFixed(0),"%"]})]}),f.jsx(ts,{value:[g],onValueChange:A=>{m(A[0]),R("degraded")},min:0,max:1,step:.05,className:"w-full"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[f.jsx(st,{className:"text-[10px]",children:"Latency Multiplier"}),f.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[v.toFixed(1),"x"]})]}),f.jsx(ts,{value:[v],onValueChange:A=>{w(A[0]),R("degraded")},min:1,max:5,step:.1,className:"w-full"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[f.jsx(st,{className:"text-[10px]",children:"Throughput Multiplier"}),f.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[(C*100).toFixed(0),"%"]})]}),f.jsx(ts,{value:[C],onValueChange:A=>{S(A[0]),R("degraded")},min:0,max:1,step:.05,className:"w-full"})]})]})]}),c&&f.jsxs(Te,{variant:"outline",size:"sm",onClick:E,className:"w-full flex items-center gap-1 h-7 text-xs",disabled:!t,children:[f.jsx(db,{className:"w-3.5 h-3.5"}),"Reset to Normal"]}),!t&&f.jsxs("div",{className:"flex items-center gap-1 p-1 bg-muted rounded text-[9px] text-muted-foreground",children:[f.jsx(Ri,{className:"w-3 h-3"}),"Start emulation to control component state"]})]})]})}function Xz({onFilterChange:o}){const{nodes:e,connections:t,selectNode:s}=Re(),{isRunning:r,getComponentMetrics:l}=kt(),{getAllComponentStatuses:c}=fo(),[d,h]=x.useState(""),[p,g]=x.useState(!1),[m,v]=x.useState(!0),[w,C]=x.useState(!0),[S,R]=x.useState(!0),[E,T]=x.useState(!0),[N,A]=x.useState(100),[j,q]=x.useState(5),[P,H]=x.useState(new Set),ee=Et.useMemo(()=>r?e.filter(ae=>{if(d&&!ae.data.label.toLowerCase().includes(d.toLowerCase()))return!1;if(!p)return!0;const ce=l(ae.id),z=c().find(D=>D.nodeId===ae.id);return!!(m&&t.some(L=>L.source===ae.id||L.target===ae.id?kt.getState().getConnectionMetrics(L.id)?.bottleneck:!1)||w&&ce&&ce.errorRate*100>=j||E&&ce&&ce.latency>=N||S&&z?.criticalPath||z&&(z.health==="critical"||z.health==="down"))}):e,[d,p,m,w,E,S,N,j,r,e,t]);Et.useEffect(()=>{if(p){const ae=new Set(ee.map(ce=>ce.id));H(ae),o?.(Array.from(ae))}else H(new Set),o?.(e.map(ae=>ae.id))},[p,ee,e,o]);const se=ae=>{s(ae)},le=ee.length,te=e.filter(ae=>{if(!r)return!1;const ce=l(ae.id),z=c().find(D=>D.nodeId===ae.id);return ce&&(ce.errorRate*100>=j||ce.latency>=N)||z?.criticalPath||z&&(z.health==="critical"||z.health==="down")||t.some(D=>D.source===ae.id||D.target===ae.id?kt.getState().getConnectionMetrics(D.id)?.bottleneck:!1)}).length;return f.jsxs(Tn,{className:"h-full border-2",children:[f.jsx(Ws,{className:"pb-3",children:f.jsxs(Zs,{className:"text-sm flex items-center gap-2",children:[f.jsx(H2,{className:"w-4 h-4"}),"Problem Filters",le>0&&f.jsx(Qt,{variant:"destructive",className:"ml-auto",children:le})]})}),f.jsxs(Js,{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(st,{className:"text-xs",children:"Search Components"}),f.jsxs("div",{className:"relative",children:[f.jsx(Bc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),f.jsx(Tt,{placeholder:"Search by name...",value:d,onChange:ae=>h(ae.target.value),className:"pl-8 h-8 text-xs"})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(st,{className:"text-xs flex items-center gap-2",children:[f.jsx(z2,{className:"w-4 h-4"}),"Show Only Problems"]}),f.jsx(co,{checked:p,onCheckedChange:g})]}),p&&f.jsxs("div",{className:"pl-6 space-y-2 border-l-2 border-border",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(st,{className:"text-xs flex items-center gap-2",children:[f.jsx(fb,{className:"w-4 h-4 text-red-500"}),"Bottlenecks"]}),f.jsx(co,{checked:m,onCheckedChange:v})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(st,{className:"text-xs flex items-center gap-2",children:[f.jsx(uo,{className:"w-4 h-4 text-orange-500"}),"High Error Rate (>",j,"%)"]}),f.jsx(co,{checked:w,onCheckedChange:C})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(st,{className:"text-xs flex items-center gap-2",children:[f.jsx(hb,{className:"w-4 h-4 text-yellow-500"}),"High Latency (>",N,"ms)"]}),f.jsx(co,{checked:E,onCheckedChange:T})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(st,{className:"text-xs flex items-center gap-2",children:[f.jsx(ho,{className:"w-4 h-4 text-purple-500"}),"Critical Paths"]}),f.jsx(co,{checked:S,onCheckedChange:R})]})]})]}),p&&f.jsxs("div",{className:"space-y-2 pt-2 border-t border-border",children:[f.jsxs("div",{children:[f.jsx(st,{className:"text-xs",children:"Min Latency (ms)"}),f.jsx(Tt,{type:"number",value:N,onChange:ae=>A(Number(ae.target.value)),className:"h-8 text-xs mt-1",min:0})]}),f.jsxs("div",{children:[f.jsx(st,{className:"text-xs",children:"Min Error Rate (%)"}),f.jsx(Tt,{type:"number",value:j,onChange:ae=>q(Number(ae.target.value)),className:"h-8 text-xs mt-1",min:0,max:100})]})]}),r&&f.jsx("div",{className:"pt-2 border-t border-border",children:f.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total problems detected: ",f.jsx("span",{className:"font-semibold text-foreground",children:te})]})}),p&&ee.length>0&&f.jsx(on,{className:"h-48 border border-border rounded p-2",children:f.jsx("div",{className:"space-y-1",children:ee.map(ae=>{const ce=l(ae.id),z=c().find(D=>D.nodeId===ae.id);return f.jsx(Te,{variant:"ghost",size:"sm",className:"w-full justify-start text-xs h-auto py-1.5",onClick:()=>se(ae.id),children:f.jsxs("div",{className:"flex items-center gap-2 w-full",children:[z?.criticalPath&&f.jsx(Qt,{variant:"outline",className:"bg-purple-500/20 text-purple-500 border-purple-500/50 text-xs px-1",children:"Critical"}),f.jsx("span",{className:"flex-1 text-left truncate",children:ae.data.label}),ce&&ce.errorRate*100>=j&&f.jsxs(Qt,{variant:"destructive",className:"text-xs px-1",children:[(ce.errorRate*100).toFixed(0),"%"]})]})},ae.id)})})}),!r&&f.jsx("div",{className:"text-xs text-muted-foreground text-center py-4",children:"Start emulation to see problems"})]})]})}function Wz(){const{nodes:o,connections:e}=Re(),{isRunning:t,getComponentMetrics:s,getConnectionMetrics:r}=kt(),{getAllComponentStatuses:l,getSystemAnalysis:c}=fo(),[d,h]=x.useState(""),[p,g]=x.useState("all");if(!t)return f.jsx(Tn,{className:"h-full",children:f.jsxs(Ws,{children:[f.jsx(Zs,{children:"Diagnostics"}),f.jsx(gr,{children:"Start emulation to see diagnostics"})]})});const m=[],v=l();c(),o.forEach(R=>{const E=s(R.id),T=v.find(j=>j.nodeId===R.id);if(!E||!T)return;const N={nodeId:R.id,nodeLabel:R.data.label,problem:"",severity:"info",metrics:{throughput:E.throughput,latency:E.latency,errorRate:E.errorRate,utilization:E.utilization},affectedConnections:[],recommendations:[]},A=e.filter(j=>j.source===R.id||j.target===R.id?r(j.id)?.bottleneck:!1);if(A.length>0){N.problem=`Bottleneck detected in ${A.length} connection(s)`,N.severity="critical",N.affectedConnections=A.map(j=>j.id),N.rootCause="High throughput dependency or backpressure",N.recommendations=["Consider scaling this component horizontally","Optimize data processing logic","Check for connection bandwidth limits"],m.push(N);return}if(E.errorRate>.05){N.problem=`High error rate: ${(E.errorRate*100).toFixed(1)}%`,N.severity=E.errorRate>.1?"critical":"warning",N.rootCause="Component is experiencing failures",N.recommendations=["Check component logs for error details","Verify input data format and validation","Review retry and error handling logic"],m.push(N);return}if(E.latency>1e3){N.problem=`High latency: ${E.latency.toFixed(0)}ms`,N.severity=E.latency>2e3?"critical":"warning",N.rootCause="Component processing is slow",N.recommendations=["Optimize database queries or data processing","Consider caching frequently accessed data","Review component configuration for performance"],m.push(N);return}if(E.utilization>.9){N.problem=`High utilization: ${(E.utilization*100).toFixed(0)}%`,N.severity="warning",N.rootCause="Component is near capacity",N.recommendations=["Consider scaling this component","Optimize resource usage","Monitor for potential failures"],m.push(N);return}(T.health==="critical"||T.health==="down")&&(N.problem=`Component health: ${T.health}`,N.severity="critical",N.rootCause="Component is in critical state or down",N.recommendations=["Immediately check component status","Review error logs and metrics","Consider failover or restart"],m.push(N))});const w=m.filter(R=>!(p!=="all"&&R.severity!==p||d&&!R.nodeLabel.toLowerCase().includes(d.toLowerCase()))),C=R=>{switch(R){case"critical":return f.jsx(uo,{className:"w-4 h-4 text-red-500"});case"warning":return f.jsx(ys,{className:"w-4 h-4 text-yellow-500"});default:return f.jsx(Ri,{className:"w-4 h-4 text-blue-500"})}},S=R=>{switch(R){case"critical":return f.jsx(Qt,{variant:"destructive",className:"text-xs",children:"Critical"});case"warning":return f.jsx(Qt,{variant:"outline",className:"border-yellow-500 text-yellow-600 text-xs",children:"Warning"});default:return f.jsx(Qt,{variant:"outline",className:"text-xs",children:"Info"})}};return f.jsxs(Tn,{className:"h-full flex flex-col",children:[f.jsxs(Ws,{className:"pb-3",children:[f.jsx(Zs,{className:"text-sm font-semibold",children:"Diagnostics"}),f.jsxs(gr,{className:"text-xs text-muted-foreground",children:[w.length," problem",w.length!==1?"s":""," detected"]})]}),f.jsxs(Js,{className:"flex-1 flex flex-col overflow-hidden p-0",children:[f.jsxs("div",{className:"p-4 border-b border-border space-y-2",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Bc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),f.jsx(Tt,{placeholder:"Search components...",value:d,onChange:R=>h(R.target.value),className:"pl-8 h-8 text-xs"})]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx(Te,{variant:p==="all"?"default":"outline",size:"sm",className:"h-7 text-xs px-2",onClick:()=>g("all"),children:"All"}),f.jsx(Te,{variant:p==="critical"?"default":"outline",size:"sm",className:"h-7 text-xs px-2",onClick:()=>g("critical"),children:"Critical"}),f.jsx(Te,{variant:p==="warning"?"default":"outline",size:"sm",className:"h-7 text-xs px-2",onClick:()=>g("warning"),children:"Warning"})]})]}),f.jsx(on,{className:"flex-1",children:f.jsx("div",{className:"p-4 space-y-2",children:w.length===0?f.jsxs("div",{className:"text-center text-sm text-muted-foreground py-6",children:[f.jsx(ho,{className:"w-6 h-6 mx-auto mb-1.5 opacity-50"}),f.jsx("p",{children:"No problems detected"})]}):w.map((R,E)=>f.jsxs(Tn,{className:`border-l-4 ${R.severity==="critical"?"border-l-red-500":R.severity==="warning"?"border-l-yellow-500":"border-l-blue-500"}`,children:[f.jsxs(Ws,{className:"pb-2 p-3",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[C(R.severity),f.jsx(Zs,{className:"text-xs font-semibold",children:R.nodeLabel}),S(R.severity)]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{o.find(N=>N.id===R.nodeId)&&Re.getState().selectNode(R.nodeId)},children:f.jsx(m2,{className:"w-3.5 h-3.5"})})]}),f.jsx(gr,{className:"text-xs mt-0.5",children:R.problem})]}),f.jsxs(Js,{className:"pt-0 p-3 space-y-2",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[R.metrics.throughput!==void 0&&f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Throughput: "}),f.jsxs("span",{className:"font-mono",children:[R.metrics.throughput.toFixed(0)," ops/s"]})]}),R.metrics.latency!==void 0&&f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Latency: "}),f.jsxs("span",{className:"font-mono",children:[R.metrics.latency.toFixed(0),"ms"]})]}),R.metrics.errorRate!==void 0&&f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Error Rate: "}),f.jsxs("span",{className:"font-mono",children:[(R.metrics.errorRate*100).toFixed(1),"%"]})]}),R.metrics.utilization!==void 0&&f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Utilization: "}),f.jsxs("span",{className:"font-mono",children:[(R.metrics.utilization*100).toFixed(0),"%"]})]})]}),R.rootCause&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs font-semibold text-muted-foreground mb-0.5",children:"Root Cause:"}),f.jsx("div",{className:"text-xs",children:R.rootCause})]}),R.recommendations.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs font-semibold text-muted-foreground mb-0.5",children:"Recommendations:"}),f.jsx("ul",{className:"text-xs space-y-0.5 list-disc list-inside",children:R.recommendations.map((T,N)=>f.jsx("li",{className:"text-muted-foreground",children:T},N))})]})]})]},E))})})]})]})}function Zz(){const{alerts:o,acknowledgeAlert:e,clearAlerts:t,getCriticalAlerts:s,getWarningAlerts:r}=Ph(),{selectNode:l}=Re(),c=s(),d=r();o.filter(g=>g.type==="info");const h=g=>{switch(g){case"critical":return f.jsx(uo,{className:"w-4 h-4 text-red-500"});case"warning":return f.jsx(ys,{className:"w-4 h-4 text-yellow-500"});default:return f.jsx(Q2,{className:"w-4 h-4 text-blue-500"})}},p=g=>{l(g)};return o.length===0?f.jsxs(Tn,{className:"h-full",children:[f.jsx(Ws,{children:f.jsx(Zs,{className:"text-sm",children:"Alerts"})}),f.jsx(Js,{children:f.jsxs("div",{className:"text-center text-sm text-muted-foreground py-8",children:[f.jsx(Hh,{className:"w-8 h-8 mx-auto mb-2 opacity-50 text-green-500"}),f.jsx("p",{children:"No active alerts"})]})})]}):f.jsxs(Tn,{className:"h-full flex flex-col",children:[f.jsx(Ws,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(Zs,{className:"text-sm",children:"Alerts"}),f.jsxs("div",{className:"flex gap-2 mt-1",children:[c.length>0&&f.jsxs(Qt,{variant:"destructive",className:"text-xs",children:[c.length," Critical"]}),d.length>0&&f.jsxs(Qt,{variant:"outline",className:"text-xs border-yellow-500 text-yellow-600",children:[d.length," Warning"]})]})]}),f.jsx(Te,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:t,children:"Clear All"})]})}),f.jsx(Js,{className:"flex-1 overflow-hidden p-0",children:f.jsx(on,{className:"h-full",children:f.jsx("div",{className:"p-4 space-y-2",children:o.map(g=>f.jsx(Tn,{className:`border-l-4 ${g.type==="critical"?"border-l-red-500 bg-red-500/5":g.type==="warning"?"border-l-yellow-500 bg-yellow-500/5":"border-l-blue-500 bg-blue-500/5"}`,children:f.jsx(Js,{className:"p-3",children:f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[h(g.type),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("h4",{className:"text-xs font-semibold",children:g.title}),f.jsx(Qt,{variant:g.type==="critical"?"destructive":g.type==="warning"?"outline":"secondary",className:"text-xs",children:g.type})]}),f.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:g.message}),g.nodeLabel&&f.jsxs(Te,{variant:"ghost",size:"sm",className:"h-6 text-xs p-1",onClick:()=>g.nodeId&&p(g.nodeId),children:["View: ",g.nodeLabel]}),f.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(g.timestamp).toLocaleTimeString()})]})]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(g.id),children:f.jsx(vs,{className:"w-3 h-3"})})]})})},g.id))})})})]})}function Jz(){const{nodes:o,connections:e}=Re(),{isRunning:t,componentMetrics:s,connectionMetrics:r}=kt(),{getSystemAnalysis:l}=fo(),{getCriticalAlerts:c,getWarningAlerts:d}=Ph(),h=x.useMemo(()=>{if(!t)return{totalThroughput:0,averageLatency:0,totalErrorRate:0,activeComponents:0,activeConnections:0,bottlenecks:0,healthyComponents:0,degradedComponents:0,criticalComponents:0};let m=0,v=0,w=0,C=0,S=0,R=0,E=0,T=0,N=0;s.forEach(P=>{(P.throughput>.1||P.errorRate>.001)&&(C++,m+=P.throughput||0,v+=P.latency||0,w+=P.errorRate||0)}),r.forEach(P=>{(P.effectiveThroughput>0||P.traffic>0)&&(S++,P.bottleneck&&R++)});const A=fo.getState();o.forEach(P=>{const H=A.getComponentStatus(P.id);if(H)switch(H.health){case"healthy":E++;break;case"degraded":T++;break;case"critical":case"down":N++;break}});const j=C>0?v/C:0,q=C>0?w/C:0;return{totalThroughput:m,averageLatency:j,totalErrorRate:q,activeComponents:C,activeConnections:S,bottlenecks:R,healthyComponents:E,degradedComponents:T,criticalComponents:N}},[t,s,r,o]),p=c(),g=d();return t?f.jsxs("div",{className:"space-y-2.5",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx(ms,{level:5,children:"Performance"}),f.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[f.jsxs("div",{className:"p-1.5 bg-card border border-border rounded",children:[f.jsx(Ye,{size:"micro",muted:!0,className:"mb-0.5",children:"Total Throughput"}),f.jsxs(lo,{status:"success",size:"base",weight:"bold",children:[h.totalThroughput.toFixed(0),f.jsx(Ye,{size:"micro",muted:!0,className:"ml-0.5",children:"ops/s"})]})]}),f.jsxs("div",{className:"p-1.5 bg-card border border-border rounded",children:[f.jsx(Ye,{size:"micro",muted:!0,className:"mb-0.5",children:"Avg Latency"}),f.jsxs(lo,{status:"warning",size:"base",weight:"bold",children:[h.averageLatency.toFixed(0),f.jsx(Ye,{size:"micro",muted:!0,className:"ml-0.5",children:"ms"})]})]}),f.jsxs("div",{className:"p-1.5 bg-card border border-border rounded",children:[f.jsx(Ye,{size:"micro",muted:!0,className:"mb-0.5",children:"Error Rate"}),f.jsxs(lo,{status:"error",size:"base",weight:"bold",children:[(h.totalErrorRate*100).toFixed(2),f.jsx(Ye,{size:"micro",muted:!0,className:"ml-0.5",children:"%"})]})]}),f.jsxs("div",{className:"p-1.5 bg-card border border-border rounded",children:[f.jsx(Ye,{size:"micro",muted:!0,className:"mb-0.5",children:"Bottlenecks"}),f.jsxs(lo,{status:"warning",size:"base",weight:"bold",children:[h.bottlenecks,f.jsx(Ye,{size:"micro",muted:!0,className:"ml-0.5",children:"conn"})]})]})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx(ms,{level:5,children:"Component Health"}),f.jsxs("div",{className:"space-y-0.5",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(Hh,{className:"w-4 h-4 text-success"}),f.jsx(Ye,{size:"micro",children:"Healthy"})]}),f.jsx(Qt,{variant:"outline",className:"bg-success/20 border-success/50 text-success text-xs px-1 py-0",children:h.healthyComponents})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(ys,{className:"w-4 h-4 text-warning"}),f.jsx(Ye,{size:"micro",children:"Degraded"})]}),f.jsx(Qt,{variant:"outline",className:"bg-warning/20 border-warning/50 text-warning text-xs px-1 py-0",children:h.degradedComponents})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(ys,{className:"w-4 h-4 text-destructive"}),f.jsx(Ye,{size:"micro",children:"Critical/Down"})]}),f.jsx(Qt,{variant:"outline",className:"bg-destructive/20 border-destructive/50 text-destructive text-xs px-1 py-0",children:h.criticalComponents})]})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx(ms,{level:5,children:"Activity"}),f.jsxs("div",{className:"space-y-0.5",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(W2,{className:"w-4 h-4 text-muted-foreground"}),f.jsx(Ye,{size:"micro",children:"Active Components"})]}),f.jsxs(Ye,{mono:!0,size:"micro",children:[h.activeComponents," / ",o.length]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(hb,{className:"w-4 h-4 text-muted-foreground"}),f.jsx(Ye,{size:"micro",children:"Active Connections"})]}),f.jsxs(Ye,{mono:!0,size:"micro",children:[h.activeConnections," / ",e.length]})]})]})]}),(p.length>0||g.length>0)&&f.jsxs("div",{className:"space-y-1.5",children:[f.jsx(ms,{level:5,children:"Alerts"}),f.jsxs("div",{className:"space-y-0.5",children:[p.length>0&&f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(lo,{status:"error",size:"micro",children:"Critical"}),f.jsx(Qt,{variant:"destructive",className:"text-xs px-1 py-0",children:p.length})]}),g.length>0&&f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(lo,{status:"warning",size:"micro",children:"Warnings"}),f.jsx(Qt,{variant:"outline",className:"border-warning text-warning text-xs px-1 py-0",children:g.length})]})]})]})]}):f.jsxs("div",{className:"text-center text-sm text-muted-foreground py-8",children:[f.jsx(ho,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"Start emulation to see system statistics"})]})}var Cu="Checkbox",[e3]=bn(Cu),[t3,kp]=e3(Cu);function n3(o){const{__scopeCheckbox:e,checked:t,children:s,defaultChecked:r,disabled:l,form:c,name:d,onCheckedChange:h,required:p,value:g="on",internal_do_not_use_render:m}=o,[v,w]=xs({prop:t,defaultProp:r??!1,onChange:h,caller:Cu}),[C,S]=x.useState(null),[R,E]=x.useState(null),T=x.useRef(!1),N=C?!!c||!!C.closest("form"):!0,A={checked:v,disabled:l,setChecked:w,control:C,setControl:S,name:d,form:c,value:g,hasConsumerStoppedPropagationRef:T,required:p,defaultChecked:za(r)?!1:r,isFormControl:N,bubbleInput:R,setBubbleInput:E};return f.jsx(t3,{scope:e,...A,children:s3(m)?m(A):s})}var DC="CheckboxTrigger",_C=x.forwardRef(({__scopeCheckbox:o,onKeyDown:e,onClick:t,...s},r)=>{const{control:l,value:c,disabled:d,checked:h,required:p,setControl:g,setChecked:m,hasConsumerStoppedPropagationRef:v,isFormControl:w,bubbleInput:C}=kp(DC,o),S=De(r,g),R=x.useRef(h);return x.useEffect(()=>{const E=l?.form;if(E){const T=()=>m(R.current);return E.addEventListener("reset",T),()=>E.removeEventListener("reset",T)}},[l,m]),f.jsx(Ae.button,{type:"button",role:"checkbox","aria-checked":za(h)?"mixed":h,"aria-required":p,"data-state":IC(h),"data-disabled":d?"":void 0,disabled:d,value:c,...s,ref:S,onKeyDown:ge(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:ge(t,E=>{m(T=>za(T)?!0:!T),C&&w&&(v.current=E.isPropagationStopped(),v.current||E.stopPropagation())})})});_C.displayName=DC;var jp=x.forwardRef((o,e)=>{const{__scopeCheckbox:t,name:s,checked:r,defaultChecked:l,required:c,disabled:d,value:h,onCheckedChange:p,form:g,...m}=o;return f.jsx(n3,{__scopeCheckbox:t,checked:r,defaultChecked:l,disabled:d,required:c,onCheckedChange:p,name:s,form:g,value:h,internal_do_not_use_render:({isFormControl:v})=>f.jsxs(f.Fragment,{children:[f.jsx(_C,{...m,ref:e,__scopeCheckbox:t}),v&&f.jsx(PC,{__scopeCheckbox:t})]})})});jp.displayName=Cu;var zC="CheckboxIndicator",OC=x.forwardRef((o,e)=>{const{__scopeCheckbox:t,forceMount:s,...r}=o,l=kp(zC,t);return f.jsx(rn,{present:s||za(l.checked)||l.checked===!0,children:f.jsx(Ae.span,{"data-state":IC(l.checked),"data-disabled":l.disabled?"":void 0,...r,ref:e,style:{pointerEvents:"none",...o.style}})})});OC.displayName=zC;var LC="CheckboxBubbleInput",PC=x.forwardRef(({__scopeCheckbox:o,...e},t)=>{const{control:s,hasConsumerStoppedPropagationRef:r,checked:l,defaultChecked:c,required:d,disabled:h,name:p,value:g,form:m,bubbleInput:v,setBubbleInput:w}=kp(LC,o),C=De(t,w),S=gu(l),R=cu(s);x.useEffect(()=>{const T=v;if(!T)return;const N=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(N,"checked").set,q=!r.current;if(S!==l&&j){const P=new Event("click",{bubbles:q});T.indeterminate=za(l),j.call(T,za(l)?!1:l),T.dispatchEvent(P)}},[v,S,l,r]);const E=x.useRef(za(l)?!1:l);return f.jsx(Ae.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??E.current,required:d,disabled:h,name:p,value:g,form:m,...e,tabIndex:-1,ref:C,style:{...e.style,...R,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});PC.displayName=LC;function s3(o){return typeof o=="function"}function za(o){return o==="indeterminate"}function IC(o){return za(o)?"indeterminate":o?"checked":"unchecked"}const Nh=x.forwardRef(({className:o,...e},t)=>f.jsx(jp,{ref:t,className:Ee("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",o),...e,children:f.jsx(OC,{className:Ee("grid place-content-center text-current"),children:f.jsx(Ih,{className:"h-4 w-4"})})}));Nh.displayName=jp.displayName;function qC({open:o,groupName:e,onConfirm:t,onCancel:s}){return f.jsx(Cx,{open:o,onOpenChange:r=>!r&&s(),children:f.jsxs(ep,{children:[f.jsxs(Mx,{children:[f.jsx(tp,{children:"Delete Group?"}),f.jsxs(np,{children:['Are you sure you want to delete the group "',e,'"? This action cannot be undone.']})]}),f.jsxs(Ex,{children:[f.jsx(ap,{onClick:s,children:"Cancel"}),f.jsx(sp,{onClick:t,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})}function a3({group:o}){const{nodes:e,updateGroup:t,deleteGroup:s,removeNodeFromGroup:r,addNodeToGroup:l,selectGroup:c}=Re(),[d,h]=x.useState(!1),[p,g]=x.useState(!1),[m,v]=x.useState(!1),[w,C]=x.useState(new Set),S=A=>{t(o.id,{name:A}),Fe.success("Group renamed"),g(!1)},R=()=>{h(!0)},E=()=>{s(o.id),c(null),Fe.success("Group deleted"),h(!1)},T=A=>{r(o.id,A),Fe.success("Component removed from group")},N=e.filter(A=>o.nodeIds.includes(A.id));return f.jsxs("div",{className:"space-y-2.5",children:[f.jsxs("div",{children:[f.jsx(st,{htmlFor:"group-name",className:"text-xs font-medium",children:"Group Name"}),f.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[f.jsx(Tt,{id:"group-name",value:o.name,onChange:A=>t(o.id,{name:A.target.value}),className:"flex-1 h-8 text-xs"}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:R,children:f.jsx(Uh,{className:"h-3.5 w-3.5 text-destructive"})})]})]}),f.jsx(qC,{open:d,groupName:o.name,onConfirm:E,onCancel:()=>h(!1)}),f.jsx(rp,{open:p,initialName:o.name,onConfirm:S,onCancel:()=>g(!1)}),f.jsx(vn,{}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Nh,{id:"show-name",checked:o.showName!==!1,onCheckedChange:A=>t(o.id,{showName:A!==!1})}),f.jsx(st,{htmlFor:"show-name",className:"text-xs font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Show name on canvas"})]}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsx(st,{className:"text-xs font-medium mb-1.5 block",children:"Color"}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("input",{type:"color",value:o.color||"#3b82f6",onChange:A=>t(o.id,{color:A.target.value}),className:"w-10 h-8 rounded border border-border cursor-pointer"}),f.jsx(Tt,{value:o.color||"#3b82f6",onChange:A=>t(o.id,{color:A.target.value}),className:"flex-1 font-mono text-xs h-8",placeholder:"#3b82f6"})]})]}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsxs(st,{className:"text-xs font-medium",children:["Components (",o.nodeIds.length,")"]}),f.jsxs(Te,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>{if(Re.getState().nodes.filter(q=>!o.nodeIds.includes(q.id)).length===0){Fe.info("All components are already in this group");return}C(new Set),v(!0)},children:[f.jsx(Ac,{className:"h-3 w-3 mr-1"}),"Add"]})]}),f.jsxs("div",{className:"space-y-1.5 max-h-48 overflow-y-auto",children:[N.map(A=>f.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-secondary/50 rounded border border-border",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-xs font-medium truncate",children:A.data?.label||A.type}),f.jsx("div",{className:"text-[10px] text-muted-foreground truncate",children:A.type})]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:()=>T(A.id),title:"Remove from group",children:f.jsx(vs,{className:"h-3 w-3"})})]},A.id)),N.length===0&&f.jsx("div",{className:"text-xs text-muted-foreground text-center py-3",children:"No components in group"})]})]}),f.jsx(vn,{}),f.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted-foreground",children:[f.jsx("span",{children:"Group ID:"}),f.jsx("code",{className:"font-mono bg-secondary/50 px-1.5 py-0.5 rounded text-[10px]",children:o.id})]}),f.jsx(op,{open:m,onOpenChange:v,children:f.jsxs(Xc,{className:"max-w-md",children:[f.jsxs(Wc,{children:[f.jsx(Jc,{children:"Add Components to Group"}),f.jsxs(eu,{children:['Select components to add to "',o.name,'"']})]}),f.jsx(on,{className:"max-h-96",children:f.jsxs("div",{className:"space-y-2 py-2",children:[e.filter(A=>!o.nodeIds.includes(A.id)).map(A=>f.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded border border-border hover:bg-secondary/50 cursor-pointer",onClick:()=>{const j=new Set(w);j.has(A.id)?j.delete(A.id):j.add(A.id),C(j)},children:[f.jsx(Nh,{checked:w.has(A.id),onCheckedChange:j=>{const q=new Set(w);j?q.add(A.id):q.delete(A.id),C(q)}}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-sm font-medium truncate",children:A.data?.label||A.type}),f.jsx("div",{className:"text-xs text-muted-foreground truncate",children:A.type})]})]},A.id)),e.filter(A=>!o.nodeIds.includes(A.id)).length===0&&f.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"All components are already in this group"})]})}),f.jsxs(Zc,{children:[f.jsx(Te,{variant:"outline",onClick:()=>{v(!1),C(new Set)},children:"Cancel"}),f.jsxs(Te,{onClick:()=>{if(w.size===0){Fe.error("Select at least one component");return}w.forEach(A=>{l(o.id,A)}),Fe.success(`${w.size} component(s) added to group`),v(!1),C(new Set)},children:["Add Selected (",w.size,")"]})]})]})})]})}function o3(){const{selectedNodeId:o,nodes:e,updateNode:t,selectNode:s,connections:r,updateConnection:l,selectedConnectionId:c,selectConnection:d,selectedGroupId:h,groups:p,selectGroup:g}=Re(),{addTab:m}=pu(),v=e.find(S=>S.id===o),w=r.find(S=>S.id===c),C=p.find(S=>S.id===h);return C?f.jsxs("div",{className:"w-60 h-full bg-card border-l border-border flex flex-col",children:[f.jsxs("div",{className:"p-1.5 border-b border-border flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Vf,{className:"h-3 w-3 text-muted-foreground"}),f.jsx(Xs,{children:"Group Properties"})]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>g(null),children:f.jsx(vs,{className:"h-3 w-3"})})]}),f.jsx(on,{className:"flex-1",children:f.jsx("div",{className:"p-1.5",children:f.jsx(a3,{group:C})})})]}):!v&&!w?f.jsx("div",{className:"w-60 h-full bg-card border-l border-border flex flex-col",children:f.jsxs(lp,{defaultValue:"stats",className:"h-full flex flex-col",children:[f.jsx("div",{className:"p-1 border-b border-border",children:f.jsxs(au,{className:"grid w-full grid-cols-5 h-6 gap-0.5 p-0.5",children:[f.jsx(hs,{value:"stats",className:"text-xs px-1 py-0.5",children:"Stats"}),f.jsx(hs,{value:"diagnostics",className:"text-xs px-1 py-0.5",children:"Diag"}),f.jsx(hs,{value:"alerts",className:"text-xs px-1 py-0.5",children:"Alerts"}),f.jsx(hs,{value:"filters",className:"text-xs px-1 py-0.5",children:"Filter"}),f.jsx(hs,{value:"properties",className:"text-xs px-1 py-0.5",children:"Groups"})]})}),f.jsx(_a,{value:"stats",className:"flex-1 m-0 p-0 overflow-hidden",children:f.jsx(on,{className:"h-full",children:f.jsx("div",{className:"p-1.5",children:f.jsx(Jz,{})})})}),f.jsx(_a,{value:"diagnostics",className:"flex-1 m-0 p-0 overflow-hidden",children:f.jsx(Wz,{})}),f.jsx(_a,{value:"alerts",className:"flex-1 m-0 p-0 overflow-hidden",children:f.jsx(Zz,{})}),f.jsx(_a,{value:"filters",className:"flex-1 m-0 p-0 overflow-hidden",children:f.jsx(on,{className:"h-full",children:f.jsx("div",{className:"p-1.5",children:f.jsx(Xz,{})})})}),f.jsx(_a,{value:"properties",className:"flex-1 m-0 p-0 overflow-hidden",children:f.jsx(on,{className:"h-full",children:f.jsx("div",{className:"p-1.5 space-y-1.5",children:f.jsxs("div",{children:[f.jsxs(Xs,{as:"h4",className:"mb-1",children:["Groups (",p.length,")"]}),p.length>0?f.jsx("div",{className:"space-y-1",children:p.map(S=>f.jsx("div",{className:"p-1.5 bg-secondary/50 rounded border border-border cursor-pointer hover:bg-secondary transition-colors",onClick:()=>g(S.id),children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx(Ye,{size:"small",className:"font-medium truncate",children:S.name}),f.jsxs(Ye,{size:"micro",muted:!0,children:[S.nodeIds.length," component",S.nodeIds.length!==1?"s":""]})]}),f.jsx("div",{className:"w-2.5 h-2.5 rounded border-2 border-border flex-shrink-0 ml-1",style:{backgroundColor:S.color||"hsl(var(--primary))"}})]})},S.id))}):f.jsx(Ye,{size:"micro",muted:!0,className:"text-center py-2",children:"No groups created yet"})]})})})})]})}):w?f.jsxs("div",{className:"w-60 h-full bg-card border-l border-border flex flex-col",children:[f.jsxs("div",{className:"p-1.5 border-b border-border flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Vf,{className:"h-3 w-3 text-muted-foreground"}),f.jsx(Xs,{children:"Connection"})]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>d(null),children:f.jsx(vs,{className:"h-3 w-3"})})]}),f.jsx(on,{className:"flex-1",children:f.jsx("div",{className:"p-1.5",children:f.jsx(Nz,{connection:w,onUpdate:(S,R)=>l(S,R)})})})]}):f.jsxs("div",{className:"w-60 h-full bg-card border-l border-border flex flex-col",children:[f.jsxs("div",{className:"p-1.5 border-b border-border flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Vf,{className:"h-3 w-3 text-muted-foreground"}),f.jsx(Xs,{children:"Properties"})]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>s(null),children:f.jsx(vs,{className:"h-3 w-3"})})]}),f.jsx(on,{className:"flex-1",children:f.jsxs("div",{className:"p-1.5 space-y-1.5",children:[f.jsx(Yz,{componentId:v.id,componentLabel:v.data.label}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsx(st,{htmlFor:"label",className:"text-xs font-medium",children:"Label"}),f.jsx(Tt,{id:"label",value:v.data.label,onChange:S=>t(v.id,{data:{...v.data,label:S.target.value}}),className:"mt-0.5 h-7 text-xs"})]}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsx(Xs,{as:"h4",className:"mb-1",children:"Position"}),f.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[f.jsxs("div",{children:[f.jsx(st,{htmlFor:"pos-x",className:"text-xs text-muted-foreground",children:"X"}),f.jsx(Tt,{id:"pos-x",type:"number",value:Math.round(v.position.x),onChange:S=>t(v.id,{position:{...v.position,x:parseInt(S.target.value)||0}}),className:"mt-0.5 h-7 text-xs"})]}),f.jsxs("div",{children:[f.jsx(st,{htmlFor:"pos-y",className:"text-xs text-muted-foreground",children:"Y"}),f.jsx(Tt,{id:"pos-y",type:"number",value:Math.round(v.position.y),onChange:S=>t(v.id,{position:{...v.position,y:parseInt(S.target.value)||0}}),className:"mt-0.5 h-7 text-xs"})]})]})]}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsx(Xs,{as:"h4",className:"mb-1",children:"Component Type"}),f.jsx("div",{className:"bg-secondary/50 rounded-md p-1.5 border border-border",children:f.jsx(Ye,{mono:!0,size:"small",children:v.type})})]}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsx(Xs,{as:"h4",className:"mb-1",children:"Configuration"}),f.jsx(Te,{variant:"outline",size:"sm",className:"w-full h-7 text-xs",onClick:()=>{m({title:`${v.data.label} Config`,type:"component",componentId:v.id,componentType:v.type})},children:"Open Configuration Panel"})]})]})})]})}function r3(){const{tabs:o,setActiveTab:e,closeTab:t,addTab:s}=pu(),r=()=>{s({title:"Untitled Diagram",type:"diagram"})};return f.jsx("div",{className:"h-10 bg-secondary/30 border-b border-border flex items-center",children:f.jsxs(on,{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center",children:[o.map(l=>f.jsxs("div",{className:`
                flex items-center gap-2 px-4 h-10 border-r border-border cursor-pointer group
                transition-colors
                ${l.active?"bg-canvas-bg text-foreground":"text-muted-foreground hover:bg-secondary/50"}
              `,onClick:()=>e(l.id),children:[f.jsx("span",{className:"text-sm",children:l.title}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover:opacity-100 hover:bg-destructive/10",onClick:c=>{c.stopPropagation(),t(l.id)},children:f.jsx(vs,{className:"h-3 w-3"})})]},l.id)),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-none",onClick:r,children:f.jsx(Ac,{className:"h-4 w-4"})})]}),f.jsx(Gc,{orientation:"horizontal"})]})})}const Mv=o=>Symbol.iterator in o,Ev=o=>"entries"in o,Rv=(o,e)=>{const t=o instanceof Map?o:new Map(o.entries()),s=e instanceof Map?e:new Map(e.entries());if(t.size!==s.size)return!1;for(const[r,l]of t)if(!s.has(r)||!Object.is(l,s.get(r)))return!1;return!0},i3=(o,e)=>{const t=o[Symbol.iterator](),s=e[Symbol.iterator]();let r=t.next(),l=s.next();for(;!r.done&&!l.done;){if(!Object.is(r.value,l.value))return!1;r=t.next(),l=s.next()}return!!r.done&&!!l.done};function l3(o,e){return Object.is(o,e)?!0:typeof o!="object"||o===null||typeof e!="object"||e===null||Object.getPrototypeOf(o)!==Object.getPrototypeOf(e)?!1:Mv(o)&&Mv(e)?Ev(o)&&Ev(e)?Rv(o,e):i3(o,e):Rv({entries:()=>Object.entries(o)},{entries:()=>Object.entries(e)})}function HC(o){const e=Et.useRef(void 0);return t=>{const s=o(t);return l3(e.current,s)?e.current:e.current=s}}const Nv=globalThis;function pc(o){try{if(typeof Nv.structuredClone=="function")return Nv.structuredClone(o)}catch{}return JSON.parse(JSON.stringify(o))}function br(o,e,t=140,s=100,r=16){const l=[],c=t/2,d=s/2,h=o+c,p=e+d;for(let g=0;g<r;g++){const m=g/r*2*Math.PI-Math.PI/2;let v,w;const C=(m%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(C>=0&&C<Math.PI/2){const S=C/(Math.PI/2);v=h+c,w=p-d+S*s}else if(C>=Math.PI/2&&C<Math.PI){const S=(C-Math.PI/2)/(Math.PI/2);v=h+c-S*t,w=p+d}else if(C>=Math.PI&&C<3*Math.PI/2){const S=(C-Math.PI)/(Math.PI/2);v=h-c,w=p+d-S*s}else{const S=(C-3*Math.PI/2)/(Math.PI/2);v=h-c+S*t,w=p-d}l.push({x:v,y:w,index:g})}return l}function c3(o,e,t){let s=1/0,r=0;for(let l=0;l<o.length;l++){const c=o[l],d=Math.sqrt(Math.pow(e-c.x,2)+Math.pow(t-c.y,2));d<s&&(s=d,r=l)}return r}function Av(o,e,t,s,r,l,c,d=140,h=100){const p=br(l,c,d,h),g=c3(p,t,s);if(r.filter(v=>v.source===o&&v.target===e&&v.sourcePort===g||v.target===o&&v.source===e&&v.targetPort===g).length===0)return g;for(let v=1;v<p.length;v++){const w=(g+v)%p.length,C=(g-v+p.length)%p.length;if(r.filter(E=>E.source===o&&E.target===e&&E.sourcePort===w||E.target===o&&E.source===e&&E.targetPort===w).length===0)return w;if(r.filter(E=>E.source===o&&E.target===e&&E.sourcePort===C||E.target===o&&E.source===e&&E.targetPort===C).length===0)return C}return g}const UC=x.createContext(null);function u3({children:o}){const e=x.useRef(new Map),t=x.useCallback((c,d)=>{d?e.current.set(c,d):e.current.delete(c)},[]),s=x.useCallback(c=>e.current.get(c)||null,[]),r=x.useCallback(c=>{e.current.delete(c)},[]),l={registerNodeRef:t,getNodeRef:s,unregisterNodeRef:r};return f.jsx(UC.Provider,{value:l,children:o})}function Su(){const o=x.useContext(UC);if(!o)throw new Error("useNodeRefs must be used within NodeRefsProvider");return o}function d3({node:o,onConnectionStart:e,onConnectionEnd:t,isConnecting:s=!1,onContextMenu:r}){const{registerNodeRef:l,unregisterNodeRef:c}=Su(),d=x.useRef(null);x.useEffect(()=>(d.current&&l(o.id,d.current),()=>{c(o.id)}),[o.id,l,c]);const h=Re(de=>de.selectNode),p=Re(de=>de.updateNode),g=Re(de=>de.updateNodes),m=Re(de=>de.deleteNode);Re(de=>de.addNode);const v=Re(de=>de.startDragOperation),w=Re(de=>de.endDragOperation);Re(de=>de.bringToFront),Re(de=>de.sendToBack),Re(de=>de.bringForward),Re(de=>de.sendBackward);const{connections:C,zoom:S,pan:R,nodes:E}=Re(HC(de=>({connections:de.connections,zoom:de.zoom,pan:de.pan,nodes:de.nodes}))),{addTab:T}=pu(),[N,A]=x.useState(!1),[j,q]=x.useState(!1),P=x.useRef({x:0,y:0}),H=x.useRef({x:0,y:0}),ee=x.useRef({x:0,y:0}),se=x.useRef({x:0,y:0}),le=x.useRef(null),te=x.useRef(null),ae=x.useRef(!1),ce=x.useRef(!1),ue=x.useRef({}),z=x.useMemo(()=>Ai.find(de=>de.type===o.type),[o.type]),{isRunning:D,getComponentMetrics:L}=kt(),Y=fo(de=>de.getComponentStatus(o.id)),he=jC(de=>de.getComponentState(o.id)),_=D?L(o.id):void 0,X=Oi(de=>de.highlightedNodeId)===o.id,W=x.useMemo(()=>C.some(de=>de.source===o.id||de.target===o.id),[C,o.id]),K=_&&(_.throughput&&_.throughput>.1||_.errorRate&&_.errorRate>.001||_.utilization&&_.utilization>.01),oe=()=>{if(!D||!_||!W||!K)return"";const de=_.utilization||0,He=_.errorRate||0,Be=Math.min(1,de*.7+He*.3);return Be>.8?"border-red-500":Be>.6?"border-orange-500":Be>.4?"border-yellow-500":Be>.2?"border-green-500":""},B=()=>{if(!D)return null;if(he)switch(he.state){case"disabled":case"failed":return f.jsx(bc,{className:"text-red-500",size:16});case"degraded":return f.jsx(ys,{className:"text-yellow-500",size:16})}if(!W||!K||!Y)return null;const de=Y.health,He=16;switch(de){case"healthy":return f.jsx(Hh,{className:"text-green-500",size:He});case"degraded":return f.jsx(ys,{className:"text-yellow-500",size:He});case"critical":return f.jsx(Ri,{className:"text-orange-500",size:He});case"down":return f.jsx(uo,{className:"text-red-500",size:He});default:return null}},V=()=>{if(!D)return o.selected?"border-primary":"border-border";if(he)switch(he.state){case"disabled":case"failed":return"border-red-500 border-2";case"degraded":return"border-yellow-500 border-2"}if(!Y)return o.selected?"border-primary":"border-border";if(Y.criticalPath)return"border-purple-500 border-2";switch(Y.health){case"down":return"border-red-500 border-2";case"critical":return"border-orange-500";case"degraded":return"border-yellow-500";default:return o.selected?"border-primary":"border-border"}},pe=x.useRef(S),me=x.useRef(R);x.useEffect(()=>{pe.current=S,me.current=R},[S,R]),x.useEffect(()=>{const de=Be=>{if(!ae.current)return;if(Re.getState().getIsGroupDragging()){ae.current=!1,ce.current=!1,A(!1);return}const pt=Be.clientX-H.current.x,qt=Be.clientY-H.current.y,Ze=Math.sqrt(pt*pt+qt*qt);if(!ce.current&&Ze>3){ce.current=!0,A(!0),v(o.id);const vt=Re.getState().nodes.filter(gt=>gt.selected);ue.current={},vt.forEach(gt=>{ue.current[gt.id]={x:gt.position.x,y:gt.position.y}})}if(ce.current&&le.current){const Dt=pe.current,vt=me.current,gt=le.current.getBoundingClientRect(),Yt=(Be.clientX-gt.left-vt.x)/Dt,Gt=(Be.clientY-gt.top-vt.y)/Dt,Rs=Yt-ee.current.x,Yn=Gt-ee.current.y,rs=Re.getState().nodes.filter(Kt=>Kt.selected),Xt=Object.keys(ue.current).length>0;if(rs.length>1&&Xt){const Kt=[];rs.forEach(_t=>{const Ua=ue.current[_t.id];Ua&&Kt.push({id:_t.id,updates:{position:{x:Ua.x+Rs,y:Ua.y+Yn}}})}),Kt.length>0&&g(Kt,!0)}else{const Kt=se.current.x+Rs,_t=se.current.y+Yn;p(o.id,{position:{x:Kt,y:_t}},!0)}}},He=()=>{ae.current&&(ae.current=!1,ce.current&&(ce.current=!1,A(!1),w()))};return document.addEventListener("mousemove",de),document.addEventListener("mouseup",He),()=>{document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",He)}},[o.id,p,g,v,w]);const ye=de=>{if(de.button!==0)return;const Be=Re.getState().nodes.filter(kn=>kn.selected),yt=o.selected,pt=Be.some(kn=>kn.id!==o.id);if(!(yt&&pt&&!de.ctrlKey&&!de.metaKey)){const kn=de.ctrlKey||de.metaKey;h(o.id,kn)}const qt=document.querySelector(".flex-1.overflow-hidden.relative");if(!qt){P.current={x:0,y:0},ee.current={x:0,y:0},se.current={x:0,y:0},le.current=null,te.current=null;return}le.current=qt;const Ze=pe.current,Dt=me.current,vt=qt.getBoundingClientRect();te.current=vt;const gt=(de.clientX-vt.left-Dt.x)/Ze,Yt=(de.clientY-vt.top-Dt.y)/Ze;ee.current={x:gt,y:Yt};const Yn=Re.getState().nodes.find(kn=>kn.id===o.id)?.position||o.position;se.current={x:Yn.x,y:Yn.y},P.current={x:gt-Yn.x,y:Yt-Yn.y},H.current={x:de.clientX,y:de.clientY},ae.current=!0,ce.current=!1,de.stopPropagation()},ve=de=>{de.stopPropagation(),de.preventDefault(),N&&(A(!1),w()),T({title:`${o.data.label} Config`,type:"component",componentId:o.id,componentType:o.type})},Pe=de=>{de.key==="Delete"&&o.selected&&m(o.id)},Ue=de=>{if(de.preventDefault(),de.stopPropagation(),!o.selected){const He=E.some(Be=>Be.id!==o.id&&Be.selected);h(o.id,He)}r?.(de.clientX,de.clientY)},at=(de,He)=>{de.stopPropagation(),e?.(He)},We=x.useCallback(()=>{if(!d.current)return{width:140,height:100};const Be=(d.current.querySelector(".bg-card")||d.current).getBoundingClientRect();return{width:Be.width/S,height:Be.height/S}},[S]),jt=de=>{if(s){de.stopPropagation();const He=We(),Be=br(o.position.x,o.position.y,He.width,He.height,16),yt=document.querySelector(".flex-1.overflow-hidden.relative");if(yt){const pt=yt.getBoundingClientRect(),qt=(de.clientX-pt.left-R.x)/S,Ze=(de.clientY-pt.top-R.y)/S;let Dt=1/0,vt=0;for(let gt=0;gt<Be.length;gt++){const Yt=Be[gt],Gt=Math.sqrt(Math.pow(qt-Yt.x,2)+Math.pow(Ze-Yt.y,2));Gt<Dt&&(Dt=Gt,vt=gt)}t?.(vt)}else t?.()}};return f.jsx(f.Fragment,{children:f.jsx("div",{ref:d,"data-node-id":o.id,className:`
          absolute cursor-move select-none
          transition-shadow
          ${o.selected?"glow-primary":""}
          ${N?"pointer-events-none":""}
        `,style:{left:`${o.position.x}px`,top:`${o.position.y}px`},onMouseDown:ye,onMouseUp:jt,onDoubleClick:ve,onContextMenu:Ue,onKeyDown:Pe,onMouseEnter:()=>q(!0),onMouseLeave:()=>q(!1),tabIndex:0,children:f.jsxs("div",{className:Ee("bg-card border-2 rounded-lg p-4 min-w-[140px] relative",V(),oe(),"hover:border-primary/50 transition-colors",Y?.criticalPath&&"shadow-lg shadow-purple-500/20",X&&"ring-4 ring-yellow-400 ring-offset-2 animate-pulse"),children:[D&&Y&&f.jsx("div",{className:"absolute -top-2 -right-2 bg-card rounded-full p-0.5 border border-border",children:B()}),D&&Y?.criticalPath&&f.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 bg-purple-500 text-white text-[10px] px-1.5 py-0.5 rounded-full font-semibold",children:"CRITICAL"}),f.jsxs("div",{className:"flex flex-col items-center gap-2 select-none",children:[f.jsx("div",{className:"text-3xl select-none pointer-events-none",children:z?.icon}),f.jsx("div",{className:"text-sm font-medium text-center text-foreground select-none pointer-events-none",children:o.data.label})]}),(j||s)&&(()=>{const de=d.current?(()=>{const pt=(d.current.querySelector(".bg-card")||d.current).getBoundingClientRect();return{width:pt.width/S,height:pt.height/S}})():{width:140,height:100},He=br(o.position.x,o.position.y,de.width,de.height,16);return f.jsx(f.Fragment,{children:He.map((Be,yt)=>{const pt=Be.x-o.position.x,qt=Be.y-o.position.y;return f.jsx("div",{className:"absolute w-3 h-3 rounded-full bg-primary/80 border-2 border-card cursor-crosshair hover:scale-150 hover:bg-primary transition-all z-10",style:{left:`${pt-6}px`,top:`${qt-6}px`},onMouseDown:Ze=>{Ze.stopPropagation(),at(Ze,yt)},onMouseUp:Ze=>{Ze.stopPropagation(),s&&t?.(yt)},title:"Connection point"},yt)})})})()]})})})}const f3=x.memo(d3,(o,e)=>!(o.node.id!==e.node.id||o.node.position.x!==e.node.position.x||o.node.position.y!==e.node.position.y||o.node.selected!==e.node.selected||o.node.type!==e.node.type||o.node.data.label!==e.node.data.label||o.isConnecting!==e.isConnecting||o.onConnectionStart!==e.onConnectionStart||o.onConnectionEnd!==e.onConnectionEnd||o.onContextMenu!==e.onContextMenu));function h3({selectedNodeId:o,highlightPath:e=!0}){const{nodes:t,connections:s}=Re(),{isRunning:r}=kt(),{getConnectionMessages:l}=Da(),[c,d]=x.useState(new Set),[h,p]=x.useState(new Map);return x.useEffect(()=>{if(!o||!e||!r){d(new Set),p(new Map);return}const g=new Set,m=new Map,v=[{nodeId:o,path:[o]}];for(;v.length>0;){const{nodeId:w,path:C}=v.shift();if(g.has(w))continue;g.add(w);const S=s.filter(R=>R.source===w);for(const R of S){const E=R.target,T=[...C,E];m.set(R.id,T),g.has(E)||v.push({nodeId:E,path:T})}}p(m),d(new Set(m.keys()))},[o,s,e,r]),x.useEffect(()=>{if(!o||!e||!r)return;const g=new Set,m=[{nodeId:o,path:[o]}];for(;m.length>0;){const{nodeId:v,path:w}=m.shift();if(g.has(v))continue;g.add(v);const C=s.filter(S=>S.target===v);for(const S of C){const R=S.source,E=[R,...w],T=h.get(S.id)||[];(T.length===0||E.length<T.length)&&(h.set(S.id,E),p(new Map(h))),g.has(R)||m.push({nodeId:R,path:E})}}d(new Set(h.keys()))},[o,s,e,r]),null}function p3(o){const{selectedNodeId:e}=Re(),{isRunning:t}=kt(),[s,r]=x.useState(!1);return x.useEffect(()=>{if(!e||!t){r(!1);return}const{nodes:l,connections:c}=Re.getState();if(!l.find(p=>p.id===e)){r(!1);return}const h=c.find(p=>p.id===o);h&&(h.source===e||h.target===e)?r(!0):r(!1)},[e,o,t]),s}const BC=x.createContext(null);function g3({children:o}){const e=x.useRef(null),t=x.useRef(new WeakMap);x.useEffect(()=>(e.current=new ResizeObserver(l=>{l.forEach(c=>{const d=t.current.get(c.target);d&&d()})}),()=>{e.current&&(e.current.disconnect(),e.current=null)}),[]);const r={observe:x.useCallback((l,c)=>e.current?(t.current.set(l,c),e.current.observe(l),()=>{e.current&&(e.current.unobserve(l),t.current.delete(l))}):()=>{},[])};return f.jsx(BC.Provider,{value:r,children:o})}function $C(){const o=x.useContext(BC);if(!o)throw new Error("useResizeObserver must be used within ResizeObserverProvider");return o}function m3({connection:o,sourceNode:e,targetNode:t,zoom:s,pan:r,isSelected:l=!1,onClick:c,onContextMenu:d}){const[h,p]=x.useState(!1),{isRunning:g,connectionMetrics:m}=kt(HC(V=>({isRunning:V.isRunning,connectionMetrics:V.connectionMetrics}))),v=g?m.get(o.id):void 0,{getConnectionMessages:w}=Da(),C=Re(V=>V.selectedNodeId),S=Re(V=>V.connections),R=g?w(o.id):[],E=x.useMemo(()=>R.filter(V=>V.status==="in-transit"||V.status==="pending"),[R]),T=p3(o.id);x.useMemo(()=>S.some(V=>V.source===o.target&&V.target===o.source),[S,o.target,o.source]);const{getNodeRef:N}=Su(),{observe:A}=$C(),[j,q]=x.useState(()=>{const V=pe=>{const me=N(pe);if(!me)return{width:140,height:100};const Pe=(me.querySelector(".bg-card")||me).getBoundingClientRect();return{width:Pe.width/s,height:Pe.height/s}};return{source:V(e.id),target:V(t.id)}});x.useEffect(()=>{const V=()=>{const We=jt=>{const de=N(jt);if(!de)return{width:140,height:100};const yt=(de.querySelector(".bg-card")||de).getBoundingClientRect();return{width:yt.width/s,height:yt.height/s}};q({source:We(e.id),target:We(t.id)})};V();const pe=N(e.id),me=N(t.id),ye=pe?.querySelector(".bg-card"),ve=me?.querySelector(".bg-card"),Pe=ye||pe,Ue=ve||me,at=[];if(Pe){const We=A(Pe,V);at.push(We)}if(Ue){const We=A(Ue,V);at.push(We)}return()=>{at.forEach(We=>We())}},[e.id,t.id,s,N,A]);const P=j.source.width,H=j.source.height,ee=j.target.width,se=j.target.height,le=P/2,te=H/2,ae=ee/2,ce=se/2;let ue,z,D,L;if(o.sourcePort!==void 0&&o.targetPort!==void 0){const V=br(e.position.x,e.position.y,P,H,16),pe=br(t.position.x,t.position.y,ee,se,16),me=V[o.sourcePort],ye=pe[o.targetPort];ue=me.x,z=me.y,D=ye.x,L=ye.y}else{const V=e.position.x+le,pe=e.position.y+te,me=t.position.x+ae,ye=t.position.y+ce,ve=Math.atan2(ye-pe,me-V),Pe=(We,jt,de,He)=>{const Be=Math.abs(de),yt=He?le:ae,pt=He?te:ce,qt=Math.atan2(pt,yt);let Ze,Dt;if(Be<qt||Be>Math.PI-qt){const vt=He?1:-1;Ze=We+vt*yt*Math.sign(Math.cos(de)),Dt=jt+vt*yt*Math.tan(de)*Math.sign(Math.cos(de))}else{const vt=He?1:-1;Ze=We+vt*pt/Math.tan(de)*Math.sign(Math.sin(de)),Dt=jt+vt*pt*Math.sign(Math.sin(de))}return{x:Ze,y:Dt}},Ue=Pe(V,pe,ve,!0),at=Pe(me,ye,ve,!1);ue=Ue.x,z=Ue.y,D=at.x,L=at.y}const Y=D-ue,he=L-z,_=Math.min(Math.abs(Y),Math.abs(he))*.3+30,$=`
    M ${ue},${z}
    C ${ue+_*Math.sign(Y)},${z}
      ${D-_*Math.sign(Y)},${L}
      ${D},${L}
  `;let X="hsl(var(--border))",W=2;T&&C?(X="hsl(280 100% 70%)",W=3):l?(X="hsl(var(--primary))",W=2.5):h?(X="hsl(var(--accent))",W=2.5):v&&g&&(v.effectiveThroughput>0||v.traffic>0)&&(v.bottleneck?(X="hsl(0 84% 60%)",W=3):v.backpressure>.7?(X="hsl(25 95% 53%)",W=2.5):v.congestion>.6?(X="hsl(45 93% 47%)",W=2.5):v.throughputDependency>.5?(X="hsl(142 76% 36%)",W=2):v.effectiveThroughput>0&&(X="hsl(var(--primary))",W=2));const K=V=>{V.stopPropagation(),c?.()},oe=V=>{V.preventDefault(),V.stopPropagation(),d?.(V)},B=g&&v&&v.effectiveThroughput>0?v.effectiveThroughput%40/2:0;return f.jsxs("g",{children:[f.jsx("path",{d:$,fill:"none",stroke:"transparent",strokeWidth:20/s,style:{cursor:"pointer"},onClick:K,onContextMenu:oe,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)}),g&&v&&v.effectiveThroughput>0&&v.traffic>0&&f.jsx("path",{d:$,fill:"none",stroke:X,strokeWidth:Math.max(1,W/s),strokeLinecap:"round",strokeDasharray:`${Math.max(4,8/s)} ${Math.max(2,4/s)}`,strokeDashoffset:-B,style:{opacity:.4,pointerEvents:"none",animation:"flow 2s linear infinite"}}),g&&E.map((V,pe)=>{const me=Date.now()-V.timestamp,ve=V.latency?Math.min(1,me/V.latency):0,Pe=ue+(D-ue)*ve,Ue=z+(L-z)*ve,We={json:"hsl(142 76% 36%)",xml:"hsl(25 95% 53%)",binary:"hsl(221 83% 53%)",protobuf:"hsl(280 100% 70%)",text:"hsl(210 40% 50%)"}[V.format]||"hsl(var(--primary))";return f.jsxs("g",{children:[f.jsx("circle",{cx:Pe,cy:Ue,r:4/s,fill:We,stroke:"hsl(var(--background))",strokeWidth:1/s,style:{pointerEvents:"none",filter:"drop-shadow(0 0 2px rgba(0,0,0,0.3))"},children:f.jsx("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"1s",repeatCount:"indefinite"})}),V.size>1e3&&f.jsx("text",{x:Pe,y:Ue-8/s,fill:We,fontSize:8/s,textAnchor:"middle",style:{pointerEvents:"none",userSelect:"none"},children:V.format})]},V.id||pe)}),f.jsx("path",{d:$,fill:"none",stroke:X,strokeWidth:Math.max(1,W/s),strokeLinecap:"round",markerEnd:g&&v&&(v.effectiveThroughput>0||v.traffic>0)?`url(#arrowhead-${l?"selected":v?.bottleneck?"bottleneck":"default"})`:l?"url(#arrowhead-selected)":"url(#arrowhead-default)",style:{transition:"stroke 0.3s, stroke-width 0.3s",pointerEvents:"none"}}),g&&v&&(v.effectiveThroughput>0||v.traffic>0)?f.jsxs("g",{children:[f.jsx("text",{x:(ue+D)/2,y:(z+L)/2-10/s,fill:"hsl(var(--primary))",fontSize:Math.max(8,11/s),textAnchor:"middle",fontWeight:"500",style:{pointerEvents:"none",userSelect:"none"},children:o.label||`${v.latency.toFixed(1)}ms`}),f.jsx("text",{x:(ue+D)/2,y:(z+L)/2+8/s,fill:"hsl(var(--muted-foreground))",fontSize:Math.max(7,9/s),textAnchor:"middle",style:{pointerEvents:"none",userSelect:"none"},children:v.traffic>0?`${v.traffic.toFixed(1)} KB/s`:`${v.effectiveThroughput.toFixed(0)} msg/s`}),o.data?.bandwidthMbps&&v.traffic>0&&f.jsxs("text",{x:(ue+D)/2,y:(z+L)/2+20/s,fill:"hsl(var(--muted-foreground))",fontSize:Math.max(6,8/s),textAnchor:"middle",style:{pointerEvents:"none",userSelect:"none",opacity:.7},children:["Limit: ",o.data.bandwidthMbps,"Mbps"]})]}):o.label?f.jsx("g",{children:f.jsx("text",{x:(ue+D)/2,y:(z+L)/2-10/s,fill:"hsl(var(--primary))",fontSize:Math.max(8,11/s),textAnchor:"middle",fontWeight:"500",style:{pointerEvents:"none",userSelect:"none"},children:o.label})}):null]})}const y3=x.memo(m3,(o,e)=>!(o.connection.id!==e.connection.id||o.connection.sourcePort!==e.connection.sourcePort||o.connection.targetPort!==e.connection.targetPort||o.connection.label!==e.connection.label||o.sourceNode.id!==e.sourceNode.id||o.sourceNode.position.x!==e.sourceNode.position.x||o.sourceNode.position.y!==e.sourceNode.position.y||o.targetNode.id!==e.targetNode.id||o.targetNode.position.x!==e.targetNode.position.x||o.targetNode.position.y!==e.targetNode.position.y||o.zoom!==e.zoom||o.pan.x!==e.pan.x||o.pan.y!==e.pan.y||o.isSelected!==e.isSelected||o.onClick!==e.onClick||o.onContextMenu!==e.onContextMenu)),v3=140,b3=140,x3=16;function w3({nodeId:o,position:e}){const t=kt(g=>g.componentMetrics.get(o)),{connections:s}=Re(),{isRunning:r}=kt(),l=s.some(g=>g.source===o||g.target===o),c=t&&(t.throughput&&t.throughput>.1||t.errorRate&&t.errorRate>.001||t.utilization&&t.utilization>.01),d=x.useMemo(()=>{if(!t)return[];const g=[{label:"Throughput",value:`${Math.round(t.throughput)}`,unit:"ops/s",color:"text-blue-400"},{label:"Latency (avg)",value:`${Math.round(t.latency)}`,unit:"ms",color:"text-yellow-400"}];return t.latencyP50!==void 0&&g.push({label:"Latency (p50)",value:`${Math.round(t.latencyP50)}`,unit:"ms",color:"text-green-400"}),t.latencyP99!==void 0&&g.push({label:"Latency (p99)",value:`${Math.round(t.latencyP99)}`,unit:"ms",color:"text-red-400"}),g.push({label:"Error Rate",value:`${(t.errorRate*100).toFixed(2)}`,unit:"%",color:"text-orange-400"},{label:"Utilization",value:`${Math.round(t.utilization*100)}`,unit:"%",color:"text-purple-400"}),g},[t]);if(!r||!t||!l||!c||d.length===0)return null;const h=e.x+v3/2,p=e.y+b3+x3;return f.jsx("div",{className:"absolute pointer-events-none",style:{left:`${h}px`,top:`${p}px`,transform:"translateX(-50%)",zIndex:10},children:f.jsx("div",{className:"bg-slate-900 border border-slate-700 rounded-lg p-2 shadow-lg min-w-max",children:f.jsx("div",{className:"text-xs space-y-1",children:d.map(g=>f.jsxs("div",{className:"flex items-center justify-between gap-3",children:[f.jsxs("span",{className:"text-slate-400",children:[g.label,":"]}),f.jsxs("span",{className:`font-mono font-semibold ${g.color}`,children:[g.value," ",g.unit]})]},g.label))})})})}function C3({isVisible:o=!0}){return o?f.jsx("div",{className:"absolute bottom-4 right-4 bg-card/95 backdrop-blur-sm border border-border rounded-md p-2 z-10 pointer-events-none",children:f.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-muted-foreground",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-green-500/20 border border-green-500/30"}),f.jsx("span",{children:"<20%"})]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500/20 border border-yellow-500/30"}),f.jsx("span",{children:"20-40%"})]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-orange-500/20 border border-orange-500/30"}),f.jsx("span",{children:"40-60%"})]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-red-500/20 border border-red-500/30"}),f.jsx("span",{children:">60%"})]})]})}):null}function S3({isVisible:o=!0}){const{nodes:e,connections:t,zoom:s,pan:r}=Re(),{isRunning:l}=kt(),c=Et.useMemo(()=>{if(e.length===0)return{minX:0,minY:0,maxX:2e3,maxY:2e3};const T=e.map(H=>H.position.x),N=e.map(H=>H.position.y),A=Math.min(...T)-200,j=Math.min(...N)-200,q=Math.max(...T)+200,P=Math.max(...N)+200;return{minX:A,minY:j,maxX:q,maxY:P}},[e]),d=c.maxX-c.minX,h=c.maxY-c.minY,p=120,g=80,m=p/Math.max(d,1e3),v=g/Math.max(h,1e3),w=Math.min(m,v),C=window.innerWidth/s*w,S=window.innerHeight/s*w,R=(-r.x/s-c.minX)*w,E=(-r.y/s-c.minY)*w;return o?f.jsx("div",{className:"absolute bottom-4 left-4 bg-card/95 backdrop-blur-sm border border-border rounded-md p-2 z-10 pointer-events-none",children:f.jsxs("svg",{width:p,height:g,className:"border border-border/50 rounded",style:{background:"hsl(var(--background))"},children:[t.map(T=>{const N=e.find(ee=>ee.id===T.source),A=e.find(ee=>ee.id===T.target);if(!N||!A)return null;const j=(N.position.x-c.minX)*w,q=(N.position.y-c.minY)*w,P=(A.position.x-c.minX)*w,H=(A.position.y-c.minY)*w;return f.jsx("line",{x1:j,y1:q,x2:P,y2:H,stroke:"hsl(var(--border))",strokeWidth:.3,opacity:.2},T.id)}),e.map(T=>f.jsx("circle",{cx:(T.position.x-c.minX)*w,cy:(T.position.y-c.minY)*w,r:1.5,fill:"hsl(var(--muted-foreground))",opacity:.5},T.id)),f.jsx("rect",{x:R,y:E,width:C,height:S,fill:"hsl(var(--primary))",fillOpacity:.2,stroke:"hsl(var(--primary))",strokeWidth:1.5,strokeDasharray:"2 2"})]})}):null}function M3({x:o,y:e,onDelete:t,onRename:s,onCopyId:r,onClose:l}){const c=x.useRef(null),[d,h]=x.useState({x:o,y:e});return x.useEffect(()=>{if(c.current){const p=c.current.getBoundingClientRect(),g=window.innerWidth,m=window.innerHeight;let v=o,w=e;o+p.width>g&&(v=g-p.width-10),e+p.height>m&&(w=m-p.height-10),v=Math.max(10,v),w=Math.max(10,w),h({x:v,y:w})}},[o,e]),x.useEffect(()=>{const p=m=>{c.current&&!c.current.contains(m.target)&&l()},g=m=>{m.key==="Escape"&&l()};return document.addEventListener("mousedown",p),document.addEventListener("keydown",g),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("keydown",g)}},[l]),f.jsxs("div",{ref:c,className:"fixed bg-popover border border-border rounded-md shadow-lg z-50 py-0.5 min-w-[120px]",style:{left:`${d.x}px`,top:`${d.y}px`},children:[f.jsxs("button",{onClick:()=>{s(),l()},className:"w-full px-2 py-1 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(wA,{className:"w-3.5 h-3.5"}),"Rename"]}),f.jsxs("button",{onClick:()=>{r(),l()},className:"w-full px-2 py-1 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(cb,{className:"w-3.5 h-3.5"}),"Copy ID"]}),f.jsx("div",{className:"border-t border-border my-0.5"}),f.jsxs("button",{onClick:()=>{t(),l()},className:"w-full px-2.5 py-1.5 text-xs text-destructive hover:bg-destructive hover:text-destructive-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(Uh,{className:"w-3.5 h-3.5"}),"Delete"]})]})}const E3=140,R3=100;function N3(o,e,t){const s=t(o);if(!s)return{width:E3,height:R3};const c=(s.querySelector(".bg-card")||s).getBoundingClientRect();return{width:c.width/e,height:c.height/e}}function A3(o,e){const{getNodeRef:t}=Su(),{observe:s}=$C(),[r,l]=x.useState({}),c=x.useCallback(()=>{const d={};o.forEach(h=>{const p=N3(h,e,t);p&&(d[h]=p)}),l(h=>({...h,...d}))},[o,e,t]);return x.useEffect(()=>{if(o.length===0)return;c();const d=[];return o.forEach(h=>{const p=t(h);if(p){const m=p.querySelector(".bg-card")||p;if(m){const v=s(m,c);d.push(v)}}}),()=>{d.forEach(h=>h())}},[o,e,c,t,s]),r}const ah=20,T3=140,k3=100,j3=18,D3=6,_3=j3+D3*2;function z3(o,e,t,s){return x.useMemo(()=>{const r=e.filter(v=>o.nodeIds.includes(v.id));if(r.length===0)return null;const l=ah,c=ah,d=o.showName!==!1?_3:ah;let h=1/0,p=1/0,g=-1/0,m=-1/0;return r.forEach(v=>{const w=t[v.id]||{width:T3,height:k3},C=v.position.x,S=v.position.y,R=C+w.width,E=S+w.height;h=Math.min(h,C),p=Math.min(p,S),g=Math.max(g,R),m=Math.max(m,E)}),{x:h-l,y:p-d,width:g-h+l*2,height:m-p+d+c}},[e,o.nodeIds,t,s,o.showName])}function O3(o,e){const{nodes:t,updateNodes:s}=Re(),[r,l]=x.useState(!1),c=x.useRef({x:0,y:0}),d=x.useRef({}),h=x.useCallback(p=>{if(p.button!==0||p.target.closest("[data-node-id]"))return;p.stopPropagation();const v=Re.getState();v.selectGroup(o.id),l(!0),c.current.x=p.clientX,c.current.y=p.clientY,v.setGroupDragging(!0);const w=t.filter(C=>o.nodeIds.includes(C.id));d.current={},w.forEach(C=>{d.current[C.id]={...C.position}})},[o.id,o.nodeIds,t]);return x.useEffect(()=>{if(!r)return;let p=null,g=null,m=!0;const v=C=>{if(!m)return;const S=(C.clientX-c.current.x)/e,R=(C.clientY-c.current.y)/e;g={dx:S,dy:R},p===null&&(p=requestAnimationFrame(()=>{if(!m||!g){p=null,g=null;return}const{dx:E,dy:T}=g,N=Re.getState(),A=o.nodeIds.map(j=>{const q=d.current[j];return q?{id:j,updates:{position:{x:q.x+E,y:q.y+T}}}:null}).filter(j=>j!==null);A.length>0&&N.updateNodes(A,!0),p=null,g=null}))},w=C=>{if(C&&C.button!==0)return;m=!1,p!==null&&(cancelAnimationFrame(p),p=null);const S=Re.getState();if(g){const{dx:R,dy:E}=g,T=o.nodeIds.map(N=>{const A=d.current[N];return A?{id:N,updates:{position:{x:A.x+R,y:A.y+E}}}:null}).filter(N=>N!==null);if(S.setGroupDragging(!1),T.length>0){S.updateNodes(T,!0);const N=Re.getState();ht(N,N.diagramName)}}else S.setGroupDragging(!1);g=null,l(!1)};return document.addEventListener("mousemove",v,{passive:!0}),document.addEventListener("mouseup",w,{capture:!0}),()=>{m=!1,p!==null&&cancelAnimationFrame(p),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",w,{capture:!0}),Re.getState().setGroupDragging(!1)}},[r,o.nodeIds,e]),{isDragging:r,handleMouseDown:h}}const Tv=18,gc=6;function L3({group:o,zoom:e}){const{nodes:t,selectedGroupId:s,selectGroup:r,deleteGroup:l,updateGroup:c}=Re(),[d,h]=x.useState(null),[p,g]=x.useState(!1),[m,v]=x.useState(!1),w=A3(o.nodeIds,e),C=z3(o,t,w,e),{handleMouseDown:S}=O3(o,e);if(!C)return null;const R=s===o.id,E=o.color||"hsl(var(--primary))",T=H=>{H.preventDefault(),H.stopPropagation(),r(o.id),h({x:H.clientX,y:H.clientY})},N=()=>{g(!0)},A=()=>{l(o.id),Fe.success("Group deleted"),g(!1)},j=()=>{v(!0)},q=H=>{c(o.id,{name:H}),Fe.success("Group renamed"),v(!1)},P=()=>{navigator.clipboard.writeText(o.id),Fe.success("Group ID copied to clipboard")};return f.jsxs(f.Fragment,{children:[f.jsxs("g",{children:[f.jsx("rect",{x:C.x,y:C.y,width:C.width,height:C.height,fill:E,fillOpacity:R?.1:.05,stroke:E,strokeWidth:R?3/e:2/e,strokeDasharray:R?"0":"5,5",rx:8/e,ry:8/e,style:{cursor:"pointer",transition:"all 0.2s"},onMouseDown:S,onContextMenu:T}),o.showName!==!1&&f.jsxs("g",{onClick:H=>{H.stopPropagation(),r(o.id)},onContextMenu:T,style:{cursor:"pointer"},children:[f.jsx("rect",{x:C.x+gc,y:C.y+gc,width:Math.max(80,o.name.length*6.5+16),height:Tv,fill:E,fillOpacity:.85,rx:3,ry:3,stroke:E,strokeWidth:.5}),f.jsx("text",{x:C.x+gc+8,y:C.y+gc+Tv/2,fill:"white",fontSize:11,fontWeight:"600",dominantBaseline:"middle",style:{pointerEvents:"none",userSelect:"none"},children:o.name})]})]}),d&&f.jsx(M3,{x:d.x,y:d.y,onDelete:N,onRename:j,onCopyId:P,onClose:()=>h(null)}),f.jsx(qC,{open:p,groupName:o.name,onConfirm:A,onCancel:()=>g(!1)}),f.jsx(rp,{open:m,initialName:o.name,onConfirm:q,onCancel:()=>v(!1)})]})}const P3=x.memo(L3,(o,e)=>!(o.group.id!==e.group.id||o.group.name!==e.group.name||o.group.color!==e.group.color||o.group.nodeIds.length!==e.group.nodeIds.length||o.group.nodeIds.some((t,s)=>t!==e.group.nodeIds[s])||o.zoom!==e.zoom));function I3({isVisible:o,canvasRef:e}){const{zoom:t,pan:s}=Re(),[r,l]=x.useState(null),c=x.useRef(null);if(x.useEffect(()=>{if(!o){l(null);return}const j=()=>{if(e?.current)l(e.current.getBoundingClientRect());else if(c.current?.parentElement){const se=c.current.parentElement.getBoundingClientRect(),le=24;l({...se,width:se.width-le,height:se.height-le,left:se.left+le,top:se.top+le})}},q=setTimeout(j,10),P=requestAnimationFrame(j),H=requestAnimationFrame(()=>{requestAnimationFrame(j)});return window.addEventListener("resize",j),()=>{clearTimeout(q),cancelAnimationFrame(P),cancelAnimationFrame(H),window.removeEventListener("resize",j)}},[o,e]),x.useEffect(()=>{if(!o)return;const q=requestAnimationFrame(()=>{e?.current&&l(e.current.getBoundingClientRect())});return()=>cancelAnimationFrame(q)},[t,s,o,e]),!o)return null;if(!r)return f.jsx("div",{ref:c,className:"absolute inset-0 pointer-events-none z-20"});const d=20,h=d*t;let p=1;h<10?p=10:h<20?p=5:h<40&&(p=2);const g=d*p,m=24,v=24,w=r.width,C=r.height,S=Math.floor(-s.x/t/g)*g,R=Math.floor(-s.y/t/g)*g,E=S+w/t+g*2,T=R+C/t+g*2,N=[];for(let j=S;j<=E;j+=g)N.push(j);const A=[];for(let j=R;j<=T;j+=g)A.push(j);return f.jsxs("div",{ref:c,className:"absolute inset-0 pointer-events-none z-20",children:[f.jsx("div",{className:"absolute bg-card/90 backdrop-blur-sm border-b border-border pointer-events-none",style:{top:0,left:`${m}px`,right:0,height:`${v}px`,transform:`translate(${s.x}px, 0) scale(${t})`,transformOrigin:"0 0"},children:N.map(j=>f.jsx("div",{className:"absolute top-0 bottom-0 border-l border-border/60",style:{left:`${j}px`,width:"1px"},children:f.jsx("span",{className:"absolute top-0.5 left-1 text-[10px] text-muted-foreground font-mono whitespace-nowrap",style:{transform:`scale(${1/t})`,transformOrigin:"0 0"},children:j})},`h-${j}`))}),f.jsx("div",{className:"absolute bg-card/90 backdrop-blur-sm border-r border-border pointer-events-none",style:{top:`${v}px`,left:0,bottom:0,width:`${m}px`,transform:`translate(0, ${s.y}px) scale(${t})`,transformOrigin:"0 0"},children:A.map(j=>f.jsx("div",{className:"absolute left-0 right-0 border-t border-border/60",style:{top:`${j}px`,height:"1px"},children:f.jsx("span",{className:"absolute left-0.5 top-1 text-[10px] text-muted-foreground font-mono whitespace-nowrap",style:{transform:`scale(${1/t})`,transformOrigin:"0 0"},children:j})},`v-${j}`))}),f.jsx("div",{className:"absolute bg-card/90 backdrop-blur-sm border-b border-r border-border pointer-events-none",style:{top:0,left:0,width:`${m}px`,height:`${v}px`}})]})}function q3({x:o,y:e,onDelete:t,onDuplicate:s,onCopyId:r,onBringToFront:l,onSendToBack:c,onBringForward:d,onSendBackward:h,onAddToGroup:p,onRemoveFromGroup:g,onClose:m}){const v=x.useRef(null);x.useEffect(()=>{const q=H=>{v.current&&!v.current.contains(H.target)&&m()},P=H=>{H.key==="Escape"&&m()};return document.addEventListener("mousedown",q),document.addEventListener("keydown",P),()=>{document.removeEventListener("mousedown",q),document.removeEventListener("keydown",P)}},[m]);const w=()=>{t(),m()},C=()=>{s(),m()},S=()=>{r(),m()},R=()=>{l?.(),m()},E=()=>{c?.(),m()},T=()=>{d?.(),m()},N=()=>{h?.(),m()},A=()=>{p?.(),m()},j=()=>{g?.(),m()};return f.jsxs("div",{ref:v,className:"fixed bg-popover border border-border rounded-md shadow-lg z-50 py-0.5 min-w-[140px]",style:{left:`${o}px`,top:`${e}px`},children:[f.jsxs("button",{onClick:C,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(ub,{className:"w-3.5 h-3.5"}),"Duplicate"]}),f.jsxs("button",{onClick:S,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(cb,{className:"w-3.5 h-3.5"}),"Copy ID"]}),(p||g)&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"border-t border-border my-0.5"}),g&&f.jsxs("button",{onClick:j,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(P2,{className:"w-3.5 h-3.5"}),"Remove from Group"]}),p&&f.jsxs("button",{onClick:A,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(ch,{className:"w-3.5 h-3.5"}),"Add to Group"]})]}),f.jsx("div",{className:"border-t border-border my-0.5"}),(l||c||d||h)&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:R,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(v2,{className:"w-3.5 h-3.5"}),"Bring to Front"]}),f.jsxs("button",{onClick:E,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(p2,{className:"w-3.5 h-3.5"}),"Send to Back"]}),f.jsxs("button",{onClick:T,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(lb,{className:"w-3.5 h-3.5"}),"Bring Forward"]}),f.jsxs("button",{onClick:N,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(Uc,{className:"w-3.5 h-3.5"}),"Send Backward"]}),f.jsx("div",{className:"border-t border-border my-0.5"})]}),f.jsxs("button",{onClick:w,className:"w-full px-2.5 py-1.5 text-xs text-destructive hover:bg-destructive hover:text-destructive-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(Uh,{className:"w-3.5 h-3.5"}),"Delete"]})]})}function H3({nodeId:o,x:e,y:t,onClose:s}){const r=x.useRef(null),{groups:l,addNodeToGroup:c}=Re();return x.useEffect(()=>{const d=p=>{r.current&&!r.current.contains(p.target)&&s()},h=p=>{p.key==="Escape"&&s()};return document.addEventListener("mousedown",d),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("keydown",h)}},[s]),f.jsxs("div",{ref:r,className:"fixed bg-popover border border-border rounded-md shadow-lg z-50 py-1 min-w-[180px]",style:{left:`${e}px`,top:`${t}px`},children:[f.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-b border-border",children:"Add to Group"}),f.jsx("div",{className:"max-h-60 overflow-y-auto",children:(()=>{const d=l.filter(h=>!h.nodeIds.includes(o));return d.length>0?d.map(h=>f.jsxs("button",{onClick:()=>{c(h.id,o),Fe.success(`Added to "${h.name}"`),s()},className:"w-full px-2 py-1.5 text-xs text-left text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-2 transition-colors",children:[f.jsx("div",{className:"w-3 h-3 rounded border border-border flex-shrink-0",style:{backgroundColor:h.color||"hsl(var(--primary))"}}),f.jsx("span",{className:"truncate flex-1",children:h.name})]},h.id)):f.jsx("div",{className:"px-2 py-4 text-xs text-muted-foreground text-center",children:l.length===0?"No groups available":"Already in all groups"})})()}),f.jsx("div",{className:"border-t border-border mt-1",children:f.jsx("button",{onClick:s,className:"w-full px-2 py-1.5 text-xs text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors",children:"Cancel"})})]})}function U3({nodeId:o,x:e,y:t,onClose:s}){const r=x.useRef(null),{groups:l,removeNodeFromGroup:c}=Re(),d=l.filter(h=>h.nodeIds.includes(o));return x.useEffect(()=>{const h=g=>{r.current&&!r.current.contains(g.target)&&s()},p=g=>{g.key==="Escape"&&s()};return document.addEventListener("mousedown",h),document.addEventListener("keydown",p),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",p)}},[s]),f.jsxs("div",{ref:r,className:"fixed bg-popover border border-border rounded-md shadow-lg z-50 py-1 min-w-[180px]",style:{left:`${e}px`,top:`${t}px`},children:[f.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-b border-border",children:"Remove from Group"}),f.jsx("div",{className:"max-h-60 overflow-y-auto",children:d.length>0?d.map(h=>f.jsxs("button",{onClick:()=>{c(h.id,o),Fe.success(`Removed from "${h.name}"`),s()},className:"w-full px-2 py-1.5 text-xs text-left text-destructive hover:bg-destructive/10 hover:text-destructive flex items-center gap-2 transition-colors",children:[f.jsx("div",{className:"w-3 h-3 rounded border border-border flex-shrink-0",style:{backgroundColor:h.color||"hsl(var(--primary))"}}),f.jsx("span",{className:"truncate flex-1",children:h.name})]},h.id)):f.jsx("div",{className:"px-2 py-4 text-xs text-muted-foreground text-center",children:"Not in any groups"})}),f.jsx("div",{className:"border-t border-border mt-1",children:f.jsx("button",{onClick:s,className:"w-full px-2 py-1.5 text-xs text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors",children:"Cancel"})})]})}function B3({x:o,y:e,onDelete:t,onClose:s}){const r=x.useRef(null),[l,c]=x.useState({x:o,y:e});return x.useEffect(()=>{if(r.current){const d=r.current.getBoundingClientRect(),h=window.innerWidth,p=window.innerHeight;let g=o,m=e;o+d.width>h&&(g=h-d.width-8),e+d.height>p&&(m=p-d.height-8),g=Math.max(8,g),m=Math.max(8,m),c({x:g,y:m})}},[o,e]),x.useEffect(()=>{const d=p=>{r.current&&!r.current.contains(p.target)&&s()},h=p=>{p.key==="Escape"&&s()};return document.addEventListener("mousedown",d),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("keydown",h)}},[s]),f.jsx("div",{ref:r,className:"fixed bg-card border border-border rounded-md shadow-lg z-50",style:{left:`${l.x}px`,top:`${l.y}px`},children:f.jsx("button",{className:"w-full px-3 py-2 text-sm text-left hover:bg-accent transition-colors first:rounded-t-md last:rounded-b-md",onClick:t,children:"Delete"})})}function kv(){const o=x.useRef(null),{nodes:e,connections:t,groups:s=[],addNode:r,addConnection:l,deleteConnection:c,zoom:d,pan:h,setPan:p,setZoom:g,selectNode:m,selectConnection:v,selectGroup:w,selectNodesByIds:C,selectedConnectionId:S,selectedNodeId:R,setViewportSize:E,deleteNode:T,updateNode:N,bringToFront:A,sendToBack:j,bringForward:q,sendBackward:P,canvasBounds:H,canvasChunks:ee,addNodeToGroup:se,removeNodeFromGroup:le}=Re(),{isRunning:te}=kt(),{showMinimap:ae,showHeatMapLegend:ce,showRuler:ue}=Oi(),{getNodeRef:z}=Su(),[D,L]=x.useState(!1),[Y,he]=x.useState({x:0,y:0}),[_,$]=x.useState(!1),[X,W]=x.useState(null),[K,oe]=x.useState(void 0),[B,V]=x.useState(null),[pe,me]=x.useState(null),[ye,ve]=x.useState(null),[Pe,Ue]=x.useState(null),[at,We]=x.useState(null),[jt,de]=x.useState(null),[He,Be]=x.useState(null);x.useEffect(()=>{if(!o.current)return;const J=()=>{if(!o.current)return;const be=o.current.getBoundingClientRect();E({width:be.width,height:be.height})};J();const fe=new ResizeObserver(()=>{J()});return fe.observe(o.current),window.addEventListener("resize",J),()=>{fe.disconnect(),window.removeEventListener("resize",J)}},[E]),x.useEffect(()=>{const J=fe=>{if((fe.ctrlKey||fe.metaKey)&&o.current){const be=o.current.getBoundingClientRect();fe.clientX>=be.left&&fe.clientX<=be.right&&fe.clientY>=be.top&&fe.clientY<=be.bottom&&fe.preventDefault()}};return document.addEventListener("wheel",J,{passive:!1,capture:!0}),()=>{document.removeEventListener("wheel",J,{capture:!0})}},[]);const yt=J=>{if(J.preventDefault(),!o.current)return;const fe=J.dataTransfer.getData("application/json");if(!fe)return;const be=JSON.parse(fe),_e=o.current.getBoundingClientRect(),Oe=(J.clientX-_e.left-h.x)/d,lt=(J.clientY-_e.top-h.y)/d,zt={id:`node-${Date.now()}`,type:be.type,position:{x:Oe,y:lt},data:{label:be.label}};r(zt)},pt=J=>{J.preventDefault(),J.dataTransfer.dropEffect="copy"},qt=J=>{const fe=J.button===0;if(J.button===1||fe&&J.ctrlKey){L(!0),he({x:J.clientX-h.x,y:J.clientY-h.y}),J.preventDefault();return}if(fe&&!_&&!J.ctrlKey&&!J.metaKey){if(o.current){const _e=o.current.getBoundingClientRect(),Oe=(J.clientX-_e.left-h.x)/d,lt=(J.clientY-_e.top-h.y)/d;Ue({x:Oe,y:lt}),We({x:Oe,y:lt,width:0,height:0})}m(null),v(null),w(null)}},Ze=J=>{if(D)p({x:J.clientX-Y.x,y:J.clientY-Y.y});else if(_&&o.current){const fe=o.current.getBoundingClientRect();V({x:(J.clientX-fe.left-h.x)/d,y:(J.clientY-fe.top-h.y)/d})}else if(Pe&&o.current){const fe=o.current.getBoundingClientRect(),be=(J.clientX-fe.left-h.x)/d,_e=(J.clientY-fe.top-h.y)/d,Oe=Math.min(Pe.x,be),lt=Math.min(Pe.y,_e),zt=Math.abs(be-Pe.x),Wt=Math.abs(_e-Pe.y),Rt={x:Oe,y:lt,width:zt,height:Wt};We(Rt);const ln=e.filter(wt=>{const ot=wt.position.x,mt=wt.position.y,Ht=wt.position.x+140,is=wt.position.y+140;return Ht>=Rt.x&&ot<=Rt.x+Rt.width&&is>=Rt.y&&mt<=Rt.y+Rt.height}).map(wt=>wt.id);C(ln)}},Dt=()=>{L(!1),_&&($(!1),W(null),V(null)),Pe&&(Ue(null),We(null))},vt=x.useCallback((J,fe)=>{$(!0),W(J),oe(fe)},[]),gt=x.useCallback(J=>{const fe=z(J);if(!fe)return{width:140,height:100};const Oe=(fe.querySelector(".bg-card")||fe).getBoundingClientRect();return{width:Oe.width/d,height:Oe.height/d}},[z,d]),Yt=x.useCallback((J,fe)=>{if(_&&X&&X!==J){const be=e.find(Oe=>Oe.id===X),_e=e.find(Oe=>Oe.id===J);if(be&&_e){const Oe=gt(X),lt=gt(J),zt=B?.x??_e.position.x+lt.width/2,Wt=B?.y??_e.position.y+lt.height/2,Rt=be.position.x+Oe.width/2,ln=be.position.y+Oe.height/2,wt=K!==void 0?K:Av(X,J,zt,Wt,t,be.position.x,be.position.y,Oe.width,Oe.height),ot=fe!==void 0?fe:Av(J,X,Rt,ln,t,_e.position.x,_e.position.y,lt.width,lt.height),mt={id:`conn-${Date.now()}`,source:X,target:J,type:"async",sourcePort:wt,targetPort:ot};l(mt)}}$(!1),W(null),oe(void 0),V(null)},[_,X,K,e,t,l,B,gt]),Gt=x.useCallback(J=>{v(J)},[v]),Rs=x.useCallback((J,fe,be)=>{me({connectionId:J,x:fe,y:be})},[]),Yn=x.useCallback(J=>{const fe=J.target,be=fe.closest?.("[data-node-id]"),_e=fe.closest?.("[data-connection-id]"),Oe=fe instanceof SVGElement,lt=fe.closest?.("svg")!==null;if(be||_e||Oe||lt)return;const zt=e.filter(Wt=>Wt.selected);zt.length>0&&(J.preventDefault(),J.stopPropagation(),ve({nodeId:zt[0].id,x:J.clientX,y:J.clientY}))},[e]),kn=x.useCallback(()=>{pe&&(c(pe.connectionId),me(null))},[pe,c]),rs=x.useMemo(()=>e.map(J=>J.id).join(","),[e]),Xt=x.useMemo(()=>{const J=new Map;return e.forEach(fe=>{const be=fe.id;J.set(be,{onConnectionStart:_e=>vt(be,_e),onConnectionEnd:_e=>Yt(be,_e),onContextMenu:(_e,Oe)=>ve({nodeId:be,x:_e,y:Oe})})}),J},[rs,vt,Yt,e]),Kt=x.useMemo(()=>t.map(J=>J.id).join(","),[t]),_t=x.useMemo(()=>{const J=new Map;return t.forEach(fe=>{const be=fe.id;J.set(be,{onClick:()=>Gt(be),onContextMenu:_e=>Rs(be,_e.clientX,_e.clientY)})}),J},[Kt,Gt,Rs,t]),Ua=J=>{if(J.ctrlKey&&o.current){J.preventDefault();const{left:fe,top:be,width:_e,height:Oe}=o.current.getBoundingClientRect(),lt=J.clientX-fe,zt=J.clientY-be,Wt=(lt-h.x)/d,Rt=(zt-h.y)/d,ln=1+Math.min(Math.max(-J.deltaY/500,-.5),.5);let wt=d*ln;wt=Math.min(Math.max(wt,.3),2.5);const ot=lt-Wt*wt,mt=zt-Rt*wt;g(wt),p({x:ot,y:mt})}},jn=20,Gi=ue?24:0,Ns=2e3,Ba=d<.5,oa=Re(J=>J.viewportWidth),Xn=Re(J=>J.viewportHeight),As=x.useMemo(()=>{if(oa===0||Xn===0)return e;const J=-h.x/d,fe=-h.y/d,be=(oa-h.x)/d,_e=(Xn-h.y)/d,Oe=200,lt=J-Oe,zt=fe-Oe,Wt=be+Oe,Rt=_e+Oe;return e.filter(ln=>{const wt=ln.position.x,ot=ln.position.y;return wt+140>=lt&&wt<=Wt&&ot+100>=zt&&ot<=Rt})},[e,d,h,oa,Xn]),Ts=x.useMemo(()=>new Set(As.map(J=>J.id)),[As]),Mu=x.useMemo(()=>t.filter(J=>Ts.has(J.source)&&Ts.has(J.target)),[t,Ts]);return f.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[f.jsx(I3,{isVisible:ue,canvasRef:o}),f.jsx("div",{ref:o,className:"absolute overflow-hidden",style:{top:`${Gi}px`,left:`${Gi}px`,right:0,bottom:0,cursor:D?"grabbing":_?"crosshair":"default",backgroundColor:"hsl(var(--muted) / 0.1)"},onDrop:yt,onDragOver:pt,onMouseDown:qt,onMouseMove:Ze,onMouseUp:Dt,onMouseLeave:Dt,onWheel:Ua,onContextMenu:Yn,children:f.jsxs("div",{style:{transform:`translate(${h.x}px, ${h.y}px) scale(${d})`,transformOrigin:"0 0",width:"100%",height:"100%",position:"relative"},children:[ee.map(J=>{const fe=J.x*Ns,be=J.y*Ns,_e=ee.some(ot=>ot.x===J.x+1&&ot.y===J.y),Oe=ee.some(ot=>ot.x===J.x&&ot.y===J.y+1),lt=h.x/d,zt=h.y/d,Wt=(-lt%jn+jn)%jn,Rt=(-zt%jn+jn)%jn,ln=fe%jn,wt=be%jn;return f.jsxs("div",{className:"absolute pointer-events-none",style:{left:`${fe}px`,top:`${be}px`,width:`${Ns}px`,height:`${Ns}px`,backgroundColor:"hsl(var(--canvas-bg))",backgroundImage:`
                  linear-gradient(hsl(var(--canvas-grid)) 1px, transparent 1px),
                  linear-gradient(90deg, hsl(var(--canvas-grid)) 1px, transparent 1px)
                `,backgroundSize:`${jn}px ${jn}px`,backgroundPosition:`${Wt+ln}px ${Rt+wt}px`,border:Ba?"2px dashed hsl(var(--border) / 0.6)":"none",boxShadow:Ba?"inset 0 0 0 1px hsl(var(--border) / 0.3)":"none"},children:[_e&&f.jsx("div",{className:"absolute top-0 bottom-0 pointer-events-none z-10",style:{right:0,width:"1px",backgroundColor:"hsl(var(--border) / 0.5)"}}),Oe&&f.jsx("div",{className:"absolute left-0 right-0 pointer-events-none z-10",style:{bottom:0,height:"1px",backgroundColor:"hsl(var(--border) / 0.5)"}})]},`chunk-${J.x}-${J.y}`)}),at&&f.jsx("div",{className:"absolute border-2 border-primary/60 bg-primary/10 pointer-events-none",style:{left:at.x,top:at.y,width:at.width,height:at.height}}),f.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"visible"},children:[f.jsxs("defs",{children:[f.jsx("marker",{id:"arrowhead-default",markerWidth:"8",markerHeight:"8",refX:"7",refY:"4",orient:"auto",markerUnits:"userSpaceOnUse",children:f.jsx("path",{d:"M0,0 L0,8 L8,4 z",fill:"hsl(var(--border))",stroke:"none"})}),f.jsx("marker",{id:"arrowhead-selected",markerWidth:"10",markerHeight:"10",refX:"8",refY:"5",orient:"auto",markerUnits:"userSpaceOnUse",children:f.jsx("path",{d:"M0,0 L0,10 L10,5 z",fill:"hsl(var(--primary))",stroke:"none"})}),f.jsx("marker",{id:"arrowhead-bottleneck",markerWidth:"12",markerHeight:"12",refX:"10",refY:"6",orient:"auto",markerUnits:"userSpaceOnUse",children:f.jsx("path",{d:"M0,0 L0,12 L12,6 z",fill:"hsl(0 84% 60%)",stroke:"none"})})]}),s&&s.length>0&&f.jsx("g",{style:{pointerEvents:"auto"},children:s.map(J=>f.jsx(P3,{group:J,zoom:d},J.id))}),f.jsxs("g",{style:{pointerEvents:"auto"},children:[Mu.map(J=>{const fe=e.find(Oe=>Oe.id===J.source),be=e.find(Oe=>Oe.id===J.target);if(!fe||!be)return null;const _e=_t.get(J.id);return _e?f.jsx(y3,{connection:J,sourceNode:fe,targetNode:be,zoom:d,pan:h,isSelected:S===J.id,onClick:_e.onClick,onContextMenu:_e.onContextMenu},J.id):null}),_&&X&&B&&(()=>{const J=e.find(Oe=>Oe.id===X);if(!J)return null;const fe=gt(X);let be,_e;if(K!==void 0){const lt=br(J.position.x,J.position.y,fe.width,fe.height,16)[K];be=lt.x,_e=lt.y}else be=J.position.x+fe.width/2,_e=J.position.y+fe.height/2;return f.jsx("line",{x1:be,y1:_e,x2:B.x,y2:B.y,stroke:"hsl(var(--primary))",strokeWidth:2/d,strokeDasharray:"5,5",style:{pointerEvents:"none"}})})()]})]}),As.map(J=>{const fe=Xt.get(J.id);return fe?f.jsx(f3,{node:J,onConnectionStart:fe.onConnectionStart,onConnectionEnd:fe.onConnectionEnd,isConnecting:_,onContextMenu:fe.onContextMenu},J.id):null}),te&&As.map(J=>f.jsx(w3,{nodeId:J.id,position:J.position},`metrics-${J.id}`))]})}),f.jsx(C3,{isVisible:ce}),f.jsx(S3,{isVisible:ae}),f.jsx(h3,{selectedNodeId:R,highlightPath:!0}),pe&&f.jsx(B3,{x:pe.x,y:pe.y,onDelete:kn,onClose:()=>me(null)}),ye&&(()=>{const J=e.find($e=>$e.id===ye.nodeId);if(!J)return null;const fe=e.filter($e=>$e.selected),be=fe.length>1,_e=()=>{be?(fe.forEach($e=>{T($e.id)}),Fe.success(`${fe.length} elements deleted`)):(T(J.id),Fe.success("Element deleted")),ve(null)},Oe=()=>{if(be)fe.forEach(($e,Dn)=>{const $a={...pc($e),id:`${$e.type}_${Date.now()}_${Dn}`,position:{x:$e.position.x+20+Dn*10,y:$e.position.y+20+Dn*10},selected:!1};$a.data?.config&&($a.data.config=pc($a.data.config)),r($a)}),Fe.success(`${fe.length} elements duplicated`);else{const $e={...pc(J),id:`${J.type}_${Date.now()}`,position:{x:J.position.x+20,y:J.position.y+20},selected:!1};$e.data?.config&&($e.data.config=pc($e.data.config)),r($e),Fe.success("Element duplicated")}ve(null)},lt=()=>{if(be){const $e=fe.map(Dn=>Dn.id).join(", ");navigator.clipboard.writeText($e),Fe.success(`${fe.length} IDs copied to clipboard`)}else navigator.clipboard.writeText(J.id),Fe.success("ID copied to clipboard");ve(null)},zt=()=>{be?(fe.forEach($e=>{A($e.id)}),Fe.success(`${fe.length} elements brought to front`)):(A(J.id),Fe.success("Brought to front")),ve(null)},Wt=()=>{be?(fe.forEach($e=>{j($e.id)}),Fe.success(`${fe.length} elements sent to back`)):(j(J.id),Fe.success("Sent to back")),ve(null)},Rt=()=>{be?(fe.forEach($e=>{q($e.id)}),Fe.success(`${fe.length} elements brought forward`)):(q(J.id),Fe.success("Brought forward")),ve(null)},ln=()=>{be?(fe.forEach($e=>{P($e.id)}),Fe.success(`${fe.length} elements sent backward`)):(P(J.id),Fe.success("Sent backward")),ve(null)},wt=()=>{de(be?{nodeId:fe[0].id,x:ye.x,y:ye.y}:{nodeId:J.id,x:ye.x,y:ye.y}),ve(null)},ot=be?s.filter($e=>fe.some(Dn=>$e.nodeIds.includes(Dn.id))):s.filter($e=>$e.nodeIds.includes(J.id)),mt=ot.length>=1,Ht=ot.length>=2,is=()=>{if(be){let $e=0;fe.forEach(Dn=>{s.filter(xo=>xo.nodeIds.includes(Dn.id)).forEach(xo=>{le(xo.id,Dn.id),$e++})}),$e>0&&Fe.success(`Removed ${fe.length} elements from groups`),ve(null)}else Ht?(Be({nodeId:J.id,x:ye.x,y:ye.y}),ve(null)):ot.length===1&&(le(ot[0].id,J.id),Fe.success(`Removed from "${ot[0].name}"`),ve(null))};return f.jsx(q3,{x:ye.x,y:ye.y,onDelete:_e,onDuplicate:Oe,onCopyId:lt,onBringToFront:zt,onSendToBack:Wt,onBringForward:Rt,onSendBackward:ln,onAddToGroup:wt,onRemoveFromGroup:mt?is:void 0,onClose:()=>ve(null)})})(),jt&&f.jsx(H3,{nodeId:jt.nodeId,x:jt.x,y:jt.y,onClose:()=>de(null)}),He&&f.jsx(U3,{nodeId:He.nodeId,x:He.x,y:He.y,onClose:()=>Be(null)})]})}const $3="modulepreload",Q3=function(o){return"/"+o},jv={},Se=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let h=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");r=h(t.map(p=>{if(p=Q3(p),p in jv)return;jv[p]=!0;const g=p.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":$3,g||(v.as="script"),v.crossOrigin="",v.href=p,d&&v.setAttribute("nonce",d),document.head.appendChild(v),g)return new Promise((w,C)=>{v.addEventListener("load",w),v.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return r.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},G3=x.lazy(()=>Se(()=>import("./KafkaConfigAdvanced-u32qLvtX.js"),__vite__mapDeps([0,1,2,3,4,5])).then(o=>({default:o.KafkaConfigAdvanced}))),K3=x.lazy(()=>Se(()=>import("./RabbitMQConfigAdvanced-H63u8ir9.js"),__vite__mapDeps([6,1,7,8,9,10,11,12,5,3])).then(o=>({default:o.RabbitMQConfigAdvanced}))),V3=x.lazy(()=>Se(()=>import("./PostgreSQLConfigAdvanced-CTIheyfu.js"),__vite__mapDeps([13,2,7,9,8,3,14,4,12])).then(o=>({default:o.PostgreSQLConfigAdvanced}))),F3=x.lazy(()=>Se(()=>import("./MongoDBConfigAdvanced-BP3XmrKT.js"),__vite__mapDeps([15,2,7,9,8,3])).then(o=>({default:o.MongoDBConfigAdvanced}))),Y3=x.lazy(()=>Se(()=>import("./RedisConfigAdvanced-BKWd6-oK.js"),__vite__mapDeps([16,2,9,8,3,12])).then(o=>({default:o.RedisConfigAdvanced}))),X3=x.lazy(()=>Se(()=>import("./ElasticsearchConfigAdvanced-BM7c7tow.js"),__vite__mapDeps([17,2,18,19,20,3,5])).then(o=>({default:o.ElasticsearchConfigAdvanced}))),W3=x.lazy(()=>Se(()=>import("./CassandraConfigAdvanced-DOl2YpjL.js"),__vite__mapDeps([21,1,2,3,14,20])).then(o=>({default:o.CassandraConfigAdvanced}))),Z3=x.lazy(()=>Se(()=>import("./ClickHouseConfigAdvanced-ClEvX3GN.js"),__vite__mapDeps([22,2,1,7,8,9,23,3,20])).then(o=>({default:o.ClickHouseConfigAdvanced}))),J3=x.lazy(()=>Se(()=>import("./SnowflakeConfigAdvanced--yzmLWKN.js"),__vite__mapDeps([24,2,18,19,3,12])).then(o=>({default:o.SnowflakeConfigAdvanced}))),eO=x.lazy(()=>Se(()=>import("./S3DataLakeConfigAdvanced-Cg8Cg-3K.js"),__vite__mapDeps([25,18,19,12,26])).then(o=>({default:o.S3DataLakeConfigAdvanced}))),tO=x.lazy(()=>Se(()=>import("./NginxConfigAdvanced-D2wryNK6.js"),__vite__mapDeps([27,2,28,29,11,5])).then(o=>({default:o.NginxConfigAdvanced}))),nO=x.lazy(()=>Se(()=>import("./RestApiConfigAdvanced-DboIUzeH.js"),__vite__mapDeps([30,2,28,20])).then(o=>({default:o.RestApiConfigAdvanced}))),sO=x.lazy(()=>Se(()=>import("./GRPCConfigAdvanced-BEo-vNS7.js"),__vite__mapDeps([31,2,18,29,32])).then(o=>({default:o.GRPCConfigAdvanced}))),aO=x.lazy(()=>Se(()=>import("./WebSocketConfigAdvanced-CA6sMOmr.js"),__vite__mapDeps([33,2,18,10,34,32])).then(o=>({default:o.WebSocketConfigAdvanced}))),oO=x.lazy(()=>Se(()=>import("./GraphQLConfigAdvanced-BWdVqln9.js"),__vite__mapDeps([35,2,18,3,20,32])).then(o=>({default:o.GraphQLConfigAdvanced}))),rO=x.lazy(()=>Se(()=>import("./SOAPConfigAdvanced-CnXm_nL1.js"),__vite__mapDeps([36,2,18,29,32])).then(o=>({default:o.SOAPConfigAdvanced}))),iO=x.lazy(()=>Se(()=>import("./WebhookConfigAdvanced-BC5Kxfy2.js"),__vite__mapDeps([37,18,38,34,32,39])).then(o=>({default:o.WebhookConfigAdvanced}))),lO=x.lazy(()=>Se(()=>import("./DockerK8sConfigAdvanced-CorH1Tx2.js"),__vite__mapDeps([40,2,1])).then(o=>({default:o.DockerK8sConfigAdvanced}))),cO=x.lazy(()=>Se(()=>import("./HAProxyConfigAdvanced-DG-x99eP.js"),__vite__mapDeps([41,18,42,32,29,5])).then(o=>({default:o.HAProxyConfigAdvanced}))),uO=x.lazy(()=>Se(()=>import("./TraefikConfigAdvanced-FxcP0LdB.js"),__vite__mapDeps([43,18,44,32,5])).then(o=>({default:o.TraefikConfigAdvanced}))),dO=x.lazy(()=>Se(()=>import("./EnvoyConfigAdvanced-Cenu5A6B.js"),__vite__mapDeps([45,18,28,29,32])).then(o=>({default:o.EnvoyConfigAdvanced}))),fO=x.lazy(()=>Se(()=>import("./ActiveMQConfigAdvanced-BwWLX5oh.js"),__vite__mapDeps([46,1,47,18,10,3,4,5])).then(o=>({default:o.ActiveMQConfigAdvanced}))),hO=x.lazy(()=>Se(()=>import("./AWSSQSConfigAdvanced-DlREkgIJ.js"),__vite__mapDeps([48,1,18,19,10,12,5,34])).then(o=>({default:o.AWSSQSConfigAdvanced}))),pO=x.lazy(()=>Se(()=>import("./AzureServiceBusConfigAdvanced-DHwPG5pv.js"),__vite__mapDeps([49,2,10,12])).then(o=>({default:o.AzureServiceBusConfigAdvanced}))),gO=x.lazy(()=>Se(()=>import("./GCPPubSubConfigAdvanced-MTSk7KBD.js"),__vite__mapDeps([50,2,10,4,12])).then(o=>({default:o.GCPPubSubConfigAdvanced}))),mO=x.lazy(()=>Se(()=>import("./KongConfigAdvanced-QtX5qu1V.js"),__vite__mapDeps([51,2,9,29,44,4])).then(o=>({default:o.KongConfigAdvanced}))),yO=x.lazy(()=>Se(()=>import("./ApigeeConfigAdvanced-DTskhBbg.js"),__vite__mapDeps([52,1,5])).then(o=>({default:o.ApigeeConfigAdvanced}))),vO=x.lazy(()=>Se(()=>import("./MuleSoftConfigAdvanced-IZ8G24U2.js"),__vite__mapDeps([53,1,3,32])).then(o=>({default:o.MuleSoftConfigAdvanced}))),bO=x.lazy(()=>Se(()=>import("./GraphQLGatewayConfigAdvanced-CsifIew2.js"),__vite__mapDeps([54,32,28])).then(o=>({default:o.GraphQLGatewayConfigAdvanced}))),xO=x.lazy(()=>Se(()=>import("./BFFServiceConfigAdvanced-BqQRjGjl.js"),__vite__mapDeps([55,18])).then(o=>({default:o.BFFServiceConfigAdvanced}))),wO=x.lazy(()=>Se(()=>import("./WebhookRelayConfigAdvanced-B516A41P.js"),__vite__mapDeps([56,2,47,18,38,34,32,39])).then(o=>({default:o.WebhookRelayConfigAdvanced}))),CO=x.lazy(()=>Se(()=>import("./PrometheusConfigAdvanced-BiXPIRsy.js"),__vite__mapDeps([57,2,9])).then(o=>({default:o.PrometheusConfigAdvanced}))),SO=x.lazy(()=>Se(()=>import("./GrafanaConfigAdvanced-C5qbh8vl.js"),__vite__mapDeps([58,2,23,3])).then(o=>({default:o.GrafanaConfigAdvanced}))),MO=x.lazy(()=>Se(()=>import("./LokiConfigAdvanced-B5pDK5R3.js"),[]).then(o=>({default:o.LokiConfigAdvanced}))),EO=x.lazy(()=>Se(()=>import("./JaegerConfigAdvanced-BTiHH1C5.js"),__vite__mapDeps([59,1,60])).then(o=>({default:o.JaegerConfigAdvanced}))),RO=x.lazy(()=>Se(()=>import("./OpenTelemetryCollectorConfigAdvanced-CKbtXtVC.js"),__vite__mapDeps([61,1,18,11])).then(o=>({default:o.OpenTelemetryCollectorConfigAdvanced}))),NO=x.lazy(()=>Se(()=>import("./PagerDutyConfigAdvanced-WFo2DphG.js"),__vite__mapDeps([62,18,4])).then(o=>({default:o.PagerDutyConfigAdvanced}))),AO=x.lazy(()=>Se(()=>import("./KeycloakConfigAdvanced-hIfLcqHY.js"),__vite__mapDeps([63,5,28,12,4,39,64])).then(o=>({default:o.KeycloakConfigAdvanced}))),TO=x.lazy(()=>Se(()=>import("./WAFConfigAdvanced-B1Bo9imb.js"),__vite__mapDeps([65,18,5,28,32])).then(o=>({default:o.WAFConfigAdvanced}))),kO=x.lazy(()=>Se(()=>import("./SecretsVaultConfigAdvanced-R-4OZNzm.js"),__vite__mapDeps([66,2,18,12,3,5,32])).then(o=>({default:o.SecretsVaultConfigAdvanced}))),jO=x.lazy(()=>Se(()=>import("./IDSIPSConfigAdvanced-VWSShfBp.js"),__vite__mapDeps([67,18,5,68,32])).then(o=>({default:o.IDSIPSConfigAdvanced}))),DO=x.lazy(()=>Se(()=>import("./FirewallConfigAdvanced-CaRMnHoo.js"),__vite__mapDeps([69,18,5,32,68,42])).then(o=>({default:o.FirewallConfigAdvanced}))),_O=x.lazy(()=>Se(()=>import("./JenkinsConfigAdvanced-DhE369in.js"),__vite__mapDeps([70,1,60,71,4,39])).then(o=>({default:o.JenkinsConfigAdvanced}))),zO=x.lazy(()=>Se(()=>import("./GitLabCIConfigAdvanced-CBCQwPsE.js"),__vite__mapDeps([72,1,60,39])).then(o=>({default:o.GitLabCIConfigAdvanced}))),OO=x.lazy(()=>Se(()=>import("./ArgoCDConfigAdvanced-DoQUEA0m.js"),__vite__mapDeps([73,1,39])).then(o=>({default:o.ArgoCDConfigAdvanced}))),LO=x.lazy(()=>Se(()=>import("./HarborConfigAdvanced-BzbCvyp5.js"),__vite__mapDeps([74,71,26,4,5])).then(o=>({default:o.HarborConfigAdvanced}))),PO=x.lazy(()=>Se(()=>import("./TerraformConfigAdvanced-Cwbq84Bs.js"),__vite__mapDeps([75,2,18,32,19,39])).then(o=>({default:o.TerraformConfigAdvanced}))),IO=x.lazy(()=>Se(()=>import("./AnsibleConfigAdvanced-DBXNFL_I.js"),__vite__mapDeps([76,18,29,32,39])).then(o=>({default:o.AnsibleConfigAdvanced}))),qO=x.lazy(()=>Se(()=>import("./IstioConfigAdvanced-Cski88bP.js"),__vite__mapDeps([77,18,28,44])).then(o=>({default:o.IstioConfigAdvanced}))),HO=x.lazy(()=>Se(()=>import("./ServiceMeshConfigAdvanced-Bqr3vrEX.js"),__vite__mapDeps([78,18,29,5])).then(o=>({default:o.ServiceMeshConfigAdvanced}))),UO=x.lazy(()=>Se(()=>import("./APIGatewayConfigAdvanced-r6-3Jizt.js"),__vite__mapDeps([79,9,18,28,5,42,44])).then(o=>({default:o.APIGatewayConfigAdvanced}))),BO=x.lazy(()=>Se(()=>import("./VPNConfigAdvanced-Bx544ibn.js"),__vite__mapDeps([80,18,4,64,39])).then(o=>({default:o.VPNConfigAdvanced}))),$O=x.lazy(()=>Se(()=>import("./CDNConfigAdvanced-BODfFbmZ.js"),__vite__mapDeps([81,18,28,42])).then(o=>({default:o.CDNConfigAdvanced}))),QO=x.lazy(()=>Se(()=>import("./SparkConfigAdvanced-D07GhtSK.js"),__vite__mapDeps([82,18,3,32,39])).then(o=>({default:o.SparkConfigAdvanced}))),GO=x.lazy(()=>Se(()=>import("./TensorFlowServingConfigAdvanced-CQnNlTp1.js"),__vite__mapDeps([83,2,18,3,32])).then(o=>({default:o.TensorFlowServingConfigAdvanced}))),KO=x.lazy(()=>Se(()=>import("./PyTorchServeConfigAdvanced-DNMyHXo0.js"),__vite__mapDeps([84,2,18,3,32])).then(o=>({default:o.PyTorchServeConfigAdvanced}))),VO=x.lazy(()=>Se(()=>import("./FeatureStoreConfigAdvanced-BtwXABLY.js"),__vite__mapDeps([85,18,71,3,42])).then(o=>({default:o.FeatureStoreConfigAdvanced}))),FO=x.lazy(()=>Se(()=>import("./MLflowConfigAdvanced-DiD8cPyW.js"),__vite__mapDeps([86,71,42])).then(o=>({default:o.MLflowConfigAdvanced}))),YO=x.lazy(()=>Se(()=>import("./CRMConfigAdvanced-D1FrgjRu.js"),__vite__mapDeps([87,18,4,88,42,89])).then(o=>({default:o.CRMConfigAdvanced}))),XO=x.lazy(()=>Se(()=>import("./ERPConfigAdvanced-CS6r3vGi.js"),__vite__mapDeps([90,18,71,88,42,89])).then(o=>({default:o.ERPConfigAdvanced}))),WO=x.lazy(()=>Se(()=>import("./RPABotConfigAdvanced-3UkbwSZt.js"),__vite__mapDeps([91,18,42,32,39])).then(o=>({default:o.RPABotConfigAdvanced}))),ZO=x.lazy(()=>Se(()=>import("./BPMNEngineConfigAdvanced-D6s5i0pn.js"),__vite__mapDeps([92,18,32,39,4])).then(o=>({default:o.BPMNEngineConfigAdvanced}))),JO=x.lazy(()=>Se(()=>import("./PaymentGatewayConfigAdvanced-CwXyCihW.js"),__vite__mapDeps([93,18,88,42,5,32,39])).then(o=>({default:o.PaymentGatewayConfigAdvanced}))),eL=()=>f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-muted-foreground",children:"Loading configuration..."})});function tL({componentId:o,componentType:e}){const t=()=>{switch(e){case"kafka":return f.jsx(G3,{componentId:o});case"rabbitmq":return f.jsx(K3,{componentId:o});case"postgres":return f.jsx(V3,{componentId:o});case"mongodb":return f.jsx(F3,{componentId:o});case"redis":return f.jsx(Y3,{componentId:o});case"elasticsearch":return f.jsx(X3,{componentId:o});case"cassandra":return f.jsx(W3,{componentId:o});case"clickhouse":return f.jsx(Z3,{componentId:o});case"snowflake":return f.jsx(J3,{componentId:o});case"s3-datalake":return f.jsx(eO,{componentId:o});case"nginx":return f.jsx(tO,{componentId:o});case"rest":return f.jsx(nO,{componentId:o});case"grpc":return f.jsx(sO,{componentId:o});case"websocket":return f.jsx(aO,{componentId:o});case"graphql":return f.jsx(oO,{componentId:o});case"soap":return f.jsx(rO,{componentId:o});case"webhook":return f.jsx(iO,{componentId:o});case"docker":case"kubernetes":return f.jsx(lO,{componentId:o});case"haproxy":return f.jsx(cO,{componentId:o});case"traefik":return f.jsx(uO,{componentId:o});case"envoy":return f.jsx(dO,{componentId:o});case"activemq":return f.jsx(fO,{componentId:o});case"aws-sqs":return f.jsx(hO,{componentId:o});case"azure-service-bus":return f.jsx(pO,{componentId:o});case"gcp-pubsub":return f.jsx(gO,{componentId:o});case"kong":return f.jsx(mO,{componentId:o});case"apigee":return f.jsx(yO,{componentId:o});case"mulesoft":return f.jsx(vO,{componentId:o});case"graphql-gateway":return f.jsx(bO,{componentId:o});case"bff-service":return f.jsx(xO,{componentId:o});case"webhook-relay":return f.jsx(wO,{componentId:o});case"prometheus":return f.jsx(CO,{componentId:o});case"grafana":return f.jsx(SO,{componentId:o});case"loki":return f.jsx(MO,{componentId:o});case"jaeger":return f.jsx(EO,{componentId:o});case"otel-collector":return f.jsx(RO,{componentId:o});case"pagerduty":return f.jsx(NO,{componentId:o});case"keycloak":return f.jsx(AO,{componentId:o});case"waf":return f.jsx(TO,{componentId:o});case"firewall":return f.jsx(DO,{componentId:o});case"secrets-vault":return f.jsx(kO,{componentId:o});case"ids-ips":return f.jsx(jO,{componentId:o});case"jenkins":return f.jsx(_O,{componentId:o});case"gitlab-ci":return f.jsx(zO,{componentId:o});case"argo-cd":return f.jsx(OO,{componentId:o});case"terraform":return f.jsx(PO,{componentId:o});case"ansible":return f.jsx(IO,{componentId:o});case"harbor":return f.jsx(LO,{componentId:o});case"istio":return f.jsx(qO,{componentId:o});case"service-mesh":return f.jsx(HO,{componentId:o});case"api-gateway":return f.jsx(UO,{componentId:o});case"vpn":return f.jsx(BO,{componentId:o});case"cdn":return f.jsx($O,{componentId:o});case"spark":return f.jsx(QO,{componentId:o});case"tensorflow-serving":return f.jsx(GO,{componentId:o});case"pytorch-serve":return f.jsx(KO,{componentId:o});case"feature-store":return f.jsx(VO,{componentId:o});case"mlflow":return f.jsx(FO,{componentId:o});case"crm":return f.jsx(YO,{componentId:o});case"erp":return f.jsx(XO,{componentId:o});case"rpa-bot":return f.jsx(WO,{componentId:o});case"bpmn-engine":return f.jsx(ZO,{componentId:o});case"payment-gateway":return f.jsx(JO,{componentId:o});default:return f.jsx("div",{className:"p-6 text-center text-muted-foreground",children:"Configuration panel not available for this component type"})}};return f.jsx(x.Suspense,{fallback:f.jsx(eL,{}),children:t()})}function nL(){const{undo:o,redo:e,zoom:t,setZoom:s,pan:r,setPan:l,resetCanvas:c,saveDiagram:d,selectedConnectionId:h,selectedNodeId:p,selectedGroupId:g,nodes:m,deleteConnection:v,deleteNode:w,deleteGroup:C,selectConnection:S,selectNode:R,selectGroup:E}=Re(),{canUndo:T,canRedo:N}=Mi(),{isRunning:A,start:j,stop:q}=kt(),{showMinimap:P,toggleMinimap:H,showHeatMapLegend:ee,toggleHeatMapLegend:se}=Oi();x.useEffect(()=>{const le=te=>{const ae=te.ctrlKey||te.metaKey;if(ae&&te.key==="z"&&!te.shiftKey&&T){te.preventDefault(),o();return}if(ae&&(te.key==="z"&&te.shiftKey||te.key==="y")&&N){te.preventDefault(),e();return}if(ae&&(te.key==="="||te.key==="+")){te.preventDefault(),s(Math.min(t+.1,2));return}if(ae&&te.key==="-"){te.preventDefault(),s(Math.max(t-.1,.5));return}if(ae&&te.key==="0"){te.preventDefault(),s(1),l({x:0,y:0});return}const ce=50;if(!ae){if(te.key==="ArrowLeft"){te.preventDefault(),l({x:r.x+ce,y:r.y});return}if(te.key==="ArrowRight"){te.preventDefault(),l({x:r.x-ce,y:r.y});return}if(te.key==="ArrowUp"){te.preventDefault(),l({x:r.x,y:r.y+ce});return}if(te.key==="ArrowDown"){te.preventDefault(),l({x:r.x,y:r.y-ce});return}}if(!ae&&te.key===" "){const ue=te.target;if(!ue){if(te.preventDefault(),A)q();else{const{nodes:Y,connections:he}=Re.getState();kt.getState().initialize(Y,he),j()}return}const z=ue.tagName;if(z==="INPUT"||z==="TEXTAREA"||z==="SELECT"||ue.isContentEditable||ue.closest('input, textarea, select, [contenteditable="true"]'))return;const L=ue.getAttribute("role");if(L==="textbox"||L==="combobox"||L==="searchbox"||L==="spinbutton"||ue.closest("[data-radix-select-trigger], [data-radix-select-content], [data-radix-select-viewport]"))return;if(te.preventDefault(),A)q();else{const{nodes:Y,connections:he}=Re.getState();kt.getState().initialize(Y,he),j()}return}if(ae&&(te.key==="s"||te.key==="")){te.preventDefault(),d();return}if(ae&&(te.key==="m"||te.key==="")){te.preventDefault(),H();return}if(ae&&(te.key==="h"||te.key==="")){te.preventDefault(),se();return}if((te.key==="Delete"||te.key==="Backspace")&&!ae){const ue=document.activeElement;if(ue){const D=ue.tagName;if(D==="INPUT"||D==="TEXTAREA"||D==="SELECT"||ue.isContentEditable)return;const L=ue.getAttribute("role");if(L==="textbox"||L==="combobox"||L==="searchbox"||L==="spinbutton")return;const Y=ue.closest("form")!==null,he=ue.closest('[role="textbox"], [role="combobox"], [contenteditable="true"]')!==null,_=ue.closest("[data-radix-select-trigger], [data-radix-select-content]")!==null,$=ue.closest('[role="dialog"]')!==null;if(Y||he||_||$)return}if(te.preventDefault(),h){v(h),S(null);return}if(g){C(g),E(null);return}const z=m.filter(D=>D.selected);if(z.length>0){z.forEach(D=>w(D.id)),R(null);return}if(p){w(p),R(null);return}}};return window.addEventListener("keydown",le),()=>{window.removeEventListener("keydown",le)}},[o,e,T,N,t,s,r,l,c,d,A,j,q,P,H,ee,se,h,p,g,m,v,w,C,S,R,E])}class mc extends x.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){ta("ErrorBoundary caught an error",e,{componentStack:t.componentStack}),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:f.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:f.jsxs(Tn,{className:"w-full max-w-2xl",children:[f.jsxs(Ws,{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ys,{className:"h-5 w-5 text-destructive"}),f.jsx(Zs,{children:"-   "})]}),f.jsx(gr,{children:"    "})]}),f.jsxs(Js,{className:"space-y-4",children:[this.state.error&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-sm font-semibold text-foreground",children:":"}),f.jsx("pre",{className:"text-xs bg-muted p-3 rounded-md overflow-auto max-h-48",children:this.state.error.toString()})]}),!1,f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(Te,{onClick:this.handleReset,variant:"default",children:[f.jsx(lA,{className:"h-4 w-4 mr-2"})," "]}),f.jsx(Te,{onClick:()=>window.location.reload(),variant:"outline",children:" "})]})]})]})}):this.props.children}}function sL(){nL();const{tabs:o}=pu(),e=o.find(t=>t.active);return f.jsx(mc,{children:f.jsx(g3,{children:f.jsx(u3,{children:f.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[f.jsx(ij,{}),f.jsx(r3,{}),f.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f.jsx(mc,{children:f.jsx(f5,{})}),f.jsx(mc,{children:e?.type==="diagram"?f.jsx(kv,{}):e?.type==="component"&&e.componentId&&e.componentType?f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(tL,{componentId:e.componentId,componentType:e.componentType})}):f.jsx(kv,{})}),f.jsx(mc,{children:f.jsx(o3,{})})]})]})})})})}cE.createRoot(document.getElementById("root")).render(f.jsxs(Et.StrictMode,{children:[f.jsx(WE,{position:"top-right"}),f.jsx(sL,{})]}));export{Q2 as $,ho as A,Qt as B,Tn as C,op as D,je as E,Y0 as F,aL as G,Mz as H,Tt as I,Rz as J,Bc as K,st as L,z2 as M,tA as N,H2 as O,Ac as P,cb as Q,W2 as R,vn as S,lp as T,wA as U,nt as V,ub as W,uo as X,J2 as Y,hb as Z,kt as _,au as a,jC as a0,fo as a1,ys as a2,vs as a3,Ee as a4,_h as a5,Dh as a6,oL as a7,ta as a8,Hh as a9,lA as aa,hs as b,yA as c,_a as d,Ws as e,Zs as f,rL as g,gr as h,Te as i,f as j,Js as k,Ri as l,Uh as m,Y5 as n,F1 as o,X5 as p,W1 as q,x as r,Si as s,co as t,Re as u,Xc as v,Wc as w,Jc as x,eu as y,Zc as z};

import{E as A,u as R,j as e,i as $,S as k,C as a,e as r,f as l,F as p,k as n,N as C,T as B,a as U,b as h,A as O,c as V,d as u,h as j,B as t,ai as F,a9 as G,L as c,t as b,I as H,n as K,o as z,p as J,q as _,s as g}from"./index-Dy7IKEk-.js";import{R as q}from"./refresh-ccw-DGCOD7Wa.js";import{C as D}from"./circle-check-big-CAguCn2G.js";import{C as W}from"./clock-BSsxvY-0.js";import{U as X}from"./users-1soqAZpq.js";const Q=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],v=A("workflow",Q);function re({componentId:E}){const{nodes:S,updateNode:Y}=R(),y=S.find(s=>s.id===E);if(!y)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const i=y.data.config||{},f=i.processDefinitions||[],o=i.processInstances||[],N=i.tasks||[],T=i.totalProcesses||f.length,I=i.activeInstances||o.filter(s=>s.status==="RUNNING").length,P=i.completedInstances||o.filter(s=>s.status==="COMPLETED").length,L=i.totalTasks||N.length,m=s=>{switch(s){case"RUNNING":case"ASSIGNED":return"bg-green-500";case"COMPLETED":return"bg-blue-500";case"SUSPENDED":return"bg-yellow-500";case"FAILED":case"CANCELLED":return"bg-red-500";case"CREATED":return"bg-gray-500";default:return"bg-gray-500"}},M=s=>{if(!s)return"0s";const d=Math.floor(s/3600),x=Math.floor(s%3600/60),w=s%60;return d>0?`${d}h ${x}m`:x>0?`${x}m ${w}s`:`${w}s`};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"BPMN Engine"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Process Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Business process modeling and execution engine"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs($,{variant:"outline",size:"sm",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(k,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(a,{className:"border-l-4 border-l-blue-500 bg-gradient-to-br from-blue-50 to-white dark:from-blue-950/20 dark:to-background",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Processes"}),e.jsx(p,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:T}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"definitions"})]})})]}),e.jsxs(a,{className:"border-l-4 border-l-green-500 bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Active Instances"}),e.jsx(C,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:I}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"running"})]})})]}),e.jsxs(a,{className:"border-l-4 border-l-purple-500 bg-gradient-to-br from-purple-50 to-white dark:from-purple-950/20 dark:to-background",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),e.jsx(D,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:P}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"instances"})]})})]}),e.jsxs(a,{className:"border-l-4 border-l-cyan-500 bg-gradient-to-br from-cyan-50 to-white dark:from-cyan-950/20 dark:to-background",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Tasks"}),e.jsx(v,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:L}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"total"})]})})]})]}),e.jsxs(B,{defaultValue:"processes",className:"space-y-4",children:[e.jsxs(U,{children:[e.jsxs(h,{value:"processes",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Processes (",f.length,")"]}),e.jsxs(h,{value:"instances",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Instances (",o.length,")"]}),e.jsxs(h,{value:"tasks",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Tasks (",N.length,")"]}),e.jsxs(h,{value:"settings",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(u,{value:"processes",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Process Definitions"}),e.jsx(j,{children:"Deployed business processes"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:f.map(s=>e.jsxs(a,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-gradient-to-r from-blue-50/50 to-transparent dark:from-blue-950/10",children:[e.jsx(r,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(p,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(l,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(t,{variant:"outline",className:"font-mono text-xs",children:s.key}),e.jsxs(t,{variant:"outline",children:["v",s.version]}),e.jsxs(t,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300",children:[s.activeInstances||0," active"]}),e.jsxs(t,{variant:"outline",children:[s.instances||0," total instances"]})]})]})]})})}),s.lastDeployed&&e.jsx(n,{children:e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last deployed: ",new Date(s.lastDeployed).toLocaleString()]})})]},s.id))})})]})}),e.jsx(u,{value:"instances",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Process Instances"}),e.jsx(j,{children:"Running and completed process instances"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:o.map(s=>e.jsxs(a,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-gradient-to-r from-green-50/50 to-transparent dark:from-green-950/10",children:[e.jsx(r,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${m(s.status)}/20`,children:s.status==="RUNNING"?e.jsx(C,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):s.status==="COMPLETED"?e.jsx(D,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}):s.status==="SUSPENDED"?e.jsx(F,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}):e.jsx(G,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx(l,{className:"text-lg font-semibold",children:s.id}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(t,{variant:"outline",className:m(s.status),children:s.status}),e.jsx(t,{variant:"outline",className:"font-mono text-xs",children:s.processDefinitionKey}),s.businessKey&&e.jsx(t,{variant:"outline",children:s.businessKey}),s.duration&&e.jsxs(t,{variant:"outline",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),M(s.duration)]})]})]})]})})}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Started: ",new Date(s.startTime).toLocaleString(),s.endTime&&` • Ended: ${new Date(s.endTime).toLocaleString()}`]}),s.variables&&Object.keys(s.variables).length>0&&e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Variables:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(s.variables).map(([d,x])=>e.jsxs(t,{variant:"outline",className:"text-xs",children:[d,": ",String(x)]},d))})]})]})]},s.id))})})]})}),e.jsx(u,{value:"tasks",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Tasks"}),e.jsx(j,{children:"User tasks and activities"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:N.map(s=>e.jsxs(a,{className:"border-l-4 border-l-purple-500 hover:shadow-md transition-shadow bg-gradient-to-r from-purple-50/50 to-transparent dark:from-purple-950/10",children:[e.jsx(r,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${m(s.status)}/20`,children:e.jsx(v,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx(l,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(t,{variant:"outline",className:m(s.status),children:s.status}),s.assignee&&e.jsxs(t,{variant:"outline",children:[e.jsx(X,{className:"h-3 w-3 mr-1"}),s.assignee]}),s.priority&&e.jsxs(t,{variant:"outline",children:["Priority: ",s.priority]})]})]})]})})}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(s.createdTime).toLocaleString(),s.dueDate&&` • Due: ${new Date(s.dueDate).toLocaleString()}`]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Process Instance: ",s.processInstanceId]})]})]},s.id))})})]})}),e.jsx(u,{value:"settings",className:"space-y-4",children:e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"BPMN Engine Settings"}),e.jsx(j,{children:"Engine configuration"})]}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable Job Execution"}),e.jsx(b,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable Metrics"}),e.jsx(b,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable History"}),e.jsx(b,{defaultChecked:!0})]}),e.jsx(k,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Job Execution Thread Pool Size"}),e.jsx(H,{type:"number",defaultValue:10,min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"History Level"}),e.jsxs(K,{defaultValue:"full",children:[e.jsx(z,{children:e.jsx(J,{})}),e.jsxs(_,{children:[e.jsx(g,{value:"none",children:"None"}),e.jsx(g,{value:"activity",children:"Activity"}),e.jsx(g,{value:"audit",children:"Audit"}),e.jsx(g,{value:"full",children:"Full"})]})]})]})]})]})})]})]})})}export{re as BPMNEngineConfigAdvanced};

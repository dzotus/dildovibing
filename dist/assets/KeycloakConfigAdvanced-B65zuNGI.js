import{J as hs,u as xs,r as S,j as e,B as N,S as M,C as o,h as u,i as v,m as f,T as se,b as ae,c as x,a3 as le,d as we,f as p,k as b,L as t,I as c,x as m,a4 as Se,l as d,P,ae as te,ao as ke,D as F,aZ as O,ah as Q,y as z,z as V,E as q,G as $,q as ie,s as re,t as ne,v as ce,w as E,a5 as Ae,ad as ps,o as L,e as Ee}from"./index-Car91T5O.js";import{T as de}from"./textarea-Cgvn3GTT.js";import{u as js}from"./use-toast-D6cYPe9X.js";import{S as oe}from"./shield-COME9V66.js";import{G as us}from"./globe-DkMnv8r8.js";import{K as me}from"./key-CoRPiE9i.js";import{U as he}from"./users-3mFbe7Lm.js";import{C as vs}from"./clock-BOdoVIm8.js";import{L as gs}from"./lock-jaLmC86B.js";import{M as Ns}from"./mail-BmZQAihR.js";import{E as Pe}from"./eye-off-P80O8xK5.js";const fs=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],bs=hs("fingerprint",fs);function Ds({componentId:G}){const{nodes:Le,connections:Re,updateNode:Ie}=xs(),k=Le.find(s=>s.id===G),[De,W]=S.useState(null),[Me,X]=S.useState(null),[_,Ue]=S.useState(""),[R,Te]=S.useState("");if(!k)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const i=k.data.config||{},xe=i.realm||"archiphoenix",Fe=i.adminUrl||"http://keycloak:8080",pe=i.enabled??!0,je=Re.some(s=>s.source===G||s.target===G),Z=pe&&je,ue=i.enableSSL??!1,Oe=i.sslRequired||"external",ze=i.accessTokenLifespan||300,Ve=i.ssoSessionIdle||1800,qe=i.ssoSessionMax||36e3,$e=i.refreshTokenLifespan||1800,Ge=i.enableOAuth2??!0,_e=i.enableSAML??!1,Ke=i.enableLDAP??!1,He=i.passwordPolicy||"length(8)",y=i.clients||[{id:"archiphoenix-app",name:"ArchiPhoenix App",clientId:"archiphoenix-app",type:"public",enabled:!0,protocol:"openid-connect",redirectUris:["http://localhost:3000/*"],webOrigins:["http://localhost:3000"],grantTypes:["authorization_code","refresh_token"],standardFlowEnabled:!0,directAccessGrantsEnabled:!1},{id:"admin-cli",name:"Admin CLI",clientId:"admin-cli",type:"public",enabled:!0,protocol:"openid-connect",grantTypes:["client_credentials"],serviceAccountsEnabled:!0}],h=i.users||[{id:"1",username:"admin",email:"admin@archiphoenix.com",firstName:"Admin",lastName:"User",enabled:!0,emailVerified:!0,roles:["admin","user"],groups:[],attributes:{}},{id:"2",username:"user1",email:"user1@archiphoenix.com",firstName:"John",lastName:"Doe",enabled:!0,emailVerified:!1,roles:["user"],groups:[],attributes:{}}],Be=i.authenticationFlows||[{id:"browser",alias:"browser",description:"Browser based authentication",providerId:"basic-flow",topLevel:!0,builtIn:!0,executions:[{id:"cookie",requirement:"ALTERNATIVE",displayName:"Cookie",configurable:!1,providerId:"auth-cookie"},{id:"identity-provider-redirector",requirement:"ALTERNATIVE",displayName:"Identity Provider Redirector",configurable:!0,providerId:"identity-provider-redirector"},{id:"forms",requirement:"ALTERNATIVE",displayName:"Forms",configurable:!1,providerId:"auth-username-password-form"}]},{id:"direct-grant",alias:"direct grant",description:"Direct grant authentication",providerId:"basic-flow",topLevel:!0,builtIn:!0,executions:[{id:"username-password",requirement:"REQUIRED",displayName:"Username Password Form",configurable:!1,providerId:"direct-grant-validate-username-password"}]}],U=i.identityProviders||[],T=i.clientScopes||[{id:"profile",name:"profile",protocol:"openid-connect",description:"OpenID Connect built-in scope: profile"},{id:"email",name:"email",protocol:"openid-connect",description:"OpenID Connect built-in scope: email"},{id:"roles",name:"roles",protocol:"openid-connect",description:"OpenID Connect scope for add user roles to the access token"}],K=i.realmRoles||["admin","user","viewer"],ve=i.groups||[],{toast:w}=js(),[Je,ge]=S.useState(0),[H,Qe]=S.useState({}),[I,Ne]=S.useState({}),[B,fe]=S.useState({}),[J,We]=S.useState({});S.useEffect(()=>{const s=()=>{try{const a=Ee.getKeycloakEmulationEngine(k.id);if(a){const r=a.getMetrics();if(r&&typeof r.activeSessions=="number"){ge(r.activeSessions);return}}}catch{}ge(h.filter(a=>a.enabled).length*2)};s();const l=setInterval(s,2e3);return()=>clearInterval(l)},[k.id,h]);const n=s=>{const l={...i,...s};Ie(G,{data:{...k.data,config:l}});try{const a=Ee.getKeycloakEmulationEngine(k.id);a&&a.initializeConfig({...k,data:{...k.data,config:l}})}catch{}},Xe=()=>{const s={id:`client-${Date.now()}`,name:"New Client",clientId:`new-client-${Date.now()}`,type:"public",enabled:!0,protocol:"openid-connect",redirectUris:[],webOrigins:[],grantTypes:["authorization_code"],standardFlowEnabled:!0,directAccessGrantsEnabled:!1,serviceAccountsEnabled:!1,authorizationServicesEnabled:!1,consentRequired:!1,protocolMappers:[],defaultClientScopes:["profile","email"],optionalClientScopes:[],roles:[]};n({clients:[...y,s]}),W(y.length)},g=(s,l)=>{const a=[...y];a[s]={...a[s],...l},n({clients:a})},Ze=s=>{n({clients:y.filter((l,a)=>a!==s)}),De===s&&W(null)},Ye=()=>{const s={id:String(Date.now()),username:`user${h.length+1}`,email:`user${h.length+1}@example.com`,enabled:!0,emailVerified:!1,roles:["user"],groups:[],attributes:{},credentials:[],federatedIdentity:[]};n({users:[...h,s]}),X(h.length)},C=(s,l)=>{const a=[...h];a[s]={...a[s],...l},n({users:a})},es=s=>{n({users:h.filter((l,a)=>a!==s)}),Me===s&&X(null)},ss=s=>{const l={id:`mapper-${Date.now()}`,name:"New Mapper",protocol:y[s].protocol,protocolMapper:"oidc-usermodel-property-mapper",config:{}},a=[...y[s].protocolMappers||[],l];g(s,{protocolMappers:a}),w({title:"Protocol Mapper Added",description:"New protocol mapper has been added to the client"})},as=(s,l)=>{const a=(y[s].protocolMappers||[]).filter((r,j)=>j!==l);g(s,{protocolMappers:a}),w({title:"Protocol Mapper Removed",description:"Protocol mapper has been removed from the client"})},ls=s=>{const l=`attribute-${Date.now()}`,a={...h[s].attributes||{},[l]:[""]};C(s,{attributes:a}),w({title:"Attribute Added",description:"New attribute has been added to the user"})},ts=(s,l)=>{const a={...h[s].attributes||{}};delete a[l],C(s,{attributes:a}),w({title:"Attribute Removed",description:"Attribute has been removed from the user"})},be=(s,l,a,r)=>{const j={...h[s].attributes||{}};l!==a&&delete j[l],j[a]=r,C(s,{attributes:j})},is=(s,l,a)=>{const r={type:"password",value:l,temporary:a},j=[...h[s].credentials||[],r];C(s,{credentials:j}),Ne({...I,[s]:""}),fe({...B,[s]:!1}),w({title:"Password Set",description:a?"Temporary password has been set":"Password has been set"})},rs=(s,l)=>{const a=(h[s].credentials||[]).filter((r,j)=>j!==l);C(s,{credentials:a}),w({title:"Credential Removed",description:"Credential has been removed from the user"})},D=s=>{const l={id:`idp-${Date.now()}`,alias:s,providerId:s,enabled:!0,displayName:s.charAt(0).toUpperCase()+s.slice(1),config:{}};n({identityProviders:[...U,l]}),w({title:"Identity Provider Added",description:`${l.displayName} identity provider has been added`})},Y=(s,l)=>{const a=[...U];a[s]={...a[s],...l},n({identityProviders:a})},ns=s=>{n({identityProviders:U.filter((l,a)=>a!==s)}),w({title:"Identity Provider Removed",description:"Identity provider has been removed"})},cs=()=>{const s={id:`scope-${Date.now()}`,name:`new-scope-${Date.now()}`,protocol:"openid-connect",description:"Custom client scope",attributes:{},protocolMappers:[]};n({clientScopes:[...T,s]}),w({title:"Client Scope Created",description:"New client scope has been created"})},ds=()=>{const s=`role-${Date.now()}`;n({realmRoles:[...K,s]}),w({title:"Role Created",description:"New realm role has been created"})},os=s=>{n({realmRoles:K.filter(a=>a!==s)});const l=h.map(a=>({...a,roles:a.roles.filter(r=>r!==s)}));n({users:l}),w({title:"Role Removed",description:"Realm role has been removed"})},ms=s=>{navigator.clipboard.writeText(s),w({title:"Copied",description:"Client secret has been copied to clipboard"})},ye=y.filter(s=>s.name.toLowerCase().includes(_.toLowerCase())||s.clientId.toLowerCase().includes(_.toLowerCase())),Ce=h.filter(s=>s.username.toLowerCase().includes(R.toLowerCase())||s.email.toLowerCase().includes(R.toLowerCase())||s.firstName&&s.firstName.toLowerCase().includes(R.toLowerCase())||s.lastName&&s.lastName.toLowerCase().includes(R.toLowerCase()));return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(oe,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Keycloak"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Identity and Access Management - ",xe]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(N,{variant:Z?"default":"secondary",className:"gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${Z?"bg-green-500 animate-pulse":"bg-gray-500"}`}),Z?"Active":je?"Connected":"Standalone"]})})]}),e.jsx(M,{}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(o,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Clients"})}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y.length}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[y.filter(s=>s.enabled).length," enabled"]})]})]}),e.jsxs(o,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Users"})}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.length}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h.filter(s=>s.enabled).length," active"]})]})]}),e.jsxs(o,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Sessions"})}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Je}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active sessions"})]})]})]}),e.jsxs(se,{defaultValue:"realm",className:"w-full",children:[e.jsxs(ae,{className:"grid w-full grid-cols-9",children:[e.jsxs(x,{value:"realm",className:"gap-2",children:[e.jsx(us,{className:"h-4 w-4"}),"Realm"]}),e.jsxs(x,{value:"clients",className:"gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),"Clients"]}),e.jsxs(x,{value:"users",className:"gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Users"]}),e.jsxs(x,{value:"authentication",className:"gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Auth Flows"]}),e.jsxs(x,{value:"identity-providers",className:"gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),"IdP"]}),e.jsxs(x,{value:"client-scopes",className:"gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"Scopes"]}),e.jsxs(x,{value:"roles",className:"gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Roles"]}),e.jsxs(x,{value:"sessions",className:"gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Sessions"]}),e.jsxs(x,{value:"security",className:"gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),"Security"]})]}),e.jsxs(p,{value:"realm",className:"space-y-4 mt-4",children:[e.jsxs(o,{children:[e.jsxs(u,{children:[e.jsx(v,{children:"Realm Settings"}),e.jsx(b,{children:"Keycloak realm configuration and settings"})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"realm",children:"Realm Name *"}),e.jsx(c,{id:"realm",value:xe,onChange:s=>n({realm:s.target.value}),placeholder:"my-realm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"admin-url",children:"Admin URL"}),e.jsx(c,{id:"admin-url",value:Fe,onChange:s=>n({adminUrl:s.target.value}),placeholder:"http://keycloak:8080"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"display-name",children:"Display Name"}),e.jsx(c,{id:"display-name",value:i.displayName||"",onChange:s=>n({displayName:s.target.value}),placeholder:"My Realm"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"Realm Enabled"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable or disable this realm"})]}),e.jsx(m,{checked:pe,onCheckedChange:s=>n({enabled:s})})]})]})]})]}),e.jsxs(o,{children:[e.jsxs(u,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-5 w-5"}),"Email"]}),e.jsx(b,{children:"Configure SMTP server for sending emails"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"smtp-host",children:"SMTP Host"}),e.jsx(c,{id:"smtp-host",value:i.email?.host||"",onChange:s=>n({email:{...i.email,host:s.target.value}}),placeholder:"smtp.example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"smtp-port",children:"SMTP Port"}),e.jsx(c,{id:"smtp-port",type:"number",value:i.email?.port||587,onChange:s=>n({email:{...i.email,port:parseInt(s.target.value)||587}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"smtp-from",children:"From"}),e.jsx(c,{id:"smtp-from",value:i.email?.from||"",onChange:s=>n({email:{...i.email,from:s.target.value}}),placeholder:"noreply@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"smtp-from-display",children:"From Display Name"}),e.jsx(c,{id:"smtp-from-display",value:i.email?.fromDisplayName||"",onChange:s=>n({email:{...i.email,fromDisplayName:s.target.value}}),placeholder:"Keycloak"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{checked:i.email?.enableSsl??!1,onCheckedChange:s=>n({email:{...i.email,enableSsl:s}})}),e.jsx(t,{children:"Enable SSL"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{checked:i.email?.enableStartTls??!1,onCheckedChange:s=>n({email:{...i.email,enableStartTls:s}})}),e.jsx(t,{children:"Enable StartTLS"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{checked:i.email?.enableAuthentication??!1,onCheckedChange:s=>n({email:{...i.email,enableAuthentication:s}})}),e.jsx(t,{children:"Enable Authentication"})]})]}),i.email?.enableAuthentication&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"smtp-user",children:"Username"}),e.jsx(c,{id:"smtp-user",value:i.email?.user||"",onChange:s=>n({email:{...i.email,user:s.target.value}}),placeholder:"smtp-username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"smtp-password",children:"Password"}),e.jsx(c,{id:"smtp-password",type:"password",value:i.email?.password||"",onChange:s=>n({email:{...i.email,password:s.target.value}}),placeholder:"smtp-password"})]})]})]})]})]}),e.jsx(p,{value:"clients",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Clients"}),e.jsx(b,{children:"OAuth2 and OpenID Connect clients"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(c,{placeholder:"Search clients...",value:_,onChange:s=>Ue(s.target.value),className:"pl-8 w-64"})]}),e.jsxs(d,{size:"sm",onClick:Xe,variant:"outline",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Create Client"]})]})]})}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-3",children:[ye.map((s,l)=>e.jsx(o,{className:"border-border hover:border-primary/50 transition-colors",children:e.jsx(u,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"p-2 rounded bg-primary/10",children:e.jsx(me,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"text-lg",children:s.name}),s.description&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["- ",s.description]})]}),e.jsxs(b,{className:"text-xs mt-1 flex items-center gap-2",children:[e.jsxs("span",{children:["Client ID: ",s.clientId]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.type}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.protocol}),s.redirectUris&&s.redirectUris.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.redirectUris.length," redirect URI",s.redirectUris.length!==1?"s":""]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.enabled?e.jsxs(N,{variant:"default",className:"gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),"Enabled"]}):e.jsxs(N,{variant:"secondary",className:"gap-1",children:[e.jsx(ke,{className:"h-3 w-3"}),"Disabled"]}),e.jsxs(F,{children:[e.jsx(O,{asChild:!0,children:e.jsx(d,{size:"icon",variant:"ghost",onClick:()=>W(l),children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(z,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(V,{children:[e.jsxs(q,{children:["Edit Client: ",s.name]}),e.jsx($,{children:"Configure client settings, credentials, and protocol mappers"})]}),e.jsx("div",{className:"space-y-6 mt-4",children:e.jsxs(se,{defaultValue:"settings",children:[e.jsxs(ae,{children:[e.jsx(x,{value:"settings",children:"Settings"}),e.jsx(x,{value:"credentials",children:"Credentials"}),e.jsx(x,{value:"protocol-mappers",children:"Protocol Mappers"}),e.jsx(x,{value:"scopes",children:"Scopes"})]}),e.jsxs(p,{value:"settings",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"client-name",children:"Client Name *"}),e.jsx(c,{id:"client-name",value:s.name,onChange:a=>g(l,{name:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"client-id",children:"Client ID *"}),e.jsx(c,{id:"client-id",value:s.clientId,onChange:a=>g(l,{clientId:a.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"client-description",children:"Description"}),e.jsx(de,{id:"client-description",value:s.description||"",onChange:a=>g(l,{description:a.target.value}),rows:2})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"Enabled"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable or disable this client"})]}),e.jsx(m,{checked:s.enabled,onCheckedChange:a=>g(l,{enabled:a})})]}),e.jsx(M,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Client Protocol"}),e.jsxs(ie,{value:s.protocol,onValueChange:a=>g(l,{protocol:a}),children:[e.jsx(re,{children:e.jsx(ne,{})}),e.jsxs(ce,{children:[e.jsx(E,{value:"openid-connect",children:"OpenID Connect"}),e.jsx(E,{value:"saml",children:"SAML 2.0"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Access Type"}),e.jsxs(ie,{value:s.type,onValueChange:a=>g(l,{type:a}),children:[e.jsx(re,{children:e.jsx(ne,{})}),e.jsxs(ce,{children:[e.jsx(E,{value:"public",children:"Public"}),e.jsx(E,{value:"confidential",children:"Confidential"}),e.jsx(E,{value:"bearer-only",children:"Bearer-only"})]})]})]}),e.jsx(M,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(t,{children:"Capability Config"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{className:"text-sm font-normal",children:"Standard Flow Enabled"}),e.jsx(m,{checked:s.standardFlowEnabled??!0,onCheckedChange:a=>g(l,{standardFlowEnabled:a})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{className:"text-sm font-normal",children:"Direct Access Grants Enabled"}),e.jsx(m,{checked:s.directAccessGrantsEnabled??!1,onCheckedChange:a=>g(l,{directAccessGrantsEnabled:a})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{className:"text-sm font-normal",children:"Service Accounts Enabled"}),e.jsx(m,{checked:s.serviceAccountsEnabled??!1,onCheckedChange:a=>g(l,{serviceAccountsEnabled:a})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{className:"text-sm font-normal",children:"Authorization Services Enabled"}),e.jsx(m,{checked:s.authorizationServicesEnabled??!1,onCheckedChange:a=>g(l,{authorizationServicesEnabled:a})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{className:"text-sm font-normal",children:"Consent Required"}),e.jsx(m,{checked:s.consentRequired??!1,onCheckedChange:a=>g(l,{consentRequired:a})})]})]})]}),e.jsx(M,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"redirect-uris",children:"Valid Redirect URIs"}),e.jsx(de,{id:"redirect-uris",value:s.redirectUris?.join(`
`)||"",onChange:a=>g(l,{redirectUris:a.target.value.split(`
`).filter(r=>r.trim())}),placeholder:`http://localhost:3000/*
https://example.com/callback`,rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"One URI per line. Use * for wildcards"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"web-origins",children:"Web Origins"}),e.jsx(de,{id:"web-origins",value:s.webOrigins?.join(`
`)||"",onChange:a=>g(l,{webOrigins:a.target.value.split(`
`).filter(r=>r.trim())}),placeholder:`http://localhost:3000
https://example.com`,rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allowed CORS origins. Use + for all origins, * for all redirect URIs"})]})]}),e.jsxs(p,{value:"credentials",className:"space-y-4 mt-4",children:[s.type==="confidential"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"client-secret",children:"Client Secret"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{id:"client-secret",type:J[`client-${l}`]?"text":"password",value:s.clientSecret||"",onChange:a=>g(l,{clientSecret:a.target.value}),placeholder:"Enter client secret"}),e.jsx(d,{variant:"outline",size:"icon",onClick:()=>We({...J,[`client-${l}`]:!J[`client-${l}`]}),children:J[`client-${l}`]?e.jsx(Pe,{className:"h-4 w-4"}):e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx(d,{variant:"outline",size:"icon",onClick:()=>{s.clientSecret&&ms(s.clientSecret)},children:e.jsx(ps,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Keep this secret secure. It's used to authenticate the client."})]}),s.type==="public"&&e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Public clients don't require a client secret. They are typically used for browser-based applications."})})]}),e.jsxs(p,{value:"protocol-mappers",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Protocol mappers allow you to add claims to tokens or transform user data"}),e.jsxs(d,{size:"sm",variant:"outline",onClick:()=>ss(l),children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add Mapper"]})]}),s.protocolMappers&&s.protocolMappers.length>0?e.jsx("div",{className:"space-y-2",children:s.protocolMappers.map((a,r)=>e.jsx(o,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.protocolMapper})]}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>as(l,r),children:e.jsx(L,{className:"h-4 w-4"})})]})},r))}):e.jsx("div",{className:"p-4 text-center text-muted-foreground border border-dashed rounded-lg",children:"No protocol mappers configured"})]}),e.jsx(p,{value:"scopes",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Default Client Scopes"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"These scopes are always included in tokens"}),e.jsxs("div",{className:"space-y-2",children:[T.filter(a=>s.defaultClientScopes?.includes(a.id)).map(a=>e.jsx(N,{variant:"default",children:a.name},a.id)),(!s.defaultClientScopes||s.defaultClientScopes.length===0)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No default scopes"})]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Optional Client Scopes"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"These scopes can be requested by the client"}),e.jsxs("div",{className:"space-y-2",children:[T.filter(a=>s.optionalClientScopes?.includes(a.id)).map(a=>e.jsx(N,{variant:"outline",children:a.name},a.id)),(!s.optionalClientScopes||s.optionalClientScopes.length===0)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No optional scopes"})]})]})]})})]})})]})]}),y.length>1&&e.jsx(d,{size:"icon",variant:"ghost",onClick:()=>Ze(l),children:e.jsx(L,{className:"h-4 w-4"})})]})]})})},l)),ye.length===0&&e.jsx("div",{className:"p-8 text-center text-muted-foreground border border-dashed rounded-lg",children:_?"No clients found matching your search":"No clients configured"})]})})]})}),e.jsx(p,{value:"users",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Users"}),e.jsx(b,{children:"User accounts and role mappings"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(c,{placeholder:"Search users...",value:R,onChange:s=>Te(s.target.value),className:"pl-8 w-64"})]}),e.jsxs(d,{size:"sm",onClick:Ye,variant:"outline",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]})}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-3",children:[Ce.map((s,l)=>e.jsx(o,{className:"border-border hover:border-primary/50 transition-colors",children:e.jsx(u,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"p-2 rounded-full bg-secondary",children:e.jsx(he,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"text-lg",children:s.firstName&&s.lastName?`${s.firstName} ${s.lastName}`:s.username}),s.emailVerified&&e.jsxs(N,{variant:"outline",className:"text-xs",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),"Verified"]})]}),e.jsxs(b,{className:"text-xs mt-1",children:[s.email,s.firstName||s.lastName&&e.jsxs("span",{className:"ml-2",children:["(",s.username,")"]})]}),e.jsx("div",{className:"flex gap-1 mt-2",children:s.roles.map((a,r)=>e.jsx(N,{variant:"outline",className:"text-xs",children:a},r))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.enabled?e.jsxs(N,{variant:"default",className:"gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),"Active"]}):e.jsxs(N,{variant:"secondary",className:"gap-1",children:[e.jsx(ke,{className:"h-3 w-3"}),"Disabled"]}),e.jsxs(F,{children:[e.jsx(O,{asChild:!0,children:e.jsx(d,{size:"icon",variant:"ghost",onClick:()=>X(l),children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(z,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(V,{children:[e.jsxs(q,{children:["Edit User: ",s.username]}),e.jsx($,{children:"Configure user details, credentials, roles, and attributes"})]}),e.jsx("div",{className:"space-y-6 mt-4",children:e.jsxs(se,{defaultValue:"details",children:[e.jsxs(ae,{children:[e.jsx(x,{value:"details",children:"Details"}),e.jsx(x,{value:"credentials",children:"Credentials"}),e.jsx(x,{value:"role-mappings",children:"Role Mappings"}),e.jsx(x,{value:"groups",children:"Groups"}),e.jsx(x,{value:"attributes",children:"Attributes"})]}),e.jsxs(p,{value:"details",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"username",children:"Username *"}),e.jsx(c,{id:"username",value:s.username,onChange:a=>C(l,{username:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"email",children:"Email *"}),e.jsx(c,{id:"email",type:"email",value:s.email,onChange:a=>C(l,{email:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"first-name",children:"First Name"}),e.jsx(c,{id:"first-name",value:s.firstName||"",onChange:a=>C(l,{firstName:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"last-name",children:"Last Name"}),e.jsx(c,{id:"last-name",value:s.lastName||"",onChange:a=>C(l,{lastName:a.target.value})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{checked:s.enabled??!0,onCheckedChange:a=>C(l,{enabled:a})}),e.jsx(t,{children:"Enabled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{checked:s.emailVerified??!1,onCheckedChange:a=>C(l,{emailVerified:a})}),e.jsx(t,{children:"Email Verified"})]})]})]}),e.jsx(p,{value:"credentials",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{id:"password",type:H[l]?"text":"password",placeholder:"Set new password",value:I[l]||"",onChange:a=>Ne({...I,[l]:a.target.value})}),e.jsx(d,{variant:"outline",onClick:()=>Qe({...H,[l]:!H[l]}),children:H[l]?e.jsx(Pe,{className:"h-4 w-4"}):e.jsx(Ae,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"temporary-password",className:"rounded",checked:B[l]||!1,onChange:a=>fe({...B,[l]:a.target.checked})}),e.jsx(t,{htmlFor:"temporary-password",className:"text-sm font-normal",children:"Temporary password (user must change on first login)"})]}),(I[l]||"").length>0&&e.jsx(d,{size:"sm",onClick:()=>{I[l]&&is(l,I[l],B[l]||!1)},children:"Set Password"})]}),s.credentials&&s.credentials.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Existing Credentials"}),s.credentials.map((a,r)=>e.jsx(o,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.type}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.temporary?"Temporary":"Permanent"})]}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>rs(l,r),children:e.jsx(L,{className:"h-4 w-4"})})]})},r))]})]})}),e.jsx(p,{value:"role-mappings",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Realm Roles"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Assign realm-level roles to this user"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:K.map(a=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:a}),e.jsx(m,{checked:s.roles.includes(a),onCheckedChange:r=>{const j=r?[...s.roles,a]:s.roles.filter(A=>A!==a);C(l,{roles:j})}})]},a))})]}),y.length>0&&e.jsxs("div",{children:[e.jsx(t,{children:"Client Roles"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Assign client-specific roles"}),y.map(a=>e.jsxs(o,{className:"p-3 mb-2",children:[e.jsx("div",{className:"font-medium text-sm mb-2",children:a.name}),a.roles&&a.roles.length>0?e.jsx("div",{className:"space-y-1",children:a.roles.map(r=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:r}),e.jsx(m,{checked:!1,onCheckedChange:()=>{}})]},r))}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No client roles defined"})]},a.id))]})]})}),e.jsx(p,{value:"groups",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Groups"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Assign user to groups"}),ve.length>0?e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:ve.map(a=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:a.path}),e.jsx(m,{checked:s.groups?.includes(a.id)??!1,onCheckedChange:r=>{const j=r?[...s.groups||[],a.id]:(s.groups||[]).filter(A=>A!==a.id);C(l,{groups:j})}})]},a.id))}):e.jsx("div",{className:"p-4 text-center text-muted-foreground border border-dashed rounded-lg",children:"No groups configured"})]})}),e.jsx(p,{value:"attributes",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"User Attributes"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Custom attributes for this user"}),s.attributes&&Object.keys(s.attributes).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(s.attributes).map(([a,r])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{value:a,placeholder:"Attribute key",className:"flex-1",onChange:j=>{const A=j.target.value;A!==a&&be(l,a,A,Array.isArray(r)?r:[String(r)])}}),e.jsx(c,{value:Array.isArray(r)?r.join(", "):String(r),placeholder:"Attribute value(s)",className:"flex-1",onChange:j=>{const A=j.target.value.split(",").map(ee=>ee.trim()).filter(ee=>ee);be(l,a,a,A)}}),e.jsx(d,{size:"icon",variant:"ghost",onClick:()=>ts(l,a),children:e.jsx(L,{className:"h-4 w-4"})})]},a))}):e.jsx("div",{className:"p-4 text-center text-muted-foreground border border-dashed rounded-lg",children:"No attributes configured"}),e.jsxs(d,{size:"sm",variant:"outline",onClick:()=>ls(l),children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add Attribute"]})]})})]})})]})]}),h.length>1&&e.jsx(d,{size:"icon",variant:"ghost",onClick:()=>es(l),children:e.jsx(L,{className:"h-4 w-4"})})]})]})})},l)),Ce.length===0&&e.jsx("div",{className:"p-8 text-center text-muted-foreground border border-dashed rounded-lg",children:R?"No users found matching your search":"No users configured"})]})})]})}),e.jsx(p,{value:"authentication",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsxs(u,{children:[e.jsx(v,{children:"Authentication Flows"}),e.jsx(b,{children:"Configure authentication flows and execution steps"})]}),e.jsx(f,{className:"space-y-4",children:Be.map((s,l)=>e.jsxs(o,{className:"border-border",children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-lg",children:s.alias}),s.description&&e.jsx(b,{className:"mt-1",children:s.description})]}),e.jsx(N,{variant:s.builtIn?"default":"outline",children:s.builtIn?"Built-in":"Custom"})]})}),s.executions&&s.executions.length>0&&e.jsx(f,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Execution Steps"}),s.executions.map((a,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{variant:"outline",children:a.requirement}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.displayName}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.providerId})]})]}),a.configurable&&e.jsx(d,{size:"sm",variant:"ghost",children:e.jsx(we,{className:"h-4 w-4"})})]},a.id))]})})]},s.id))})]})}),e.jsx(p,{value:"identity-providers",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Identity Providers"}),e.jsx(b,{children:"Configure social logins, SAML, LDAP, and other identity providers"})]}),e.jsxs(F,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(d,{size:"sm",variant:"outline",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add Provider"]})}),e.jsxs(z,{children:[e.jsxs(V,{children:[e.jsx(q,{children:"Add Identity Provider"}),e.jsx($,{children:"Select the type of identity provider to add"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsx(d,{variant:"outline",onClick:()=>{D("google")},children:"Google"}),e.jsx(d,{variant:"outline",onClick:()=>{D("github")},children:"GitHub"}),e.jsx(d,{variant:"outline",onClick:()=>{D("facebook")},children:"Facebook"}),e.jsx(d,{variant:"outline",onClick:()=>{D("saml")},children:"SAML 2.0"}),e.jsx(d,{variant:"outline",onClick:()=>{D("oidc")},children:"OpenID Connect"}),e.jsx(d,{variant:"outline",onClick:()=>{D("ldap")},children:"LDAP"})]})]})]})]})}),e.jsx(f,{children:U.length>0?e.jsx("div",{className:"space-y-3",children:U.map((s,l)=>e.jsx(o,{className:"border-border",children:e.jsx(u,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded bg-primary/10",children:e.jsx(le,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx(v,{className:"text-lg",children:s.displayName||s.alias}),e.jsxs(b,{className:"text-xs mt-1",children:[s.providerId," • ",s.enabled?"Enabled":"Disabled"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:s.enabled?"default":"secondary",children:s.enabled?"Active":"Inactive"}),e.jsxs(F,{children:[e.jsx(O,{asChild:!0,children:e.jsx(d,{size:"icon",variant:"ghost",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(z,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(V,{children:[e.jsxs(q,{children:["Edit Identity Provider: ",s.displayName||s.alias]}),e.jsx($,{children:"Configure identity provider settings"})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Display Name"}),e.jsx(c,{value:s.displayName||"",onChange:a=>Y(l,{displayName:a.target.value})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{children:"Enabled"}),e.jsx(m,{checked:s.enabled,onCheckedChange:a=>Y(l,{enabled:a})})]}),s.providerId==="ldap"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"LDAP Server URL"}),e.jsx(c,{placeholder:"ldap://ldap.example.com:389",value:s.config?.ldapUrl||"",onChange:a=>Y(l,{config:{...s.config,ldapUrl:a.target.value}})})]})]})]})]}),e.jsx(d,{size:"icon",variant:"ghost",onClick:()=>ns(l),children:e.jsx(L,{className:"h-4 w-4"})})]})]})})},s.id))}):e.jsxs("div",{className:"p-8 text-center text-muted-foreground border border-dashed rounded-lg",children:[e.jsx(le,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No identity providers configured"}),e.jsx("p",{className:"text-xs mt-1",children:"Add providers for Google, GitHub, SAML, LDAP, etc."})]})})]})}),e.jsx(p,{value:"client-scopes",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Client Scopes"}),e.jsx(b,{children:"Configure default and optional client scopes"})]}),e.jsxs(d,{size:"sm",variant:"outline",onClick:cs,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Create Scope"]})]})}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-base font-semibold",children:"Default Client Scopes"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"These scopes are always included in tokens"}),e.jsx("div",{className:"space-y-2",children:T.filter(s=>s.id==="profile"||s.id==="email").map(s=>e.jsx(o,{className:"p-3 border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.description})]}),e.jsx(N,{variant:"default",children:"Default"})]})},s.id))})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-base font-semibold",children:"Optional Client Scopes"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"These scopes can be requested by clients"}),e.jsx("div",{className:"space-y-2",children:T.filter(s=>s.id!=="profile"&&s.id!=="email").map(s=>e.jsx(o,{className:"p-3 border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.description})]}),e.jsx(N,{variant:"outline",children:"Optional"})]})},s.id))})]})]})})]})}),e.jsx(p,{value:"roles",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Realm Roles"}),e.jsx(b,{children:"Manage realm-level roles and permissions"})]}),e.jsxs(d,{size:"sm",variant:"outline",onClick:ds,children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Create Role"]})]})}),e.jsx(f,{children:e.jsx("div",{className:"space-y-2",children:K.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("div",{className:"font-medium",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(F,{children:[e.jsx(O,{asChild:!0,children:e.jsx(d,{size:"sm",variant:"ghost",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(z,{children:[e.jsxs(V,{children:[e.jsxs(q,{children:["Edit Role: ",s]}),e.jsx($,{children:"Role configuration"})]}),e.jsx("div",{className:"space-y-4 mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Role Name"}),e.jsx(c,{value:s,readOnly:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Role name cannot be changed"})]})})]})]}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>os(s),children:e.jsx(L,{className:"h-4 w-4"})})]})]},s))})})]})}),e.jsx(p,{value:"sessions",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsxs(u,{children:[e.jsx(v,{children:"Session Management"}),e.jsx(b,{children:"Configure SSO session timeouts and token lifespans"})]}),e.jsx(f,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"access-token-lifespan",children:"Access Token Lifespan"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{id:"access-token-lifespan",type:"number",min:"60",max:"3600",value:ze,onChange:s=>n({accessTokenLifespan:parseInt(s.target.value)||300})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"sec"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"How long access tokens are valid"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"refresh-token-lifespan",children:"Refresh Token Lifespan"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{id:"refresh-token-lifespan",type:"number",min:"60",max:"86400",value:$e,onChange:s=>n({refreshTokenLifespan:parseInt(s.target.value)||1800})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"sec"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"How long refresh tokens are valid"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"sso-session-idle",children:"SSO Session Idle"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{id:"sso-session-idle",type:"number",min:"60",max:"7200",value:Ve,onChange:s=>n({ssoSessionIdle:parseInt(s.target.value)||1800})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"sec"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Idle timeout for SSO sessions"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"sso-session-max",children:"SSO Session Max"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{id:"sso-session-max",type:"number",min:"300",max:"86400",value:qe,onChange:s=>n({ssoSessionMax:parseInt(s.target.value)||36e3})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"sec"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum SSO session duration"})]})]})})]})}),e.jsx(p,{value:"security",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsxs(u,{children:[e.jsx(v,{children:"Security Settings"}),e.jsx(b,{children:"SSL/TLS, protocols, and password policies"})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"Enable SSL"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Encrypt connections with TLS"})]}),e.jsx(m,{checked:ue,onCheckedChange:s=>n({enableSSL:s})})]}),ue&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"SSL Required"}),e.jsxs(ie,{value:Oe,onValueChange:s=>n({sslRequired:s}),children:[e.jsx(re,{children:e.jsx(ne,{})}),e.jsxs(ce,{children:[e.jsx(E,{value:"external",children:"External"}),e.jsx(E,{value:"all",children:"All"}),e.jsx(E,{value:"none",children:"None"})]})]})]}),e.jsx(M,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(t,{children:"Protocols"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(t,{children:"OAuth2 / OpenID Connect"})]}),e.jsx(m,{checked:Ge,onCheckedChange:s=>n({enableOAuth2:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(t,{children:"SAML 2.0"})]}),e.jsx(m,{checked:_e,onCheckedChange:s=>n({enableSAML:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(t,{children:"LDAP / Active Directory"})]}),e.jsx(m,{checked:Ke,onCheckedChange:s=>n({enableLDAP:s})})]})]})]}),e.jsx(M,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"password-policy",children:"Password Policy"}),e.jsx(c,{id:"password-policy",value:He,onChange:s=>n({passwordPolicy:s.target.value}),placeholder:"length(8) and digits(1)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Keycloak password policy expression. Examples: length(8), digits(1), uppercase(1), lowercase(1), specialChars(1)"})]})]})]})})]})]})})}export{Ds as KeycloakConfigAdvanced};

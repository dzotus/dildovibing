import{u as U,j as e,r as y,i as h,S as I,C as l,e as c,f as t,k as a,T as X,a as Y,b as f,W as ee,R as se,Z as ie,A as re,d as g,h as b,P as w,B as r,m as C,L as E,n as le,o as ae,p as ne,q as ce,s as z,t as A}from"./index-DnHhyaNM.js";import{P as u}from"./progress-Dn6hY506.js";import{R as te}from"./refresh-ccw-Bw4u_-k5.js";import{A as de}from"./arrow-right-left-D6qdTvDq.js";function be({componentId:D}){const{nodes:_,updateNode:$}=U(),R=_.find(s=>s.id===D);if(!R)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const d=R.data.config||{},j=d.receivers||[{id:"1",type:"otlp",enabled:!0,endpoint:"0.0.0.0:4317"},{id:"2",type:"prometheus",enabled:!0,endpoint:"0.0.0.0:8888"}],p=d.processors||[{id:"1",type:"batch",enabled:!0,config:{timeout:"1s",send_batch_size:8192}},{id:"2",type:"memory_limiter",enabled:!0,config:{limit_mib:512}}],v=d.exporters||[{id:"1",type:"otlp",enabled:!0,endpoint:"http://backend:4317"},{id:"2",type:"prometheus",enabled:!0,endpoint:"http://prometheus:9090"}],N=d.pipelines||[{id:"1",name:"traces-pipeline",type:"traces",receivers:["1"],processors:["1","2"],exporters:["1"]},{id:"2",name:"metrics-pipeline",type:"metrics",receivers:["2"],processors:["1"],exporters:["2"]}],P=d.metricsReceived||0,S=d.tracesReceived||0,L=d.logsReceived||0,k=d.metricsExported||0,T=d.tracesExported||0,M=d.logsExported||0,[oe,xe]=y.useState(null),[he,me]=y.useState(null),[je,pe]=y.useState(null),[ve,B]=y.useState(!1),n=s=>{$(D,{data:{...R.data,config:{...d,...s}}})},V=()=>{const s={id:`rec-${Date.now()}`,type:"otlp",enabled:!0,endpoint:"0.0.0.0:4317"};n({receivers:[...j,s]})},O=s=>{n({receivers:j.filter(i=>i.id!==s)})},Z=(s,i,m)=>{const x=j.map(o=>o.id===s?{...o,[i]:m}:o);n({receivers:x})},q=()=>{const s={id:`proc-${Date.now()}`,type:"batch",enabled:!0,config:{}};n({processors:[...p,s]})},H=s=>{n({processors:p.filter(i=>i.id!==s)})},W=(s,i,m)=>{const x=p.map(o=>o.id===s?{...o,[i]:m}:o);n({processors:x})},F=()=>{const s={id:`exp-${Date.now()}`,type:"otlp",enabled:!0,endpoint:"http://backend:4317"};n({exporters:[...v,s]})},G=s=>{n({exporters:v.filter(i=>i.id!==s)})},J=(s,i,m)=>{const x=v.map(o=>o.id===s?{...o,[i]:m}:o);n({exporters:x})},K=()=>{const s={id:`pipe-${Date.now()}`,name:"new-pipeline",type:"traces",receivers:[],processors:[],exporters:[]};n({pipelines:[...N,s]}),B(!1)},Q=s=>{n({pipelines:N.filter(i=>i.id!==s)})};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"OpenTelemetry Collector"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Telemetry Pipeline"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure receivers, processors, exporters and pipelines"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(I,{}),e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsxs(l,{children:[e.jsx(c,{className:"pb-3",children:e.jsx(t,{className:"text-sm font-medium",children:"Metrics Received"})}),e.jsx(a,{children:e.jsx("span",{className:"text-2xl font-bold",children:P.toLocaleString()})})]}),e.jsxs(l,{children:[e.jsx(c,{className:"pb-3",children:e.jsx(t,{className:"text-sm font-medium",children:"Traces Received"})}),e.jsx(a,{children:e.jsx("span",{className:"text-2xl font-bold",children:S.toLocaleString()})})]}),e.jsxs(l,{children:[e.jsx(c,{className:"pb-3",children:e.jsx(t,{className:"text-sm font-medium",children:"Logs Received"})}),e.jsx(a,{children:e.jsx("span",{className:"text-2xl font-bold",children:L.toLocaleString()})})]}),e.jsxs(l,{children:[e.jsx(c,{className:"pb-3",children:e.jsx(t,{className:"text-sm font-medium",children:"Metrics Exported"})}),e.jsx(a,{children:e.jsx("span",{className:"text-2xl font-bold",children:k.toLocaleString()})})]}),e.jsxs(l,{children:[e.jsx(c,{className:"pb-3",children:e.jsx(t,{className:"text-sm font-medium",children:"Traces Exported"})}),e.jsx(a,{children:e.jsx("span",{className:"text-2xl font-bold",children:T.toLocaleString()})})]}),e.jsxs(l,{children:[e.jsx(c,{className:"pb-3",children:e.jsx(t,{className:"text-sm font-medium",children:"Logs Exported"})}),e.jsx(a,{children:e.jsx("span",{className:"text-2xl font-bold",children:M.toLocaleString()})})]})]}),e.jsxs(X,{defaultValue:"pipelines",className:"space-y-4",children:[e.jsxs(Y,{children:[e.jsxs(f,{value:"pipelines",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Pipelines (",N.length,")"]}),e.jsxs(f,{value:"receivers",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Receivers (",j.length,")"]}),e.jsxs(f,{value:"processors",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Processors (",p.length,")"]}),e.jsxs(f,{value:"exporters",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Exporters (",v.length,")"]}),e.jsxs(f,{value:"monitoring",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Monitoring"]})]}),e.jsx(g,{value:"pipelines",className:"space-y-4",children:e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Pipelines"}),e.jsx(b,{children:"Configure telemetry data pipelines"})]}),e.jsxs(h,{onClick:K,size:"sm",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Create Pipeline"]})]})}),e.jsx(a,{children:e.jsx("div",{className:"space-y-4",children:N.map(s=>e.jsxs(l,{className:"border-l-4 border-l-blue-500",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-base",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(r,{variant:"outline",children:s.type}),e.jsxs(r,{variant:"outline",children:[s.receivers.length," receivers"]}),e.jsxs(r,{variant:"outline",children:[s.processors.length," processors"]}),e.jsxs(r,{variant:"outline",children:[s.exporters.length," exporters"]})]})]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>Q(s.id),children:e.jsx(C,{className:"h-4 w-4"})})]})}),e.jsxs(a,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Pipeline Type"}),e.jsxs(le,{value:s.type,onValueChange:i=>{const m=N.map(x=>x.id===s.id?{...x,type:i}:x);n({pipelines:m})},children:[e.jsx(ae,{children:e.jsx(ne,{})}),e.jsxs(ce,{children:[e.jsx(z,{value:"traces",children:"Traces"}),e.jsx(z,{value:"metrics",children:"Metrics"}),e.jsx(z,{value:"logs",children:"Logs"})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Receivers"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.filter(i=>s.receivers.includes(i.id)).map(i=>e.jsx(r,{variant:"outline",children:i.type},i.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Processors"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.filter(i=>s.processors.includes(i.id)).map(i=>e.jsx(r,{variant:"outline",children:i.type},i.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Exporters"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:v.filter(i=>s.exporters.includes(i.id)).map(i=>e.jsx(r,{variant:"outline",children:i.type},i.id))})]})]})]},s.id))})})]})}),e.jsx(g,{value:"receivers",className:"space-y-4",children:e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Receivers"}),e.jsx(b,{children:"Configure data collection receivers"})]}),e.jsxs(h,{onClick:V,size:"sm",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Add Receiver"]})]})}),e.jsx(a,{children:e.jsx("div",{className:"space-y-2",children:j.map(s=>e.jsx(l,{className:"border-l-4 border-l-green-500",children:e.jsx(a,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"outline",children:s.type}),s.enabled?e.jsx(r,{variant:"default",children:"Enabled"}):e.jsx(r,{variant:"outline",children:"Disabled"}),s.endpoint&&e.jsx(r,{variant:"outline",children:s.endpoint})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{checked:s.enabled,onCheckedChange:i=>Z(s.id,"enabled",i)}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>O(s.id),children:e.jsx(C,{className:"h-4 w-4"})})]})]})})},s.id))})})]})}),e.jsx(g,{value:"processors",className:"space-y-4",children:e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Processors"}),e.jsx(b,{children:"Configure data transformation processors"})]}),e.jsxs(h,{onClick:q,size:"sm",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Add Processor"]})]})}),e.jsx(a,{children:e.jsx("div",{className:"space-y-2",children:p.map(s=>e.jsx(l,{className:"border-l-4 border-l-purple-500",children:e.jsx(a,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"outline",children:s.type}),s.enabled?e.jsx(r,{variant:"default",children:"Enabled"}):e.jsx(r,{variant:"outline",children:"Disabled"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{checked:s.enabled,onCheckedChange:i=>W(s.id,"enabled",i)}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>H(s.id),children:e.jsx(C,{className:"h-4 w-4"})})]})]})})},s.id))})})]})}),e.jsx(g,{value:"exporters",className:"space-y-4",children:e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Exporters"}),e.jsx(b,{children:"Configure data export destinations"})]}),e.jsxs(h,{onClick:F,size:"sm",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Add Exporter"]})]})}),e.jsx(a,{children:e.jsx("div",{className:"space-y-2",children:v.map(s=>e.jsx(l,{className:"border-l-4 border-l-orange-500",children:e.jsx(a,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"outline",children:s.type}),s.enabled?e.jsx(r,{variant:"default",children:"Enabled"}):e.jsx(r,{variant:"outline",children:"Disabled"}),s.endpoint&&e.jsx(r,{variant:"outline",children:s.endpoint})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{checked:s.enabled,onCheckedChange:i=>J(s.id,"enabled",i)}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>G(s.id),children:e.jsx(C,{className:"h-4 w-4"})})]})]})})},s.id))})})]})}),e.jsx(g,{value:"monitoring",className:"space-y-4",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(t,{children:"Pipeline Monitoring"}),e.jsx(b,{children:"Monitor telemetry data flow"})]}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Metrics Received"}),e.jsx("p",{className:"text-2xl font-bold",children:P.toLocaleString()}),e.jsx(u,{value:Math.min(P/1e6*100,100),className:"h-2 mt-2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Traces Received"}),e.jsx("p",{className:"text-2xl font-bold",children:S.toLocaleString()}),e.jsx(u,{value:Math.min(S/1e5*100,100),className:"h-2 mt-2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Logs Received"}),e.jsx("p",{className:"text-2xl font-bold",children:L.toLocaleString()}),e.jsx(u,{value:Math.min(L/1e6*100,100),className:"h-2 mt-2"})]})]}),e.jsx(I,{}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Metrics Exported"}),e.jsx("p",{className:"text-2xl font-bold",children:k.toLocaleString()}),e.jsx(u,{value:Math.min(k/1e6*100,100),className:"h-2 mt-2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Traces Exported"}),e.jsx("p",{className:"text-2xl font-bold",children:T.toLocaleString()}),e.jsx(u,{value:Math.min(T/1e5*100,100),className:"h-2 mt-2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Logs Exported"}),e.jsx("p",{className:"text-2xl font-bold",children:M.toLocaleString()}),e.jsx(u,{value:Math.min(M/1e6*100,100),className:"h-2 mt-2"})]})]})]})})]})})]})]})})}export{be as OpenTelemetryCollectorConfigAdvanced};

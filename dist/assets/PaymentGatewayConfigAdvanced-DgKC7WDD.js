import{u as Le,a as ze,j as e,e as Oe,r as i,l as p,S as z,C as v,h as b,i as N,A as J,m as y,T as Ue,b as _e,c as Q,B as j,d as Ge,f as X,k as Y,P as te,O as Ke,I as T,q as O,s as U,U as He,t as _,v as G,w as d,aa as ne,X as le,o as re,L as n,x as C,D as ce,y as ie,z as de,E as oe,G as xe,H as ue}from"./index-Nkr1tjDA.js";import{T as Ve}from"./textarea-D_P4HYki.js";import{u as qe}from"./use-toast-BKdZlGVt.js";import{R as he}from"./refresh-ccw-CiDyk_ew.js";import{D as Be}from"./dollar-sign-CoJDERFu.js";import{T as Je}from"./trending-up-GGHMT3lO.js";import{C as Qe}from"./credit-card-L1sudcPZ.js";import{S as me}from"./shield-DuUbjkYl.js";import{C as Xe}from"./circle-check-big-C10E_4sf.js";import{C as Ye}from"./clock-BwKYQgCD.js";function xs({componentId:o}){const{nodes:D,updateNode:A}=Le(),{getComponentMetrics:P}=ze(),{toast:u}=qe(),x=D.find(s=>s.id===o);if(!x)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const t=Oe.getPaymentGatewayEmulationEngine(o);P(o)?.customMetrics;const c=x.data.config||{};i.useEffect(()=>{t&&x&&t.initializeConfig(x)},[x.id,JSON.stringify(x.data.config),t]);const f=t?.getTransactions()||[],w=t?.getWebhooks()||[],k=c.transactions||[],W=c.webhooks||[],h=i.useMemo(()=>f.length>0?f.map(s=>({id:s.id,amount:s.amount,currency:s.currency,status:s.status,paymentMethod:s.paymentMethod,customerId:s.customerId,timestamp:new Date(s.timestamp).toISOString(),description:s.description,fee:s.fee,refundedAmount:s.refundedAmount})):k,[f,k]),l=i.useMemo(()=>w.length>0?w.map(s=>({id:s.id,url:s.url,events:s.events,enabled:s.enabled,secret:s.secret})):W,[w,W]),g=t?.getMetrics(),B=g?.transactionsTotal??h.length,K=g?.totalAmount??h.reduce((s,a)=>s+a.amount,0),r=g?.successRate?g.successRate*100:h.length>0?h.filter(s=>s.status==="succeeded").length/h.length*100:0,je=g?.averageAmount??(h.length>0?K/h.length:0),pe=c.apiKey||"",ge=c.secretKey||"",Z=c.supportedCurrencies||["USD","EUR","GBP","JPY"],ee=c.supportedMethods||["card","bank_transfer","paypal","apple_pay"],fe=c.gatewayType||"stripe",ve=c.enable3DSecure??!0,be=c.enableFraudDetection??!0,Ne=c.enableRefunds??!0,ye=c.enableRecurringPayments??!0,Ce=c.enableCreditCards??!0,we=c.enableDebitCards??!0,ke=c.enableACH??!1,Se=c.enableCryptocurrency??!1,[Te,M]=i.useState(!1),[De,F]=i.useState(!1),[I,H]=i.useState(null),[$,V]=i.useState(null),[R,Ae]=i.useState(""),[q,Pe]=i.useState("all"),m=s=>{const a={...c,...s};A(o,{data:{...x.data,config:a}}),t&&t.updateConfig(s)},Ee=s=>{const a={...s,id:`txn_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};t&&t.addTransaction(a),m({transactions:[...h,{id:a.id,amount:a.amount,currency:a.currency,status:a.status,paymentMethod:a.paymentMethod,customerId:a.customerId,timestamp:new Date(a.timestamp).toISOString(),description:a.description}]}),u({title:"Transaction added",description:`Transaction ${a.id} has been created.`})},We=(s,a)=>{t&&t.updateTransaction(s,a);const L=h.map(S=>S.id===s?{...S,...a}:S);m({transactions:L}),u({title:"Transaction updated",description:`Transaction ${s} has been updated.`})},Re=s=>{t&&t.removeTransaction(s),m({transactions:h.filter(a=>a.id!==s)}),u({title:"Transaction removed",description:`Transaction ${s} has been deleted.`})},Me=s=>{const a={...s,id:`wh_${Date.now()}`};t&&t.addWebhook(a),m({webhooks:[...l,{id:a.id,url:a.url,events:a.events,enabled:a.enabled,secret:a.secret}]}),u({title:"Webhook added",description:`Webhook ${a.id} has been created.`})},Fe=(s,a)=>{t&&t.updateWebhook(s,a);const L=l.map(S=>S.id===s?{...S,...a}:S);m({webhooks:L}),u({title:"Webhook updated",description:`Webhook ${s} has been updated.`})},Ie=s=>{t&&t.removeWebhook(s),m({webhooks:l.filter(a=>a.id!==s)}),u({title:"Webhook removed",description:`Webhook ${s} has been deleted.`})},$e=()=>{t&&x&&t.initializeConfig(x),u({title:"Refreshed",description:"Payment Gateway data has been refreshed."})},se=i.useMemo(()=>{let s=h;return R&&(s=s.filter(a=>a.id.toLowerCase().includes(R.toLowerCase())||a.customerId?.toLowerCase().includes(R.toLowerCase())||a.description?.toLowerCase().includes(R.toLowerCase()))),q!=="all"&&(s=s.filter(a=>a.status===q)),s},[h,R,q]),ae=s=>{switch(s){case"succeeded":return"bg-green-500";case"pending":case"processing":return"bg-yellow-500";case"failed":return"bg-red-500";case"refunded":return"bg-blue-500";case"cancelled":return"bg-gray-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Payment Gateway"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Payment Processing"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Secure payment processing and transaction management"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:$e,children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(z,{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(v,{className:"border-l-4 border-l-blue-500 min-w-0",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground truncate",children:"Transactions"}),e.jsx(J,{className:"h-4 w-4 text-blue-500 flex-shrink-0"})]})}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-baseline gap-2 min-w-0",children:[e.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-blue-600 dark:text-blue-400 truncate",children:B}),e.jsx("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:"total"})]})})]}),e.jsxs(v,{className:"border-l-4 border-l-green-500 min-w-0",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground truncate",children:"Total Amount"}),e.jsx(Be,{className:"h-4 w-4 text-green-500 flex-shrink-0"})]})}),e.jsx(y,{children:e.jsx("div",{className:"flex items-baseline gap-2 min-w-0",children:e.jsxs("span",{className:"text-2xl sm:text-3xl font-bold text-green-600 dark:text-green-400 truncate",children:["$",K.toFixed(2)]})})})]}),e.jsxs(v,{className:"border-l-4 border-l-purple-500 min-w-0",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground truncate",children:"Success Rate"}),e.jsx(Je,{className:"h-4 w-4 text-purple-500 flex-shrink-0"})]})}),e.jsx(y,{children:e.jsx("div",{className:"flex items-baseline gap-2 min-w-0",children:e.jsxs("span",{className:"text-2xl sm:text-3xl font-bold text-purple-600 dark:text-purple-400 truncate",children:[r.toFixed(1),"%"]})})})]}),e.jsxs(v,{className:"border-l-4 border-l-cyan-500 min-w-0",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground truncate",children:"Avg Amount"}),e.jsx(Qe,{className:"h-4 w-4 text-cyan-500 flex-shrink-0"})]})}),e.jsx(y,{children:e.jsx("div",{className:"flex items-baseline gap-2 min-w-0",children:e.jsxs("span",{className:"text-2xl sm:text-3xl font-bold text-cyan-600 dark:text-cyan-400 truncate",children:["$",je.toFixed(2)]})})})]})]}),e.jsxs(Ue,{defaultValue:"transactions",className:"space-y-4",children:[e.jsxs(_e,{className:"flex-wrap",children:[e.jsxs(Q,{value:"transactions",className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Transactions"}),e.jsx(j,{variant:"secondary",className:"ml-1",children:h.length})]}),e.jsxs(Q,{value:"webhooks",className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Webhooks"}),e.jsx(j,{variant:"secondary",className:"ml-1",children:l.length})]}),e.jsxs(Q,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]}),e.jsx(X,{value:"transactions",className:"space-y-4",children:e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Transactions"}),e.jsx(Y,{children:"Payment transaction history"})]}),e.jsxs(p,{onClick:()=>{H(null),M(!0)},size:"sm",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(T,{placeholder:"Search transactions...",value:R,onChange:s=>Ae(s.target.value),className:"pl-9"})]}),e.jsxs(O,{value:q,onValueChange:Pe,children:[e.jsxs(U,{className:"w-full sm:w-[180px]",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),e.jsx(_,{placeholder:"Filter by status"})]}),e.jsxs(G,{children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"succeeded",children:"Succeeded"}),e.jsx(d,{value:"pending",children:"Pending"}),e.jsx(d,{value:"processing",children:"Processing"}),e.jsx(d,{value:"failed",children:"Failed"}),e.jsx(d,{value:"refunded",children:"Refunded"}),e.jsx(d,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsx(y,{children:e.jsx("div",{className:"space-y-4",children:se.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(J,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No transactions found"})]}):se.map(s=>e.jsxs(v,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-gradient-to-r from-blue-50/50 to-transparent dark:from-blue-950/10",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${ae(s.status)}/20`,children:s.status==="succeeded"?e.jsx(Xe,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):s.status==="pending"||s.status==="processing"?e.jsx(Ye,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}):s.status==="refunded"?e.jsx(he,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}):s.status==="cancelled"?e.jsx(ne,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}):e.jsx(ne,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx(N,{className:"text-lg font-semibold",children:s.id}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(j,{variant:"outline",className:ae(s.status),children:s.status}),e.jsx(j,{variant:"outline",children:s.paymentMethod}),e.jsx(j,{variant:"outline",children:s.currency})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",s.amount.toFixed(2)," ",s.currency]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(s.timestamp).toLocaleString()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>{H(s),M(!0)},className:"h-8 w-8",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>Re(s.id),className:"h-8 w-8 hover:bg-destructive/10 hover:text-destructive",children:e.jsx(re,{className:"h-4 w-4"})})]})]})]})}),e.jsxs(y,{children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),s.customerId&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Customer: ",s.customerId]}),s.fee&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Fee: $",s.fee.toFixed(2)]}),s.refundedAmount&&e.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:["Refunded: $",s.refundedAmount.toFixed(2)]})]})]},s.id))})})]})}),e.jsx(X,{value:"webhooks",className:"space-y-4",children:e.jsxs(v,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Webhooks"}),e.jsx(Y,{children:"Configure webhook endpoints"})]}),e.jsxs(p,{onClick:()=>{V(null),F(!0)},size:"sm",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Create Webhook"]})]})}),e.jsx(y,{children:e.jsx("div",{className:"space-y-4",children:l.map(s=>e.jsxs(v,{className:"border-l-4 border-l-purple-500 hover:shadow-md transition-shadow bg-gradient-to-r from-purple-50/50 to-transparent dark:from-purple-950/10",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30",children:e.jsx(me,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx(N,{className:"text-lg font-semibold",children:s.id}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(j,{variant:s.enabled?"default":"outline",children:s.enabled?"Enabled":"Disabled"}),e.jsx(j,{variant:"outline",className:"font-mono text-xs",children:s.url})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>{V(s),F(!0)},className:"h-8 w-8",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>Ie(s.id),className:"h-8 w-8 hover:bg-destructive/10 hover:text-destructive",children:e.jsx(re,{className:"h-4 w-4"})})]})]})}),e.jsx(y,{children:s.events&&s.events.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Events"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.events.map((a,L)=>e.jsx(j,{variant:"outline",children:a},L))})]})})]},s.id))})})]})}),e.jsx(X,{value:"settings",className:"space-y-4",children:e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(N,{children:"Payment Gateway Settings"}),e.jsx(Y,{children:"API credentials and configuration"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"API Key"}),e.jsx(T,{type:"password",value:pe,onChange:s=>m({apiKey:s.target.value}),placeholder:"pk_live_***"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Secret Key"}),e.jsx(T,{type:"password",value:ge,onChange:s=>m({secretKey:s.target.value}),placeholder:"sk_live_***"})]}),e.jsx(z,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Supported Currencies"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Z.map(s=>e.jsx(j,{variant:"outline",children:s},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Supported Payment Methods"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ee.map(s=>e.jsx(j,{variant:"outline",children:s},s))})]}),e.jsx(z,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Gateway Type"}),e.jsxs(O,{value:fe,onValueChange:s=>m({gatewayType:s}),children:[e.jsx(U,{children:e.jsx(_,{})}),e.jsxs(G,{children:[e.jsx(d,{value:"stripe",children:"Stripe"}),e.jsx(d,{value:"paypal",children:"PayPal"}),e.jsx(d,{value:"square",children:"Square"}),e.jsx(d,{value:"adyen",children:"Adyen"})]})]})]}),e.jsx(z,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Enable 3D Secure"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Additional authentication for cards"})]}),e.jsx(C,{checked:ve,onCheckedChange:s=>m({enable3DSecure:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Enable Fraud Detection"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically detect fraudulent transactions"})]}),e.jsx(C,{checked:be,onCheckedChange:s=>m({enableFraudDetection:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Enable Refunds"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow refund processing"})]}),e.jsx(C,{checked:Ne,onCheckedChange:s=>m({enableRefunds:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Enable Recurring Payments"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Support subscription payments"})]}),e.jsx(C,{checked:ye,onCheckedChange:s=>m({enableRecurringPayments:s})})]})]}),e.jsx(z,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(n,{children:"Payment Methods"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"font-normal",children:"Credit Cards"}),e.jsx(C,{checked:Ce,onCheckedChange:s=>m({enableCreditCards:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"font-normal",children:"Debit Cards"}),e.jsx(C,{checked:we,onCheckedChange:s=>m({enableDebitCards:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"font-normal",children:"ACH"}),e.jsx(C,{checked:ke,onCheckedChange:s=>m({enableACH:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"font-normal",children:"Cryptocurrency"}),e.jsx(C,{checked:Se,onCheckedChange:s=>m({enableCryptocurrency:s})})]})]})]})]})]})})]})]}),e.jsx(ce,{open:Te,onOpenChange:M,children:e.jsxs(ie,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(de,{children:[e.jsx(oe,{children:I?"Edit Transaction":"Add Transaction"}),e.jsx(xe,{children:I?"Update transaction details":"Create a new payment transaction"})]}),e.jsx(Ze,{transaction:I,supportedCurrencies:Z,supportedMethods:ee,onSave:s=>{I?We(I.id,s):Ee(s),M(!1),H(null)},onCancel:()=>{M(!1),H(null)}})]})}),e.jsx(ce,{open:De,onOpenChange:F,children:e.jsxs(ie,{className:"max-w-2xl",children:[e.jsxs(de,{children:[e.jsx(oe,{children:$?"Edit Webhook":"Add Webhook"}),e.jsx(xe,{children:$?"Update webhook configuration":"Create a new webhook endpoint"})]}),e.jsx(es,{webhook:$,onSave:s=>{$?Fe($.id,s):Me(s),F(!1),V(null)},onCancel:()=>{F(!1),V(null)}})]})})]})}function Ze({transaction:o,supportedCurrencies:D,supportedMethods:A,onSave:P,onCancel:u}){const[x,t]=i.useState(o?.amount.toString()||""),[E,c]=i.useState(o?.currency||D[0]),[f,w]=i.useState(o?.status||"pending"),[k,W]=i.useState(o?.paymentMethod||A[0]),[h,l]=i.useState(o?.customerId||""),[g,B]=i.useState(o?.description||""),K=r=>{r.preventDefault(),P({amount:parseFloat(x)||0,currency:E,status:f,paymentMethod:k,customerId:h||void 0,description:g||void 0})};return e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Amount *"}),e.jsx(T,{type:"number",step:"0.01",value:x,onChange:r=>t(r.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Currency *"}),e.jsxs(O,{value:E,onValueChange:c,children:[e.jsx(U,{children:e.jsx(_,{})}),e.jsx(G,{children:D.map(r=>e.jsx(d,{value:r,children:r},r))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Status *"}),e.jsxs(O,{value:f,onValueChange:r=>w(r),children:[e.jsx(U,{children:e.jsx(_,{})}),e.jsxs(G,{children:[e.jsx(d,{value:"pending",children:"Pending"}),e.jsx(d,{value:"processing",children:"Processing"}),e.jsx(d,{value:"succeeded",children:"Succeeded"}),e.jsx(d,{value:"failed",children:"Failed"}),e.jsx(d,{value:"refunded",children:"Refunded"}),e.jsx(d,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Payment Method *"}),e.jsxs(O,{value:k,onValueChange:r=>W(r),children:[e.jsx(U,{children:e.jsx(_,{})}),e.jsx(G,{children:A.map(r=>e.jsx(d,{value:r,children:r},r))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Customer ID"}),e.jsx(T,{value:h,onChange:r=>l(r.target.value),placeholder:"cust_..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Description"}),e.jsx(Ve,{value:g,onChange:r=>B(r.target.value),placeholder:"Transaction description",rows:3})]}),e.jsxs(ue,{children:[e.jsx(p,{type:"button",variant:"outline",onClick:u,children:"Cancel"}),e.jsx(p,{type:"submit",children:o?"Update":"Create"})]})]})}function es({webhook:o,onSave:D,onCancel:A}){const[P,u]=i.useState(o?.url||""),[x,t]=i.useState(o?.events||[]),[E,c]=i.useState(o?.enabled??!0),[f,w]=i.useState(o?.secret||""),k=["payment.succeeded","payment.failed","payment.pending","payment.refunded","payment.cancelled","payment.*"],W=l=>{x.includes(l)?t(x.filter(g=>g!==l)):t([...x,l])},h=l=>{l.preventDefault(),D({url:P,events:x,enabled:E,secret:f||void 0})};return e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"URL *"}),e.jsx(T,{type:"url",value:P,onChange:l=>u(l.target.value),placeholder:"https://api.example.com/webhooks/payment",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Events *"}),e.jsx("div",{className:"flex flex-wrap gap-2 p-3 border rounded-md min-h-[100px]",children:k.map(l=>e.jsx(j,{variant:x.includes(l)?"default":"outline",className:"cursor-pointer",onClick:()=>W(l),children:l},l))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click events to toggle selection"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Secret"}),e.jsx(T,{type:"password",value:f,onChange:l=>w(l.target.value),placeholder:"Webhook secret (optional)"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Enabled"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable or disable this webhook"})]}),e.jsx(C,{checked:E,onCheckedChange:c})]}),e.jsxs(ue,{children:[e.jsx(p,{type:"button",variant:"outline",onClick:A,children:"Cancel"}),e.jsx(p,{type:"submit",children:o?"Update":"Create"})]})]})}export{xs as PaymentGatewayConfigAdvanced};

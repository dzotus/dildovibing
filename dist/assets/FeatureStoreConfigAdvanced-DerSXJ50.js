import{u as Ae,X as Re,j as e,V as $e,r as v,i as g,S as ae,C as f,e as p,f as N,k as b,T as Oe,a as qe,b as H,c as Me,d as Z,h as U,P as te,K as Pe,I as m,n as A,o as R,O as Be,p as $,q as O,s as c,B as y,U as re,m as ne,L as i,Z as He,t as X,D as ie,v as le,w as ce,x as de,y as oe,z as xe,l as Q}from"./index-DURBjmRY.js";import{T as ue}from"./textarea-XEi4bLpn.js";import{u as Ze}from"./use-toast-xcIxNTXl.js";import{R as Xe}from"./refresh-ccw-sggz22ww.js";import{P as _}from"./package-BKsKmXzy.js";import{D as I}from"./database-wzqVxBa7.js";import{T as Ie}from"./trending-up-CLzJfLNb.js";import{S as Ye}from"./server-NDwJ4nd7.js";function rs({componentId:q}){const{nodes:me,updateNode:he}=Ae(),{getComponentMetrics:je}=Re(),{toast:T}=Ze(),M=me.find(s=>s.id===q);if(!M)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const x=$e.getFeatureStoreEmulationEngine(q),V=je(q)?.customMetrics||{},l=M.data.config||{},h=l.features||[],F=l.featureSets||[],C=x?.getMetrics(),ve=C?.totalFeatures??l.totalFeatures??h.length,ge=C?.totalFeatureSets??l.totalFeatureSets??F.length,fe=C?.totalFeatureUsage??l.totalUsage??h.reduce((s,a)=>s+(a.usage||0),0),pe=C?.requestsPerSecond??V.requestsPerSecond??0,Ne=C?.averageLatency??V.averageLatency??0;C?.errorRate??V.errorRate;const be=C?.cacheHitRate??V.cacheHitRate??0,ye=C?.onlineStoreUtilization??V.onlineStoreUtilization??0,Se=C?.offlineStoreUtilization??V.offlineStoreUtilization??0,[Fe,P]=v.useState(!1),[Ce,B]=v.useState(!1),[d,G]=v.useState(null),[o,K]=v.useState(null),[k,we]=v.useState(""),[z,Te]=v.useState("all"),[t,w]=v.useState({name:"",version:"1.0",type:"numerical",dataType:"float64",tags:[],description:""}),[_e,J]=v.useState({}),[n,D]=v.useState({name:"",version:"1.0",features:[],description:""}),[u,E]=v.useState({}),L=s=>{he(q,{data:{...M.data,config:{...l,...s}}}),T({title:"Configuration updated",description:"Feature Store configuration has been saved."})},W=v.useMemo(()=>h.filter(s=>{const a=!k||s.name.toLowerCase().includes(k.toLowerCase())||s.description?.toLowerCase().includes(k.toLowerCase())||s.tags?.some(S=>S.toLowerCase().includes(k.toLowerCase())),r=z==="all"||s.type===z;return a&&r}),[h,k,z]),ee=s=>{s?(G(s),w({name:s.name,version:s.version,type:s.type,dataType:s.dataType,defaultValue:s.defaultValue,tags:s.tags||[],description:s.description||""})):(G(null),w({name:"",version:"1.0",type:"numerical",dataType:"float64",tags:[],description:""})),J({}),P(!0)},ke=()=>{const s={};if(!t.name||t.name.trim()===""?s.name="Feature name is required":/^[a-zA-Z0-9_-]+$/.test(t.name)||(s.name="Feature name can only contain letters, numbers, underscores, and hyphens"),!t.version||t.version.trim()===""?s.version="Version is required":/^[0-9]+\.[0-9]+(\.[0-9]+)?$/.test(t.version)||(s.version="Version must be in format X.Y or X.Y.Z (e.g., 1.0, 1.2.3)"),!t.dataType||t.dataType.trim()==="")s.dataType="Data type is required";else{const a=["int","int32","int64","float","float32","float64","double","string","bool","boolean"];a.includes(t.dataType.toLowerCase())||(s.dataType=`Data type must be one of: ${a.join(", ")}`)}return d?h.some(r=>r.name===t.name&&r.version===t.version&&!(r.name===d.name&&r.version===d.version))&&(s.name="A feature with this name and version already exists"):h.some(r=>r.name===t.name&&r.version===t.version)&&(s.name="A feature with this name and version already exists"),J(s),Object.keys(s).length===0},Ve=()=>{if(!ke()){T({title:"Validation error",description:"Please fix the errors in the form.",variant:"destructive"});return}const s=d?h.map(a=>a.name===d.name&&a.version===d.version?{...t,usage:a.usage}:a):[...h,{...t,usage:0}];L({features:s}),x&&(d&&x.removeFeature(d.name,d.version),x.addFeature({name:t.name,version:t.version,type:t.type,dataType:t.dataType,defaultValue:t.defaultValue,tags:t.tags||[],status:"active",description:t.description})),P(!1),T({title:d?"Feature updated":"Feature created",description:`Feature ${t.name} has been ${d?"updated":"created"}.`})},De=(s,a)=>{L({features:h.filter(r=>!(r.name===s&&r.version===a))}),x&&x.removeFeature(s,a),T({title:"Feature removed",description:`Feature ${s} v${a} has been removed.`})},se=s=>{s?(K(s),D({name:s.name,version:s.version,features:s.features||[],description:s.description||""})):(K(null),D({name:"",version:"1.0",features:[],description:""})),E({}),B(!0)},Ue=()=>{const s={};if(!n.name||n.name.trim()===""?s.name="Feature Set name is required":/^[a-zA-Z0-9_-]+$/.test(n.name)||(s.name="Feature Set name can only contain letters, numbers, underscores, and hyphens"),!n.version||n.version.trim()===""?s.version="Version is required":/^[0-9]+\.[0-9]+(\.[0-9]+)?$/.test(n.version)||(s.version="Version must be in format X.Y or X.Y.Z (e.g., 1.0, 1.2.3)"),!n.features||n.features.length===0)s.features="At least one feature is required";else{const a=n.features.filter(r=>!h.some(S=>S.name===r));a.length>0&&(s.features=`Features not found: ${a.join(", ")}`)}return o?F.some(r=>r.name===n.name&&r.version===n.version&&!(r.name===o.name&&r.version===o.version))&&(s.name="A feature set with this name and version already exists"):F.some(r=>r.name===n.name&&r.version===n.version)&&(s.name="A feature set with this name and version already exists"),E(s),Object.keys(s).length===0},ze=()=>{if(!Ue()){T({title:"Validation error",description:"Please fix the errors in the form.",variant:"destructive"});return}const s=o?F.map(a=>a.name===o.name&&a.version===o.version?{...n,usage:a.usage,createdAt:a.createdAt}:a):[...F,{...n,usage:0,createdAt:new Date().toISOString()}];L({featureSets:s}),x&&(o&&x.removeFeatureSet(o.name,o.version),x.addFeatureSet({name:n.name,version:n.version,features:n.features||[],description:n.description})),B(!1),T({title:o?"Feature Set updated":"Feature Set created",description:`Feature Set ${n.name} has been ${o?"updated":"created"}.`})},Ee=(s,a)=>{L({featureSets:F.filter(r=>!(r.name===s&&r.version===a))}),x&&x.removeFeatureSet(s,a),T({title:"Feature Set removed",description:`Feature Set ${s} v${a} has been removed.`})},Le=()=>{x&&x.initializeConfig(M),T({title:"Refreshed",description:"Feature Store data has been refreshed."})},j=(s,a)=>{L({[s]:a})};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Feature Store"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Feature Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Centralized repository for machine learning features"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(g,{variant:"outline",size:"sm",onClick:Le,children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(ae,{}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(f,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Features"}),e.jsx(_,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(b,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:ve}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"registered"})]})})]}),e.jsxs(f,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Feature Sets"}),e.jsx(I,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(b,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:ge}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"defined"})]})})]}),e.jsxs(f,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Total Usage"}),e.jsx(Ie,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(b,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:fe.toLocaleString()}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"requests"})]})})]})]}),e.jsxs(Oe,{defaultValue:"features",className:"space-y-4",children:[e.jsxs(qe,{className:"flex-wrap",children:[e.jsxs(H,{value:"features",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Features (",h.length,")"]}),e.jsxs(H,{value:"feature-sets",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Feature Sets (",F.length,")"]}),e.jsxs(H,{value:"serving",children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Serving"]}),e.jsxs(H,{value:"settings",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(Z,{value:"features",className:"space-y-4",children:e.jsxs(f,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Features"}),e.jsx(U,{children:"Registered features in the store"})]}),e.jsxs(g,{onClick:()=>ee(),size:"sm",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Create Feature"]})]})}),e.jsxs(b,{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:"Search features...",value:k,onChange:s=>we(s.target.value),className:"pl-10"})]}),e.jsxs(A,{value:z,onValueChange:Te,children:[e.jsxs(R,{className:"w-[180px]",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),e.jsx($,{})]}),e.jsxs(O,{children:[e.jsx(c,{value:"all",children:"All Types"}),e.jsx(c,{value:"numerical",children:"Numerical"}),e.jsx(c,{value:"categorical",children:"Categorical"}),e.jsx(c,{value:"embedding",children:"Embedding"}),e.jsx(c,{value:"timestamp",children:"Timestamp"})]})]})]}),e.jsx("div",{className:"space-y-4",children:W.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:k||z!=="all"?"No features match your filters":"No features registered yet"}):W.map(s=>{const r=x?.getFeature(s.name,s.version)?.usageCount??s.usage??0;return e.jsxs(f,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(_,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(N,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(y,{variant:"outline",children:["v",s.version]}),e.jsx(y,{variant:"outline",children:s.type}),e.jsx(y,{variant:"outline",children:s.dataType}),r>0&&e.jsxs(y,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300",children:[r," uses"]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>ee(s),className:"hover:bg-blue-50 dark:hover:bg-blue-950/20",children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>De(s.name,s.version),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(ne,{className:"h-4 w-4"})})]})]})}),e.jsxs(b,{children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),s.defaultValue!==void 0&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Default:"}),e.jsx("span",{className:"ml-2 font-mono",children:String(s.defaultValue)})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.tags.map((S,Y)=>e.jsx(y,{variant:"outline",className:"text-xs",children:S},Y))})]})]},`${s.name}-${s.version}`)})})]})]})}),e.jsx(Z,{value:"feature-sets",className:"space-y-4",children:e.jsxs(f,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Feature Sets"}),e.jsx(U,{children:"Grouped collections of features"})]}),e.jsxs(g,{onClick:()=>se(),size:"sm",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Create Feature Set"]})]})}),e.jsx(b,{children:e.jsx("div",{className:"space-y-4",children:F.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No feature sets defined yet"}):F.map(s=>{const r=x?.getFeatureSets().find(S=>S.name===s.name&&S.version===s.version)?.usageCount??s.usage??0;return e.jsxs(f,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/30",children:e.jsx(I,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx(N,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(y,{variant:"outline",children:["v",s.version]}),e.jsxs(y,{variant:"outline",children:[s.features.length," features"]}),r>0&&e.jsxs(y,{variant:"outline",className:"bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300",children:[r," uses"]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>se(s),className:"hover:bg-green-50 dark:hover:bg-green-950/20",children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>Ee(s.name,s.version),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(ne,{className:"h-4 w-4"})})]})]})}),e.jsxs(b,{children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"text-xs",children:"Features:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.features.length===0?e.jsx("span",{className:"text-xs text-muted-foreground",children:"No features"}):s.features.map((S,Y)=>e.jsx(y,{variant:"outline",className:"text-xs",children:S},Y))})]}),s.createdAt&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Created: ",new Date(s.createdAt).toLocaleString()]})]})]},`${s.name}-${s.version}`)})})})]})}),e.jsxs(Z,{value:"serving",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(f,{children:[e.jsxs(p,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5 text-yellow-500"}),"Online Serving"]}),e.jsx(U,{children:"Low-latency feature serving"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Status"}),e.jsx(y,{variant:l.enableOnlineServing!==!1?"default":"secondary",children:l.enableOnlineServing!==!1?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Store Type"}),e.jsxs(A,{value:l.onlineStoreType||"redis",onValueChange:s=>j("onlineStoreType",s),children:[e.jsx(R,{children:e.jsx($,{})}),e.jsxs(O,{children:[e.jsx(c,{value:"redis",children:"Redis"}),e.jsx(c,{value:"dynamodb",children:"DynamoDB"}),e.jsx(c,{value:"cassandra",children:"Cassandra"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Store URL"}),e.jsx(m,{value:l.onlineStoreUrl||"redis://localhost:6379",onChange:s=>j("onlineStoreUrl",s.target.value),placeholder:"redis://localhost:6379"})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Utilization"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(ye*100),"%"]})]})]})]}),e.jsxs(f,{children:[e.jsxs(p,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5 text-blue-500"}),"Offline Serving"]}),e.jsx(U,{children:"Batch feature serving"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Status"}),e.jsx(y,{variant:l.enableOfflineServing!==!1?"default":"secondary",children:l.enableOfflineServing!==!1?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Store Type"}),e.jsxs(A,{value:l.offlineStoreType||"snowflake",onValueChange:s=>j("offlineStoreType",s),children:[e.jsx(R,{children:e.jsx($,{})}),e.jsxs(O,{children:[e.jsx(c,{value:"snowflake",children:"Snowflake"}),e.jsx(c,{value:"bigquery",children:"BigQuery"}),e.jsx(c,{value:"redshift",children:"Redshift"})]})]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Utilization"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(Se*100),"%"]})]})]})]})]}),e.jsxs(f,{children:[e.jsxs(p,{children:[e.jsx(N,{children:"Performance Metrics"}),e.jsx(U,{children:"Real-time serving performance"})]}),e.jsx(b,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Requests/sec"}),e.jsx("div",{className:"text-2xl font-bold",children:pe.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Latency"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Ne.toFixed(1),"ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Cache Hit Rate"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(be*100),"%"]})]})]})})]})]}),e.jsx(Z,{value:"settings",className:"space-y-4",children:e.jsxs(f,{children:[e.jsxs(p,{children:[e.jsx(N,{children:"Feature Store Settings"}),e.jsx(U,{children:"Store configuration"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Versioning"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Track feature versions"})]}),e.jsx(X,{checked:l.enableVersioning!==!1,onCheckedChange:s=>j("enableVersioning",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Feature Validation"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Validate feature values"})]}),e.jsx(X,{checked:l.enableFeatureValidation!==!1,onCheckedChange:s=>j("enableFeatureValidation",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Usage Tracking"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Track feature usage statistics"})]}),e.jsx(X,{checked:l.enableUsageTracking!==!1,onCheckedChange:s=>j("enableUsageTracking",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Caching"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Cache feature values for faster access"})]}),e.jsx(X,{checked:l.enableCaching!==!1,onCheckedChange:s=>j("enableCaching",s)})]}),e.jsx(ae,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Feature Store Type"}),e.jsxs(A,{value:l.featureStoreType||"feast",onValueChange:s=>j("featureStoreType",s),children:[e.jsx(R,{children:e.jsx($,{})}),e.jsxs(O,{children:[e.jsx(c,{value:"feast",children:"Feast"}),e.jsx(c,{value:"tecton",children:"Tecton"}),e.jsx(c,{value:"hopsworks",children:"Hopsworks"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Default Feature TTL (days)"}),e.jsx(m,{type:"number",value:l.defaultTTL||30,onChange:s=>j("defaultTTL",parseInt(s.target.value)||30),min:1,max:365})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Cache Size (MB)"}),e.jsx(m,{type:"number",value:l.cacheSize||100,onChange:s=>j("cacheSize",parseInt(s.target.value)||100),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Cache TTL (seconds)"}),e.jsx(m,{type:"number",value:l.cacheTtl||3600,onChange:s=>j("cacheTtl",parseInt(s.target.value)||3600),min:1})]})]})]})})]}),e.jsx(ie,{open:Fe,onOpenChange:P,children:e.jsxs(le,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ce,{children:[e.jsx(de,{children:d?"Edit Feature":"Create Feature"}),e.jsx(oe,{children:d?"Update feature configuration":"Add a new feature to the store"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Feature Name *"}),e.jsx(m,{value:t.name,onChange:s=>w({...t,name:s.target.value}),placeholder:"user-age",disabled:!!d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Version *"}),e.jsx(m,{value:t.version,onChange:s=>w({...t,version:s.target.value}),placeholder:"1.0",disabled:!!d})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Type *"}),e.jsxs(A,{value:t.type,onValueChange:s=>w({...t,type:s}),children:[e.jsx(R,{children:e.jsx($,{})}),e.jsxs(O,{children:[e.jsx(c,{value:"numerical",children:"Numerical"}),e.jsx(c,{value:"categorical",children:"Categorical"}),e.jsx(c,{value:"embedding",children:"Embedding"}),e.jsx(c,{value:"timestamp",children:"Timestamp"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Data Type *"}),e.jsx(m,{value:t.dataType,onChange:s=>w({...t,dataType:s.target.value}),placeholder:"float64"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Description"}),e.jsx(ue,{value:t.description||"",onChange:s=>w({...t,description:s.target.value}),placeholder:"Feature description...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Default Value"}),e.jsx(m,{value:t.defaultValue!==void 0?String(t.defaultValue):"",onChange:s=>w({...t,defaultValue:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Tags (comma-separated)"}),e.jsx(m,{value:t.tags?.join(", ")||"",onChange:s=>w({...t,tags:s.target.value.split(",").map(a=>a.trim()).filter(a=>a)}),placeholder:"ml, production, user"})]})]}),e.jsxs(xe,{children:[e.jsx(g,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(g,{onClick:Ve,children:d?"Update":"Create"})]})]})}),e.jsx(ie,{open:Ce,onOpenChange:B,children:e.jsxs(le,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ce,{children:[e.jsx(de,{children:o?"Edit Feature Set":"Create Feature Set"}),e.jsx(oe,{children:o?"Update feature set configuration":"Create a new feature set"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Feature Set Name *"}),e.jsx(m,{value:n.name,onChange:s=>{D({...n,name:s.target.value}),u.name&&E({...u,name:""})},placeholder:"user-features",disabled:!!o,className:u.name?"border-destructive":""}),u.name&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),u.name]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Version *"}),e.jsx(m,{value:n.version,onChange:s=>{D({...n,version:s.target.value}),u.version&&E({...u,version:""})},placeholder:"1.0",disabled:!!o,className:u.version?"border-destructive":""}),u.version&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),u.version]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Description"}),e.jsx(ue,{value:n.description||"",onChange:s=>D({...n,description:s.target.value}),placeholder:"Feature set description...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Features (comma-separated feature names) *"}),e.jsx(m,{value:n.features?.join(", ")||"",onChange:s=>{D({...n,features:s.target.value.split(",").map(a=>a.trim()).filter(a=>a)}),u.features&&E({...u,features:""})},placeholder:"user-age, user-score, user-category",className:u.features?"border-destructive":""}),u.features&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),u.features]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available features: ",h.map(s=>s.name).join(", ")||"None"]})]})]}),e.jsxs(xe,{children:[e.jsx(g,{variant:"outline",onClick:()=>B(!1),children:"Cancel"}),e.jsx(g,{onClick:ze,children:o?"Update":"Create"})]})]})})]})})}export{rs as FeatureStoreConfigAdvanced};

import{u as z,j as e,r as C,V as Q,i as N,S as W,C as m,e as g,f as p,k as h,B as j,T as ne,a as ce,b as D,A as de,d as R,h as A,P as H,I as d,m as G,L as r,n as V,o as E,p as I,q as T,s as u,t as O,c as oe}from"./index-D6rf2aAc.js";import{P as b}from"./progress-Bp_Xy4EF.js";import{R as xe}from"./refresh-ccw-mfA9RHAw.js";import{C as me}from"./cloud-BLsqruRb.js";import{M as X}from"./message-square-2y72in19.js";import{K as he}from"./key-IHuZZ4FO.js";import{S as ge}from"./shield-CQf99Vjc.js";import{S as pe}from"./send-Dnl4pxCi.js";function we({componentId:M}){const{nodes:U,updateNode:L}=z(),f=U.find(s=>s.id===M);if(!f)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const l=f.data.config||{},n=l.queues||[],Y=l.accessKeyId||"",J=l.secretAccessKey||"",k=l.defaultRegion||"us-east-1",v=l.iamPolicies||[],[_,F]=C.useState(null),[je,Z]=C.useState(!1),[ue,q]=C.useState(!1),[ee,K]=C.useState(null),[w,B]=C.useState("");C.useEffect(()=>{if(!f||n.length===0)return;const{nodes:s,connections:a}=z.getState();Q.updateNodesAndConnections(s,a)},[M,n.length,f?.id]),C.useEffect(()=>{if(!f||n.length===0)return;const s=setInterval(()=>{const a=Q.getSQSRoutingEngine(M);if(!a)return;const t=a.getAllQueueMetrics(),i=f.data.config?.queues||[],S=i.map(x=>{const y=t.get(x.name);return y?{...x,approximateMessages:y.approximateMessages,approximateMessagesNotVisible:y.approximateMessagesNotVisible,approximateMessagesDelayed:y.approximateMessagesDelayed}:x});S.some((x,y)=>x.approximateMessages!==i[y]?.approximateMessages||x.approximateMessagesNotVisible!==i[y]?.approximateMessagesNotVisible||x.approximateMessagesDelayed!==i[y]?.approximateMessagesDelayed)&&L(M,{data:{...f.data,config:{...f.data.config,queues:S}}})},500);return()=>clearInterval(s)},[M,n.length,f?.id,L]);const c=s=>{L(M,{data:{...f.data,config:{...l,...s}}})},se=()=>{const s={name:"new-queue",type:"standard",region:k,visibilityTimeout:30,messageRetention:4,delaySeconds:0,approximateMessages:0,approximateMessagesNotVisible:0,approximateMessagesDelayed:0};c({queues:[...n,s]}),Z(!1)},ae=s=>{c({queues:n.filter((a,t)=>t!==s)})},o=(s,a,t)=>{const i=[...n];i[s]={...i[s],[a]:t},c({queues:i})},te=()=>{const s={id:`policy-${Date.now()}`,principal:"*",action:"sqs:SendMessage",resource:"*",effect:"Allow"};c({iamPolicies:[...v,s]}),q(!1)},ie=s=>{c({iamPolicies:v.filter(a=>a.id!==s)})},re=s=>{const a=n[s];if(a&&w){const{nodes:t,connections:i}=z.getState();Q.updateNodesAndConnections(t,i);const S=Q.getSQSRoutingEngine(M);if(S){if(S.sendMessage(a.name,w,new Blob([w]).size,void 0,a.type==="fifo"?"test-group":void 0,a.type==="fifo"&&a.contentBasedDedup?void 0:`test-${Date.now()}`)){const x=S.getQueueMetrics(a.name);x&&(o(s,"approximateMessages",x.approximateMessages),o(s,"approximateMessagesNotVisible",x.approximateMessagesNotVisible),o(s,"approximateMessagesDelayed",x.approximateMessagesDelayed)),Q.updateNodesAndConnections(t,i)}}else o(s,"approximateMessages",(a.approximateMessages||0)+1);B("")}},P=n.reduce((s,a)=>s+(a.approximateMessages||0),0),$=n.reduce((s,a)=>s+(a.approximateMessagesNotVisible||0),0);return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Amazon SQS"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Simple Queue Service"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure and manage AWS SQS queues with delivery guarantees"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"AWS Console"]})]})]}),e.jsx(W,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(m,{children:[e.jsx(g,{className:"pb-3",children:e.jsx(p,{className:"text-sm font-medium",children:"Total Queues"})}),e.jsxs(h,{children:[e.jsx("span",{className:"text-2xl font-bold",children:n.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active queues"})]})]}),e.jsxs(m,{children:[e.jsx(g,{className:"pb-3",children:e.jsx(p,{className:"text-sm font-medium",children:"Total Messages"})}),e.jsxs(h,{children:[e.jsx("span",{className:"text-2xl font-bold",children:P.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Approximate count"}),e.jsx(b,{value:Math.min(P/1e5*100,100),className:`h-2 mt-2 ${P>5e4?"bg-red-500":P>1e4?"bg-yellow-500":"bg-green-500"}`})]})]}),e.jsxs(m,{children:[e.jsx(g,{className:"pb-3",children:e.jsx(p,{className:"text-sm font-medium",children:"In Flight"})}),e.jsxs(h,{children:[e.jsx("span",{className:"text-2xl font-bold",children:$.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Being processed"}),e.jsx(b,{value:Math.min($/5e3*100,100),className:"h-2 mt-2"})]})]}),e.jsxs(m,{children:[e.jsx(g,{className:"pb-3",children:e.jsx(p,{className:"text-sm font-medium",children:"Default Region"})}),e.jsxs(h,{children:[e.jsx(j,{variant:"outline",children:k}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"AWS Region"})]})]})]}),e.jsxs(ne,{defaultValue:"queues",className:"space-y-4",children:[e.jsxs(ce,{children:[e.jsxs(D,{value:"queues",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Queues (",n.length,")"]}),e.jsxs(D,{value:"credentials",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Credentials"]}),e.jsxs(D,{value:"policies",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"IAM Policies (",v.length,")"]}),e.jsxs(D,{value:"monitoring",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Monitoring"]})]}),e.jsx(R,{value:"queues",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{children:"Queues"}),e.jsx(A,{children:"Manage SQS queues and their configuration"})]}),e.jsxs(N,{onClick:se,size:"sm",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Create Queue"]})]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:n.map((s,a)=>e.jsxs(m,{className:"border-l-4 border-l-orange-500",children:[e.jsx(g,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx(p,{className:"text-base",children:_===a?e.jsx(d,{value:s.name,onChange:t=>o(a,"name",t.target.value),onBlur:()=>F(null),onKeyDown:t=>{t.key==="Enter"&&F(null)},className:"h-7",autoFocus:!0}):e.jsx("span",{className:"cursor-pointer hover:text-primary",onClick:()=>F(a),children:s.name})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(j,{variant:s.type==="fifo"?"default":"outline",children:s.type==="fifo"?"FIFO":"Standard"}),e.jsx(j,{variant:"outline",children:s.region})]})]})]}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>ae(a),disabled:n.length===1,children:e.jsx(G,{className:"h-4 w-4"})})]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Messages Available"}),(s.approximateMessages||0)>1e4&&e.jsx(j,{variant:"destructive",className:"text-xs",children:"High"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessages?.toLocaleString()||0}),e.jsx(b,{value:Math.min((s.approximateMessages||0)/5e4*100,100),className:`h-2 ${(s.approximateMessages||0)>1e4?"bg-red-500":(s.approximateMessages||0)>5e3?"bg-yellow-500":"bg-green-500"}`}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready to consume"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Flight"}),(s.approximateMessagesNotVisible||0)>1e3&&e.jsx(j,{variant:"outline",className:"text-xs",children:"Processing"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessagesNotVisible?.toLocaleString()||0}),e.jsx(b,{value:Math.min((s.approximateMessagesNotVisible||0)/2e3*100,100),className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being processed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delayed"}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessagesDelayed?.toLocaleString()||0}),e.jsx(b,{value:Math.min((s.approximateMessagesDelayed||0)/500*100,100),className:"h-2 bg-orange-500"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Waiting for delay"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Queue URL"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(j,{variant:"outline",className:"font-mono text-xs",children:s.region})}),e.jsxs("p",{className:"text-xs font-mono text-muted-foreground truncate",title:`https://sqs.${s.region}.amazonaws.com/.../${s.name}`,children:["https://sqs.",s.region,".amazonaws.com/.../",s.name]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:`h-1.5 w-1.5 rounded-full ${(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"bg-gray-400":(s.approximateMessages||0)<1e3?"bg-green-500":(s.approximateMessages||0)<1e4?"bg-yellow-500":"bg-red-500"}`}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"Idle":(s.approximateMessages||0)<1e3?"Healthy":(s.approximateMessages||0)<1e4?"Warning":"Critical"})]})]})]}),e.jsx(W,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Queue Type"}),e.jsxs(V,{value:s.type,onValueChange:t=>o(a,"type",t),children:[e.jsx(E,{children:e.jsx(I,{})}),e.jsxs(T,{children:[e.jsx(u,{value:"standard",children:"Standard Queue"}),e.jsx(u,{value:"fifo",children:"FIFO Queue"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Region"}),e.jsx(d,{value:s.region,onChange:t=>o(a,"region",t.target.value),placeholder:"us-east-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Visibility Timeout (seconds)"}),e.jsx(d,{type:"number",value:s.visibilityTimeout,onChange:t=>o(a,"visibilityTimeout",Number(t.target.value)),min:0,max:43200}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time a message is hidden after being received"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Message Retention Period (days)"}),e.jsx(d,{type:"number",value:s.messageRetention,onChange:t=>o(a,"messageRetention",Number(t.target.value)),min:1,max:14}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"How long messages are kept (1-14 days)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Delivery Delay (seconds)"}),e.jsx(d,{type:"number",value:s.delaySeconds,onChange:t=>o(a,"delaySeconds",Number(t.target.value)),min:0,max:900}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delay before messages become available (0-900 seconds)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Dead Letter Queue"}),e.jsx(d,{value:s.deadLetterQueue||"",onChange:t=>o(a,"deadLetterQueue",t.target.value),placeholder:"dlq-name"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Queue for messages that fail processing"})]}),s.type==="fifo"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Max Receive Count"}),e.jsx(d,{type:"number",value:s.maxReceiveCount||3,onChange:t=>o(a,"maxReceiveCount",Number(t.target.value)),min:1,max:1e3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Messages moved to DLQ after this many receives"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Content-Based Deduplication"}),e.jsx(O,{checked:s.contentBasedDedup||!1,onCheckedChange:t=>o(a,"contentBasedDedup",t)})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically deduplicate messages by content hash"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"FIFO Throughput Limit"}),e.jsxs(V,{value:s.fifoThroughputLimit||"perQueue",onValueChange:t=>o(a,"fifoThroughputLimit",t),children:[e.jsx(E,{children:e.jsx(I,{})}),e.jsxs(T,{children:[e.jsx(u,{value:"perQueue",children:"Per Queue"}),e.jsx(u,{value:"perMessageGroupId",children:"Per Message Group ID"})]})]})]})]})]}),e.jsx(W,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Send Test Message"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{value:w,onChange:t=>B(t.target.value),placeholder:"Enter test message..."}),e.jsxs(N,{size:"sm",onClick:()=>re(a),disabled:!w,children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Send"]})]})]})]})]},a))})})]})}),e.jsx(R,{value:"credentials",className:"space-y-4",children:e.jsxs(m,{children:[e.jsxs(g,{children:[e.jsx(p,{children:"AWS Credentials"}),e.jsx(A,{children:"Configure AWS access credentials for SQS"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"accessKeyId",children:"Access Key ID"}),e.jsx(d,{id:"accessKeyId",value:Y,onChange:s=>c({accessKeyId:s.target.value}),placeholder:"AKIAIOSFODNN7EXAMPLE"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"secretAccessKey",children:"Secret Access Key"}),e.jsx(d,{id:"secretAccessKey",type:"password",value:J,onChange:s=>c({secretAccessKey:s.target.value}),placeholder:"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"defaultRegion",children:"Default Region"}),e.jsx(d,{id:"defaultRegion",value:k,onChange:s=>c({defaultRegion:s.target.value}),placeholder:"us-east-1"})]}),e.jsx("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[e.jsx("strong",{children:"Security Note:"})," In production, use IAM roles or environment variables instead of hardcoding credentials."]})})]})]})}),e.jsx(R,{value:"policies",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{children:"IAM Policies"}),e.jsx(A,{children:"Configure access policies for queues"})]}),e.jsxs(N,{onClick:te,size:"sm",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Policy"]})]})}),e.jsx(h,{children:v.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No policies configured"}):e.jsx("div",{className:"space-y-2",children:v.map(s=>e.jsx(m,{className:"border-l-4 border-l-blue-500",children:e.jsx(h,{className:"pt-4",children:ee===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Principal"}),e.jsx(d,{value:s.principal,onChange:a=>{const t=v.map(i=>i.id===s.id?{...i,principal:a.target.value}:i);c({iamPolicies:t})},placeholder:"* or arn:aws:iam::..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Action"}),e.jsxs(V,{value:s.action,onValueChange:a=>{const t=v.map(i=>i.id===s.id?{...i,action:a}:i);c({iamPolicies:t})},children:[e.jsx(E,{children:e.jsx(I,{})}),e.jsxs(T,{children:[e.jsx(u,{value:"sqs:SendMessage",children:"SendMessage"}),e.jsx(u,{value:"sqs:ReceiveMessage",children:"ReceiveMessage"}),e.jsx(u,{value:"sqs:DeleteMessage",children:"DeleteMessage"}),e.jsx(u,{value:"sqs:GetQueueAttributes",children:"GetQueueAttributes"}),e.jsx(u,{value:"sqs:*",children:"All Actions (*)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Resource"}),e.jsx(d,{value:s.resource,onChange:a=>{const t=v.map(i=>i.id===s.id?{...i,resource:a.target.value}:i);c({iamPolicies:t})},placeholder:"* or queue name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Effect"}),e.jsxs(V,{value:s.effect,onValueChange:a=>{const t=v.map(i=>i.id===s.id?{...i,effect:a}:i);c({iamPolicies:t})},children:[e.jsx(E,{children:e.jsx(I,{})}),e.jsxs(T,{children:[e.jsx(u,{value:"Allow",children:"Allow"}),e.jsx(u,{value:"Deny",children:"Deny"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{size:"sm",onClick:()=>K(null),children:"Save"}),e.jsx(N,{size:"sm",variant:"outline",onClick:()=>K(null),children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Principal"}),e.jsx("p",{className:"text-sm font-medium",children:s.principal})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Action"}),e.jsx(j,{variant:"outline",children:s.action})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Resource"}),e.jsx("p",{className:"text-sm font-medium truncate",title:s.resource,children:s.resource})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Effect"}),e.jsx(j,{variant:s.effect==="Allow"?"default":"destructive",children:s.effect})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>K(s.id),children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>ie(s.id),children:e.jsx(G,{className:"h-4 w-4"})})]})]})})},s.id))})})]})}),e.jsxs(R,{value:"monitoring",className:"space-y-4",children:[e.jsxs(m,{children:[e.jsxs(g,{children:[e.jsx(p,{children:"Queue Monitoring"}),e.jsx(A,{children:"Monitor queue metrics and performance"})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:n.map((s,a)=>e.jsxs(m,{className:"border-l-4 border-l-green-500",children:[e.jsx(g,{className:"pb-3",children:e.jsx(p,{className:"text-base",children:s.name})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Messages Available"}),(s.approximateMessages||0)>1e4&&e.jsx(j,{variant:"destructive",className:"text-xs",children:"High"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessages?.toLocaleString()||0}),e.jsx(b,{value:Math.min((s.approximateMessages||0)/5e4*100,100),className:`h-2 ${(s.approximateMessages||0)>1e4?"bg-red-500":(s.approximateMessages||0)>5e3?"bg-yellow-500":"bg-green-500"}`}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready to consume"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Flight"}),(s.approximateMessagesNotVisible||0)>1e3&&e.jsx(j,{variant:"outline",className:"text-xs",children:"Processing"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessagesNotVisible?.toLocaleString()||0}),e.jsx(b,{value:Math.min((s.approximateMessagesNotVisible||0)/2e3*100,100),className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being processed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delayed"}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessagesDelayed?.toLocaleString()||0}),e.jsx(b,{value:Math.min((s.approximateMessagesDelayed||0)/500*100,100),className:"h-2 bg-orange-500"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Waiting for delay"})]})]}),e.jsxs("div",{className:"mt-4 p-3 rounded-md border bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"bg-gray-400":(s.approximateMessages||0)<1e3?"bg-green-500 animate-pulse":(s.approximateMessages||0)<1e4?"bg-yellow-500":"bg-red-500 animate-pulse"}`}),e.jsx("span",{className:"text-sm font-medium",children:"Queue Health"})]}),e.jsx(j,{variant:(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"secondary":(s.approximateMessages||0)<1e3?"default":(s.approximateMessages||0)<1e4?"outline":"destructive",children:(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"Idle":(s.approximateMessages||0)<1e3?"Healthy":(s.approximateMessages||0)<1e4?"Warning":"Critical"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"Queue is idle with no messages":(s.approximateMessages||0)<1e3?"Queue is operating normally":(s.approximateMessages||0)<1e4?"Queue has high message count, consider scaling consumers":"Queue is critically overloaded, immediate action required"})]})]})]},a))})})]}),e.jsxs(m,{children:[e.jsxs(g,{children:[e.jsx(p,{children:"Metrics Export"}),e.jsx(A,{children:"Configure Prometheus metrics export via CloudWatch exporter"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Enable Metrics Export"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Export SQS metrics via CloudWatch exporter for Prometheus scraping"})]}),e.jsx(O,{checked:l.metrics?.enabled??!0,onCheckedChange:s=>c({metrics:{...l.metrics,enabled:s,port:l.metrics?.port||9102,path:l.metrics?.path||"/metrics"}})})]}),l.metrics?.enabled!==!1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Metrics Port (CloudWatch Exporter)"}),e.jsx(d,{type:"number",value:l.metrics?.port??9102,onChange:s=>c({metrics:{...l.metrics,port:parseInt(s.target.value)||9102,path:l.metrics?.path||"/metrics"}}),min:1024,max:65535}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Port for CloudWatch exporter metrics endpoint"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Metrics Path"}),e.jsx(d,{type:"text",value:l.metrics?.path??"/metrics",onChange:s=>c({metrics:{...l.metrics,path:s.target.value||"/metrics",port:l.metrics?.port||9102}}),placeholder:"/metrics"})]})]})]})]})]})]})]})})}export{we as AWSSQSConfigAdvanced};

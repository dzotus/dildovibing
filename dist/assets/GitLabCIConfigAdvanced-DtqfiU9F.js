import{u as T,j as s,B as r,i as j,c as N,S as v,C as a,e as t,f as n,k as l,T as A,a as B,b as g,N as G,A as U,d as p,h as d,P as z,m as J,L as F,I as X,aa as $,X as E,a9 as H}from"./index-CLbOuOtM.js";import{P as O}from"./progress-BUCrFV_U.js";import{G as V}from"./git-branch-StlVKlhC.js";import{C as b}from"./clock-DsRq4rhB.js";function Q({componentId:f}){const{nodes:C,updateNode:w}=T(),x=C.find(e=>e.id===f);if(!x)return s.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const i=x.data.config||{},y=i.projectUrl||"https://gitlab.com/archiphoenix/project",c=i.pipelines||[{id:"1",name:"main",status:"success",branch:"main",stages:4,duration:1250},{id:"2",name:"feature/auth",status:"running",branch:"feature/auth",stages:3},{id:"3",name:"develop",status:"failed",branch:"develop",stages:4,duration:890}],o=i.runners||[{id:"1",name:"docker-runner-1",status:"online",type:"shared",jobs:3},{id:"2",name:"kubernetes-runner",status:"online",type:"specific",jobs:1},{id:"3",name:"shell-runner-2",status:"offline",type:"shared",jobs:0}],P=i.activeJobs||c.filter(e=>e.status==="running").length,m=i.successRate||87.5,R=i.avgDuration||1050,u=e=>{w(f,{data:{...x.data,config:{...i,...e}}})},S=()=>{u({pipelines:[...c,{id:String(c.length+1),name:"new-pipeline",status:"pending",branch:"main",stages:3}]})},k=e=>{u({pipelines:c.filter((h,L)=>L!==e)})},D=e=>{switch(e){case"success":return s.jsx(H,{className:"h-4 w-4 text-green-500"});case"failed":return s.jsx(E,{className:"h-4 w-4 text-red-500"});case"running":return s.jsx($,{className:"h-4 w-4 text-blue-500 animate-spin"});case"pending":return s.jsx(b,{className:"h-4 w-4 text-yellow-500"});default:return s.jsx(b,{className:"h-4 w-4 text-muted-foreground"})}},I=e=>{switch(e){case"success":return s.jsx(r,{variant:"default",className:"bg-green-500",children:"Success"});case"failed":return s.jsx(r,{variant:"destructive",children:"Failed"});case"running":return s.jsx(r,{variant:"default",className:"bg-blue-500",children:"Running"});case"pending":return s.jsx(r,{variant:"secondary",children:"Pending"});default:return s.jsx(r,{variant:"secondary",children:"Unknown"})}};return s.jsx("div",{className:"h-full overflow-y-auto bg-background",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-orange-500/10",children:s.jsx(V,{className:"h-6 w-6 text-orange-500"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"GitLab CI/CD"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Continuous Integration & Deployment"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(r,{variant:"outline",className:"gap-2",children:[s.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),"Active"]}),s.jsxs(j,{size:"sm",variant:"outline",children:[s.jsx(N,{className:"h-4 w-4 mr-2"}),"Settings"]})]})]}),s.jsx(v,{}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs(a,{children:[s.jsx(t,{className:"pb-3",children:s.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Active Jobs"})}),s.jsxs(l,{children:[s.jsx("div",{className:"text-2xl font-bold",children:P}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Running pipelines"})]})]}),s.jsxs(a,{children:[s.jsx(t,{className:"pb-3",children:s.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"})}),s.jsxs(l,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[m,"%"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Last 30 days"})]})]}),s.jsxs(a,{children:[s.jsx(t,{className:"pb-3",children:s.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Avg Duration"})}),s.jsxs(l,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[R,"s"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pipeline time"})]})]}),s.jsxs(a,{children:[s.jsx(t,{className:"pb-3",children:s.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Runners"})}),s.jsxs(l,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[o.filter(e=>e.status==="online").length,"/",o.length]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Online"})]})]})]}),s.jsxs(A,{defaultValue:"pipelines",className:"w-full",children:[s.jsxs(B,{className:"grid w-full grid-cols-3",children:[s.jsxs(g,{value:"pipelines",className:"gap-2",children:[s.jsx(G,{className:"h-4 w-4"}),"Pipelines"]}),s.jsxs(g,{value:"runners",className:"gap-2",children:[s.jsx(U,{className:"h-4 w-4"}),"Runners"]}),s.jsxs(g,{value:"settings",className:"gap-2",children:[s.jsx(N,{className:"h-4 w-4"}),"Settings"]})]}),s.jsx(p,{value:"pipelines",className:"space-y-4 mt-4",children:s.jsxs(a,{children:[s.jsx(t,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(n,{children:"Pipelines"}),s.jsx(d,{children:"CI/CD pipeline status and history"})]}),s.jsxs(j,{size:"sm",onClick:S,variant:"outline",children:[s.jsx(z,{className:"h-4 w-4 mr-2"}),"New Pipeline"]})]})}),s.jsx(l,{children:s.jsx("div",{className:"space-y-3",children:c.map((e,h)=>s.jsx(a,{className:"border-border",children:s.jsx(t,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[D(e.status),s.jsxs("div",{children:[s.jsx(n,{className:"text-lg",children:e.name}),s.jsxs(d,{className:"text-xs mt-1",children:["Branch: ",e.branch," • ",e.stages," stages",e.duration&&` • ${e.duration}s`]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[I(e.status),c.length>1&&s.jsx(j,{size:"icon",variant:"ghost",onClick:()=>k(h),children:s.jsx(J,{className:"h-4 w-4"})})]})]})})},h))})})]})}),s.jsx(p,{value:"runners",className:"space-y-4 mt-4",children:s.jsxs(a,{children:[s.jsxs(t,{children:[s.jsx(n,{children:"CI/CD Runners"}),s.jsx(d,{children:"Runner configuration and status"})]}),s.jsx(l,{children:s.jsx("div",{className:"space-y-3",children:o.map(e=>s.jsx(a,{className:"border-border",children:s.jsx(t,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`h-3 w-3 rounded-full ${e.status==="online"?"bg-green-500":"bg-red-500"}`}),s.jsxs("div",{children:[s.jsx(n,{className:"text-lg",children:e.name}),s.jsxs(d,{className:"text-xs mt-1",children:[e.type," runner • ",e.jobs," active jobs"]})]})]}),s.jsx(r,{variant:e.status==="online"?"default":"secondary",children:e.status})]})})},e.id))})})]})}),s.jsx(p,{value:"settings",className:"space-y-4 mt-4",children:s.jsxs(a,{children:[s.jsxs(t,{children:[s.jsx(n,{children:"Project Configuration"}),s.jsx(d,{children:"GitLab project and CI/CD settings"})]}),s.jsxs(l,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(F,{htmlFor:"project-url",children:"Project URL"}),s.jsx(X,{id:"project-url",value:y,onChange:e=>u({projectUrl:e.target.value}),placeholder:"https://gitlab.com/user/project"})]}),s.jsx(v,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Success Rate"}),s.jsxs("span",{className:"font-semibold",children:[m,"%"]})]}),s.jsx(O,{value:m,className:"h-2"})]})]})]})})]})]})})}export{Q as GitLabCIConfigAdvanced};

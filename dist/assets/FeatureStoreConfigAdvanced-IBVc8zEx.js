import{u as Ge,a as Qe,j as e,e as We,r as h,l as f,S as ge,C as y,h as N,i as b,m as S,T as _e,b as Je,c as B,d as es,f as X,k as R,P as ve,O as ss,I as v,q as E,s as z,U as as,t as U,v as A,w as i,B as m,X as pe,o as fe,L as l,Z as ts,x as Y,D as ye,y as Ne,z as be,E as Se,G as Fe,H as Ce,n as W}from"./index-CK7lW0SB.js";import{T as we}from"./textarea-CJ0ebXZg.js";import{u as rs}from"./use-toast-CfMGnxqm.js";import{R as is}from"./refresh-ccw-DMpGPr4r.js";import{P as _}from"./package-DaqAxP6T.js";import{D as Z}from"./database-BZgG__3_.js";import{T as ns}from"./trending-up-BaN4sM_9.js";import{S as ls}from"./server-DI_4Rn6N.js";import{R as J,C as ee,X as se,Y as ae,T as te,P as re,L as cs,a as Te}from"./LineChart-Bm-L2_Xu.js";import{A as ke,a as ie}from"./AreaChart-DRIXfz0i.js";function Ns({componentId:$}){const{nodes:Le,updateNode:De}=Ge(),{getComponentMetrics:Ve}=Qe(),{toast:k}=rs(),F=Le.find(s=>s.id===$);if(!F)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const c=We.getFeatureStoreEmulationEngine($),D=Ve($)?.customMetrics||{},d=F.data.config||{};h.useEffect(()=>{c&&F&&c.initializeConfig(F)},[F.id,JSON.stringify(F.data.config),c]);const I=c?.getFeatures()||[],ne=d.features||[],g=h.useMemo(()=>I.length>0?I.map(s=>({name:s.name,version:s.version,type:s.type,description:s.description,dataType:s.dataType,defaultValue:s.defaultValue,tags:s.tags||[],usage:s.usageCount})):ne,[I,ne]),C=d.featureSets||[],w=c?.getMetrics(),Re=w?.totalFeatures??d.totalFeatures??g.length,Ee=w?.totalFeatureSets??d.totalFeatureSets??C.length,ze=w?.totalFeatureUsage??d.totalUsage??g.reduce((s,t)=>s+(t.usage||0),0),le=w?.requestsPerSecond??D.requestsPerSecond??0,ce=w?.averageLatency??D.averageLatency??0,Ue=w?.errorRate??D.errorRate??0,de=w?.cacheHitRate??D.cacheHitRate??0,Ae=w?.onlineStoreUtilization??D.onlineStoreUtilization??0,Oe=w?.offlineStoreUtilization??D.offlineStoreUtilization??0,G=c?.getMetricsHistory()||[],H=h.useMemo(()=>G.length===0?[]:G.map(s=>({time:new Date(s.timestamp).toLocaleTimeString(),timestamp:s.timestamp,latency:s.latency,rps:s.rps,throughput:s.throughput,errorRate:s.errorRate*100,cacheHitRate:s.cacheHitRate*100})),[G]),[qe,P]=h.useState(!1),[Me,K]=h.useState(!1),[o,oe]=h.useState(null),[x,xe]=h.useState(null),[L,$e]=h.useState(""),[O,He]=h.useState("all"),[a,T]=h.useState({name:"",version:"1.0",type:"numerical",dataType:"float64",tags:[],description:""}),[os,ue]=h.useState({}),[n,V]=h.useState({name:"",version:"1.0",features:[],description:""}),[u,q]=h.useState({}),M=s=>{const t={...d,...s};if(De($,{data:{...F.data,config:t}}),c){const r={...F,data:{...F.data,config:t}};c.initializeConfig(r)}k({title:"Configuration updated",description:"Feature Store configuration has been saved."})},me=h.useMemo(()=>g.filter(s=>{const t=!L||s.name.toLowerCase().includes(L.toLowerCase())||s.description?.toLowerCase().includes(L.toLowerCase())||s.tags?.some(j=>j.toLowerCase().includes(L.toLowerCase())),r=O==="all"||s.type===O;return t&&r}),[g,L,O]),he=s=>{s?(oe(s),T({name:s.name,version:s.version,type:s.type,dataType:s.dataType,defaultValue:s.defaultValue,tags:s.tags||[],description:s.description||""})):(oe(null),T({name:"",version:"1.0",type:"numerical",dataType:"float64",tags:[],description:""})),ue({}),P(!0)},Pe=()=>{const s={};if(!a.name||a.name.trim()===""?s.name="Feature name is required":/^[a-zA-Z0-9_-]+$/.test(a.name)||(s.name="Feature name can only contain letters, numbers, underscores, and hyphens"),!a.version||a.version.trim()===""?s.version="Version is required":/^[0-9]+\.[0-9]+(\.[0-9]+)?$/.test(a.version)||(s.version="Version must be in format X.Y or X.Y.Z (e.g., 1.0, 1.2.3)"),!a.dataType||a.dataType.trim()==="")s.dataType="Data type is required";else{const t=["int","int32","int64","float","float32","float64","double","string","bool","boolean"];if(!t.includes(a.dataType.toLowerCase()))s.dataType=`Data type must be one of: ${t.join(", ")}`;else{const r=["int","int32","int64","float","float32","float64","double"],j=["string"];a.type==="numerical"&&!r.includes(a.dataType.toLowerCase())?s.dataType="Numerical features require numeric data types (int, float, double, etc.)":a.type==="categorical"&&!j.includes(a.dataType.toLowerCase())&&!r.includes(a.dataType.toLowerCase())?s.dataType="Categorical features require string or numeric data types":a.type==="embedding"&&!r.includes(a.dataType.toLowerCase())?s.dataType="Embedding features require numeric data types (float64, float32)":a.type==="timestamp"&&!r.includes(a.dataType.toLowerCase())&&!j.includes(a.dataType.toLowerCase())&&(s.dataType="Timestamp features require numeric (int64) or string data types")}}return o?g.some(r=>r.name===a.name&&r.version===a.version&&!(r.name===o.name&&r.version===o.version))&&(s.name="A feature with this name and version already exists"):g.some(r=>r.name===a.name&&r.version===a.version)&&(s.name="A feature with this name and version already exists"),ue(s),Object.keys(s).length===0},Ke=()=>{if(!Pe()){k({title:"Validation error",description:"Please fix the errors in the form.",variant:"destructive"});return}const s=o?g.map(t=>t.name===o.name&&t.version===o.version?{...a,usage:t.usage}:t):[...g,{...a,usage:0}];M({features:s}),c&&(o&&c.removeFeature(o.name,o.version),c.addFeature({name:a.name,version:a.version,type:a.type,dataType:a.dataType,defaultValue:a.defaultValue,tags:a.tags||[],status:"active",description:a.description})),P(!1),k({title:o?"Feature updated":"Feature created",description:`Feature ${a.name} has been ${o?"updated":"created"}.`})},Be=(s,t)=>{M({features:g.filter(r=>!(r.name===s&&r.version===t))}),c&&c.removeFeature(s,t),k({title:"Feature removed",description:`Feature ${s} v${t} has been removed.`})},je=s=>{s?(xe(s),V({name:s.name,version:s.version,features:s.features||[],description:s.description||""})):(xe(null),V({name:"",version:"1.0",features:[],description:""})),q({}),K(!0)},Xe=()=>{const s={};if(!n.name||n.name.trim()===""?s.name="Feature Set name is required":/^[a-zA-Z0-9_-]+$/.test(n.name)||(s.name="Feature Set name can only contain letters, numbers, underscores, and hyphens"),!n.version||n.version.trim()===""?s.version="Version is required":/^[0-9]+\.[0-9]+(\.[0-9]+)?$/.test(n.version)||(s.version="Version must be in format X.Y or X.Y.Z (e.g., 1.0, 1.2.3)"),!n.features||n.features.length===0)s.features="At least one feature is required";else{const t=n.features.filter(r=>!g.some(j=>j.name===r));t.length>0&&(s.features=`Features not found: ${t.join(", ")}`)}return x?C.some(r=>r.name===n.name&&r.version===n.version&&!(r.name===x.name&&r.version===x.version))&&(s.name="A feature set with this name and version already exists"):C.some(r=>r.name===n.name&&r.version===n.version)&&(s.name="A feature set with this name and version already exists"),q(s),Object.keys(s).length===0},Ye=()=>{if(!Xe()){k({title:"Validation error",description:"Please fix the errors in the form.",variant:"destructive"});return}const s=x?C.map(t=>t.name===x.name&&t.version===x.version?{...n,usage:t.usage,createdAt:t.createdAt}:t):[...C,{...n,usage:0,createdAt:new Date().toISOString()}];M({featureSets:s}),c&&(x&&c.removeFeatureSet(x.name,x.version),c.addFeatureSet({name:n.name,version:n.version,features:n.features||[],description:n.description})),K(!1),k({title:x?"Feature Set updated":"Feature Set created",description:`Feature Set ${n.name} has been ${x?"updated":"created"}.`})},Ze=(s,t)=>{M({featureSets:C.filter(r=>!(r.name===s&&r.version===t))}),c&&c.removeFeatureSet(s,t),k({title:"Feature Set removed",description:`Feature Set ${s} v${t} has been removed.`})},Ie=()=>{c&&c.initializeConfig(F),k({title:"Refreshed",description:"Feature Store data has been refreshed."})},p=(s,t)=>{M({[s]:t})};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Feature Store"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Feature Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Centralized repository for machine learning features"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(f,{variant:"outline",size:"sm",onClick:Ie,children:[e.jsx(is,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(ge,{}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(y,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium text-muted-foreground",children:"Features"}),e.jsx(_,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:Re}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"registered"})]})})]}),e.jsxs(y,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium text-muted-foreground",children:"Feature Sets"}),e.jsx(Z,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Ee}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"defined"})]})})]}),e.jsxs(y,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium text-muted-foreground",children:"Total Usage"}),e.jsx(ns,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:ze.toLocaleString()}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"requests"})]})})]})]}),e.jsxs(_e,{defaultValue:"features",className:"space-y-4",children:[e.jsxs(Je,{className:"flex-wrap",children:[e.jsxs(B,{value:"features",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Features (",g.length,")"]}),e.jsxs(B,{value:"feature-sets",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Feature Sets (",C.length,")"]}),e.jsxs(B,{value:"serving",children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Serving"]}),e.jsxs(B,{value:"settings",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(X,{value:"features",className:"space-y-4",children:e.jsxs(y,{children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Features"}),e.jsx(R,{children:"Registered features in the store"})]}),e.jsxs(f,{onClick:()=>he(),size:"sm",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Create Feature"]})]})}),e.jsxs(S,{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Search features...",value:L,onChange:s=>$e(s.target.value),className:"pl-10"})]}),e.jsxs(E,{value:O,onValueChange:He,children:[e.jsxs(z,{className:"w-[180px]",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),e.jsx(U,{})]}),e.jsxs(A,{children:[e.jsx(i,{value:"all",children:"All Types"}),e.jsx(i,{value:"numerical",children:"Numerical"}),e.jsx(i,{value:"categorical",children:"Categorical"}),e.jsx(i,{value:"embedding",children:"Embedding"}),e.jsx(i,{value:"timestamp",children:"Timestamp"})]})]})]}),e.jsx("div",{className:"space-y-4",children:me.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:L||O!=="all"?"No features match your filters":"No features registered yet"}):me.map(s=>{const r=c?.getFeature(s.name,s.version)?.usageCount??s.usage??0;return e.jsxs(y,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(_,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(b,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(m,{variant:"outline",children:["v",s.version]}),e.jsx(m,{variant:"outline",children:s.type}),e.jsx(m,{variant:"outline",children:s.dataType}),r>0&&e.jsxs(m,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300",children:[r," uses"]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>he(s),className:"hover:bg-blue-50 dark:hover:bg-blue-950/20",children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>Be(s.name,s.version),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(fe,{className:"h-4 w-4"})})]})]})}),e.jsxs(S,{children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),s.defaultValue!==void 0&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Default:"}),e.jsx("span",{className:"ml-2 font-mono",children:String(s.defaultValue)})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.tags.map((j,Q)=>e.jsx(m,{variant:"outline",className:"text-xs",children:j},Q))})]})]},`${s.name}-${s.version}`)})})]})]})}),e.jsx(X,{value:"feature-sets",className:"space-y-4",children:e.jsxs(y,{children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Feature Sets"}),e.jsx(R,{children:"Grouped collections of features"})]}),e.jsxs(f,{onClick:()=>je(),size:"sm",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Create Feature Set"]})]})}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:C.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No feature sets defined yet"}):C.map(s=>{const r=c?.getFeatureSets().find(j=>j.name===s.name&&j.version===s.version)?.usageCount??s.usage??0;return e.jsxs(y,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/30",children:e.jsx(Z,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx(b,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(m,{variant:"outline",children:["v",s.version]}),e.jsxs(m,{variant:"outline",children:[s.features.length," features"]}),r>0&&e.jsxs(m,{variant:"outline",className:"bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300",children:[r," uses"]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>je(s),className:"hover:bg-green-50 dark:hover:bg-green-950/20",children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>Ze(s.name,s.version),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(fe,{className:"h-4 w-4"})})]})]})}),e.jsxs(S,{children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{className:"text-xs",children:"Features:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.features.length===0?e.jsx("span",{className:"text-xs text-muted-foreground",children:"No features"}):s.features.map((j,Q)=>e.jsx(m,{variant:"outline",className:"text-xs",children:j},Q))})]}),s.createdAt&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Created: ",new Date(s.createdAt).toLocaleString()]})]})]},`${s.name}-${s.version}`)})})})]})}),e.jsxs(X,{value:"serving",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(y,{children:[e.jsxs(N,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-5 w-5 text-yellow-500"}),"Online Serving"]}),e.jsx(R,{children:"Low-latency feature serving"})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Status"}),e.jsx(m,{variant:d.enableOnlineServing!==!1?"default":"secondary",children:d.enableOnlineServing!==!1?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Store Type"}),e.jsxs(E,{value:d.onlineStoreType||"redis",onValueChange:s=>p("onlineStoreType",s),children:[e.jsx(z,{children:e.jsx(U,{})}),e.jsxs(A,{children:[e.jsx(i,{value:"redis",children:"Redis"}),e.jsx(i,{value:"dynamodb",children:"DynamoDB"}),e.jsx(i,{value:"cassandra",children:"Cassandra"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Store URL"}),e.jsx(v,{value:d.onlineStoreUrl||"redis://localhost:6379",onChange:s=>p("onlineStoreUrl",s.target.value),placeholder:"redis://localhost:6379"})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Utilization"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(Ae*100),"%"]})]})]})]}),e.jsxs(y,{children:[e.jsxs(N,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-blue-500"}),"Offline Serving"]}),e.jsx(R,{children:"Batch feature serving"})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Status"}),e.jsx(m,{variant:d.enableOfflineServing!==!1?"default":"secondary",children:d.enableOfflineServing!==!1?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Store Type"}),e.jsxs(E,{value:d.offlineStoreType||"snowflake",onValueChange:s=>p("offlineStoreType",s),children:[e.jsx(z,{children:e.jsx(U,{})}),e.jsxs(A,{children:[e.jsx(i,{value:"snowflake",children:"Snowflake"}),e.jsx(i,{value:"bigquery",children:"BigQuery"}),e.jsx(i,{value:"redshift",children:"Redshift"})]})]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Utilization"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(Oe*100),"%"]})]})]})]})]}),e.jsxs(y,{children:[e.jsxs(N,{children:[e.jsx(b,{children:"Performance Metrics"}),e.jsx(R,{children:"Real-time serving performance"})]}),e.jsxs(S,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Requests/sec"}),e.jsx("div",{className:"text-2xl font-bold",children:le.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Latency"}),e.jsxs("div",{className:"text-2xl font-bold",children:[ce.toFixed(1),"ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Cache Hit Rate"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(de*100),"%"]})]})]}),H.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No metrics data available yet. Metrics will appear as requests are processed."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-base font-semibold",children:"Latency Over Time"}),e.jsxs(m,{variant:"outline",children:[ce.toFixed(0),"ms avg"]})]}),e.jsx("div",{className:"h-64",children:e.jsx(J,{width:"100%",height:"100%",children:e.jsxs(ke,{data:H,children:[e.jsx(ee,{strokeDasharray:"3 3"}),e.jsx(se,{dataKey:"time"}),e.jsx(ae,{label:{value:"Latency (ms)",angle:-90,position:"insideLeft"}}),e.jsx(te,{}),e.jsx(re,{}),e.jsx(ie,{type:"monotone",dataKey:"latency",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.3,name:"Latency (ms)"})]})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-base font-semibold",children:"Throughput Over Time"}),e.jsxs(m,{variant:"outline",children:[le.toFixed(1)," req/s"]})]}),e.jsx("div",{className:"h-64",children:e.jsx(J,{width:"100%",height:"100%",children:e.jsxs(cs,{data:H,children:[e.jsx(ee,{strokeDasharray:"3 3"}),e.jsx(se,{dataKey:"time"}),e.jsx(ae,{label:{value:"Requests/sec",angle:-90,position:"insideLeft"}}),e.jsx(te,{}),e.jsx(re,{}),e.jsx(Te,{type:"monotone",dataKey:"rps",stroke:"#82ca9d",strokeWidth:2,name:"Requests/sec"}),e.jsx(Te,{type:"monotone",dataKey:"throughput",stroke:"#ffc658",strokeWidth:2,name:"Throughput"})]})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-base font-semibold",children:"Error Rate & Cache Hit Rate"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",className:"bg-red-50 dark:bg-red-950/20 text-red-700 dark:text-red-300",children:[Math.round(Ue*100),"% errors"]}),e.jsxs(m,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300",children:[Math.round(de*100),"% cache hits"]})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(J,{width:"100%",height:"100%",children:e.jsxs(ke,{data:H,children:[e.jsx(ee,{strokeDasharray:"3 3"}),e.jsx(se,{dataKey:"time"}),e.jsx(ae,{label:{value:"Percentage (%)",angle:-90,position:"insideLeft"}}),e.jsx(te,{}),e.jsx(re,{}),e.jsx(ie,{type:"monotone",dataKey:"errorRate",stroke:"#ff7300",fill:"#ff7300",fillOpacity:.3,name:"Error Rate (%)"}),e.jsx(ie,{type:"monotone",dataKey:"cacheHitRate",stroke:"#00ff00",fill:"#00ff00",fillOpacity:.3,name:"Cache Hit Rate (%)"})]})})})]})]})]})]})]}),e.jsx(X,{value:"settings",className:"space-y-4",children:e.jsxs(y,{children:[e.jsxs(N,{children:[e.jsx(b,{children:"Feature Store Settings"}),e.jsx(R,{children:"Store configuration"})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable Versioning"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Track feature versions"})]}),e.jsx(Y,{checked:d.enableVersioning!==!1,onCheckedChange:s=>p("enableVersioning",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable Feature Validation"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Validate feature values"})]}),e.jsx(Y,{checked:d.enableFeatureValidation!==!1,onCheckedChange:s=>p("enableFeatureValidation",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable Usage Tracking"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Track feature usage statistics"})]}),e.jsx(Y,{checked:d.enableUsageTracking!==!1,onCheckedChange:s=>p("enableUsageTracking",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable Caching"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Cache feature values for faster access"})]}),e.jsx(Y,{checked:d.enableCaching!==!1,onCheckedChange:s=>p("enableCaching",s)})]}),e.jsx(ge,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Feature Store Type"}),e.jsxs(E,{value:d.featureStoreType||"feast",onValueChange:s=>p("featureStoreType",s),children:[e.jsx(z,{children:e.jsx(U,{})}),e.jsxs(A,{children:[e.jsx(i,{value:"feast",children:"Feast"}),e.jsx(i,{value:"tecton",children:"Tecton"}),e.jsx(i,{value:"hopsworks",children:"Hopsworks"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Default Feature TTL (days)"}),e.jsx(v,{type:"number",value:d.defaultTTL||30,onChange:s=>p("defaultTTL",parseInt(s.target.value)||30),min:1,max:365})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Cache Size (MB)"}),e.jsx(v,{type:"number",value:d.cacheSize||100,onChange:s=>p("cacheSize",parseInt(s.target.value)||100),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Cache TTL (seconds)"}),e.jsx(v,{type:"number",value:d.cacheTtl||3600,onChange:s=>p("cacheTtl",parseInt(s.target.value)||3600),min:1})]})]})]})})]}),e.jsx(ye,{open:qe,onOpenChange:P,children:e.jsxs(Ne,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(be,{children:[e.jsx(Se,{children:o?"Edit Feature":"Create Feature"}),e.jsx(Fe,{children:o?"Update feature configuration":"Add a new feature to the store"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Feature Name *"}),e.jsx(v,{value:a.name,onChange:s=>T({...a,name:s.target.value}),placeholder:"user-age",disabled:!!o})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Version *"}),e.jsx(v,{value:a.version,onChange:s=>T({...a,version:s.target.value}),placeholder:"1.0",disabled:!!o})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Type *"}),e.jsxs(E,{value:a.type,onValueChange:s=>{let t="float64";s==="categorical"?t="string":s==="embedding"?t="float64":s==="timestamp"&&(t="int64"),T({...a,type:s,dataType:t})},children:[e.jsx(z,{children:e.jsx(U,{})}),e.jsxs(A,{children:[e.jsx(i,{value:"numerical",children:"Numerical"}),e.jsx(i,{value:"categorical",children:"Categorical"}),e.jsx(i,{value:"embedding",children:"Embedding"}),e.jsx(i,{value:"timestamp",children:"Timestamp"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Data Type *"}),e.jsxs(E,{value:a.dataType,onValueChange:s=>T({...a,dataType:s}),children:[e.jsx(z,{children:e.jsx(U,{placeholder:"Select data type"})}),e.jsxs(A,{children:[a.type==="numerical"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{value:"float64",children:"float64"}),e.jsx(i,{value:"float32",children:"float32"}),e.jsx(i,{value:"double",children:"double"}),e.jsx(i,{value:"int64",children:"int64"}),e.jsx(i,{value:"int32",children:"int32"}),e.jsx(i,{value:"int",children:"int"})]}),a.type==="categorical"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{value:"string",children:"string"}),e.jsx(i,{value:"int64",children:"int64 (label encoding)"})]}),a.type==="embedding"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{value:"float64",children:"float64 (array)"}),e.jsx(i,{value:"float32",children:"float32 (array)"})]}),a.type==="timestamp"&&e.jsxs(e.Fragment,{children:[e.jsx(i,{value:"int64",children:"int64 (Unix timestamp)"}),e.jsx(i,{value:"string",children:"string (ISO 8601)"})]}),!a.type&&e.jsxs(e.Fragment,{children:[e.jsx(i,{value:"float64",children:"float64"}),e.jsx(i,{value:"float32",children:"float32"}),e.jsx(i,{value:"int64",children:"int64"}),e.jsx(i,{value:"int32",children:"int32"}),e.jsx(i,{value:"int",children:"int"}),e.jsx(i,{value:"string",children:"string"}),e.jsx(i,{value:"bool",children:"bool"}),e.jsx(i,{value:"boolean",children:"boolean"})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.type==="numerical"&&"Numeric data types for continuous values",a.type==="categorical"&&"String for categories or int64 for label encoding",a.type==="embedding"&&"Floating point arrays for vector representations",a.type==="timestamp"&&"Numeric or string format for time values",!a.type&&"Select feature type first"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Description"}),e.jsx(we,{value:a.description||"",onChange:s=>T({...a,description:s.target.value}),placeholder:"Feature description...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Default Value"}),e.jsx(v,{value:a.defaultValue!==void 0?String(a.defaultValue):"",onChange:s=>T({...a,defaultValue:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Tags (comma-separated)"}),e.jsx(v,{value:a.tags?.join(", ")||"",onChange:s=>T({...a,tags:s.target.value.split(",").map(t=>t.trim()).filter(t=>t)}),placeholder:"ml, production, user"})]})]}),e.jsxs(Ce,{children:[e.jsx(f,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(f,{onClick:Ke,children:o?"Update":"Create"})]})]})}),e.jsx(ye,{open:Me,onOpenChange:K,children:e.jsxs(Ne,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(be,{children:[e.jsx(Se,{children:x?"Edit Feature Set":"Create Feature Set"}),e.jsx(Fe,{children:x?"Update feature set configuration":"Create a new feature set"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Feature Set Name *"}),e.jsx(v,{value:n.name,onChange:s=>{V({...n,name:s.target.value}),u.name&&q({...u,name:""})},placeholder:"user-features",disabled:!!x,className:u.name?"border-destructive":""}),u.name&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"}),u.name]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Version *"}),e.jsx(v,{value:n.version,onChange:s=>{V({...n,version:s.target.value}),u.version&&q({...u,version:""})},placeholder:"1.0",disabled:!!x,className:u.version?"border-destructive":""}),u.version&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"}),u.version]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Description"}),e.jsx(we,{value:n.description||"",onChange:s=>V({...n,description:s.target.value}),placeholder:"Feature set description...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Features (comma-separated feature names) *"}),e.jsx(v,{value:n.features?.join(", ")||"",onChange:s=>{V({...n,features:s.target.value.split(",").map(t=>t.trim()).filter(t=>t)}),u.features&&q({...u,features:""})},placeholder:"user-age, user-score, user-category",className:u.features?"border-destructive":""}),u.features&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"}),u.features]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available features: ",g.map(s=>s.name).join(", ")||"None"]})]})]}),e.jsxs(Ce,{children:[e.jsx(f,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),e.jsx(f,{onClick:Ye,children:x?"Update":"Create"})]})]})})]})})}export{Ns as FeatureStoreConfigAdvanced};

import{K as ea,b8 as ie,b9 as k,b7 as Pt,r as O,u as tt,a as Me,j as e,B as Y,l as L,al as ta,am as aa,an as sa,aA as Ze,C as F,h as B,i as K,m as M,S as lt,k as H,q as ae,s as se,t as re,v as ne,w as S,T as ra,b as na,c as Ne,D as ct,a6 as ot,d as ia,f as Ae,L as E,I as Q,P as we,o as _e,x as Ue,ai as la,y as ca,z as oa,E as da,G as ua,bb as ha}from"./index-DCOdhwlJ.js";import{O as ma}from"./profiles-BYwWLXF9.js";import{C as J}from"./chart-column-BwFPc5RK.js";import{f as $,s as kt,t as fa,v as Ct,w as pa,n as de,x as at,y as ee,c as W,z as St,B as st,E as _t,D as xa,d as va,g as ve,o as me,S as ga,A as ja,F as ya,e as dt,j as ba,i as fe,l as Na,u as Aa,G as wa,H as De,I as Pa,J as rt,K as ka,M as Oe,N as ut,q as Ca,O as Sa,R as Te,T as Re,L as Ot,P as Dt,b as Et,C as Tt,X as Rt,Y as Lt,a as It}from"./LineChart-CAlQSQEq.js";import{B as $t}from"./BarChart-BAnL8AOn.js";import{T as _a}from"./textarea-DZHYvQNj.js";const Oa=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Da=ea("link",Oa);var Ea=["points","className","baseLinePoints","connectNulls"];function pe(){return pe=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},pe.apply(this,arguments)}function Ta(s,t){if(s==null)return{};var r=Ra(s,t),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(n=0;n<i.length;n++)a=i[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Ra(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function ht(s){return Ma(s)||$a(s)||Ia(s)||La()}function La(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ia(s,t){if(s){if(typeof s=="string")return Xe(s,t);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xe(s,t)}}function $a(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Ma(s){if(Array.isArray(s))return Xe(s)}function Xe(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=s[r];return a}var mt=function(t){return t&&t.x===+t.x&&t.y===+t.y},Fa=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(a){mt(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),mt(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Pe=function(t,r){var a=Fa(t);r&&(a=[a.reduce(function(i,c){return[].concat(ht(i),ht(c))},[])]);var n=a.map(function(i){return i.reduce(function(c,v,g){return"".concat(c).concat(g===0?"M":"L").concat(v.x,",").concat(v.y)},"")}).join("");return a.length===1?"".concat(n,"Z"):n},Ba=function(t,r,a){var n=Pe(t,a);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(Pe(r.reverse(),a).slice(1))},Ka=function(t){var r=t.points,a=t.className,n=t.baseLinePoints,i=t.connectNulls,c=Ta(t,Ea);if(!r||!r.length)return null;var v=ie("recharts-polygon",a);if(n&&n.length){var g=c.stroke&&c.stroke!=="none",u=Ba(r,n,i);return k.createElement("g",{className:v},k.createElement("path",pe({},$(c,!0),{fill:u.slice(-1)==="Z"?c.fill:"none",stroke:"none",d:u})),g?k.createElement("path",pe({},$(c,!0),{fill:"none",d:Pe(r,i)})):null,g?k.createElement("path",pe({},$(c,!0),{fill:"none",d:Pe(n,i)})):null)}var f=Pe(r,i);return k.createElement("path",pe({},$(c,!0),{fill:f.slice(-1)==="Z"?c.fill:"none",className:v,d:f}))},He,ft;function Va(){if(ft)return He;ft=1;var s=kt(),t=fa(),r=Ct();function a(n,i){return n&&n.length?s(n,r(i,2),t):void 0}return He=a,He}var za=Va();const Qa=Pt(za);var We,pt;function Ga(){if(pt)return We;pt=1;var s=kt(),t=Ct(),r=pa();function a(n,i){return n&&n.length?s(n,t(i,2),r):void 0}return We=a,We}var qa=Ga();const Ua=Pt(qa);var Ha=["cx","cy","angle","ticks","axisLine"],Wa=["ticks","tick","angle","tickFormatter","stroke"];function ge(s){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(s)}function ke(){return ke=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ke.apply(this,arguments)}function xt(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function ce(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xt(Object(r),!0).forEach(function(a){Fe(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function vt(s,t){if(s==null)return{};var r=Za(s,t),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(n=0;n<i.length;n++)a=i[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Za(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function Xa(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(s,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,Ft(a.key),a)}}function Ya(s,t,r){return t&&gt(s.prototype,t),r&&gt(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function Ja(s,t,r){return t=Le(t),es(s,Mt()?Reflect.construct(t,r||[],Le(s).constructor):t.apply(s,r))}function es(s,t){if(t&&(ge(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ts(s)}function ts(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Mt(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mt=function(){return!!s})()}function Le(s){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Le(s)}function as(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&Ye(s,t)}function Ye(s,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Ye(s,t)}function Fe(s,t,r){return t=Ft(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Ft(s){var t=ss(s,"string");return ge(t)=="symbol"?t:t+""}function ss(s,t){if(ge(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(ge(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var Be=(function(s){function t(){return Xa(this,t),Ja(this,t,arguments)}return as(t,s),Ya(t,[{key:"getTickValueCoord",value:function(a){var n=a.coordinate,i=this.props,c=i.angle,v=i.cx,g=i.cy;return ee(v,g,n,c)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,n;switch(a){case"left":n="end";break;case"right":n="start";break;default:n="middle";break}return n}},{key:"getViewBox",value:function(){var a=this.props,n=a.cx,i=a.cy,c=a.angle,v=a.ticks,g=Qa(v,function(f){return f.coordinate||0}),u=Ua(v,function(f){return f.coordinate||0});return{cx:n,cy:i,startAngle:c,endAngle:c,innerRadius:u.coordinate||0,outerRadius:g.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,n=a.cx,i=a.cy,c=a.angle,v=a.ticks,g=a.axisLine,u=vt(a,Ha),f=v.reduce(function(p,h){return[Math.min(p[0],h.coordinate),Math.max(p[1],h.coordinate)]},[1/0,-1/0]),x=ee(n,i,f[0],c),o=ee(n,i,f[1],c),y=ce(ce(ce({},$(u,!1)),{},{fill:"none"},$(g,!1)),{},{x1:x.x,y1:x.y,x2:o.x,y2:o.y});return k.createElement("line",ke({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var a=this,n=this.props,i=n.ticks,c=n.tick,v=n.angle,g=n.tickFormatter,u=n.stroke,f=vt(n,Wa),x=this.getTickTextAnchor(),o=$(f,!1),y=$(c,!1),p=i.map(function(h,N){var A=a.getTickValueCoord(h),d=ce(ce(ce(ce({textAnchor:x,transform:"rotate(".concat(90-v,", ").concat(A.x,", ").concat(A.y,")")},o),{},{stroke:"none",fill:u},y),{},{index:N},A),{},{payload:h});return k.createElement(W,ke({className:ie("recharts-polar-radius-axis-tick",St(c)),key:"tick-".concat(h.coordinate)},st(a.props,h,N)),t.renderTickItem(c,d,g?g(h.value,N):h.value))});return k.createElement(W,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var a=this.props,n=a.ticks,i=a.axisLine,c=a.tick;return!n||!n.length?null:k.createElement(W,{className:ie("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),c&&this.renderTicks(),_t.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,n,i){var c;return k.isValidElement(a)?c=k.cloneElement(a,n):de(a)?c=a(n):c=k.createElement(at,ke({},n,{className:"recharts-polar-radius-axis-tick-value"}),i),c}}])})(O.PureComponent);Fe(Be,"displayName","PolarRadiusAxis");Fe(Be,"axisType","radiusAxis");Fe(Be,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function je(s){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(s)}function ue(){return ue=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ue.apply(this,arguments)}function jt(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function oe(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jt(Object(r),!0).forEach(function(a){Ke(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function rs(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(s,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,Kt(a.key),a)}}function ns(s,t,r){return t&&yt(s.prototype,t),r&&yt(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function is(s,t,r){return t=Ie(t),ls(s,Bt()?Reflect.construct(t,r||[],Ie(s).constructor):t.apply(s,r))}function ls(s,t){if(t&&(je(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cs(s)}function cs(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Bt(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bt=function(){return!!s})()}function Ie(s){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ie(s)}function os(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&Je(s,t)}function Je(s,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Je(s,t)}function Ke(s,t,r){return t=Kt(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Kt(s){var t=ds(s,"string");return je(t)=="symbol"?t:t+""}function ds(s,t){if(je(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(je(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var us=Math.PI/180,bt=1e-5,Ve=(function(s){function t(){return rs(this,t),is(this,t,arguments)}return os(t,s),ns(t,[{key:"getTickLineCoord",value:function(a){var n=this.props,i=n.cx,c=n.cy,v=n.radius,g=n.orientation,u=n.tickSize,f=u||8,x=ee(i,c,v,a.coordinate),o=ee(i,c,v+(g==="inner"?-1:1)*f,a.coordinate);return{x1:x.x,y1:x.y,x2:o.x,y2:o.y}}},{key:"getTickTextAnchor",value:function(a){var n=this.props.orientation,i=Math.cos(-a.coordinate*us),c;return i>bt?c=n==="outer"?"start":"end":i<-bt?c=n==="outer"?"end":"start":c="middle",c}},{key:"renderAxisLine",value:function(){var a=this.props,n=a.cx,i=a.cy,c=a.radius,v=a.axisLine,g=a.axisLineType,u=oe(oe({},$(this.props,!1)),{},{fill:"none"},$(v,!1));if(g==="circle")return k.createElement(xa,ue({className:"recharts-polar-angle-axis-line"},u,{cx:n,cy:i,r:c}));var f=this.props.ticks,x=f.map(function(o){return ee(n,i,c,o.coordinate)});return k.createElement(Ka,ue({className:"recharts-polar-angle-axis-line"},u,{points:x}))}},{key:"renderTicks",value:function(){var a=this,n=this.props,i=n.ticks,c=n.tick,v=n.tickLine,g=n.tickFormatter,u=n.stroke,f=$(this.props,!1),x=$(c,!1),o=oe(oe({},f),{},{fill:"none"},$(v,!1)),y=i.map(function(p,h){var N=a.getTickLineCoord(p),A=a.getTickTextAnchor(p),d=oe(oe(oe({textAnchor:A},f),{},{stroke:"none",fill:u},x),{},{index:h,payload:p,x:N.x2,y:N.y2});return k.createElement(W,ue({className:ie("recharts-polar-angle-axis-tick",St(c)),key:"tick-".concat(p.coordinate)},st(a.props,p,h)),v&&k.createElement("line",ue({className:"recharts-polar-angle-axis-tick-line"},o,N)),c&&t.renderTickItem(c,d,g?g(p.value,h):p.value))});return k.createElement(W,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var a=this.props,n=a.ticks,i=a.radius,c=a.axisLine;return i<=0||!n||!n.length?null:k.createElement(W,{className:ie("recharts-polar-angle-axis",this.props.className)},c&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,n,i){var c;return k.isValidElement(a)?c=k.cloneElement(a,n):de(a)?c=a(n):c=k.createElement(at,ue({},n,{className:"recharts-polar-angle-axis-tick-value"}),i),c}}])})(O.PureComponent);Ke(Ve,"displayName","PolarAngleAxis");Ke(Ve,"axisType","angleAxis");Ke(Ve,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Ee;function ye(s){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(s)}function xe(){return xe=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},xe.apply(this,arguments)}function Nt(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function _(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nt(Object(r),!0).forEach(function(a){G(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function hs(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function At(s,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,zt(a.key),a)}}function ms(s,t,r){return t&&At(s.prototype,t),r&&At(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function fs(s,t,r){return t=$e(t),ps(s,Vt()?Reflect.construct(t,r||[],$e(s).constructor):t.apply(s,r))}function ps(s,t){if(t&&(ye(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xs(s)}function xs(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Vt(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vt=function(){return!!s})()}function $e(s){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$e(s)}function vs(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&et(s,t)}function et(s,t){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},et(s,t)}function G(s,t,r){return t=zt(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function zt(s){var t=gs(s,"string");return ye(t)=="symbol"?t:t+""}function gs(s,t){if(ye(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(ye(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var Z=(function(s){function t(r){var a;return hs(this,t),a=fs(this,t,[r]),G(a,"pieRef",null),G(a,"sectorRefs",[]),G(a,"id",Aa("recharts-pie-")),G(a,"handleAnimationEnd",function(){var n=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),de(n)&&n()}),G(a,"handleAnimationStart",function(){var n=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),de(n)&&n()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return vs(t,s),ms(t,[{key:"isActiveIndex",value:function(a){var n=this.props.activeIndex;return Array.isArray(n)?n.indexOf(a)!==-1:a===n}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,c=i.label,v=i.labelLine,g=i.dataKey,u=i.valueKey,f=$(this.props,!1),x=$(c,!1),o=$(v,!1),y=c&&c.offsetRadius||20,p=a.map(function(h,N){var A=(h.startAngle+h.endAngle)/2,d=ee(h.cx,h.cy,h.outerRadius+y,A),m=_(_(_(_({},f),h),{},{stroke:"none"},x),{},{index:N,textAnchor:t.getTextAnchor(d.x,h.cx)},d),j=_(_(_(_({},f),h),{},{fill:"none",stroke:h.fill},o),{},{index:N,points:[ee(h.cx,h.cy,h.outerRadius,A),d]}),D=g;return ve(g)&&ve(u)?D="value":ve(g)&&(D=u),k.createElement(W,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(N)},v&&t.renderLabelLineItem(v,j,"line"),t.renderLabelItem(c,m,me(h,D)))});return k.createElement(W,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(a){var n=this,i=this.props,c=i.activeShape,v=i.blendStroke,g=i.inactiveShape;return a.map(function(u,f){if(u?.startAngle===0&&u?.endAngle===0&&a.length!==1)return null;var x=n.isActiveIndex(f),o=g&&n.hasActiveIndex()?g:null,y=x?c:o,p=_(_({},u),{},{stroke:v?u.fill:u.stroke,tabIndex:-1});return k.createElement(W,xe({ref:function(N){N&&!n.sectorRefs.includes(N)&&n.sectorRefs.push(N)},tabIndex:-1,className:"recharts-pie-sector"},st(n.props,u,f),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(f)}),k.createElement(ga,xe({option:y,isActive:x,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,n=this.props,i=n.sectors,c=n.isAnimationActive,v=n.animationBegin,g=n.animationDuration,u=n.animationEasing,f=n.animationId,x=this.state,o=x.prevSectors,y=x.prevIsAnimationActive;return k.createElement(ja,{begin:v,duration:g,isActive:c,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(y),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var h=p.t,N=[],A=i&&i[0],d=A.startAngle;return i.forEach(function(m,j){var D=o&&o[j],X=j>0?ya(m,"paddingAngle",0):0;if(D){var I=dt(D.endAngle-D.startAngle,m.endAngle-m.startAngle),w=_(_({},m),{},{startAngle:d+X,endAngle:d+I(h)+X});N.push(w),d=w.endAngle}else{var q=m.endAngle,V=m.startAngle,le=dt(0,q-V),he=le(h),U=_(_({},m),{},{startAngle:d+X,endAngle:d+he+X});N.push(U),d=U.endAngle}}),k.createElement(W,null,a.renderSectorsStatically(N))})}},{key:"attachKeyboardHandlers",value:function(a){var n=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var c=++n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[c].focus(),n.setState({sectorToFocus:c});break}case"ArrowRight":{var v=--n.state.sectorToFocus<0?n.sectorRefs.length-1:n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[v].focus(),n.setState({sectorToFocus:v});break}case"Escape":{n.sectorRefs[n.state.sectorToFocus].blur(),n.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,n=a.sectors,i=a.isAnimationActive,c=this.state.prevSectors;return i&&n&&n.length&&(!c||!ba(c,n))?this.renderSectorsWithAnimation():this.renderSectorsStatically(n)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,n=this.props,i=n.hide,c=n.sectors,v=n.className,g=n.label,u=n.cx,f=n.cy,x=n.innerRadius,o=n.outerRadius,y=n.isAnimationActive,p=this.state.isAnimationFinished;if(i||!c||!c.length||!fe(u)||!fe(f)||!fe(x)||!fe(o))return null;var h=ie("recharts-pie",v);return k.createElement(W,{tabIndex:this.props.rootTabIndex,className:h,ref:function(A){a.pieRef=A}},this.renderSectors(),g&&this.renderLabels(c),_t.renderCallByParent(this.props,null,!1),(!y||p)&&Na.renderCallByParent(this.props,c,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,n){return n.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==n.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:n.curSectors,isAnimationFinished:!0}:a.sectors!==n.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,n){return a>n?"start":a<n?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,n,i){if(k.isValidElement(a))return k.cloneElement(a,n);if(de(a))return a(n);var c=ie("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return k.createElement(va,xe({},n,{key:i,type:"linear",className:c}))}},{key:"renderLabelItem",value:function(a,n,i){if(k.isValidElement(a))return k.cloneElement(a,n);var c=i;if(de(a)&&(c=a(n),k.isValidElement(c)))return c;var v=ie("recharts-pie-label-text",typeof a!="boolean"&&!de(a)?a.className:"");return k.createElement(at,xe({},n,{alignmentBaseline:"middle",className:v}),c)}}])})(O.PureComponent);Ee=Z;G(Z,"displayName","Pie");G(Z,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!wa.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});G(Z,"parseDeltaAngle",function(s,t){var r=De(t-s),a=Math.min(Math.abs(t-s),360);return r*a});G(Z,"getRealPieData",function(s){var t=s.data,r=s.children,a=$(s,!1),n=Pa(r,rt);return t&&t.length?t.map(function(i,c){return _(_(_({payload:i},a),i),n&&n[c]&&n[c].props)}):n&&n.length?n.map(function(i){return _(_({},a),i.props)}):[]});G(Z,"parseCoordinateOfPie",function(s,t){var r=t.top,a=t.left,n=t.width,i=t.height,c=ka(n,i),v=a+Oe(s.cx,n,n/2),g=r+Oe(s.cy,i,i/2),u=Oe(s.innerRadius,c,0),f=Oe(s.outerRadius,c,c*.8),x=s.maxRadius||Math.sqrt(n*n+i*i)/2;return{cx:v,cy:g,innerRadius:u,outerRadius:f,maxRadius:x}});G(Z,"getComposedData",function(s){var t=s.item,r=s.offset,a=t.type.defaultProps!==void 0?_(_({},t.type.defaultProps),t.props):t.props,n=Ee.getRealPieData(a);if(!n||!n.length)return null;var i=a.cornerRadius,c=a.startAngle,v=a.endAngle,g=a.paddingAngle,u=a.dataKey,f=a.nameKey,x=a.valueKey,o=a.tooltipType,y=Math.abs(a.minAngle),p=Ee.parseCoordinateOfPie(a,r),h=Ee.parseDeltaAngle(c,v),N=Math.abs(h),A=u;ve(u)&&ve(x)?(ut(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),A="value"):ve(u)&&(ut(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),A=x);var d=n.filter(function(w){return me(w,A,0)!==0}).length,m=(N>=360?d:d-1)*g,j=N-d*y-m,D=n.reduce(function(w,q){var V=me(q,A,0);return w+(fe(V)?V:0)},0),X;if(D>0){var I;X=n.map(function(w,q){var V=me(w,A,0),le=me(w,f,q),he=(fe(V)?V:0)/D,U;q?U=I.endAngle+De(h)*g*(V!==0?1:0):U=c;var Ce=U+De(h)*((V!==0?y:0)+he*j),ze=(U+Ce)/2,T=(p.innerRadius+p.outerRadius)/2,Qe=[{name:le,value:V,payload:w,dataKey:A,type:o}],Ge=ee(p.cx,p.cy,T,ze);return I=_(_(_({percent:he,cornerRadius:i,name:le,tooltipPayload:Qe,midAngle:ze,middleRadius:T,tooltipPosition:Ge},w),p),{},{value:me(w,A),startAngle:U,endAngle:Ce,payload:w,paddingAngle:De(h)*g}),I})}return _(_({},p),{},{sectors:X,data:n})});var Qt=Ca({chartName:"PieChart",GraphicalChild:Z,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ve},{axisType:"radiusAxis",AxisComp:Be}],formatAxisMap:Sa,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});let js=class{nodes;getComponentMetrics;constructor(t,r){this.nodes=t,this.getComponentMetrics=r}executeQuery(t,r){const a=[],n=Date.now();if(t.includes("component_throughput_total")||t.includes("throughput"))this.nodes.forEach(i=>{const c=this.getComponentMetrics(i.id);c&&a.push({timestamp:n,value:c.throughput||0,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("component_latency_ms")||t.includes("latency"))this.nodes.forEach(i=>{const c=this.getComponentMetrics(i.id);c&&a.push({timestamp:n,value:c.latency||0,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("component_error_rate")||t.includes("error_rate"))this.nodes.forEach(i=>{const c=this.getComponentMetrics(i.id);c&&a.push({timestamp:n,value:(c.errorRate||0)*100,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("component_utilization")||t.includes("utilization"))this.nodes.forEach(i=>{const c=this.getComponentMetrics(i.id);c&&a.push({timestamp:n,value:(c.utilization||0)*100,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("up"))this.nodes.forEach(i=>{const c=this.getComponentMetrics(i.id);a.push({timestamp:n,value:c?1:0,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else return[];return a}};function ys({panel:s,executor:t,timeRange:r}){const[a,n]=O.useState([]),[i,c]=O.useState([]);O.useEffect(()=>{const u=[];s.queries.forEach((f,x)=>{t.executeQuery(f.expr,r).forEach(y=>{u.push({...y,series:f.legendFormat?f.legendFormat.replace("{{component}}",y.labels.component||"unknown"):`Series ${x+1}`,refId:f.refId})})}),n(u),c(f=>[...f,{timestamp:Date.now(),data:u}].slice(-50))},[s.queries,t,r]);const v=O.useMemo(()=>{if(s.type==="graph"||s.type==="bargraph"){const u=new Map;i.forEach((o,y)=>{o.data.forEach(p=>{const h=p.series||"default";u.has(h)||u.set(h,[]),u.get(h).push({time:y,value:p.value,timestamp:o.timestamp})})});const f=Math.max(...Array.from(u.values()).map(o=>o.length)),x=[];for(let o=0;o<f;o++){const y={time:o};u.forEach((p,h)=>{p[o]&&(y[h]=p[o].value)}),x.push(y)}return x}return a},[i,a,s.type]),g=()=>{switch(s.type){case"graph":case"bargraph":const u=s.type==="bargraph"?$t:Ot,f=s.type==="bargraph"?Dt:Et;if(v.length===0)return e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground text-sm",children:"No data available"});const x=Array.from(new Set(a.map(d=>d.series))),o=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00","#ff00ff"];return e.jsx(Te,{width:"100%",height:"100%",children:e.jsxs(u,{data:v,children:[e.jsx(Tt,{strokeDasharray:"3 3"}),e.jsx(Rt,{dataKey:"time"}),e.jsx(Lt,{}),e.jsx(Re,{}),e.jsx(It,{}),x.map((d,m)=>e.jsx(f,{type:"monotone",dataKey:d,stroke:o[m%o.length],fill:o[m%o.length]},d))]})});case"stat":const y=a.length>0?a.reduce((d,m)=>d+m.value,0)/a.length:0;return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-4xl font-bold",children:y.toFixed(2)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:s.title})]});case"gauge":const p=a.length>0?a.reduce((d,m)=>d+m.value,0)/a.length:0,h=Math.min(100,Math.max(0,p));return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-muted"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${2*Math.PI*56}`,strokeDashoffset:`${2*Math.PI*56*(1-h/100)}`,className:"text-primary transition-all"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-2xl font-bold",children:[h.toFixed(0),"%"]})})]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:s.title})]});case"table":return e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Component"}),e.jsx("th",{className:"text-right p-2",children:"Value"})]})}),e.jsx("tbody",{children:a.map((d,m)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:d.labels?.component||"Unknown"}),e.jsx("td",{className:"text-right p-2",children:d.value.toFixed(2)})]},m))})]})});case"piechart":const N=a.map(d=>({name:d.labels?.component||"Unknown",value:d.value})),A=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00","#ff00ff"];return e.jsx(Te,{width:"100%",height:"100%",children:e.jsxs(Qt,{children:[e.jsx(Z,{data:N,cx:"50%",cy:"50%",labelLine:!1,label:({name:d,percent:m})=>`${d}: ${(m*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:N.map((d,m)=>e.jsx(rt,{fill:A[m%A.length]},`cell-${m}`))}),e.jsx(Re,{})]})});default:return e.jsxs("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:['Panel type "',s.type,'" not supported']})}};return e.jsxs(F,{className:"h-full",children:[e.jsx(B,{className:"pb-2",children:e.jsx(K,{className:"text-sm font-medium",children:s.title})}),e.jsx(M,{className:"h-[calc(100%-60px)]",children:g()})]})}function wt({componentId:s,dashboardId:t,onClose:r}){const{nodes:a}=tt(),{getComponentMetrics:n,isRunning:i}=Me(),c=a.find(d=>d.id===s),u=((c?.data.config||{}).dashboards||[]).map(d=>typeof d.panels=="number"?{id:d.id||String(Date.now()),name:d.name||"Dashboard",panels:[],tags:Array.isArray(d.tags)?d.tags:[],refresh:d.refresh||"30s"}:d).filter(d=>d&&typeof d=="object"&&d.id),f=t?u.find(d=>d.id===t):u[0],[x,o]=O.useState({from:Date.now()-3e5,to:Date.now()}),[y,p]=O.useState(0),h=O.useMemo(()=>new js(a,n),[a,n]);O.useEffect(()=>{if(!i||!f)return;const d=N(f.refresh||"30s"),m=setInterval(()=>{o({from:Date.now()-3e5,to:Date.now()}),p(j=>j+1)},d);return()=>clearInterval(m)},[i,f]);function N(d){const m=d.match(/^(\d+)([smhd])$/);if(!m)return 3e4;const j=parseInt(m[1]);switch(m[2]){case"s":return j*1e3;case"m":return j*60*1e3;case"h":return j*60*60*1e3;case"d":return j*24*60*60*1e3;default:return 3e4}}if(!c)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Grafana component not found"});if(u.length===0)return e.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No dashboards configured"}),e.jsx("p",{className:"text-sm mt-2",children:"Configure dashboards in Grafana settings"})]});if(!f)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Dashboard not found"});const A=[...f.panels].sort((d,m)=>d.gridPos.y!==m.gridPos.y?d.gridPos.y-m.gridPos.y:d.gridPos.x-m.gridPos.x);return e.jsxs("div",{className:"h-full flex flex-col bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:f.name}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:f.tags.map((d,m)=>e.jsx(Y,{variant:"outline",className:"text-xs",children:d},m))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>{o({from:Date.now()-3e5,to:Date.now()}),p(d=>d+1)},children:[e.jsx(ta,{className:"h-4 w-4 mr-2"}),"Refresh"]}),r&&e.jsx(L,{size:"sm",variant:"ghost",onClick:r,children:e.jsx(aa,{className:"h-4 w-4"})})]})]}),e.jsx(sa,{className:"flex-1",children:e.jsx("div",{className:"p-4",children:A.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No panels in this dashboard"})]}):e.jsx("div",{className:"grid grid-cols-12 gap-4",children:A.map(d=>e.jsx("div",{className:"col-span-12",style:{gridColumn:`span ${Math.min(12,d.gridPos.w||12)}`,minHeight:`${(d.gridPos.h||8)*40}px`},children:e.jsx(ys,{panel:d,executor:h,timeRange:x},`${d.id}-${y}`)},d.id))})})}),!i&&e.jsx("div",{className:"p-2 bg-yellow-500/10 border-t border-yellow-500/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-yellow-600",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx("span",{children:"Simulation is not running. Start emulation to see live data."})]})})]})}class bs{nodes;getComponentMetrics;constructor(t,r){this.nodes=t,this.getComponentMetrics=r}executeQuery(t){const r=[],a=Date.now();return t.includes("component_throughput_total")||t.includes("throughput")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:i.throughput||0,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("component_latency_ms")||t.includes("latency")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:i.latency||0,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("component_error_rate")||t.includes("error_rate")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:(i.errorRate||0)*100,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("component_utilization")||t.includes("utilization")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:(i.utilization||0)*100,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("up")&&this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);r.push({timestamp:a,value:i?1:0,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}),r}}function Ns({panel:s,executor:t}){const[r,a]=O.useState([]),[n,i]=O.useState([]),{isRunning:c}=Me(),[v,g]=O.useState(0);O.useEffect(()=>{const x=[];s.queries.forEach((o,y)=>{t.executeQuery(o.expr).forEach(h=>{x.push({...h,series:o.legendFormat?o.legendFormat.replace("{{component}}",h.labels.component||"unknown"):`Series ${y+1}`})})}),a(x),i(o=>[...o,{timestamp:Date.now(),data:x}].slice(-20))},[s.queries,t,v]),O.useEffect(()=>{if(!c)return;const x=setInterval(()=>{g(o=>o+1)},1e3);return()=>clearInterval(x)},[c]);const u=O.useMemo(()=>{if(s.type==="graph"||s.type==="bargraph"){const x=new Map;n.forEach((p,h)=>{p.data.forEach(N=>{const A=N.series||"default";x.has(A)||x.set(A,[]),x.get(A).push({time:h,value:N.value})})});const o=Math.max(...Array.from(x.values()).map(p=>p.length),0),y=[];for(let p=0;p<o;p++){const h={time:p};x.forEach((N,A)=>{N[p]&&(h[A]=N[p].value)}),y.push(h)}return y}return r},[n,r,s.type]),f=()=>{switch(s.type){case"graph":case"bargraph":const x=s.type==="bargraph"?$t:Ot,o=s.type==="bargraph"?Dt:Et;if(u.length===0)return e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground text-xs",children:"No data"});const y=Array.from(new Set(r.map(j=>j.series))),p=["#8884d8","#82ca9d","#ffc658","#ff7300"];return e.jsx(Te,{width:"100%",height:"100%",children:e.jsxs(x,{data:u,children:[e.jsx(Tt,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(Rt,{dataKey:"time",stroke:"rgba(255,255,255,0.5)"}),e.jsx(Lt,{stroke:"rgba(255,255,255,0.5)"}),e.jsx(Re,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",border:"1px solid rgba(255,255,255,0.1)"}}),e.jsx(It,{wrapperStyle:{fontSize:"12px"}}),y.map((j,D)=>e.jsx(o,{type:"monotone",dataKey:j,stroke:p[D%p.length],fill:p[D%p.length],strokeWidth:2},j))]})});case"stat":const h=r.length>0?r.reduce((j,D)=>j+D.value,0)/r.length:0;return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:h.toFixed(1)}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.title})]});case"gauge":const N=r.length>0?r.reduce((j,D)=>j+D.value,0)/r.length:0,A=Math.min(100,Math.max(0,N));return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsxs("svg",{className:"transform -rotate-90 w-24 h-24",children:[e.jsx("circle",{cx:"48",cy:"48",r:"42",stroke:"currentColor",strokeWidth:"6",fill:"none",className:"text-muted opacity-30"}),e.jsx("circle",{cx:"48",cy:"48",r:"42",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:`${2*Math.PI*42*(1-A/100)}`,className:"text-orange-500 transition-all"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-xl font-bold",children:[A.toFixed(0),"%"]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.title})]});case"table":return e.jsx("div",{className:"h-full overflow-auto text-xs",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-1",children:"Component"}),e.jsx("th",{className:"text-right p-1",children:"Value"})]})}),e.jsx("tbody",{children:r.slice(0,5).map((j,D)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-1",children:j.labels?.component||"Unknown"}),e.jsx("td",{className:"text-right p-1",children:j.value.toFixed(1)})]},D))})]})});case"piechart":const d=r.slice(0,5).map(j=>({name:j.labels?.component||"Unknown",value:j.value})),m=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00"];return e.jsx(Te,{width:"100%",height:"100%",children:e.jsxs(Qt,{children:[e.jsx(Z,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:({percent:j})=>`${(j*100).toFixed(0)}%`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:d.map((j,D)=>e.jsx(rt,{fill:m[D%m.length]},`cell-${D}`))}),e.jsx(Re,{})]})});default:return e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground text-xs",children:s.type})}};return e.jsxs(F,{className:"h-full",children:[e.jsx(B,{className:"pb-2",children:e.jsx(K,{className:"text-sm font-medium",children:s.title})}),e.jsx(M,{className:"h-[calc(100%-50px)]",children:f()})]})}function As({componentId:s,dashboardId:t}){const{nodes:r}=tt(),{getComponentMetrics:a,isRunning:n}=Me(),u=((r.find(o=>o.id===s)?.data.config||{}).dashboards||[]).map(o=>typeof o.panels=="number"?{id:o.id,name:o.name,panels:[],tags:[]}:o).filter(o=>o&&typeof o=="object"&&o.id).find(o=>o.id===t),f=O.useMemo(()=>new bs(r,a),[r,a]);if(O.useEffect(()=>{if(!n)return;const o=setInterval(()=>{},1e3);return()=>clearInterval(o)},[n]),!u||u.panels.length===0)return e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:"No panels in this dashboard"})});const x=u.panels.slice(0,4);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:x.map(o=>e.jsx("div",{className:"h-48",children:e.jsx(Ns,{panel:o,executor:f})},o.id))}),u.panels.length>4&&e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["+",u.panels.length-4,' more panels. Click "Open Dashboard" to view all.']}),!n&&e.jsx("div",{className:"text-center text-xs text-yellow-600 bg-yellow-500/10 p-2 rounded",children:"Start emulation to see live data"})]})}function Ds({componentId:s}){const[t,r]=O.useState(null),[a,n]=O.useState(null),[i,c]=O.useState(!1),[v,g]=O.useState(!1),[u,f]=O.useState(!1),[x,o]=O.useState(!1),[y,p]=O.useState(void 0);try{const{nodes:h,updateNode:N}=tt(),{isRunning:A}=Me(),d=h.find(l=>l.id===s);if(!d)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const m=d.data.config||{},j=ma.grafana.defaults,D=m.adminUser||j.adminUser,X=m.adminPassword||j.adminPassword;let I=[];Array.isArray(m.datasources)&&(m.datasources.length>0&&typeof m.datasources[0]=="string"?I=m.datasources.map(l=>({name:l,type:"prometheus",url:"http://localhost:9090",access:"proxy",isDefault:l===m.datasources[0]})):I=m.datasources.filter(l=>l&&typeof l=="object"&&l.name)),I.length===0&&(I=[{name:Array.isArray(j.datasources)&&j.datasources.length>0&&typeof j.datasources[0]=="string"?j.datasources[0]:"Prometheus",type:"prometheus",url:"http://localhost:9090",access:"proxy",isDefault:!0}]);let w=[];Array.isArray(m.dashboards)&&(w=m.dashboards.map(l=>{if(l&&typeof l=="object"){if(typeof l.panels=="number")return{...l,panels:[],tags:Array.isArray(l.tags)?l.tags:[]};if(Array.isArray(l.panels))return{...l,panels:l.panels.map(C=>({id:C.id||`panel-${Date.now()}`,title:C.title||"Panel",type:C.type||"graph",datasource:C.datasource||I[0]?.name||"Prometheus",queries:Array.isArray(C.queries)?C.queries:[{refId:"A",expr:"up"}],gridPos:C.gridPos||{x:0,y:0,w:12,h:8}})),tags:Array.isArray(l.tags)?l.tags:[]}}return l}).filter(l=>l&&typeof l=="object"&&l.id)),w.length===0&&(w=[]);const q=Array.isArray(m.alerts)?m.alerts.filter(l=>l&&typeof l=="object"&&l.id):[],V=m.defaultDashboard||j.defaultDashboard,le=m.enableAuth??j.enableAuth,he=m.authProvider||j.authProvider,U=m.enableAlerting??j.enableAlerting,Ce=Array.isArray(m.alertNotificationChannels)?m.alertNotificationChannels:Array.isArray(j.alertNotificationChannels)?j.alertNotificationChannels:["email","slack"],ze=m.theme||j.theme,T=l=>{N(s,{data:{...d.data,config:{...m,...l}}})},Qe=()=>{const l={name:"New Data Source",type:"prometheus",url:"http://localhost:9090",access:"proxy"};T({datasources:[...I,l]}),f(!1)},Ge=l=>{T({datasources:I.filter((C,b)=>b!==l)})},Se=(l,C,b)=>{const P=[...I];P[l]={...P[l],[C]:b},T({datasources:P})},Gt=()=>{const l={id:String(Date.now()),name:"New Dashboard",panels:[],tags:[],refresh:"30s"};T({dashboards:[...w,l]}),c(!1)},qt=l=>{T({dashboards:w.filter((C,b)=>b!==l)})},Ut=l=>{const C=I&&I.length>0?I[0].name:"Prometheus",b={id:`panel-${Date.now()}`,title:"New Panel",type:"graph",datasource:C,queries:[{refId:"A",expr:"up",legendFormat:"{{instance}}"}],gridPos:{x:0,y:0,w:12,h:8}},P=w.map(R=>R.id===l?{...R,panels:[...R.panels,b]}:R);T({dashboards:P})},Ht=(l,C)=>{const b=w.map(P=>P.id===l?{...P,panels:P.panels.filter(R=>R.id!==C)}:P);T({dashboards:b})},qe=(l,C,b,P)=>{const R=w.map(z=>z.id===l?{...z,panels:z.panels.map(te=>te.id===C?{...te,[b]:P}:te)}:z);T({dashboards:R})},Wt=(l,C)=>{const b=w.map(P=>P.id===l?{...P,panels:P.panels.map(R=>{if(R.id===C){const z=Array.isArray(R.queries)?R.queries:[];return{...R,queries:[...z,{refId:String.fromCharCode(65+z.length),expr:"",legendFormat:""}]}}return R})}:P);T({dashboards:b})},nt=(l,C,b,P,R)=>{const z=w.map(te=>te.id===l?{...te,panels:te.panels.map(be=>{if(be.id===C){const Yt=Array.isArray(be.queries)?be.queries:[];return{...be,queries:Yt.map((it,Jt)=>Jt===b?{...it,[P]:R}:it)}}return be})}:te);T({dashboards:z})},Zt=()=>{const l={id:`alert-${Date.now()}`,name:"New Alert",condition:{query:"up == 0",evaluator:{type:"gt",params:[0]},reducer:{type:"last",params:[]}},for:"5m",annotations:{summary:"Alert triggered",description:"Service is down"},notificationChannels:Ce.slice(0,1)};T({alerts:[...q,l]}),g(!1)},Xt=l=>{T({alerts:q.filter(C=>C.id!==l)})};return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500/10",children:e.jsx(J,{className:"h-6 w-6 text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Grafana"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Analytics & Monitoring Platform"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Y,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${A?"bg-green-500 animate-pulse":"bg-gray-400"}`}),A?"Running":"Stopped"]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>{p(V==="overview"?w[0]?.id:w.find(l=>l.id===V)?.id),o(!0)},children:[e.jsx(Da,{className:"h-4 w-4 mr-2"}),"Open Dashboard"]})]})]}),e.jsx(lt,{}),e.jsxs(F,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Live Dashboard Preview"}),e.jsx(H,{children:"Real-time metrics from configured dashboards"})]}),w.length>0&&e.jsxs(ae,{value:y||w[0]?.id,onValueChange:l=>p(l),children:[e.jsx(se,{className:"w-48",children:e.jsx(re,{})}),e.jsx(ne,{children:w.map(l=>e.jsx(S,{value:l.id,children:l.name},l.id))})]})]})}),e.jsx(M,{children:w.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No dashboards configured"}),e.jsx("p",{className:"text-sm mt-2",children:"Create a dashboard to see live metrics here"})]}):e.jsx(As,{componentId:s,dashboardId:y||w[0]?.id})})]}),e.jsxs(ra,{defaultValue:"dashboard",className:"w-full",children:[e.jsxs(na,{className:"grid w-full grid-cols-5",children:[e.jsxs(Ne,{value:"dashboard",className:"gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Dashboard"]}),e.jsxs(Ne,{value:"datasources",className:"gap-2",children:[e.jsx(ct,{className:"h-4 w-4"}),"Data Sources"]}),e.jsxs(Ne,{value:"dashboards",className:"gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Dashboards"]}),e.jsxs(Ne,{value:"alerts",className:"gap-2",children:[e.jsx(ot,{className:"h-4 w-4"}),"Alerts"]}),e.jsxs(Ne,{value:"settings",className:"gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Settings"]})]}),e.jsx(Ae,{value:"dashboard",className:"space-y-4 mt-4",children:e.jsxs(F,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Live Dashboard"}),e.jsx(H,{children:"Real-time metrics visualization"})]}),w.length>0&&e.jsxs(ae,{value:y||w[0]?.id,onValueChange:l=>p(l),children:[e.jsx(se,{className:"w-48",children:e.jsx(re,{})}),e.jsx(ne,{children:w.map(l=>e.jsx(S,{value:l.id,children:l.name},l.id))})]})]})}),e.jsx(M,{children:w.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(J,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No dashboards configured"}),e.jsx("p",{className:"text-sm mt-2",children:'Create a dashboard in the "Dashboards" tab'})]}):e.jsx("div",{className:"h-[600px] border rounded-lg overflow-hidden",children:e.jsx(wt,{componentId:s,dashboardId:y||w[0]?.id})})})]})}),e.jsxs(Ae,{value:"datasources",className:"space-y-4 mt-4",children:[u&&e.jsxs(F,{className:"mb-4 border-primary",children:[e.jsxs(B,{children:[e.jsx(K,{children:"Create Data Source"}),e.jsx(H,{children:"Configure connection to metrics/logs database"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Name"}),e.jsx(Q,{placeholder:"Prometheus"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Type"}),e.jsxs(ae,{defaultValue:"prometheus",children:[e.jsx(se,{children:e.jsx(re,{})}),e.jsxs(ne,{children:[e.jsx(S,{value:"prometheus",children:"Prometheus"}),e.jsx(S,{value:"loki",children:"Loki"}),e.jsx(S,{value:"influxdb",children:"InfluxDB"}),e.jsx(S,{value:"elasticsearch",children:"Elasticsearch"}),e.jsx(S,{value:"postgres",children:"PostgreSQL"}),e.jsx(S,{value:"mysql",children:"MySQL"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"URL"}),e.jsx(Q,{placeholder:"http://localhost:9090"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{onClick:Qe,children:"Create Data Source"}),e.jsx(L,{variant:"outline",onClick:()=>f(!1),children:"Cancel"})]})]})]}),e.jsxs(F,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Data Sources"}),e.jsx(H,{children:"Configure data sources for metrics and logs"})]}),e.jsxs(L,{size:"sm",onClick:()=>f(!0),variant:"outline",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Add Data Source"]})]})}),e.jsx(M,{children:e.jsx("div",{className:"space-y-3",children:I.map((l,C)=>e.jsxs(F,{className:"border-border",children:[e.jsx(B,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded bg-primary/10",children:e.jsx(ct,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx(K,{className:"text-lg",children:l.name}),e.jsxs(H,{className:"text-xs mt-1",children:[l.type,"  ",l.url,l.isDefault&&e.jsx(Y,{variant:"outline",className:"ml-2",children:"Default"})]})]})]}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>Ge(C),children:e.jsx(_e,{className:"h-4 w-4"})})]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Name"}),e.jsx(Q,{value:l.name,onChange:b=>Se(C,"name",b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Type"}),e.jsxs(ae,{value:l.type,onValueChange:b=>Se(C,"type",b),children:[e.jsx(se,{children:e.jsx(re,{})}),e.jsxs(ne,{children:[e.jsx(S,{value:"prometheus",children:"Prometheus"}),e.jsx(S,{value:"loki",children:"Loki"}),e.jsx(S,{value:"influxdb",children:"InfluxDB"}),e.jsx(S,{value:"elasticsearch",children:"Elasticsearch"}),e.jsx(S,{value:"postgres",children:"PostgreSQL"}),e.jsx(S,{value:"mysql",children:"MySQL"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"URL"}),e.jsx(Q,{value:l.url,onChange:b=>Se(C,"url",b.target.value),placeholder:"http://localhost:9090"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{checked:l.isDefault||!1,onCheckedChange:b=>Se(C,"isDefault",b)}),e.jsx(E,{children:"Set as default"})]})]})]},C))})})]})]}),e.jsxs(Ae,{value:"dashboards",className:"space-y-4 mt-4",children:[i&&e.jsxs(F,{className:"mb-4 border-primary",children:[e.jsxs(B,{children:[e.jsx(K,{children:"Create Dashboard"}),e.jsx(H,{children:"Configure dashboard settings"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Dashboard Name"}),e.jsx(Q,{placeholder:"My Dashboard"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{onClick:Gt,children:"Create Dashboard"}),e.jsx(L,{variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]})]}),e.jsxs(F,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Dashboards"}),e.jsx(H,{children:"Manage and configure dashboards"})]}),e.jsxs(L,{size:"sm",onClick:()=>c(!0),variant:"outline",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Create Dashboard"]})]})}),e.jsx(M,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:w.map((l,C)=>e.jsxs(F,{className:"border-border hover:border-primary/50 transition-colors cursor-pointer",children:[e.jsx(B,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(K,{className:"text-base",children:l.name})]}),w.length>1&&e.jsx(L,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>qt(C),children:e.jsx(_e,{className:"h-3 w-3"})})]})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Panels:"}),e.jsx("span",{className:"font-semibold",children:Array.isArray(l.panels)?l.panels.length:0})]}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:l.tags.map((b,P)=>e.jsx(Y,{variant:"outline",className:"text-xs",children:b},P))}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(L,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>r(t===l.id?null:l.id),children:[e.jsx(la,{className:"h-3 w-3 mr-2"}),t===l.id?"Hide":"Edit"]}),e.jsxs(L,{size:"sm",variant:"default",className:"flex-1",onClick:()=>{p(l.id),o(!0)},children:[e.jsx(ot,{className:"h-3 w-3 mr-2"}),"View"]})]})]})}),t===l.id&&e.jsx(M,{className:"pt-0 border-t",children:e.jsxs("div",{className:"space-y-3 mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-sm font-semibold",children:"Panels"}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>Ut(l.id),children:[e.jsx(we,{className:"h-3 w-3 mr-1"}),"Add Panel"]})]}),!Array.isArray(l.panels)||l.panels.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:'No panels. Click "Add Panel" to create one.'}):l.panels.map(b=>e.jsxs(F,{className:"border-border",children:[e.jsx(B,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{variant:"outline",children:b.type}),e.jsx(Q,{value:b.title,onChange:P=>qe(l.id,b.id,"title",P.target.value),className:"h-7 flex-1"})]}),e.jsx(L,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>Ht(l.id,b.id),children:e.jsx(_e,{className:"h-3 w-3"})})]})}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(E,{className:"text-xs",children:"Type"}),e.jsxs(ae,{value:b.type,onValueChange:P=>qe(l.id,b.id,"type",P),children:[e.jsx(se,{className:"h-7",children:e.jsx(re,{})}),e.jsxs(ne,{children:[e.jsx(S,{value:"graph",children:"Graph"}),e.jsx(S,{value:"table",children:"Table"}),e.jsx(S,{value:"stat",children:"Stat"}),e.jsx(S,{value:"gauge",children:"Gauge"}),e.jsx(S,{value:"piechart",children:"Pie Chart"}),e.jsx(S,{value:"bargraph",children:"Bar Graph"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(E,{className:"text-xs",children:"Data Source"}),e.jsxs(ae,{value:b.datasource,onValueChange:P=>qe(l.id,b.id,"datasource",P),children:[e.jsx(se,{className:"h-7",children:e.jsx(re,{})}),e.jsx(ne,{children:I.map(P=>e.jsx(S,{value:P.name,children:P.name},P.name))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-xs",children:"Queries (PromQL/LogQL)"}),e.jsxs(L,{size:"sm",variant:"ghost",className:"h-6",onClick:()=>Wt(l.id,b.id),children:[e.jsx(we,{className:"h-3 w-3 mr-1"}),"Add Query"]})]}),Array.isArray(b.queries)&&b.queries.length>0?b.queries.map((P,R)=>e.jsxs("div",{className:"space-y-1 p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{variant:"secondary",className:"text-xs",children:P.refId||"A"}),e.jsx(Q,{value:P.expr||"",onChange:z=>nt(l.id,b.id,R,"expr",z.target.value),placeholder:"up or {job='api'} |= 'error'",className:"h-7 text-xs font-mono"})]}),e.jsx(Q,{value:P.legendFormat||"",onChange:z=>nt(l.id,b.id,R,"legendFormat",z.target.value),placeholder:"Legend format: {{instance}}",className:"h-6 text-xs"})]},R)):e.jsx("div",{className:"text-center py-2 text-xs text-muted-foreground",children:'No queries. Click "Add Query" to add one.'})]})]})]},b.id))]})})]},C))})})]})]}),e.jsxs(Ae,{value:"alerts",className:"space-y-4 mt-4",children:[v&&e.jsxs(F,{className:"mb-4 border-primary",children:[e.jsxs(B,{children:[e.jsx(K,{children:"Create Alert Rule"}),e.jsx(H,{children:"Configure alert conditions and notifications"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Alert Name"}),e.jsx(Q,{placeholder:"High CPU Usage"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"PromQL Query"}),e.jsx(_a,{placeholder:"rate(process_cpu_seconds_total[5m]) > 0.8",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Condition"}),e.jsxs(ae,{defaultValue:"gt",children:[e.jsx(se,{children:e.jsx(re,{})}),e.jsxs(ne,{children:[e.jsx(S,{value:"gt",children:"Greater Than"}),e.jsx(S,{value:"lt",children:"Less Than"}),e.jsx(S,{value:"eq",children:"Equal"}),e.jsx(S,{value:"ne",children:"Not Equal"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Threshold"}),e.jsx(Q,{type:"number",placeholder:"0.8"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{onClick:Zt,children:"Create Alert"}),e.jsx(L,{variant:"outline",onClick:()=>g(!1),children:"Cancel"})]})]})]}),e.jsxs(F,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Alert Rules"}),e.jsx(H,{children:"Configure alert conditions and notifications"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{checked:U,onCheckedChange:l=>T({enableAlerting:l})}),e.jsxs(L,{size:"sm",onClick:()=>g(!0),variant:"outline",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Create Alert"]})]})]})}),e.jsx(M,{children:U?q.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ze,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:'No alert rules configured. Click "Create Alert" to add one.'})]}):e.jsx("div",{className:"space-y-3",children:q.map(l=>e.jsxs(F,{className:"border-border",children:[e.jsx(B,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-lg",children:l.name}),e.jsxs(H,{className:"text-xs mt-1",children:["For: ",l.for,"  Channels: ",l.notificationChannels.join(", ")]})]}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>Xt(l.id),children:e.jsx(_e,{className:"h-4 w-4"})})]})}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{className:"text-xs",children:"PromQL Query"}),e.jsx("div",{className:"p-2 bg-muted rounded font-mono text-sm",children:l.condition.query})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(E,{className:"text-xs",children:"Evaluator"}),e.jsx(Y,{variant:"outline",children:l.condition.evaluator.type})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(E,{className:"text-xs",children:"Threshold"}),e.jsx(Y,{variant:"outline",children:l.condition.evaluator.params.join(", ")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(E,{className:"text-xs",children:"Reducer"}),e.jsx(Y,{variant:"outline",children:l.condition.reducer.type})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{className:"text-xs",children:"Summary"}),e.jsx("div",{className:"text-sm",children:l.annotations.summary}),l.annotations.description&&e.jsx("div",{className:"text-xs text-muted-foreground",children:l.annotations.description})]})]})]},l.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ze,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Alerting is disabled. Enable it to create alert rules."})]})})]})]}),e.jsx(Ae,{value:"settings",className:"space-y-4 mt-4",children:e.jsxs(F,{children:[e.jsxs(B,{children:[e.jsx(K,{children:"Administration"}),e.jsx(H,{children:"Grafana server configuration"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"admin-user",children:"Admin Username"}),e.jsx(Q,{id:"admin-user",value:D,onChange:l=>T({adminUser:l.target.value}),placeholder:"admin"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"admin-password",children:"Admin Password"}),e.jsx(Q,{id:"admin-password",type:"password",value:X,onChange:l=>T({adminPassword:l.target.value}),placeholder:"admin"})]})]}),e.jsx(lt,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(E,{children:"Enable Authentication"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Require login to access Grafana"})]}),e.jsx(Ue,{checked:le,onCheckedChange:l=>T({enableAuth:l})})]}),le&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Auth Provider"}),e.jsxs(ae,{value:he,onValueChange:l=>T({authProvider:l}),children:[e.jsx(se,{children:e.jsx(re,{})}),e.jsxs(ne,{children:[e.jsx(S,{value:"ldap",children:"LDAP"}),e.jsx(S,{value:"oauth",children:"OAuth"}),e.jsx(S,{value:"saml",children:"SAML"}),e.jsx(S,{value:"jwt",children:"JWT"})]})]})]})]})]})})]})]}),e.jsx(ca,{open:x,onOpenChange:o,children:e.jsxs(oa,{className:"max-w-[95vw] max-h-[95vh] w-full h-full p-0",children:[e.jsx(da,{className:"sr-only",children:e.jsx(ua,{children:"Grafana Dashboard"})}),e.jsx("div",{className:"h-full",children:e.jsx(wt,{componentId:s,dashboardId:y,onClose:()=>o(!1)})})]})})]})}catch(h){return ha("Error rendering GrafanaConfigAdvanced",h instanceof Error?h:new Error(String(h))),e.jsxs("div",{className:"p-4 text-destructive",children:[e.jsx("p",{children:"Error loading Grafana configuration"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:String(h)})]})}}export{Ds as GrafanaConfigAdvanced};

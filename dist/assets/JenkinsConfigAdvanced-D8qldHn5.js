import{E as Nt,ax as R,aw as Xs,r as f,u as bt,X as yt,j as e,V as wt,A as xs,B as te,S as Xe,C as A,e as F,f as I,k as L,T as Is,a as Ts,b as Q,c as Ct,d as Z,h as X,i as b,P as fe,N as Pt,U as Vs,F as At,m as ge,t as ce,n as Ee,o as Se,p as De,q as Oe,s as V,K as Bt,I as E,a5 as $s,M as kt,L as v,al as zs,D as Le,v as Re,w as Fe,x as Ie,y as Te,l as Ge,z as Ye,aj as Et,ah as St}from"./index-VkfV5NX_.js";import{P as Ve}from"./progress-aInC0in1.js";import{T as hs}from"./textarea-DmRVsU5A.js";import{u as Dt}from"./use-toast-Bl_GMOYR.js";import{G as ps}from"./git-branch-5_XRFqi2.js";import{P as Qe}from"./package-65hva233.js";import{S as js}from"./server-gMmfqP74.js";import{U as _s}from"./users-B7pwLqVs.js";import{C as Ot}from"./chart-column-DZ5e5f41.js";import{T as Lt}from"./trending-up-HGYlK7p1.js";import{f as Ne,L as $e,M as Ze,n as ye,C as fs,A as Rt,l as be,h as Ms,N as Ft,m as Us,O as It,o as Tt,u as Vt,i as ys,G as $t,j as Js,P as Ks,D as zt,y as _t,X as es,Y as ss,Q as Mt,R as gs,J as vs,B as Ns,K as bs,F as Ut,I as Jt,E as Kt,H as Wt}from"./BarChart-C-mQKayi.js";import{C as Ws}from"./clock-Bmw9TmAC.js";import{L as Ht}from"./loader-circle-C6hqy9ij.js";const qt=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Xt=Nt("history",qt);var Gt=["layout","type","stroke","connectNulls","isRange","ref"],Yt=["key"],Gs;function we(a){"@babel/helpers - typeof";return we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},we(a)}function Ys(a,c){if(a==null)return{};var d=Qt(a,c),l,m;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);for(m=0;m<u.length;m++)l=u[m],!(c.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(a,l)&&(d[l]=a[l])}return d}function Qt(a,c){if(a==null)return{};var d={};for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l)){if(c.indexOf(l)>=0)continue;d[l]=a[l]}return d}function ve(){return ve=Object.assign?Object.assign.bind():function(a){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&(a[l]=d[l])}return a},ve.apply(this,arguments)}function Hs(a,c){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);c&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable})),d.push.apply(d,l)}return d}function me(a){for(var c=1;c<arguments.length;c++){var d=arguments[c]!=null?arguments[c]:{};c%2?Hs(Object(d),!0).forEach(function(l){ae(a,l,d[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):Hs(Object(d)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(d,l))})}return a}function Zt(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}function qs(a,c){for(var d=0;d<c.length;d++){var l=c[d];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,Zs(l.key),l)}}function en(a,c,d){return c&&qs(a.prototype,c),d&&qs(a,d),Object.defineProperty(a,"prototype",{writable:!1}),a}function sn(a,c,d){return c=ts(c),tn(a,Qs()?Reflect.construct(c,d||[],ts(a).constructor):c.apply(a,d))}function tn(a,c){if(c&&(we(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nn(a)}function nn(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Qs(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qs=function(){return!!a})()}function ts(a){return ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},ts(a)}function an(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),c&&ws(a,c)}function ws(a,c){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,m){return l.__proto__=m,l},ws(a,c)}function ae(a,c,d){return c=Zs(c),c in a?Object.defineProperty(a,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[c]=d,a}function Zs(a){var c=rn(a,"string");return we(c)=="symbol"?c:c+""}function rn(a,c){if(we(a)!="object"||!a)return a;var d=a[Symbol.toPrimitive];if(d!==void 0){var l=d.call(a,c);if(we(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var re=(function(a){function c(){var d;Zt(this,c);for(var l=arguments.length,m=new Array(l),u=0;u<l;u++)m[u]=arguments[u];return d=sn(this,c,[].concat(m)),ae(d,"state",{isAnimationFinished:!0}),ae(d,"id",Vt("recharts-area-")),ae(d,"handleAnimationEnd",function(){var h=d.props.onAnimationEnd;d.setState({isAnimationFinished:!0}),ys(h)&&h()}),ae(d,"handleAnimationStart",function(){var h=d.props.onAnimationStart;d.setState({isAnimationFinished:!1}),ys(h)&&h()}),d}return an(c,a),en(c,[{key:"renderDots",value:function(l,m,u){var h=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(h&&!o)return null;var j=this.props,p=j.dot,w=j.points,g=j.dataKey,B=Ne(this.props,!1),S=Ne(p,!0),K=w.map(function($,H){var z=me(me(me({key:"dot-".concat(H),r:3},B),S),{},{index:H,cx:$.x,cy:$.y,dataKey:g,value:$.value,payload:$.payload,points:w});return c.renderDotItem(p,z)}),W={clipPath:l?"url(#clipPath-".concat(m?"":"dots-").concat(u,")"):null};return R.createElement($e,ve({className:"recharts-area-dots"},W),K)}},{key:"renderHorizontalRect",value:function(l){var m=this.props,u=m.baseLine,h=m.points,o=m.strokeWidth,j=h[0].x,p=h[h.length-1].x,w=l*Math.abs(j-p),g=Ze(h.map(function(B){return B.y||0}));return ye(u)&&typeof u=="number"?g=Math.max(u,g):u&&Array.isArray(u)&&u.length&&(g=Math.max(Ze(u.map(function(B){return B.y||0})),g)),ye(g)?R.createElement("rect",{x:j<p?j:j-w,y:0,width:w,height:Math.floor(g+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(l){var m=this.props,u=m.baseLine,h=m.points,o=m.strokeWidth,j=h[0].y,p=h[h.length-1].y,w=l*Math.abs(j-p),g=Ze(h.map(function(B){return B.x||0}));return ye(u)&&typeof u=="number"?g=Math.max(u,g):u&&Array.isArray(u)&&u.length&&(g=Math.max(Ze(u.map(function(B){return B.x||0})),g)),ye(g)?R.createElement("rect",{x:0,y:j<p?j:j-w,width:g+(o?parseInt("".concat(o),10):1),height:Math.floor(w)}):null}},{key:"renderClipRect",value:function(l){var m=this.props.layout;return m==="vertical"?this.renderVerticalRect(l):this.renderHorizontalRect(l)}},{key:"renderAreaStatically",value:function(l,m,u,h){var o=this.props,j=o.layout,p=o.type,w=o.stroke,g=o.connectNulls,B=o.isRange;o.ref;var S=Ys(o,Gt);return R.createElement($e,{clipPath:u?"url(#clipPath-".concat(h,")"):null},R.createElement(fs,ve({},Ne(S,!0),{points:l,connectNulls:g,type:p,baseLine:m,layout:j,stroke:"none",className:"recharts-area-area"})),w!=="none"&&R.createElement(fs,ve({},Ne(this.props,!1),{className:"recharts-area-curve",layout:j,type:p,connectNulls:g,fill:"none",points:l})),w!=="none"&&B&&R.createElement(fs,ve({},Ne(this.props,!1),{className:"recharts-area-curve",layout:j,type:p,connectNulls:g,fill:"none",points:m})))}},{key:"renderAreaWithAnimation",value:function(l,m){var u=this,h=this.props,o=h.points,j=h.baseLine,p=h.isAnimationActive,w=h.animationBegin,g=h.animationDuration,B=h.animationEasing,S=h.animationId,K=this.state,W=K.prevPoints,$=K.prevBaseLine;return R.createElement(Rt,{begin:w,duration:g,isActive:p,easing:B,from:{t:0},to:{t:1},key:"area-".concat(S),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(H){var z=H.t;if(W){var x=W.length/o.length,D=o.map(function(G,ee){var le=Math.floor(ee*x);if(W[le]){var Y=W[le],ne=be(Y.x,G.x),xe=be(Y.y,G.y);return me(me({},G),{},{x:ne(z),y:xe(z)})}return G}),k;if(ye(j)&&typeof j=="number"){var T=be($,j);k=T(z)}else if(Ms(j)||Ft(j)){var q=be($,0);k=q(z)}else k=j.map(function(G,ee){var le=Math.floor(ee*x);if($[le]){var Y=$[le],ne=be(Y.x,G.x),xe=be(Y.y,G.y);return me(me({},G),{},{x:ne(z),y:xe(z)})}return G});return u.renderAreaStatically(D,k,l,m)}return R.createElement($e,null,R.createElement("defs",null,R.createElement("clipPath",{id:"animationClipPath-".concat(m)},u.renderClipRect(z))),R.createElement($e,{clipPath:"url(#animationClipPath-".concat(m,")")},u.renderAreaStatically(o,j,l,m)))})}},{key:"renderArea",value:function(l,m){var u=this.props,h=u.points,o=u.baseLine,j=u.isAnimationActive,p=this.state,w=p.prevPoints,g=p.prevBaseLine,B=p.totalLength;return j&&h&&h.length&&(!w&&B>0||!Us(w,h)||!Us(g,o))?this.renderAreaWithAnimation(l,m):this.renderAreaStatically(h,o,l,m)}},{key:"render",value:function(){var l,m=this.props,u=m.hide,h=m.dot,o=m.points,j=m.className,p=m.top,w=m.left,g=m.xAxis,B=m.yAxis,S=m.width,K=m.height,W=m.isAnimationActive,$=m.id;if(u||!o||!o.length)return null;var H=this.state.isAnimationFinished,z=o.length===1,x=Xs("recharts-area",j),D=g&&g.allowDataOverflow,k=B&&B.allowDataOverflow,T=D||k,q=Ms($)?this.id:$,G=(l=Ne(h,!1))!==null&&l!==void 0?l:{r:3,strokeWidth:2},ee=G.r,le=ee===void 0?3:ee,Y=G.strokeWidth,ne=Y===void 0?2:Y,xe=It(h)?h:{},he=xe.clipDot,pe=he===void 0?!0:he,oe=le*2+ne;return R.createElement($e,{className:x},D||k?R.createElement("defs",null,R.createElement("clipPath",{id:"clipPath-".concat(q)},R.createElement("rect",{x:D?w:w-S/2,y:k?p:p-K/2,width:D?S:S*2,height:k?K:K*2})),!pe&&R.createElement("clipPath",{id:"clipPath-dots-".concat(q)},R.createElement("rect",{x:w-oe/2,y:p-oe/2,width:S+oe,height:K+oe}))):null,z?null:this.renderArea(T,q),(h||z)&&this.renderDots(T,pe,q),(!W||H)&&Tt.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(l,m){return l.animationId!==m.prevAnimationId?{prevAnimationId:l.animationId,curPoints:l.points,curBaseLine:l.baseLine,prevPoints:m.curPoints,prevBaseLine:m.curBaseLine}:l.points!==m.curPoints||l.baseLine!==m.curBaseLine?{curPoints:l.points,curBaseLine:l.baseLine}:null}}])})(f.PureComponent);Gs=re;ae(re,"displayName","Area");ae(re,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!$t.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ae(re,"getBaseValue",function(a,c,d,l){var m=a.layout,u=a.baseValue,h=c.props.baseValue,o=h??u;if(ye(o)&&typeof o=="number")return o;var j=m==="horizontal"?l:d,p=j.scale.domain();if(j.type==="number"){var w=Math.max(p[0],p[1]),g=Math.min(p[0],p[1]);return o==="dataMin"?g:o==="dataMax"||w<0?w:Math.max(Math.min(p[0],p[1]),0)}return o==="dataMin"?p[0]:o==="dataMax"?p[1]:p[0]});ae(re,"getComposedData",function(a){var c=a.props,d=a.item,l=a.xAxis,m=a.yAxis,u=a.xAxisTicks,h=a.yAxisTicks,o=a.bandSize,j=a.dataKey,p=a.stackedData,w=a.dataStartIndex,g=a.displayedData,B=a.offset,S=c.layout,K=p&&p.length,W=Gs.getBaseValue(c,d,l,m),$=S==="horizontal",H=!1,z=g.map(function(D,k){var T;K?T=p[w+k]:(T=Js(D,j),Array.isArray(T)?H=!0:T=[W,T]);var q=T[1]==null||K&&Js(D,j)==null;return $?{x:Ks({axis:l,ticks:u,bandSize:o,entry:D,index:k}),y:q?null:m.scale(T[1]),value:T,payload:D}:{x:q?null:l.scale(T[1]),y:Ks({axis:m,ticks:h,bandSize:o,entry:D,index:k}),value:T,payload:D}}),x;return K||H?x=z.map(function(D){var k=Array.isArray(D.value)?D.value[0]:null;return $?{x:D.x,y:k!=null&&D.y!=null?m.scale(k):null}:{x:k!=null?l.scale(k):null,y:D.y}}):x=$?m.scale(W):l.scale(W),me({points:z,baseLine:x,layout:S,isRange:H},B)});ae(re,"renderDotItem",function(a,c){var d;if(R.isValidElement(a))d=R.cloneElement(a,c);else if(ys(a))d=a(c);else{var l=Xs("recharts-area-dot",typeof a!="boolean"?a.className:""),m=c.key,u=Ys(c,Yt);d=R.createElement(zt,ve({},u,{key:m,className:l}))}return d});var ln=_t({chartName:"AreaChart",GraphicalChild:re,axisComponents:[{axisType:"xAxis",AxisComp:es},{axisType:"yAxis",AxisComp:ss}],formatAxisMap:Mt});function Pn({componentId:a}){const{nodes:c,updateNode:d}=bt(),{isRunning:l,getComponentMetrics:m}=yt(),{toast:u}=Dt(),h=c.find(s=>s.id===a);if(!h)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const o=wt.getJenkinsEmulationEngine(a),j=m(a),[p,w]=f.useState([]),[g,B]=f.useState([]),[S,K]=f.useState([]),[W,$]=f.useState([]),[H,z]=f.useState([]),[x,D]=f.useState(null),[k,T]=f.useState(null),[q,G]=f.useState(""),[ee,le]=f.useState("all"),[Y,ne]=f.useState(null),[xe,he]=f.useState(!1),[pe,oe]=f.useState(""),[ze,ns]=f.useState(1),[Cs,is]=f.useState(""),[Ps,as]=f.useState(""),[et,_e]=f.useState(!1),[rs,Ce]=f.useState(""),[cn,on]=f.useState(null),[ie,As]=f.useState(null),[st,ls]=f.useState(!1),[Bs,ks]=f.useState([]),[Es,Ss]=f.useState([]),[cs,Ds]=f.useState([]),[dn,un]=f.useState(null);f.useEffect(()=>{if(!S.length){Ds([]);return}const s=Date.now(),t=6e4,n=20,i=[];for(let r=n-1;r>=0;r--){const N=s-(r+1)*t,P=s-r*t,M=S.filter(O=>{const y=O.startTime||(O.duration?s-O.duration:s);return y>=N&&y<P});if(M.length>0){const O=M.filter(je=>je.status==="success").length,y=M.filter(je=>je.status==="failed").length,ue=M.filter(je=>je.duration!==void 0),ke=ue.length>0?ue.reduce((je,vt)=>je+(vt.duration||0),0)/ue.length/1e3:0;i.push({time:new Date(P).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),builds:M.length,success:O,failed:y,duration:ke})}else i.push({time:new Date(P).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),builds:0,success:0,failed:0,duration:0})}Ds(i)},[S]);const[Me,Pe]=f.useState(""),[Ue,Ae]=f.useState(""),[os,Be]=f.useState(""),[Je,se]=f.useState("");f.useEffect(()=>{if(!o)return;const s=()=>{try{const n=o.getPipelines(),i=o.getActiveBuilds(),r=o.getAllBuilds(),N=o.getNodes(),P=o.getPlugins(),M=o.getJenkinsMetrics();if(w(O=>JSON.stringify(O)!==JSON.stringify(n)?n:O),B(O=>JSON.stringify(O)!==JSON.stringify(i)?i:O),K(O=>{if(O.length!==r.length)return r;const y=O.filter(ke=>ke.status==="running").length,ue=r.filter(ke=>ke.status==="running").length;return y!==ue?r:O}),$(N),z(P),D(M),ie){const O=r.find(y=>y.id===ie);if(O&&(O.status==="running"||O.logs)){const y=o.getBuildLogs(ie),ue=o.getBuildArtifacts(ie);y&&ks(y),ue&&Ss(ue)}}}catch(n){console.error("Error updating Jenkins data:",n)}};s();const t=setInterval(s,l?500:2e3);return()=>clearInterval(t)},[o,l,ie]);const tt=s=>{if(As(s),ls(!0),o){const t=o.getBuildLogs(s),n=o.getBuildArtifacts(s);t&&ks(t),n&&Ss(n)}},Os=s=>{if(!o){u({title:"Error",description:"Jenkins engine not available",variant:"destructive"});return}const t=S.find(n=>n.id===s);if(!t){u({title:"Error",description:"Build not found",variant:"destructive"});return}if(t.status!=="running"&&t.status!=="pending"){u({title:"Cannot cancel build",description:`Build is already ${t.status}`,variant:"destructive"});return}try{const n=o.cancelBuild(s);n.success?(u({title:"Build cancelled",description:`Build #${t.number} has been cancelled successfully`}),ie===s&&(ls(!1),As(null))):u({title:"Cannot cancel build",description:n.reason||"Unknown error",variant:"destructive"})}catch(n){console.error("Error cancelling build:",n),u({title:"Error",description:"Failed to cancel build",variant:"destructive"})}},Ls=s=>s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(2)} KB`:`${(s/(1024*1024)).toFixed(2)} MB`,U=h.data.config||{},nt=U.jenkinsUrl||"http://jenkins:8080",it=U.enableCSRF??!0,Ke=U.executorCount||2;U.enablePlugins;const Rs=U.plugins||["git","docker","kubernetes"],at=U.enablePipeline??!0,rt=U.enableBlueOcean??!1,Fs=U.enableArtifactArchiving??!0,lt=U.retentionDays||30,J=p.length>0?p.map(s=>({id:s.id,name:s.name,status:s.status,lastBuild:s.lastBuild,duration:s.duration,branch:s.branch})):U.pipelines||[],_=s=>{if(s.jenkinsUrl!==void 0)try{new URL(s.jenkinsUrl)}catch{u({title:"Invalid URL",description:"Please enter a valid Jenkins URL",variant:"destructive"});return}if(s.executorCount!==void 0){if(s.executorCount<1||s.executorCount>100){u({title:"Invalid executor count",description:"Executor count must be between 1 and 100",variant:"destructive"});return}if(o){const n=o.canUpdateExecutorCount(s.executorCount);if(!n.can){u({title:"Cannot update executors",description:n.reason||"Cannot update executor count",variant:"destructive"});return}}}if(s.retentionDays!==void 0&&(s.retentionDays<1||s.retentionDays>365)){u({title:"Invalid retention days",description:"Retention days must be between 1 and 365",variant:"destructive"});return}const t={...U,...s};if(d(a,{data:{...h.data,config:t}}),o)try{o.updateConfig({...h,data:{...h.data,config:t}})}catch(n){console.error("Failed to update Jenkins engine config:",n)}u({title:"Configuration updated",description:"Jenkins configuration has been saved"})},ds=(s,t)=>s.trim()?s.trim().length<2?"Pipeline name must be at least 2 characters":s.trim().length>100?"Pipeline name must be less than 100 characters":/^[a-zA-Z0-9_-]+$/.test(s.trim())?J.some(n=>n.name===s.trim()&&n.id!==t)?"A pipeline with this name already exists":"":"Pipeline name can only contain letters, numbers, hyphens and underscores":"Pipeline name is required",ct=()=>{const s=`pipeline-${Date.now().toString().slice(-6)}`,n={id:String(Date.now()),name:s,lastBuild:0,branch:"main",enabled:!0};_({pipelines:[...J,n]}),u({title:"Pipeline created",description:`Pipeline "${s}" has been created. It will be initialized in emulation.`})},ot=s=>{const t=J.find(r=>r.id===s);if(!t)return;const n=String(Date.now()),i={...t,id:n,name:`${t.name}-copy`,lastBuild:0};_({pipelines:[...J,i]}),u({title:"Pipeline duplicated",description:`Pipeline "${t.name}" has been duplicated as "${i.name}".`})},de=U.nodes||[],us=s=>s.trim()?s.trim().length<2?"Node name must be at least 2 characters":s.trim().length>100?"Node name must be less than 100 characters":/^[a-zA-Z0-9_-]+$/.test(s.trim())?de.some(t=>t.name===s.trim())?"A node with this name already exists":"":"Node name can only contain letters, numbers, hyphens and underscores":"Node name is required",ms=s=>s<1?"Must have at least 1 executor":s>100?"Cannot have more than 100 executors":"",dt=()=>{const s=us(pe),t=ms(ze);if(Pe(s),Ae(t),s||t)return;const n={id:String(Date.now()),name:pe.trim(),numExecutors:ze,labels:Cs.split(",").map(i=>i.trim()).filter(i=>i.length>0),description:Ps.trim()||void 0};_({nodes:[...de,n]}),oe(""),ns(1),is(""),as(""),Pe(""),Ae(""),he(!1)},ut=s=>{ne(s)},mt=(s,t)=>{const n=de.map(i=>i.id===s?{...i,...t}:i);_({nodes:n}),ne(null)},xt=s=>{de.find(n=>n.id===s)&&_({nodes:de.filter(n=>n.id!==s)})},ht=s=>{T(s)},C=(s,t)=>{if(t.name!==void 0){const n=ds(t.name,s);if(n){Be(n),u({title:"Validation error",description:n,variant:"destructive"});return}Be("")}try{const n=J.map(i=>i.id===s?{...i,...t}:i);if(_({pipelines:n}),o&&(t.enabled!==void 0&&o.setPipelineEnabled(s,t.enabled!==!1),t.triggers!==void 0||t.parameters!==void 0||t.environmentVariables!==void 0||t.postBuildActions!==void 0)){const i=n.find(r=>r.id===s);i&&o.updatePipelineConfig(s,{triggers:i.triggers||[],parameters:i.parameters||[],environmentVariables:i.environmentVariables||{},postBuildActions:i.postBuildActions||[]})}(t.name!==void 0||t.branch!==void 0||t.enabled!==void 0)&&u({title:"Pipeline updated",description:"Pipeline configuration has been saved."})}catch(n){console.error("Error saving pipeline:",n),u({title:"Error",description:"Failed to save pipeline configuration.",variant:"destructive"})}},pt=s=>{const t=J.find(i=>i.id===s);if(!t)return;if(o&&g.some(i=>i.pipelineId===s&&i.status==="running")){u({title:"Cannot delete pipeline",description:"Pipeline has active builds. Please wait for builds to complete or cancel them first.",variant:"destructive"});return}_({pipelines:J.filter(i=>i.id!==s)}),u({title:"Pipeline deleted",description:`Pipeline "${t.name}" has been deleted.`})},We=s=>s.trim()?s.trim().length<2?"Plugin name must be at least 2 characters":s.trim().length>100?"Plugin name must be less than 100 characters":/^[a-zA-Z0-9_-]+$/.test(s.trim())?(U.plugins||[]).some(n=>(typeof n=="string"?n:n.name)===s.trim())?"This plugin is already installed":"":"Plugin name can only contain letters, numbers, hyphens and underscores":"Plugin name is required",jt=s=>{const t=s.trim();if(!t){se("Plugin name is required");return}const n=We(t);if(n){se(n);return}if(o){if(!o.addPlugin(t)){se("This plugin is already installed");return}const r=U.plugins||[];_({plugins:[...r,t]})}else{const i=U.plugins||[];if(i.some(r=>(typeof r=="string"?r:r.name)===t)){se("This plugin is already installed");return}_({plugins:[...i,t]})}Ce(""),se(""),_e(!1),u({title:"Plugin installed",description:`Plugin "${t}" has been installed`})},ft=s=>{if(o){const n=o.removePlugin(s);if(!n.success){u({title:"Cannot remove plugin",description:n.reason||"Cannot remove plugin",variant:"destructive"});return}}const t=U.plugins||[];_({plugins:t.filter(n=>(typeof n=="string"?n:n.name)!==s)})},gt=(s,t)=>{o&&(o.setPluginEnabled(s,t),z(o.getPlugins()));const i=(U.plugins||[]).map(r=>typeof r=="string"?r===s?{name:r,enabled:t}:r:r.name===s?{...r,enabled:t}:r);_({plugins:i}),u({title:t?"Plugin enabled":"Plugin disabled",description:`Plugin "${s}" has been ${t?"enabled":"disabled"}`})},He=s=>{switch(s){case"success":return e.jsx(zs,{className:"h-4 w-4 text-green-500"});case"running":return e.jsx(Ht,{className:"h-4 w-4 text-blue-500 animate-spin"});case"failed":return e.jsx(St,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})}},qe=(s,t)=>{if(t===0)return e.jsx(te,{variant:"outline",children:"Never built"});switch(s){case"success":return e.jsx(te,{variant:"default",className:"bg-green-500",children:"Success"});case"running":return e.jsx(te,{variant:"default",className:"bg-blue-500",children:"Running"});case"failed":return e.jsx(te,{variant:"destructive",children:"Failed"});default:return e.jsx(te,{variant:"secondary",children:"Pending"})}};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-500/10",children:e.jsx(xs,{className:"h-6 w-6 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Jenkins"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Continuous Integration & Delivery"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(te,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${l?"bg-green-500 animate-pulse":"bg-gray-500"}`}),l?"Running":"Stopped"]}),j&&e.jsxs(te,{variant:"outline",className:"gap-1",children:[e.jsx(xs,{className:"h-3 w-3"}),j.throughput?.toFixed(2)||0," req/s"]})]})]}),e.jsx(Xe,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(A,{children:[e.jsx(F,{className:"pb-3",children:e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Pipelines"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x?.pipelinesTotal||J.length}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[x?.pipelinesEnabled||J.length," enabled"]})]})]}),e.jsxs(A,{children:[e.jsx(F,{className:"pb-3",children:e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Executors"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x?`${x.executorBusy}/${x.executorBusy+x.executorIdle}`:Ke}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:x?`${x.executorUtilization.toFixed(1)}% utilized`:"Available"})]})]}),e.jsxs(A,{children:[e.jsx(F,{className:"pb-3",children:e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Builds"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x?.buildsRunning||g.length||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:x?`${x.buildsPerMinute.toFixed(1)}/min`:"Running"})]})]}),e.jsxs(A,{children:[e.jsx(F,{className:"pb-3",children:e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x&&x.buildsSuccess+x.buildsFailed>0?`${(x.buildsSuccess/(x.buildsSuccess+x.buildsFailed)*100).toFixed(1)}%`:(x&&x.buildsTotal>0,"—")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:x?x.buildsSuccess+x.buildsFailed>0?`${x.buildsSuccess} success, ${x.buildsFailed} failed`:x.buildsTotal>0||x.buildsRunning>0?`${x.buildsRunning} running, ${x.buildsPending} pending`:"No builds yet":"No metrics"})]})]})]}),e.jsxs(Is,{defaultValue:"pipelines",className:"w-full",children:[e.jsxs(Ts,{className:"grid w-full grid-cols-7",children:[e.jsxs(Q,{value:"pipelines",className:"gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),"Pipelines"]}),e.jsxs(Q,{value:"builds",className:"gap-2",children:[e.jsx(Xt,{className:"h-4 w-4"}),"Builds"]}),e.jsxs(Q,{value:"plugins",className:"gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Plugins"]}),e.jsxs(Q,{value:"nodes",className:"gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Nodes"]}),e.jsxs(Q,{value:"executors",className:"gap-2",children:[e.jsx(_s,{className:"h-4 w-4"}),"Executors"]}),e.jsxs(Q,{value:"settings",className:"gap-2",children:[e.jsx(Ct,{className:"h-4 w-4"}),"Settings"]}),e.jsxs(Q,{value:"metrics",className:"gap-2",children:[e.jsx(Ot,{className:"h-4 w-4"}),"Metrics"]})]}),e.jsx(Z,{value:"pipelines",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Pipelines"}),e.jsx(X,{children:"CI/CD pipeline configuration and monitoring"})]}),e.jsxs(b,{size:"sm",onClick:ct,variant:"outline",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"New Pipeline"]})]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3",children:J.map(s=>e.jsxs(A,{className:"border-border",children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[He(s.status),e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{className:"text-lg",children:s.name}),e.jsxs(X,{className:"text-xs mt-1 flex items-center gap-2",children:[e.jsx(ps,{className:"h-3 w-3"}),s.branch||"main"," • Build #",s.lastBuild,s.duration&&` • ${s.duration}s`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[qe(s.status,s.lastBuild),o&&e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>{const t=o.triggerBuildManually(s.id);t.success?u({title:"Build triggered",description:`Build #${t.buildId} started for ${s.name}`}):u({title:"Cannot trigger build",description:t.reason||"Unknown error",variant:"destructive"})},disabled:!s.enabled||s.status==="running",children:[e.jsx(Pt,{className:"h-4 w-4 mr-1"}),"Build Now"]}),e.jsx(b,{size:"icon",variant:"ghost",onClick:()=>ht(s.id),title:"Edit pipeline",children:e.jsx(Vs,{className:"h-4 w-4"})}),e.jsx(b,{size:"icon",variant:"ghost",onClick:()=>ot(s.id),title:"Duplicate pipeline",children:e.jsx(At,{className:"h-4 w-4"})}),J.length>1&&e.jsx(b,{size:"icon",variant:"ghost",onClick:()=>pt(s.id),title:"Delete pipeline",children:e.jsx(ge,{className:"h-4 w-4"})})]})]})}),s.status==="running"&&e.jsx(L,{children:e.jsx("div",{className:"space-y-2",children:(()=>{const n=g.find(i=>i.pipelineId===s.id)?.progress||0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{children:[n,"%"]})]}),e.jsx(Ve,{value:n,className:"h-2"})]})})()})})]},s.id))})})]})}),e.jsx(Z,{value:"plugins",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Plugins"}),e.jsx(X,{children:"Installed Jenkins plugins"})]}),e.jsxs(b,{size:"sm",onClick:()=>_e(!0),variant:"outline",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Install Plugin"]})]})}),e.jsx(L,{children:H.length===0&&Rs.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Qe,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No plugins installed"})]}):e.jsx("div",{className:"space-y-2",children:(H.length>0?H:Rs.map(t=>typeof t=="string"?{name:t,version:"1.0.0",enabled:!0,active:!0}:{name:t.name||(typeof t=="object"&&t!==null?String(t):"unknown"),version:t.version||"1.0.0",enabled:t.enabled!==!1,active:t.active!==!1,description:t.description})).map(t=>{const n=t.name,i=t.version||"1.0.0",r=t.enabled!==!1,N=H.length>0?t.active!==!1&&r:r,P=t.description;return e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-border rounded-lg bg-card",children:[e.jsx("div",{className:"p-2 rounded bg-primary/10",children:e.jsx(Qe,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:n}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[P||"Plugin installed"," • v",i]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{checked:r,onCheckedChange:M=>gt(n,M)}),e.jsx(te,{variant:N?"default":"secondary",children:N?"Active":"Inactive"}),e.jsx(b,{size:"icon",variant:"ghost",onClick:()=>ft(n),children:e.jsx(ge,{className:"h-4 w-4"})})]})]},n)})})})]})}),e.jsx(Z,{value:"builds",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Builds"}),e.jsx(X,{children:"Build history and active builds"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ee,{value:ee,onValueChange:s=>le(s),children:[e.jsx(Se,{className:"w-32",children:e.jsx(De,{})}),e.jsxs(Oe,{children:[e.jsx(V,{value:"all",children:"All"}),e.jsx(V,{value:"active",children:"Active"}),e.jsx(V,{value:"success",children:"Success"}),e.jsx(V,{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(E,{placeholder:"Search builds...",value:q,onChange:s=>G(s.target.value),className:"pl-8 w-64"})]})]})]})}),e.jsx(L,{children:(()=>{let s=S;return ee==="active"?s=s.filter(t=>t.status==="running"||t.status==="pending"):ee==="success"?s=s.filter(t=>t.status==="success"):ee==="failed"&&(s=s.filter(t=>t.status==="failed")),q&&(s=s.filter(t=>t.pipelineId.toLowerCase().includes(q.toLowerCase())||t.id.toLowerCase().includes(q.toLowerCase())||J.find(n=>n.id===t.pipelineId)?.name.toLowerCase().includes(q.toLowerCase()))),s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(xs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No builds found"})]}):e.jsx("div",{className:"space-y-3",children:s.map(t=>e.jsxs(A,{className:"border-border",children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[He(t.status),e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{className:"text-lg",children:J.find(n=>n.id===t.pipelineId)?.name||t.pipelineId}),e.jsxs(X,{className:"text-xs mt-1 flex items-center gap-2",children:["Build #",t.number,t.branch&&e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"h-3 w-3"}),t.branch]}),t.duration&&` • ${(t.duration/1e3).toFixed(1)}s`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[qe(t.status),t.status==="running"&&o&&e.jsxs(b,{size:"sm",variant:"destructive",onClick:()=>Os(t.id),children:[e.jsx($s,{className:"h-4 w-4 mr-1"}),"Cancel"]}),e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>tt(t.id),children:[e.jsx(kt,{className:"h-4 w-4 mr-1"}),"Details"]})]})]})}),t.status==="running"&&t.progress!==void 0&&e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{children:[t.progress,"%"]})]}),e.jsx(Ve,{value:t.progress,className:"h-2"}),t.stages&&t.stages.length>0&&e.jsx("div",{className:"mt-3 space-y-1",children:t.stages.map((n,i)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[He(n.status),e.jsx("span",{className:n.status==="running"?"font-semibold":"",children:n.name})]},i))})]})}),t.status!=="running"&&t.duration&&e.jsx(L,{children:e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Duration: ",(t.duration/1e3).toFixed(1),"s • Started: ",new Date(t.startTime).toLocaleString()]})})]},t.id))})})()})]})}),e.jsx(Z,{value:"executors",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsx(I,{children:"Executor Configuration"}),e.jsx(X,{children:"Manage concurrent build executors on master node"})]}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"executor-count",children:"Executor Count"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{id:"executor-count",type:"number",min:"1",max:"100",value:Ke,onChange:s=>{const t=parseInt(s.target.value)||2;_({executorCount:t})}}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"concurrent builds"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Number of concurrent builds that can run simultaneously on master node"}),x&&e.jsxs("div",{className:"mt-4 p-3 border rounded-md bg-muted",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Current Status:"}),e.jsxs("span",{className:"font-semibold",children:[x.executorBusy," busy / ",x.executorBusy+x.executorIdle," total"]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(Ve,{value:x.executorUtilization,className:"h-2 flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[x.executorUtilization.toFixed(1),"%"]})]}),x.executorBusy>0&&e.jsxs("p",{className:"text-xs text-amber-600 mt-2",children:["⚠️ ",x.executorBusy," executor(s) are currently busy. You cannot reduce executor count below this value."]})]})]})})]})}),e.jsx(Z,{value:"nodes",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Jenkins Nodes"}),e.jsx(X,{children:"Manage build agents and executors"})]}),e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>he(!0),children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Add Node"]})]})}),e.jsx(L,{children:(()=>{const s=W.length>0?W:[{id:"master",name:"master",status:"online",numExecutors:Ke,busyExecutors:0,idleExecutors:Ke,labels:["master"]},...de.map(t=>({id:t.id,name:t.name,status:"online",numExecutors:t.numExecutors||1,busyExecutors:0,idleExecutors:t.numExecutors||1,labels:t.labels||[],description:t.description}))];return s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(js,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No nodes configured"})]}):e.jsx("div",{className:"space-y-3",children:s.map(t=>{const n=t.id==="master",i=de.find(r=>r.id===t.id);return e.jsxs(A,{className:"border-border",children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded ${t.status==="online"?"bg-green-500/10":"bg-gray-500/10"}`,children:e.jsx(js,{className:`h-4 w-4 ${t.status==="online"?"text-green-500":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(I,{className:"text-lg",children:[t.name,n&&e.jsx(te,{variant:"outline",className:"ml-2 text-xs",children:"Master"})]}),e.jsxs(X,{className:"text-xs mt-1",children:[t.numExecutors," executors • ",t.busyExecutors," busy • ",t.idleExecutors," idle",n&&e.jsx("span",{className:"block mt-1 text-muted-foreground",children:"Master node is the Jenkins controller that manages builds and coordinates agents."})]}),i?.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{variant:t.status==="online"?"default":"secondary",children:t.status}),!n&&e.jsxs(e.Fragment,{children:[e.jsx(b,{size:"icon",variant:"ghost",onClick:()=>ut(t.id),children:e.jsx(Vs,{className:"h-4 w-4"})}),e.jsx(b,{size:"icon",variant:"ghost",onClick:()=>xt(t.id),children:e.jsx(ge,{className:"h-4 w-4"})})]})]})]})}),t.labels&&t.labels.length>0&&e.jsx(L,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:t.labels.map((r,N)=>e.jsx(te,{variant:"outline",className:"text-xs",children:r},N))})})]},t.id)})})})()})]})}),e.jsx(Z,{value:"settings",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsx(I,{children:"Server Configuration"}),e.jsx(X,{children:"Jenkins server settings"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"jenkins-url",children:"Jenkins URL"}),e.jsx(E,{id:"jenkins-url",value:nt,onChange:s=>_({jenkinsUrl:s.target.value}),placeholder:"http://jenkins:8080"})]}),e.jsx(Xe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(v,{children:"Enable CSRF Protection"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Protect against cross-site request forgery"})]}),e.jsx(ce,{checked:it,onCheckedChange:s=>_({enableCSRF:s})})]}),e.jsx(Xe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(v,{children:"Enable Pipelines"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable Jenkins pipeline support"})]}),e.jsx(ce,{checked:at,onCheckedChange:s=>_({enablePipeline:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(v,{children:"Enable Blue Ocean"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Modern pipeline UI"})]}),e.jsx(ce,{checked:rt,onCheckedChange:s=>_({enableBlueOcean:s})})]}),e.jsx(Xe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(v,{children:"Enable Artifact Archiving"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Store build artifacts"})]}),e.jsx(ce,{checked:Fs,onCheckedChange:s=>_({enableArtifactArchiving:s})})]}),Fs&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"retention-days",children:"Retention Days"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{id:"retention-days",type:"number",min:"1",max:"365",value:lt,onChange:s=>_({retentionDays:parseInt(s.target.value)||30})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"days"})]})]})]})]})}),e.jsx(Z,{value:"metrics",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"h-5 w-5"}),"Build Trends"]}),e.jsx(X,{children:"Build count over time"})]}),e.jsx(L,{children:e.jsx(gs,{width:"100%",height:300,children:e.jsxs(ln,{data:cs,children:[e.jsx(vs,{strokeDasharray:"3 3"}),e.jsx(es,{dataKey:"time"}),e.jsx(ss,{}),e.jsx(Ns,{}),e.jsx(bs,{}),e.jsx(re,{type:"monotone",dataKey:"builds",stackId:"1",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),e.jsx(re,{type:"monotone",dataKey:"success",stackId:"2",stroke:"#82ca9d",fill:"#82ca9d",fillOpacity:.6}),e.jsx(re,{type:"monotone",dataKey:"failed",stackId:"2",stroke:"#ff7300",fill:"#ff7300",fillOpacity:.6})]})})})]}),e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-5 w-5 text-green-500"}),"Success Rate"]}),e.jsx(X,{children:"Build success rate over time"})]}),e.jsx(L,{children:e.jsx(gs,{width:"100%",height:300,children:e.jsxs(Ut,{data:cs.map(s=>({...s,successRate:s.builds>0?s.success/s.builds*100:0})),children:[e.jsx(vs,{strokeDasharray:"3 3"}),e.jsx(es,{dataKey:"time"}),e.jsx(ss,{domain:[0,100]}),e.jsx(Ns,{formatter:s=>`${s.toFixed(1)}%`}),e.jsx(bs,{}),e.jsx(Jt,{type:"monotone",dataKey:"successRate",stroke:"#82ca9d",strokeWidth:2,name:"Success Rate",dot:{fill:"#82ca9d",r:4}})]})})})]}),e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-5 w-5"}),"Average Build Duration"]}),e.jsx(X,{children:"Average build duration in seconds"})]}),e.jsx(L,{children:e.jsx(gs,{width:"100%",height:300,children:e.jsxs(Kt,{data:cs,children:[e.jsx(vs,{strokeDasharray:"3 3"}),e.jsx(es,{dataKey:"time"}),e.jsx(ss,{}),e.jsx(Ns,{formatter:s=>`${s.toFixed(1)}s`}),e.jsx(bs,{}),e.jsx(Wt,{dataKey:"duration",fill:"#8884d8",name:"Duration (s)"})]})})})]}),e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-5 w-5"}),"Executor Utilization"]}),e.jsx(X,{children:"Current executor usage"})]}),e.jsx(L,{children:x?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-bold",children:[x.executorUtilization.toFixed(1),"%"]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:[x.executorBusy," / ",x.executorBusy+x.executorIdle," executors busy"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Busy"}),e.jsx("span",{className:"font-medium",children:x.executorBusy})]}),e.jsx(Ve,{value:x.executorUtilization,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Idle"}),e.jsx("span",{className:"font-medium",children:x.executorIdle})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:x.buildsPerMinute.toFixed(1)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Builds/min"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(x.averageBuildDuration/1e3).toFixed(1),"s"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Duration"})]})]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No metrics available"})})]})]})})]}),k&&(()=>{const s=J.find(t=>t.id===k);return s?e.jsx(Le,{open:!!k,onOpenChange:t=>!t&&T(null),children:e.jsxs(Re,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Fe,{children:[e.jsx(Ie,{children:"Edit Pipeline Configuration"}),e.jsx(Te,{children:"Configure pipeline settings, triggers, parameters, and post-build actions"})]}),e.jsxs(Is,{defaultValue:"basic",className:"w-full",children:[e.jsxs(Ts,{className:"grid w-full grid-cols-5",children:[e.jsx(Q,{value:"basic",children:"Basic"}),e.jsx(Q,{value:"triggers",children:"Triggers"}),e.jsx(Q,{value:"parameters",children:"Parameters"}),e.jsx(Q,{value:"environment",children:"Environment"}),e.jsx(Q,{value:"actions",children:"Post-Build"})]}),e.jsxs(Z,{value:"basic",className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"pipeline-name",children:"Name *"}),e.jsx(E,{id:"pipeline-name",defaultValue:s.name,onChange:t=>{const n=ds(t.target.value,s.id);Be(n)},onBlur:t=>{const n=t.target.value.trim(),i=ds(n,s.id);Be(i),!i&&n!==s.name&&C(s.id,{name:n})},className:os?"border-red-500":""}),os&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Ge,{className:"h-3 w-3"}),os]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"pipeline-branch",children:"Branch"}),e.jsx(E,{id:"pipeline-branch",defaultValue:s.branch||"main",onBlur:t=>{t.target.value!==s.branch&&C(s.id,{branch:t.target.value})}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(v,{children:"Enabled"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable/disable pipeline"})]}),e.jsx(ce,{checked:s.enabled!==!1,onCheckedChange:t=>{C(s.id,{enabled:t}),o&&o.setPipelineEnabled(s.id,t)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Status"}),e.jsxs("div",{className:"p-2 border rounded-md bg-muted",children:[qe(s.status,s.lastBuild),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.lastBuild===0?"Pipeline has never been built. Status will be determined after first build.":`Status is determined by the last build (#${s.lastBuild}).`})]})]})]}),e.jsx(Z,{value:"triggers",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Build Triggers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure when builds should be triggered"})]}),e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>{const t=[...s.triggers||[],{type:"webhook",enabled:!0,config:{}}];C(s.id,{triggers:t})},children:[e.jsx(fe,{className:"h-4 w-4 mr-1"}),"Add Trigger"]})]}),(s.triggers||[]).map((t,n)=>e.jsxs(A,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ee,{value:t.type,onValueChange:i=>{const r=[...s.triggers||[]];r[n]={...t,type:i},C(s.id,{triggers:r})},children:[e.jsx(Se,{className:"w-32",children:e.jsx(De,{})}),e.jsxs(Oe,{children:[e.jsx(V,{value:"webhook",children:"Webhook"}),e.jsx(V,{value:"cron",children:"Cron"}),e.jsx(V,{value:"scm",children:"SCM Polling"}),e.jsx(V,{value:"manual",children:"Manual Only"})]})]}),e.jsx(ce,{checked:t.enabled,onCheckedChange:i=>{const r=[...s.triggers||[]];r[n]={...t,enabled:i},C(s.id,{triggers:r})}})]}),e.jsx(b,{size:"icon",variant:"ghost",onClick:()=>{const i=(s.triggers||[]).filter((r,N)=>N!==n);C(s.id,{triggers:i})},children:e.jsx(ge,{className:"h-4 w-4"})})]}),t.type==="webhook"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Branches (comma-separated, empty for all)"}),e.jsx(E,{placeholder:"main, develop, release/*",defaultValue:t.config?.branches?.join(", "),onBlur:i=>{const r=i.target.value.split(",").map(P=>P.trim()).filter(P=>P),N=[...s.triggers||[]];N[n]={...t,config:{...t.config,branches:r}},C(s.id,{triggers:N})}})]}),t.type==="cron"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Cron Expression"}),e.jsx(E,{placeholder:"H/15 * * * *",defaultValue:t.config?.schedule,onBlur:i=>{const r=[...s.triggers||[]];r[n]={...t,config:{...t.config,schedule:i.target.value}},C(s.id,{triggers:r})}}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Example: H/15 * * * * (every 15 minutes)"})]}),t.type==="scm"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Poll Interval (minutes)"}),e.jsx(E,{type:"number",min:"1",placeholder:"5",defaultValue:t.config?.pollInterval,onBlur:i=>{const r=[...s.triggers||[]];r[n]={...t,config:{...t.config,pollInterval:parseInt(i.target.value)||5}},C(s.id,{triggers:r})}})]})]},n)),(!s.triggers||s.triggers.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No triggers configured. Builds will use default rate-based triggering."})]})}),e.jsx(Z,{value:"parameters",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Build Parameters"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Parameters to pass to builds"})]}),e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>{const t=[...s.parameters||[],{name:"",type:"string",defaultValue:""}];C(s.id,{parameters:t})},children:[e.jsx(fe,{className:"h-4 w-4 mr-1"}),"Add Parameter"]})]}),(s.parameters||[]).map((t,n)=>e.jsxs(A,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Parameter Name"}),e.jsx(E,{value:t.name,onChange:i=>{const r=[...s.parameters||[]];r[n]={...t,name:i.target.value},C(s.id,{parameters:r})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Type"}),e.jsxs(Ee,{value:t.type,onValueChange:i=>{const r=[...s.parameters||[]];r[n]={...t,type:i},C(s.id,{parameters:r})},children:[e.jsx(Se,{children:e.jsx(De,{})}),e.jsxs(Oe,{children:[e.jsx(V,{value:"string",children:"String"}),e.jsx(V,{value:"choice",children:"Choice"}),e.jsx(V,{value:"boolean",children:"Boolean"}),e.jsx(V,{value:"password",children:"Password"})]})]})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx(v,{children:"Default Value"}),t.type==="boolean"?e.jsx(ce,{checked:t.defaultValue===!0,onCheckedChange:i=>{const r=[...s.parameters||[]];r[n]={...t,defaultValue:i},C(s.id,{parameters:r})}}):e.jsx(E,{value:t.defaultValue||"",type:t.type==="password"?"password":"text",onChange:i=>{const r=[...s.parameters||[]];r[n]={...t,defaultValue:i.target.value},C(s.id,{parameters:r})}})]}),t.type==="choice"&&e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx(v,{children:"Choices (one per line)"}),e.jsx(hs,{rows:3,value:t.choices?.join(`
`)||"",onChange:i=>{const r=i.target.value.split(`
`).map(P=>P.trim()).filter(P=>P),N=[...s.parameters||[]];N[n]={...t,choices:r},C(s.id,{parameters:N})}})]}),e.jsxs(b,{size:"sm",variant:"ghost",onClick:()=>{const i=(s.parameters||[]).filter((r,N)=>N!==n);C(s.id,{parameters:i})},children:[e.jsx(ge,{className:"h-4 w-4 mr-1"}),"Remove"]})]},n)),(!s.parameters||s.parameters.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No parameters configured."})]})}),e.jsx(Z,{value:"environment",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Environment Variables"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Environment variables available to builds"})]}),e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>{const n={...s.environmentVariables||{},[`VAR_${Date.now()}`]:""};C(s.id,{environmentVariables:n})},children:[e.jsx(fe,{className:"h-4 w-4 mr-1"}),"Add Variable"]})]}),s.environmentVariables&&Object.keys(s.environmentVariables).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(s.environmentVariables).map(([t,n])=>e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-[1fr_2fr_auto] gap-3 items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{className:"text-xs",children:"Variable Name"}),e.jsx(E,{value:t,onChange:i=>{const r=i.target.value,N=s.environmentVariables||{};if(r!==t&&!N[r]){const P={...N};delete P[t],P[r]=n,C(s.id,{environmentVariables:P})}},placeholder:"VAR_NAME"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{className:"text-xs",children:"Value"}),e.jsx(E,{value:n,onChange:i=>{const r=s.environmentVariables||{};C(s.id,{environmentVariables:{...r,[t]:i.target.value}})},placeholder:"variable value"})]}),e.jsx(b,{size:"icon",variant:"ghost",onClick:()=>{const r={...s.environmentVariables||{}};delete r[t],C(s.id,{environmentVariables:r})},children:e.jsx(ge,{className:"h-4 w-4"})})]})},t))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No environment variables configured."})]})}),e.jsx(Z,{value:"actions",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Post-Build Actions"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Actions to execute after build completes"})]}),e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>{const t=[...s.postBuildActions||[],{type:"email",enabled:!0,config:{}}];C(s.id,{postBuildActions:t})},children:[e.jsx(fe,{className:"h-4 w-4 mr-1"}),"Add Action"]})]}),(s.postBuildActions||[]).map((t,n)=>e.jsxs(A,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ee,{value:t.type,onValueChange:i=>{const r=[...s.postBuildActions||[]];r[n]={...t,type:i,config:{}},C(s.id,{postBuildActions:r})},children:[e.jsx(Se,{className:"w-40",children:e.jsx(De,{})}),e.jsxs(Oe,{children:[e.jsx(V,{value:"email",children:"Email Notification"}),e.jsx(V,{value:"archive",children:"Archive Artifacts"}),e.jsx(V,{value:"publish",children:"Publish Results"}),e.jsx(V,{value:"deploy",children:"Deploy"})]})]}),e.jsx(ce,{checked:t.enabled,onCheckedChange:i=>{const r=[...s.postBuildActions||[]];r[n]={...t,enabled:i},C(s.id,{postBuildActions:r})}})]}),e.jsx(b,{size:"icon",variant:"ghost",onClick:()=>{const i=(s.postBuildActions||[]).filter((r,N)=>N!==n);C(s.id,{postBuildActions:i})},children:e.jsx(ge,{className:"h-4 w-4"})})]}),t.type==="email"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Recipients (comma-separated)"}),e.jsx(E,{placeholder:"dev@example.com, team@example.com",defaultValue:t.config?.recipients?.join(", "),onBlur:i=>{const r=i.target.value.split(",").map(P=>P.trim()).filter(P=>P),N=[...s.postBuildActions||[]];N[n]={...t,config:{...t.config,recipients:r}},C(s.id,{postBuildActions:N})}})]}),t.type==="archive"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Archive Pattern"}),e.jsx(E,{placeholder:"**/*.jar, **/*.war",defaultValue:t.config?.archivePattern,onBlur:i=>{const r=[...s.postBuildActions||[]];r[n]={...t,config:{...t.config,archivePattern:i.target.value}},C(s.id,{postBuildActions:r})}})]}),t.type==="deploy"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Deployment Environment"}),e.jsxs(Ee,{value:t.config?.deployEnv||"staging",onValueChange:i=>{const r=[...s.postBuildActions||[]];r[n]={...t,config:{...t.config,deployEnv:i}},C(s.id,{postBuildActions:r})},children:[e.jsx(Se,{children:e.jsx(De,{})}),e.jsxs(Oe,{children:[e.jsx(V,{value:"staging",children:"Staging"}),e.jsx(V,{value:"production",children:"Production"}),e.jsx(V,{value:"dev",children:"Development"})]})]})]})]},n)),(!s.postBuildActions||s.postBuildActions.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No post-build actions configured."})]})})]}),e.jsx(Ye,{children:e.jsx(b,{variant:"outline",onClick:()=>{T(null),Be("")},children:"Close"})})]})}):null})(),e.jsx(Le,{open:xe,onOpenChange:he,children:e.jsxs(Re,{children:[e.jsxs(Fe,{children:[e.jsx(Ie,{children:"Add New Node"}),e.jsx(Te,{children:"Create a new Jenkins agent node for distributed builds"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"node-name",children:"Node Name *"}),e.jsx(E,{id:"node-name",value:pe,onChange:s=>{oe(s.target.value),Pe(us(s.target.value))},onBlur:s=>Pe(us(s.target.value)),placeholder:"agent-1",className:Me?"border-red-500":""}),Me&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Ge,{className:"h-3 w-3"}),Me]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"node-executors",children:"Number of Executors"}),e.jsx(E,{id:"node-executors",type:"number",min:"1",max:"100",value:ze,onChange:s=>{const t=parseInt(s.target.value)||1;ns(t),Ae(ms(t))},onBlur:s=>Ae(ms(ze)),className:Ue?"border-red-500":""}),Ue?e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Ge,{className:"h-3 w-3"}),Ue]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of concurrent builds this node can handle"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"node-labels",children:"Labels"}),e.jsx(E,{id:"node-labels",value:Cs,onChange:s=>is(s.target.value),placeholder:"linux, docker, kubernetes"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated labels for build routing"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"node-description",children:"Description"}),e.jsx(hs,{id:"node-description",value:Ps,onChange:s=>as(s.target.value),placeholder:"Optional description",rows:3})]})]}),e.jsxs(Ye,{children:[e.jsx(b,{variant:"outline",onClick:()=>{he(!1),oe(""),ns(1),is(""),as(""),Pe(""),Ae("")},children:"Cancel"}),e.jsx(b,{onClick:dt,disabled:!!Me||!!Ue||!pe.trim(),children:"Add Node"})]})]})}),Y&&(()=>{const s=de.find(y=>y.id===Y);if(!s)return null;const[t,n]=f.useState(s.name),[i,r]=f.useState(s.numExecutors||1),[N,P]=f.useState(s.labels?.join(", ")||""),[M,O]=f.useState(s.description||"");return e.jsx(Le,{open:!!Y,onOpenChange:y=>!y&&ne(null),children:e.jsxs(Re,{children:[e.jsxs(Fe,{children:[e.jsx(Ie,{children:"Edit Node"}),e.jsx(Te,{children:"Update node configuration"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-node-name",children:"Node Name *"}),e.jsx(E,{id:"edit-node-name",value:t,onChange:y=>n(y.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-node-executors",children:"Number of Executors"}),e.jsx(E,{id:"edit-node-executors",type:"number",min:"1",max:"100",value:i,onChange:y=>r(parseInt(y.target.value)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-node-labels",children:"Labels"}),e.jsx(E,{id:"edit-node-labels",value:N,onChange:y=>P(y.target.value),placeholder:"linux, docker, kubernetes"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-node-description",children:"Description"}),e.jsx(hs,{id:"edit-node-description",value:M,onChange:y=>O(y.target.value),rows:3})]})]}),e.jsxs(Ye,{children:[e.jsx(b,{variant:"outline",onClick:()=>ne(null),children:"Cancel"}),e.jsx(b,{onClick:()=>{if(!t.trim()){u({title:"Invalid name",description:"Node name cannot be empty",variant:"destructive"});return}mt(Y,{name:t.trim(),numExecutors:i,labels:N.split(",").map(y=>y.trim()).filter(y=>y.length>0),description:M.trim()||void 0})},children:"Save"})]})]})})})(),e.jsx(Le,{open:et,onOpenChange:s=>{_e(s),s||(Ce(""),se(""))},children:e.jsxs(Re,{children:[e.jsxs(Fe,{children:[e.jsx(Ie,{children:"Install Plugin"}),e.jsx(Te,{children:"Install a new Jenkins plugin"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"plugin-name",children:"Plugin Name *"}),e.jsx(E,{id:"plugin-name",value:rs,onChange:s=>{const t=s.target.value;if(Ce(t),t.trim()){const n=We(t);se(n)}else se("")},onBlur:s=>{const t=We(s.target.value);se(t)},placeholder:"e.g., git, docker, kubernetes",className:Je?"border-red-500":""}),Je?e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Ge,{className:"h-3 w-3"}),Je]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the plugin name (e.g., git, docker, kubernetes, workflow-aggregator)"})]}),e.jsxs("div",{className:"p-3 border rounded-md bg-muted",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Popular plugins:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["git","docker","kubernetes","workflow-aggregator","blue-ocean","junit","maven-plugin"].map(s=>e.jsx(b,{variant:"outline",size:"sm",onClick:()=>{Ce(s);const t=We(s);se(t),setTimeout(()=>{const n=document.getElementById("plugin-name");n&&(n.focus(),n.select())},0)},children:s},s))})]})]}),e.jsxs(Ye,{children:[e.jsx(b,{variant:"outline",onClick:()=>{_e(!1),Ce(""),se("")},children:"Cancel"}),e.jsx(b,{onClick:()=>jt(rs),disabled:!!Je||!rs.trim(),children:"Install"})]})]})}),e.jsx(Le,{open:st,onOpenChange:ls,children:e.jsxs(Re,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs(Fe,{children:[e.jsx(Ie,{children:"Build Details"}),e.jsx(Te,{children:ie&&(()=>{const s=S.find(n=>n.id===ie);if(!s)return"Build details";const t=J.find(n=>n.id===s.pipelineId);return`Build #${s.number} - ${t?.name||s.pipelineId}`})()})]}),ie&&(()=>{const s=S.find(n=>n.id===ie);if(!s)return null;const t=J.find(n=>n.id===s.pipelineId);return e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[e.jsxs(A,{children:[e.jsx(F,{children:e.jsx(I,{children:"Build Information"})}),e.jsxs(L,{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Pipeline:"}),e.jsx("span",{className:"ml-2 font-medium",children:t?.name||s.pipelineId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Build Number:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["#",s.number]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:"ml-2",children:qe(s.status)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Branch:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.branch||"main"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Started:"}),e.jsx("span",{className:"ml-2",children:new Date(s.startTime).toLocaleString()})]}),s.duration&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsxs("span",{className:"ml-2",children:[(s.duration/1e3).toFixed(1),"s"]})]})]}),s.status==="running"&&s.progress!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.progress,"%"]})]}),e.jsx(Ve,{value:s.progress})]}),s.stages&&s.stages.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Stages:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.stages.map((n,i)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm p-2 border rounded",children:[He(n.status),e.jsx("span",{children:n.name}),n.duration&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-auto",children:[(n.duration/1e3).toFixed(1),"s"]})]},i))})]}),s.status==="running"&&o&&e.jsx("div",{className:"mt-4",children:e.jsxs(b,{variant:"destructive",onClick:()=>Os(s.id),children:[e.jsx($s,{className:"h-4 w-4 mr-2"}),"Cancel Build"]})})]})]}),e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsx(I,{children:"Console Output"}),e.jsx(X,{children:"Build execution logs"})]}),e.jsx(L,{children:e.jsx("div",{className:"bg-black text-green-400 p-4 rounded font-mono text-xs overflow-x-auto max-h-96 overflow-y-auto",children:Bs.length>0?Bs.map((n,i)=>e.jsx("div",{className:"whitespace-pre-wrap",children:n},i)):e.jsx("div",{className:"text-muted-foreground",children:"No logs available"})})})]}),Es.length>0&&e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsx(I,{children:"Artifacts"}),e.jsx(X,{children:"Build artifacts"})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-2",children:Es.map((n,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-mono text-sm",children:n.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:Ls(n.size)}),e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>{const r=`# Artifact: ${n.name}
# Size: ${Ls(n.size)}
# Generated by Jenkins Simulation

This is a simulated artifact file.
In a real Jenkins environment, this would contain the actual build artifact.`,N=new Blob([r],{type:"text/plain"}),P=URL.createObjectURL(N),M=document.createElement("a");M.href=P,M.download=n.name,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(P),u({title:"Artifact downloaded",description:`${n.name} has been downloaded`})},children:[e.jsx(Et,{className:"h-3 w-3 mr-1"}),"Download"]})]})]},i))})})]})]})})()]})})]})})}export{Pn as JenkinsConfigAdvanced};

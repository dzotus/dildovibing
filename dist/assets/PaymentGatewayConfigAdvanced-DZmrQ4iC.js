import{u as Le,X as ze,j as e,V as Oe,r as i,i as p,S as z,C as b,e as v,f as y,A as J,k as N,T as Ue,a as _e,b as Q,B as j,c as Ke,d as X,h as Y,P as te,K as Ve,I as T,n as O,o as U,O as Ge,p as _,q as K,s as d,a9 as ne,U as re,m as le,L as n,t as C,D as ce,v as ie,w as de,x as oe,y as xe,z as me}from"./index-D1p3qKk1.js";import{T as qe}from"./textarea-Cbj5d7Ql.js";import{u as He}from"./use-toast-D6Huwyee.js";import{R as he}from"./refresh-ccw-BoEyyRRQ.js";import{D as Be}from"./dollar-sign-NW9sP4kn.js";import{T as Je}from"./trending-up-DiIk18Ba.js";import{C as Qe}from"./credit-card-pt7P3ZEV.js";import{S as ue}from"./shield-Czxogl5B.js";import{C as Xe}from"./circle-check-big-lBf-svbX.js";import{C as Ye}from"./clock-BHe_SsWz.js";function xs({componentId:o}){const{nodes:D,updateNode:A}=Le(),{getComponentMetrics:P}=ze(),{toast:m}=He(),x=D.find(s=>s.id===o);if(!x)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const t=Oe.getPaymentGatewayEmulationEngine(o);P(o)?.customMetrics;const c=x.data.config||{};i.useEffect(()=>{t&&x&&t.initializeConfig(x)},[x.id,JSON.stringify(x.data.config),t]);const f=t?.getTransactions()||[],w=t?.getWebhooks()||[],k=c.transactions||[],E=c.webhooks||[],h=i.useMemo(()=>f.length>0?f.map(s=>({id:s.id,amount:s.amount,currency:s.currency,status:s.status,paymentMethod:s.paymentMethod,customerId:s.customerId,timestamp:new Date(s.timestamp).toISOString(),description:s.description,fee:s.fee,refundedAmount:s.refundedAmount})):k,[f,k]),r=i.useMemo(()=>w.length>0?w.map(s=>({id:s.id,url:s.url,events:s.events,enabled:s.enabled,secret:s.secret})):E,[w,E]),g=t?.getMetrics(),B=g?.transactionsTotal??h.length,V=g?.totalAmount??h.reduce((s,a)=>s+a.amount,0),l=g?.successRate?g.successRate*100:h.length>0?h.filter(s=>s.status==="succeeded").length/h.length*100:0,je=g?.averageAmount??(h.length>0?V/h.length:0),pe=c.apiKey||"",ge=c.secretKey||"",Z=c.supportedCurrencies||["USD","EUR","GBP","JPY"],ee=c.supportedMethods||["card","bank_transfer","paypal","apple_pay"],fe=c.gatewayType||"stripe",be=c.enable3DSecure??!0,ve=c.enableFraudDetection??!0,ye=c.enableRefunds??!0,Ne=c.enableRecurringPayments??!0,Ce=c.enableCreditCards??!0,we=c.enableDebitCards??!0,ke=c.enableACH??!1,Se=c.enableCryptocurrency??!1,[Te,M]=i.useState(!1),[De,F]=i.useState(!1),[I,G]=i.useState(null),[$,q]=i.useState(null),[R,Ae]=i.useState(""),[H,Pe]=i.useState("all"),u=s=>{const a={...c,...s};A(o,{data:{...x.data,config:a}}),t&&t.updateConfig(s)},We=s=>{const a={...s,id:`txn_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};t&&t.addTransaction(a),u({transactions:[...h,{id:a.id,amount:a.amount,currency:a.currency,status:a.status,paymentMethod:a.paymentMethod,customerId:a.customerId,timestamp:new Date(a.timestamp).toISOString(),description:a.description}]}),m({title:"Transaction added",description:`Transaction ${a.id} has been created.`})},Ee=(s,a)=>{t&&t.updateTransaction(s,a);const L=h.map(S=>S.id===s?{...S,...a}:S);u({transactions:L}),m({title:"Transaction updated",description:`Transaction ${s} has been updated.`})},Re=s=>{t&&t.removeTransaction(s),u({transactions:h.filter(a=>a.id!==s)}),m({title:"Transaction removed",description:`Transaction ${s} has been deleted.`})},Me=s=>{const a={...s,id:`wh_${Date.now()}`};t&&t.addWebhook(a),u({webhooks:[...r,{id:a.id,url:a.url,events:a.events,enabled:a.enabled,secret:a.secret}]}),m({title:"Webhook added",description:`Webhook ${a.id} has been created.`})},Fe=(s,a)=>{t&&t.updateWebhook(s,a);const L=r.map(S=>S.id===s?{...S,...a}:S);u({webhooks:L}),m({title:"Webhook updated",description:`Webhook ${s} has been updated.`})},Ie=s=>{t&&t.removeWebhook(s),u({webhooks:r.filter(a=>a.id!==s)}),m({title:"Webhook removed",description:`Webhook ${s} has been deleted.`})},$e=()=>{t&&x&&t.initializeConfig(x),m({title:"Refreshed",description:"Payment Gateway data has been refreshed."})},se=i.useMemo(()=>{let s=h;return R&&(s=s.filter(a=>a.id.toLowerCase().includes(R.toLowerCase())||a.customerId?.toLowerCase().includes(R.toLowerCase())||a.description?.toLowerCase().includes(R.toLowerCase()))),H!=="all"&&(s=s.filter(a=>a.status===H)),s},[h,R,H]),ae=s=>{switch(s){case"succeeded":return"bg-green-500";case"pending":case"processing":return"bg-yellow-500";case"failed":return"bg-red-500";case"refunded":return"bg-blue-500";case"cancelled":return"bg-gray-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Payment Gateway"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Payment Processing"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Secure payment processing and transaction management"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:$e,children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(z,{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(b,{className:"border-l-4 border-l-blue-500 bg-gradient-to-br from-blue-50 to-white dark:from-blue-950/20 dark:to-background",children:[e.jsx(v,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Transactions"}),e.jsx(J,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(N,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:B}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"total"})]})})]}),e.jsxs(b,{className:"border-l-4 border-l-green-500 bg-gradient-to-br from-green-50 to-white dark:from-green-950/20 dark:to-background",children:[e.jsx(v,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),e.jsx(Be,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(N,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:["$",V.toFixed(2)]})})})]}),e.jsxs(b,{className:"border-l-4 border-l-purple-500 bg-gradient-to-br from-purple-50 to-white dark:from-purple-950/20 dark:to-background",children:[e.jsx(v,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsx(Je,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(N,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[l.toFixed(1),"%"]})})})]}),e.jsxs(b,{className:"border-l-4 border-l-cyan-500 bg-gradient-to-br from-cyan-50 to-white dark:from-cyan-950/20 dark:to-background",children:[e.jsx(v,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Avg Amount"}),e.jsx(Qe,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(N,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:["$",je.toFixed(2)]})})})]})]}),e.jsxs(Ue,{defaultValue:"transactions",className:"space-y-4",children:[e.jsxs(_e,{className:"flex-wrap",children:[e.jsxs(Q,{value:"transactions",className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Transactions"}),e.jsx(j,{variant:"secondary",className:"ml-1",children:h.length})]}),e.jsxs(Q,{value:"webhooks",className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Webhooks"}),e.jsx(j,{variant:"secondary",className:"ml-1",children:r.length})]}),e.jsxs(Q,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]}),e.jsx(X,{value:"transactions",className:"space-y-4",children:e.jsxs(b,{children:[e.jsxs(v,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Transactions"}),e.jsx(Y,{children:"Payment transaction history"})]}),e.jsxs(p,{onClick:()=>{G(null),M(!0)},size:"sm",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(T,{placeholder:"Search transactions...",value:R,onChange:s=>Ae(s.target.value),className:"pl-9"})]}),e.jsxs(O,{value:H,onValueChange:Pe,children:[e.jsxs(U,{className:"w-full sm:w-[180px]",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),e.jsx(_,{placeholder:"Filter by status"})]}),e.jsxs(K,{children:[e.jsx(d,{value:"all",children:"All Status"}),e.jsx(d,{value:"succeeded",children:"Succeeded"}),e.jsx(d,{value:"pending",children:"Pending"}),e.jsx(d,{value:"processing",children:"Processing"}),e.jsx(d,{value:"failed",children:"Failed"}),e.jsx(d,{value:"refunded",children:"Refunded"}),e.jsx(d,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:se.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(J,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No transactions found"})]}):se.map(s=>e.jsxs(b,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-gradient-to-r from-blue-50/50 to-transparent dark:from-blue-950/10",children:[e.jsx(v,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${ae(s.status)}/20`,children:s.status==="succeeded"?e.jsx(Xe,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):s.status==="pending"||s.status==="processing"?e.jsx(Ye,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}):s.status==="refunded"?e.jsx(he,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}):s.status==="cancelled"?e.jsx(ne,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}):e.jsx(ne,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx(y,{className:"text-lg font-semibold",children:s.id}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(j,{variant:"outline",className:ae(s.status),children:s.status}),e.jsx(j,{variant:"outline",children:s.paymentMethod}),e.jsx(j,{variant:"outline",children:s.currency})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",s.amount.toFixed(2)," ",s.currency]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(s.timestamp).toLocaleString()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>{G(s),M(!0)},className:"h-8 w-8",children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>Re(s.id),className:"h-8 w-8 hover:bg-destructive/10 hover:text-destructive",children:e.jsx(le,{className:"h-4 w-4"})})]})]})]})}),e.jsxs(N,{children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),s.customerId&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Customer: ",s.customerId]}),s.fee&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Fee: $",s.fee.toFixed(2)]}),s.refundedAmount&&e.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:["Refunded: $",s.refundedAmount.toFixed(2)]})]})]},s.id))})})]})}),e.jsx(X,{value:"webhooks",className:"space-y-4",children:e.jsxs(b,{children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Webhooks"}),e.jsx(Y,{children:"Configure webhook endpoints"})]}),e.jsxs(p,{onClick:()=>{q(null),F(!0)},size:"sm",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Create Webhook"]})]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsxs(b,{className:"border-l-4 border-l-purple-500 hover:shadow-md transition-shadow bg-gradient-to-r from-purple-50/50 to-transparent dark:from-purple-950/10",children:[e.jsx(v,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30",children:e.jsx(ue,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx(y,{className:"text-lg font-semibold",children:s.id}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(j,{variant:s.enabled?"default":"outline",children:s.enabled?"Enabled":"Disabled"}),e.jsx(j,{variant:"outline",className:"font-mono text-xs",children:s.url})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>{q(s),F(!0)},className:"h-8 w-8",children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>Ie(s.id),className:"h-8 w-8 hover:bg-destructive/10 hover:text-destructive",children:e.jsx(le,{className:"h-4 w-4"})})]})]})}),e.jsx(N,{children:s.events&&s.events.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Events"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.events.map((a,L)=>e.jsx(j,{variant:"outline",children:a},L))})]})})]},s.id))})})]})}),e.jsx(X,{value:"settings",className:"space-y-4",children:e.jsxs(b,{children:[e.jsxs(v,{children:[e.jsx(y,{children:"Payment Gateway Settings"}),e.jsx(Y,{children:"API credentials and configuration"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"API Key"}),e.jsx(T,{type:"password",value:pe,onChange:s=>u({apiKey:s.target.value}),placeholder:"pk_live_***"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Secret Key"}),e.jsx(T,{type:"password",value:ge,onChange:s=>u({secretKey:s.target.value}),placeholder:"sk_live_***"})]}),e.jsx(z,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Supported Currencies"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Z.map(s=>e.jsx(j,{variant:"outline",children:s},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Supported Payment Methods"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ee.map(s=>e.jsx(j,{variant:"outline",children:s},s))})]}),e.jsx(z,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Gateway Type"}),e.jsxs(O,{value:fe,onValueChange:s=>u({gatewayType:s}),children:[e.jsx(U,{children:e.jsx(_,{})}),e.jsxs(K,{children:[e.jsx(d,{value:"stripe",children:"Stripe"}),e.jsx(d,{value:"paypal",children:"PayPal"}),e.jsx(d,{value:"square",children:"Square"}),e.jsx(d,{value:"adyen",children:"Adyen"})]})]})]}),e.jsx(z,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Enable 3D Secure"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Additional authentication for cards"})]}),e.jsx(C,{checked:be,onCheckedChange:s=>u({enable3DSecure:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Enable Fraud Detection"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically detect fraudulent transactions"})]}),e.jsx(C,{checked:ve,onCheckedChange:s=>u({enableFraudDetection:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Enable Refunds"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow refund processing"})]}),e.jsx(C,{checked:ye,onCheckedChange:s=>u({enableRefunds:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Enable Recurring Payments"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Support subscription payments"})]}),e.jsx(C,{checked:Ne,onCheckedChange:s=>u({enableRecurringPayments:s})})]})]}),e.jsx(z,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(n,{children:"Payment Methods"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"font-normal",children:"Credit Cards"}),e.jsx(C,{checked:Ce,onCheckedChange:s=>u({enableCreditCards:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"font-normal",children:"Debit Cards"}),e.jsx(C,{checked:we,onCheckedChange:s=>u({enableDebitCards:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"font-normal",children:"ACH"}),e.jsx(C,{checked:ke,onCheckedChange:s=>u({enableACH:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"font-normal",children:"Cryptocurrency"}),e.jsx(C,{checked:Se,onCheckedChange:s=>u({enableCryptocurrency:s})})]})]})]})]})]})})]})]}),e.jsx(ce,{open:Te,onOpenChange:M,children:e.jsxs(ie,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(de,{children:[e.jsx(oe,{children:I?"Edit Transaction":"Add Transaction"}),e.jsx(xe,{children:I?"Update transaction details":"Create a new payment transaction"})]}),e.jsx(Ze,{transaction:I,supportedCurrencies:Z,supportedMethods:ee,onSave:s=>{I?Ee(I.id,s):We(s),M(!1),G(null)},onCancel:()=>{M(!1),G(null)}})]})}),e.jsx(ce,{open:De,onOpenChange:F,children:e.jsxs(ie,{className:"max-w-2xl",children:[e.jsxs(de,{children:[e.jsx(oe,{children:$?"Edit Webhook":"Add Webhook"}),e.jsx(xe,{children:$?"Update webhook configuration":"Create a new webhook endpoint"})]}),e.jsx(es,{webhook:$,onSave:s=>{$?Fe($.id,s):Me(s),F(!1),q(null)},onCancel:()=>{F(!1),q(null)}})]})})]})}function Ze({transaction:o,supportedCurrencies:D,supportedMethods:A,onSave:P,onCancel:m}){const[x,t]=i.useState(o?.amount.toString()||""),[W,c]=i.useState(o?.currency||D[0]),[f,w]=i.useState(o?.status||"pending"),[k,E]=i.useState(o?.paymentMethod||A[0]),[h,r]=i.useState(o?.customerId||""),[g,B]=i.useState(o?.description||""),V=l=>{l.preventDefault(),P({amount:parseFloat(x)||0,currency:W,status:f,paymentMethod:k,customerId:h||void 0,description:g||void 0})};return e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Amount *"}),e.jsx(T,{type:"number",step:"0.01",value:x,onChange:l=>t(l.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Currency *"}),e.jsxs(O,{value:W,onValueChange:c,children:[e.jsx(U,{children:e.jsx(_,{})}),e.jsx(K,{children:D.map(l=>e.jsx(d,{value:l,children:l},l))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Status *"}),e.jsxs(O,{value:f,onValueChange:l=>w(l),children:[e.jsx(U,{children:e.jsx(_,{})}),e.jsxs(K,{children:[e.jsx(d,{value:"pending",children:"Pending"}),e.jsx(d,{value:"processing",children:"Processing"}),e.jsx(d,{value:"succeeded",children:"Succeeded"}),e.jsx(d,{value:"failed",children:"Failed"}),e.jsx(d,{value:"refunded",children:"Refunded"}),e.jsx(d,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Payment Method *"}),e.jsxs(O,{value:k,onValueChange:l=>E(l),children:[e.jsx(U,{children:e.jsx(_,{})}),e.jsx(K,{children:A.map(l=>e.jsx(d,{value:l,children:l},l))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Customer ID"}),e.jsx(T,{value:h,onChange:l=>r(l.target.value),placeholder:"cust_..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Description"}),e.jsx(qe,{value:g,onChange:l=>B(l.target.value),placeholder:"Transaction description",rows:3})]}),e.jsxs(me,{children:[e.jsx(p,{type:"button",variant:"outline",onClick:m,children:"Cancel"}),e.jsx(p,{type:"submit",children:o?"Update":"Create"})]})]})}function es({webhook:o,onSave:D,onCancel:A}){const[P,m]=i.useState(o?.url||""),[x,t]=i.useState(o?.events||[]),[W,c]=i.useState(o?.enabled??!0),[f,w]=i.useState(o?.secret||""),k=["payment.succeeded","payment.failed","payment.pending","payment.refunded","payment.cancelled","payment.*"],E=r=>{x.includes(r)?t(x.filter(g=>g!==r)):t([...x,r])},h=r=>{r.preventDefault(),D({url:P,events:x,enabled:W,secret:f||void 0})};return e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"URL *"}),e.jsx(T,{type:"url",value:P,onChange:r=>m(r.target.value),placeholder:"https://api.example.com/webhooks/payment",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Events *"}),e.jsx("div",{className:"flex flex-wrap gap-2 p-3 border rounded-md min-h-[100px]",children:k.map(r=>e.jsx(j,{variant:x.includes(r)?"default":"outline",className:"cursor-pointer",onClick:()=>E(r),children:r},r))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click events to toggle selection"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Secret"}),e.jsx(T,{type:"password",value:f,onChange:r=>w(r.target.value),placeholder:"Webhook secret (optional)"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Enabled"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable or disable this webhook"})]}),e.jsx(C,{checked:W,onCheckedChange:c})]}),e.jsxs(me,{children:[e.jsx(p,{type:"button",variant:"outline",onClick:A,children:"Cancel"}),e.jsx(p,{type:"submit",children:o?"Update":"Create"})]})]})}export{xs as PaymentGatewayConfigAdvanced};

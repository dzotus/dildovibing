import{u as Oe,a as Ge,j as e,e as te,r as p,l as h,S as T,C as y,h as b,i as C,m as S,A as ae,Z as Ve,T as He,b as Je,c as K,R as Z,d as Ue,f as O,k as G,P as V,L as n,q as I,s as q,t as B,v as F,w as m,B as M,X as ne,o as le,aa as We,I as x,x as A,D as ie,y as re,z as ce,E as de,G as oe,H as xe,$ as he,a1 as me,a2 as ue,a3 as je,a4 as ge,a5 as ve,a6 as pe,a7 as Ne}from"./index-Cr1wcIS8.js";import{T as fe}from"./textarea-Dvy4XTRf.js";import{d as ye,a as z}from"./toast-CW5IRGZI.js";import{R as Xe}from"./refresh-ccw-sjVO-8we.js";import{S as H}from"./server-DUHVVad1.js";import{C as be}from"./circle-check-big-sbBVfOrH.js";function as({componentId:P}){const{nodes:Ce,updateNode:Q}=Oe(),u=Ge(s=>s.componentMetrics.get(P)),R=Ce.find(s=>s.id===P);if(!R)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const t=R.data.config||{},r=t.services||[],N=t.calls||[],Se=t.endpoint||"localhost:50051",we=t.reflectionEnabled??!0,f=te.getGRPCRoutingEngine(P),[ke,Te]=p.useState({}),[$,Me]=p.useState(null);p.useEffect(()=>{if(f){f.getStats();const s=f.getAllMethodStats(),l=f.getConnectionState();Te(s),Me(l)}},[f,u]);const Ae=u?.customMetrics?.total_requests||t.totalCalls||N.length||0,Re=u?.customMetrics?.total_requests?(u.customMetrics.total_requests-(u.customMetrics.total_errors||0))/u.customMetrics.total_requests*100:N.length>0?N.filter(s=>s.status==="success").length/N.length*100:0,Le=u?.latency||t.averageLatency||(N.length>0?N.reduce((s,l)=>s+(l.duration||0),0)/N.length:0),[j,Pe]=p.useState(""),[E,J]=p.useState(""),[Y,ee]=p.useState("{}"),[Ee,se]=p.useState(""),[d,k]=p.useState(null),[a,g]=p.useState(null),[_,U]=p.useState(null),[L,W]=p.useState(null),i=p.useCallback(s=>{const l={...t,...s};Q(P,{data:{...R.data,config:l}});const c={...R,data:{...R.data,config:l}};te.updateNodesAndConnections([c],[])},[P,R,t,Q]),De=()=>{if(!j||!E)return;const s={id:`call-${Date.now()}`,service:j,method:E,request:Y,response:JSON.stringify({success:!0,data:{}},null,2),status:"success",timestamp:new Date().toISOString(),duration:Math.floor(Math.random()*50)+10};se(s.response),i({calls:[...N,s]})},X=()=>{k({name:"",methods:[],enabled:!0})},Ie=s=>{k({...s})},qe=()=>{if(!d)return;if(!d.name||d.name.trim()===""){ye("Service name is required");return}const s=r.findIndex(l=>l.name===d.name);if(s>=0&&r[s]!==d){const l=r.map((c,o)=>o===s?d:c);i({services:l}),z(`Service "${d.name}" updated`)}else s<0&&(i({services:[...r,d]}),z(`Service "${d.name}" added`));k(null)},Be=s=>{i({services:r.filter(l=>l.name!==s)}),z(`Service "${s}" deleted`),U(null)},Fe=s=>{g({service:s,method:{name:"",inputType:"google.protobuf.Empty",outputType:"google.protobuf.Empty",streaming:"unary",enabled:!0},methodIndex:-1})},ze=(s,l,c)=>{g({service:s,method:{...l},methodIndex:c})},$e=()=>{if(!a)return;if(!a.method.name||a.method.name.trim()===""){ye("Method name is required");return}const s=r.findIndex(w=>w.name===a.service.name);if(s<0)return;const c=[...r[s].methods];a.methodIndex>=0?c[a.methodIndex]=a.method:c.push(a.method);const o=r.map((w,D)=>D===s?{...w,methods:c}:w);i({services:o}),z(`Method "${a.method.name}" ${a.methodIndex>=0?"updated":"added"}`),g(null)},_e=(s,l)=>{const c=r.findIndex(v=>v.name===s);if(c<0)return;const w=r[c].methods.filter(v=>v.name!==l),D=r.map((v,Ke)=>Ke===c?{...v,methods:w}:v);i({services:D}),z(`Method "${l}" deleted`),W(null)};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"gRPC"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"gRPC Service"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"High-performance RPC framework"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(T,{}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(y,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Services"}),e.jsx(H,{className:"h-4 w-4 text-blue-500"})]})}),e.jsxs(S,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:f&&f.getStats().enabledServices||r.length}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"registered"})]}),f&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[f.getStats().totalMethods," methods"]})]})]}),e.jsxs(y,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Calls"}),e.jsx(ae,{className:"h-4 w-4 text-green-500"})]})}),e.jsxs(S,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Ae}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"total"})]}),u?.throughput&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[u.throughput.toFixed(1)," req/s"]})]})]}),e.jsxs(y,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsx(be,{className:"h-4 w-4 text-purple-500"})]})}),e.jsxs(S,{children:[e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[Re.toFixed(1),"%"]})}),u?.errorRate!==void 0&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Error rate: ",(u.errorRate*100).toFixed(2),"%"]})]})]}),e.jsxs(y,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Avg Latency"}),e.jsx(Ve,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsxs(S,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:Le.toFixed(0)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"ms"})]}),u?.latencyP99&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["P99: ",u.latencyP99.toFixed(0),"ms"]})]})]})]}),e.jsxs(He,{defaultValue:"test",className:"space-y-4",children:[e.jsxs(Je,{className:"flex-wrap gap-1 w-full justify-start",children:[e.jsxs(K,{value:"test",className:"flex-shrink-0",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Test Client"]}),e.jsxs(K,{value:"services",className:"flex-shrink-0",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Services (",r.length,")"]}),e.jsxs(K,{value:"history",className:"flex-shrink-0",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Call History (",N.length,")"]}),e.jsxs(K,{value:"settings",className:"flex-shrink-0",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(O,{value:"test",className:"space-y-4",children:e.jsxs(y,{children:[e.jsxs(b,{children:[e.jsx(C,{children:"gRPC Test Client"}),e.jsx(G,{children:"Test gRPC methods and services"})]}),e.jsx(S,{className:"space-y-4",children:r.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"p-4 rounded-full bg-muted",children:e.jsx(Z,{className:"h-12 w-12 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"No Services Available"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"To test gRPC methods, you need to register at least one service with methods. Go to the Services tab to add your first service and methods."})]}),e.jsxs(h,{onClick:X,className:"mt-4",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add First Service"]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Service"}),e.jsxs(I,{value:j,onValueChange:s=>{Pe(s);const l=r.find(c=>c.name===s);l&&l.methods.length>0?J(l.methods[0].name):J("")},children:[e.jsx(q,{children:e.jsx(B,{placeholder:"Select service"})}),e.jsx(F,{children:r.filter(s=>s.enabled!==!1).map(s=>e.jsx(m,{value:s.name,children:s.name},s.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Method"}),e.jsxs(I,{value:E,onValueChange:J,disabled:!j,children:[e.jsx(q,{children:e.jsx(B,{placeholder:j?"Select method":"Select service first"})}),e.jsx(F,{children:j&&r.find(s=>s.name===j)?.methods.filter(s=>s.enabled!==!1).map(s=>e.jsxs(m,{value:s.name,children:[s.name," (",s.streaming||"unary",")"]},s.name))})]})]})]}),j&&r.find(s=>s.name===j)?.methods.length===0&&e.jsx("div",{className:"p-4 border border-yellow-200 dark:border-yellow-800 rounded-lg bg-yellow-50 dark:bg-yellow-900/20",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:['The selected service "',j,'" has no methods. Add methods in the Services tab.']})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Request (JSON)"}),e.jsx(fe,{value:Y,onChange:s=>ee(s.target.value),className:"font-mono text-sm min-h-[200px]",placeholder:'{ "id": "1" }',disabled:!j||!E})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Response"}),e.jsx(fe,{value:Ee,readOnly:!0,className:"font-mono text-sm min-h-[200px] bg-muted",placeholder:"Response will appear here..."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{onClick:De,disabled:!j||!E,children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Execute Call"]}),e.jsx(h,{variant:"outline",onClick:()=>{ee("{}"),se("")},children:"Clear"})]})]})})]})}),e.jsx(O,{value:"services",className:"space-y-4",children:e.jsxs(y,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(C,{children:"Services"}),e.jsx(G,{children:"Registered gRPC services and methods"})]}),e.jsxs(h,{onClick:X,size:"sm",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Service"]})]})}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(H,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No services registered"}),e.jsxs(h,{onClick:X,variant:"outline",size:"sm",className:"mt-4",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add First Service"]})]}):r.map(s=>{f?.getStats();const l=s.methods.length,c=s.methods.filter(o=>o.enabled!==!1).length;return e.jsxs(y,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(H,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"text-lg font-semibold",children:s.name}),s.enabled===!1&&e.jsx(M,{variant:"secondary",className:"text-xs",children:"Disabled"})]}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsxs(M,{variant:"outline",className:"text-xs",children:[c,"/",l," methods"]})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>Ie(s),children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>U(s.name),children:e.jsx(le,{className:"h-4 w-4 text-destructive"})})]})]})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-2",children:[s.methods.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No methods in this service"}):s.methods.map((o,w)=>{const D=`${s.name}.${o.name}`,v=ke[D];return e.jsx("div",{className:"p-3 border rounded",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono font-semibold",children:o.name}),e.jsx(M,{variant:"outline",className:"text-xs",children:o.streaming||"unary"}),o.enabled===!1&&e.jsx(M,{variant:"secondary",className:"text-xs",children:"Disabled"}),v&&e.jsxs(M,{variant:"outline",className:"text-xs",children:[v.requestCount," calls"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-mono",children:o.inputType}),e.jsx("span",{className:"mx-2",children:"â†’"}),e.jsx("span",{className:"font-mono",children:o.outputType})]}),v&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Avg latency: ",v.averageLatency.toFixed(0),"ms | Errors: ",v.errorCount]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>ze(s,o,w),children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>W({serviceName:s.name,methodName:o.name}),children:e.jsx(le,{className:"h-4 w-4 text-destructive"})})]})]})},o.name)}),e.jsxs(h,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>Fe(s),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Method"]})]})})]},s.name)})})})]})}),e.jsx(O,{value:"history",className:"space-y-4",children:e.jsxs(y,{children:[e.jsxs(b,{children:[e.jsx(C,{children:"Call History"}),e.jsx(G,{children:"Previously executed gRPC calls"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:N.map(s=>e.jsxs(y,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.status==="success"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:s.status==="success"?e.jsx(be,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):e.jsx(We,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsxs(C,{className:"text-lg font-semibold",children:[s.service,".",s.method]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.duration&&e.jsxs(M,{variant:"outline",children:[s.duration,"ms"]}),e.jsx(M,{variant:s.status==="success"?"default":"destructive",children:s.status})]})]})]})})}),e.jsxs(S,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.request&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Request"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto",children:s.request})]}),s.response&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Response"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto",children:s.response})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(s.timestamp).toLocaleString()})]})]},s.id))})})]})}),e.jsx(O,{value:"settings",className:"space-y-4",children:e.jsxs(y,{children:[e.jsxs(b,{children:[e.jsx(C,{children:"gRPC Settings"}),e.jsx(G,{children:"Service configuration"})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Endpoint"}),e.jsx(x,{value:Se,onChange:s=>i({endpoint:s.target.value}),placeholder:"localhost:50051"})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"Enable Reflection"}),e.jsx(A,{checked:we,onCheckedChange:s=>i({reflectionEnabled:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"Enable TLS"}),e.jsx(A,{checked:t.enableTLS??!1,onCheckedChange:s=>i({enableTLS:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"Enable Compression"}),e.jsx(A,{checked:t.enableCompression??!0,onCheckedChange:s=>i({enableCompression:s})})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Max Message Size (MB)"}),e.jsx(x,{type:"number",value:t.maxMessageSize??4,onChange:s=>i({maxMessageSize:parseInt(s.target.value)||4}),min:1,max:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Keep Alive Time (seconds)"}),e.jsx(x,{type:"number",value:t.keepAliveTime??30,onChange:s=>i({keepAliveTime:parseInt(s.target.value)||30}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Keep Alive Timeout (seconds)"}),e.jsx(x,{type:"number",value:t.keepAliveTimeout??5,onChange:s=>i({keepAliveTimeout:parseInt(s.target.value)||5}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Max Connection Idle (seconds)"}),e.jsx(x,{type:"number",value:t.maxConnectionIdle??300,onChange:s=>i({maxConnectionIdle:parseInt(s.target.value)||300}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Max Connection Age (seconds)"}),e.jsx(x,{type:"number",value:t.maxConnectionAge??3600,onChange:s=>i({maxConnectionAge:parseInt(s.target.value)||3600}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Max Connection Age Grace (seconds)"}),e.jsx(x,{type:"number",value:t.maxConnectionAgeGrace??5,onChange:s=>i({maxConnectionAgeGrace:parseInt(s.target.value)||5}),min:1})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Authentication Type"}),e.jsxs(I,{value:t.authentication?.type||"none",onValueChange:s=>i({authentication:{...t.authentication,type:s}}),children:[e.jsx(q,{children:e.jsx(B,{})}),e.jsxs(F,{children:[e.jsx(m,{value:"none",children:"None"}),e.jsx(m,{value:"tls",children:"TLS"}),e.jsx(m,{value:"mtls",children:"mTLS"}),e.jsx(m,{value:"jwt",children:"JWT"}),e.jsx(m,{value:"apiKey",children:"API Key"})]})]})]}),(t.authentication?.type==="jwt"||t.authentication?.type==="apiKey")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:t.authentication.type==="jwt"?"JWT Token":"API Key"}),e.jsx(x,{type:"password",value:t.authentication.token||t.authentication.apiKey||"",onChange:s=>i({authentication:{...t.authentication,[t.authentication?.type==="jwt"?"token":"apiKey"]:s.target.value}}),placeholder:t.authentication.type==="jwt"?"Bearer token":"API key"})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"Enable Rate Limiting"}),e.jsx(A,{checked:t.rateLimit?.enabled??!1,onCheckedChange:s=>i({rateLimit:{...t.rateLimit,enabled:s,requestsPerSecond:t.rateLimit?.requestsPerSecond||1e3,burst:t.rateLimit?.burst||100}})})]}),t.rateLimit?.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Requests Per Second"}),e.jsx(x,{type:"number",value:t.rateLimit.requestsPerSecond||1e3,onChange:s=>i({rateLimit:{...t.rateLimit,requestsPerSecond:parseInt(s.target.value)||1e3}}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Burst"}),e.jsx(x,{type:"number",value:t.rateLimit.burst||100,onChange:s=>i({rateLimit:{...t.rateLimit,burst:parseInt(s.target.value)||100}}),min:1})]})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"Enable Load Balancing"}),e.jsx(A,{checked:t.loadBalancing?.enabled??!1,onCheckedChange:s=>i({loadBalancing:{...t.loadBalancing,enabled:s,policy:t.loadBalancing?.policy||"round_robin"}})})]}),t.loadBalancing?.enabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Load Balancing Policy"}),e.jsxs(I,{value:t.loadBalancing.policy||"round_robin",onValueChange:s=>i({loadBalancing:{...t.loadBalancing,policy:s}}),children:[e.jsx(q,{children:e.jsx(B,{})}),e.jsxs(F,{children:[e.jsx(m,{value:"round_robin",children:"Round Robin"}),e.jsx(m,{value:"pick_first",children:"Pick First"}),e.jsx(m,{value:"least_request",children:"Least Request"})]})]})]}),$&&e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Connection Pool"}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("div",{children:["Active: ",$.activeConnections]}),e.jsxs("div",{children:["Idle: ",$.idleConnections]}),e.jsxs("div",{children:["Total: ",$.totalConnections]})]})]})]})]})]})})]}),e.jsx(ie,{open:!!d,onOpenChange:s=>!s&&k(null),children:e.jsxs(re,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ce,{children:[e.jsx(de,{children:d?.name?"Edit Service":"Add Service"}),e.jsx(oe,{children:"Configure gRPC service name and methods"})]}),d&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Service Name"}),e.jsx(x,{value:d.name,onChange:s=>k({...d,name:s.target.value}),placeholder:"com.example.Service"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"Enabled"}),e.jsx(A,{checked:d.enabled!==!1,onCheckedChange:s=>k({...d,enabled:s})})]})]}),e.jsxs(xe,{children:[e.jsx(h,{variant:"outline",onClick:()=>k(null),children:"Cancel"}),e.jsx(h,{onClick:qe,children:"Save"})]})]})}),e.jsx(ie,{open:!!a,onOpenChange:s=>!s&&g(null),children:e.jsxs(re,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ce,{children:[e.jsx(de,{children:a?.methodIndex>=0?"Edit Method":"Add Method"}),e.jsxs(oe,{children:["Configure gRPC method for ",a?.service.name]})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Method Name"}),e.jsx(x,{value:a.method.name,onChange:s=>g({...a,method:{...a.method,name:s.target.value}}),placeholder:"GetUser"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Input Type"}),e.jsx(x,{value:a.method.inputType,onChange:s=>g({...a,method:{...a.method,inputType:s.target.value}}),placeholder:"google.protobuf.Empty"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Output Type"}),e.jsx(x,{value:a.method.outputType,onChange:s=>g({...a,method:{...a.method,outputType:s.target.value}}),placeholder:"google.protobuf.Empty"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Streaming Type"}),e.jsxs(I,{value:a.method.streaming||"unary",onValueChange:s=>g({...a,method:{...a.method,streaming:s}}),children:[e.jsx(q,{children:e.jsx(B,{})}),e.jsxs(F,{children:[e.jsx(m,{value:"unary",children:"Unary"}),e.jsx(m,{value:"client-streaming",children:"Client Streaming"}),e.jsx(m,{value:"server-streaming",children:"Server Streaming"}),e.jsx(m,{value:"bidirectional",children:"Bidirectional"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"Enabled"}),e.jsx(A,{checked:a.method.enabled!==!1,onCheckedChange:s=>g({...a,method:{...a.method,enabled:s}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Timeout (ms)"}),e.jsx(x,{type:"number",value:a.method.timeout||"",onChange:s=>g({...a,method:{...a.method,timeout:s.target.value?parseInt(s.target.value):void 0}}),placeholder:"30000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Rate Limit (requests/sec)"}),e.jsx(x,{type:"number",value:a.method.rateLimit||"",onChange:s=>g({...a,method:{...a.method,rateLimit:s.target.value?parseInt(s.target.value):void 0}}),placeholder:"1000"})]})]}),e.jsxs(xe,{children:[e.jsx(h,{variant:"outline",onClick:()=>g(null),children:"Cancel"}),e.jsx(h,{onClick:$e,children:"Save"})]})]})}),e.jsx(he,{open:!!_,onOpenChange:s=>!s&&U(null),children:e.jsxs(me,{children:[e.jsxs(ue,{children:[e.jsx(je,{children:"Delete Service"}),e.jsxs(ge,{children:['Are you sure you want to delete service "',_,'"? This will also delete all methods in this service.']})]}),e.jsxs(ve,{children:[e.jsx(pe,{children:"Cancel"}),e.jsx(Ne,{onClick:()=>_&&Be(_),children:"Delete"})]})]})}),e.jsx(he,{open:!!L,onOpenChange:s=>!s&&W(null),children:e.jsxs(me,{children:[e.jsxs(ue,{children:[e.jsx(je,{children:"Delete Method"}),e.jsxs(ge,{children:['Are you sure you want to delete method "',L?.methodName,'" from service "',L?.serviceName,'"?']})]}),e.jsxs(ve,{children:[e.jsx(pe,{children:"Cancel"}),e.jsx(Ne,{onClick:()=>L&&_e(L.serviceName,L.methodName),children:"Delete"})]})]})})]})})}export{as as GRPCConfigAdvanced};

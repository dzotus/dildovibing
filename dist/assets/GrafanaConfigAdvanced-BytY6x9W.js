import{K as Yt,b8 as ie,b9 as w,b7 as wt,r as O,u as et,a as tt,j as e,B as ae,l as I,al as ea,am as ta,an as aa,aA as qe,C as z,h as F,i as U,m as B,S as Ge,k as W,q as X,s as Y,t as ee,v as te,w as S,T as sa,b as ra,c as Ae,D as lt,a6 as ot,d as na,f as we,L as D,I as G,P as Pe,o as _e,x as Qe,ai as ia,y as la,z as oa,E as ca,G as da,bb as ua}from"./index-Cd-JdYDo.js";import{C as se}from"./chart-column-DqtyvWnc.js";import{f as $,s as Pt,t as ma,v as kt,w as ha,n as de,x as at,y as re,c as H,z as St,B as st,E as Ct,D as pa,d as fa,g as ve,o as pe,S as xa,A as ga,F as va,e as ct,j as ya,i as fe,l as ba,u as ja,G as Na,H as Ee,I as Aa,J as rt,K as wa,M as Oe,N as dt,q as Pa,O as ka,R as Le,T as Re,L as Dt,P as _t,b as Ot,C as Et,X as Tt,Y as Lt,a as Rt}from"./LineChart-bNPi0kWX.js";import{B as It}from"./BarChart-wPg12McA.js";import{T as Sa}from"./textarea-C1mJ7m6P.js";const Ca=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Da=Yt("link",Ca);var _a=["points","className","baseLinePoints","connectNulls"];function xe(){return xe=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},xe.apply(this,arguments)}function Oa(s,t){if(s==null)return{};var r=Ea(s,t),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(n=0;n<i.length;n++)a=i[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Ea(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function ut(s){return Ia(s)||Ra(s)||La(s)||Ta()}function Ta(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function La(s,t){if(s){if(typeof s=="string")return Ze(s,t);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ze(s,t)}}function Ra(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Ia(s){if(Array.isArray(s))return Ze(s)}function Ze(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=s[r];return a}var mt=function(t){return t&&t.x===+t.x&&t.y===+t.y},Ma=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(a){mt(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),mt(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},ke=function(t,r){var a=Ma(t);r&&(a=[a.reduce(function(i,o){return[].concat(ut(i),ut(o))},[])]);var n=a.map(function(i){return i.reduce(function(o,g,v){return"".concat(o).concat(v===0?"M":"L").concat(g.x,",").concat(g.y)},"")}).join("");return a.length===1?"".concat(n,"Z"):n},$a=function(t,r,a){var n=ke(t,a);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(ke(r.reverse(),a).slice(1))},Ba=function(t){var r=t.points,a=t.className,n=t.baseLinePoints,i=t.connectNulls,o=Oa(t,_a);if(!r||!r.length)return null;var g=ie("recharts-polygon",a);if(n&&n.length){var v=o.stroke&&o.stroke!=="none",u=$a(r,n,i);return w.createElement("g",{className:g},w.createElement("path",xe({},$(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),v?w.createElement("path",xe({},$(o,!0),{fill:"none",d:ke(r,i)})):null,v?w.createElement("path",xe({},$(o,!0),{fill:"none",d:ke(n,i)})):null)}var h=ke(r,i);return w.createElement("path",xe({},$(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",className:g,d:h}))},We,ht;function za(){if(ht)return We;ht=1;var s=Pt(),t=ma(),r=kt();function a(n,i){return n&&n.length?s(n,r(i,2),t):void 0}return We=a,We}var Fa=za();const Ua=wt(Fa);var He,pt;function Ka(){if(pt)return He;pt=1;var s=Pt(),t=kt(),r=ha();function a(n,i){return n&&n.length?s(n,t(i,2),r):void 0}return He=a,He}var Va=Ka();const Ga=wt(Va);var Qa=["cx","cy","angle","ticks","axisLine"],Wa=["ticks","tick","angle","tickFormatter","stroke"];function ye(s){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(s)}function Se(){return Se=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Se.apply(this,arguments)}function ft(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function oe(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ft(Object(r),!0).forEach(function(a){Be(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function xt(s,t){if(s==null)return{};var r=Ha(s,t),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(n=0;n<i.length;n++)a=i[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Ha(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function qa(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(s,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,$t(a.key),a)}}function Za(s,t,r){return t&&gt(s.prototype,t),r&&gt(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function Ja(s,t,r){return t=Ie(t),Xa(s,Mt()?Reflect.construct(t,r||[],Ie(s).constructor):t.apply(s,r))}function Xa(s,t){if(t&&(ye(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ya(s)}function Ya(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Mt(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mt=function(){return!!s})()}function Ie(s){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ie(s)}function es(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&Je(s,t)}function Je(s,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Je(s,t)}function Be(s,t,r){return t=$t(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function $t(s){var t=ts(s,"string");return ye(t)=="symbol"?t:t+""}function ts(s,t){if(ye(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(ye(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var ze=(function(s){function t(){return qa(this,t),Ja(this,t,arguments)}return es(t,s),Za(t,[{key:"getTickValueCoord",value:function(a){var n=a.coordinate,i=this.props,o=i.angle,g=i.cx,v=i.cy;return re(g,v,n,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,n;switch(a){case"left":n="end";break;case"right":n="start";break;default:n="middle";break}return n}},{key:"getViewBox",value:function(){var a=this.props,n=a.cx,i=a.cy,o=a.angle,g=a.ticks,v=Ua(g,function(h){return h.coordinate||0}),u=Ga(g,function(h){return h.coordinate||0});return{cx:n,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:v.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,n=a.cx,i=a.cy,o=a.angle,g=a.ticks,v=a.axisLine,u=xt(a,Qa),h=g.reduce(function(p,m){return[Math.min(p[0],m.coordinate),Math.max(p[1],m.coordinate)]},[1/0,-1/0]),f=re(n,i,h[0],o),d=re(n,i,h[1],o),y=oe(oe(oe({},$(u,!1)),{},{fill:"none"},$(v,!1)),{},{x1:f.x,y1:f.y,x2:d.x,y2:d.y});return w.createElement("line",Se({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var a=this,n=this.props,i=n.ticks,o=n.tick,g=n.angle,v=n.tickFormatter,u=n.stroke,h=xt(n,Wa),f=this.getTickTextAnchor(),d=$(h,!1),y=$(o,!1),p=i.map(function(m,N){var j=a.getTickValueCoord(m),c=oe(oe(oe(oe({textAnchor:f,transform:"rotate(".concat(90-g,", ").concat(j.x,", ").concat(j.y,")")},d),{},{stroke:"none",fill:u},y),{},{index:N},j),{},{payload:m});return w.createElement(H,Se({className:ie("recharts-polar-radius-axis-tick",St(o)),key:"tick-".concat(m.coordinate)},st(a.props,m,N)),t.renderTickItem(o,c,v?v(m.value,N):m.value))});return w.createElement(H,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var a=this.props,n=a.ticks,i=a.axisLine,o=a.tick;return!n||!n.length?null:w.createElement(H,{className:ie("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Ct.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,n,i){var o;return w.isValidElement(a)?o=w.cloneElement(a,n):de(a)?o=a(n):o=w.createElement(at,Se({},n,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(O.PureComponent);Be(ze,"displayName","PolarRadiusAxis");Be(ze,"axisType","radiusAxis");Be(ze,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function be(s){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(s)}function ue(){return ue=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ue.apply(this,arguments)}function vt(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function ce(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vt(Object(r),!0).forEach(function(a){Fe(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function as(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(s,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,zt(a.key),a)}}function ss(s,t,r){return t&&yt(s.prototype,t),r&&yt(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function rs(s,t,r){return t=Me(t),ns(s,Bt()?Reflect.construct(t,r||[],Me(s).constructor):t.apply(s,r))}function ns(s,t){if(t&&(be(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return is(s)}function is(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Bt(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bt=function(){return!!s})()}function Me(s){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Me(s)}function ls(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&Xe(s,t)}function Xe(s,t){return Xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Xe(s,t)}function Fe(s,t,r){return t=zt(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function zt(s){var t=os(s,"string");return be(t)=="symbol"?t:t+""}function os(s,t){if(be(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(be(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var cs=Math.PI/180,bt=1e-5,Ue=(function(s){function t(){return as(this,t),rs(this,t,arguments)}return ls(t,s),ss(t,[{key:"getTickLineCoord",value:function(a){var n=this.props,i=n.cx,o=n.cy,g=n.radius,v=n.orientation,u=n.tickSize,h=u||8,f=re(i,o,g,a.coordinate),d=re(i,o,g+(v==="inner"?-1:1)*h,a.coordinate);return{x1:f.x,y1:f.y,x2:d.x,y2:d.y}}},{key:"getTickTextAnchor",value:function(a){var n=this.props.orientation,i=Math.cos(-a.coordinate*cs),o;return i>bt?o=n==="outer"?"start":"end":i<-bt?o=n==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,n=a.cx,i=a.cy,o=a.radius,g=a.axisLine,v=a.axisLineType,u=ce(ce({},$(this.props,!1)),{},{fill:"none"},$(g,!1));if(v==="circle")return w.createElement(pa,ue({className:"recharts-polar-angle-axis-line"},u,{cx:n,cy:i,r:o}));var h=this.props.ticks,f=h.map(function(d){return re(n,i,o,d.coordinate)});return w.createElement(Ba,ue({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var a=this,n=this.props,i=n.ticks,o=n.tick,g=n.tickLine,v=n.tickFormatter,u=n.stroke,h=$(this.props,!1),f=$(o,!1),d=ce(ce({},h),{},{fill:"none"},$(g,!1)),y=i.map(function(p,m){var N=a.getTickLineCoord(p),j=a.getTickTextAnchor(p),c=ce(ce(ce({textAnchor:j},h),{},{stroke:"none",fill:u},f),{},{index:m,payload:p,x:N.x2,y:N.y2});return w.createElement(H,ue({className:ie("recharts-polar-angle-axis-tick",St(o)),key:"tick-".concat(p.coordinate)},st(a.props,p,m)),g&&w.createElement("line",ue({className:"recharts-polar-angle-axis-tick-line"},d,N)),o&&t.renderTickItem(o,c,v?v(p.value,m):p.value))});return w.createElement(H,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var a=this.props,n=a.ticks,i=a.radius,o=a.axisLine;return i<=0||!n||!n.length?null:w.createElement(H,{className:ie("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,n,i){var o;return w.isValidElement(a)?o=w.cloneElement(a,n):de(a)?o=a(n):o=w.createElement(at,ue({},n,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(O.PureComponent);Fe(Ue,"displayName","PolarAngleAxis");Fe(Ue,"axisType","angleAxis");Fe(Ue,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Te;function je(s){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(s)}function ge(){return ge=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ge.apply(this,arguments)}function jt(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function _(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jt(Object(r),!0).forEach(function(a){Q(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function ds(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(s,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,Ut(a.key),a)}}function us(s,t,r){return t&&Nt(s.prototype,t),r&&Nt(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function ms(s,t,r){return t=$e(t),hs(s,Ft()?Reflect.construct(t,r||[],$e(s).constructor):t.apply(s,r))}function hs(s,t){if(t&&(je(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ps(s)}function ps(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Ft(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ft=function(){return!!s})()}function $e(s){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$e(s)}function fs(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&Ye(s,t)}function Ye(s,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Ye(s,t)}function Q(s,t,r){return t=Ut(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Ut(s){var t=xs(s,"string");return je(t)=="symbol"?t:t+""}function xs(s,t){if(je(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(je(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var Z=(function(s){function t(r){var a;return ds(this,t),a=ms(this,t,[r]),Q(a,"pieRef",null),Q(a,"sectorRefs",[]),Q(a,"id",ja("recharts-pie-")),Q(a,"handleAnimationEnd",function(){var n=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),de(n)&&n()}),Q(a,"handleAnimationStart",function(){var n=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),de(n)&&n()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return fs(t,s),us(t,[{key:"isActiveIndex",value:function(a){var n=this.props.activeIndex;return Array.isArray(n)?n.indexOf(a)!==-1:a===n}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,g=i.labelLine,v=i.dataKey,u=i.valueKey,h=$(this.props,!1),f=$(o,!1),d=$(g,!1),y=o&&o.offsetRadius||20,p=a.map(function(m,N){var j=(m.startAngle+m.endAngle)/2,c=re(m.cx,m.cy,m.outerRadius+y,j),x=_(_(_(_({},h),m),{},{stroke:"none"},f),{},{index:N,textAnchor:t.getTextAnchor(c.x,m.cx)},c),P=_(_(_(_({},h),m),{},{fill:"none",stroke:m.fill},d),{},{index:N,points:[re(m.cx,m.cy,m.outerRadius,j),c]}),E=v;return ve(v)&&ve(u)?E="value":ve(v)&&(E=u),w.createElement(H,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(N)},g&&t.renderLabelLineItem(g,P,"line"),t.renderLabelItem(o,x,pe(m,E)))});return w.createElement(H,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(a){var n=this,i=this.props,o=i.activeShape,g=i.blendStroke,v=i.inactiveShape;return a.map(function(u,h){if(u?.startAngle===0&&u?.endAngle===0&&a.length!==1)return null;var f=n.isActiveIndex(h),d=v&&n.hasActiveIndex()?v:null,y=f?o:d,p=_(_({},u),{},{stroke:g?u.fill:u.stroke,tabIndex:-1});return w.createElement(H,ge({ref:function(N){N&&!n.sectorRefs.includes(N)&&n.sectorRefs.push(N)},tabIndex:-1,className:"recharts-pie-sector"},st(n.props,u,h),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(h)}),w.createElement(xa,ge({option:y,isActive:f,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,n=this.props,i=n.sectors,o=n.isAnimationActive,g=n.animationBegin,v=n.animationDuration,u=n.animationEasing,h=n.animationId,f=this.state,d=f.prevSectors,y=f.prevIsAnimationActive;return w.createElement(ga,{begin:g,duration:v,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(h,"-").concat(y),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var m=p.t,N=[],j=i&&i[0],c=j.startAngle;return i.forEach(function(x,P){var E=d&&d[P],T=P>0?va(x,"paddingAngle",0):0;if(E){var C=ct(E.endAngle-E.startAngle,x.endAngle-x.startAngle),M=_(_({},x),{},{startAngle:c+T,endAngle:c+C(m)+T});N.push(M),c=M.endAngle}else{var J=x.endAngle,K=x.startAngle,me=ct(0,J-K),le=me(m),q=_(_({},x),{},{startAngle:c+T,endAngle:c+le+T});N.push(q),c=q.endAngle}}),w.createElement(H,null,a.renderSectorsStatically(N))})}},{key:"attachKeyboardHandlers",value:function(a){var n=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[o].focus(),n.setState({sectorToFocus:o});break}case"ArrowRight":{var g=--n.state.sectorToFocus<0?n.sectorRefs.length-1:n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[g].focus(),n.setState({sectorToFocus:g});break}case"Escape":{n.sectorRefs[n.state.sectorToFocus].blur(),n.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,n=a.sectors,i=a.isAnimationActive,o=this.state.prevSectors;return i&&n&&n.length&&(!o||!ya(o,n))?this.renderSectorsWithAnimation():this.renderSectorsStatically(n)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,n=this.props,i=n.hide,o=n.sectors,g=n.className,v=n.label,u=n.cx,h=n.cy,f=n.innerRadius,d=n.outerRadius,y=n.isAnimationActive,p=this.state.isAnimationFinished;if(i||!o||!o.length||!fe(u)||!fe(h)||!fe(f)||!fe(d))return null;var m=ie("recharts-pie",g);return w.createElement(H,{tabIndex:this.props.rootTabIndex,className:m,ref:function(j){a.pieRef=j}},this.renderSectors(),v&&this.renderLabels(o),Ct.renderCallByParent(this.props,null,!1),(!y||p)&&ba.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,n){return n.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==n.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:n.curSectors,isAnimationFinished:!0}:a.sectors!==n.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,n){return a>n?"start":a<n?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,n,i){if(w.isValidElement(a))return w.cloneElement(a,n);if(de(a))return a(n);var o=ie("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return w.createElement(fa,ge({},n,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,n,i){if(w.isValidElement(a))return w.cloneElement(a,n);var o=i;if(de(a)&&(o=a(n),w.isValidElement(o)))return o;var g=ie("recharts-pie-label-text",typeof a!="boolean"&&!de(a)?a.className:"");return w.createElement(at,ge({},n,{alignmentBaseline:"middle",className:g}),o)}}])})(O.PureComponent);Te=Z;Q(Z,"displayName","Pie");Q(Z,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Na.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Q(Z,"parseDeltaAngle",function(s,t){var r=Ee(t-s),a=Math.min(Math.abs(t-s),360);return r*a});Q(Z,"getRealPieData",function(s){var t=s.data,r=s.children,a=$(s,!1),n=Aa(r,rt);return t&&t.length?t.map(function(i,o){return _(_(_({payload:i},a),i),n&&n[o]&&n[o].props)}):n&&n.length?n.map(function(i){return _(_({},a),i.props)}):[]});Q(Z,"parseCoordinateOfPie",function(s,t){var r=t.top,a=t.left,n=t.width,i=t.height,o=wa(n,i),g=a+Oe(s.cx,n,n/2),v=r+Oe(s.cy,i,i/2),u=Oe(s.innerRadius,o,0),h=Oe(s.outerRadius,o,o*.8),f=s.maxRadius||Math.sqrt(n*n+i*i)/2;return{cx:g,cy:v,innerRadius:u,outerRadius:h,maxRadius:f}});Q(Z,"getComposedData",function(s){var t=s.item,r=s.offset,a=t.type.defaultProps!==void 0?_(_({},t.type.defaultProps),t.props):t.props,n=Te.getRealPieData(a);if(!n||!n.length)return null;var i=a.cornerRadius,o=a.startAngle,g=a.endAngle,v=a.paddingAngle,u=a.dataKey,h=a.nameKey,f=a.valueKey,d=a.tooltipType,y=Math.abs(a.minAngle),p=Te.parseCoordinateOfPie(a,r),m=Te.parseDeltaAngle(o,g),N=Math.abs(m),j=u;ve(u)&&ve(f)?(dt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):ve(u)&&(dt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=f);var c=n.filter(function(M){return pe(M,j,0)!==0}).length,x=(N>=360?c:c-1)*v,P=N-c*y-x,E=n.reduce(function(M,J){var K=pe(J,j,0);return M+(fe(K)?K:0)},0),T;if(E>0){var C;T=n.map(function(M,J){var K=pe(M,j,0),me=pe(M,h,J),le=(fe(K)?K:0)/E,q;J?q=C.endAngle+Ee(m)*v*(K!==0?1:0):q=o;var Ce=q+Ee(m)*((K!==0?y:0)+le*P),L=(q+Ce)/2,De=(p.innerRadius+p.outerRadius)/2,Ke=[{name:me,value:K,payload:M,dataKey:j,type:d}],he=re(p.cx,p.cy,De,L);return C=_(_(_({percent:le,cornerRadius:i,name:me,tooltipPayload:Ke,midAngle:L,middleRadius:De,tooltipPosition:he},M),p),{},{value:pe(M,j),startAngle:q,endAngle:Ce,payload:M,paddingAngle:Ee(m)*v}),C})}return _(_({},p),{},{sectors:T,data:n})});var Kt=Pa({chartName:"PieChart",GraphicalChild:Z,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ue},{axisType:"radiusAxis",AxisComp:ze}],formatAxisMap:ka,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const gs={prometheus:{id:"prometheus",title:"Prometheus",description:"Time-series database and monitoring system for metrics collection and alerting.",badge:"Metrics",docsUrl:"https://prometheus.io/",defaults:{version:"2.48.0",scrapeInterval:"15s",evaluationInterval:"15s",retentionTime:"15d",storagePath:"/prometheus",enableRemoteWrite:!1,remoteWriteUrl:"",enableAlertmanager:!0,alertmanagerUrl:"http://alertmanager:9093",scrape_configs:[],alertingRules:[],recordingRules:[],serviceDiscovery:[]},sections:[{id:"scraping",title:"Scraping Configuration",description:"How Prometheus collects metrics from targets.",fields:[{id:"scrapeInterval",label:"Scrape Interval",type:"text",placeholder:"15s",description:"How often to scrape targets (e.g., 15s, 1m)"},{id:"evaluationInterval",label:"Evaluation Interval",type:"text",placeholder:"15s",description:"How often to evaluate alerting rules"},{id:"targets",label:"Scrape Targets",type:"list",description:"List of targets to scrape metrics from",defaultListItem:"localhost:9090"}]},{id:"storage",title:"Storage & Retention",fields:[{id:"retentionTime",label:"Retention Time",type:"text",placeholder:"15d",description:"How long to retain metrics (e.g., 15d, 30d)"},{id:"storagePath",label:"Storage Path",type:"text",placeholder:"/prometheus"}]},{id:"remote",title:"Remote Write",fields:[{id:"enableRemoteWrite",label:"Enable Remote Write",type:"toggle",description:"Forward metrics to remote storage"},{id:"remoteWriteUrl",label:"Remote Write URL",type:"text",placeholder:"https://remote-storage/api/v1/write"}]},{id:"alerting",title:"Alerting",fields:[{id:"enableAlertmanager",label:"Enable Alertmanager",type:"toggle",description:"Send alerts to Alertmanager"},{id:"alertmanagerUrl",label:"Alertmanager URL",type:"text",placeholder:"http://alertmanager:9093"}]}]},grafana:{id:"grafana",title:"Grafana",description:"Visualization and analytics platform for metrics, logs, and traces.",badge:"Visualization",docsUrl:"https://grafana.com/",defaults:{adminUser:"admin",adminPassword:"admin",datasources:["prometheus"],defaultDashboard:"overview",enableAuth:!1,authProvider:"ldap",enableAlerting:!0,alertNotificationChannels:["email","slack"],theme:"dark"},sections:[{id:"admin",title:"Administration",fields:[{id:"adminUser",label:"Admin Username",type:"text"},{id:"adminPassword",label:"Admin Password",type:"text"},{id:"theme",label:"Default Theme",type:"select",options:[{label:"Dark",value:"dark"},{label:"Light",value:"light"}]}]},{id:"datasources",title:"Data Sources",fields:[{id:"datasources",label:"Data Sources",type:"list",description:"Configured data sources (Prometheus, Loki, etc.)",defaultListItem:"prometheus"},{id:"defaultDashboard",label:"Default Dashboard",type:"text",placeholder:"overview"}]},{id:"auth",title:"Authentication",fields:[{id:"enableAuth",label:"Enable Authentication",type:"toggle"},{id:"authProvider",label:"Auth Provider",type:"select",options:[{label:"LDAP",value:"ldap"},{label:"OAuth",value:"oauth"},{label:"SAML",value:"saml"},{label:"JWT",value:"jwt"}]}]},{id:"alerting",title:"Alerting",fields:[{id:"enableAlerting",label:"Enable Alerting",type:"toggle"},{id:"alertNotificationChannels",label:"Notification Channels",type:"list",description:"Channels for alert notifications",defaultListItem:"email"}]}]},loki:{id:"loki",title:"Loki",description:"Horizontally-scalable log aggregation system inspired by Prometheus.",badge:"Logs",docsUrl:"https://grafana.com/oss/loki/",defaults:{retentionPeriod:"168h",maxStreams:1e4,maxLineSize:256e3,enableCompression:!0,compressionType:"gzip",enableAuth:!1,enableMultiTenancy:!1,tenants:[]},sections:[{id:"retention",title:"Retention & Limits",fields:[{id:"retentionPeriod",label:"Retention Period",type:"text",placeholder:"168h",description:"How long to retain logs (e.g., 168h = 7 days)"},{id:"maxStreams",label:"Max Streams",type:"number",min:1e3,max:1e5,description:"Maximum number of log streams"},{id:"maxLineSize",label:"Max Line Size",type:"number",min:1024,suffix:"bytes",description:"Maximum size of a single log line"}]},{id:"compression",title:"Compression",fields:[{id:"enableCompression",label:"Enable Compression",type:"toggle"},{id:"compressionType",label:"Compression Type",type:"select",options:[{label:"gzip",value:"gzip"},{label:"snappy",value:"snappy"},{label:"lz4",value:"lz4"}]}]},{id:"multi-tenancy",title:"Multi-Tenancy",fields:[{id:"enableMultiTenancy",label:"Enable Multi-Tenancy",type:"toggle",description:"Isolate logs by tenant"},{id:"tenants",label:"Tenants",type:"list",description:"List of tenant identifiers",defaultListItem:"tenant-1"}]},{id:"security",title:"Security",fields:[{id:"enableAuth",label:"Enable Authentication",type:"toggle"}]}]},jaeger:{id:"jaeger",title:"Jaeger",description:"Distributed tracing system for monitoring and troubleshooting microservices.",badge:"Tracing",docsUrl:"https://www.jaegertracing.io/",defaults:{samplingType:"probabilistic",samplingParam:.001,storageBackend:"elasticsearch",storageUrl:"http://elasticsearch:9200",enableUIGraphQL:!0,enableMetrics:!0,metricsBackend:"prometheus",metricsUrl:"http://prometheus:9090"},sections:[{id:"sampling",title:"Sampling Configuration",description:"Control which traces are collected.",fields:[{id:"samplingType",label:"Sampling Type",type:"select",options:[{label:"Probabilistic",value:"probabilistic"},{label:"Rate Limiting",value:"ratelimiting"},{label:"Per Operation",value:"peroperation"}]},{id:"samplingParam",label:"Sampling Parameter",type:"number",min:0,max:1,step:.001,description:"Probability or rate limit (0.001 = 0.1%)"}]},{id:"storage",title:"Storage Backend",fields:[{id:"storageBackend",label:"Storage Type",type:"select",options:[{label:"Elasticsearch",value:"elasticsearch"},{label:"Cassandra",value:"cassandra"},{label:"Kafka",value:"kafka"},{label:"Memory",value:"memory"}]},{id:"storageUrl",label:"Storage URL",type:"text",placeholder:"http://storage:9200"}]},{id:"ui",title:"UI & Metrics",fields:[{id:"enableUIGraphQL",label:"Enable GraphQL UI",type:"toggle",description:"Enable GraphQL API for UI"},{id:"enableMetrics",label:"Enable Metrics",type:"toggle"},{id:"metricsBackend",label:"Metrics Backend",type:"select",options:[{label:"Prometheus",value:"prometheus"},{label:"StatsD",value:"statsd"}]},{id:"metricsUrl",label:"Metrics URL",type:"text",placeholder:"http://prometheus:9090"}]}]},"otel-collector":{id:"otel-collector",title:"OpenTelemetry Collector",description:"Vendor-agnostic observability data pipeline for receiving, processing, and exporting telemetry.",badge:"Telemetry",docsUrl:"https://opentelemetry.io/docs/collector/",defaults:{receivers:["otlp","prometheus"],processors:["batch","memory_limiter"],exporters:["otlp","prometheus"],otlpEndpoint:"http://localhost:4317",prometheusEndpoint:"http://localhost:8888",batchTimeout:"1s",batchSize:8192,memoryLimit:512},sections:[{id:"receivers",title:"Receivers",description:"Data sources for telemetry collection.",fields:[{id:"receivers",label:"Enabled Receivers",type:"list",description:"Receivers to collect data from",defaultListItem:"otlp"}]},{id:"processors",title:"Processors",description:"Data transformation and filtering.",fields:[{id:"processors",label:"Enabled Processors",type:"list",description:"Processors for data transformation",defaultListItem:"batch"},{id:"batchTimeout",label:"Batch Timeout",type:"text",placeholder:"1s",description:"Timeout for batching (e.g., 1s, 5s)"},{id:"batchSize",label:"Batch Size",type:"number",min:1,max:1e5,description:"Maximum number of spans/metrics per batch"},{id:"memoryLimit",label:"Memory Limit",type:"number",min:64,suffix:"MB",description:"Memory limit for processing"}]},{id:"exporters",title:"Exporters",description:"Destinations for processed telemetry.",fields:[{id:"exporters",label:"Enabled Exporters",type:"list",description:"Exporters to send data to",defaultListItem:"otlp"},{id:"otlpEndpoint",label:"OTLP Endpoint",type:"text",placeholder:"http://backend:4317"},{id:"prometheusEndpoint",label:"Prometheus Endpoint",type:"text",placeholder:"http://localhost:8888"}]}]},pagerduty:{id:"pagerduty",title:"PagerDuty",description:"Incident management and on-call scheduling platform.",badge:"Incident Management",docsUrl:"https://www.pagerduty.com/",defaults:{integrationKey:"",serviceName:"archiphoenix-service",escalationPolicy:"default",enableAutoResolve:!0,resolveTimeout:300,enableWebhooks:!1,webhookUrl:"",severityMapping:"standard"},sections:[{id:"integration",title:"Integration",fields:[{id:"integrationKey",label:"Integration Key",type:"text",placeholder:"your-integration-key",description:"PagerDuty service integration key"},{id:"serviceName",label:"Service Name",type:"text",placeholder:"my-service"}]},{id:"escalation",title:"Escalation & Resolution",fields:[{id:"escalationPolicy",label:"Escalation Policy",type:"text",placeholder:"default",description:"Policy name for incident escalation"},{id:"enableAutoResolve",label:"Auto Resolve",type:"toggle",description:"Automatically resolve incidents when resolved"},{id:"resolveTimeout",label:"Resolve Timeout",type:"number",min:60,max:3600,suffix:"sec",description:"Time before auto-resolving"}]},{id:"webhooks",title:"Webhooks",fields:[{id:"enableWebhooks",label:"Enable Webhooks",type:"toggle",description:"Send webhook notifications"},{id:"webhookUrl",label:"Webhook URL",type:"text",placeholder:"https://webhook.example.com/pagerduty"}]},{id:"severity",title:"Severity Mapping",fields:[{id:"severityMapping",label:"Severity Mapping",type:"select",options:[{label:"Standard",value:"standard"},{label:"Custom",value:"custom"}],description:"How to map alert severities"}]}]}};let vs=class{nodes;getComponentMetrics;constructor(t,r){this.nodes=t,this.getComponentMetrics=r}executeQuery(t,r){const a=[],n=Date.now();if(t.includes("component_throughput_total")||t.includes("throughput"))this.nodes.forEach(i=>{const o=this.getComponentMetrics(i.id);o&&a.push({timestamp:n,value:o.throughput||0,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("component_latency_ms")||t.includes("latency"))this.nodes.forEach(i=>{const o=this.getComponentMetrics(i.id);o&&a.push({timestamp:n,value:o.latency||0,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("component_error_rate")||t.includes("error_rate"))this.nodes.forEach(i=>{const o=this.getComponentMetrics(i.id);o&&a.push({timestamp:n,value:(o.errorRate||0)*100,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("component_utilization")||t.includes("utilization"))this.nodes.forEach(i=>{const o=this.getComponentMetrics(i.id);o&&a.push({timestamp:n,value:(o.utilization||0)*100,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("up"))this.nodes.forEach(i=>{const o=this.getComponentMetrics(i.id);a.push({timestamp:n,value:o?1:0,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else return[];return a}};function ys({panel:s,executor:t,timeRange:r}){const[a,n]=O.useState([]),[i,o]=O.useState([]);O.useEffect(()=>{const u=[];s.queries.forEach((h,f)=>{t.executeQuery(h.expr,r).forEach(y=>{u.push({...y,series:h.legendFormat?h.legendFormat.replace("{{component}}",y.labels.component||"unknown"):`Series ${f+1}`,refId:h.refId})})}),n(u),o(h=>[...h,{timestamp:Date.now(),data:u}].slice(-50))},[s.queries,t,r]);const g=O.useMemo(()=>{if(s.type==="graph"||s.type==="bargraph"){const u=new Map;i.forEach((d,y)=>{d.data.forEach(p=>{const m=p.series||"default";u.has(m)||u.set(m,[]),u.get(m).push({time:y,value:p.value,timestamp:d.timestamp})})});const h=Math.max(...Array.from(u.values()).map(d=>d.length)),f=[];for(let d=0;d<h;d++){const y={time:d};u.forEach((p,m)=>{p[d]&&(y[m]=p[d].value)}),f.push(y)}return f}return a},[i,a,s.type]),v=()=>{switch(s.type){case"graph":case"bargraph":const u=s.type==="bargraph"?It:Dt,h=s.type==="bargraph"?_t:Ot;if(g.length===0)return e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground text-sm",children:"No data available"});const f=Array.from(new Set(a.map(c=>c.series))),d=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00","#ff00ff"];return e.jsx(Le,{width:"100%",height:"100%",children:e.jsxs(u,{data:g,children:[e.jsx(Et,{strokeDasharray:"3 3"}),e.jsx(Tt,{dataKey:"time"}),e.jsx(Lt,{}),e.jsx(Re,{}),e.jsx(Rt,{}),f.map((c,x)=>e.jsx(h,{type:"monotone",dataKey:c,stroke:d[x%d.length],fill:d[x%d.length]},c))]})});case"stat":const y=a.length>0?a.reduce((c,x)=>c+x.value,0)/a.length:0;return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-4xl font-bold",children:y.toFixed(2)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:s.title})]});case"gauge":const p=a.length>0?a.reduce((c,x)=>c+x.value,0)/a.length:0,m=Math.min(100,Math.max(0,p));return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-muted"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${2*Math.PI*56}`,strokeDashoffset:`${2*Math.PI*56*(1-m/100)}`,className:"text-primary transition-all"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-2xl font-bold",children:[m.toFixed(0),"%"]})})]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:s.title})]});case"table":return e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Component"}),e.jsx("th",{className:"text-right p-2",children:"Value"})]})}),e.jsx("tbody",{children:a.map((c,x)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:c.labels?.component||"Unknown"}),e.jsx("td",{className:"text-right p-2",children:c.value.toFixed(2)})]},x))})]})});case"piechart":const N=a.map(c=>({name:c.labels?.component||"Unknown",value:c.value})),j=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00","#ff00ff"];return e.jsx(Le,{width:"100%",height:"100%",children:e.jsxs(Kt,{children:[e.jsx(Z,{data:N,cx:"50%",cy:"50%",labelLine:!1,label:({name:c,percent:x})=>`${c}: ${(x*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:N.map((c,x)=>e.jsx(rt,{fill:j[x%j.length]},`cell-${x}`))}),e.jsx(Re,{})]})});default:return e.jsxs("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:['Panel type "',s.type,'" not supported']})}};return e.jsxs(z,{className:"h-full",children:[e.jsx(F,{className:"pb-2",children:e.jsx(U,{className:"text-sm font-medium",children:s.title})}),e.jsx(B,{className:"h-[calc(100%-60px)]",children:v()})]})}function At({componentId:s,dashboardId:t,onClose:r}){const{nodes:a}=et(),{getComponentMetrics:n,isRunning:i}=tt(),o=a.find(c=>c.id===s),u=((o?.data.config||{}).dashboards||[]).map(c=>typeof c.panels=="number"?{id:c.id||String(Date.now()),name:c.name||"Dashboard",panels:[],tags:Array.isArray(c.tags)?c.tags:[],refresh:c.refresh||"30s"}:c).filter(c=>c&&typeof c=="object"&&c.id),h=t?u.find(c=>c.id===t):u[0],[f,d]=O.useState({from:Date.now()-3e5,to:Date.now()}),[y,p]=O.useState(0),m=O.useMemo(()=>new vs(a,n),[a,n]);O.useEffect(()=>{if(!i||!h)return;const c=N(h.refresh||"30s"),x=setInterval(()=>{d({from:Date.now()-3e5,to:Date.now()}),p(P=>P+1)},c);return()=>clearInterval(x)},[i,h]);function N(c){const x=c.match(/^(\d+)([smhd])$/);if(!x)return 3e4;const P=parseInt(x[1]);switch(x[2]){case"s":return P*1e3;case"m":return P*60*1e3;case"h":return P*60*60*1e3;case"d":return P*24*60*60*1e3;default:return 3e4}}if(!o)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Grafana component not found"});if(u.length===0)return e.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No dashboards configured"}),e.jsx("p",{className:"text-sm mt-2",children:"Configure dashboards in Grafana settings"})]});if(!h)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Dashboard not found"});const j=[...h.panels].sort((c,x)=>c.gridPos.y!==x.gridPos.y?c.gridPos.y-x.gridPos.y:c.gridPos.x-x.gridPos.x);return e.jsxs("div",{className:"h-full flex flex-col bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(se,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:h.name}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:h.tags.map((c,x)=>e.jsx(ae,{variant:"outline",className:"text-xs",children:c},x))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{size:"sm",variant:"outline",onClick:()=>{d({from:Date.now()-3e5,to:Date.now()}),p(c=>c+1)},children:[e.jsx(ea,{className:"h-4 w-4 mr-2"}),"Refresh"]}),r&&e.jsx(I,{size:"sm",variant:"ghost",onClick:r,children:e.jsx(ta,{className:"h-4 w-4"})})]})]}),e.jsx(aa,{className:"flex-1",children:e.jsx("div",{className:"p-4",children:j.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No panels in this dashboard"})]}):e.jsx("div",{className:"grid grid-cols-12 gap-4",children:j.map(c=>e.jsx("div",{className:"col-span-12",style:{gridColumn:`span ${Math.min(12,c.gridPos.w||12)}`,minHeight:`${(c.gridPos.h||8)*40}px`},children:e.jsx(ys,{panel:c,executor:m,timeRange:f},`${c.id}-${y}`)},c.id))})})}),!i&&e.jsx("div",{className:"p-2 bg-yellow-500/10 border-t border-yellow-500/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-yellow-600",children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{children:"Simulation is not running. Start emulation to see live data."})]})})]})}class bs{nodes;getComponentMetrics;constructor(t,r){this.nodes=t,this.getComponentMetrics=r}executeQuery(t){const r=[],a=Date.now();return t.includes("component_throughput_total")||t.includes("throughput")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:i.throughput||0,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("component_latency_ms")||t.includes("latency")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:i.latency||0,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("component_error_rate")||t.includes("error_rate")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:(i.errorRate||0)*100,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("component_utilization")||t.includes("utilization")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:(i.utilization||0)*100,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("up")&&this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);r.push({timestamp:a,value:i?1:0,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}),r}}function js({panel:s,executor:t}){const[r,a]=O.useState([]),[n,i]=O.useState([]),{isRunning:o}=tt(),[g,v]=O.useState(0);O.useEffect(()=>{const f=[];s.queries.forEach((d,y)=>{t.executeQuery(d.expr).forEach(m=>{f.push({...m,series:d.legendFormat?d.legendFormat.replace("{{component}}",m.labels.component||"unknown"):`Series ${y+1}`})})}),a(f),i(d=>[...d,{timestamp:Date.now(),data:f}].slice(-20))},[s.queries,t,g]),O.useEffect(()=>{if(!o)return;const f=setInterval(()=>{v(d=>d+1)},1e3);return()=>clearInterval(f)},[o]);const u=O.useMemo(()=>{if(s.type==="graph"||s.type==="bargraph"){const f=new Map;n.forEach((p,m)=>{p.data.forEach(N=>{const j=N.series||"default";f.has(j)||f.set(j,[]),f.get(j).push({time:m,value:N.value})})});const d=Math.max(...Array.from(f.values()).map(p=>p.length),0),y=[];for(let p=0;p<d;p++){const m={time:p};f.forEach((N,j)=>{N[p]&&(m[j]=N[p].value)}),y.push(m)}return y}return r},[n,r,s.type]),h=()=>{switch(s.type){case"graph":case"bargraph":const f=s.type==="bargraph"?It:Dt,d=s.type==="bargraph"?_t:Ot;if(u.length===0)return e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground text-xs",children:"No data"});const y=Array.from(new Set(r.map(P=>P.series))),p=["#8884d8","#82ca9d","#ffc658","#ff7300"];return e.jsx(Le,{width:"100%",height:"100%",children:e.jsxs(f,{data:u,children:[e.jsx(Et,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(Tt,{dataKey:"time",stroke:"rgba(255,255,255,0.5)"}),e.jsx(Lt,{stroke:"rgba(255,255,255,0.5)"}),e.jsx(Re,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",border:"1px solid rgba(255,255,255,0.1)"}}),e.jsx(Rt,{wrapperStyle:{fontSize:"12px"}}),y.map((P,E)=>e.jsx(d,{type:"monotone",dataKey:P,stroke:p[E%p.length],fill:p[E%p.length],strokeWidth:2},P))]})});case"stat":const m=r.length>0?r.reduce((P,E)=>P+E.value,0)/r.length:0;return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:m.toFixed(1)}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.title})]});case"gauge":const N=r.length>0?r.reduce((P,E)=>P+E.value,0)/r.length:0,j=Math.min(100,Math.max(0,N));return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsxs("svg",{className:"transform -rotate-90 w-24 h-24",children:[e.jsx("circle",{cx:"48",cy:"48",r:"42",stroke:"currentColor",strokeWidth:"6",fill:"none",className:"text-muted opacity-30"}),e.jsx("circle",{cx:"48",cy:"48",r:"42",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:`${2*Math.PI*42*(1-j/100)}`,className:"text-orange-500 transition-all"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-xl font-bold",children:[j.toFixed(0),"%"]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.title})]});case"table":return e.jsx("div",{className:"h-full overflow-auto text-xs",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-1",children:"Component"}),e.jsx("th",{className:"text-right p-1",children:"Value"})]})}),e.jsx("tbody",{children:r.slice(0,5).map((P,E)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-1",children:P.labels?.component||"Unknown"}),e.jsx("td",{className:"text-right p-1",children:P.value.toFixed(1)})]},E))})]})});case"piechart":const c=r.slice(0,5).map(P=>({name:P.labels?.component||"Unknown",value:P.value})),x=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00"];return e.jsx(Le,{width:"100%",height:"100%",children:e.jsxs(Kt,{children:[e.jsx(Z,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:({percent:P})=>`${(P*100).toFixed(0)}%`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:c.map((P,E)=>e.jsx(rt,{fill:x[E%x.length]},`cell-${E}`))}),e.jsx(Re,{})]})});default:return e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground text-xs",children:s.type})}};return e.jsxs(z,{className:"h-full",children:[e.jsx(F,{className:"pb-2",children:e.jsx(U,{className:"text-sm font-medium",children:s.title})}),e.jsx(B,{className:"h-[calc(100%-50px)]",children:h()})]})}function Ns({componentId:s,dashboardId:t}){const{nodes:r}=et(),{getComponentMetrics:a,isRunning:n}=tt(),u=((r.find(d=>d.id===s)?.data.config||{}).dashboards||[]).map(d=>typeof d.panels=="number"?{id:d.id,name:d.name,panels:[],tags:[]}:d).filter(d=>d&&typeof d=="object"&&d.id).find(d=>d.id===t),h=O.useMemo(()=>new bs(r,a),[r,a]);if(O.useEffect(()=>{if(!n)return;const d=setInterval(()=>{},1e3);return()=>clearInterval(d)},[n]),!u||u.panels.length===0)return e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:"No panels in this dashboard"})});const f=u.panels.slice(0,4);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:f.map(d=>e.jsx("div",{className:"h-48",children:e.jsx(js,{panel:d,executor:h})},d.id))}),u.panels.length>4&&e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["+",u.panels.length-4,' more panels. Click "Open Dashboard" to view all.']}),!n&&e.jsx("div",{className:"text-center text-xs text-yellow-600 bg-yellow-500/10 p-2 rounded",children:"Start emulation to see live data"})]})}function Ds({componentId:s}){const[t,r]=O.useState(null),[a,n]=O.useState(null),[i,o]=O.useState(!1),[g,v]=O.useState(!1),[u,h]=O.useState(!1),[f,d]=O.useState(!1),[y,p]=O.useState(void 0);try{const{nodes:m,updateNode:N}=et(),j=m.find(l=>l.id===s);if(!j)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const c=j.data.config||{},x=gs.grafana.defaults,P=c.adminUser||x.adminUser,E=c.adminPassword||x.adminPassword;let T=[];Array.isArray(c.datasources)&&(c.datasources.length>0&&typeof c.datasources[0]=="string"?T=c.datasources.map(l=>({name:l,type:"prometheus",url:"http://localhost:9090",access:"proxy",isDefault:l===c.datasources[0]})):T=c.datasources.filter(l=>l&&typeof l=="object"&&l.name)),T.length===0&&(T=[{name:Array.isArray(x.datasources)&&x.datasources.length>0&&typeof x.datasources[0]=="string"?x.datasources[0]:"Prometheus",type:"prometheus",url:"http://localhost:9090",access:"proxy",isDefault:!0}]);let C=[];Array.isArray(c.dashboards)&&(C=c.dashboards.map(l=>{if(l&&typeof l=="object"){if(typeof l.panels=="number")return{...l,panels:[],tags:Array.isArray(l.tags)?l.tags:[]};if(Array.isArray(l.panels))return{...l,panels:l.panels.map(k=>({id:k.id||`panel-${Date.now()}`,title:k.title||"Panel",type:k.type||"graph",datasource:k.datasource||T[0]?.name||"Prometheus",queries:Array.isArray(k.queries)?k.queries:[{refId:"A",expr:"up"}],gridPos:k.gridPos||{x:0,y:0,w:12,h:8}})),tags:Array.isArray(l.tags)?l.tags:[]}}return l}).filter(l=>l&&typeof l=="object"&&l.id)),C.length===0&&(C=[]);const M=Array.isArray(c.alerts)?c.alerts.filter(l=>l&&typeof l=="object"&&l.id):[],J=c.defaultDashboard||x.defaultDashboard,K=c.enableAuth??x.enableAuth,me=c.authProvider||x.authProvider,le=c.enableAlerting??x.enableAlerting,q=Array.isArray(c.alertNotificationChannels)?c.alertNotificationChannels:Array.isArray(x.alertNotificationChannels)?x.alertNotificationChannels:["email","slack"],Ce=c.theme||x.theme,L=l=>{N(s,{data:{...j.data,config:{...c,...l}}})},De=()=>{const l={name:"New Data Source",type:"prometheus",url:"http://localhost:9090",access:"proxy"};L({datasources:[...T,l]}),h(!1)},Ke=l=>{L({datasources:T.filter((k,b)=>b!==l)})},he=(l,k,b)=>{const A=[...T];A[l]={...A[l],[k]:b},L({datasources:A})},Vt=()=>{const l={id:String(Date.now()),name:"New Dashboard",panels:[],tags:[],refresh:"30s"};L({dashboards:[...C,l]}),o(!1)},Gt=l=>{L({dashboards:C.filter((k,b)=>b!==l)})},Qt=l=>{const k=T&&T.length>0?T[0].name:"Prometheus",b={id:`panel-${Date.now()}`,title:"New Panel",type:"graph",datasource:k,queries:[{refId:"A",expr:"up",legendFormat:"{{instance}}"}],gridPos:{x:0,y:0,w:12,h:8}},A=C.map(R=>R.id===l?{...R,panels:[...R.panels,b]}:R);L({dashboards:A})},Wt=(l,k)=>{const b=C.map(A=>A.id===l?{...A,panels:A.panels.filter(R=>R.id!==k)}:A);L({dashboards:b})},Ve=(l,k,b,A)=>{const R=C.map(V=>V.id===l?{...V,panels:V.panels.map(ne=>ne.id===k?{...ne,[b]:A}:ne)}:V);L({dashboards:R})},Ht=(l,k)=>{const b=C.map(A=>A.id===l?{...A,panels:A.panels.map(R=>{if(R.id===k){const V=Array.isArray(R.queries)?R.queries:[];return{...R,queries:[...V,{refId:String.fromCharCode(65+V.length),expr:"",legendFormat:""}]}}return R})}:A);L({dashboards:b})},nt=(l,k,b,A,R)=>{const V=C.map(ne=>ne.id===l?{...ne,panels:ne.panels.map(Ne=>{if(Ne.id===k){const Jt=Array.isArray(Ne.queries)?Ne.queries:[];return{...Ne,queries:Jt.map((it,Xt)=>Xt===b?{...it,[A]:R}:it)}}return Ne})}:ne);L({dashboards:V})},qt=()=>{const l={id:`alert-${Date.now()}`,name:"New Alert",condition:{query:"up == 0",evaluator:{type:"gt",params:[0]},reducer:{type:"last",params:[]}},for:"5m",annotations:{summary:"Alert triggered",description:"Service is down"},notificationChannels:q.slice(0,1)};L({alerts:[...M,l]}),v(!1)},Zt=l=>{L({alerts:M.filter(k=>k.id!==l)})};return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500/10",children:e.jsx(se,{className:"h-6 w-6 text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Grafana"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Analytics & Monitoring Platform"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ae,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),"Running"]}),e.jsxs(I,{size:"sm",variant:"outline",onClick:()=>{p(J==="overview"?C[0]?.id:C.find(l=>l.id===J)?.id),d(!0)},children:[e.jsx(Da,{className:"h-4 w-4 mr-2"}),"Open Dashboard"]})]})]}),e.jsx(Ge,{}),e.jsxs(z,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(U,{children:"Live Dashboard Preview"}),e.jsx(W,{children:"Real-time metrics from configured dashboards"})]}),C.length>0&&e.jsxs(X,{value:y||C[0]?.id,onValueChange:l=>p(l),children:[e.jsx(Y,{className:"w-48",children:e.jsx(ee,{})}),e.jsx(te,{children:C.map(l=>e.jsx(S,{value:l.id,children:l.name},l.id))})]})]})}),e.jsx(B,{children:C.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No dashboards configured"}),e.jsx("p",{className:"text-sm mt-2",children:"Create a dashboard to see live metrics here"})]}):e.jsx(Ns,{componentId:s,dashboardId:y||C[0]?.id})})]}),e.jsxs(sa,{defaultValue:"dashboard",className:"w-full",children:[e.jsxs(ra,{className:"grid w-full grid-cols-5",children:[e.jsxs(Ae,{value:"dashboard",className:"gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Dashboard"]}),e.jsxs(Ae,{value:"datasources",className:"gap-2",children:[e.jsx(lt,{className:"h-4 w-4"}),"Data Sources"]}),e.jsxs(Ae,{value:"dashboards",className:"gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Dashboards"]}),e.jsxs(Ae,{value:"alerts",className:"gap-2",children:[e.jsx(ot,{className:"h-4 w-4"}),"Alerts"]}),e.jsxs(Ae,{value:"settings",className:"gap-2",children:[e.jsx(na,{className:"h-4 w-4"}),"Settings"]})]}),e.jsx(we,{value:"dashboard",className:"space-y-4 mt-4",children:e.jsxs(z,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(U,{children:"Live Dashboard"}),e.jsx(W,{children:"Real-time metrics visualization"})]}),C.length>0&&e.jsxs(X,{value:y||C[0]?.id,onValueChange:l=>p(l),children:[e.jsx(Y,{className:"w-48",children:e.jsx(ee,{})}),e.jsx(te,{children:C.map(l=>e.jsx(S,{value:l.id,children:l.name},l.id))})]})]})}),e.jsx(B,{children:C.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(se,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No dashboards configured"}),e.jsx("p",{className:"text-sm mt-2",children:'Create a dashboard in the "Dashboards" tab'})]}):e.jsx("div",{className:"h-[600px] border rounded-lg overflow-hidden",children:e.jsx(At,{componentId:s,dashboardId:y||C[0]?.id})})})]})}),e.jsxs(we,{value:"datasources",className:"space-y-4 mt-4",children:[u&&e.jsxs(z,{className:"mb-4 border-primary",children:[e.jsxs(F,{children:[e.jsx(U,{children:"Create Data Source"}),e.jsx(W,{children:"Configure connection to metrics/logs database"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Name"}),e.jsx(G,{placeholder:"Prometheus"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Type"}),e.jsxs(X,{defaultValue:"prometheus",children:[e.jsx(Y,{children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"prometheus",children:"Prometheus"}),e.jsx(S,{value:"loki",children:"Loki"}),e.jsx(S,{value:"influxdb",children:"InfluxDB"}),e.jsx(S,{value:"elasticsearch",children:"Elasticsearch"}),e.jsx(S,{value:"postgres",children:"PostgreSQL"}),e.jsx(S,{value:"mysql",children:"MySQL"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"URL"}),e.jsx(G,{placeholder:"http://localhost:9090"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{onClick:De,children:"Create Data Source"}),e.jsx(I,{variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]})]}),e.jsxs(z,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(U,{children:"Data Sources"}),e.jsx(W,{children:"Configure data sources for metrics and logs"})]}),e.jsxs(I,{size:"sm",onClick:()=>h(!0),variant:"outline",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Add Data Source"]})]})}),e.jsx(B,{children:e.jsx("div",{className:"space-y-3",children:T.map((l,k)=>e.jsxs(z,{className:"border-border",children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded bg-primary/10",children:e.jsx(lt,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx(U,{className:"text-lg",children:l.name}),e.jsxs(W,{className:"text-xs mt-1",children:[l.type,"  ",l.url,l.isDefault&&e.jsx(ae,{variant:"outline",className:"ml-2",children:"Default"})]})]})]}),e.jsx(I,{size:"icon",variant:"ghost",onClick:()=>Ke(k),children:e.jsx(_e,{className:"h-4 w-4"})})]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Name"}),e.jsx(G,{value:l.name,onChange:b=>he(k,"name",b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Type"}),e.jsxs(X,{value:l.type,onValueChange:b=>he(k,"type",b),children:[e.jsx(Y,{children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"prometheus",children:"Prometheus"}),e.jsx(S,{value:"loki",children:"Loki"}),e.jsx(S,{value:"influxdb",children:"InfluxDB"}),e.jsx(S,{value:"elasticsearch",children:"Elasticsearch"}),e.jsx(S,{value:"postgres",children:"PostgreSQL"}),e.jsx(S,{value:"mysql",children:"MySQL"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"URL"}),e.jsx(G,{value:l.url,onChange:b=>he(k,"url",b.target.value),placeholder:"http://localhost:9090"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{checked:l.isDefault||!1,onCheckedChange:b=>he(k,"isDefault",b)}),e.jsx(D,{children:"Set as default"})]})]})]},k))})})]})]}),e.jsxs(we,{value:"dashboards",className:"space-y-4 mt-4",children:[i&&e.jsxs(z,{className:"mb-4 border-primary",children:[e.jsxs(F,{children:[e.jsx(U,{children:"Create Dashboard"}),e.jsx(W,{children:"Configure dashboard settings"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Dashboard Name"}),e.jsx(G,{placeholder:"My Dashboard"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{onClick:Vt,children:"Create Dashboard"}),e.jsx(I,{variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]})]}),e.jsxs(z,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(U,{children:"Dashboards"}),e.jsx(W,{children:"Manage and configure dashboards"})]}),e.jsxs(I,{size:"sm",onClick:()=>o(!0),variant:"outline",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Create Dashboard"]})]})}),e.jsx(B,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:C.map((l,k)=>e.jsxs(z,{className:"border-border hover:border-primary/50 transition-colors cursor-pointer",children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(U,{className:"text-base",children:l.name})]}),C.length>1&&e.jsx(I,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>Gt(k),children:e.jsx(_e,{className:"h-3 w-3"})})]})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Panels:"}),e.jsx("span",{className:"font-semibold",children:Array.isArray(l.panels)?l.panels.length:0})]}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:l.tags.map((b,A)=>e.jsx(ae,{variant:"outline",className:"text-xs",children:b},A))}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(I,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>r(t===l.id?null:l.id),children:[e.jsx(ia,{className:"h-3 w-3 mr-2"}),t===l.id?"Hide":"Edit"]}),e.jsxs(I,{size:"sm",variant:"default",className:"flex-1",onClick:()=>{p(l.id),d(!0)},children:[e.jsx(ot,{className:"h-3 w-3 mr-2"}),"View"]})]})]})}),t===l.id&&e.jsx(B,{className:"pt-0 border-t",children:e.jsxs("div",{className:"space-y-3 mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{className:"text-sm font-semibold",children:"Panels"}),e.jsxs(I,{size:"sm",variant:"outline",onClick:()=>Qt(l.id),children:[e.jsx(Pe,{className:"h-3 w-3 mr-1"}),"Add Panel"]})]}),!Array.isArray(l.panels)||l.panels.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:'No panels. Click "Add Panel" to create one.'}):l.panels.map(b=>e.jsxs(z,{className:"border-border",children:[e.jsx(F,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{variant:"outline",children:b.type}),e.jsx(G,{value:b.title,onChange:A=>Ve(l.id,b.id,"title",A.target.value),className:"h-7 flex-1"})]}),e.jsx(I,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>Wt(l.id,b.id),children:e.jsx(_e,{className:"h-3 w-3"})})]})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(D,{className:"text-xs",children:"Type"}),e.jsxs(X,{value:b.type,onValueChange:A=>Ve(l.id,b.id,"type",A),children:[e.jsx(Y,{className:"h-7",children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"graph",children:"Graph"}),e.jsx(S,{value:"table",children:"Table"}),e.jsx(S,{value:"stat",children:"Stat"}),e.jsx(S,{value:"gauge",children:"Gauge"}),e.jsx(S,{value:"piechart",children:"Pie Chart"}),e.jsx(S,{value:"bargraph",children:"Bar Graph"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(D,{className:"text-xs",children:"Data Source"}),e.jsxs(X,{value:b.datasource,onValueChange:A=>Ve(l.id,b.id,"datasource",A),children:[e.jsx(Y,{className:"h-7",children:e.jsx(ee,{})}),e.jsx(te,{children:T.map(A=>e.jsx(S,{value:A.name,children:A.name},A.name))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{className:"text-xs",children:"Queries (PromQL/LogQL)"}),e.jsxs(I,{size:"sm",variant:"ghost",className:"h-6",onClick:()=>Ht(l.id,b.id),children:[e.jsx(Pe,{className:"h-3 w-3 mr-1"}),"Add Query"]})]}),Array.isArray(b.queries)&&b.queries.length>0?b.queries.map((A,R)=>e.jsxs("div",{className:"space-y-1 p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{variant:"secondary",className:"text-xs",children:A.refId||"A"}),e.jsx(G,{value:A.expr||"",onChange:V=>nt(l.id,b.id,R,"expr",V.target.value),placeholder:"up or {job='api'} |= 'error'",className:"h-7 text-xs font-mono"})]}),e.jsx(G,{value:A.legendFormat||"",onChange:V=>nt(l.id,b.id,R,"legendFormat",V.target.value),placeholder:"Legend format: {{instance}}",className:"h-6 text-xs"})]},R)):e.jsx("div",{className:"text-center py-2 text-xs text-muted-foreground",children:'No queries. Click "Add Query" to add one.'})]})]})]},b.id))]})})]},k))})})]})]}),e.jsxs(we,{value:"alerts",className:"space-y-4 mt-4",children:[g&&e.jsxs(z,{className:"mb-4 border-primary",children:[e.jsxs(F,{children:[e.jsx(U,{children:"Create Alert Rule"}),e.jsx(W,{children:"Configure alert conditions and notifications"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Alert Name"}),e.jsx(G,{placeholder:"High CPU Usage"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"PromQL Query"}),e.jsx(Sa,{placeholder:"rate(process_cpu_seconds_total[5m]) > 0.8",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Condition"}),e.jsxs(X,{defaultValue:"gt",children:[e.jsx(Y,{children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"gt",children:"Greater Than"}),e.jsx(S,{value:"lt",children:"Less Than"}),e.jsx(S,{value:"eq",children:"Equal"}),e.jsx(S,{value:"ne",children:"Not Equal"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Threshold"}),e.jsx(G,{type:"number",placeholder:"0.8"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{onClick:qt,children:"Create Alert"}),e.jsx(I,{variant:"outline",onClick:()=>v(!1),children:"Cancel"})]})]})]}),e.jsxs(z,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(U,{children:"Alert Rules"}),e.jsx(W,{children:"Configure alert conditions and notifications"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{checked:le,onCheckedChange:l=>L({enableAlerting:l})}),e.jsxs(I,{size:"sm",onClick:()=>v(!0),variant:"outline",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Create Alert"]})]})]})}),e.jsx(B,{children:le?M.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(qe,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:'No alert rules configured. Click "Create Alert" to add one.'})]}):e.jsx("div",{className:"space-y-3",children:M.map(l=>e.jsxs(z,{className:"border-border",children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-lg",children:l.name}),e.jsxs(W,{className:"text-xs mt-1",children:["For: ",l.for,"  Channels: ",l.notificationChannels.join(", ")]})]}),e.jsx(I,{size:"icon",variant:"ghost",onClick:()=>Zt(l.id),children:e.jsx(_e,{className:"h-4 w-4"})})]})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{className:"text-xs",children:"PromQL Query"}),e.jsx("div",{className:"p-2 bg-muted rounded font-mono text-sm",children:l.condition.query})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(D,{className:"text-xs",children:"Evaluator"}),e.jsx(ae,{variant:"outline",children:l.condition.evaluator.type})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(D,{className:"text-xs",children:"Threshold"}),e.jsx(ae,{variant:"outline",children:l.condition.evaluator.params.join(", ")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(D,{className:"text-xs",children:"Reducer"}),e.jsx(ae,{variant:"outline",children:l.condition.reducer.type})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{className:"text-xs",children:"Summary"}),e.jsx("div",{className:"text-sm",children:l.annotations.summary}),l.annotations.description&&e.jsx("div",{className:"text-xs text-muted-foreground",children:l.annotations.description})]})]})]},l.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(qe,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Alerting is disabled. Enable it to create alert rules."})]})})]})]}),e.jsx(we,{value:"settings",className:"space-y-4 mt-4",children:e.jsxs(z,{children:[e.jsxs(F,{children:[e.jsx(U,{children:"Administration"}),e.jsx(W,{children:"Grafana server configuration"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"admin-user",children:"Admin Username"}),e.jsx(G,{id:"admin-user",value:P,onChange:l=>L({adminUser:l.target.value}),placeholder:"admin"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"admin-password",children:"Admin Password"}),e.jsx(G,{id:"admin-password",type:"password",value:E,onChange:l=>L({adminPassword:l.target.value}),placeholder:"admin"})]})]}),e.jsx(Ge,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Default Theme"}),e.jsxs(X,{value:Ce,onValueChange:l=>L({theme:l}),children:[e.jsx(Y,{children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"dark",children:"Dark"}),e.jsx(S,{value:"light",children:"Light"})]})]})]}),e.jsx(Ge,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(D,{children:"Enable Authentication"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Require login to access Grafana"})]}),e.jsx(Qe,{checked:K,onCheckedChange:l=>L({enableAuth:l})})]}),K&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"Auth Provider"}),e.jsxs(X,{value:me,onValueChange:l=>L({authProvider:l}),children:[e.jsx(Y,{children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"ldap",children:"LDAP"}),e.jsx(S,{value:"oauth",children:"OAuth"}),e.jsx(S,{value:"saml",children:"SAML"}),e.jsx(S,{value:"jwt",children:"JWT"})]})]})]})]})]})})]})]}),e.jsx(la,{open:f,onOpenChange:d,children:e.jsxs(oa,{className:"max-w-[95vw] max-h-[95vh] w-full h-full p-0",children:[e.jsx(ca,{className:"sr-only",children:e.jsx(da,{children:"Grafana Dashboard"})}),e.jsx("div",{className:"h-full",children:e.jsx(At,{componentId:s,dashboardId:y,onClose:()=>d(!1)})})]})})]})}catch(m){return ua("Error rendering GrafanaConfigAdvanced",m instanceof Error?m:new Error(String(m))),e.jsxs("div",{className:"p-4 text-destructive",children:[e.jsx("p",{children:"Error loading Grafana configuration"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:String(m)})]})}}export{Ds as GrafanaConfigAdvanced};

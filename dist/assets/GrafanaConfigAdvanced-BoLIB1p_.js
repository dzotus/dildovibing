import{J as Xt,aI as ie,aJ as P,aH as wt,r as E,u as et,a as tt,j as e,B as ae,l as L,ak as Yt,_ as ea,aL as ta,ab as We,C as F,h as B,i as K,m as M,S as Ge,k as q,q as X,s as Y,t as ee,v as te,w as S,T as aa,b as sa,c as Ae,Q as lt,d as ra,f as we,L as O,I as Q,P as Pe,o as Oe,x as qe,X as na,D as ia,y as la,z as ca,E as oa,aM as da}from"./index-0yVPR4Zl.js";import{C as se}from"./chart-column-BpsoHjSV.js";import{f as I,r as Pt,s as ua,t as kt,v as ha,l as de,w as at,x as re,b as U,y as Ct,z as st,B as _t,D as ma,c as fa,e as ge,n as fe,S as pa,A as xa,E as va,d as ct,h as ga,i as pe,k as ja,u as ya,G as ba,F as Ee,H as Na,I as rt,J as Aa,K as De,M as ot,p as wa,N as Pa,R as Re,T as Le,L as St,O as Ot,a as Dt,C as Et,X as Tt,Y as Rt,P as Lt}from"./LineChart-C2w0VwVi.js";import{B as It}from"./BarChart-S06pbwiQ.js";import{T as ka}from"./textarea-DDJx7dm7.js";import{D as dt}from"./database-DOREgfmn.js";const Ca=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],_a=Xt("link",Ca);var Sa=["points","className","baseLinePoints","connectNulls"];function xe(){return xe=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},xe.apply(this,arguments)}function Oa(s,t){if(s==null)return{};var r=Da(s,t),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(n=0;n<i.length;n++)a=i[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Da(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function ut(s){return La(s)||Ra(s)||Ta(s)||Ea()}function Ea(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ta(s,t){if(s){if(typeof s=="string")return Ze(s,t);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ze(s,t)}}function Ra(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function La(s){if(Array.isArray(s))return Ze(s)}function Ze(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=s[r];return a}var ht=function(t){return t&&t.x===+t.x&&t.y===+t.y},Ia=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(a){ht(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),ht(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},ke=function(t,r){var a=Ia(t);r&&(a=[a.reduce(function(i,c){return[].concat(ut(i),ut(c))},[])]);var n=a.map(function(i){return i.reduce(function(c,x,v){return"".concat(c).concat(v===0?"M":"L").concat(x.x,",").concat(x.y)},"")}).join("");return a.length===1?"".concat(n,"Z"):n},$a=function(t,r,a){var n=ke(t,a);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(ke(r.reverse(),a).slice(1))},Ma=function(t){var r=t.points,a=t.className,n=t.baseLinePoints,i=t.connectNulls,c=Oa(t,Sa);if(!r||!r.length)return null;var x=ie("recharts-polygon",a);if(n&&n.length){var v=c.stroke&&c.stroke!=="none",u=$a(r,n,i);return P.createElement("g",{className:x},P.createElement("path",xe({},I(c,!0),{fill:u.slice(-1)==="Z"?c.fill:"none",stroke:"none",d:u})),v?P.createElement("path",xe({},I(c,!0),{fill:"none",d:ke(r,i)})):null,v?P.createElement("path",xe({},I(c,!0),{fill:"none",d:ke(n,i)})):null)}var m=ke(r,i);return P.createElement("path",xe({},I(c,!0),{fill:m.slice(-1)==="Z"?c.fill:"none",className:x,d:m}))},Ue,mt;function Fa(){if(mt)return Ue;mt=1;var s=Pt(),t=ua(),r=kt();function a(n,i){return n&&n.length?s(n,r(i,2),t):void 0}return Ue=a,Ue}var Ba=Fa();const Ka=wt(Ba);var He,ft;function Va(){if(ft)return He;ft=1;var s=Pt(),t=kt(),r=ha();function a(n,i){return n&&n.length?s(n,t(i,2),r):void 0}return He=a,He}var za=Va();const Qa=wt(za);var Ga=["cx","cy","angle","ticks","axisLine"],qa=["ticks","tick","angle","tickFormatter","stroke"];function je(s){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(s)}function Ce(){return Ce=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ce.apply(this,arguments)}function pt(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function ce(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pt(Object(r),!0).forEach(function(a){Fe(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function xt(s,t){if(s==null)return{};var r=Ua(s,t),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(n=0;n<i.length;n++)a=i[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Ua(s,t){if(s==null)return{};var r={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;r[a]=s[a]}return r}function Ha(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(s,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,Mt(a.key),a)}}function Wa(s,t,r){return t&&vt(s.prototype,t),r&&vt(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function Za(s,t,r){return t=Ie(t),Ja(s,$t()?Reflect.construct(t,r||[],Ie(s).constructor):t.apply(s,r))}function Ja(s,t){if(t&&(je(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xa(s)}function Xa(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function $t(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($t=function(){return!!s})()}function Ie(s){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ie(s)}function Ya(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&Je(s,t)}function Je(s,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Je(s,t)}function Fe(s,t,r){return t=Mt(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Mt(s){var t=es(s,"string");return je(t)=="symbol"?t:t+""}function es(s,t){if(je(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(je(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var Be=(function(s){function t(){return Ha(this,t),Za(this,t,arguments)}return Ya(t,s),Wa(t,[{key:"getTickValueCoord",value:function(a){var n=a.coordinate,i=this.props,c=i.angle,x=i.cx,v=i.cy;return re(x,v,n,c)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,n;switch(a){case"left":n="end";break;case"right":n="start";break;default:n="middle";break}return n}},{key:"getViewBox",value:function(){var a=this.props,n=a.cx,i=a.cy,c=a.angle,x=a.ticks,v=Ka(x,function(m){return m.coordinate||0}),u=Qa(x,function(m){return m.coordinate||0});return{cx:n,cy:i,startAngle:c,endAngle:c,innerRadius:u.coordinate||0,outerRadius:v.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,n=a.cx,i=a.cy,c=a.angle,x=a.ticks,v=a.axisLine,u=xt(a,Ga),m=x.reduce(function(f,h){return[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)]},[1/0,-1/0]),p=re(n,i,m[0],c),d=re(n,i,m[1],c),g=ce(ce(ce({},I(u,!1)),{},{fill:"none"},I(v,!1)),{},{x1:p.x,y1:p.y,x2:d.x,y2:d.y});return P.createElement("line",Ce({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var a=this,n=this.props,i=n.ticks,c=n.tick,x=n.angle,v=n.tickFormatter,u=n.stroke,m=xt(n,qa),p=this.getTickTextAnchor(),d=I(m,!1),g=I(c,!1),f=i.map(function(h,A){var b=a.getTickValueCoord(h),o=ce(ce(ce(ce({textAnchor:p,transform:"rotate(".concat(90-x,", ").concat(b.x,", ").concat(b.y,")")},d),{},{stroke:"none",fill:u},g),{},{index:A},b),{},{payload:h});return P.createElement(U,Ce({className:ie("recharts-polar-radius-axis-tick",Ct(c)),key:"tick-".concat(h.coordinate)},st(a.props,h,A)),t.renderTickItem(c,o,v?v(h.value,A):h.value))});return P.createElement(U,{className:"recharts-polar-radius-axis-ticks"},f)}},{key:"render",value:function(){var a=this.props,n=a.ticks,i=a.axisLine,c=a.tick;return!n||!n.length?null:P.createElement(U,{className:ie("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),c&&this.renderTicks(),_t.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,n,i){var c;return P.isValidElement(a)?c=P.cloneElement(a,n):de(a)?c=a(n):c=P.createElement(at,Ce({},n,{className:"recharts-polar-radius-axis-tick-value"}),i),c}}])})(E.PureComponent);Fe(Be,"displayName","PolarRadiusAxis");Fe(Be,"axisType","radiusAxis");Fe(Be,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ye(s){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(s)}function ue(){return ue=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ue.apply(this,arguments)}function gt(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function oe(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gt(Object(r),!0).forEach(function(a){Ke(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function ts(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function jt(s,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,Bt(a.key),a)}}function as(s,t,r){return t&&jt(s.prototype,t),r&&jt(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function ss(s,t,r){return t=$e(t),rs(s,Ft()?Reflect.construct(t,r||[],$e(s).constructor):t.apply(s,r))}function rs(s,t){if(t&&(ye(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ns(s)}function ns(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Ft(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ft=function(){return!!s})()}function $e(s){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$e(s)}function is(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&Xe(s,t)}function Xe(s,t){return Xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Xe(s,t)}function Ke(s,t,r){return t=Bt(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Bt(s){var t=ls(s,"string");return ye(t)=="symbol"?t:t+""}function ls(s,t){if(ye(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(ye(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var cs=Math.PI/180,yt=1e-5,Ve=(function(s){function t(){return ts(this,t),ss(this,t,arguments)}return is(t,s),as(t,[{key:"getTickLineCoord",value:function(a){var n=this.props,i=n.cx,c=n.cy,x=n.radius,v=n.orientation,u=n.tickSize,m=u||8,p=re(i,c,x,a.coordinate),d=re(i,c,x+(v==="inner"?-1:1)*m,a.coordinate);return{x1:p.x,y1:p.y,x2:d.x,y2:d.y}}},{key:"getTickTextAnchor",value:function(a){var n=this.props.orientation,i=Math.cos(-a.coordinate*cs),c;return i>yt?c=n==="outer"?"start":"end":i<-yt?c=n==="outer"?"end":"start":c="middle",c}},{key:"renderAxisLine",value:function(){var a=this.props,n=a.cx,i=a.cy,c=a.radius,x=a.axisLine,v=a.axisLineType,u=oe(oe({},I(this.props,!1)),{},{fill:"none"},I(x,!1));if(v==="circle")return P.createElement(ma,ue({className:"recharts-polar-angle-axis-line"},u,{cx:n,cy:i,r:c}));var m=this.props.ticks,p=m.map(function(d){return re(n,i,c,d.coordinate)});return P.createElement(Ma,ue({className:"recharts-polar-angle-axis-line"},u,{points:p}))}},{key:"renderTicks",value:function(){var a=this,n=this.props,i=n.ticks,c=n.tick,x=n.tickLine,v=n.tickFormatter,u=n.stroke,m=I(this.props,!1),p=I(c,!1),d=oe(oe({},m),{},{fill:"none"},I(x,!1)),g=i.map(function(f,h){var A=a.getTickLineCoord(f),b=a.getTickTextAnchor(f),o=oe(oe(oe({textAnchor:b},m),{},{stroke:"none",fill:u},p),{},{index:h,payload:f,x:A.x2,y:A.y2});return P.createElement(U,ue({className:ie("recharts-polar-angle-axis-tick",Ct(c)),key:"tick-".concat(f.coordinate)},st(a.props,f,h)),x&&P.createElement("line",ue({className:"recharts-polar-angle-axis-tick-line"},d,A)),c&&t.renderTickItem(c,o,v?v(f.value,h):f.value))});return P.createElement(U,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var a=this.props,n=a.ticks,i=a.radius,c=a.axisLine;return i<=0||!n||!n.length?null:P.createElement(U,{className:ie("recharts-polar-angle-axis",this.props.className)},c&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,n,i){var c;return P.isValidElement(a)?c=P.cloneElement(a,n):de(a)?c=a(n):c=P.createElement(at,ue({},n,{className:"recharts-polar-angle-axis-tick-value"}),i),c}}])})(E.PureComponent);Ke(Ve,"displayName","PolarAngleAxis");Ke(Ve,"axisType","angleAxis");Ke(Ve,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Te;function be(s){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(s)}function ve(){return ve=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},ve.apply(this,arguments)}function bt(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function D(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bt(Object(r),!0).forEach(function(a){G(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function os(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(s,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,Vt(a.key),a)}}function ds(s,t,r){return t&&Nt(s.prototype,t),r&&Nt(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function us(s,t,r){return t=Me(t),hs(s,Kt()?Reflect.construct(t,r||[],Me(s).constructor):t.apply(s,r))}function hs(s,t){if(t&&(be(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ms(s)}function ms(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Kt(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kt=function(){return!!s})()}function Me(s){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Me(s)}function fs(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&Ye(s,t)}function Ye(s,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Ye(s,t)}function G(s,t,r){return t=Vt(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Vt(s){var t=ps(s,"string");return be(t)=="symbol"?t:t+""}function ps(s,t){if(be(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(be(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var Z=(function(s){function t(r){var a;return os(this,t),a=us(this,t,[r]),G(a,"pieRef",null),G(a,"sectorRefs",[]),G(a,"id",ya("recharts-pie-")),G(a,"handleAnimationEnd",function(){var n=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),de(n)&&n()}),G(a,"handleAnimationStart",function(){var n=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),de(n)&&n()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return fs(t,s),ds(t,[{key:"isActiveIndex",value:function(a){var n=this.props.activeIndex;return Array.isArray(n)?n.indexOf(a)!==-1:a===n}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,c=i.label,x=i.labelLine,v=i.dataKey,u=i.valueKey,m=I(this.props,!1),p=I(c,!1),d=I(x,!1),g=c&&c.offsetRadius||20,f=a.map(function(h,A){var b=(h.startAngle+h.endAngle)/2,o=re(h.cx,h.cy,h.outerRadius+g,b),j=D(D(D(D({},m),h),{},{stroke:"none"},p),{},{index:A,textAnchor:t.getTextAnchor(o.x,h.cx)},o),k=D(D(D(D({},m),h),{},{fill:"none",stroke:h.fill},d),{},{index:A,points:[re(h.cx,h.cy,h.outerRadius,b),o]}),N=v;return ge(v)&&ge(u)?N="value":ge(v)&&(N=u),P.createElement(U,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(A)},x&&t.renderLabelLineItem(x,k,"line"),t.renderLabelItem(c,j,fe(h,N)))});return P.createElement(U,{className:"recharts-pie-labels"},f)}},{key:"renderSectorsStatically",value:function(a){var n=this,i=this.props,c=i.activeShape,x=i.blendStroke,v=i.inactiveShape;return a.map(function(u,m){if(u?.startAngle===0&&u?.endAngle===0&&a.length!==1)return null;var p=n.isActiveIndex(m),d=v&&n.hasActiveIndex()?v:null,g=p?c:d,f=D(D({},u),{},{stroke:x?u.fill:u.stroke,tabIndex:-1});return P.createElement(U,ve({ref:function(A){A&&!n.sectorRefs.includes(A)&&n.sectorRefs.push(A)},tabIndex:-1,className:"recharts-pie-sector"},st(n.props,u,m),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(m)}),P.createElement(pa,ve({option:g,isActive:p,shapeType:"sector"},f)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,n=this.props,i=n.sectors,c=n.isAnimationActive,x=n.animationBegin,v=n.animationDuration,u=n.animationEasing,m=n.animationId,p=this.state,d=p.prevSectors,g=p.prevIsAnimationActive;return P.createElement(xa,{begin:x,duration:v,isActive:c,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(f){var h=f.t,A=[],b=i&&i[0],o=b.startAngle;return i.forEach(function(j,k){var N=d&&d[k],_=k>0?va(j,"paddingAngle",0):0;if(N){var H=ct(N.endAngle-N.startAngle,j.endAngle-j.startAngle),$=D(D({},j),{},{startAngle:o+_,endAngle:o+H(h)+_});A.push($),o=$.endAngle}else{var J=j.endAngle,z=j.startAngle,le=ct(0,J-z),he=le(h),W=D(D({},j),{},{startAngle:o+_,endAngle:o+he+_});A.push(W),o=W.endAngle}}),P.createElement(U,null,a.renderSectorsStatically(A))})}},{key:"attachKeyboardHandlers",value:function(a){var n=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var c=++n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[c].focus(),n.setState({sectorToFocus:c});break}case"ArrowRight":{var x=--n.state.sectorToFocus<0?n.sectorRefs.length-1:n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[x].focus(),n.setState({sectorToFocus:x});break}case"Escape":{n.sectorRefs[n.state.sectorToFocus].blur(),n.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,n=a.sectors,i=a.isAnimationActive,c=this.state.prevSectors;return i&&n&&n.length&&(!c||!ga(c,n))?this.renderSectorsWithAnimation():this.renderSectorsStatically(n)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,n=this.props,i=n.hide,c=n.sectors,x=n.className,v=n.label,u=n.cx,m=n.cy,p=n.innerRadius,d=n.outerRadius,g=n.isAnimationActive,f=this.state.isAnimationFinished;if(i||!c||!c.length||!pe(u)||!pe(m)||!pe(p)||!pe(d))return null;var h=ie("recharts-pie",x);return P.createElement(U,{tabIndex:this.props.rootTabIndex,className:h,ref:function(b){a.pieRef=b}},this.renderSectors(),v&&this.renderLabels(c),_t.renderCallByParent(this.props,null,!1),(!g||f)&&ja.renderCallByParent(this.props,c,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,n){return n.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==n.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:n.curSectors,isAnimationFinished:!0}:a.sectors!==n.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,n){return a>n?"start":a<n?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,n,i){if(P.isValidElement(a))return P.cloneElement(a,n);if(de(a))return a(n);var c=ie("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return P.createElement(fa,ve({},n,{key:i,type:"linear",className:c}))}},{key:"renderLabelItem",value:function(a,n,i){if(P.isValidElement(a))return P.cloneElement(a,n);var c=i;if(de(a)&&(c=a(n),P.isValidElement(c)))return c;var x=ie("recharts-pie-label-text",typeof a!="boolean"&&!de(a)?a.className:"");return P.createElement(at,ve({},n,{alignmentBaseline:"middle",className:x}),c)}}])})(E.PureComponent);Te=Z;G(Z,"displayName","Pie");G(Z,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ba.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});G(Z,"parseDeltaAngle",function(s,t){var r=Ee(t-s),a=Math.min(Math.abs(t-s),360);return r*a});G(Z,"getRealPieData",function(s){var t=s.data,r=s.children,a=I(s,!1),n=Na(r,rt);return t&&t.length?t.map(function(i,c){return D(D(D({payload:i},a),i),n&&n[c]&&n[c].props)}):n&&n.length?n.map(function(i){return D(D({},a),i.props)}):[]});G(Z,"parseCoordinateOfPie",function(s,t){var r=t.top,a=t.left,n=t.width,i=t.height,c=Aa(n,i),x=a+De(s.cx,n,n/2),v=r+De(s.cy,i,i/2),u=De(s.innerRadius,c,0),m=De(s.outerRadius,c,c*.8),p=s.maxRadius||Math.sqrt(n*n+i*i)/2;return{cx:x,cy:v,innerRadius:u,outerRadius:m,maxRadius:p}});G(Z,"getComposedData",function(s){var t=s.item,r=s.offset,a=t.type.defaultProps!==void 0?D(D({},t.type.defaultProps),t.props):t.props,n=Te.getRealPieData(a);if(!n||!n.length)return null;var i=a.cornerRadius,c=a.startAngle,x=a.endAngle,v=a.paddingAngle,u=a.dataKey,m=a.nameKey,p=a.valueKey,d=a.tooltipType,g=Math.abs(a.minAngle),f=Te.parseCoordinateOfPie(a,r),h=Te.parseDeltaAngle(c,x),A=Math.abs(h),b=u;ge(u)&&ge(p)?(ot(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):ge(u)&&(ot(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=p);var o=n.filter(function($){return fe($,b,0)!==0}).length,j=(A>=360?o:o-1)*v,k=A-o*g-j,N=n.reduce(function($,J){var z=fe(J,b,0);return $+(pe(z)?z:0)},0),_;if(N>0){var H;_=n.map(function($,J){var z=fe($,b,0),le=fe($,m,J),he=(pe(z)?z:0)/N,W;J?W=H.endAngle+Ee(h)*v*(z!==0?1:0):W=c;var T=W+Ee(h)*((z!==0?g:0)+he*k),_e=(W+T)/2,Se=(f.innerRadius+f.outerRadius)/2,me=[{name:le,value:z,payload:$,dataKey:b,type:d}],ze=re(f.cx,f.cy,Se,_e);return H=D(D(D({percent:he,cornerRadius:i,name:le,tooltipPayload:me,midAngle:_e,middleRadius:Se,tooltipPosition:ze},$),f),{},{value:fe($,b),startAngle:W,endAngle:T,payload:$,paddingAngle:Ee(h)*v}),H})}return D(D({},f),{},{sectors:_,data:n})});var zt=wa({chartName:"PieChart",GraphicalChild:Z,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ve},{axisType:"radiusAxis",AxisComp:Be}],formatAxisMap:Pa,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});let xs=class{nodes;getComponentMetrics;constructor(t,r){this.nodes=t,this.getComponentMetrics=r}executeQuery(t,r){const a=[],n=Date.now();if(t.includes("component_throughput_total")||t.includes("throughput"))this.nodes.forEach(i=>{const c=this.getComponentMetrics(i.id);c&&a.push({timestamp:n,value:c.throughput||0,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("component_latency_ms")||t.includes("latency"))this.nodes.forEach(i=>{const c=this.getComponentMetrics(i.id);c&&a.push({timestamp:n,value:c.latency||0,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("component_error_rate")||t.includes("error_rate"))this.nodes.forEach(i=>{const c=this.getComponentMetrics(i.id);c&&a.push({timestamp:n,value:(c.errorRate||0)*100,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("component_utilization")||t.includes("utilization"))this.nodes.forEach(i=>{const c=this.getComponentMetrics(i.id);c&&a.push({timestamp:n,value:(c.utilization||0)*100,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else if(t.includes("up"))this.nodes.forEach(i=>{const c=this.getComponentMetrics(i.id);a.push({timestamp:n,value:c?1:0,labels:{component:i.data.label||i.type,component_id:i.id,component_type:i.type}})});else return[];return a}};function vs({panel:s,executor:t,timeRange:r}){const[a,n]=E.useState([]),[i,c]=E.useState([]);E.useEffect(()=>{const u=[];s.queries.forEach((m,p)=>{t.executeQuery(m.expr,r).forEach(g=>{u.push({...g,series:m.legendFormat?m.legendFormat.replace("{{component}}",g.labels.component||"unknown"):`Series ${p+1}`,refId:m.refId})})}),n(u),c(m=>[...m,{timestamp:Date.now(),data:u}].slice(-50))},[s.queries,t,r]);const x=E.useMemo(()=>{if(s.type==="graph"||s.type==="bargraph"){const u=new Map;i.forEach((d,g)=>{d.data.forEach(f=>{const h=f.series||"default";u.has(h)||u.set(h,[]),u.get(h).push({time:g,value:f.value,timestamp:d.timestamp})})});const m=Math.max(...Array.from(u.values()).map(d=>d.length)),p=[];for(let d=0;d<m;d++){const g={time:d};u.forEach((f,h)=>{f[d]&&(g[h]=f[d].value)}),p.push(g)}return p}return a},[i,a,s.type]),v=()=>{switch(s.type){case"graph":case"bargraph":const u=s.type==="bargraph"?It:St,m=s.type==="bargraph"?Ot:Dt;if(x.length===0)return e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground text-sm",children:"No data available"});const p=Array.from(new Set(a.map(o=>o.series))),d=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00","#ff00ff"];return e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(u,{data:x,children:[e.jsx(Et,{strokeDasharray:"3 3"}),e.jsx(Tt,{dataKey:"time"}),e.jsx(Rt,{}),e.jsx(Le,{}),e.jsx(Lt,{}),p.map((o,j)=>e.jsx(m,{type:"monotone",dataKey:o,stroke:d[j%d.length],fill:d[j%d.length]},o))]})});case"stat":const g=a.length>0?a.reduce((o,j)=>o+j.value,0)/a.length:0;return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-4xl font-bold",children:g.toFixed(2)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:s.title})]});case"gauge":const f=a.length>0?a.reduce((o,j)=>o+j.value,0)/a.length:0,h=Math.min(100,Math.max(0,f));return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-muted"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${2*Math.PI*56}`,strokeDashoffset:`${2*Math.PI*56*(1-h/100)}`,className:"text-primary transition-all"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-2xl font-bold",children:[h.toFixed(0),"%"]})})]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:s.title})]});case"table":return e.jsx("div",{className:"h-full overflow-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Component"}),e.jsx("th",{className:"text-right p-2",children:"Value"})]})}),e.jsx("tbody",{children:a.map((o,j)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:o.labels?.component||"Unknown"}),e.jsx("td",{className:"text-right p-2",children:o.value.toFixed(2)})]},j))})]})});case"piechart":const A=a.map(o=>({name:o.labels?.component||"Unknown",value:o.value})),b=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00","#ff00ff"];return e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(zt,{children:[e.jsx(Z,{data:A,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,percent:j})=>`${o}: ${(j*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:A.map((o,j)=>e.jsx(rt,{fill:b[j%b.length]},`cell-${j}`))}),e.jsx(Le,{})]})});default:return e.jsxs("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:['Panel type "',s.type,'" not supported']})}};return e.jsxs(F,{className:"h-full",children:[e.jsx(B,{className:"pb-2",children:e.jsx(K,{className:"text-sm font-medium",children:s.title})}),e.jsx(M,{className:"h-[calc(100%-60px)]",children:v()})]})}function At({componentId:s,dashboardId:t,onClose:r}){const{nodes:a}=et(),{getComponentMetrics:n,isRunning:i}=tt(),c=a.find(o=>o.id===s),u=((c?.data.config||{}).dashboards||[]).map(o=>typeof o.panels=="number"?{id:o.id||String(Date.now()),name:o.name||"Dashboard",panels:[],tags:Array.isArray(o.tags)?o.tags:[],refresh:o.refresh||"30s"}:o).filter(o=>o&&typeof o=="object"&&o.id),m=t?u.find(o=>o.id===t):u[0],[p,d]=E.useState({from:Date.now()-3e5,to:Date.now()}),[g,f]=E.useState(0),h=E.useMemo(()=>new xs(a,n),[a,n]);E.useEffect(()=>{if(!i||!m)return;const o=A(m.refresh||"30s"),j=setInterval(()=>{d({from:Date.now()-3e5,to:Date.now()}),f(k=>k+1)},o);return()=>clearInterval(j)},[i,m]);function A(o){const j=o.match(/^(\d+)([smhd])$/);if(!j)return 3e4;const k=parseInt(j[1]);switch(j[2]){case"s":return k*1e3;case"m":return k*60*1e3;case"h":return k*60*60*1e3;case"d":return k*24*60*60*1e3;default:return 3e4}}if(!c)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Grafana component not found"});if(u.length===0)return e.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No dashboards configured"}),e.jsx("p",{className:"text-sm mt-2",children:"Configure dashboards in Grafana settings"})]});if(!m)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Dashboard not found"});const b=[...m.panels].sort((o,j)=>o.gridPos.y!==j.gridPos.y?o.gridPos.y-j.gridPos.y:o.gridPos.x-j.gridPos.x);return e.jsxs("div",{className:"h-full flex flex-col bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(se,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:m.name}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:m.tags.map((o,j)=>e.jsx(ae,{variant:"outline",className:"text-xs",children:o},j))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>{d({from:Date.now()-3e5,to:Date.now()}),f(o=>o+1)},children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Refresh"]}),r&&e.jsx(L,{size:"sm",variant:"ghost",onClick:r,children:e.jsx(ea,{className:"h-4 w-4"})})]})]}),e.jsx(ta,{className:"flex-1",children:e.jsx("div",{className:"p-4",children:b.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No panels in this dashboard"})]}):e.jsx("div",{className:"grid grid-cols-12 gap-4",children:b.map(o=>e.jsx("div",{className:"col-span-12",style:{gridColumn:`span ${Math.min(12,o.gridPos.w||12)}`,minHeight:`${(o.gridPos.h||8)*40}px`},children:e.jsx(vs,{panel:o,executor:h,timeRange:p},`${o.id}-${g}`)},o.id))})})}),!i&&e.jsx("div",{className:"p-2 bg-yellow-500/10 border-t border-yellow-500/20",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-yellow-600",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx("span",{children:"Simulation is not running. Start emulation to see live data."})]})})]})}class gs{nodes;getComponentMetrics;constructor(t,r){this.nodes=t,this.getComponentMetrics=r}executeQuery(t){const r=[],a=Date.now();return t.includes("component_throughput_total")||t.includes("throughput")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:i.throughput||0,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("component_latency_ms")||t.includes("latency")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:i.latency||0,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("component_error_rate")||t.includes("error_rate")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:(i.errorRate||0)*100,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("component_utilization")||t.includes("utilization")?this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);i&&r.push({timestamp:a,value:(i.utilization||0)*100,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}):t.includes("up")&&this.nodes.forEach(n=>{const i=this.getComponentMetrics(n.id);r.push({timestamp:a,value:i?1:0,labels:{component:n.data.label||n.type,component_id:n.id,component_type:n.type}})}),r}}function js({panel:s,executor:t}){const[r,a]=E.useState([]),[n,i]=E.useState([]),{isRunning:c}=tt(),[x,v]=E.useState(0);E.useEffect(()=>{const p=[];s.queries.forEach((d,g)=>{t.executeQuery(d.expr).forEach(h=>{p.push({...h,series:d.legendFormat?d.legendFormat.replace("{{component}}",h.labels.component||"unknown"):`Series ${g+1}`})})}),a(p),i(d=>[...d,{timestamp:Date.now(),data:p}].slice(-20))},[s.queries,t,x]),E.useEffect(()=>{if(!c)return;const p=setInterval(()=>{v(d=>d+1)},1e3);return()=>clearInterval(p)},[c]);const u=E.useMemo(()=>{if(s.type==="graph"||s.type==="bargraph"){const p=new Map;n.forEach((f,h)=>{f.data.forEach(A=>{const b=A.series||"default";p.has(b)||p.set(b,[]),p.get(b).push({time:h,value:A.value})})});const d=Math.max(...Array.from(p.values()).map(f=>f.length),0),g=[];for(let f=0;f<d;f++){const h={time:f};p.forEach((A,b)=>{A[f]&&(h[b]=A[f].value)}),g.push(h)}return g}return r},[n,r,s.type]),m=()=>{switch(s.type){case"graph":case"bargraph":const p=s.type==="bargraph"?It:St,d=s.type==="bargraph"?Ot:Dt;if(u.length===0)return e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground text-xs",children:"No data"});const g=Array.from(new Set(r.map(k=>k.series))),f=["#8884d8","#82ca9d","#ffc658","#ff7300"];return e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(p,{data:u,children:[e.jsx(Et,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(Tt,{dataKey:"time",stroke:"rgba(255,255,255,0.5)"}),e.jsx(Rt,{stroke:"rgba(255,255,255,0.5)"}),e.jsx(Le,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",border:"1px solid rgba(255,255,255,0.1)"}}),e.jsx(Lt,{wrapperStyle:{fontSize:"12px"}}),g.map((k,N)=>e.jsx(d,{type:"monotone",dataKey:k,stroke:f[N%f.length],fill:f[N%f.length],strokeWidth:2},k))]})});case"stat":const h=r.length>0?r.reduce((k,N)=>k+N.value,0)/r.length:0;return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:h.toFixed(1)}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.title})]});case"gauge":const A=r.length>0?r.reduce((k,N)=>k+N.value,0)/r.length:0,b=Math.min(100,Math.max(0,A));return e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsxs("svg",{className:"transform -rotate-90 w-24 h-24",children:[e.jsx("circle",{cx:"48",cy:"48",r:"42",stroke:"currentColor",strokeWidth:"6",fill:"none",className:"text-muted opacity-30"}),e.jsx("circle",{cx:"48",cy:"48",r:"42",stroke:"currentColor",strokeWidth:"6",fill:"none",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:`${2*Math.PI*42*(1-b/100)}`,className:"text-orange-500 transition-all"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-xl font-bold",children:[b.toFixed(0),"%"]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.title})]});case"table":return e.jsx("div",{className:"h-full overflow-auto text-xs",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-1",children:"Component"}),e.jsx("th",{className:"text-right p-1",children:"Value"})]})}),e.jsx("tbody",{children:r.slice(0,5).map((k,N)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-1",children:k.labels?.component||"Unknown"}),e.jsx("td",{className:"text-right p-1",children:k.value.toFixed(1)})]},N))})]})});case"piechart":const o=r.slice(0,5).map(k=>({name:k.labels?.component||"Unknown",value:k.value})),j=["#8884d8","#82ca9d","#ffc658","#ff7300","#00ff00"];return e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(zt,{children:[e.jsx(Z,{data:o,cx:"50%",cy:"50%",labelLine:!1,label:({percent:k})=>`${(k*100).toFixed(0)}%`,outerRadius:60,fill:"#8884d8",dataKey:"value",children:o.map((k,N)=>e.jsx(rt,{fill:j[N%j.length]},`cell-${N}`))}),e.jsx(Le,{})]})});default:return e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground text-xs",children:s.type})}};return e.jsxs(F,{className:"h-full",children:[e.jsx(B,{className:"pb-2",children:e.jsx(K,{className:"text-sm font-medium",children:s.title})}),e.jsx(M,{className:"h-[calc(100%-50px)]",children:m()})]})}function ys({componentId:s,dashboardId:t}){const{nodes:r}=et(),{getComponentMetrics:a,isRunning:n}=tt(),u=((r.find(d=>d.id===s)?.data.config||{}).dashboards||[]).map(d=>typeof d.panels=="number"?{id:d.id,name:d.name,panels:[],tags:[]}:d).filter(d=>d&&typeof d=="object"&&d.id).find(d=>d.id===t),m=E.useMemo(()=>new gs(r,a),[r,a]);if(E.useEffect(()=>{if(!n)return;const d=setInterval(()=>{},1e3);return()=>clearInterval(d)},[n]),!u||u.panels.length===0)return e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:"No panels in this dashboard"})});const p=u.panels.slice(0,4);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:p.map(d=>e.jsx("div",{className:"h-48",children:e.jsx(js,{panel:d,executor:m})},d.id))}),u.panels.length>4&&e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["+",u.panels.length-4,' more panels. Click "Open Dashboard" to view all.']}),!n&&e.jsx("div",{className:"text-center text-xs text-yellow-600 bg-yellow-500/10 p-2 rounded",children:"Start emulation to see live data"})]})}function _s({componentId:s}){const[t,r]=E.useState(null),[a,n]=E.useState(null),[i,c]=E.useState(!1),[x,v]=E.useState(!1),[u,m]=E.useState(!1),[p,d]=E.useState(!1),[g,f]=E.useState(void 0);try{const{nodes:h,updateNode:A}=et(),b=h.find(l=>l.id===s);if(!b)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const o=b.data.config||{},j=o.adminUser||"admin",k=o.adminPassword||"admin";let N=[];Array.isArray(o.datasources)&&(o.datasources.length>0&&typeof o.datasources[0]=="string"?N=o.datasources.map(l=>({name:l,type:"prometheus",url:"http://localhost:9090",access:"proxy",isDefault:l===o.datasources[0]})):N=o.datasources.filter(l=>l&&typeof l=="object"&&l.name)),N.length===0&&(N=[{name:"Prometheus",type:"prometheus",url:"http://localhost:9090",access:"proxy",isDefault:!0}]);let _=[];Array.isArray(o.dashboards)&&(_=o.dashboards.map(l=>{if(l&&typeof l=="object"){if(typeof l.panels=="number")return{...l,panels:[],tags:Array.isArray(l.tags)?l.tags:[]};if(Array.isArray(l.panels))return{...l,panels:l.panels.map(C=>({id:C.id||`panel-${Date.now()}`,title:C.title||"Panel",type:C.type||"graph",datasource:C.datasource||N[0]?.name||"Prometheus",queries:Array.isArray(C.queries)?C.queries:[{refId:"A",expr:"up"}],gridPos:C.gridPos||{x:0,y:0,w:12,h:8}})),tags:Array.isArray(l.tags)?l.tags:[]}}return l}).filter(l=>l&&typeof l=="object"&&l.id)),_.length===0&&(_=[{id:"1",name:"Overview",panels:[{id:"panel-1",title:"CPU Usage",type:"graph",datasource:N.length>0?N[0].name:"Prometheus",queries:[{refId:"A",expr:"rate(process_cpu_seconds_total[5m])",legendFormat:"CPU"}],gridPos:{x:0,y:0,w:12,h:8}}],tags:["system","overview"],refresh:"30s"}]);const H=Array.isArray(o.alerts)?o.alerts.filter(l=>l&&typeof l=="object"&&l.id):[],$=o.defaultDashboard||"overview",J=o.enableAuth??!1,z=o.authProvider||"ldap",le=o.enableAlerting??!0,he=Array.isArray(o.alertNotificationChannels)?o.alertNotificationChannels:["email","slack"],W=o.theme||"dark",T=l=>{A(s,{data:{...b.data,config:{...o,...l}}})},_e=()=>{const l={name:"New Data Source",type:"prometheus",url:"http://localhost:9090",access:"proxy"};T({datasources:[...N,l]}),m(!1)},Se=l=>{T({datasources:N.filter((C,y)=>y!==l)})},me=(l,C,y)=>{const w=[...N];w[l]={...w[l],[C]:y},T({datasources:w})},ze=()=>{const l={id:String(Date.now()),name:"New Dashboard",panels:[],tags:[],refresh:"30s"};T({dashboards:[..._,l]}),c(!1)},Qt=l=>{T({dashboards:_.filter((C,y)=>y!==l)})},Gt=l=>{const C=N&&N.length>0?N[0].name:"Prometheus",y={id:`panel-${Date.now()}`,title:"New Panel",type:"graph",datasource:C,queries:[{refId:"A",expr:"up",legendFormat:"{{instance}}"}],gridPos:{x:0,y:0,w:12,h:8}},w=_.map(R=>R.id===l?{...R,panels:[...R.panels,y]}:R);T({dashboards:w})},qt=(l,C)=>{const y=_.map(w=>w.id===l?{...w,panels:w.panels.filter(R=>R.id!==C)}:w);T({dashboards:y})},Qe=(l,C,y,w)=>{const R=_.map(V=>V.id===l?{...V,panels:V.panels.map(ne=>ne.id===C?{...ne,[y]:w}:ne)}:V);T({dashboards:R})},Ut=(l,C)=>{const y=_.map(w=>w.id===l?{...w,panels:w.panels.map(R=>{if(R.id===C){const V=Array.isArray(R.queries)?R.queries:[];return{...R,queries:[...V,{refId:String.fromCharCode(65+V.length),expr:"",legendFormat:""}]}}return R})}:w);T({dashboards:y})},nt=(l,C,y,w,R)=>{const V=_.map(ne=>ne.id===l?{...ne,panels:ne.panels.map(Ne=>{if(Ne.id===C){const Zt=Array.isArray(Ne.queries)?Ne.queries:[];return{...Ne,queries:Zt.map((it,Jt)=>Jt===y?{...it,[w]:R}:it)}}return Ne})}:ne);T({dashboards:V})},Ht=()=>{const l={id:`alert-${Date.now()}`,name:"New Alert",condition:{query:"up == 0",evaluator:{type:"gt",params:[0]},reducer:{type:"last",params:[]}},for:"5m",annotations:{summary:"Alert triggered",description:"Service is down"},notificationChannels:he.slice(0,1)};T({alerts:[...H,l]}),v(!1)},Wt=l=>{T({alerts:H.filter(C=>C.id!==l)})};return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500/10",children:e.jsx(se,{className:"h-6 w-6 text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Grafana"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Analytics & Monitoring Platform"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ae,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),"Running"]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>{f($==="overview"?_[0]?.id:_.find(l=>l.id===$)?.id),d(!0)},children:[e.jsx(_a,{className:"h-4 w-4 mr-2"}),"Open Dashboard"]})]})]}),e.jsx(Ge,{}),e.jsxs(F,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Live Dashboard Preview"}),e.jsx(q,{children:"Real-time metrics from configured dashboards"})]}),_.length>0&&e.jsxs(X,{value:g||_[0]?.id,onValueChange:l=>f(l),children:[e.jsx(Y,{className:"w-48",children:e.jsx(ee,{})}),e.jsx(te,{children:_.map(l=>e.jsx(S,{value:l.id,children:l.name},l.id))})]})]})}),e.jsx(M,{children:_.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No dashboards configured"}),e.jsx("p",{className:"text-sm mt-2",children:"Create a dashboard to see live metrics here"})]}):e.jsx(ys,{componentId:s,dashboardId:g||_[0]?.id})})]}),e.jsxs(aa,{defaultValue:"dashboard",className:"w-full",children:[e.jsxs(sa,{className:"grid w-full grid-cols-5",children:[e.jsxs(Ae,{value:"dashboard",className:"gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Dashboard"]}),e.jsxs(Ae,{value:"datasources",className:"gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"Data Sources"]}),e.jsxs(Ae,{value:"dashboards",className:"gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Dashboards"]}),e.jsxs(Ae,{value:"alerts",className:"gap-2",children:[e.jsx(lt,{className:"h-4 w-4"}),"Alerts"]}),e.jsxs(Ae,{value:"settings",className:"gap-2",children:[e.jsx(ra,{className:"h-4 w-4"}),"Settings"]})]}),e.jsx(we,{value:"dashboard",className:"space-y-4 mt-4",children:e.jsxs(F,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Live Dashboard"}),e.jsx(q,{children:"Real-time metrics visualization"})]}),_.length>0&&e.jsxs(X,{value:g||_[0]?.id,onValueChange:l=>f(l),children:[e.jsx(Y,{className:"w-48",children:e.jsx(ee,{})}),e.jsx(te,{children:_.map(l=>e.jsx(S,{value:l.id,children:l.name},l.id))})]})]})}),e.jsx(M,{children:_.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(se,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No dashboards configured"}),e.jsx("p",{className:"text-sm mt-2",children:'Create a dashboard in the "Dashboards" tab'})]}):e.jsx("div",{className:"h-[600px] border rounded-lg overflow-hidden",children:e.jsx(At,{componentId:s,dashboardId:g||_[0]?.id})})})]})}),e.jsxs(we,{value:"datasources",className:"space-y-4 mt-4",children:[u&&e.jsxs(F,{className:"mb-4 border-primary",children:[e.jsxs(B,{children:[e.jsx(K,{children:"Create Data Source"}),e.jsx(q,{children:"Configure connection to metrics/logs database"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Name"}),e.jsx(Q,{placeholder:"Prometheus"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Type"}),e.jsxs(X,{defaultValue:"prometheus",children:[e.jsx(Y,{children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"prometheus",children:"Prometheus"}),e.jsx(S,{value:"loki",children:"Loki"}),e.jsx(S,{value:"influxdb",children:"InfluxDB"}),e.jsx(S,{value:"elasticsearch",children:"Elasticsearch"}),e.jsx(S,{value:"postgres",children:"PostgreSQL"}),e.jsx(S,{value:"mysql",children:"MySQL"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"URL"}),e.jsx(Q,{placeholder:"http://localhost:9090"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{onClick:_e,children:"Create Data Source"}),e.jsx(L,{variant:"outline",onClick:()=>m(!1),children:"Cancel"})]})]})]}),e.jsxs(F,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Data Sources"}),e.jsx(q,{children:"Configure data sources for metrics and logs"})]}),e.jsxs(L,{size:"sm",onClick:()=>m(!0),variant:"outline",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Add Data Source"]})]})}),e.jsx(M,{children:e.jsx("div",{className:"space-y-3",children:N.map((l,C)=>e.jsxs(F,{className:"border-border",children:[e.jsx(B,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded bg-primary/10",children:e.jsx(dt,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx(K,{className:"text-lg",children:l.name}),e.jsxs(q,{className:"text-xs mt-1",children:[l.type,"  ",l.url,l.isDefault&&e.jsx(ae,{variant:"outline",className:"ml-2",children:"Default"})]})]})]}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>Se(C),children:e.jsx(Oe,{className:"h-4 w-4"})})]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Name"}),e.jsx(Q,{value:l.name,onChange:y=>me(C,"name",y.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Type"}),e.jsxs(X,{value:l.type,onValueChange:y=>me(C,"type",y),children:[e.jsx(Y,{children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"prometheus",children:"Prometheus"}),e.jsx(S,{value:"loki",children:"Loki"}),e.jsx(S,{value:"influxdb",children:"InfluxDB"}),e.jsx(S,{value:"elasticsearch",children:"Elasticsearch"}),e.jsx(S,{value:"postgres",children:"PostgreSQL"}),e.jsx(S,{value:"mysql",children:"MySQL"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"URL"}),e.jsx(Q,{value:l.url,onChange:y=>me(C,"url",y.target.value),placeholder:"http://localhost:9090"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{checked:l.isDefault||!1,onCheckedChange:y=>me(C,"isDefault",y)}),e.jsx(O,{children:"Set as default"})]})]})]},C))})})]})]}),e.jsxs(we,{value:"dashboards",className:"space-y-4 mt-4",children:[i&&e.jsxs(F,{className:"mb-4 border-primary",children:[e.jsxs(B,{children:[e.jsx(K,{children:"Create Dashboard"}),e.jsx(q,{children:"Configure dashboard settings"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Dashboard Name"}),e.jsx(Q,{placeholder:"My Dashboard"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{onClick:ze,children:"Create Dashboard"}),e.jsx(L,{variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]})]}),e.jsxs(F,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Dashboards"}),e.jsx(q,{children:"Manage and configure dashboards"})]}),e.jsxs(L,{size:"sm",onClick:()=>c(!0),variant:"outline",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Create Dashboard"]})]})}),e.jsx(M,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:_.map((l,C)=>e.jsxs(F,{className:"border-border hover:border-primary/50 transition-colors cursor-pointer",children:[e.jsx(B,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(K,{className:"text-base",children:l.name})]}),_.length>1&&e.jsx(L,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>Qt(C),children:e.jsx(Oe,{className:"h-3 w-3"})})]})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Panels:"}),e.jsx("span",{className:"font-semibold",children:Array.isArray(l.panels)?l.panels.length:0})]}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:l.tags.map((y,w)=>e.jsx(ae,{variant:"outline",className:"text-xs",children:y},w))}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(L,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>r(t===l.id?null:l.id),children:[e.jsx(na,{className:"h-3 w-3 mr-2"}),t===l.id?"Hide":"Edit"]}),e.jsxs(L,{size:"sm",variant:"default",className:"flex-1",onClick:()=>{f(l.id),d(!0)},children:[e.jsx(lt,{className:"h-3 w-3 mr-2"}),"View"]})]})]})}),t===l.id&&e.jsx(M,{className:"pt-0 border-t",children:e.jsxs("div",{className:"space-y-3 mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{className:"text-sm font-semibold",children:"Panels"}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>Gt(l.id),children:[e.jsx(Pe,{className:"h-3 w-3 mr-1"}),"Add Panel"]})]}),!Array.isArray(l.panels)||l.panels.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:'No panels. Click "Add Panel" to create one.'}):l.panels.map(y=>e.jsxs(F,{className:"border-border",children:[e.jsx(B,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{variant:"outline",children:y.type}),e.jsx(Q,{value:y.title,onChange:w=>Qe(l.id,y.id,"title",w.target.value),className:"h-7 flex-1"})]}),e.jsx(L,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>qt(l.id,y.id),children:e.jsx(Oe,{className:"h-3 w-3"})})]})}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(O,{className:"text-xs",children:"Type"}),e.jsxs(X,{value:y.type,onValueChange:w=>Qe(l.id,y.id,"type",w),children:[e.jsx(Y,{className:"h-7",children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"graph",children:"Graph"}),e.jsx(S,{value:"table",children:"Table"}),e.jsx(S,{value:"stat",children:"Stat"}),e.jsx(S,{value:"gauge",children:"Gauge"}),e.jsx(S,{value:"piechart",children:"Pie Chart"}),e.jsx(S,{value:"bargraph",children:"Bar Graph"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(O,{className:"text-xs",children:"Data Source"}),e.jsxs(X,{value:y.datasource,onValueChange:w=>Qe(l.id,y.id,"datasource",w),children:[e.jsx(Y,{className:"h-7",children:e.jsx(ee,{})}),e.jsx(te,{children:N.map(w=>e.jsx(S,{value:w.name,children:w.name},w.name))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{className:"text-xs",children:"Queries (PromQL/LogQL)"}),e.jsxs(L,{size:"sm",variant:"ghost",className:"h-6",onClick:()=>Ut(l.id,y.id),children:[e.jsx(Pe,{className:"h-3 w-3 mr-1"}),"Add Query"]})]}),Array.isArray(y.queries)&&y.queries.length>0?y.queries.map((w,R)=>e.jsxs("div",{className:"space-y-1 p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{variant:"secondary",className:"text-xs",children:w.refId||"A"}),e.jsx(Q,{value:w.expr||"",onChange:V=>nt(l.id,y.id,R,"expr",V.target.value),placeholder:"up or {job='api'} |= 'error'",className:"h-7 text-xs font-mono"})]}),e.jsx(Q,{value:w.legendFormat||"",onChange:V=>nt(l.id,y.id,R,"legendFormat",V.target.value),placeholder:"Legend format: {{instance}}",className:"h-6 text-xs"})]},R)):e.jsx("div",{className:"text-center py-2 text-xs text-muted-foreground",children:'No queries. Click "Add Query" to add one.'})]})]})]},y.id))]})})]},C))})})]})]}),e.jsxs(we,{value:"alerts",className:"space-y-4 mt-4",children:[x&&e.jsxs(F,{className:"mb-4 border-primary",children:[e.jsxs(B,{children:[e.jsx(K,{children:"Create Alert Rule"}),e.jsx(q,{children:"Configure alert conditions and notifications"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Alert Name"}),e.jsx(Q,{placeholder:"High CPU Usage"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"PromQL Query"}),e.jsx(ka,{placeholder:"rate(process_cpu_seconds_total[5m]) > 0.8",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Condition"}),e.jsxs(X,{defaultValue:"gt",children:[e.jsx(Y,{children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"gt",children:"Greater Than"}),e.jsx(S,{value:"lt",children:"Less Than"}),e.jsx(S,{value:"eq",children:"Equal"}),e.jsx(S,{value:"ne",children:"Not Equal"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Threshold"}),e.jsx(Q,{type:"number",placeholder:"0.8"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{onClick:Ht,children:"Create Alert"}),e.jsx(L,{variant:"outline",onClick:()=>v(!1),children:"Cancel"})]})]})]}),e.jsxs(F,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Alert Rules"}),e.jsx(q,{children:"Configure alert conditions and notifications"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{checked:le,onCheckedChange:l=>T({enableAlerting:l})}),e.jsxs(L,{size:"sm",onClick:()=>v(!0),variant:"outline",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Create Alert"]})]})]})}),e.jsx(M,{children:le?H.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(We,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:'No alert rules configured. Click "Create Alert" to add one.'})]}):e.jsx("div",{className:"space-y-3",children:H.map(l=>e.jsxs(F,{className:"border-border",children:[e.jsx(B,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-lg",children:l.name}),e.jsxs(q,{className:"text-xs mt-1",children:["For: ",l.for,"  Channels: ",l.notificationChannels.join(", ")]})]}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>Wt(l.id),children:e.jsx(Oe,{className:"h-4 w-4"})})]})}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{className:"text-xs",children:"PromQL Query"}),e.jsx("div",{className:"p-2 bg-muted rounded font-mono text-sm",children:l.condition.query})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(O,{className:"text-xs",children:"Evaluator"}),e.jsx(ae,{variant:"outline",children:l.condition.evaluator.type})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(O,{className:"text-xs",children:"Threshold"}),e.jsx(ae,{variant:"outline",children:l.condition.evaluator.params.join(", ")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(O,{className:"text-xs",children:"Reducer"}),e.jsx(ae,{variant:"outline",children:l.condition.reducer.type})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{className:"text-xs",children:"Summary"}),e.jsx("div",{className:"text-sm",children:l.annotations.summary}),l.annotations.description&&e.jsx("div",{className:"text-xs text-muted-foreground",children:l.annotations.description})]})]})]},l.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(We,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Alerting is disabled. Enable it to create alert rules."})]})})]})]}),e.jsx(we,{value:"settings",className:"space-y-4 mt-4",children:e.jsxs(F,{children:[e.jsxs(B,{children:[e.jsx(K,{children:"Administration"}),e.jsx(q,{children:"Grafana server configuration"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"admin-user",children:"Admin Username"}),e.jsx(Q,{id:"admin-user",value:j,onChange:l=>T({adminUser:l.target.value}),placeholder:"admin"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"admin-password",children:"Admin Password"}),e.jsx(Q,{id:"admin-password",type:"password",value:k,onChange:l=>T({adminPassword:l.target.value}),placeholder:"admin"})]})]}),e.jsx(Ge,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Default Theme"}),e.jsxs(X,{value:W,onValueChange:l=>T({theme:l}),children:[e.jsx(Y,{children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"dark",children:"Dark"}),e.jsx(S,{value:"light",children:"Light"})]})]})]}),e.jsx(Ge,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(O,{children:"Enable Authentication"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Require login to access Grafana"})]}),e.jsx(qe,{checked:J,onCheckedChange:l=>T({enableAuth:l})})]}),J&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Auth Provider"}),e.jsxs(X,{value:z,onValueChange:l=>T({authProvider:l}),children:[e.jsx(Y,{children:e.jsx(ee,{})}),e.jsxs(te,{children:[e.jsx(S,{value:"ldap",children:"LDAP"}),e.jsx(S,{value:"oauth",children:"OAuth"}),e.jsx(S,{value:"saml",children:"SAML"}),e.jsx(S,{value:"jwt",children:"JWT"})]})]})]})]})]})})]})]}),e.jsx(ia,{open:p,onOpenChange:d,children:e.jsxs(la,{className:"max-w-[95vw] max-h-[95vh] w-full h-full p-0",children:[e.jsx(ca,{className:"sr-only",children:e.jsx(oa,{children:"Grafana Dashboard"})}),e.jsx("div",{className:"h-full",children:e.jsx(At,{componentId:s,dashboardId:g,onClose:()=>d(!1)})})]})})]})}catch(h){return da("Error rendering GrafanaConfigAdvanced",h instanceof Error?h:new Error(String(h))),e.jsxs("div",{className:"p-4 text-destructive",children:[e.jsx("p",{children:"Error loading Grafana configuration"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:String(h)})]})}}export{_s as GrafanaConfigAdvanced};

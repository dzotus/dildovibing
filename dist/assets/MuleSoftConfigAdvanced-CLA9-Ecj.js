import{u as $,j as e,r as S,S as q,C as l,e as i,f as c,k as r,B as o,T as ee,a as se,b as v,R as I,A as ne,c as ae,d as N,h as f,i as C,P,I as u,a3 as te,m as V,L as d,n as A,o as k,p as T,q as R,s as h,t as D}from"./index-2Qx8irw2.js";import{P as E}from"./progress-Bivej_Y2.js";import{D as B}from"./database-Ck9K8pXy.js";import{C as le}from"./circle-check-big-XTaBX9af.js";function xe({componentId:L}){const{nodes:K,updateNode:F}=$(),y=K.find(s=>s.id===L);if(!y)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const g=y.data.config||{},z=g.organization||"archiphoenix-org",O=g.environment||"production",t=g.applications||[],p=g.connectors||[],_=g.apiKey||"",[H,b]=S.useState(null),[W,w]=S.useState(null),[re,G]=S.useState(!1),x=s=>{F(L,{data:{...y.data,config:{...g,...s}}})},J=()=>{const s={name:"new-application",runtimeVersion:"4.6.0",workerCount:2,status:"stopped",connectors:[],errorStrategy:"continue",reconnectionStrategy:"exponential",auditLogging:!1,requestCount:0,errorCount:0,avgResponseTime:0};x({applications:[...t,s]})},Q=s=>{x({applications:t.filter((n,a)=>a!==s)})},j=(s,n,a)=>{const m=[...t];m[s]={...m[s],[n]:a},x({applications:m})},U=()=>{const s={name:"new-connector",type:"api",enabled:!0};x({connectors:[...p,s]}),G(!1)},X=s=>{x({connectors:p.filter((n,a)=>a!==s)})},M=(s,n,a)=>{const m=[...p];m[s]={...m[s],[n]:a},x({connectors:m})},Y=t.reduce((s,n)=>s+(n.requestCount||0),0);t.reduce((s,n)=>s+(n.errorCount||0),0);const Z=t.length>0?t.reduce((s,n)=>s+(n.avgResponseTime||0),0)/t.length:0;return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"MuleSoft Anypoint Platform"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Integration Applications"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure Mule applications, connectors and runtime settings"})]})}),e.jsx(q,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(l,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(c,{className:"text-sm font-medium",children:"Organization"})}),e.jsx(r,{children:e.jsx(o,{variant:"outline",children:z})})]}),e.jsxs(l,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(c,{className:"text-sm font-medium",children:"Applications"})}),e.jsx(r,{children:e.jsx("span",{className:"text-2xl font-bold",children:t.length})})]}),e.jsxs(l,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(c,{className:"text-sm font-medium",children:"Total Requests"})}),e.jsx(r,{children:e.jsx("span",{className:"text-2xl font-bold",children:Y.toLocaleString()})})]}),e.jsxs(l,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(c,{className:"text-sm font-medium",children:"Avg Response Time"})}),e.jsxs(r,{children:[e.jsx("span",{className:"text-2xl font-bold",children:Z.toFixed(0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ms"})]})]})]}),e.jsxs(ee,{defaultValue:"applications",className:"space-y-4",children:[e.jsxs(se,{children:[e.jsxs(v,{value:"applications",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Applications (",t.length,")"]}),e.jsxs(v,{value:"connectors",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Connectors (",p.length,")"]}),e.jsxs(v,{value:"monitoring",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Monitoring"]}),e.jsxs(v,{value:"settings",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(N,{value:"applications",className:"space-y-4",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(c,{children:"Mule Applications"}),e.jsx(f,{children:"Configure and manage integration applications"})]}),e.jsxs(C,{onClick:J,size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Create Application"]})]})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:t.map((s,n)=>e.jsxs(l,{className:"border-l-4 border-l-blue-500",children:[e.jsx(i,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(B,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[H===n?e.jsx(u,{value:s.name,onChange:a=>j(n,"name",a.target.value),onBlur:()=>b(null),onKeyDown:a=>{a.key==="Enter"&&b(null)},className:"text-base font-semibold",autoFocus:!0}):e.jsx(c,{className:"text-base cursor-pointer hover:text-primary transition-colors",onClick:()=>b(n),children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.status==="running"?e.jsxs(o,{variant:"default",className:"gap-1",children:[e.jsx(le,{className:"h-3 w-3"}),"Running"]}):s.status==="deploying"?e.jsxs(o,{variant:"outline",className:"gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),"Deploying"]}):e.jsx(o,{variant:"outline",children:"Stopped"}),e.jsxs(o,{variant:"outline",children:["v",s.runtimeVersion]}),e.jsxs(o,{variant:"outline",children:[s.workerCount," workers"]})]})]})]}),e.jsx(C,{variant:"ghost",size:"icon",onClick:()=>Q(n),disabled:t.length===1,children:e.jsx(V,{className:"h-4 w-4"})})]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requests"}),e.jsx("p",{className:"text-lg font-semibold",children:(s.requestCount||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Errors"}),e.jsx("p",{className:"text-lg font-semibold text-red-500",children:(s.errorCount||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response Time"}),e.jsxs("p",{className:"text-lg font-semibold",children:[(s.avgResponseTime||0).toFixed(0)," ms"]})]})]}),e.jsx(q,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Runtime Version"}),e.jsx(u,{value:s.runtimeVersion,onChange:a=>j(n,"runtimeVersion",a.target.value),placeholder:"4.6.0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Worker Count"}),e.jsx(u,{type:"number",value:s.workerCount,onChange:a=>j(n,"workerCount",Number(a.target.value)),min:1,max:16})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Status"}),e.jsxs(A,{value:s.status||"stopped",onValueChange:a=>j(n,"status",a),children:[e.jsx(k,{children:e.jsx(T,{})}),e.jsxs(R,{children:[e.jsx(h,{value:"running",children:"Running"}),e.jsx(h,{value:"stopped",children:"Stopped"}),e.jsx(h,{value:"deploying",children:"Deploying"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Error Strategy"}),e.jsxs(A,{value:s.errorStrategy||"continue",onValueChange:a=>j(n,"errorStrategy",a),children:[e.jsx(k,{children:e.jsx(T,{})}),e.jsxs(R,{children:[e.jsx(h,{value:"continue",children:"Continue"}),e.jsx(h,{value:"rollback",children:"Rollback"}),e.jsx(h,{value:"propagate",children:"Propagate"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Reconnection Strategy"}),e.jsxs(A,{value:s.reconnectionStrategy||"exponential",onValueChange:a=>j(n,"reconnectionStrategy",a),children:[e.jsx(k,{children:e.jsx(T,{})}),e.jsxs(R,{children:[e.jsx(h,{value:"exponential",children:"Exponential"}),e.jsx(h,{value:"linear",children:"Linear"}),e.jsx(h,{value:"none",children:"None"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{children:"Audit Logging"}),e.jsx(D,{checked:s.auditLogging||!1,onCheckedChange:a=>j(n,"auditLogging",a)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Enabled Connectors"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.connectors?.map((a,m)=>e.jsx(o,{variant:"outline",children:a},m)),(!s.connectors||s.connectors.length===0)&&e.jsx("span",{className:"text-sm text-muted-foreground",children:"No connectors"})]})]})]})]},n))})})]})}),e.jsx(N,{value:"connectors",className:"space-y-4",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(c,{children:"Connectors"}),e.jsx(f,{children:"Manage integration connectors"})]}),e.jsxs(C,{onClick:U,size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add Connector"]})]})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-2",children:p.map((s,n)=>e.jsx(l,{className:"border-l-4 border-l-green-500",children:e.jsx(r,{className:"pt-4",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(I,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{className:"flex-1",children:[W===n?e.jsx(u,{value:s.name,onChange:a=>M(n,"name",a.target.value),onBlur:()=>w(null),onKeyDown:a=>{a.key==="Enter"&&w(null)},className:"font-medium",autoFocus:!0}):e.jsx("p",{className:"font-medium cursor-pointer hover:text-primary transition-colors",onClick:()=>w(n),children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(o,{variant:"outline",children:s.type}),s.enabled?e.jsx(o,{variant:"default",children:"Enabled"}):e.jsx(o,{variant:"outline",children:"Disabled"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{checked:s.enabled,onCheckedChange:a=>M(n,"enabled",a)}),e.jsx(C,{variant:"ghost",size:"icon",onClick:()=>X(n),children:e.jsx(V,{className:"h-4 w-4"})})]})]})})})},n))})})]})}),e.jsx(N,{value:"monitoring",className:"space-y-4",children:e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"Application Monitoring"}),e.jsx(f,{children:"Monitor application performance and health"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:t.map((s,n)=>e.jsxs(l,{className:"border-l-4 border-l-purple-500",children:[e.jsx(i,{className:"pb-3",children:e.jsx(c,{className:"text-base",children:s.name})}),e.jsx(r,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold",children:(s.requestCount||0).toLocaleString()}),e.jsx(E,{value:Math.min((s.requestCount||0)/1e4*100,100),className:"h-2 mt-2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Errors"}),e.jsx("p",{className:"text-2xl font-bold text-red-500",children:(s.errorCount||0).toLocaleString()}),e.jsx(E,{value:Math.min((s.errorCount||0)/100*100,100),className:"h-2 mt-2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Avg Response Time"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(s.avgResponseTime||0).toFixed(0)," ms"]}),e.jsx(E,{value:Math.min((s.avgResponseTime||0)/1e3*100,100),className:"h-2 mt-2"})]})]})})]},n))})})]})}),e.jsx(N,{value:"settings",className:"space-y-4",children:e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(c,{children:"Anypoint Platform Settings"}),e.jsx(f,{children:"Configure organization and API access"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Organization"}),e.jsx(u,{value:z,onChange:s=>x({organization:s.target.value}),placeholder:"my-organization"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Environment"}),e.jsx(u,{value:O,onChange:s=>x({environment:s.target.value}),placeholder:"production"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"API Key"}),e.jsx(u,{type:"password",value:_,onChange:s=>x({apiKey:s.target.value}),placeholder:"Enter Anypoint API key"})]})]})]})})]})]})})}export{xe as MuleSoftConfigAdvanced};

import{u as K,j as e,r as m,i as b,S as T,C as r,e as c,f as d,k as i,A as q,Z as Q,T as Y,a as _,b as j,N as L,c as ee,d as u,h as p,L as l,n as y,o as S,p as w,q as C,s as g,B as v,X as se,I as E,t as U}from"./index-CR3GNhD5.js";import{T as W}from"./textarea-Bv7Bb31R.js";import{R as ae}from"./refresh-ccw-DWNXYD4N.js";import{S as R}from"./server-ilwgElGo.js";import{C as V}from"./circle-check-big-B-CznOSa.js";function de({componentId:A}){const{nodes:M,updateNode:D}=K(),N=M.find(s=>s.id===A);if(!N)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const t=N.data.config||{},x=t.services||[],n=t.requests||[],$=t.endpoint||"http://localhost:8080/soap",F=t.wsdlUrl||x[0]?.wsdlUrl||"",I=t.totalRequests||n.length,H=t.successRate||(n.length>0?n.filter(s=>s.status==="success").length/n.length*100:0),X=t.averageLatency||(n.length>0?n.reduce((s,a)=>s+(a.duration||0),0)/n.length:0),[f,Z]=m.useState(""),[o,k]=m.useState(""),[O,B]=m.useState(""),[z,P]=m.useState(""),h=s=>{D(A,{data:{...N.data,config:{...t,...s}}})},G=()=>{if(!o)return;const s={id:`req-${Date.now()}`,operation:o,requestBody:O||`<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <${o}Request>
      <!-- Request data -->
    </${o}Request>
  </soap:Body>
</soap:Envelope>`,responseBody:`<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <${o}Response>
      <!-- Response data -->
    </${o}Response>
  </soap:Body>
</soap:Envelope>`,status:"success",timestamp:new Date().toISOString(),duration:Math.floor(Math.random()*200)+50};P(s.responseBody||""),h({requests:[...n,s]})};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"SOAP"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"SOAP Web Service"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Simple Object Access Protocol web service"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(T,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(r,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Services"}),e.jsx(R,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:x.length}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"registered"})]})})]}),e.jsxs(r,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Requests"}),e.jsx(q,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:I}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"total"})]})})]}),e.jsxs(r,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsx(V,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(i,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[H.toFixed(1),"%"]})})})]}),e.jsxs(r,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Avg Latency"}),e.jsx(Q,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:X.toFixed(0)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"ms"})]})})]})]}),e.jsxs(Y,{defaultValue:"test",className:"space-y-4",children:[e.jsxs(_,{children:[e.jsxs(j,{value:"test",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Test Client"]}),e.jsxs(j,{value:"services",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Services (",x.length,")"]}),e.jsxs(j,{value:"history",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Request History (",n.length,")"]}),e.jsxs(j,{value:"settings",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(u,{value:"test",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"SOAP Test Client"}),e.jsx(p,{children:"Test SOAP operations"})]}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Service"}),e.jsxs(y,{value:f,onValueChange:s=>{Z(s);const a=x.find(J=>J.name===s);a&&a.operations.length>0&&k(a.operations[0].name)},children:[e.jsx(S,{children:e.jsx(w,{placeholder:"Select service"})}),e.jsx(C,{children:x.map(s=>e.jsx(g,{value:s.name,children:s.name},s.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Operation"}),e.jsxs(y,{value:o,onValueChange:k,children:[e.jsx(S,{children:e.jsx(w,{placeholder:"Select operation"})}),e.jsx(C,{children:f&&x.find(s=>s.name===f)?.operations.map(s=>e.jsx(g,{value:s.name,children:s.name},s.name))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"SOAP Request (XML)"}),e.jsx(W,{value:O,onChange:s=>B(s.target.value),className:"font-mono text-sm min-h-[300px]",placeholder:"<soap:Envelope>..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"SOAP Response"}),e.jsx(W,{value:z,readOnly:!0,className:"font-mono text-sm min-h-[300px] bg-muted",placeholder:"Response will appear here..."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{onClick:G,disabled:!o,children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Execute Request"]}),e.jsx(b,{variant:"outline",onClick:()=>{B(""),P("")},children:"Clear"})]})]})]})}),e.jsx(u,{value:"services",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"SOAP Services"}),e.jsx(p,{children:"Registered services and operations"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:x.map(s=>e.jsxs(r,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(R,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(d,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(v,{variant:"outline",children:s.port}),e.jsxs(v,{variant:"outline",children:[s.operations.length," operations"]})]}),s.wsdlUrl&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["WSDL: ",s.wsdlUrl]})]})]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-2",children:s.operations.map(a=>e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono font-semibold",children:a.name})}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[a.inputMessage&&e.jsxs("span",{children:["Input: ",a.inputMessage]}),a.outputMessage&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"â†’"}),e.jsxs("span",{children:["Output: ",a.outputMessage]})]})]})]},a.name))})})]},s.name))})})]})}),e.jsx(u,{value:"history",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Request History"}),e.jsx(p,{children:"Previously executed SOAP requests"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs(r,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.status==="success"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:s.status==="success"?e.jsx(V,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):e.jsx(se,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx(d,{className:"text-lg font-semibold",children:s.operation}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.duration&&e.jsxs(v,{variant:"outline",children:[s.duration,"ms"]}),e.jsx(v,{variant:s.status==="success"?"default":"destructive",children:s.status})]})]})]})})}),e.jsxs(i,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Request"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto max-h-40 overflow-y-auto",children:s.requestBody})]}),s.responseBody&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Response"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto max-h-40 overflow-y-auto",children:s.responseBody})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(s.timestamp).toLocaleString()})]})]},s.id))})})]})}),e.jsx(u,{value:"settings",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"SOAP Settings"}),e.jsx(p,{children:"Service configuration"})]}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Endpoint URL"}),e.jsx(E,{value:$,onChange:s=>h({endpoint:s.target.value}),placeholder:"http://localhost:8080/soap"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"WSDL URL"}),e.jsx(E,{value:F,onChange:s=>h({wsdlUrl:s.target.value}),placeholder:"http://localhost:8080/wsdl/service.wsdl"})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Enable WS-Security"}),e.jsx(U,{checked:t.enableWSSecurity??!1,onCheckedChange:s=>h({enableWSSecurity:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Enable WS-Addressing"}),e.jsx(U,{checked:t.enableWSAddressing??!1,onCheckedChange:s=>h({enableWSAddressing:s})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"SOAP Version"}),e.jsxs(y,{value:t.soapVersion??"1.1",onValueChange:s=>h({soapVersion:s}),children:[e.jsx(S,{children:e.jsx(w,{})}),e.jsxs(C,{children:[e.jsx(g,{value:"1.1",children:"SOAP 1.1"}),e.jsx(g,{value:"1.2",children:"SOAP 1.2"})]})]})]})]})]})})]})]})})}export{de as SOAPConfigAdvanced};

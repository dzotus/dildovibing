import{u as Ps,a as Ds,j as e,e as Vs,r as a,B as j,S as F,C as o,h as x,i as h,m as p,T as Ls,b as Is,c as b,R as Ie,d as Js,f as w,k as v,O as Ms,I as m,q as Je,s as Me,t as Te,v as ze,w as N,l as r,P as y,_ as Ts,o as S,Q as zs,L as l,x as C,D as R,y as k,z as E,E as A,G as P,H as G,aa as Fe,ak as Fs,ai as Gs}from"./index-Nkr1tjDA.js";import{P as Ge}from"./progress-CNv1y1Uh.js";import{u as Us}from"./use-toast-BKdZlGVt.js";import{G as $s}from"./git-branch-kg7SzxSe.js";import{C as Os}from"./code-CZQ1DmDK.js";import{S as Bs}from"./server-BZH8W4gy.js";import{D as qs}from"./database-Loe68eH4.js";import{G as Ks}from"./globe-CSRlqT0T.js";import{C as Hs}from"./calendar-C4c9JbF7.js";import{C as Ue}from"./clock-BwKYQgCD.js";function ln({componentId:D}){const{nodes:$e,updateNode:Oe}=Ps(),{isRunning:X,getComponentMetrics:Be}=Ds(),{toast:c}=Us(),f=$e.find(s=>s.id===D);if(!f)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const t=Vs.getGitLabCIEmulationEngine(D);Be(D);const i=f.data.config||{},[_,qe]=a.useState([]),[W,Ke]=a.useState([]),[V,He]=a.useState([]),[Y,Qe]=a.useState([]),[Z,Xe]=a.useState([]),[ee,_e]=a.useState([]),[Qs,We]=a.useState([]),[g,Ye]=a.useState(null),[L,Ze]=a.useState(""),[I,es]=a.useState("all"),[U,ss]=a.useState(null),[ns,se]=a.useState(!1),[ne,ae]=a.useState([]),[as,J]=a.useState(!1),[ts,M]=a.useState(!1),[is,T]=a.useState(!1),[ls,z]=a.useState(!1),[$,te]=a.useState(""),[ie,le]=a.useState("docker"),[re,ce]=a.useState(4),[de,oe]=a.useState(""),[xe,he]=a.useState(!1),[O,ue]=a.useState(""),[B,me]=a.useState(""),[je,ve]=a.useState(!1),[pe,ge]=a.useState(!1),[fe,Ne]=a.useState("*"),[q,be]=a.useState(""),[we,Ce]=a.useState(""),[K,ye]=a.useState(""),[Se,Re]=a.useState("main"),[H,ke]=a.useState("0 * * * *"),[Ee,Ae]=a.useState(!0);a.useEffect(()=>{if(!t)return;const s=()=>{try{const d=t.getPipelines(),Cs=t.getActiveJobs(),ys=t.getRunners(),Ss=t.getVariables(),Rs=t.getEnvironments(),ks=t.getSchedules(),Es=t.getArtifacts(),As=t.getGitLabCIMetrics();if(qe(d),Ke(Cs),He(ys),Qe(Ss),Xe(Rs),_e(ks),We(Es),Ye(As),U){const Le=t.getJobLogs(U);Le&&ae(Le)}}catch(d){console.error("Error updating GitLab CI data:",d)}};s();const n=setInterval(s,X?500:2e3);return()=>clearInterval(n)},[t,X,U]),a.useEffect(()=>{t&&f&&t.updateConfig(f)},[i,f,t]);const u=s=>{const n={...i,...s};Oe(D,{data:{...f.data,config:n}}),t&&t.updateConfig({...f,data:{...f.data,config:n}})},Pe=s=>{switch(s){case"success":return e.jsx(Gs,{className:"h-4 w-4 text-green-500"});case"failed":return e.jsx(Fe,{className:"h-4 w-4 text-red-500"});case"running":return e.jsx(Fs,{className:"h-4 w-4 text-blue-500 animate-spin"});case"pending":case"created":return e.jsx(Ue,{className:"h-4 w-4 text-yellow-500"});case"canceled":return e.jsx(Fe,{className:"h-4 w-4 text-gray-500"});default:return e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"})}},De=s=>{switch(s){case"success":return e.jsx(j,{variant:"default",className:"bg-green-500",children:"Success"});case"failed":return e.jsx(j,{variant:"destructive",children:"Failed"});case"running":return e.jsx(j,{variant:"default",className:"bg-blue-500",children:"Running"});case"pending":case"created":return e.jsx(j,{variant:"secondary",children:"Pending"});case"canceled":return e.jsx(j,{variant:"secondary",children:"Canceled"});default:return e.jsx(j,{variant:"secondary",children:"Unknown"})}},rs=()=>{const s=`pipeline-${Date.now()}`,n=i.pipelines||[];u({pipelines:[...n,{id:s,ref:"main",source:"push",stages:[{name:"build",jobs:[{name:"build",stage:"build"}]},{name:"test",jobs:[{name:"test",stage:"test"}]},{name:"deploy",jobs:[{name:"deploy",stage:"deploy"}]}]}]}),c({title:"Pipeline added",description:"New pipeline created successfully"})},cs=s=>{const n=i.pipelines||[];u({pipelines:n.filter(d=>d.id!==s)}),c({title:"Pipeline removed",description:"Pipeline has been removed"})},ds=s=>{if(!t){c({title:"Error",description:"GitLab CI engine not available",variant:"destructive"});return}const n=t.startPipeline(s,Date.now(),"web");n.success?c({title:"Pipeline started",description:"Pipeline has been triggered"}):c({title:"Error",description:n.reason||"Failed to start pipeline",variant:"destructive"})},os=s=>{if(!t){c({title:"Error",description:"GitLab CI engine not available",variant:"destructive"});return}const n=t.cancelPipeline(s);n.success?c({title:"Pipeline canceled",description:"Pipeline has been canceled"}):c({title:"Error",description:n.reason||"Failed to cancel pipeline",variant:"destructive"})},xs=()=>{if(!$.trim()){c({title:"Error",description:"Runner name is required",variant:"destructive"});return}const s=i.runners||[],n={id:`runner-${Date.now()}`,name:$,executor:ie,maxJobs:re,tags:de.split(",").map(d=>d.trim()).filter(Boolean),isShared:xe};u({runners:[...s,n]}),te(""),le("docker"),ce(4),oe(""),he(!1),J(!1),c({title:"Runner added",description:"New runner created successfully"})},hs=s=>{const n=i.runners||[];u({runners:n.filter(d=>d.id!==s)}),c({title:"Runner removed",description:"Runner has been removed"})},us=()=>{if(!O.trim()||!B.trim()){c({title:"Error",description:"Variable key and value are required",variant:"destructive"});return}const s=i.variables||[];u({variables:[...s,{key:O,value:B,protected:je,masked:pe,environmentScope:fe}]}),ue(""),me(""),ve(!1),ge(!1),Ne("*"),M(!1),c({title:"Variable added",description:"New variable created successfully"})},ms=s=>{const n=i.variables||[];u({variables:n.filter(d=>d.key!==s)}),c({title:"Variable removed",description:"Variable has been removed"})},js=()=>{if(!q.trim()){c({title:"Error",description:"Environment name is required",variant:"destructive"});return}const s=i.environments||[];u({environments:[...s,{id:`env-${Date.now()}`,name:q,externalUrl:we||void 0}]}),be(""),Ce(""),T(!1),c({title:"Environment added",description:"New environment created successfully"})},vs=s=>{const n=i.environments||[];u({environments:n.filter(d=>d.id!==s)}),c({title:"Environment removed",description:"Environment has been removed"})},ps=()=>{if(!K.trim()||!H.trim()){c({title:"Error",description:"Schedule description and cron expression are required",variant:"destructive"});return}const s=i.schedules||[];u({schedules:[...s,{id:`schedule-${Date.now()}`,description:K,ref:Se,cron:H,active:Ee}]}),ye(""),Re("main"),ke("0 * * * *"),Ae(!0),z(!1),c({title:"Schedule added",description:"New schedule created successfully"})},gs=s=>{const n=i.schedules||[];u({schedules:n.filter(d=>d.id!==s)}),c({title:"Schedule removed",description:"Schedule has been removed"})},Ve=a.useMemo(()=>{let s=_;if(L){const n=L.toLowerCase();s=s.filter(d=>d.ref?.toLowerCase().includes(n)||d.id.toLowerCase().includes(n))}return I!=="all"&&(s=s.filter(n=>n.status===I)),s},[_,L,I]),fs=g?.jobsRunning||0,Q=g&&g.pipelinesSuccess+g.pipelinesFailed>0?(g.pipelinesSuccess/(g.pipelinesSuccess+g.pipelinesFailed)*100).toFixed(1):"0",Ns=g?.averagePipelineDuration?Math.round(g.averagePipelineDuration/1e3):0,bs=V.filter(s=>s.status==="online").length,ws=V.length;return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500/10",children:e.jsx($s,{className:"h-6 w-6 text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"GitLab CI/CD"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Continuous Integration & Deployment"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(j,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${t?"bg-green-500 animate-pulse":"bg-gray-500"}`}),t?"Active":"Inactive"]})})]}),e.jsx(F,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(o,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Active Jobs"})}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:fs}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Running jobs"})]})]}),e.jsxs(o,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"})}),e.jsxs(p,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Q,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pipeline success"})]})]}),e.jsxs(o,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Avg Duration"})}),e.jsxs(p,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Ns,"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pipeline time"})]})]}),e.jsxs(o,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Runners"})}),e.jsxs(p,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[bs,"/",ws]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Online"})]})]})]}),e.jsxs(Ls,{defaultValue:"pipelines",className:"w-full",children:[e.jsxs(Is,{className:"grid w-full grid-cols-7",children:[e.jsxs(b,{value:"pipelines",className:"gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Pipelines"]}),e.jsxs(b,{value:"jobs",className:"gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Jobs"]}),e.jsxs(b,{value:"runners",className:"gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),"Runners"]}),e.jsxs(b,{value:"variables",className:"gap-2",children:[e.jsx(qs,{className:"h-4 w-4"}),"Variables"]}),e.jsxs(b,{value:"environments",className:"gap-2",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Environments"]}),e.jsxs(b,{value:"schedules",className:"gap-2",children:[e.jsx(Hs,{className:"h-4 w-4"}),"Schedules"]}),e.jsxs(b,{value:"settings",className:"gap-2",children:[e.jsx(Js,{className:"h-4 w-4"}),"Settings"]})]}),e.jsx(w,{value:"pipelines",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Pipelines"}),e.jsx(v,{children:"CI/CD pipeline status and history"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ms,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:"Search pipelines...",value:L,onChange:s=>Ze(s.target.value),className:"pl-8 w-64"})]}),e.jsxs(Je,{value:I,onValueChange:s=>es(s),children:[e.jsx(Me,{className:"w-32",children:e.jsx(Te,{})}),e.jsxs(ze,{children:[e.jsx(N,{value:"all",children:"All"}),e.jsx(N,{value:"running",children:"Running"}),e.jsx(N,{value:"success",children:"Success"}),e.jsx(N,{value:"failed",children:"Failed"}),e.jsx(N,{value:"pending",children:"Pending"})]})]}),e.jsxs(r,{size:"sm",onClick:rs,variant:"outline",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"New Pipeline"]})]})]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-3",children:Ve.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No pipelines found"}):Ve.map(s=>e.jsxs(o,{className:"border-border",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[Pe(s.status),e.jsxs("div",{children:[e.jsxs(h,{className:"text-lg",children:["Pipeline #",s.iid]}),e.jsxs(v,{className:"text-xs mt-1",children:["Ref: ",s.ref," • ",s.stages?.length||0," stages",s.duration&&` • ${Math.round(s.duration/1e3)}s`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[De(s.status),s.status==="running"||s.status==="pending"?e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>os(s.id),children:e.jsx(Ts,{className:"h-4 w-4"})}):e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>ds(s.id),children:e.jsx(Ie,{className:"h-4 w-4"})}),(i.pipelines||[]).length>1&&e.jsx(r,{size:"icon",variant:"ghost",onClick:()=>cs(s.id),children:e.jsx(S,{className:"h-4 w-4"})})]})]})}),s.stages&&s.stages.length>0&&e.jsx(p,{children:e.jsx("div",{className:"flex gap-2",children:s.stages.map(n=>e.jsx(j,{variant:n.status==="success"?"default":n.status==="failed"?"destructive":n.status==="running"?"default":"secondary",className:n.status==="success"?"bg-green-500":n.status==="running"?"bg-blue-500":"",children:n.name},n.name))})})]},s.id))})})]})}),e.jsx(w,{value:"jobs",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Active Jobs"}),e.jsx(v,{children:"Currently running and pending jobs"})]}),e.jsx(p,{children:e.jsx("div",{className:"space-y-3",children:W.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No active jobs"}):W.map(s=>e.jsx(o,{className:"border-border",children:e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[Pe(s.status),e.jsxs("div",{children:[e.jsx(h,{className:"text-lg",children:s.name}),e.jsxs(v,{className:"text-xs mt-1",children:["Stage: ",s.stage," • Pipeline: ",s.pipelineId,s.duration&&` • ${Math.round(s.duration/1e3)}s`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[De(s.status),s.progress!==void 0&&e.jsx(Ge,{value:s.progress,className:"w-24 h-2"}),e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>{if(ss(s.id),se(!0),t){const n=t.getJobLogs(s.id);n&&ae(n)}},children:e.jsx(zs,{className:"h-4 w-4"})})]})]})})},s.id))})})]})}),e.jsx(w,{value:"runners",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"CI/CD Runners"}),e.jsx(v,{children:"Runner configuration and status"})]}),e.jsxs(r,{size:"sm",onClick:()=>J(!0),variant:"outline",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Add Runner"]})]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-3",children:V.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No runners configured"}):V.map(s=>e.jsx(o,{className:"border-border",children:e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-3 w-3 rounded-full ${s.status==="online"?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx(h,{className:"text-lg",children:s.name}),e.jsxs(v,{className:"text-xs mt-1",children:[s.executor," runner • ",s.currentJobs,"/",s.maxJobs," jobs",s.tagList&&s.tagList.length>0&&` • Tags: ${s.tagList.join(", ")}`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:s.status==="online"?"default":"secondary",children:s.status}),(i.runners||[]).find(n=>n.id===s.id)&&e.jsx(r,{size:"icon",variant:"ghost",onClick:()=>hs(s.id),children:e.jsx(S,{className:"h-4 w-4"})})]})]})})},s.id))})})]})}),e.jsx(w,{value:"variables",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"CI/CD Variables"}),e.jsx(v,{children:"Environment variables for pipelines"})]}),e.jsxs(r,{size:"sm",onClick:()=>M(!0),variant:"outline",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Add Variable"]})]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-3",children:Y.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No variables configured"}):Y.map(s=>e.jsx(o,{className:"border-border",children:e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-lg",children:s.key}),e.jsxs(v,{className:"text-xs mt-1",children:[s.masked?"••••••••":s.value,s.environmentScope&&` • Scope: ${s.environmentScope}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.protected&&e.jsx(j,{variant:"outline",children:"Protected"}),s.masked&&e.jsx(j,{variant:"outline",children:"Masked"}),(i.variables||[]).find(n=>n.key===s.key)&&e.jsx(r,{size:"icon",variant:"ghost",onClick:()=>ms(s.key),children:e.jsx(S,{className:"h-4 w-4"})})]})]})})},s.key))})})]})}),e.jsx(w,{value:"environments",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Environments"}),e.jsx(v,{children:"Deployment environments"})]}),e.jsxs(r,{size:"sm",onClick:()=>T(!0),variant:"outline",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Add Environment"]})]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-3",children:Z.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No environments configured"}):Z.map(s=>e.jsx(o,{className:"border-border",children:e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-lg",children:s.name}),e.jsxs(v,{className:"text-xs mt-1",children:[s.externalUrl||"No external URL",s.deployments&&` • ${s.deployments.length} deployments`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:s.state==="available"?"default":"secondary",children:s.state}),(i.environments||[]).find(n=>n.id===s.id)&&e.jsx(r,{size:"icon",variant:"ghost",onClick:()=>vs(s.id),children:e.jsx(S,{className:"h-4 w-4"})})]})]})})},s.id))})})]})}),e.jsx(w,{value:"schedules",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Pipeline Schedules"}),e.jsx(v,{children:"Scheduled pipeline executions"})]}),e.jsxs(r,{size:"sm",onClick:()=>z(!0),variant:"outline",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Add Schedule"]})]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-3",children:ee.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No schedules configured"}):ee.map(s=>e.jsx(o,{className:"border-border",children:e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-lg",children:s.description}),e.jsxs(v,{className:"text-xs mt-1",children:["Ref: ",s.ref," • Cron: ",s.cron,s.nextRunAt&&` • Next run: ${new Date(s.nextRunAt).toLocaleString()}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:s.active?"default":"secondary",children:s.active?"Active":"Inactive"}),(i.schedules||[]).find(n=>n.id===s.id)&&e.jsx(r,{size:"icon",variant:"ghost",onClick:()=>gs(s.id),children:e.jsx(S,{className:"h-4 w-4"})})]})]})})},s.id))})})]})}),e.jsx(w,{value:"settings",className:"space-y-4 mt-4",children:e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Project Configuration"}),e.jsx(v,{children:"GitLab project and CI/CD settings"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"project-url",children:"Project URL"}),e.jsx(m,{id:"project-url",value:i.projectUrl||"",onChange:s=>u({projectUrl:s.target.value}),placeholder:"https://gitlab.com/user/project"})]}),e.jsx(F,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"gitlab-url",children:"GitLab URL"}),e.jsx(m,{id:"gitlab-url",value:i.gitlabUrl||"",onChange:s=>u({gitlabUrl:s.target.value}),placeholder:"https://gitlab.com"})]}),e.jsx(F,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable Runners"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable CI/CD runners"})]}),e.jsx(C,{checked:i.enableRunners??!0,onCheckedChange:s=>u({enableRunners:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable Cache"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable build cache"})]}),e.jsx(C,{checked:i.enableCache??!0,onCheckedChange:s=>u({enableCache:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable Artifacts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable build artifacts"})]}),e.jsx(C,{checked:i.enableArtifacts??!0,onCheckedChange:s=>u({enableArtifacts:s})})]})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Success Rate"}),e.jsxs("span",{className:"font-semibold",children:[Q,"%"]})]}),e.jsx(Ge,{value:parseFloat(Q),className:"h-2"})]})]})]})]})})]})]}),e.jsx(R,{open:ns,onOpenChange:se,children:e.jsxs(k,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(E,{children:[e.jsx(A,{children:"Job Details"}),e.jsx(P,{children:"View job logs and artifacts"})]}),e.jsx("div",{className:"space-y-4",children:ne.length>0&&e.jsxs("div",{children:[e.jsx(l,{children:"Logs"}),e.jsx("div",{className:"mt-2 p-4 bg-muted rounded-md font-mono text-sm max-h-96 overflow-y-auto",children:ne.map((s,n)=>e.jsx("div",{children:s},n))})]})})]})}),e.jsx(R,{open:as,onOpenChange:J,children:e.jsxs(k,{children:[e.jsxs(E,{children:[e.jsx(A,{children:"Add Runner"}),e.jsx(P,{children:"Configure a new CI/CD runner"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Name"}),e.jsx(m,{value:$,onChange:s=>te(s.target.value),placeholder:"runner-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Executor"}),e.jsxs(Je,{value:ie,onValueChange:s=>le(s),children:[e.jsx(Me,{children:e.jsx(Te,{})}),e.jsxs(ze,{children:[e.jsx(N,{value:"docker",children:"Docker"}),e.jsx(N,{value:"kubernetes",children:"Kubernetes"}),e.jsx(N,{value:"shell",children:"Shell"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Max Jobs"}),e.jsx(m,{type:"number",value:re,onChange:s=>ce(parseInt(s.target.value)||4),min:1,max:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Tags (comma-separated)"}),e.jsx(m,{value:de,onChange:s=>oe(s.target.value),placeholder:"docker, linux"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Shared Runner"}),e.jsx(C,{checked:xe,onCheckedChange:he})]})]}),e.jsxs(G,{children:[e.jsx(r,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),e.jsx(r,{onClick:xs,children:"Add Runner"})]})]})}),e.jsx(R,{open:ts,onOpenChange:M,children:e.jsxs(k,{children:[e.jsxs(E,{children:[e.jsx(A,{children:"Add Variable"}),e.jsx(P,{children:"Add a new CI/CD variable"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Key"}),e.jsx(m,{value:O,onChange:s=>ue(s.target.value),placeholder:"VARIABLE_NAME"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Value"}),e.jsx(m,{value:B,onChange:s=>me(s.target.value),placeholder:"variable value"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Environment Scope"}),e.jsx(m,{value:fe,onChange:s=>Ne(s.target.value),placeholder:"*"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Protected"}),e.jsx(C,{checked:je,onCheckedChange:ve})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Masked"}),e.jsx(C,{checked:pe,onCheckedChange:ge})]})]}),e.jsxs(G,{children:[e.jsx(r,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsx(r,{onClick:us,children:"Add Variable"})]})]})}),e.jsx(R,{open:is,onOpenChange:T,children:e.jsxs(k,{children:[e.jsxs(E,{children:[e.jsx(A,{children:"Add Environment"}),e.jsx(P,{children:"Add a new deployment environment"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Name"}),e.jsx(m,{value:q,onChange:s=>be(s.target.value),placeholder:"production"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"External URL (optional)"}),e.jsx(m,{value:we,onChange:s=>Ce(s.target.value),placeholder:"https://app.example.com"})]})]}),e.jsxs(G,{children:[e.jsx(r,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(r,{onClick:js,children:"Add Environment"})]})]})}),e.jsx(R,{open:ls,onOpenChange:z,children:e.jsxs(k,{children:[e.jsxs(E,{children:[e.jsx(A,{children:"Add Schedule"}),e.jsx(P,{children:"Schedule a pipeline to run automatically"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Description"}),e.jsx(m,{value:K,onChange:s=>ye(s.target.value),placeholder:"Nightly build"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Ref (branch or tag)"}),e.jsx(m,{value:Se,onChange:s=>Re(s.target.value),placeholder:"main"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Cron Expression"}),e.jsx(m,{value:H,onChange:s=>ke(s.target.value),placeholder:"0 * * * *"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: minute hour day month weekday"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Active"}),e.jsx(C,{checked:Ee,onCheckedChange:Ae})]})]}),e.jsxs(G,{children:[e.jsx(r,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),e.jsx(r,{onClick:ps,children:"Add Schedule"})]})]})})]})}export{ln as GitLabCIConfigAdvanced};

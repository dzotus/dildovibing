import{u as js,a as ps,j as e,r as c,e as re,S as ne,C,m as P,L as i,q as A,s as S,t as k,v as E,w as n,p as j,h as I,i as R,B as D,T as vs,b as gs,c as Y,W as Ke,A as Ns,d as fs,f as Z,k as H,l as f,P as le,O as ge,I as x,_ as ee,U as ie,o as J,n as ys,x as ce,af as Se,Q as ws}from"./index-D3yNmt2J.js";import{P as ke}from"./progress-C5wuyoJE.js";import{T as Ue}from"./textarea-DVH1WsgN.js";import{u as Cs}from"./use-toast-cj88Vypl.js";import{T as p,a as v,b as g,c as N}from"./tooltip-6zq9E2rE.js";import{S as bs}from"./shield-itON_tzT.js";import{P as Oe}from"./package-CFpf3lm_.js";import{U as Ve}from"./users-D06x9Mc7.js";import{P as Ps}from"./pencil-CxtSDS7V.js";import{K as As}from"./key-B1vLWN55.js";import{E as Ss}from"./eye-off-CjApqv_k.js";function Us({componentId:q}){const{nodes:Qe,updateNode:Ee}=js(),{isRunning:se,getComponentMetrics:He}=ps(),{toast:u}=Cs(),de=Qe.find(s=>s.id===q);if(!de)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const B=se?He(q):void 0,L=de.data.config||{},Ne=L.organization||"archiphoenix-org",W=L.environment||"prod",o=Array.isArray(L.proxies)?L.proxies:[],F=Array.isArray(L.policies)?L.policies:[],b=Array.isArray(L.products)?L.products:[],y=Array.isArray(L.developerApps)?L.developerApps:[],Je=L.apiKey||"",[Be,fe]=c.useState(null),[ye,we]=c.useState(!1),[ae,qe]=c.useState("quota"),[We,Xe]=c.useState(new Map),[Ge,oe]=c.useState(null),[_e,xe]=c.useState(null),[ks,Es]=c.useState(!1),[Ye,Ce]=c.useState(null),[$,be]=c.useState(""),[X,Fe]=c.useState("all"),[V,Te]=c.useState("all"),[K,Pe]=c.useState(""),[G,De]=c.useState("all"),[_,Ie]=c.useState("all"),[U,Re]=c.useState(""),[Q,Le]=c.useState(""),[te,Me]=c.useState("all"),[Ze,es]=c.useState(new Set),he=c.useCallback(()=>{const s=re.getApigeeRoutingEngine(q);if(s)return s.generateApiKey();const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let a=0;a<32;a++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},[q]),me=c.useCallback((s,r,t)=>{const a=[];return!s.name||s.name.trim()===""?a.push({field:"name",message:"Proxy name is required"}):/^[a-zA-Z0-9_-]+$/.test(s.name)?t.some((l,d)=>d!==r&&l.name===s.name)&&a.push({field:"name",message:"Proxy name must be unique"}):a.push({field:"name",message:"Proxy name can only contain letters, numbers, hyphens and underscores"}),(!s.basePath||!s.basePath.startsWith("/"))&&a.push({field:"basePath",message:"Base path must start with /"}),(!s.targetEndpoint||!s.targetEndpoint.match(/^https?:\/\/.+/))&&a.push({field:"targetEndpoint",message:"Target endpoint must be a valid URL (http:// or https://)"}),s.quota!==void 0&&s.quota<0&&a.push({field:"quota",message:"Quota must be a positive number"}),s.quotaInterval!==void 0&&s.quotaInterval<=0&&a.push({field:"quotaInterval",message:"Quota interval must be greater than 0"}),s.spikeArrest!==void 0&&s.spikeArrest<0&&a.push({field:"spikeArrest",message:"Spike arrest rate must be a positive number"}),a},[]),h=c.useCallback(s=>{const r={...L,...s};Ee(q,{data:{...de.data,config:r}});try{re.updateApigeeRoutingEngine(q)}catch(t){console.error("Failed to update Apigee routing engine:",t),u({title:"Update Error",description:"Failed to synchronize configuration with simulation engine",variant:"destructive"})}},[q,de,L,Ee,u]);c.useEffect(()=>{if(!se)return;const s=re.getApigeeRoutingEngine(q);if(!s)return;const r=setInterval(()=>{const t=o.map(l=>{const d=s.getProxyMetrics(l.name);return d?{...l,requestCount:d.requestCount,errorCount:d.errorCount,avgResponseTime:d.avgResponseTime}:l});t.some((l,d)=>l.requestCount!==o[d]?.requestCount||l.errorCount!==o[d]?.errorCount||l.avgResponseTime!==o[d]?.avgResponseTime)&&h({proxies:t})},2e3);return()=>clearInterval(r)},[q,se,o,h]),c.useEffect(()=>{try{re.updateApigeeRoutingEngine(q)}catch(s){console.error("Failed to sync configuration:",s)}},[q,o,F,b,Ne,W]);const ss=c.useCallback(()=>{const s={name:`proxy-${Date.now()}`,environment:W,basePath:"/api",targetEndpoint:"https://api.internal",revision:1,status:"undeployed",quota:1e3,quotaInterval:60,spikeArrest:50,enableOAuth:!1,requestCount:0,errorCount:0,avgResponseTime:0},r=me(s,o.length,[...o,s]);if(r.length>0){u({title:"Validation Error",description:r.map(t=>t.message).join(", "),variant:"destructive"});return}h({proxies:[...o,s]}),u({title:"Proxy Created",description:`Proxy "${s.name}" has been created in ${W.toUpperCase()} environment`})},[o,me,h,u,W]),as=c.useCallback(s=>{const r=o[s];r&&(h({proxies:o.filter((t,a)=>a!==s)}),u({title:"Proxy Deleted",description:`Proxy "${r.name}" has been deleted`}))},[o,h,u]),M=c.useCallback((s,r,t)=>{const a=[...o],l={...a[s],[r]:t};a[s]=l;const d=me(l,s,a);Xe(T=>{const w=new Map(T);return d.length>0?w.set(s,d):w.delete(s),w}),h({proxies:a})},[o,me,h]),ts=c.useCallback(s=>{const r=o[s];if(!r)return;const t=r.status==="deployed"?"undeployed":"deployed";M(s,"status",t),u({title:`Proxy ${t==="deployed"?"Deployed":"Undeployed"}`,description:`Proxy "${r.name}" is now ${t}`})},[o,M,u]),rs=c.useCallback(()=>{const s={quota:"Quota Policy","spike-arrest":"Spike Arrest Policy",oauth:"OAuth Policy",jwt:"JWT Policy","verify-api-key":"Verify API Key Policy",cors:"CORS Policy","xml-to-json":"XML to JSON Policy"},r={quota:"RequestFlow","spike-arrest":"RequestFlow",oauth:"PreFlow",jwt:"PreFlow","verify-api-key":"PreFlow",cors:"PostFlow","xml-to-json":"ResponseFlow"},t={id:`policy-${Date.now()}`,name:s[ae]||"New Policy",type:ae,enabled:!0,executionFlow:r[ae],config:{}};h({policies:[...F,t]}),we(!1),qe("quota"),u({title:"Policy Created",description:`Policy "${t.name}" has been created`})},[F,ae,h,u]),ze=c.useCallback(s=>{const r=F.find(t=>t.id===s);h({policies:F.filter(t=>t.id!==s)}),r&&u({title:"Policy Deleted",description:`Policy "${r.name}" has been deleted`})},[F,h,u]),m=c.useCallback((s,r,t)=>{const a=F.map(l=>l.id===s?{...l,[r]:t}:l);h({policies:a})},[F,h]),ns=c.useCallback(()=>{const s={id:`product-${Date.now()}`,name:`product-${Date.now()}`,displayName:`Product ${Date.now()}`,description:"",proxies:[],environments:["prod"],quota:1e3,quotaInterval:60,createdAt:Date.now(),updatedAt:Date.now()};h({products:[...b,s]}),oe(s.id),u({title:"Product Created",description:`Product "${s.displayName}" has been created`})},[b,h,u]),ls=c.useCallback(s=>{const r=b.find(t=>t.id===s);h({products:b.filter(t=>t.id!==s)}),r&&u({title:"Product Deleted",description:`Product "${r.displayName||r.name}" has been deleted`})},[b,h,u]),O=c.useCallback((s,r,t)=>{const a=b.map(l=>l.id===s?{...l,[r]:t,updatedAt:Date.now()}:l);h({products:a})},[b,h]),ue=c.useMemo(()=>b.filter(s=>!U||s.name.toLowerCase().includes(U.toLowerCase())||s.displayName&&s.displayName.toLowerCase().includes(U.toLowerCase())||s.description&&s.description.toLowerCase().includes(U.toLowerCase())),[b,U]),is=c.useCallback(()=>{const s=he(),r={id:`app-${Date.now()}`,name:`app-${Date.now()}`,displayName:`Developer App ${Date.now()}`,description:"",developerId:`dev-${Date.now()}`,developerEmail:"",status:"approved",apiProducts:[],keys:[{id:`key-${Date.now()}`,key:s,consumerKey:s,status:"approved",createdAt:Date.now(),apiProducts:[]}],createdAt:Date.now(),updatedAt:Date.now()};h({developerApps:[...y,r]}),xe(r.id),u({title:"Developer App Created",description:`Developer App "${r.displayName}" has been created`})},[y,q,h,u,he]),$e=c.useCallback(s=>{const r=y.find(t=>t.id===s);h({developerApps:y.filter(t=>t.id!==s)}),r&&u({title:"Developer App Deleted",description:`Developer App "${r.displayName||r.name}" has been deleted`})},[y,h,u]),z=c.useCallback((s,r,t)=>{const a=y.map(l=>l.id===s?{...l,[r]:t,updatedAt:Date.now()}:l);h({developerApps:a})},[y,h]),cs=c.useCallback(s=>{const r=he(),t=y.find(l=>l.id===s);if(!t)return;const a={id:`key-${Date.now()}`,key:r,consumerKey:r,status:"approved",createdAt:Date.now(),apiProducts:t.apiProducts||[]};z(s,"keys",[...t.keys||[],a]),u({title:"API Key Created",description:"New API key has been generated for this app"})},[y,q,z,u,he]),ds=c.useCallback((s,r)=>{const t=y.find(a=>a.id===s);t&&(z(s,"keys",(t.keys||[]).filter(a=>a.id!==r)),u({title:"API Key Deleted",description:"API key has been removed from this app"}))},[y,z,u]);c.useCallback((s,r,t,a)=>{const l=y.find(T=>T.id===s);if(!l)return;const d=(l.keys||[]).map(T=>T.id===r?{...T,[t]:a}:T);z(s,"keys",d)},[y,z]);const os=c.useCallback((s,r)=>{const t=y.find(w=>w.id===s);if(!t)return;const a=t.apiProducts||[],l=a.includes(r)?a.filter(w=>w!==r):[...a,r],d=(t.keys||[]).map(w=>({...w,apiProducts:l})),T=y.map(w=>w.id===s?{...w,apiProducts:l,keys:d,updatedAt:Date.now()}:w);h({developerApps:T})},[y,h]),Ae=c.useMemo(()=>y.filter(s=>{const r=!Q||s.name.toLowerCase().includes(Q.toLowerCase())||s.displayName&&s.displayName.toLowerCase().includes(Q.toLowerCase())||s.developerEmail&&s.developerEmail.toLowerCase().includes(Q.toLowerCase()),t=te==="all"||s.status===te;return r&&t}),[y,Q,te]),xs=c.useCallback(s=>{if(!se)return null;const r=re.getApigeeRoutingEngine(q);return r?r.getKeyUsageMetrics(s):null},[q,se]),hs=c.useMemo(()=>B?.customMetrics?.total_requests||o.reduce((s,r)=>s+(r.requestCount||0),0),[B,o]);c.useMemo(()=>B?.customMetrics?.total_errors||o.reduce((s,r)=>s+(r.errorCount||0),0),[B,o]);const ms=c.useMemo(()=>B?.customMetrics?.avg_latency||(o.length>0?o.reduce((s,r)=>s+(r.avgResponseTime||0),0)/o.length:0),[B,o]),je=c.useMemo(()=>o.filter(s=>{const r=!$||s.name.toLowerCase().includes($.toLowerCase())||s.basePath.toLowerCase().includes($.toLowerCase())||s.targetEndpoint.toLowerCase().includes($.toLowerCase()),t=X==="all"||s.environment===X,a=V==="all"||V==="deployed"&&(s.status==="deployed"||!s.status)||V==="undeployed"&&s.status==="undeployed";return r&&t&&a}),[o,$,X,V]),pe=c.useMemo(()=>F.filter(s=>{const r=!K||s.name.toLowerCase().includes(K.toLowerCase())||s.type.toLowerCase().includes(K.toLowerCase())||s.condition&&s.condition.toLowerCase().includes(K.toLowerCase()),t=G==="all"||s.type===G,a=_==="all"||s.executionFlow===_;return r&&t&&a}),[F,K,G,_]);return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Apigee API Platform"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"API Proxy Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure API proxies, policies, quotas and security"})]})}),e.jsx(ne,{}),e.jsx(C,{className:"border-primary/20 bg-primary/5",children:e.jsx(P,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Active Environment"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Viewing and managing configuration for this environment"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(A,{value:W,onValueChange:s=>{h({environment:s}),u({title:"Environment Switched",description:`Switched to ${s.toUpperCase()} environment`})},children:[e.jsx(S,{className:"w-[180px]",children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"dev",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-yellow-500"}),e.jsx("span",{children:"Development"})]})}),e.jsx(n,{value:"stage",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),e.jsx("span",{children:"Staging"})]})}),e.jsx(n,{value:"prod",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsx("span",{children:"Production"})]})})]})]}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Active environment determines which proxies and products are visible. Proxies deployed to this environment will be used for routing."})})]})})]})]})})}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(C,{children:[e.jsx(I,{className:"pb-3",children:e.jsx(R,{className:"text-sm font-medium",children:"Organization"})}),e.jsx(P,{children:e.jsx(D,{variant:"outline",children:Ne})})]}),e.jsxs(C,{children:[e.jsx(I,{className:"pb-3",children:e.jsx(R,{className:"text-sm font-medium",children:"API Proxies"})}),e.jsx(P,{children:e.jsx("span",{className:"text-2xl font-bold",children:o.length})})]}),e.jsxs(C,{children:[e.jsx(I,{className:"pb-3",children:e.jsx(R,{className:"text-sm font-medium",children:"Total Requests"})}),e.jsx(P,{children:e.jsx("span",{className:"text-2xl font-bold",children:hs.toLocaleString()})})]}),e.jsxs(C,{children:[e.jsx(I,{className:"pb-3",children:e.jsx(R,{className:"text-sm font-medium",children:"Avg Response Time"})}),e.jsxs(P,{children:[e.jsx("span",{className:"text-2xl font-bold",children:ms.toFixed(0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ms"})]})]})]}),e.jsxs(vs,{defaultValue:"proxies",className:"space-y-4",children:[e.jsxs(gs,{className:"flex-wrap h-auto min-h-[36px] w-full justify-start gap-1",children:[e.jsxs(Y,{value:"proxies",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Proxies (",o.length,")"]}),e.jsxs(Y,{value:"policies",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),"Policies (",F.length,")"]}),e.jsxs(Y,{value:"products",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Products (",b.length,")"]}),e.jsxs(Y,{value:"developer-apps",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Developer Apps (",y.length,")"]}),e.jsxs(Y,{value:"monitoring",disabled:o.filter(s=>s.status==="deployed"||!s.status).length===0,children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Monitoring (",o.filter(s=>s.status==="deployed"||!s.status).length,")"]}),e.jsxs(Y,{value:"settings",children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(Z,{value:"proxies",className:"space-y-4",children:e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(R,{children:"API Proxies"}),e.jsx(H,{children:"Configure and manage API proxies"})]}),e.jsxs(f,{onClick:ss,size:"sm",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Create Proxy"]})]})}),e.jsx(P,{children:e.jsxs("div",{className:"space-y-4",children:[o.length>0&&e.jsxs("div",{className:"space-y-3 pb-4 border-b",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(x,{placeholder:"Search proxies by name, base path, or endpoint...",value:$,onChange:s=>be(s.target.value),className:"pl-9"}),$&&e.jsx(f,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7",onClick:()=>be(""),children:e.jsx(ee,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(A,{value:X,onValueChange:Fe,children:[e.jsxs(S,{className:"w-[150px]",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),e.jsx(k,{})]}),e.jsxs(E,{children:[e.jsx(n,{value:"all",children:"All Environments"}),e.jsx(n,{value:"dev",children:"Development"}),e.jsx(n,{value:"stage",children:"Staging"}),e.jsx(n,{value:"prod",children:"Production"})]})]}),e.jsxs(A,{value:V,onValueChange:Te,children:[e.jsxs(S,{className:"w-[150px]",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),e.jsx(k,{})]}),e.jsxs(E,{children:[e.jsx(n,{value:"all",children:"All Statuses"}),e.jsx(n,{value:"deployed",children:"Deployed"}),e.jsx(n,{value:"undeployed",children:"Undeployed"})]})]}),($||X!=="all"||V!=="all")&&e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>{be(""),Fe("all"),Te("all")},children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]}),je.length!==o.length&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Showing ",je.length," of ",o.length," proxies"]})]}),o.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No proxies configured. Create your first proxy to get started."}):je.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:$||X!=="all"||V!=="all"?"No proxies match your filters":"No proxies configured"}):je.map(s=>{const r=o.findIndex(a=>a.name===s.name),t=We.get(r)||[];return e.jsxs(C,{className:"border-l-4 border-l-blue-500",children:[e.jsx(I,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[Be===r?e.jsx(x,{value:s.name,onChange:a=>M(r,"name",a.target.value),onBlur:()=>fe(null),onKeyDown:a=>{a.key==="Enter"&&fe(null)},className:"font-semibold text-base",autoFocus:!0}):e.jsx(R,{className:"text-base cursor-pointer hover:text-primary transition-colors",onClick:()=>fe(r),children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(D,{variant:s.status==="deployed"?"default":"outline",className:"cursor-pointer",onClick:()=>ts(r),children:s.status||"undeployed"}),e.jsx(D,{variant:"outline",children:s.environment}),e.jsxs(D,{variant:"outline",children:["Rev ",s.revision||1]})]})]})]}),e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>as(r),disabled:o.length===1,children:e.jsx(J,{className:"h-4 w-4"})})]})}),e.jsxs(P,{className:"space-y-4",children:[t.length>0&&e.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-3 space-y-1",children:t.map((a,l)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx("span",{children:a.message})]},l))}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requests"}),e.jsx("p",{className:"text-lg font-semibold",children:(s.requestCount||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Errors"}),e.jsx("p",{className:"text-lg font-semibold text-red-500",children:(s.errorCount||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response Time"}),e.jsxs("p",{className:"text-lg font-semibold",children:[(s.avgResponseTime||0).toFixed(0)," ms"]})]})]}),e.jsx(ne,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Proxy Name"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Unique identifier for the API proxy. Can only contain letters, numbers, hyphens and underscores."})})]})})]}),e.jsx(x,{value:s.name,onChange:a=>M(r,"name",a.target.value),className:t.some(a=>a.field==="name")?"border-destructive":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Environment"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Deployment environment for this proxy. Determines which environment-specific configurations are applied."})})]})})]}),e.jsxs(A,{value:s.environment,onValueChange:a=>M(r,"environment",a),children:[e.jsx(S,{children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"dev",children:"Development"}),e.jsx(n,{value:"stage",children:"Staging"}),e.jsx(n,{value:"prod",children:"Production"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Base Path"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Base URL path for the API proxy. Must start with a forward slash (/). This path is prepended to all API requests."})})]})})]}),e.jsx(x,{value:s.basePath,onChange:a=>M(r,"basePath",a.target.value),placeholder:"/api",className:t.some(a=>a.field==="basePath")?"border-destructive":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Target Endpoint"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Backend service URL where requests are forwarded. Must be a valid HTTP or HTTPS URL."})})]})})]}),e.jsx(x,{value:s.targetEndpoint,onChange:a=>M(r,"targetEndpoint",a.target.value),placeholder:"https://api.internal",className:t.some(a=>a.field==="targetEndpoint")?"border-destructive":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Quota (requests)"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Maximum number of requests allowed per quota interval. Set to 0 to disable quota limiting."})})]})})]}),e.jsx(x,{type:"number",value:s.quota||0,onChange:a=>M(r,"quota",Number(a.target.value)),className:t.some(a=>a.field==="quota")?"border-destructive":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Quota Interval (seconds)"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Time window in seconds for quota calculation. The quota limit applies to this time period."})})]})})]}),e.jsx(x,{type:"number",value:s.quotaInterval||60,onChange:a=>M(r,"quotaInterval",Number(a.target.value)),className:t.some(a=>a.field==="quotaInterval")?"border-destructive":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Spike Arrest (req/sec)"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Maximum requests per second allowed. Prevents traffic spikes by smoothing out request rate. Set to 0 to disable."})})]})})]}),e.jsx(x,{type:"number",value:s.spikeArrest||0,onChange:a=>M(r,"spikeArrest",Number(a.target.value)),className:t.some(a=>a.field==="spikeArrest")?"border-destructive":""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Enable OAuth"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Enable OAuth 2.0 authentication for this proxy. Requires valid OAuth tokens for API access."})})]})})]}),e.jsx(ce,{checked:s.enableOAuth||!1,onCheckedChange:a=>M(r,"enableOAuth",a)})]})]}),s.enableOAuth&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"JWT Issuer"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"JWT token issuer identifier. Used to validate JWT tokens issued by this OAuth provider."})})]})})]}),e.jsx(x,{value:s.jwtIssuer||"",onChange:a=>M(r,"jwtIssuer",a.target.value),placeholder:"auth.archi"})]})]})]},r)})]})})]})}),e.jsx(Z,{value:"policies",className:"space-y-4",children:e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(R,{children:"Policies"}),e.jsx(H,{children:"Configure API proxy policies"})]}),e.jsxs(f,{onClick:()=>we(!0),size:"sm",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Add Policy"]})]})}),e.jsxs(P,{children:[F.length>0&&e.jsxs("div",{className:"space-y-3 pb-4 border-b mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(x,{placeholder:"Search policies by name, type, or condition...",value:K,onChange:s=>Pe(s.target.value),className:"pl-9"}),K&&e.jsx(f,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7",onClick:()=>Pe(""),children:e.jsx(ee,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(A,{value:G,onValueChange:De,children:[e.jsxs(S,{className:"w-[180px]",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),e.jsx(k,{})]}),e.jsxs(E,{children:[e.jsx(n,{value:"all",children:"All Types"}),e.jsx(n,{value:"quota",children:"Quota"}),e.jsx(n,{value:"spike-arrest",children:"Spike Arrest"}),e.jsx(n,{value:"verify-api-key",children:"Verify API Key"}),e.jsx(n,{value:"oauth",children:"OAuth"}),e.jsx(n,{value:"jwt",children:"JWT"}),e.jsx(n,{value:"cors",children:"CORS"}),e.jsx(n,{value:"xml-to-json",children:"XML to JSON"})]})]}),e.jsxs(A,{value:_,onValueChange:Ie,children:[e.jsxs(S,{className:"w-[180px]",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),e.jsx(k,{})]}),e.jsxs(E,{children:[e.jsx(n,{value:"all",children:"All Flows"}),e.jsx(n,{value:"PreFlow",children:"PreFlow"}),e.jsx(n,{value:"RequestFlow",children:"RequestFlow"}),e.jsx(n,{value:"ResponseFlow",children:"ResponseFlow"}),e.jsx(n,{value:"PostFlow",children:"PostFlow"}),e.jsx(n,{value:"ErrorFlow",children:"ErrorFlow"})]})]}),(K||G!=="all"||_!=="all")&&e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>{Pe(""),De("all"),Ie("all")},children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]}),pe.length!==F.length&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Showing ",pe.length," of ",F.length," policies"]})]}),ye&&e.jsx(C,{className:"mb-4 border-l-4 border-l-blue-500",children:e.jsx(P,{className:"pt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(i,{className:"text-sm font-semibold",children:"Policy Type"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{className:"max-w-sm",children:e.jsx("p",{children:"The policy type determines its functionality and cannot be changed after creation. Each policy type has specific configuration options and execution behavior."})})]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Select the type of policy to add. The type determines the policy's functionality and cannot be changed after creation."}),e.jsxs(A,{value:ae,onValueChange:s=>qe(s),children:[e.jsx(S,{children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"quota",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Quota Policy"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Limit total requests per time period"})]})}),e.jsx(n,{value:"spike-arrest",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Spike Arrest Policy"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Smooth traffic spikes by rate limiting"})]})}),e.jsx(n,{value:"verify-api-key",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Verify API Key"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Validate API keys in requests"})]})}),e.jsx(n,{value:"oauth",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"OAuth Policy"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"OAuth 2.0 authentication and authorization"})]})}),e.jsx(n,{value:"jwt",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"JWT Policy"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"JWT token validation and verification"})]})}),e.jsx(n,{value:"cors",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"CORS Policy"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Cross-origin resource sharing configuration"})]})}),e.jsx(n,{value:"xml-to-json",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"XML to JSON"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Transform XML responses to JSON format"})]})})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{onClick:rs,size:"sm",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Create Policy"]}),e.jsx(f,{variant:"outline",onClick:()=>we(!1),size:"sm",children:"Cancel"})]})]})})}),F.length===0&&!ye?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No policies configured"}):pe.length===0&&!ye?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:K||G!=="all"||_!=="all"?"No policies match your filters":"No policies configured"}):e.jsx("div",{className:"space-y-2",children:pe.map(s=>{const r=Ye===s.id,t=s.config||{};return e.jsx(C,{className:"border-l-4 border-l-green-500",children:e.jsxs(P,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(D,{variant:"outline",title:"Policy type - determines functionality and cannot be changed",children:s.type}),r?e.jsx(x,{value:s.name,onChange:a=>m(s.id,"name",a.target.value),className:"h-8 font-medium w-48",placeholder:"Policy name"}):e.jsx("span",{className:"font-medium",children:s.name}),s.enabled?e.jsx(D,{variant:"default",children:"Enabled"}):e.jsx(D,{variant:"outline",children:"Disabled"}),s.executionFlow&&e.jsx(D,{variant:"secondary",className:"text-xs",children:s.executionFlow})]}),!r&&e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",s.type,s.executionFlow&&` • Execution: ${s.executionFlow}`,s.condition&&` • Condition: ${s.condition}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{checked:s.enabled,onCheckedChange:a=>m(s.id,"enabled",a)}),r?e.jsxs(e.Fragment,{children:[e.jsx(f,{size:"sm",variant:"outline",onClick:()=>{Ce(null),u({title:"Policy Updated",description:`Configuration for "${s.name}" has been saved`})},children:"Done"}),e.jsx(f,{size:"sm",variant:"destructive",onClick:()=>{ze(s.id),Ce(null)},children:e.jsx(J,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>Ce(s.id),title:"Edit policy configuration",children:e.jsx(Ps,{className:"h-4 w-4"})}),e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>ze(s.id),children:e.jsx(J,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(i,{className:"text-xs",children:"Execution Flow"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"PreFlow:"})," Authentication policies (OAuth, JWT, API Key)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"RequestFlow:"})," Quota and rate limiting policies"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ResponseFlow:"})," Response transformation policies"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"PostFlow:"})," CORS and final transformations"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ErrorFlow:"})," Error handling policies"]})]})})]})})]}),e.jsxs(A,{value:s.executionFlow||"RequestFlow",onValueChange:a=>m(s.id,"executionFlow",a),children:[e.jsx(S,{className:"h-8 text-xs",children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"PreFlow",children:"PreFlow (Auth)"}),e.jsx(n,{value:"RequestFlow",children:"RequestFlow (Quota/Rate Limit)"}),e.jsx(n,{value:"ResponseFlow",children:"ResponseFlow (Response Transform)"}),e.jsx(n,{value:"PostFlow",children:"PostFlow (Transform/CORS)"}),e.jsx(n,{value:"ErrorFlow",children:"ErrorFlow (Error Handling)"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(i,{className:"text-xs",children:"Condition (optional)"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Conditional expression to determine when this policy executes. Examples: request.path = '/api', request.verb = 'GET'"})})]})})]}),e.jsx(x,{value:s.condition||"",onChange:a=>m(s.id,"condition",a.target.value),placeholder:"e.g., request.path = '/api'",className:"h-8 text-xs"})]})]}),r&&e.jsxs("div",{className:"mt-4 pt-4 border-t space-y-4",children:[s.type==="quota"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"text-xs",children:"Allow Count"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Maximum number of requests allowed in the time interval."})})]})})]}),e.jsx(x,{type:"number",min:"1",value:t.quota||t.allowCount||"",onChange:a=>{const l=parseInt(a.target.value)||0;m(s.id,"config",{...t,quota:l,allowCount:l})},placeholder:"1000",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"text-xs",children:"Interval (seconds)"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Time window in seconds for the quota limit."})})]})})]}),e.jsx(x,{type:"number",min:"1",value:t.interval||t.quotaInterval||"",onChange:a=>{const l=parseInt(a.target.value)||0;m(s.id,"config",{...t,interval:l,quotaInterval:l})},placeholder:"60",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"text-xs",children:"Time Unit"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Time unit for the quota interval (seconds, minutes, hours, days)."})})]})})]}),e.jsxs(A,{value:t.timeUnit||"second",onValueChange:a=>m(s.id,"config",{...t,timeUnit:a}),children:[e.jsx(S,{className:"h-8 text-xs",children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"second",children:"Second"}),e.jsx(n,{value:"minute",children:"Minute"}),e.jsx(n,{value:"hour",children:"Hour"}),e.jsx(n,{value:"day",children:"Day"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{checked:t.distributed||!1,onCheckedChange:a=>m(s.id,"config",{...t,distributed:a})}),e.jsx(i,{className:"text-xs",children:"Distributed"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{checked:t.synchronized||!1,onCheckedChange:a=>m(s.id,"config",{...t,synchronized:a})}),e.jsx(i,{className:"text-xs",children:"Synchronized"})]})]}),s.type==="spike-arrest"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"text-xs",children:"Rate (requests per time unit)"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Maximum number of requests allowed per time unit."})})]})})]}),e.jsx(x,{type:"number",min:"1",value:t.rate||"",onChange:a=>{const l=parseInt(a.target.value)||0;m(s.id,"config",{...t,rate:l})},placeholder:"10",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"text-xs",children:"Time Unit"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Time unit for the rate limit (second, minute)."})})]})})]}),e.jsxs(A,{value:t.timeUnit||"second",onValueChange:a=>m(s.id,"config",{...t,timeUnit:a}),children:[e.jsx(S,{className:"h-8 text-xs",children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"second",children:"Per Second"}),e.jsx(n,{value:"minute",children:"Per Minute"})]})]})]})]}),s.type==="oauth"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Token Endpoint"}),e.jsx(x,{value:t.tokenEndpoint||"",onChange:a=>m(s.id,"config",{...t,tokenEndpoint:a.target.value}),placeholder:"https://oauth.example.com/token",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Client ID"}),e.jsx(x,{value:t.clientId||"",onChange:a=>m(s.id,"config",{...t,clientId:a.target.value}),placeholder:"client-id",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Client Secret"}),e.jsx(x,{type:"password",value:t.clientSecret||"",onChange:a=>m(s.id,"config",{...t,clientSecret:a.target.value}),placeholder:"client-secret",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Scopes (comma-separated)"}),e.jsx(x,{value:Array.isArray(t.scopes)?t.scopes.join(", "):t.scopes||"",onChange:a=>{const l=a.target.value.split(",").map(d=>d.trim()).filter(d=>d);m(s.id,"config",{...t,scopes:l})},placeholder:"read, write",className:"h-8 text-xs"})]})]}),s.type==="jwt"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Issuer"}),e.jsx(x,{value:t.issuer||"",onChange:a=>m(s.id,"config",{...t,issuer:a.target.value}),placeholder:"https://jwt.example.com",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Audience"}),e.jsx(x,{value:t.audience||"",onChange:a=>m(s.id,"config",{...t,audience:a.target.value}),placeholder:"api.example.com",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Public Key"}),e.jsx(Ue,{value:t.publicKey||"",onChange:a=>m(s.id,"config",{...t,publicKey:a.target.value}),placeholder:`-----BEGIN PUBLIC KEY-----
...
-----END PUBLIC KEY-----`,rows:4,className:"text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Algorithm"}),e.jsxs(A,{value:t.algorithm||"RS256",onValueChange:a=>m(s.id,"config",{...t,algorithm:a}),children:[e.jsx(S,{className:"h-8 text-xs",children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"RS256",children:"RS256"}),e.jsx(n,{value:"HS256",children:"HS256"}),e.jsx(n,{value:"ES256",children:"ES256"}),e.jsx(n,{value:"RS384",children:"RS384"}),e.jsx(n,{value:"HS384",children:"HS384"}),e.jsx(n,{value:"ES384",children:"ES384"}),e.jsx(n,{value:"RS512",children:"RS512"}),e.jsx(n,{value:"HS512",children:"HS512"}),e.jsx(n,{value:"ES512",children:"ES512"})]})]})]})]}),s.type==="verify-api-key"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Key Name"}),e.jsx(x,{value:t.keyName||"X-API-Key",onChange:a=>m(s.id,"config",{...t,keyName:a.target.value}),placeholder:"X-API-Key",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Location"}),e.jsxs(A,{value:t.location||"header",onValueChange:a=>m(s.id,"config",{...t,location:a}),children:[e.jsx(S,{className:"h-8 text-xs",children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"header",children:"Header"}),e.jsx(n,{value:"query",children:"Query Parameter"}),e.jsx(n,{value:"headerOrQuery",children:"Header or Query"})]})]})]})]}),s.type==="cors"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Allowed Origins (comma-separated)"}),e.jsx(x,{value:Array.isArray(t.origins)?t.origins.join(", "):t.origins||"*",onChange:a=>{const l=a.target.value.split(",").map(d=>d.trim()).filter(d=>d);m(s.id,"config",{...t,origins:l})},placeholder:"https://example.com",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Allowed Methods (comma-separated)"}),e.jsx(x,{value:Array.isArray(t.methods)?t.methods.join(", "):t.methods||"GET, POST, PUT, DELETE",onChange:a=>{const l=a.target.value.split(",").map(d=>d.trim()).filter(d=>d);m(s.id,"config",{...t,methods:l})},placeholder:"GET, POST, PUT, DELETE",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Allowed Headers (comma-separated)"}),e.jsx(x,{value:Array.isArray(t.headers)?t.headers.join(", "):t.headers||"Content-Type, Authorization",onChange:a=>{const l=a.target.value.split(",").map(d=>d.trim()).filter(d=>d);m(s.id,"config",{...t,headers:l})},placeholder:"Content-Type, Authorization",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Max Age (seconds)"}),e.jsx(x,{type:"number",min:"0",value:t.maxAge||"3600",onChange:a=>{const l=parseInt(a.target.value)||0;m(s.id,"config",{...t,maxAge:l})},placeholder:"3600",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{checked:t.allowCredentials||!1,onCheckedChange:a=>m(s.id,"config",{...t,allowCredentials:a})}),e.jsx(i,{className:"text-xs",children:"Allow Credentials"})]})]}),s.type==="xml-to-json"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Options"}),e.jsx(Ue,{value:typeof t.options=="string"?t.options:JSON.stringify(t.options||{},null,2),onChange:a=>{try{const l=JSON.parse(a.target.value);m(s.id,"config",{...t,options:l})}catch{m(s.id,"config",{...t,options:a.target.value})}},placeholder:'{"attributePrefix": "@", "textNode": "$t"}',rows:4,className:"text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Attributes"}),e.jsxs(A,{value:t.attributes||"prefix",onValueChange:a=>m(s.id,"config",{...t,attributes:a}),children:[e.jsx(S,{className:"h-8 text-xs",children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"prefix",children:"Prefix (@attribute)"}),e.jsx(n,{value:"ignore",children:"Ignore"}),e.jsx(n,{value:"preserve",children:"Preserve"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Namespaces"}),e.jsxs(A,{value:t.namespaces||"prefix",onValueChange:a=>m(s.id,"config",{...t,namespaces:a}),children:[e.jsx(S,{className:"h-8 text-xs",children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"prefix",children:"Prefix (ns:element)"}),e.jsx(n,{value:"ignore",children:"Ignore"}),e.jsx(n,{value:"preserve",children:"Preserve"})]})]})]})]})]})]})]})},s.id)})})]})]})}),e.jsx(Z,{value:"products",className:"space-y-4",children:e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(R,{children:"API Products"}),e.jsx(H,{children:"Group proxies together for access control and quota management"})]}),e.jsxs(f,{onClick:ns,size:"sm",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Create Product"]})]})}),e.jsx(P,{children:e.jsxs("div",{className:"space-y-4",children:[b.length>0&&e.jsxs("div",{className:"space-y-3 pb-4 border-b",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(x,{placeholder:"Search products by name, display name, or description...",value:U,onChange:s=>Re(s.target.value),className:"pl-9"}),U&&e.jsx(f,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7",onClick:()=>Re(""),children:e.jsx(ee,{className:"h-4 w-4"})})]}),ue.length!==b.length&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Showing ",ue.length," of ",b.length," products"]})]}),b.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No products configured. Create your first product to group proxies together."}):ue.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:U?"No products match your search":"No products configured"}):ue.map(s=>{const r=o.filter(t=>(s.proxies||[]).includes(t.name));return e.jsxs(C,{className:"border-l-4 border-l-orange-500",children:[e.jsx(I,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Oe,{className:"h-5 w-5 text-orange-500"}),Ge===s.id?e.jsx(x,{value:s.displayName||s.name,onChange:t=>O(s.id,"displayName",t.target.value),onBlur:()=>oe(null),onKeyDown:t=>{t.key==="Enter"&&oe(null)},className:"font-semibold text-base",autoFocus:!0}):e.jsx(R,{className:"text-base cursor-pointer hover:text-primary transition-colors",onClick:()=>oe(s.id),children:s.displayName||s.name}),e.jsxs(D,{variant:"outline",children:[(s.proxies||[]).length," ",(s.proxies||[]).length===1?"proxy":"proxies"]})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.description})]}),e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>ls(s.id),children:e.jsx(J,{className:"h-4 w-4"})})]})}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Product Name"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Unique identifier for the API product. Used internally for product identification."})})]})})]}),e.jsx(x,{value:s.name,onChange:t=>O(s.id,"name",t.target.value),placeholder:"product-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Display Name"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Human-readable name for the API product. Shown in developer portals and dashboards."})})]})})]}),e.jsx(x,{value:s.displayName||"",onChange:t=>O(s.id,"displayName",t.target.value),placeholder:"Product Display Name"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Description"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Description of the API product. Helps developers understand what APIs are included in this product."})})]})})]}),e.jsx(x,{value:s.description||"",onChange:t=>O(s.id,"description",t.target.value),placeholder:"Product description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Quota (requests)"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Product-level quota limit. Maximum requests allowed per quota interval for all proxies in this product."})})]})})]}),e.jsx(x,{type:"number",value:s.quota||0,onChange:t=>O(s.id,"quota",Number(t.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Quota Interval (seconds)"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Time window in seconds for product-level quota calculation."})})]})})]}),e.jsx(x,{type:"number",value:s.quotaInterval||60,onChange:t=>O(s.id,"quotaInterval",Number(t.target.value))})]})]}),e.jsx(ne,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Environments"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Environments where this product is available. Proxies in this product must be deployed to these environments."})})]})})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["dev","stage","prod"].map(t=>{const a=s.environments?.includes(t)||!1;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{id:`product-${s.id}-env-${t}`,checked:a,onCheckedChange:l=>{const d=s.environments||[],T=l?[...d,t]:d.filter(w=>w!==t);O(s.id,"environments",T)}}),e.jsx(i,{htmlFor:`product-${s.id}-env-${t}`,className:"text-sm font-normal cursor-pointer",children:t})]},t)})})]}),e.jsx(ne,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Associated Proxies"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Select which API proxies are included in this product. Proxies can belong to multiple products."})})]})})]}),o.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No proxies available. Create proxies first."}):e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-md p-2",children:o.map(t=>{const a=(s.proxies||[]).includes(t.name);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{id:`product-${s.id}-proxy-${t.name}`,checked:a,onCheckedChange:l=>{const d=s.proxies||[],T=l?[...d,t.name]:d.filter(w=>w!==t.name);O(s.id,"proxies",T)}}),e.jsx(i,{htmlFor:`product-${s.id}-proxy-${t.name}`,className:"text-sm font-normal flex-1 cursor-pointer",children:t.name}),e.jsx(D,{variant:"outline",className:"text-xs",children:t.environment}),t.status==="deployed"||!t.status?e.jsx(D,{variant:"default",className:"text-xs",children:"Deployed"}):e.jsx(D,{variant:"outline",className:"text-xs",children:"Undeployed"})]},t.name)})}),r.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-muted rounded-md",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Selected proxies:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(t=>e.jsx(D,{variant:"secondary",className:"text-xs",children:t.name},t.name))})]})]})]})]},s.id)})]})})]})}),e.jsx(Z,{value:"developer-apps",className:"space-y-4",children:e.jsxs(C,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(R,{children:"Developer Apps"}),e.jsx(H,{children:"Manage developer applications and API keys"})]}),e.jsxs(f,{onClick:is,size:"sm",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Create App"]})]})}),e.jsx(P,{children:e.jsxs("div",{className:"space-y-4",children:[y.length>0&&e.jsxs("div",{className:"space-y-3 pb-4 border-b",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(x,{placeholder:"Search apps by name, email...",value:Q,onChange:s=>Le(s.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(A,{value:te,onValueChange:Me,children:[e.jsx(S,{className:"w-[180px]",children:e.jsx(k,{placeholder:"Filter by status"})}),e.jsxs(E,{children:[e.jsx(n,{value:"all",children:"All Status"}),e.jsx(n,{value:"approved",children:"Approved"}),e.jsx(n,{value:"pending",children:"Pending"}),e.jsx(n,{value:"revoked",children:"Revoked"})]})]}),(Q||te!=="all")&&e.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>{Le(""),Me("all")},children:[e.jsx(ee,{className:"h-4 w-4 mr-1"}),"Clear"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",Ae.length," of ",y.length," apps"]})]}),Ae.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:y.length===0?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No developer apps yet"}),e.jsx("p",{className:"text-sm mt-2",children:"Create your first developer app to start managing API keys"})]}):e.jsx("p",{children:"No apps match your search criteria"})}):e.jsx("div",{className:"space-y-4",children:Ae.map(s=>{const r=_e===s.id,t={approved:"bg-green-500",pending:"bg-yellow-500",revoked:"bg-red-500"};return e.jsxs(C,{className:"relative",children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{className:"text-base",children:r?e.jsx(x,{value:s.displayName||s.name,onChange:a=>z(s.id,"displayName",a.target.value),className:"h-8 font-semibold",placeholder:"App Display Name"}):s.displayName||s.name}),e.jsx(D,{variant:"outline",className:`${t[s.status||"pending"]} text-white border-0`,children:s.status||"pending"})]}),r&&e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-xs",children:"App Name"}),e.jsx(x,{value:s.name,onChange:a=>z(s.id,"name",a.target.value),className:"h-8 text-xs",placeholder:"app-name"})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs",children:"Developer Email"}),e.jsx(x,{type:"email",value:s.developerEmail||"",onChange:a=>z(s.id,"developerEmail",a.target.value),className:"h-8 text-xs",placeholder:"developer@example.com"})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs",children:"Description"}),e.jsx(x,{value:s.description||"",onChange:a=>z(s.id,"description",a.target.value),className:"h-8 text-xs",placeholder:"App description"})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs",children:"Status"}),e.jsxs(A,{value:s.status||"pending",onValueChange:a=>z(s.id,"status",a),children:[e.jsx(S,{className:"h-8 text-xs",children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"approved",children:"Approved"}),e.jsx(n,{value:"pending",children:"Pending"}),e.jsx(n,{value:"revoked",children:"Revoked"})]})]})]})]}),!r&&s.description&&e.jsx(H,{className:"mt-1",children:s.description}),!r&&s.developerEmail&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.developerEmail})]}),e.jsx("div",{className:"flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(f,{size:"sm",variant:"outline",onClick:()=>xe(null),children:"Done"}),e.jsx(f,{size:"sm",variant:"destructive",onClick:()=>{$e(s.id),xe(null)},children:e.jsx(J,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{size:"sm",variant:"outline",onClick:()=>xe(s.id),children:"Edit"}),e.jsx(f,{size:"sm",variant:"destructive",onClick:()=>$e(s.id),children:e.jsx(J,{className:"h-4 w-4"})})]})})]})}),e.jsx(P,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium mb-2 block",children:"API Products"}),e.jsx("div",{className:"space-y-2",children:b.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No products available"}):b.map(a=>{const l=(s.apiProducts||[]).includes(a.id);return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{id:`app-${s.id}-product-${a.id}`,checked:l,onCheckedChange:()=>os(s.id,a.id)}),e.jsx(i,{htmlFor:`app-${s.id}-product-${a.id}`,className:"text-sm font-normal cursor-pointer",children:a.displayName||a.name})]},a.id)})})]}),e.jsx(ne,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(i,{className:"text-sm font-medium",children:["API Keys (",(s.keys||[]).length,")"]}),e.jsxs(f,{size:"sm",variant:"outline",onClick:()=>cs(s.id),children:[e.jsx(As,{className:"h-4 w-4 mr-1"}),"Add Key"]})]}),e.jsx("div",{className:"space-y-2",children:(s.keys||[]).length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No API keys"}):(s.keys||[]).map(a=>{const l=xs(a.key),d=Ze.has(a.id),T=()=>{es(us=>{const ve=new Set(us);return ve.has(a.id)?ve.delete(a.id):ve.add(a.id),ve})},w=d?a.key:"•".repeat(Math.min(a.key.length,20));return e.jsx(C,{className:"p-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded font-mono break-all",children:w}),e.jsx(f,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 flex-shrink-0",onClick:T,title:d?"Hide key":"Show key",children:d?e.jsx(Ss,{className:"h-4 w-4"}):e.jsx(ws,{className:"h-4 w-4"})})]}),e.jsx(D,{variant:"outline",className:a.status==="approved"?"bg-green-500 text-white border-0":"bg-red-500 text-white border-0",children:a.status||"approved"})]}),l&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:["Requests: ",l.requestCount.toLocaleString()]}),l.lastUsed>0&&e.jsxs("span",{className:"ml-2",children:["Last used: ",new Date(l.lastUsed).toLocaleString()]})]}),a.expiresAt&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Expires: ",new Date(a.expiresAt).toLocaleDateString()]})]}),e.jsx(f,{size:"sm",variant:"ghost",onClick:()=>ds(s.id,a.id),children:e.jsx(J,{className:"h-4 w-4"})})]})},a.id)})})]})]})})]},s.id)})})]})})]})}),e.jsx(Z,{value:"monitoring",className:"space-y-4",children:e.jsxs(C,{children:[e.jsxs(I,{children:[e.jsx(R,{children:"API Analytics"}),e.jsx(H,{children:"Monitor API proxy performance and usage"})]}),e.jsx(P,{children:e.jsx("div",{className:"space-y-4",children:o.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No proxies to monitor"}):o.map((s,r)=>e.jsxs(C,{className:"border-l-4 border-l-purple-500",children:[e.jsx(I,{className:"pb-3",children:e.jsx(R,{className:"text-base",children:s.name})}),e.jsx(P,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold",children:(s.requestCount||0).toLocaleString()}),e.jsx(ke,{value:Math.min((s.requestCount||0)/1e4*100,100),className:"h-2 mt-2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Errors"}),e.jsx("p",{className:"text-2xl font-bold text-red-500",children:(s.errorCount||0).toLocaleString()}),e.jsx(ke,{value:Math.min((s.errorCount||0)/100*100,100),className:"h-2 mt-2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Avg Response Time"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(s.avgResponseTime||0).toFixed(0)," ms"]}),e.jsx(ke,{value:Math.min((s.avgResponseTime||0)/1e3*100,100),className:"h-2 mt-2"})]})]})})]},r))})})]})}),e.jsx(Z,{value:"settings",className:"space-y-4",children:e.jsxs(C,{children:[e.jsxs(I,{children:[e.jsx(R,{children:"Apigee Settings"}),e.jsx(H,{children:"Configure organization and API access"})]}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Organization"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Apigee organization name. This identifies your organization in the Apigee platform."})})]})})]}),e.jsx(x,{value:Ne,onChange:s=>h({organization:s.target.value}),placeholder:"my-organization"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"Active Environment"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Active environment for viewing and managing configuration. New proxies will be created in this environment. Use the environment selector at the top to switch environments."})})]})})]}),e.jsxs(A,{value:W,onValueChange:s=>{h({environment:s}),u({title:"Environment Switched",description:`Switched to ${s.toUpperCase()} environment`})},children:[e.jsx(S,{children:e.jsx(k,{})}),e.jsxs(E,{children:[e.jsx(n,{value:"dev",children:"Development"}),e.jsx(n,{value:"stage",children:"Staging"}),e.jsx(n,{value:"prod",children:"Production"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This environment is used for viewing configuration and creating new proxies. Proxies can be deployed to different environments."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{children:"API Key"}),e.jsx(p,{children:e.jsxs(v,{children:[e.jsx(g,{asChild:!0,children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(N,{children:e.jsx("p",{children:"Apigee API key for authentication. Used to authenticate API calls to Apigee management APIs."})})]})})]}),e.jsx(x,{type:"password",value:Je,onChange:s=>h({apiKey:s.target.value}),placeholder:"Enter Apigee API key"})]})]})]})})]})]})})}export{Us as ApigeeConfigAdvanced};

import{u as He,X as _e,j as e,V as Ze,r as d,i as u,S as U,C as o,e as x,f as h,k as m,A as xe,Z as Je,h as v,T as Ke,a as Qe,b as M,N as he,R as Ye,F as es,c as ss,d as O,L as r,n as H,o as _,p as Z,q as J,s as $,P as me,B,U as ue,m as je,ab as ts,ac as as,a9 as rs,I as p,t as V,D as pe,v as ge,w as ve,x as fe,y as Ne,z as Se}from"./index-DURBjmRY.js";import{T as ne}from"./textarea-XEi4bLpn.js";import{u as ns}from"./use-toast-xcIxNTXl.js";import{R as is}from"./refresh-ccw-sggz22ww.js";import{S as K}from"./server-NDwJ4nd7.js";import{C as ye}from"./circle-check-big-B1dsCsWQ.js";import{S as ls}from"./shield-DRkEvSf_.js";function ps({componentId:z}){const{nodes:be,updateNode:we}=He(),{getComponentMetrics:Ce}=_e(),{toast:i}=ns(),Q=be.find(s=>s.id===z);if(!Q)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const g=Ze.getSOAPEmulationEngine(z),ie=Ce(z)?.customMetrics||{},l=Q.data.config||{},c=l.services||[],f=l.requests||[],Me=l.endpoint||"http://localhost:8080/soap",Oe=l.wsdlUrl||c[0]?.wsdlUrl||"",t=g?.getSOAPMetrics(),Le=t?.totalRequests??l.totalRequests??f.length,Te=t?.successRate??l.successRate??(f.length>0?f.filter(s=>s.status==="success").length/f.length*100:0),Ae=t?.averageLatency??l.averageLatency??(f.length>0?f.reduce((s,a)=>s+(a.duration||0),0)/f.length:0),Re=t?.requestsPerSecond??ie.requests_per_second??0;t?.errorRate??ie.error_rate;const[Y,De]=d.useState(""),[S,le]=d.useState(""),[ce,de]=d.useState(""),[Pe,oe]=d.useState(""),[F,ee]=d.useState(""),[q,We]=d.useState(!0),[ke,L]=d.useState(!1),[T,I]=d.useState(null),[y,A]=d.useState(""),[se,R]=d.useState("default"),[te,D]=d.useState(""),[Ee,P]=d.useState(!1),[w,X]=d.useState(null),[C,G]=d.useState(""),[b,W]=d.useState(""),[ae,k]=d.useState(""),[re,E]=d.useState("");d.useEffect(()=>{if(!q)return;const s=setInterval(()=>{ee(F)},2e3);return()=>clearInterval(s)},[q,F]);const n=s=>{we(z,{data:{...Q.data,config:{...l,...s}}})},Fe=()=>{if(!y.trim()){i({title:"Error",description:"Service name is required",variant:"destructive"});return}if(c.find(a=>a.name===y)){i({title:"Error",description:"Service with this name already exists",variant:"destructive"});return}const s={name:y,port:se,operations:[],wsdlUrl:te||void 0};n({services:[...c,s]}),i({title:"Success",description:`Service "${y}" added successfully`}),A(""),R("default"),D(""),L(!1)},qe=s=>{I(s),A(s.name),R(s.port),D(s.wsdlUrl||""),L(!0)},Ue=()=>{if(!y.trim()||!T)return;const s=c.map(a=>a.name===T.name?{...a,name:y,port:se,wsdlUrl:te||void 0}:a);n({services:s}),i({title:"Success",description:`Service "${y}" updated successfully`}),I(null),A(""),R("default"),D(""),L(!1)},$e=s=>{if(c.find(a=>a.name===s)?.operations.length>0){i({title:"Error",description:"Cannot delete service with operations. Delete operations first.",variant:"destructive"});return}n({services:c.filter(a=>a.name!==s)}),i({title:"Success",description:`Service "${s}" deleted successfully`})},Be=()=>{if(!C||!b.trim()){i({title:"Error",description:"Service and operation name are required",variant:"destructive"});return}const s=c.find(j=>j.name===C);if(!s)return;if(s.operations.find(j=>j.name===b)){i({title:"Error",description:"Operation with this name already exists in this service",variant:"destructive"});return}const a={name:b,inputMessage:ae||void 0,outputMessage:re||void 0},N=c.map(j=>j.name===C?{...j,operations:[...j.operations,a]}:j);n({services:N}),i({title:"Success",description:`Operation "${b}" added to service "${C}"`}),W(""),k(""),E(""),P(!1)},Ve=(s,a)=>{X({service:s,operation:a}),G(s.name),W(a.name),k(a.inputMessage||""),E(a.outputMessage||""),P(!0)},ze=()=>{if(!C||!b.trim()||!w)return;const s=c.map(a=>a.name===C?{...a,operations:a.operations.map(N=>N.name===w.operation.name?{...N,name:b,inputMessage:ae||void 0,outputMessage:re||void 0}:N)}:a);n({services:s}),i({title:"Success",description:`Operation "${b}" updated successfully`}),X(null),W(""),k(""),E(""),P(!1)},Ie=(s,a)=>{const N=c.map(j=>j.name===s?{...j,operations:j.operations.filter(Ge=>Ge.name!==a)}:j);n({services:N}),i({title:"Success",description:`Operation "${a}" deleted from service "${s}"`})},Xe=()=>{if(!S)return;const s={id:`req-${Date.now()}`,operation:S,requestBody:ce||`<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <${S}Request>
      <!-- Request data -->
    </${S}Request>
  </soap:Body>
</soap:Envelope>`,responseBody:`<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <${S}Response>
      <!-- Response data -->
    </${S}Response>
  </soap:Body>
</soap:Envelope>`,status:"success",timestamp:new Date().toISOString(),duration:Math.floor(Math.random()*200)+50};oe(s.responseBody||""),n({requests:[...f,s]})};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"SOAP"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"SOAP Web Service"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Simple Object Access Protocol web service"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>{We(!q)},children:[e.jsx(is,{className:`h-4 w-4 mr-2 ${q?"animate-spin":""}`}),q?"Auto Refresh":"Manual"]})})]}),e.jsx(U,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(o,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Services"}),e.jsx(K,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:c.length}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"registered"})]})})]}),e.jsxs(o,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Requests/sec"}),e.jsx(xe,{className:"h-4 w-4 text-green-500"})]})}),e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Re.toFixed(1)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"per second"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Total: ",Le]})]})]}),e.jsxs(o,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsx(ye,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(m,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[Te.toFixed(1),"%"]})})})]}),e.jsxs(o,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Avg Latency"}),e.jsx(Je,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:Ae.toFixed(0)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"ms"})]}),t?.throughputTrends&&e.jsx("div",{className:"mt-2 text-xs",children:e.jsxs("span",{className:`inline-flex items-center gap-1 ${t.throughputTrends.trend==="increasing"?"text-green-600":t.throughputTrends.trend==="decreasing"?"text-red-600":"text-muted-foreground"}`,children:[t.throughputTrends.trend==="increasing"?"↑":t.throughputTrends.trend==="decreasing"?"↓":"→",t.throughputTrends.changePercent>0?"+":"",t.throughputTrends.changePercent.toFixed(1),"%"]})})]})]})]}),t?.throughputTrends&&e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Throughput Trends"}),e.jsx(v,{children:"Request rate changes over time"})]}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current RPS"}),e.jsx("p",{className:"text-2xl font-bold",children:t.throughputTrends.current.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Previous RPS"}),e.jsx("p",{className:"text-2xl font-bold",children:t.throughputTrends.previous.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Peak RPS"}),e.jsx("p",{className:"text-2xl font-bold",children:t.throughputTrends.peak.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Trend"}),e.jsx("p",{className:`text-2xl font-bold ${t.throughputTrends.trend==="increasing"?"text-green-600":t.throughputTrends.trend==="decreasing"?"text-red-600":"text-muted-foreground"}`,children:t.throughputTrends.trend==="increasing"?"↑ Increasing":t.throughputTrends.trend==="decreasing"?"↓ Decreasing":"→ Stable"})]})]})})]}),t?.latencyP50!==void 0&&e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Latency Percentiles"}),e.jsx(v,{children:"Response time distribution"})]}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"P50 (Median)"}),e.jsxs("p",{className:"text-2xl font-bold",children:[t.latencyP50.toFixed(0),"ms"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"P95"}),e.jsxs("p",{className:"text-2xl font-bold",children:[t.latencyP95?.toFixed(0)||"N/A","ms"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"P99"}),e.jsxs("p",{className:"text-2xl font-bold",children:[t.latencyP99?.toFixed(0)||"N/A","ms"]})]})]})})]}),e.jsxs(Ke,{defaultValue:"test",className:"space-y-4",children:[e.jsxs(Qe,{className:"flex-wrap h-auto",children:[e.jsxs(M,{value:"test",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Test Client"]}),e.jsxs(M,{value:"services",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Services (",c.length,")"]}),e.jsxs(M,{value:"operations",children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Operations"]}),e.jsxs(M,{value:"wsdl",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"WSDL"]}),e.jsxs(M,{value:"security",children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Security"]}),e.jsxs(M,{value:"history",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"History (",f.length,")"]}),e.jsxs(M,{value:"settings",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(O,{value:"test",className:"space-y-4",children:e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"SOAP Test Client"}),e.jsx(v,{children:"Test SOAP operations"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Service"}),e.jsxs(H,{value:Y,onValueChange:s=>{De(s);const a=c.find(N=>N.name===s);a&&a.operations.length>0&&le(a.operations[0].name)},children:[e.jsx(_,{children:e.jsx(Z,{placeholder:"Select service"})}),e.jsx(J,{children:c.map(s=>e.jsx($,{value:s.name,children:s.name},s.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Operation"}),e.jsxs(H,{value:S,onValueChange:le,children:[e.jsx(_,{children:e.jsx(Z,{placeholder:"Select operation"})}),e.jsx(J,{children:Y&&c.find(s=>s.name===Y)?.operations.map(s=>e.jsx($,{value:s.name,children:s.name},s.name))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"SOAP Request (XML)"}),e.jsx(ne,{value:ce,onChange:s=>de(s.target.value),className:"font-mono text-sm min-h-[300px]",placeholder:"<soap:Envelope>..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"SOAP Response"}),e.jsx(ne,{value:Pe,readOnly:!0,className:"font-mono text-sm min-h-[300px] bg-muted",placeholder:"Response will appear here..."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{onClick:Xe,disabled:!S,children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Execute Request"]}),e.jsx(u,{variant:"outline",onClick:()=>{de(""),oe("")},children:"Clear"})]})]})]})}),e.jsx(O,{value:"services",className:"space-y-4",children:e.jsxs(o,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"SOAP Services"}),e.jsx(v,{children:"Manage services and operations. Services are defined in the component configuration."})]}),e.jsxs(u,{onClick:()=>{I(null),A(""),R("default"),D(""),L(!0)},children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Add Service"]})]})}),e.jsx(m,{children:c.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(K,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No services configured"}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Add Service" to create your first service'})]}):e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsxs(o,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(K,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(h,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(B,{variant:"outline",children:s.port}),e.jsxs(B,{variant:"outline",children:[s.operations.length," operations"]})]}),s.wsdlUrl&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["WSDL: ",s.wsdlUrl]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>qe(s),children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>{confirm(`Delete service "${s.name}"?`)&&$e(s.name)},className:"text-red-600 hover:text-red-700",children:e.jsx(je,{className:"h-4 w-4"})})]})]})}),e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(r,{children:"Operations"}),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>{X(null),G(s.name),W(""),k(""),E(""),P(!0)},children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Add Operation"]})]}),s.operations.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:'No operations. Click "Add Operation" to add one.'}):e.jsx("div",{className:"space-y-2",children:s.operations.map(a=>e.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono font-semibold",children:a.name})}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[a.inputMessage&&e.jsxs("span",{children:["Input: ",a.inputMessage]}),a.outputMessage&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"→"}),e.jsxs("span",{children:["Output: ",a.outputMessage]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>Ve(s,a),children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>{confirm(`Delete operation "${a.name}"?`)&&Ie(s.name,a.name)},className:"text-red-600 hover:text-red-700",children:e.jsx(je,{className:"h-4 w-4"})})]})]},a.name))})]})]},s.name))})})]})}),e.jsx(O,{value:"operations",className:"space-y-4",children:e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Operation Metrics"}),e.jsx(v,{children:"Performance metrics per operation"})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:t?.operationMetrics&&t.operationMetrics.length>0?t.operationMetrics.map(s=>e.jsxs(o,{className:"border-l-4 border-l-blue-500",children:[e.jsx(x,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-lg font-semibold",children:s.operationName}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Service: ",s.serviceName]})]}),e.jsxs(B,{variant:s.errorRate>5?"destructive":"default",children:[s.errorRate.toFixed(1),"% errors"]})]})}),e.jsxs(m,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Calls"}),e.jsx("p",{className:"text-2xl font-bold",children:s.totalCalls})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Latency"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.averageLatency.toFixed(0),"ms"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Calls/sec"}),e.jsx("p",{className:"text-2xl font-bold",children:s.callsPerSecond.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Errors"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:s.totalErrors})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Min Latency"}),e.jsx("p",{className:"text-lg font-semibold",children:s.minLatency===1/0?"N/A":`${s.minLatency.toFixed(0)}ms`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Max Latency"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.maxLatency.toFixed(0),"ms"]})]})]})]})]},`${s.serviceName}:${s.operationName}`)):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No operation metrics available"})})})]})}),e.jsx(O,{value:"wsdl",className:"space-y-4",children:e.jsxs(o,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"WSDL Definition"}),e.jsx(v,{children:"Web Service Description Language"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>{if(c.length===0){i({title:"Error",description:"No services configured. Add services first to generate WSDL.",variant:"destructive"});return}const s=g?.getWSDLXML();s?(ee(s),i({title:"Success",description:"WSDL generated successfully"})):i({title:"Error",description:"Failed to generate WSDL. Check service configuration.",variant:"destructive"})},children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Generate WSDL"]}),e.jsxs(u,{variant:"outline",size:"sm",onClick:async()=>{if(!F.trim()){i({title:"Error",description:"WSDL XML is empty",variant:"destructive"});return}try{const s=g?.parseWSDL(F);if(s){const a=g?.validateWSDL(s);a&&!a.valid&&i({title:"Warning",description:`WSDL validation errors: ${a.errors?.join(", ")}`,variant:"destructive"}),g?.setWSDL(s),n({wsdl:s}),i({title:"Success",description:"WSDL loaded and parsed successfully"})}else i({title:"Error",description:"Failed to parse WSDL. Check XML format.",variant:"destructive"})}catch(s){i({title:"Error",description:`Failed to load WSDL: ${s instanceof Error?s.message:"Unknown error"}`,variant:"destructive"})}},children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Load WSDL"]})]})]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"WSDL XML"}),e.jsx(ne,{value:F||g?.getWSDLXML()||"",onChange:s=>ee(s.target.value),className:"font-mono text-sm min-h-[400px]",placeholder:"WSDL XML will appear here..."})]}),g?.getWSDL()&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"WSDL Info"}),e.jsxs("div",{className:"p-4 bg-muted rounded",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Target Namespace:"})," ",g.getWSDL()?.targetNamespace||"N/A"]}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Services:"})," ",g.getWSDL()?.services?.length||0]}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Messages:"})," ",g.getWSDL()?.messages?.length||0]}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Port Types:"})," ",g.getWSDL()?.portTypes?.length||0]})]})]})]})]})}),e.jsxs(O,{value:"security",className:"space-y-4",children:[e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"WS-Security Metrics"}),e.jsx(v,{children:"Security validation statistics"})]}),e.jsx(m,{children:t?.wsSecurityMetrics?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Validations"}),e.jsx("p",{className:"text-2xl font-bold",children:t.wsSecurityMetrics.totalValidations})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[t.wsSecurityMetrics.validationSuccessRate.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Signatures Processed"}),e.jsx("p",{className:"text-2xl font-bold",children:t.wsSecurityMetrics.signaturesProcessed})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Encryptions Processed"}),e.jsx("p",{className:"text-2xl font-bold",children:t.wsSecurityMetrics.encryptionsProcessed})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Failed Validations"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.wsSecurityMetrics.failedValidations})]})]}):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"WS-Security metrics not available"})})]}),e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"WS-Addressing Metrics"}),e.jsx(v,{children:"Addressing usage statistics"})]}),e.jsx(m,{children:t?.wsAddressingMetrics?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Messages"}),e.jsx("p",{className:"text-2xl font-bold",children:t.wsAddressingMetrics.totalMessages})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"With Addressing"}),e.jsx("p",{className:"text-2xl font-bold",children:t.wsAddressingMetrics.messagesWithAddressing})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Async Responses"}),e.jsx("p",{className:"text-2xl font-bold",children:t.wsAddressingMetrics.asyncResponses})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Usage Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[t.wsAddressingMetrics.addressingUsageRate.toFixed(1),"%"]})]})]}):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"WS-Addressing metrics not available"})})]}),e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"MTOM Metrics"}),e.jsx(v,{children:"Message Transmission Optimization Mechanism"})]}),e.jsx(m,{children:t?.mtomMetrics?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Messages"}),e.jsx("p",{className:"text-2xl font-bold",children:t.mtomMetrics.totalMessages})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"With MTOM"}),e.jsx("p",{className:"text-2xl font-bold",children:t.mtomMetrics.messagesWithMTOM})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Attachments"}),e.jsx("p",{className:"text-2xl font-bold",children:t.mtomMetrics.totalAttachments})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Attachments"}),e.jsx("p",{className:"text-2xl font-bold",children:t.mtomMetrics.averageAttachmentsPerMessage.toFixed(1)})]}),e.jsxs("div",{className:"col-span-2 md:col-span-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"MTOM Usage Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[t.mtomMetrics.mtomUsageRate.toFixed(1),"%"]})]})]}):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"MTOM metrics not available"})})]})]}),e.jsx(O,{value:"history",className:"space-y-4",children:e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Request History"}),e.jsx(v,{children:"Previously executed SOAP requests"})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:f.map(s=>e.jsxs(o,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(x,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.status==="success"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:s.status==="success"?e.jsx(ye,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):e.jsx(rs,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx(h,{className:"text-lg font-semibold",children:s.operation}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.duration&&e.jsxs(B,{variant:"outline",children:[s.duration,"ms"]}),e.jsx(B,{variant:s.status==="success"?"default":"destructive",children:s.status})]})]})]})})}),e.jsxs(m,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Request"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto max-h-40 overflow-y-auto",children:s.requestBody})]}),s.responseBody&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Response"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto max-h-40 overflow-y-auto",children:s.responseBody})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(s.timestamp).toLocaleString()})]})]},s.id))})})]})}),e.jsx(O,{value:"settings",className:"space-y-4",children:e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"SOAP Settings"}),e.jsx(v,{children:"Service configuration"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Endpoint URL"}),e.jsx(p,{value:Me,onChange:s=>n({endpoint:s.target.value}),placeholder:"http://localhost:8080/soap"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"WSDL URL"}),e.jsx(p,{value:Oe,onChange:s=>n({wsdlUrl:s.target.value}),placeholder:"http://localhost:8080/wsdl/service.wsdl"})]}),e.jsx(U,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable WS-Security"}),e.jsx(V,{checked:l.enableWSSecurity??!1,onCheckedChange:s=>n({enableWSSecurity:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable WS-Addressing"}),e.jsx(V,{checked:l.enableWSAddressing??!1,onCheckedChange:s=>n({enableWSAddressing:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable MTOM"}),e.jsx(V,{checked:l.enableMTOM??!1,onCheckedChange:s=>n({enableMTOM:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable Validation"}),e.jsx(V,{checked:l.enableValidation??!0,onCheckedChange:s=>n({enableValidation:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable Caching"}),e.jsx(V,{checked:l.enableCaching??!1,onCheckedChange:s=>n({enableCaching:s})})]}),e.jsx(U,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"SOAP Version"}),e.jsxs(H,{value:l.soapVersion??"1.1",onValueChange:s=>n({soapVersion:s}),children:[e.jsx(_,{children:e.jsx(Z,{})}),e.jsxs(J,{children:[e.jsx($,{value:"1.1",children:"SOAP 1.1"}),e.jsx($,{value:"1.2",children:"SOAP 1.2"})]})]})]}),l.enableCaching&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Cache TTL (seconds)"}),e.jsx(p,{type:"number",value:l.cacheTTL??300,onChange:s=>n({cacheTTL:parseInt(s.target.value)||300}),placeholder:"300"})]}),e.jsx(U,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Requests Per Second"}),e.jsx(p,{type:"number",value:l.requestsPerSecond??100,onChange:s=>n({requestsPerSecond:parseInt(s.target.value)||100}),placeholder:"100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Response Latency (ms)"}),e.jsx(p,{type:"number",value:l.responseLatency??50,onChange:s=>n({responseLatency:parseInt(s.target.value)||50}),placeholder:"50"})]}),e.jsx(U,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Max Request Size (bytes)"}),e.jsx(p,{type:"number",value:l.maxRequestSize??10*1024*1024,onChange:s=>n({maxRequestSize:parseInt(s.target.value)||10*1024*1024}),placeholder:"10485760"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum size of SOAP request in bytes (default: 10MB)"})]})]})]})})]}),e.jsx(pe,{open:ke,onOpenChange:L,children:e.jsxs(ge,{children:[e.jsxs(ve,{children:[e.jsx(fe,{children:T?"Edit Service":"Add Service"}),e.jsx(Ne,{children:T?"Update service configuration":"Create a new SOAP service. Services contain operations that can be called by clients."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Service Name *"}),e.jsx(p,{value:y,onChange:s=>A(s.target.value),placeholder:"MyService"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Port Name"}),e.jsx(p,{value:se,onChange:s=>R(s.target.value),placeholder:"default"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"WSDL URL (optional)"}),e.jsx(p,{value:te,onChange:s=>D(s.target.value),placeholder:"http://example.com/service.wsdl"})]})]}),e.jsxs(Se,{children:[e.jsx(u,{variant:"outline",onClick:()=>{L(!1),I(null),A(""),R("default"),D("")},children:"Cancel"}),e.jsxs(u,{onClick:T?Ue:Fe,children:[T?"Save":"Add"," Service"]})]})]})}),e.jsx(pe,{open:Ee,onOpenChange:P,children:e.jsxs(ge,{children:[e.jsxs(ve,{children:[e.jsx(fe,{children:w?"Edit Operation":"Add Operation"}),e.jsx(Ne,{children:w?"Update operation configuration":"Create a new SOAP operation. Operations define the methods available in a service."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Service *"}),e.jsxs(H,{value:C,onValueChange:G,disabled:!!w,children:[e.jsx(_,{children:e.jsx(Z,{placeholder:"Select service"})}),e.jsx(J,{children:c.map(s=>e.jsx($,{value:s.name,children:s.name},s.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Operation Name *"}),e.jsx(p,{value:b,onChange:s=>W(s.target.value),placeholder:"GetData"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Input Message (optional)"}),e.jsx(p,{value:ae,onChange:s=>k(s.target.value),placeholder:"GetDataRequest"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Output Message (optional)"}),e.jsx(p,{value:re,onChange:s=>E(s.target.value),placeholder:"GetDataResponse"})]})]}),e.jsxs(Se,{children:[e.jsx(u,{variant:"outline",onClick:()=>{P(!1),X(null),G(""),W(""),k(""),E("")},children:"Cancel"}),e.jsxs(u,{onClick:w?ze:Be,children:[w?"Save":"Add"," Operation"]})]})]})})]})})}export{ps as SOAPConfigAdvanced};

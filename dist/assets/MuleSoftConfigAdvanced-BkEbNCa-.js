import{u as ke,a as Pe,j as e,r as C,e as Y,S as I,C as g,h as f,i as y,m as p,B as j,T as Ae,b as Te,c as M,W as Z,A as Re,d as Ee,f as D,k as L,l as N,P as G,I as u,ab as ee,o as B,L as c,q as w,s as b,t as S,v as k,w as i,x as E,ah as se,a8 as ne}from"./index-D3yNmt2J.js";import{P as Q}from"./progress-C5wuyoJE.js";import{u as Fe}from"./use-toast-cj88Vypl.js";import{T as U}from"./textarea-DVH1WsgN.js";import{D as ae}from"./database-nbyY3UWd.js";import{C as te}from"./circle-check-big-BnZiflL6.js";import{G as qe}from"./git-branch-FLyvgkhv.js";function Ke({componentId:T}){const{nodes:le,updateNode:_}=ke(),{isRunning:$}=Pe(),{toast:F}=Fe(),q=le.find(t=>t.id===T);if(!q)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const P=q.data.config||{},J=P.organization||"archiphoenix-org",ce=P.environment||"production",d=P.applications||[],h=P.connectors||[],re=P.apiKey||"",[ie,K]=C.useState(null),[oe,W]=C.useState(null),[Ve,de]=C.useState(!1),[he,ue]=C.useState(null),[H,xe]=C.useState(null),[me,V]=C.useState(null),[je,z]=C.useState(null),o=C.useCallback(t=>{const s={...P,...t};_(T,{data:{...q.data,config:s}});try{Y.updateMuleSoftRoutingEngine(T)}catch(a){console.error("Failed to update MuleSoft routing engine:",a),F({title:"Update Error",description:"Failed to synchronize configuration with simulation engine",variant:"destructive"})}},[T,q,P,_,F]);C.useEffect(()=>{if(!$)return;const t=Y.getMuleSoftRoutingEngine(T);if(!t)return;const s=setInterval(()=>{const a=d.map(x=>{const m=t.getApplicationMetrics(x.name);return m?{...x,requestCount:m.requestCount,errorCount:m.errorCount,avgResponseTime:m.avgLatency}:x}),n=h.map(x=>{const m=t.getConnectorMetrics(x.name);if(m){let O="connected";return m.errorCount>0&&m.errorCount/m.requestCount>.1?O="error":(m.requestCount===0||Date.now()-m.lastRequestTime>6e4)&&(O="disconnected"),{...x,errorCount:m.errorCount,latency:m.avgLatency,healthStatus:O,lastOperationTime:m.lastRequestTime}}return x}),l=a.some((x,m)=>x.requestCount!==d[m]?.requestCount||x.errorCount!==d[m]?.errorCount||x.avgResponseTime!==d[m]?.avgResponseTime),r=n.some((x,m)=>x.errorCount!==h[m]?.errorCount||x.latency!==h[m]?.latency||x.healthStatus!==h[m]?.healthStatus);(l||r)&&o({applications:a,connectors:n})},2e3);return()=>clearInterval(s)},[T,$,d,h,o]);const ge=()=>{const t={name:"new-application",runtimeVersion:"4.6.0",workerCount:2,status:"stopped",connectors:[],errorStrategy:"continue",reconnectionStrategy:"exponential",auditLogging:!1,requestCount:0,errorCount:0,avgResponseTime:0};o({applications:[...d,t]})},pe=t=>{o({applications:d.filter((s,a)=>a!==t)})},A=(t,s,a)=>{const n=[...d];n[t]={...n[t],[s]:a},o({applications:n})},ve=()=>{const t={name:"new-connector",type:"api",enabled:!0};o({connectors:[...h,t]}),de(!1)},fe=t=>{o({connectors:h.filter((s,a)=>a!==t)})},X=(t,s,a)=>{const n=[...h];n[t]={...n[t],[s]:a},o({connectors:n})},ye=t=>{const s=d[t];if(!s)return;const a={id:`flow-${Date.now()}`,name:"new-flow",processors:[],errorHandlers:[]},n=[...d];n[t]={...s,flows:[...s.flows||[],a]},o({applications:n}),V(t),z(a.id),setShowFlowEditor(!0)},Ne=(t,s)=>{const a=d[t];if(!a)return;const n=[...d];n[t]={...a,flows:(a.flows||[]).filter(l=>l.id!==s)},o({applications:n}),F({title:"Flow Deleted",description:"Flow has been deleted"})},R=(t,s,a)=>{const n=d[t];if(!n)return;const l=[...d];l[t]={...n,flows:(n.flows||[]).map(r=>r.id===s?{...r,...a}:r)},o({applications:l})},Ce=(t,s,a)=>{const n=d[t];if(!n)return;const l={id:`processor-${Date.now()}`,type:a,config:{}},r=[...d];r[t]={...n,flows:(n.flows||[]).map(x=>x.id===s?{...x,processors:[...x.processors||[],l]}:x)},o({applications:r})},we=(t,s,a)=>{const n=d[t];if(!n)return;const l=[...d];l[t]={...n,flows:(n.flows||[]).map(r=>r.id===s?{...r,processors:(r.processors||[]).filter(x=>x.id!==a)}:r)},o({applications:l})},v=(t,s,a,n)=>{const l=d[t];if(!l)return;const r=[...d];r[t]={...l,flows:(l.flows||[]).map(x=>x.id===s?{...x,processors:(x.processors||[]).map(m=>m.id===a?{...m,...n}:m)}:x)},o({applications:r})},be=d.reduce((t,s)=>t+(s.requestCount||0),0);d.reduce((t,s)=>t+(s.errorCount||0),0);const Se=d.length>0?d.reduce((t,s)=>t+(s.avgResponseTime||0),0)/d.length:0;return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"MuleSoft Anypoint Platform"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Integration Applications"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure Mule applications, connectors and runtime settings"})]})}),e.jsx(I,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(g,{children:[e.jsx(f,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium",children:"Organization"})}),e.jsx(p,{children:e.jsx(j,{variant:"outline",children:J})})]}),e.jsxs(g,{children:[e.jsx(f,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium",children:"Applications"})}),e.jsx(p,{children:e.jsx("span",{className:"text-2xl font-bold",children:d.length})})]}),e.jsxs(g,{children:[e.jsx(f,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium",children:"Total Requests"})}),e.jsx(p,{children:e.jsx("span",{className:"text-2xl font-bold",children:be.toLocaleString()})})]}),e.jsxs(g,{children:[e.jsx(f,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium",children:"Avg Response Time"})}),e.jsxs(p,{children:[e.jsx("span",{className:"text-2xl font-bold",children:Se.toFixed(0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ms"})]})]})]}),e.jsxs(Ae,{defaultValue:"applications",className:"space-y-4",children:[e.jsxs(Te,{children:[e.jsxs(M,{value:"applications",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Applications (",d.length,")"]}),e.jsxs(M,{value:"connectors",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Connectors (",h.length,")"]}),e.jsxs(M,{value:"monitoring",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Monitoring"]}),e.jsxs(M,{value:"settings",children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(D,{value:"applications",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Mule Applications"}),e.jsx(L,{children:"Configure and manage integration applications"})]}),e.jsxs(N,{onClick:ge,size:"sm",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Create Application"]})]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-4",children:d.map((t,s)=>e.jsxs(g,{className:"border-l-4 border-l-blue-500",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[ie===s?e.jsx(u,{value:t.name,onChange:a=>A(s,"name",a.target.value),onBlur:()=>K(null),onKeyDown:a=>{a.key==="Enter"&&K(null)},className:"text-base font-semibold",autoFocus:!0}):e.jsx(y,{className:"text-base cursor-pointer hover:text-primary transition-colors",onClick:()=>K(s),children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.status==="running"?e.jsxs(j,{variant:"default",className:"gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),"Running"]}):t.status==="deploying"?e.jsxs(j,{variant:"outline",className:"gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),"Deploying"]}):e.jsx(j,{variant:"outline",children:"Stopped"}),e.jsxs(j,{variant:"outline",children:["v",t.runtimeVersion]}),e.jsxs(j,{variant:"outline",children:[t.workerCount," workers"]})]})]})]}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>pe(s),disabled:d.length===1,children:e.jsx(B,{className:"h-4 w-4"})})]})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requests"}),e.jsx("p",{className:"text-lg font-semibold",children:(t.requestCount||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Errors"}),e.jsx("p",{className:"text-lg font-semibold text-red-500",children:(t.errorCount||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Response Time"}),e.jsxs("p",{className:"text-lg font-semibold",children:[(t.avgResponseTime||0).toFixed(0)," ms"]})]})]}),e.jsx(I,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Runtime Version"}),e.jsx(u,{value:t.runtimeVersion,onChange:a=>A(s,"runtimeVersion",a.target.value),placeholder:"4.6.0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Worker Count"}),e.jsx(u,{type:"number",value:t.workerCount,onChange:a=>A(s,"workerCount",Number(a.target.value)),min:1,max:16})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Status"}),e.jsxs(w,{value:t.status||"stopped",onValueChange:a=>A(s,"status",a),children:[e.jsx(b,{children:e.jsx(S,{})}),e.jsxs(k,{children:[e.jsx(i,{value:"running",children:"Running"}),e.jsx(i,{value:"stopped",children:"Stopped"}),e.jsx(i,{value:"deploying",children:"Deploying"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Error Strategy"}),e.jsxs(w,{value:t.errorStrategy||"continue",onValueChange:a=>A(s,"errorStrategy",a),children:[e.jsx(b,{children:e.jsx(S,{})}),e.jsxs(k,{children:[e.jsx(i,{value:"continue",children:"Continue"}),e.jsx(i,{value:"rollback",children:"Rollback"}),e.jsx(i,{value:"propagate",children:"Propagate"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Reconnection Strategy"}),e.jsxs(w,{value:t.reconnectionStrategy||"exponential",onValueChange:a=>A(s,"reconnectionStrategy",a),children:[e.jsx(b,{children:e.jsx(S,{})}),e.jsxs(k,{children:[e.jsx(i,{value:"exponential",children:"Exponential"}),e.jsx(i,{value:"linear",children:"Linear"}),e.jsx(i,{value:"none",children:"None"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Audit Logging"}),e.jsx(E,{checked:t.auditLogging||!1,onCheckedChange:a=>A(s,"auditLogging",a)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Enabled Connectors"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.connectors?.map((a,n)=>e.jsx(j,{variant:"outline",children:a},n)),(!t.connectors||t.connectors.length===0)&&e.jsx("span",{className:"text-sm text-muted-foreground",children:"No connectors"})]})]}),e.jsx(I,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Flows"}),e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>ye(s),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Add Flow"]})]}),e.jsx("div",{className:"space-y-2",children:t.flows&&t.flows.length>0?t.flows.map(a=>{const n=he===a.id;return e.jsx(g,{className:"border-l-2 border-l-blue-400",children:e.jsxs(p,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(N,{size:"sm",variant:"ghost",onClick:()=>ue(n?null:a.id),className:"h-6 w-6 p-0",children:n?e.jsx(se,{className:"h-4 w-4"}):e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(qe,{className:"h-4 w-4 text-blue-400"}),me===s&&je===a.id?e.jsx(u,{value:a.name,onChange:l=>R(s,a.id,{name:l.target.value}),onBlur:()=>{V(null),z(null)},onKeyDown:l=>{l.key==="Enter"&&(V(null),z(null))},className:"font-medium h-7",autoFocus:!0}):e.jsx("span",{className:"font-medium cursor-pointer hover:text-primary transition-colors",onClick:()=>{V(s),z(a.id)},children:a.name}),e.jsxs(j,{variant:"outline",className:"text-xs",children:[a.processors?.length||0," processors"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(N,{size:"sm",variant:"ghost",onClick:()=>Ne(s,a.id),children:e.jsx(B,{className:"h-4 w-4"})})})]}),n&&e.jsxs("div",{className:"mt-4 space-y-4 pt-4 border-t",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Source"}),e.jsxs(w,{value:typeof a.source=="string"?a.source:a.source?.type||"none",onValueChange:l=>{l==="none"?R(s,a.id,{source:void 0}):R(s,a.id,{source:{type:l,config:{}}})},children:[e.jsx(b,{children:e.jsx(S,{})}),e.jsxs(k,{children:[e.jsx(i,{value:"none",children:"None"}),e.jsx(i,{value:"http-listener",children:"HTTP Listener"}),e.jsx(i,{value:"scheduler",children:"Scheduler"}),e.jsx(i,{value:"file-reader",children:"File Reader"}),e.jsx(i,{value:"connector",children:"Connector"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Processors"}),e.jsxs(w,{onValueChange:l=>Ce(s,a.id,l),children:[e.jsx(b,{className:"w-[200px]",children:e.jsx(S,{placeholder:"Add Processor"})}),e.jsxs(k,{children:[e.jsx(i,{value:"transform",children:"Transform"}),e.jsx(i,{value:"validate",children:"Validate"}),e.jsx(i,{value:"filter",children:"Filter"}),e.jsx(i,{value:"enrich",children:"Enrich"}),e.jsx(i,{value:"logger",children:"Logger"}),e.jsx(i,{value:"choice",children:"Choice Router"}),e.jsx(i,{value:"try",children:"Try Scope"}),e.jsx(i,{value:"set-variable",children:"Set Variable"}),e.jsx(i,{value:"set-payload",children:"Set Payload"}),e.jsx(i,{value:"async",children:"Async"})]})]})]}),e.jsx("div",{className:"space-y-2",children:a.processors&&a.processors.length>0?a.processors.map(l=>e.jsx(g,{className:"border-l-2 border-l-purple-400",children:e.jsxs(p,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"outline",children:l.type}),l.when&&e.jsxs(j,{variant:"secondary",children:["when: ",l.when]})]}),e.jsx(N,{size:"sm",variant:"ghost",onClick:()=>we(s,a.id,l.id),children:e.jsx(B,{className:"h-4 w-4"})})]}),l.type==="transform"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"DataWeave Expression"}),e.jsx(U,{value:l.dataweave||"",onChange:r=>v(s,a.id,l.id,{dataweave:r.target.value}),placeholder:`%dw 2.0
output application/json
---
payload`,className:"font-mono text-sm",rows:6})]}),l.type==="choice"&&l.when&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Condition (when)"}),e.jsx(u,{value:l.when,onChange:r=>v(s,a.id,l.id,{when:r.target.value}),placeholder:"payload.status == 'active'"})]}),l.type==="logger"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Log Message"}),e.jsx(u,{value:l.config?.message||"",onChange:r=>v(s,a.id,l.id,{config:{...l.config,message:r.target.value}}),placeholder:"Processing request..."})]}),l.type==="enrich"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Enrichment Source"}),e.jsxs(w,{value:l.config?.source||"connector",onValueChange:r=>v(s,a.id,l.id,{config:{...l.config,source:r}}),children:[e.jsx(b,{children:e.jsx(S,{})}),e.jsxs(k,{children:[e.jsx(i,{value:"connector",children:"Connector"}),e.jsx(i,{value:"variable",children:"Variable"}),e.jsx(i,{value:"payload",children:"Payload"})]})]}),l.config?.source==="connector"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{children:"Connector Name"}),e.jsx(u,{value:l.config?.connectorName||"",onChange:r=>v(s,a.id,l.id,{config:{...l.config,connectorName:r.target.value}}),placeholder:"connector-name"})]}),e.jsx(c,{children:"Target Variable"}),e.jsx(u,{value:l.config?.targetVariable||"",onChange:r=>v(s,a.id,l.id,{config:{...l.config,targetVariable:r.target.value}}),placeholder:"enrichedData"}),e.jsx(c,{children:"DataWeave Expression (optional)"}),e.jsx(U,{value:l.dataweave||"",onChange:r=>v(s,a.id,l.id,{dataweave:r.target.value}),placeholder:`%dw 2.0
output application/json
---
payload`,className:"font-mono text-sm",rows:4})]}),l.type==="set-variable"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Variable Name"}),e.jsx(u,{value:l.config?.name||"",onChange:r=>v(s,a.id,l.id,{config:{...l.config,name:r.target.value}}),placeholder:"myVariable"}),e.jsx(c,{children:"Variable Value"}),e.jsx(u,{value:l.config?.value||"",onChange:r=>v(s,a.id,l.id,{config:{...l.config,value:r.target.value}}),placeholder:"variable value or DataWeave expression"})]}),l.type==="set-payload"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Payload Value"}),e.jsx(U,{value:l.config?.value||"",onChange:r=>v(s,a.id,l.id,{config:{...l.config,value:r.target.value}}),placeholder:"Payload value or DataWeave expression",className:"font-mono text-sm",rows:4}),e.jsx(c,{children:"DataWeave Expression (optional, overrides value)"}),e.jsx(U,{value:l.dataweave||"",onChange:r=>v(s,a.id,l.id,{dataweave:r.target.value}),placeholder:`%dw 2.0
output application/json
---
payload`,className:"font-mono text-sm",rows:4})]})]})},l.id)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No processors configured"})})]}),e.jsx(I,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Target"}),e.jsxs(w,{value:typeof a.target=="string"?a.target:a.target?.type||"none",onValueChange:l=>{l==="none"?R(s,a.id,{target:void 0}):R(s,a.id,{target:{type:l,config:{}}})},children:[e.jsx(b,{children:e.jsx(S,{})}),e.jsxs(k,{children:[e.jsx(i,{value:"none",children:"None"}),e.jsx(i,{value:"http-request",children:"HTTP Request"}),e.jsx(i,{value:"database",children:"Database"}),e.jsx(i,{value:"file-writer",children:"File Writer"}),e.jsx(i,{value:"connector",children:"Connector"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{checked:a.async||!1,onCheckedChange:l=>R(s,a.id,{async:l})}),e.jsx(c,{children:"Async Processing"})]})]})]})},a.id)}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No flows configured"})})]})]})]},s))})})]})}),e.jsx(D,{value:"connectors",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Connectors"}),e.jsx(L,{children:"Manage integration connectors"})]}),e.jsxs(N,{onClick:ve,size:"sm",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Add Connector"]})]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-2",children:h.map((t,s)=>e.jsx(g,{className:"border-l-4 border-l-green-500",children:e.jsx(p,{className:"pt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(Z,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{className:"flex-1",children:[oe===s?e.jsx(u,{value:t.name,onChange:a=>X(s,"name",a.target.value),onBlur:()=>W(null),onKeyDown:a=>{a.key==="Enter"&&W(null)},className:"font-medium",autoFocus:!0}):e.jsx("p",{className:"font-medium cursor-pointer hover:text-primary transition-colors",onClick:()=>W(s),children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(j,{variant:"outline",children:t.type}),t.enabled?e.jsx(j,{variant:"default",children:"Enabled"}):e.jsx(j,{variant:"outline",children:"Disabled"}),t.healthStatus&&e.jsxs(j,{variant:t.healthStatus==="connected"?"default":"destructive",children:[t.healthStatus==="connected"?e.jsx(te,{className:"h-3 w-3 mr-1"}):e.jsx(ee,{className:"h-3 w-3 mr-1"}),t.healthStatus]})]}),(t.errorCount!==void 0||t.latency!==void 0)&&e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[t.errorCount!==void 0&&e.jsxs("span",{children:["Errors: ",t.errorCount]}),t.latency!==void 0&&e.jsxs("span",{children:["Latency: ",t.latency.toFixed(0),"ms"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{size:"sm",variant:"ghost",onClick:()=>xe(H===s?null:s),className:"h-6 w-6 p-0",children:H===s?e.jsx(se,{className:"h-4 w-4"}):e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(E,{checked:t.enabled,onCheckedChange:a=>X(s,"enabled",a)}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>fe(s),children:e.jsx(B,{className:"h-4 w-4"})})]})]}),H===s&&e.jsxs("div",{className:"mt-4 space-y-4 pt-4 border-t",children:[t.type==="database"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Connection String"}),e.jsx(u,{value:t.config?.connectionString||"",onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,connectionString:a.target.value}},o({connectors:n})},placeholder:"jdbc:postgresql://localhost:5432/mydb"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Connection Pool Size"}),e.jsx(u,{type:"number",value:t.config?.connectionPoolSize||10,onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,connectionPoolSize:parseInt(a.target.value)||10}},o({connectors:n})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Query Timeout (ms)"}),e.jsx(u,{type:"number",value:t.config?.queryTimeout||3e4,onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,queryTimeout:parseInt(a.target.value)||3e4}},o({connectors:n})}})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Retry Policy"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs",children:"Max Retries"}),e.jsx(u,{type:"number",value:t.config?.retryPolicy?.maxRetries||3,onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,retryPolicy:{...n[s].config?.retryPolicy,maxRetries:parseInt(a.target.value)||3}}},o({connectors:n})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs",children:"Retry Interval (ms)"}),e.jsx(u,{type:"number",value:t.config?.retryPolicy?.retryInterval||1e3,onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,retryPolicy:{...n[s].config?.retryPolicy,retryInterval:parseInt(a.target.value)||1e3}}},o({connectors:n})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs",children:"Exponential Backoff"}),e.jsx(E,{checked:t.config?.retryPolicy?.exponentialBackoff||!1,onCheckedChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,retryPolicy:{...n[s].config?.retryPolicy,exponentialBackoff:a}}},o({connectors:n})}})]})]})]})]}),t.type==="api"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Base URL"}),e.jsx(u,{value:t.config?.baseUrl||"",onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,baseUrl:a.target.value}},o({connectors:n})},placeholder:"https://api.example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Authentication Type"}),e.jsxs(w,{value:t.config?.authentication?.type||"none",onValueChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,authentication:{...n[s].config?.authentication,type:a}}},o({connectors:n})},children:[e.jsx(b,{children:e.jsx(S,{})}),e.jsxs(k,{children:[e.jsx(i,{value:"none",children:"None"}),e.jsx(i,{value:"oauth",children:"OAuth"}),e.jsx(i,{value:"basic",children:"Basic Auth"}),e.jsx(i,{value:"apikey",children:"API Key"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Timeout (ms)"}),e.jsx(u,{type:"number",value:t.config?.timeout||3e4,onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,timeout:parseInt(a.target.value)||3e4}},o({connectors:n})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Retry Policy"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs",children:"Max Retries"}),e.jsx(u,{type:"number",value:t.config?.retryPolicy?.maxRetries||3,onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,retryPolicy:{...n[s].config?.retryPolicy,maxRetries:parseInt(a.target.value)||3}}},o({connectors:n})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs",children:"Retry Interval (ms)"}),e.jsx(u,{type:"number",value:t.config?.retryPolicy?.retryInterval||1e3,onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,retryPolicy:{...n[s].config?.retryPolicy,retryInterval:parseInt(a.target.value)||1e3}}},o({connectors:n})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs",children:"Exponential Backoff"}),e.jsx(E,{checked:t.config?.retryPolicy?.exponentialBackoff||!1,onCheckedChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,retryPolicy:{...n[s].config?.retryPolicy,exponentialBackoff:a}}},o({connectors:n})}})]})]})]})]}),t.type==="messaging"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Broker URL"}),e.jsx(u,{value:t.config?.brokerUrl||"",onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,brokerUrl:a.target.value}},o({connectors:n})},placeholder:"tcp://localhost:61616"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Queue Name"}),e.jsx(u,{value:t.config?.queueName||"",onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,queueName:a.target.value}},o({connectors:n})},placeholder:"my-queue"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Topic Name"}),e.jsx(u,{value:t.config?.topicName||"",onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,topicName:a.target.value}},o({connectors:n})},placeholder:"my-topic"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Acknowledgment Mode"}),e.jsxs(w,{value:t.config?.acknowledgmentMode||"auto",onValueChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,acknowledgmentMode:a}},o({connectors:n})},children:[e.jsx(b,{children:e.jsx(S,{})}),e.jsxs(k,{children:[e.jsx(i,{value:"auto",children:"Auto"}),e.jsx(i,{value:"manual",children:"Manual"})]})]})]})]}),t.type==="file"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Path"}),e.jsx(u,{value:t.config?.path||"",onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,path:a.target.value}},o({connectors:n})},placeholder:"/path/to/files"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Pattern"}),e.jsx(u,{value:t.config?.pattern||"",onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,pattern:a.target.value}},o({connectors:n})},placeholder:"*.txt"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Encoding"}),e.jsx(u,{value:t.config?.encoding||"UTF-8",onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,encoding:a.target.value}},o({connectors:n})}})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Buffer Size (bytes)"}),e.jsx(u,{type:"number",value:t.config?.bufferSize||8192,onChange:a=>{const n=[...h];n[s]={...n[s],config:{...n[s].config,bufferSize:parseInt(a.target.value)||8192}},o({connectors:n})}})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{variant:"outline",size:"sm",onClick:()=>{F({title:"Connection Test",description:"Connection test completed successfully"})},children:"Test Connection"})})]})]})})},s))})})]})}),e.jsx(D,{value:"monitoring",className:"space-y-4",children:e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsx(y,{children:"Application Monitoring"}),e.jsx(L,{children:"Monitor application performance and health"})]}),e.jsx(p,{children:e.jsx("div",{className:"space-y-4",children:d.map((t,s)=>e.jsxs(g,{className:"border-l-4 border-l-purple-500",children:[e.jsx(f,{className:"pb-3",children:e.jsx(y,{className:"text-base",children:t.name})}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold",children:(t.requestCount||0).toLocaleString()}),e.jsx(Q,{value:Math.min((t.requestCount||0)/1e4*100,100),className:"h-2 mt-2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Errors"}),e.jsx("p",{className:"text-2xl font-bold text-red-500",children:(t.errorCount||0).toLocaleString()}),e.jsx(Q,{value:Math.min((t.errorCount||0)/100*100,100),className:"h-2 mt-2"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Avg Response Time"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(t.avgResponseTime||0).toFixed(0)," ms"]}),e.jsx(Q,{value:Math.min((t.avgResponseTime||0)/1e3*100,100),className:"h-2 mt-2"})]})]})})]},s))})})]})}),e.jsx(D,{value:"settings",className:"space-y-4",children:e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsx(y,{children:"Anypoint Platform Settings"}),e.jsx(L,{children:"Configure organization and API access"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Organization"}),e.jsx(u,{value:J,onChange:t=>o({organization:t.target.value}),placeholder:"my-organization"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Environment"}),e.jsx(u,{value:ce,onChange:t=>o({environment:t.target.value}),placeholder:"production"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"API Key"}),e.jsx(u,{type:"password",value:re,onChange:t=>o({apiKey:t.target.value}),placeholder:"Enter Anypoint API key"})]})]})]})})]})]})})}export{Ke as MuleSoftConfigAdvanced};

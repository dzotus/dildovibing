import{u as pe,j as e,r as j,l as p,S as R,C as v,h as f,i as N,m as y,T as ge,b as je,c as P,A as ve,d as G,f as z,k as O,P as W,I as o,B as u,x as k,ai as fe,ae as Ne,o as ye,L as r,ax as be,y as we,z as Ce,E as Re,G as ke,H as Se,aA as Ue,am as J,q as Ie,s as De,t as Te,v as Ee,w as X,J as Ae}from"./index-HDGrDyRq.js";import{T as Fe}from"./textarea-CjQgIquO.js";import{A as Le,b as Be}from"./alert-CU-OEAby.js";import{R as He}from"./refresh-ccw-BUKvY8S7.js";import{W as I}from"./webhook-DFysJq-y.js";import{S as Q}from"./send-CGm1BGnd.js";import{C as Y}from"./circle-check-big-3lbqtoL4.js";import{C as qe}from"./clock-3yiD5iuE.js";function Me({componentId:V}){const{nodes:Z,updateNode:_}=pe(),D=Z.find(s=>s.id===V);if(!D)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const i=D.data.config||{},h=i.relays||[],b=i.deliveries||[],ee=i.totalRelays||h.length,se=i.totalDeliveries||b.length,te=i.successRate||(b.length>0?b.filter(s=>s.status==="success").length/b.length*100:0),[ae,T]=j.useState(!1),[w,m]=j.useState(null),[E,re]=j.useState(null),[A,g]=j.useState(null),[t,d]=j.useState({name:"",sourceUrl:"",targetUrl:"",enabled:!0,events:[],signatureSecret:"",signatureHeader:"X-Signature",allowedIps:[],transformTemplate:"",maxRetryAttempts:i.maxRetryAttempts||3,retryDelay:i.retryDelay||5,timeout:i.timeout||30,retryBackoff:"exponential"}),[S,F]=j.useState(""),[C,L]=j.useState(""),[l,c]=j.useState({}),x=s=>{_(V,{data:{...D.data,config:{...i,...s}}})},U=s=>{try{return new URL(s),!0}catch{return!1}},le=s=>/^(\d{1,3}\.){3}\d{1,3}(\/\d{1,2})?$/.test(s),ne=()=>{d({name:"",sourceUrl:"",targetUrl:"",enabled:!0,events:[],signatureSecret:"",signatureHeader:"X-Signature",allowedIps:[],transformTemplate:"",maxRetryAttempts:i.maxRetryAttempts||3,retryDelay:i.retryDelay||5,timeout:i.timeout||30,retryBackoff:"exponential"}),c({}),T(!0)},ie=s=>{d({name:s.name,sourceUrl:s.sourceUrl,targetUrl:s.targetUrl,enabled:s.enabled,events:s.events||[],signatureSecret:s.signatureSecret||"",signatureHeader:s.signatureHeader||"X-Signature",allowedIps:s.allowedIps||[],transformTemplate:s.transformTemplate||"",maxRetryAttempts:s.maxRetryAttempts||i.maxRetryAttempts||3,retryDelay:s.retryDelay||i.retryDelay||5,timeout:s.timeout||i.timeout||30,retryBackoff:s.retryBackoff||"exponential"}),c({}),m(s.id),T(!0)},B=()=>{T(!1),m(null),c({}),F(""),L("")},ce=()=>{const s={};if(t.name?.trim()||(s.name="Name is required"),t.sourceUrl?.trim()?U(t.sourceUrl)||(s.sourceUrl="Invalid URL format"):s.sourceUrl="Source URL is required",t.targetUrl?.trim()?U(t.targetUrl)||(s.targetUrl="Invalid URL format"):s.targetUrl="Target URL is required",Object.keys(s).length>0){c(s);return}if(w){const a=h.map(n=>n.id===w?{...n,...t,events:t.events||[],allowedIps:t.allowedIps||[]}:n);x({relays:a})}else{const a={id:`relay-${Date.now()}`,name:t.name,sourceUrl:t.sourceUrl,targetUrl:t.targetUrl,enabled:t.enabled??!0,events:t.events||[],signatureSecret:t.signatureSecret,signatureHeader:t.signatureHeader||"X-Signature",allowedIps:t.allowedIps||[],transformTemplate:t.transformTemplate,maxRetryAttempts:t.maxRetryAttempts,retryDelay:t.retryDelay,timeout:t.timeout,retryBackoff:t.retryBackoff||"exponential"};x({relays:[...h,a]})}B()},de=s=>{x({relays:h.filter(a=>a.id!==s)})},oe=s=>{const a=h.map(n=>n.id===s?{...n,enabled:!n.enabled}:n);x({relays:a})},H=(s,a,n)=>{const he=h.map(q=>q.id===s?{...q,[a]:n}:q);x({relays:he})},K=()=>{S.trim()&&!t.events?.includes(S.trim())&&(d({...t,events:[...t.events||[],S.trim()]}),F(""))},xe=s=>{d({...t,events:t.events?.filter(a=>a!==s)||[]})},$=()=>{if(C.trim()){if(!le(C.trim())){c({...l,allowedIps:"Invalid IP/CIDR format (e.g., 192.168.1.0/24)"});return}t.allowedIps?.includes(C.trim())||(d({...t,allowedIps:[...t.allowedIps||[],C.trim()]}),L(""),c({...l,allowedIps:""}))}},me=s=>{d({...t,allowedIps:t.allowedIps?.filter(a=>a!==s)||[]})},ue=s=>{const a={...s,id:`relay-${Date.now()}`,name:`${s.name} (Copy)`};x({relays:[...h,a]})},M=s=>{switch(s){case"success":return"bg-green-500";case"failed":return"bg-red-500";case"pending":return"bg-yellow-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Webhook Relay"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Webhook Relay Service"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Relay and forward webhook events between services"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(p,{variant:"outline",size:"sm",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(R,{}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(v,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Relays"}),e.jsx(I,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:ee}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"configured"})]})})]}),e.jsxs(v,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Deliveries"}),e.jsx(Q,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:se}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"total"})]})})]}),e.jsxs(v,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsx(Y,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(y,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[te.toFixed(1),"%"]})})})]})]}),e.jsxs(ge,{defaultValue:"relays",className:"space-y-4",children:[e.jsxs(je,{children:[e.jsxs(P,{value:"relays",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Relays (",h.length,")"]}),e.jsxs(P,{value:"deliveries",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Deliveries (",b.length,")"]}),e.jsxs(P,{value:"settings",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(z,{value:"relays",className:"space-y-4",children:e.jsxs(v,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Webhook Relays"}),e.jsx(O,{children:"Configure webhook relay rules"})]}),e.jsxs(p,{onClick:ne,size:"sm",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Create Relay"]})]})}),e.jsx(y,{children:e.jsx("div",{className:"space-y-4",children:h.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(I,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No relays configured"}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Create Relay" to add your first webhook relay'})]}):h.map(s=>e.jsxs(v,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(I,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[A==="name"&&w===s.id?e.jsx(o,{value:s.name,onChange:a=>H(s.id,"name",a.target.value),onBlur:()=>{g(null),m(null)},onKeyDown:a=>{(a.key==="Enter"||a.key==="Escape")&&(g(null),m(null))},className:"font-semibold text-lg",autoFocus:!0}):e.jsx(N,{className:"text-lg font-semibold cursor-pointer hover:text-primary transition-colors",onClick:()=>{g("name"),m(s.id)},children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[e.jsx(u,{variant:s.enabled?"default":"outline",children:s.enabled?"Enabled":"Disabled"}),s.successRate!==void 0&&e.jsxs(u,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300",children:[s.successRate.toFixed(1),"% success"]}),s.requests!==void 0&&e.jsxs(u,{variant:"outline",children:[s.requests," requests"]}),s.events&&s.events.length>0&&e.jsxs(u,{variant:"outline",className:"text-xs",children:[s.events.length," event",s.events.length!==1?"s":""]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{checked:s.enabled,onCheckedChange:()=>oe(s.id)}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>ie(s),className:"hover:bg-primary/10",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>ue(s),className:"hover:bg-primary/10",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>de(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(ye,{className:"h-4 w-4"})})]})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Source URL"}),A==="sourceUrl"&&w===s.id?e.jsx(o,{value:s.sourceUrl,onChange:a=>{const n=a.target.value;U(n)||n===""?(H(s.id,"sourceUrl",n),c({})):c({sourceUrl:"Invalid URL format"})},onBlur:()=>{g(null),m(null),c({})},onKeyDown:a=>{(a.key==="Enter"||a.key==="Escape")&&(g(null),m(null),c({}))},className:"font-mono text-xs",autoFocus:!0}):e.jsx("div",{className:"font-mono text-xs text-foreground cursor-pointer hover:text-primary transition-colors p-1 rounded",onClick:()=>{g("sourceUrl"),m(s.id)},children:s.sourceUrl})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Target URL"}),A==="targetUrl"&&w===s.id?e.jsx(o,{value:s.targetUrl,onChange:a=>{const n=a.target.value;U(n)||n===""?(H(s.id,"targetUrl",n),c({})):c({targetUrl:"Invalid URL format"})},onBlur:()=>{g(null),m(null),c({})},onKeyDown:a=>{(a.key==="Enter"||a.key==="Escape")&&(g(null),m(null),c({}))},className:"font-mono text-xs",autoFocus:!0}):e.jsx("div",{className:"font-mono text-xs text-foreground cursor-pointer hover:text-primary transition-colors p-1 rounded",onClick:()=>{g("targetUrl"),m(s.id)},children:s.targetUrl})]})]}),s.events&&s.events.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Events"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.events.map((a,n)=>e.jsx(u,{variant:"outline",className:"text-xs",children:a},n))})]}),(s.signatureSecret||s.allowedIps?.length||s.transformTemplate)&&e.jsxs("div",{className:"pt-2 border-t",children:[e.jsxs(p,{variant:"ghost",size:"sm",onClick:()=>re(E===s.id?null:s.id),className:"w-full justify-start",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),E===s.id?"Hide":"Show"," Advanced Settings"]}),E===s.id&&e.jsxs("div",{className:"mt-3 space-y-3 pl-6 border-l-2",children:[s.signatureSecret&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Signature Header"}),e.jsx("div",{className:"text-xs font-mono",children:s.signatureHeader||"X-Signature"})]}),s.allowedIps&&s.allowedIps.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Allowed IPs"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.allowedIps.map((a,n)=>e.jsx(u,{variant:"outline",className:"text-xs",children:a},n))})]}),s.transformTemplate&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Transform Template"}),e.jsx("pre",{className:"text-xs font-mono bg-muted p-2 rounded max-h-20 overflow-auto",children:s.transformTemplate})]})]})]})]})})]},s.id))})})]})}),e.jsx(z,{value:"deliveries",className:"space-y-4",children:e.jsxs(v,{children:[e.jsxs(f,{children:[e.jsx(N,{children:"Delivery History"}),e.jsx(O,{children:"Webhook delivery attempts and results"})]}),e.jsx(y,{children:b.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Q,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No delivery history"}),e.jsx("p",{className:"text-sm mt-2",children:"Delivery attempts will appear here during simulation"})]}):e.jsx("div",{className:"space-y-4",children:b.map(s=>e.jsxs(v,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(f,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${M(s.status)}/20`,children:s.status==="success"?e.jsx(Y,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):s.status==="failed"?e.jsx(be,{className:"h-5 w-5 text-red-600 dark:text-red-400"}):e.jsx(qe,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx(N,{className:"text-lg font-semibold",children:s.event}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(u,{variant:"outline",className:M(s.status),children:s.status}),s.attempts&&e.jsxs(u,{variant:"outline",children:["Attempts: ",s.attempts]}),s.responseCode&&e.jsxs(u,{variant:"outline",children:["HTTP ",s.responseCode]})]})]})]})})}),e.jsxs(y,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Payload"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto max-h-40 overflow-y-auto",children:s.payload})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(s.timestamp).toLocaleString()})]})]},s.id))})})]})}),e.jsx(z,{value:"settings",className:"space-y-4",children:e.jsxs(v,{children:[e.jsxs(f,{children:[e.jsx(N,{children:"Webhook Relay Settings"}),e.jsx(O,{children:"Global relay configuration"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:"Enable Retry on Failure"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically retry failed deliveries"})]}),e.jsx(k,{checked:i.enableRetryOnFailure??!0,onCheckedChange:s=>x({enableRetryOnFailure:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:"Enable Signature Verification"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Verify webhook signatures"})]}),e.jsx(k,{checked:i.enableSignatureVerification??!0,onCheckedChange:s=>x({enableSignatureVerification:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:"Enable Request Logging"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Log all webhook requests"})]}),e.jsx(k,{checked:i.enableRequestLogging??!0,onCheckedChange:s=>x({enableRequestLogging:s})})]}),e.jsx(R,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Max Retry Attempts"}),e.jsx(o,{type:"number",value:i.maxRetryAttempts??3,onChange:s=>x({maxRetryAttempts:parseInt(s.target.value)||3}),min:1,max:10}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Default number of retry attempts for failed deliveries"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Retry Delay (seconds)"}),e.jsx(o,{type:"number",value:i.retryDelay??5,onChange:s=>x({retryDelay:parseInt(s.target.value)||5}),min:1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Base delay between retry attempts"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Timeout (seconds)"}),e.jsx(o,{type:"number",value:i.timeout??30,onChange:s=>x({timeout:parseInt(s.target.value)||30}),min:1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Request timeout for webhook delivery"})]})]})]})})]})]}),e.jsx(we,{open:ae,onOpenChange:B,children:e.jsxs(Ce,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Re,{children:[e.jsx(ke,{children:w?"Edit Relay":"Create New Relay"}),e.jsx(Se,{children:"Configure webhook relay source, target, and advanced settings"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[Object.keys(l).length>0&&e.jsxs(Le,{variant:"destructive",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx(Be,{children:Object.values(l).filter(Boolean).join(", ")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"relay-name",children:"Name *"}),e.jsx(o,{id:"relay-name",value:t.name||"",onChange:s=>{d({...t,name:s.target.value}),l.name&&c({...l,name:""})},placeholder:"My Webhook Relay",className:l.name?"border-destructive":""}),l.name&&e.jsx("p",{className:"text-xs text-destructive",children:l.name})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"source-url",children:"Source URL *"}),e.jsx(o,{id:"source-url",type:"url",value:t.sourceUrl||"",onChange:s=>{const a=s.target.value;d({...t,sourceUrl:a}),l.sourceUrl&&c({...l,sourceUrl:""})},placeholder:"https://source.example.com/webhooks",className:l.sourceUrl?"border-destructive":""}),l.sourceUrl&&e.jsx("p",{className:"text-xs text-destructive",children:l.sourceUrl})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"target-url",children:"Target URL *"}),e.jsx(o,{id:"target-url",type:"url",value:t.targetUrl||"",onChange:s=>{const a=s.target.value;d({...t,targetUrl:a}),l.targetUrl&&c({...l,targetUrl:""})},placeholder:"https://target.example.com/webhooks",className:l.targetUrl?"border-destructive":""}),l.targetUrl&&e.jsx("p",{className:"text-xs text-destructive",children:l.targetUrl})]})]}),e.jsx(R,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Events"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{value:S,onChange:s=>F(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),K())},placeholder:"event.name"}),e.jsx(p,{type:"button",onClick:K,size:"sm",children:e.jsx(W,{className:"h-4 w-4"})})]}),t.events&&t.events.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.events.map((s,a)=>e.jsxs(u,{variant:"outline",className:"text-xs",children:[s,e.jsx("button",{type:"button",onClick:()=>xe(s),className:"ml-2 hover:text-destructive",children:e.jsx(J,{className:"h-3 w-3"})})]},a))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: Filter events by name"})]}),e.jsx(R,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{children:"Enabled"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable this relay"})]}),e.jsx(k,{checked:t.enabled??!0,onCheckedChange:s=>d({...t,enabled:s})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"signature-secret",children:"Signature Secret"}),e.jsx(o,{id:"signature-secret",type:"password",value:t.signatureSecret||"",onChange:s=>d({...t,signatureSecret:s.target.value}),placeholder:"secret-key"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Secret for HMAC signature verification"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"signature-header",children:"Signature Header"}),e.jsx(o,{id:"signature-header",value:t.signatureHeader||"X-Signature",onChange:s=>d({...t,signatureHeader:s.target.value}),placeholder:"X-Signature"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Allowed IPs (CIDR)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{value:C,onChange:s=>{L(s.target.value),l.allowedIps&&c({...l,allowedIps:""})},onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),$())},placeholder:"192.168.1.0/24",className:l.allowedIps?"border-destructive":""}),e.jsx(p,{type:"button",onClick:$,size:"sm",children:e.jsx(W,{className:"h-4 w-4"})})]}),l.allowedIps&&e.jsx("p",{className:"text-xs text-destructive",children:l.allowedIps}),t.allowedIps&&t.allowedIps.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.allowedIps.map((s,a)=>e.jsxs(u,{variant:"outline",className:"text-xs",children:[s,e.jsx("button",{type:"button",onClick:()=>me(s),className:"ml-2 hover:text-destructive",children:e.jsx(J,{className:"h-3 w-3"})})]},a))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: Restrict access by IP address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"transform-template",children:"Transform Template"}),e.jsx(Fe,{id:"transform-template",value:t.transformTemplate||"",onChange:s=>d({...t,transformTemplate:s.target.value}),placeholder:'{ "payload": {{raw}} }',className:"font-mono text-xs",rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: Transform payload before forwarding"})]}),e.jsx(R,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"max-retry",children:"Max Retry Attempts"}),e.jsx(o,{id:"max-retry",type:"number",value:t.maxRetryAttempts||3,onChange:s=>d({...t,maxRetryAttempts:parseInt(s.target.value)||3}),min:1,max:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"retry-delay",children:"Retry Delay (s)"}),e.jsx(o,{id:"retry-delay",type:"number",value:t.retryDelay||5,onChange:s=>d({...t,retryDelay:parseInt(s.target.value)||5}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"timeout",children:"Timeout (s)"}),e.jsx(o,{id:"timeout",type:"number",value:t.timeout||30,onChange:s=>d({...t,timeout:parseInt(s.target.value)||30}),min:1})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"retry-backoff",children:"Retry Backoff Strategy"}),e.jsxs(Ie,{value:t.retryBackoff||"exponential",onValueChange:s=>d({...t,retryBackoff:s}),children:[e.jsx(De,{id:"retry-backoff",children:e.jsx(Te,{})}),e.jsxs(Ee,{children:[e.jsx(X,{value:"exponential",children:"Exponential"}),e.jsx(X,{value:"linear",children:"Linear"}),e.jsx(X,{value:"constant",children:"Constant"})]})]})]})]})]}),e.jsxs(Ae,{children:[e.jsx(p,{variant:"outline",onClick:B,children:"Cancel"}),e.jsx(p,{onClick:ce,children:w?"Save Changes":"Create Relay"})]})]})})]})}export{Me as WebhookRelayConfigAdvanced};

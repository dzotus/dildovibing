const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/KafkaConfigAdvanced-Dvys2bqs.js","assets/progress-zyfouKmR.js","assets/textarea-DbhW0zkJ.js","assets/database-CTo8fyrd.js","assets/users-C_Mb_lDY.js","assets/shield-pnIeGi0d.js","assets/RabbitMQConfigAdvanced-C_ZnryOu.js","assets/usePortValidation-DnH6EGea.js","assets/requiredFields-BLgUUVkB.js","assets/toast-DIwbB4rV.js","assets/message-square-Dm9_g9PW.js","assets/arrow-right-left-BJNL4Amb.js","assets/key-B6QhA7BP.js","assets/PostgreSQLConfigAdvanced-CNrQTAeD.js","assets/table-DxlQJB1V.js","assets/MongoDBConfigAdvanced-B3_vac9_.js","assets/RedisConfigAdvanced-DtEZ_xvm.js","assets/ElasticsearchConfigAdvanced-BlZBHRHg.js","assets/refresh-ccw-BqMDkn9s.js","assets/cloud-CWbIka4E.js","assets/code-CeqdEWNh.js","assets/CassandraConfigAdvanced-C-5EazNN.js","assets/ClickHouseConfigAdvanced-EJ9aFnjy.js","assets/chart-column-Cfk5dXNs.js","assets/SnowflakeConfigAdvanced-BK-bLb0G.js","assets/S3DataLakeConfigAdvanced-CymRnnHw.js","assets/folder-xMpTiV1d.js","assets/NginxConfigAdvanced-BlRcmvxr.js","assets/globe-OJLibZCs.js","assets/server-BW8g7Bkz.js","assets/RestApiConfigAdvanced-BeGsAyne.js","assets/GRPCConfigAdvanced-I91ORDdx.js","assets/circle-check-big-DUY3LvWD.js","assets/WebSocketConfigAdvanced-CAtiYcXi.js","assets/send-C7DgHlV7.js","assets/GraphQLConfigAdvanced-DkY7yHbv.js","assets/SOAPConfigAdvanced-DErt3G0U.js","assets/WebhookConfigAdvanced-UenIzdAP.js","assets/webhook-B7CcXKjk.js","assets/clock-DApKQh07.js","assets/DockerK8sConfigAdvanced-BM2-QZlZ.js","assets/HAProxyConfigAdvanced-C5RLssIJ.js","assets/trending-up-00gF8lMA.js","assets/TraefikConfigAdvanced-4_rJVCQz.js","assets/route-Cg5574oQ.js","assets/EnvoyConfigAdvanced-p9I53Toe.js","assets/ActiveMQConfigAdvanced-Y0uhxPng.js","assets/alert-CO2R4i9G.js","assets/AWSSQSConfigAdvanced-CdOZWyca.js","assets/AzureServiceBusConfigAdvanced-DHXeiD0G.js","assets/GCPPubSubConfigAdvanced-CApPyGyK.js","assets/KongConfigAdvanced-D7O_k2p1.js","assets/ApigeeConfigAdvanced-B44FO1S3.js","assets/MuleSoftConfigAdvanced-CsvROC4R.js","assets/GraphQLGatewayConfigAdvanced-COLy0uoc.js","assets/BFFServiceConfigAdvanced-DpxRkdkv.js","assets/WebhookRelayConfigAdvanced-CqCeBmB9.js","assets/PrometheusConfigAdvanced-KFJ36LxC.js","assets/GrafanaConfigAdvanced-D9xhcQuF.js","assets/JaegerConfigAdvanced-CCvlTg5c.js","assets/git-branch-CHGpZsoT.js","assets/OpenTelemetryCollectorConfigAdvanced-DXkHmQdr.js","assets/PagerDutyConfigAdvanced-AYi0_ItJ.js","assets/KeycloakConfigAdvanced-Bbmc56EY.js","assets/lock-BmG321ZH.js","assets/WAFConfigAdvanced-rQqAEeM2.js","assets/SecretsVaultConfigAdvanced-EHu2g6Bv.js","assets/IDSIPSConfigAdvanced-BTvJrjfz.js","assets/ban-CgyxhKqb.js","assets/FirewallConfigAdvanced-D5r9scpZ.js","assets/JenkinsConfigAdvanced-BVE2wl7d.js","assets/package-C36Vo6OY.js","assets/GitLabCIConfigAdvanced-Lsk8ixuz.js","assets/ArgoCDConfigAdvanced-BhrHdZes.js","assets/HarborConfigAdvanced-kW2VmH1u.js","assets/TerraformConfigAdvanced-CnPyFDD0.js","assets/AnsibleConfigAdvanced-BBtusjy_.js","assets/IstioConfigAdvanced-C22HjPMl.js","assets/ServiceMeshConfigAdvanced-CaQyZNhH.js","assets/APIGatewayConfigAdvanced-BTdqbH-K.js","assets/VPNConfigAdvanced-CtUVApK_.js","assets/CDNConfigAdvanced-p8SAWhdI.js","assets/SparkConfigAdvanced-CJzQXXDl.js","assets/TensorFlowServingConfigAdvanced-BvE4KWQk.js","assets/PyTorchServeConfigAdvanced-DkZOi47y.js","assets/FeatureStoreConfigAdvanced-KkGmEVop.js","assets/MLflowConfigAdvanced-TkPl7Dek.js","assets/CRMConfigAdvanced-CwzekVqw.js","assets/dollar-sign-Bb_1GF7Q.js","assets/building-CiSf1abf.js","assets/ERPConfigAdvanced-CWWbXHaV.js","assets/RPABotConfigAdvanced-D998mG-f.js","assets/BPMNEngineConfigAdvanced-B6k_GZE2.js","assets/PaymentGatewayConfigAdvanced-CM1V7ur2.js"])))=>i.map(i=>d[i]);
function ZM(a,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in a)){const l=Object.getOwnPropertyDescriptor(s,r);l&&Object.defineProperty(a,r,l.get?l:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();var tL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var _f={exports:{}},mi={};var xv;function JM(){if(xv)return mi;xv=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:a,type:s,key:c,ref:r!==void 0?r:null,props:l}}return mi.Fragment=t,mi.jsx=n,mi.jsxs=n,mi}var wv;function eE(){return wv||(wv=1,_f.exports=JM()),_f.exports}var f=eE(),zf={exports:{}},ze={};var Cv;function tE(){if(Cv)return ze;Cv=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function w(_){return _===null||typeof _!="object"?null:(_=v&&_[v]||_["@@iterator"],typeof _=="function"?_:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,R={};function E(_,$,X){this.props=_,this.context=$,this.refs=R,this.updater=X||S}E.prototype.isReactComponent={},E.prototype.setState=function(_,$){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,$,"setState")},E.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function j(){}j.prototype=E.prototype;function N(_,$,X){this.props=_,this.context=$,this.refs=R,this.updater=X||S}var T=N.prototype=new j;T.constructor=N,C(T,E.prototype),T.isPureReactComponent=!0;var k=Array.isArray;function U(){}var I={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function te(_,$,X){var W=X.ref;return{$$typeof:a,type:_,key:$,ref:W!==void 0?W:null,props:X}}function se(_,$){return te(_.type,$,_.props)}function le(_){return typeof _=="object"&&_!==null&&_.$$typeof===a}function ee(_){var $={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(X){return $[X]})}var oe=/\/+/g;function ce(_,$){return typeof _=="object"&&_!==null&&_.key!=null?ee(""+_.key):$.toString(36)}function ue(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(U,U):(_.status="pending",_.then(function($){_.status==="pending"&&(_.status="fulfilled",_.value=$)},function($){_.status==="pending"&&(_.status="rejected",_.reason=$)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function z(_,$,X,W,F){var ae=typeof _;(ae==="undefined"||ae==="boolean")&&(_=null);var B=!1;if(_===null)B=!0;else switch(ae){case"bigint":case"string":case"number":B=!0;break;case"object":switch(_.$$typeof){case a:case t:B=!0;break;case g:return B=_._init,z(B(_._payload),$,X,W,F)}}if(B)return F=F(_),B=W===""?"."+ce(_,0):W,k(F)?(X="",B!=null&&(X=B.replace(oe,"$&/")+"/"),z(F,$,X,"",function(me){return me})):F!=null&&(le(F)&&(F=se(F,X+(F.key==null||_&&_.key===F.key?"":(""+F.key).replace(oe,"$&/")+"/")+B)),$.push(F)),1;B=0;var V=W===""?".":W+":";if(k(_))for(var pe=0;pe<_.length;pe++)W=_[pe],ae=V+ce(W,pe),B+=z(W,$,X,ae,F);else if(pe=w(_),typeof pe=="function")for(_=pe.call(_),pe=0;!(W=_.next()).done;)W=W.value,ae=V+ce(W,pe++),B+=z(W,$,X,ae,F);else if(ae==="object"){if(typeof _.then=="function")return z(ue(_),$,X,W,F);throw $=String(_),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return B}function D(_,$,X){if(_==null)return _;var W=[],F=0;return z(_,W,"","",function(ae){return $.call(X,ae,F++)}),W}function L(_){if(_._status===-1){var $=_._result;$=$(),$.then(function(X){(_._status===0||_._status===-1)&&(_._status=1,_._result=X)},function(X){(_._status===0||_._status===-1)&&(_._status=2,_._result=X)}),_._status===-1&&(_._status=0,_._result=$)}if(_._status===1)return _._result.default;throw _._result}var Y=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},he={map:D,forEach:function(_,$,X){D(_,function(){$.apply(this,arguments)},X)},count:function(_){var $=0;return D(_,function(){$++}),$},toArray:function(_){return D(_,function($){return $})||[]},only:function(_){if(!le(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return ze.Activity=m,ze.Children=he,ze.Component=E,ze.Fragment=n,ze.Profiler=r,ze.PureComponent=N,ze.StrictMode=s,ze.Suspense=h,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,ze.__COMPILER_RUNTIME={__proto__:null,c:function(_){return I.H.useMemoCache(_)}},ze.cache=function(_){return function(){return _.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(_,$,X){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var W=C({},_.props),F=_.key;if($!=null)for(ae in $.key!==void 0&&(F=""+$.key),$)!q.call($,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&$.ref===void 0||(W[ae]=$[ae]);var ae=arguments.length-2;if(ae===1)W.children=X;else if(1<ae){for(var B=Array(ae),V=0;V<ae;V++)B[V]=arguments[V+2];W.children=B}return te(_.type,F,W)},ze.createContext=function(_){return _={$$typeof:c,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:l,_context:_},_},ze.createElement=function(_,$,X){var W,F={},ae=null;if($!=null)for(W in $.key!==void 0&&(ae=""+$.key),$)q.call($,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(F[W]=$[W]);var B=arguments.length-2;if(B===1)F.children=X;else if(1<B){for(var V=Array(B),pe=0;pe<B;pe++)V[pe]=arguments[pe+2];F.children=V}if(_&&_.defaultProps)for(W in B=_.defaultProps,B)F[W]===void 0&&(F[W]=B[W]);return te(_,ae,F)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(_){return{$$typeof:d,render:_}},ze.isValidElement=le,ze.lazy=function(_){return{$$typeof:g,_payload:{_status:-1,_result:_},_init:L}},ze.memo=function(_,$){return{$$typeof:p,type:_,compare:$===void 0?null:$}},ze.startTransition=function(_){var $=I.T,X={};I.T=X;try{var W=_(),F=I.S;F!==null&&F(X,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(U,Y)}catch(ae){Y(ae)}finally{$!==null&&X.types!==null&&($.types=X.types),I.T=$}},ze.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},ze.use=function(_){return I.H.use(_)},ze.useActionState=function(_,$,X){return I.H.useActionState(_,$,X)},ze.useCallback=function(_,$){return I.H.useCallback(_,$)},ze.useContext=function(_){return I.H.useContext(_)},ze.useDebugValue=function(){},ze.useDeferredValue=function(_,$){return I.H.useDeferredValue(_,$)},ze.useEffect=function(_,$){return I.H.useEffect(_,$)},ze.useEffectEvent=function(_){return I.H.useEffectEvent(_)},ze.useId=function(){return I.H.useId()},ze.useImperativeHandle=function(_,$,X){return I.H.useImperativeHandle(_,$,X)},ze.useInsertionEffect=function(_,$){return I.H.useInsertionEffect(_,$)},ze.useLayoutEffect=function(_,$){return I.H.useLayoutEffect(_,$)},ze.useMemo=function(_,$){return I.H.useMemo(_,$)},ze.useOptimistic=function(_,$){return I.H.useOptimistic(_,$)},ze.useReducer=function(_,$,X){return I.H.useReducer(_,$,X)},ze.useRef=function(_){return I.H.useRef(_)},ze.useState=function(_){return I.H.useState(_)},ze.useSyncExternalStore=function(_,$,X){return I.H.useSyncExternalStore(_,$,X)},ze.useTransition=function(){return I.H.useTransition()},ze.version="19.2.0",ze}var Sv;function Ah(){return Sv||(Sv=1,zf.exports=tE()),zf.exports}var x=Ah();const Et=Nh(x),Th=ZM({__proto__:null,default:Et},[x]);var Of={exports:{}},yi={},Lf={exports:{}},Pf={};var Mv;function nE(){return Mv||(Mv=1,(function(a){function t(z,D){var L=z.length;z.push(D);e:for(;0<L;){var Y=L-1>>>1,he=z[Y];if(0<r(he,D))z[Y]=D,z[L]=he,L=Y;else break e}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var D=z[0],L=z.pop();if(L!==D){z[0]=L;e:for(var Y=0,he=z.length,_=he>>>1;Y<_;){var $=2*(Y+1)-1,X=z[$],W=$+1,F=z[W];if(0>r(X,L))W<he&&0>r(F,X)?(z[Y]=F,z[W]=L,Y=W):(z[Y]=X,z[$]=L,Y=$);else if(W<he&&0>r(F,L))z[Y]=F,z[W]=L,Y=W;else break e}}return D}function r(z,D){var L=z.sortIndex-D.sortIndex;return L!==0?L:z.id-D.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;a.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();a.unstable_now=function(){return c.now()-d}}var h=[],p=[],g=1,m=null,v=3,w=!1,S=!1,C=!1,R=!1,E=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function T(z){for(var D=n(p);D!==null;){if(D.callback===null)s(p);else if(D.startTime<=z)s(p),D.sortIndex=D.expirationTime,t(h,D);else break;D=n(p)}}function k(z){if(C=!1,T(z),!S)if(n(h)!==null)S=!0,U||(U=!0,ee());else{var D=n(p);D!==null&&ue(k,D.startTime-z)}}var U=!1,I=-1,q=5,te=-1;function se(){return R?!0:!(a.unstable_now()-te<q)}function le(){if(R=!1,U){var z=a.unstable_now();te=z;var D=!0;try{e:{S=!1,C&&(C=!1,j(I),I=-1),w=!0;var L=v;try{t:{for(T(z),m=n(h);m!==null&&!(m.expirationTime>z&&se());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,v=m.priorityLevel;var he=Y(m.expirationTime<=z);if(z=a.unstable_now(),typeof he=="function"){m.callback=he,T(z),D=!0;break t}m===n(h)&&s(h),T(z)}else s(h);m=n(h)}if(m!==null)D=!0;else{var _=n(p);_!==null&&ue(k,_.startTime-z),D=!1}}break e}finally{m=null,v=L,w=!1}D=void 0}}finally{D?ee():U=!1}}}var ee;if(typeof N=="function")ee=function(){N(le)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ce=oe.port2;oe.port1.onmessage=le,ee=function(){ce.postMessage(null)}}else ee=function(){E(le,0)};function ue(z,D){I=E(function(){z(a.unstable_now())},D)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(z){z.callback=null},a.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<z?Math.floor(1e3/z):5},a.unstable_getCurrentPriorityLevel=function(){return v},a.unstable_next=function(z){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var L=v;v=D;try{return z()}finally{v=L}},a.unstable_requestPaint=function(){R=!0},a.unstable_runWithPriority=function(z,D){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var L=v;v=z;try{return D()}finally{v=L}},a.unstable_scheduleCallback=function(z,D,L){var Y=a.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?Y+L:Y):L=Y,z){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=L+he,z={id:g++,callback:D,priorityLevel:z,startTime:L,expirationTime:he,sortIndex:-1},L>Y?(z.sortIndex=L,t(p,z),n(h)===null&&z===n(p)&&(C?(j(I),I=-1):C=!0,ue(k,L-Y))):(z.sortIndex=he,t(h,z),S||w||(S=!0,U||(U=!0,ee()))),z},a.unstable_shouldYield=se,a.unstable_wrapCallback=function(z){var D=v;return function(){var L=v;v=D;try{return z.apply(this,arguments)}finally{v=L}}}})(Pf)),Pf}var Ev;function sE(){return Ev||(Ev=1,Lf.exports=nE()),Lf.exports}var If={exports:{}},on={};var Rv;function oE(){if(Rv)return on;Rv=1;var a=Ah();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(h,p,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:h,containerInfo:p,implementation:g}}var c=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,on.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(h,p,null,g)},on.flushSync=function(h){var p=c.T,g=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=p,s.p=g,s.d.f()}},on.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(h,p))},on.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},on.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,m=d(g,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:w}):g==="script"&&s.d.X(h,{crossOrigin:m,integrity:v,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},on.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(h)},on.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,m=d(g,p.crossOrigin);s.d.L(h,g,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},on.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=d(p.as,p.crossOrigin);s.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(h)},on.requestFormReset=function(h){s.d.r(h)},on.unstable_batchedUpdates=function(h,p){return h(p)},on.useFormState=function(h,p,g){return c.H.useFormState(h,p,g)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.2.0",on}var Nv;function k0(){if(Nv)return If.exports;Nv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),If.exports=oE(),If.exports}var Av;function aE(){if(Av)return yi;Av=1;var a=sE(),t=Ah(),n=k0();function s(e){var o="https://react.dev/errors/"+e;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)o+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var o=e,i=e;if(e.alternate)for(;o.return;)o=o.return;else{e=o;do o=e,(o.flags&4098)!==0&&(i=o.return),e=o.return;while(e)}return o.tag===3?i:null}function c(e){if(e.tag===13){var o=e.memoizedState;if(o===null&&(e=e.alternate,e!==null&&(o=e.memoizedState)),o!==null)return o.dehydrated}return null}function d(e){if(e.tag===31){var o=e.memoizedState;if(o===null&&(e=e.alternate,e!==null&&(o=e.memoizedState)),o!==null)return o.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(s(188))}function p(e){var o=e.alternate;if(!o){if(o=l(e),o===null)throw Error(s(188));return o!==e?null:e}for(var i=e,u=o;;){var y=i.return;if(y===null)break;var b=y.alternate;if(b===null){if(u=y.return,u!==null){i=u;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===i)return h(y),e;if(b===u)return h(y),o;b=b.sibling}throw Error(s(188))}if(i.return!==u.return)i=y,u=b;else{for(var M=!1,A=y.child;A;){if(A===i){M=!0,i=y,u=b;break}if(A===u){M=!0,u=y,i=b;break}A=A.sibling}if(!M){for(A=b.child;A;){if(A===i){M=!0,i=b,u=y;break}if(A===u){M=!0,u=b,i=y;break}A=A.sibling}if(!M)throw Error(s(189))}}if(i.alternate!==u)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:o}function g(e){var o=e.tag;if(o===5||o===26||o===27||o===6)return e;for(e=e.child;e!==null;){if(o=g(e),o!==null)return o;e=e.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),N=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function ee(e){return e===null||typeof e!="object"?null:(e=le&&e[le]||e["@@iterator"],typeof e=="function"?e:null)}var oe=Symbol.for("react.client.reference");function ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===oe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case E:return"Profiler";case R:return"StrictMode";case k:return"Suspense";case U:return"SuspenseList";case te:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case N:return e.displayName||"Context";case j:return(e._context.displayName||"Context")+".Consumer";case T:var o=e.render;return e=e.displayName,e||(e=o.displayName||o.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return o=e.displayName||null,o!==null?o:ce(e.type)||"Memo";case q:o=e._payload,e=e._init;try{return ce(e(o))}catch{}}return null}var ue=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},Y=[],he=-1;function _(e){return{current:e}}function $(e){0>he||(e.current=Y[he],Y[he]=null,he--)}function X(e,o){he++,Y[he]=e.current,e.current=o}var W=_(null),F=_(null),ae=_(null),B=_(null);function V(e,o){switch(X(ae,o),X(F,e),X(W,null),o.nodeType){case 9:case 11:e=(e=o.documentElement)&&(e=e.namespaceURI)?$y(e):0;break;default:if(e=o.tagName,o=o.namespaceURI)o=$y(o),e=Gy(o,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(W),X(W,e)}function pe(){$(W),$(F),$(ae)}function me(e){e.memoizedState!==null&&X(B,e);var o=W.current,i=Gy(o,e.type);o!==i&&(X(F,e),X(W,i))}function ye(e){F.current===e&&($(W),$(F)),B.current===e&&($(B),fi._currentValue=L)}var ve,Pe;function Ue(e){if(ve===void 0)try{throw Error()}catch(i){var o=i.stack.trim().match(/\n( *(at )?)/);ve=o&&o[1]||"",Pe=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+e+Pe}var st=!1;function We(e,o){if(!e||st)return"";st=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var K=Z}Reflect.construct(e,[],ie)}else{try{ie.call()}catch(Z){K=Z}e.call(ie.prototype)}}else{try{throw Error()}catch(Z){K=Z}(ie=e())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=u.DetermineComponentFrameRoot(),M=b[0],A=b[1];if(M&&A){var O=M.split(`
`),Q=A.split(`
`);for(y=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;y<Q.length&&!Q[y].includes("DetermineComponentFrameRoot");)y++;if(u===O.length||y===Q.length)for(u=O.length-1,y=Q.length-1;1<=u&&0<=y&&O[u]!==Q[y];)y--;for(;1<=u&&0<=y;u--,y--)if(O[u]!==Q[y]){if(u!==1||y!==1)do if(u--,y--,0>y||O[u]!==Q[y]){var ne=`
`+O[u].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=u&&0<=y);break}}}finally{st=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ue(i):""}function kt(e,o){switch(e.tag){case 26:case 27:case 5:return Ue(e.type);case 16:return Ue("Lazy");case 13:return e.child!==o&&o!==null?Ue("Suspense Fallback"):Ue("Suspense");case 19:return Ue("SuspenseList");case 0:case 15:return We(e.type,!1);case 11:return We(e.type.render,!1);case 1:return We(e.type,!0);case 31:return Ue("Activity");default:return""}}function de(e){try{var o="",i=null;do o+=kt(e,i),i=e,e=e.return;while(e);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var He=Object.prototype.hasOwnProperty,Be=a.unstable_scheduleCallback,yt=a.unstable_cancelCallback,pt=a.unstable_shouldYield,qt=a.unstable_requestPaint,Ze=a.unstable_now,Dt=a.unstable_getCurrentPriorityLevel,vt=a.unstable_ImmediatePriority,gt=a.unstable_UserBlockingPriority,Yt=a.unstable_NormalPriority,Qt=a.unstable_LowPriority,Rs=a.unstable_IdlePriority,Yn=a.log,jn=a.unstable_setDisableYieldValue,rs=null,Xt=null;function Ft(e){if(typeof Yn=="function"&&jn(e),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(rs,e)}catch{}}var _t=Math.clz32?Math.clz32:Gi,Bo=Math.log,kn=Math.LN2;function Gi(e){return e>>>=0,e===0?32:31-(Bo(e)/kn|0)|0}var Ns=256,$o=262144,ao=4194304;function Xn(e){var o=e&42;if(o!==0)return o;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function As(e,o,i){var u=e.pendingLanes;if(u===0)return 0;var y=0,b=e.suspendedLanes,M=e.pingedLanes;e=e.warmLanes;var A=u&134217727;return A!==0?(u=A&~b,u!==0?y=Xn(u):(M&=A,M!==0?y=Xn(M):i||(i=A&~e,i!==0&&(y=Xn(i))))):(A=u&~b,A!==0?y=Xn(A):M!==0?y=Xn(M):i||(i=u&~e,i!==0&&(y=Xn(i)))),y===0?0:o!==0&&o!==y&&(o&b)===0&&(b=y&-y,i=o&-o,b>=i||b===32&&(i&4194048)!==0)?o:y}function Ts(e,o){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&o)===0}function Su(e,o){switch(e){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J(){var e=ao;return ao<<=1,(ao&62914560)===0&&(ao=4194304),e}function fe(e){for(var o=[],i=0;31>i;i++)o.push(e);return o}function be(e,o){e.pendingLanes|=o,o!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _e(e,o,i,u,y,b){var M=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var A=e.entanglements,O=e.expirationTimes,Q=e.hiddenUpdates;for(i=M&~i;0<i;){var ne=31-_t(i),ie=1<<ne;A[ne]=0,O[ne]=-1;var K=Q[ne];if(K!==null)for(Q[ne]=null,ne=0;ne<K.length;ne++){var Z=K[ne];Z!==null&&(Z.lane&=-536870913)}i&=~ie}u!==0&&Oe(e,u,0),b!==0&&y===0&&e.tag!==0&&(e.suspendedLanes|=b&~(M&~o))}function Oe(e,o,i){e.pendingLanes|=o,e.suspendedLanes&=~o;var u=31-_t(o);e.entangledLanes|=o,e.entanglements[u]=e.entanglements[u]|1073741824|i&261930}function lt(e,o){var i=e.entangledLanes|=o;for(e=e.entanglements;i;){var u=31-_t(i),y=1<<u;y&o|e[u]&o&&(e[u]|=o),i&=~y}}function zt(e,o){var i=o&-o;return i=(i&42)!==0?1:Wt(i),(i&(e.suspendedLanes|o))!==0?0:i}function Wt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Rt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ln(){var e=D.p;return e!==0?e:(e=window.event,e===void 0?32:hv(e.type))}function wt(e,o){var i=D.p;try{return D.p=e,o()}finally{D.p=i}}var ot=Math.random().toString(36).slice(2),mt="__reactFiber$"+ot,Ht="__reactProps$"+ot,is="__reactContainer$"+ot,$e="__reactEvents$"+ot,Dn="__reactListeners$"+ot,Go="__reactHandles$"+ot,xa="__reactResources$"+ot,Nr="__reactMarker$"+ot;function Mu(e){delete e[mt],delete e[Ht],delete e[$e],delete e[Dn],delete e[Go]}function wa(e){var o=e[mt];if(o)return o;for(var i=e.parentNode;i;){if(o=i[is]||i[mt]){if(i=o.alternate,o.child!==null||i!==null&&i.child!==null)for(e=Wy(e);e!==null;){if(i=e[mt])return i;e=Wy(e)}return o}e=i,i=e.parentNode}return null}function Ca(e){if(e=e[mt]||e[is]){var o=e.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return e}return null}function Ar(e){var o=e.tag;if(o===5||o===26||o===27||o===6)return e.stateNode;throw Error(s(33))}function Sa(e){var o=e[xa];return o||(o=e[xa]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Vt(e){e[Nr]=!0}var kp=new Set,Dp={};function Qo(e,o){Ma(e,o),Ma(e+"Capture",o)}function Ma(e,o){for(Dp[e]=o,e=0;e<o.length;e++)kp.add(o[e])}var $C=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_p={},zp={};function GC(e){return He.call(zp,e)?!0:He.call(_p,e)?!1:$C.test(e)?zp[e]=!0:(_p[e]=!0,!1)}function Qi(e,o,i){if(GC(o))if(i===null)e.removeAttribute(o);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){e.removeAttribute(o);return}}e.setAttribute(o,""+i)}}function Fi(e,o,i){if(i===null)e.removeAttribute(o);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttribute(o,""+i)}}function js(e,o,i,u){if(u===null)e.removeAttribute(i);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(o,i,""+u)}}function _n(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Op(e){var o=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function QC(e,o,i){var u=Object.getOwnPropertyDescriptor(e.constructor.prototype,o);if(!e.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,b=u.set;return Object.defineProperty(e,o,{configurable:!0,get:function(){return y.call(this)},set:function(M){i=""+M,b.call(this,M)}}),Object.defineProperty(e,o,{enumerable:u.enumerable}),{getValue:function(){return i},setValue:function(M){i=""+M},stopTracking:function(){e._valueTracker=null,delete e[o]}}}}function Eu(e){if(!e._valueTracker){var o=Op(e)?"checked":"value";e._valueTracker=QC(e,o,""+e[o])}}function Lp(e){if(!e)return!1;var o=e._valueTracker;if(!o)return!0;var i=o.getValue(),u="";return e&&(u=Op(e)?e.checked?"true":"false":e.value),e=u,e!==i?(o.setValue(e),!0):!1}function Vi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var FC=/[\n"\\]/g;function zn(e){return e.replace(FC,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ru(e,o,i,u,y,b,M,A){e.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?e.type=M:e.removeAttribute("type"),o!=null?M==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+_n(o)):e.value!==""+_n(o)&&(e.value=""+_n(o)):M!=="submit"&&M!=="reset"||e.removeAttribute("value"),o!=null?Nu(e,M,_n(o)):i!=null?Nu(e,M,_n(i)):u!=null&&e.removeAttribute("value"),y==null&&b!=null&&(e.defaultChecked=!!b),y!=null&&(e.checked=y&&typeof y!="function"&&typeof y!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.name=""+_n(A):e.removeAttribute("name")}function Pp(e,o,i,u,y,b,M,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.type=b),o!=null||i!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){Eu(e);return}i=i!=null?""+_n(i):"",o=o!=null?""+_n(o):i,A||o===e.value||(e.value=o),e.defaultValue=o}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,e.checked=A?e.checked:!!u,e.defaultChecked=!!u,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(e.name=M),Eu(e)}function Nu(e,o,i){o==="number"&&Vi(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Ea(e,o,i,u){if(e=e.options,o){o={};for(var y=0;y<i.length;y++)o["$"+i[y]]=!0;for(i=0;i<e.length;i++)y=o.hasOwnProperty("$"+e[i].value),e[i].selected!==y&&(e[i].selected=y),y&&u&&(e[i].defaultSelected=!0)}else{for(i=""+_n(i),o=null,y=0;y<e.length;y++){if(e[y].value===i){e[y].selected=!0,u&&(e[y].defaultSelected=!0);return}o!==null||e[y].disabled||(o=e[y])}o!==null&&(o.selected=!0)}}function Ip(e,o,i){if(o!=null&&(o=""+_n(o),o!==e.value&&(e.value=o),i==null)){e.defaultValue!==o&&(e.defaultValue=o);return}e.defaultValue=i!=null?""+_n(i):""}function qp(e,o,i,u){if(o==null){if(u!=null){if(i!=null)throw Error(s(92));if(ue(u)){if(1<u.length)throw Error(s(93));u=u[0]}i=u}i==null&&(i=""),o=i}i=_n(o),e.defaultValue=i,u=e.textContent,u===i&&u!==""&&u!==null&&(e.value=u),Eu(e)}function Ra(e,o){if(o){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=o;return}}e.textContent=o}var VC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hp(e,o,i){var u=o.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?u?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="":u?e.setProperty(o,i):typeof i!="number"||i===0||VC.has(o)?o==="float"?e.cssFloat=i:e[o]=(""+i).trim():e[o]=i+"px"}function Up(e,o,i){if(o!=null&&typeof o!="object")throw Error(s(62));if(e=e.style,i!=null){for(var u in i)!i.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?e.setProperty(u,""):u==="float"?e.cssFloat="":e[u]="");for(var y in o)u=o[y],o.hasOwnProperty(y)&&i[y]!==u&&Hp(e,y,u)}else for(var b in o)o.hasOwnProperty(b)&&Hp(e,b,o[b])}function Au(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),YC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ki(e){return YC.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ks(){}var Tu=null;function ju(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Na=null,Aa=null;function Bp(e){var o=Ca(e);if(o&&(e=o.stateNode)){var i=e[Ht]||null;e:switch(e=o.stateNode,o.type){case"input":if(Ru(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),o=i.name,i.type==="radio"&&o!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+zn(""+o)+'"][type="radio"]'),o=0;o<i.length;o++){var u=i[o];if(u!==e&&u.form===e.form){var y=u[Ht]||null;if(!y)throw Error(s(90));Ru(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<i.length;o++)u=i[o],u.form===e.form&&Lp(u)}break e;case"textarea":Ip(e,i.value,i.defaultValue);break e;case"select":o=i.value,o!=null&&Ea(e,!!i.multiple,o,!1)}}}var ku=!1;function $p(e,o,i){if(ku)return e(o,i);ku=!0;try{var u=e(o);return u}finally{if(ku=!1,(Na!==null||Aa!==null)&&(Ol(),Na&&(o=Na,e=Aa,Aa=Na=null,Bp(o),e)))for(o=0;o<e.length;o++)Bp(e[o])}}function Tr(e,o){var i=e.stateNode;if(i===null)return null;var u=i[Ht]||null;if(u===null)return null;i=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,o,typeof i));return i}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Du=!1;if(Ds)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){Du=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{Du=!1}var ro=null,_u=null,Yi=null;function Gp(){if(Yi)return Yi;var e,o=_u,i=o.length,u,y="value"in ro?ro.value:ro.textContent,b=y.length;for(e=0;e<i&&o[e]===y[e];e++);var M=i-e;for(u=1;u<=M&&o[i-u]===y[b-u];u++);return Yi=y.slice(e,1<u?1-u:void 0)}function Xi(e){var o=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&o===13&&(e=13)):e=o,e===10&&(e=13),32<=e||e===13?e:0}function Wi(){return!0}function Qp(){return!1}function fn(e){function o(i,u,y,b,M){this._reactName=i,this._targetInst=y,this.type=u,this.nativeEvent=b,this.target=M,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(i=e[A],this[A]=i?i(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Wi:Qp,this.isPropagationStopped=Qp,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),o}var Fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=fn(Fo),kr=m({},Fo,{view:0,detail:0}),XC=fn(kr),zu,Ou,Dr,Ji=m({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dr&&(Dr&&e.type==="mousemove"?(zu=e.screenX-Dr.screenX,Ou=e.screenY-Dr.screenY):Ou=zu=0,Dr=e),zu)},movementY:function(e){return"movementY"in e?e.movementY:Ou}}),Fp=fn(Ji),WC=m({},Ji,{dataTransfer:0}),ZC=fn(WC),JC=m({},kr,{relatedTarget:0}),Lu=fn(JC),eS=m({},Fo,{animationName:0,elapsedTime:0,pseudoElement:0}),tS=fn(eS),nS=m({},Fo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sS=fn(nS),oS=m({},Fo,{data:0}),Vp=fn(oS),aS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lS(e){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(e):(e=iS[e])?!!o[e]:!1}function Pu(){return lS}var cS=m({},kr,{key:function(e){if(e.key){var o=aS[e.key]||e.key;if(o!=="Unidentified")return o}return e.type==="keypress"?(e=Xi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pu,charCode:function(e){return e.type==="keypress"?Xi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uS=fn(cS),dS=m({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kp=fn(dS),fS=m({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pu}),hS=fn(fS),pS=m({},Fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),gS=fn(pS),mS=m({},Ji,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yS=fn(mS),vS=m({},Fo,{newState:0,oldState:0}),bS=fn(vS),xS=[9,13,27,32],Iu=Ds&&"CompositionEvent"in window,_r=null;Ds&&"documentMode"in document&&(_r=document.documentMode);var wS=Ds&&"TextEvent"in window&&!_r,Yp=Ds&&(!Iu||_r&&8<_r&&11>=_r),Xp=" ",Wp=!1;function Zp(e,o){switch(e){case"keyup":return xS.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ta=!1;function CS(e,o){switch(e){case"compositionend":return Jp(o);case"keypress":return o.which!==32?null:(Wp=!0,Xp);case"textInput":return e=o.data,e===Xp&&Wp?null:e;default:return null}}function SS(e,o){if(Ta)return e==="compositionend"||!Iu&&Zp(e,o)?(e=Gp(),Yi=_u=ro=null,Ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Yp&&o.locale!=="ko"?null:o.data;default:return null}}var MS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eg(e){var o=e&&e.nodeName&&e.nodeName.toLowerCase();return o==="input"?!!MS[e.type]:o==="textarea"}function tg(e,o,i,u){Na?Aa?Aa.push(u):Aa=[u]:Na=u,o=Bl(o,"onChange"),0<o.length&&(i=new Zi("onChange","change",null,i,u),e.push({event:i,listeners:o}))}var zr=null,Or=null;function ES(e){Py(e,0)}function el(e){var o=Ar(e);if(Lp(o))return e}function ng(e,o){if(e==="change")return o}var sg=!1;if(Ds){var qu;if(Ds){var Hu="oninput"in document;if(!Hu){var og=document.createElement("div");og.setAttribute("oninput","return;"),Hu=typeof og.oninput=="function"}qu=Hu}else qu=!1;sg=qu&&(!document.documentMode||9<document.documentMode)}function ag(){zr&&(zr.detachEvent("onpropertychange",rg),Or=zr=null)}function rg(e){if(e.propertyName==="value"&&el(Or)){var o=[];tg(o,Or,e,ju(e)),$p(ES,o)}}function RS(e,o,i){e==="focusin"?(ag(),zr=o,Or=i,zr.attachEvent("onpropertychange",rg)):e==="focusout"&&ag()}function NS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return el(Or)}function AS(e,o){if(e==="click")return el(o)}function TS(e,o){if(e==="input"||e==="change")return el(o)}function jS(e,o){return e===o&&(e!==0||1/e===1/o)||e!==e&&o!==o}var xn=typeof Object.is=="function"?Object.is:jS;function Lr(e,o){if(xn(e,o))return!0;if(typeof e!="object"||e===null||typeof o!="object"||o===null)return!1;var i=Object.keys(e),u=Object.keys(o);if(i.length!==u.length)return!1;for(u=0;u<i.length;u++){var y=i[u];if(!He.call(o,y)||!xn(e[y],o[y]))return!1}return!0}function ig(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lg(e,o){var i=ig(e);e=0;for(var u;i;){if(i.nodeType===3){if(u=e+i.textContent.length,e<=o&&u>=o)return{node:i,offset:o-e};e=u}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ig(i)}}function cg(e,o){return e&&o?e===o?!0:e&&e.nodeType===3?!1:o&&o.nodeType===3?cg(e,o.parentNode):"contains"in e?e.contains(o):e.compareDocumentPosition?!!(e.compareDocumentPosition(o)&16):!1:!1}function ug(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var o=Vi(e.document);o instanceof e.HTMLIFrameElement;){try{var i=typeof o.contentWindow.location.href=="string"}catch{i=!1}if(i)e=o.contentWindow;else break;o=Vi(e.document)}return o}function Uu(e){var o=e&&e.nodeName&&e.nodeName.toLowerCase();return o&&(o==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||o==="textarea"||e.contentEditable==="true")}var kS=Ds&&"documentMode"in document&&11>=document.documentMode,ja=null,Bu=null,Pr=null,$u=!1;function dg(e,o,i){var u=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;$u||ja==null||ja!==Vi(u)||(u=ja,"selectionStart"in u&&Uu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pr&&Lr(Pr,u)||(Pr=u,u=Bl(Bu,"onSelect"),0<u.length&&(o=new Zi("onSelect","select",null,o,i),e.push({event:o,listeners:u}),o.target=ja)))}function Vo(e,o){var i={};return i[e.toLowerCase()]=o.toLowerCase(),i["Webkit"+e]="webkit"+o,i["Moz"+e]="moz"+o,i}var ka={animationend:Vo("Animation","AnimationEnd"),animationiteration:Vo("Animation","AnimationIteration"),animationstart:Vo("Animation","AnimationStart"),transitionrun:Vo("Transition","TransitionRun"),transitionstart:Vo("Transition","TransitionStart"),transitioncancel:Vo("Transition","TransitionCancel"),transitionend:Vo("Transition","TransitionEnd")},Gu={},fg={};Ds&&(fg=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Ko(e){if(Gu[e])return Gu[e];if(!ka[e])return e;var o=ka[e],i;for(i in o)if(o.hasOwnProperty(i)&&i in fg)return Gu[e]=o[i];return e}var hg=Ko("animationend"),pg=Ko("animationiteration"),gg=Ko("animationstart"),DS=Ko("transitionrun"),_S=Ko("transitionstart"),zS=Ko("transitioncancel"),mg=Ko("transitionend"),yg=new Map,Qu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qu.push("scrollEnd");function Wn(e,o){yg.set(e,o),Qo(o,[e])}var tl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},On=[],Da=0,Fu=0;function nl(){for(var e=Da,o=Fu=Da=0;o<e;){var i=On[o];On[o++]=null;var u=On[o];On[o++]=null;var y=On[o];On[o++]=null;var b=On[o];if(On[o++]=null,u!==null&&y!==null){var M=u.pending;M===null?y.next=y:(y.next=M.next,M.next=y),u.pending=y}b!==0&&vg(i,y,b)}}function sl(e,o,i,u){On[Da++]=e,On[Da++]=o,On[Da++]=i,On[Da++]=u,Fu|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function Vu(e,o,i,u){return sl(e,o,i,u),ol(e)}function Yo(e,o){return sl(e,null,null,o),ol(e)}function vg(e,o,i){e.lanes|=i;var u=e.alternate;u!==null&&(u.lanes|=i);for(var y=!1,b=e.return;b!==null;)b.childLanes|=i,u=b.alternate,u!==null&&(u.childLanes|=i),b.tag===22&&(e=b.stateNode,e===null||e._visibility&1||(y=!0)),e=b,b=b.return;return e.tag===3?(b=e.stateNode,y&&o!==null&&(y=31-_t(i),e=b.hiddenUpdates,u=e[y],u===null?e[y]=[o]:u.push(o),o.lane=i|536870912),b):null}function ol(e){if(50<ai)throw ai=0,nf=null,Error(s(185));for(var o=e.return;o!==null;)e=o,o=e.return;return e.tag===3?e.stateNode:null}var _a={};function OS(e,o,i,u){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(e,o,i,u){return new OS(e,o,i,u)}function Ku(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _s(e,o){var i=e.alternate;return i===null?(i=wn(e.tag,o,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=o,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,o=e.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function bg(e,o){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=o,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,o=i.dependencies,e.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),e}function al(e,o,i,u,y,b){var M=0;if(u=e,typeof e=="function")Ku(e)&&(M=1);else if(typeof e=="string")M=HM(e,i,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case te:return e=wn(31,i,o,y),e.elementType=te,e.lanes=b,e;case C:return Xo(i.children,y,b,o);case R:M=8,y|=24;break;case E:return e=wn(12,i,o,y|2),e.elementType=E,e.lanes=b,e;case k:return e=wn(13,i,o,y),e.elementType=k,e.lanes=b,e;case U:return e=wn(19,i,o,y),e.elementType=U,e.lanes=b,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:M=10;break e;case j:M=9;break e;case T:M=11;break e;case I:M=14;break e;case q:M=16,u=null;break e}M=29,i=Error(s(130,e===null?"null":typeof e,"")),u=null}return o=wn(M,i,o,y),o.elementType=e,o.type=u,o.lanes=b,o}function Xo(e,o,i,u){return e=wn(7,e,u,o),e.lanes=i,e}function Yu(e,o,i){return e=wn(6,e,null,o),e.lanes=i,e}function xg(e){var o=wn(18,null,null,0);return o.stateNode=e,o}function Xu(e,o,i){return o=wn(4,e.children!==null?e.children:[],e.key,o),o.lanes=i,o.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},o}var wg=new WeakMap;function Ln(e,o){if(typeof e=="object"&&e!==null){var i=wg.get(e);return i!==void 0?i:(o={value:e,source:o,stack:de(o)},wg.set(e,o),o)}return{value:e,source:o,stack:de(o)}}var za=[],Oa=0,rl=null,Ir=0,Pn=[],In=0,io=null,ls=1,cs="";function zs(e,o){za[Oa++]=Ir,za[Oa++]=rl,rl=e,Ir=o}function Cg(e,o,i){Pn[In++]=ls,Pn[In++]=cs,Pn[In++]=io,io=e;var u=ls;e=cs;var y=32-_t(u)-1;u&=~(1<<y),i+=1;var b=32-_t(o)+y;if(30<b){var M=y-y%5;b=(u&(1<<M)-1).toString(32),u>>=M,y-=M,ls=1<<32-_t(o)+y|i<<y|u,cs=b+e}else ls=1<<b|i<<y|u,cs=e}function Wu(e){e.return!==null&&(zs(e,1),Cg(e,1,0))}function Zu(e){for(;e===rl;)rl=za[--Oa],za[Oa]=null,Ir=za[--Oa],za[Oa]=null;for(;e===io;)io=Pn[--In],Pn[In]=null,cs=Pn[--In],Pn[In]=null,ls=Pn[--In],Pn[In]=null}function Sg(e,o){Pn[In++]=ls,Pn[In++]=cs,Pn[In++]=io,ls=o.id,cs=o.overflow,io=e}var Zt=null,bt=null,Xe=!1,lo=null,qn=!1,Ju=Error(s(519));function co(e){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qr(Ln(o,e)),Ju}function Mg(e){var o=e.stateNode,i=e.type,u=e.memoizedProps;switch(o[mt]=e,o[Ht]=u,i){case"dialog":Qe("cancel",o),Qe("close",o);break;case"iframe":case"object":case"embed":Qe("load",o);break;case"video":case"audio":for(i=0;i<ii.length;i++)Qe(ii[i],o);break;case"source":Qe("error",o);break;case"img":case"image":case"link":Qe("error",o),Qe("load",o);break;case"details":Qe("toggle",o);break;case"input":Qe("invalid",o),Pp(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Qe("invalid",o);break;case"textarea":Qe("invalid",o),qp(o,u.value,u.defaultValue,u.children)}i=u.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||o.textContent===""+i||u.suppressHydrationWarning===!0||Uy(o.textContent,i)?(u.popover!=null&&(Qe("beforetoggle",o),Qe("toggle",o)),u.onScroll!=null&&Qe("scroll",o),u.onScrollEnd!=null&&Qe("scrollend",o),u.onClick!=null&&(o.onclick=ks),o=!0):o=!1,o||co(e,!0)}function Eg(e){for(Zt=e.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Zt=Zt.return}}function La(e){if(e!==Zt)return!1;if(!Xe)return Eg(e),Xe=!0,!1;var o=e.tag,i;if((i=o!==3&&o!==27)&&((i=o===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||vf(e.type,e.memoizedProps)),i=!i),i&&bt&&co(e),Eg(e),o===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));bt=Xy(e)}else if(o===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));bt=Xy(e)}else o===27?(o=bt,Mo(e.type)?(e=Sf,Sf=null,bt=e):bt=o):bt=Zt?Un(e.stateNode.nextSibling):null;return!0}function Wo(){bt=Zt=null,Xe=!1}function ed(){var e=lo;return e!==null&&(mn===null?mn=e:mn.push.apply(mn,e),lo=null),e}function qr(e){lo===null?lo=[e]:lo.push(e)}var td=_(null),Zo=null,Os=null;function uo(e,o,i){X(td,o._currentValue),o._currentValue=i}function Ls(e){e._currentValue=td.current,$(td)}function nd(e,o,i){for(;e!==null;){var u=e.alternate;if((e.childLanes&o)!==o?(e.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),e===i)break;e=e.return}}function sd(e,o,i,u){var y=e.child;for(y!==null&&(y.return=e);y!==null;){var b=y.dependencies;if(b!==null){var M=y.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=y;for(var O=0;O<o.length;O++)if(A.context===o[O]){b.lanes|=i,A=b.alternate,A!==null&&(A.lanes|=i),nd(b.return,i,e),u||(M=null);break e}b=A.next}}else if(y.tag===18){if(M=y.return,M===null)throw Error(s(341));M.lanes|=i,b=M.alternate,b!==null&&(b.lanes|=i),nd(M,i,e),M=null}else M=y.child;if(M!==null)M.return=y;else for(M=y;M!==null;){if(M===e){M=null;break}if(y=M.sibling,y!==null){y.return=M.return,M=y;break}M=M.return}y=M}}function Pa(e,o,i,u){e=null;for(var y=o,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var M=y.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var A=y.type;xn(y.pendingProps.value,M.value)||(e!==null?e.push(A):e=[A])}}else if(y===B.current){if(M=y.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(e!==null?e.push(fi):e=[fi])}y=y.return}e!==null&&sd(o,e,i,u),o.flags|=262144}function il(e){for(e=e.firstContext;e!==null;){if(!xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Jo(e){Zo=e,Os=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Jt(e){return Rg(Zo,e)}function ll(e,o){return Zo===null&&Jo(e),Rg(e,o)}function Rg(e,o){var i=o._currentValue;if(o={context:o,memoizedValue:i,next:null},Os===null){if(e===null)throw Error(s(308));Os=o,e.dependencies={lanes:0,firstContext:o},e.flags|=524288}else Os=Os.next=o;return i}var LS=typeof AbortController<"u"?AbortController:function(){var e=[],o=this.signal={aborted:!1,addEventListener:function(i,u){e.push(u)}};this.abort=function(){o.aborted=!0,e.forEach(function(i){return i()})}},PS=a.unstable_scheduleCallback,IS=a.unstable_NormalPriority,Ot={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function od(){return{controller:new LS,data:new Map,refCount:0}}function Hr(e){e.refCount--,e.refCount===0&&PS(IS,function(){e.controller.abort()})}var Ur=null,ad=0,Ia=0,qa=null;function qS(e,o){if(Ur===null){var i=Ur=[];ad=0,Ia=cf(),qa={status:"pending",value:void 0,then:function(u){i.push(u)}}}return ad++,o.then(Ng,Ng),o}function Ng(){if(--ad===0&&Ur!==null){qa!==null&&(qa.status="fulfilled");var e=Ur;Ur=null,Ia=0,qa=null;for(var o=0;o<e.length;o++)(0,e[o])()}}function HS(e,o){var i=[],u={status:"pending",value:null,reason:null,then:function(y){i.push(y)}};return e.then(function(){u.status="fulfilled",u.value=o;for(var y=0;y<i.length;y++)(0,i[y])(o)},function(y){for(u.status="rejected",u.reason=y,y=0;y<i.length;y++)(0,i[y])(void 0)}),u}var Ag=z.S;z.S=function(e,o){dy=Ze(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&qS(e,o),Ag!==null&&Ag(e,o)};var ea=_(null);function rd(){var e=ea.current;return e!==null?e:ft.pooledCache}function cl(e,o){o===null?X(ea,ea.current):X(ea,o.pool)}function Tg(){var e=rd();return e===null?null:{parent:Ot._currentValue,pool:e}}var Ha=Error(s(460)),id=Error(s(474)),ul=Error(s(542)),dl={then:function(){}};function jg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function kg(e,o,i){switch(i=e[i],i===void 0?e.push(o):i!==o&&(o.then(ks,ks),o=i),o.status){case"fulfilled":return o.value;case"rejected":throw e=o.reason,_g(e),e;default:if(typeof o.status=="string")o.then(ks,ks);else{if(e=ft,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=o,e.status="pending",e.then(function(u){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=u}},function(u){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw e=o.reason,_g(e),e}throw na=o,Ha}}function ta(e){try{var o=e._init;return o(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(na=i,Ha):i}}var na=null;function Dg(){if(na===null)throw Error(s(459));var e=na;return na=null,e}function _g(e){if(e===Ha||e===ul)throw Error(s(483))}var Ua=null,Br=0;function fl(e){var o=Br;return Br+=1,Ua===null&&(Ua=[]),kg(Ua,e,o)}function $r(e,o){o=o.props.ref,e.ref=o!==void 0?o:null}function hl(e,o){throw o.$$typeof===v?Error(s(525)):(e=Object.prototype.toString.call(o),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":e)))}function zg(e){function o(H,P){if(e){var G=H.deletions;G===null?(H.deletions=[P],H.flags|=16):G.push(P)}}function i(H,P){if(!e)return null;for(;P!==null;)o(H,P),P=P.sibling;return null}function u(H){for(var P=new Map;H!==null;)H.key!==null?P.set(H.key,H):P.set(H.index,H),H=H.sibling;return P}function y(H,P){return H=_s(H,P),H.index=0,H.sibling=null,H}function b(H,P,G){return H.index=G,e?(G=H.alternate,G!==null?(G=G.index,G<P?(H.flags|=67108866,P):G):(H.flags|=67108866,P)):(H.flags|=1048576,P)}function M(H){return e&&H.alternate===null&&(H.flags|=67108866),H}function A(H,P,G,re){return P===null||P.tag!==6?(P=Yu(G,H.mode,re),P.return=H,P):(P=y(P,G),P.return=H,P)}function O(H,P,G,re){var Ne=G.type;return Ne===C?ne(H,P,G.props.children,re,G.key):P!==null&&(P.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===q&&ta(Ne)===P.type)?(P=y(P,G.props),$r(P,G),P.return=H,P):(P=al(G.type,G.key,G.props,null,H.mode,re),$r(P,G),P.return=H,P)}function Q(H,P,G,re){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=Xu(G,H.mode,re),P.return=H,P):(P=y(P,G.children||[]),P.return=H,P)}function ne(H,P,G,re,Ne){return P===null||P.tag!==7?(P=Xo(G,H.mode,re,Ne),P.return=H,P):(P=y(P,G),P.return=H,P)}function ie(H,P,G){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Yu(""+P,H.mode,G),P.return=H,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case w:return G=al(P.type,P.key,P.props,null,H.mode,G),$r(G,P),G.return=H,G;case S:return P=Xu(P,H.mode,G),P.return=H,P;case q:return P=ta(P),ie(H,P,G)}if(ue(P)||ee(P))return P=Xo(P,H.mode,G,null),P.return=H,P;if(typeof P.then=="function")return ie(H,fl(P),G);if(P.$$typeof===N)return ie(H,ll(H,P),G);hl(H,P)}return null}function K(H,P,G,re){var Ne=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ne!==null?null:A(H,P,""+G,re);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return G.key===Ne?O(H,P,G,re):null;case S:return G.key===Ne?Q(H,P,G,re):null;case q:return G=ta(G),K(H,P,G,re)}if(ue(G)||ee(G))return Ne!==null?null:ne(H,P,G,re,null);if(typeof G.then=="function")return K(H,P,fl(G),re);if(G.$$typeof===N)return K(H,P,ll(H,G),re);hl(H,G)}return null}function Z(H,P,G,re,Ne){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return H=H.get(G)||null,A(P,H,""+re,Ne);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return H=H.get(re.key===null?G:re.key)||null,O(P,H,re,Ne);case S:return H=H.get(re.key===null?G:re.key)||null,Q(P,H,re,Ne);case q:return re=ta(re),Z(H,P,G,re,Ne)}if(ue(re)||ee(re))return H=H.get(G)||null,ne(P,H,re,Ne,null);if(typeof re.then=="function")return Z(H,P,G,fl(re),Ne);if(re.$$typeof===N)return Z(H,P,G,ll(P,re),Ne);hl(P,re)}return null}function xe(H,P,G,re){for(var Ne=null,Je=null,Me=P,Ie=P=0,Ve=null;Me!==null&&Ie<G.length;Ie++){Me.index>Ie?(Ve=Me,Me=null):Ve=Me.sibling;var et=K(H,Me,G[Ie],re);if(et===null){Me===null&&(Me=Ve);break}e&&Me&&et.alternate===null&&o(H,Me),P=b(et,P,Ie),Je===null?Ne=et:Je.sibling=et,Je=et,Me=Ve}if(Ie===G.length)return i(H,Me),Xe&&zs(H,Ie),Ne;if(Me===null){for(;Ie<G.length;Ie++)Me=ie(H,G[Ie],re),Me!==null&&(P=b(Me,P,Ie),Je===null?Ne=Me:Je.sibling=Me,Je=Me);return Xe&&zs(H,Ie),Ne}for(Me=u(Me);Ie<G.length;Ie++)Ve=Z(Me,H,Ie,G[Ie],re),Ve!==null&&(e&&Ve.alternate!==null&&Me.delete(Ve.key===null?Ie:Ve.key),P=b(Ve,P,Ie),Je===null?Ne=Ve:Je.sibling=Ve,Je=Ve);return e&&Me.forEach(function(To){return o(H,To)}),Xe&&zs(H,Ie),Ne}function je(H,P,G,re){if(G==null)throw Error(s(151));for(var Ne=null,Je=null,Me=P,Ie=P=0,Ve=null,et=G.next();Me!==null&&!et.done;Ie++,et=G.next()){Me.index>Ie?(Ve=Me,Me=null):Ve=Me.sibling;var To=K(H,Me,et.value,re);if(To===null){Me===null&&(Me=Ve);break}e&&Me&&To.alternate===null&&o(H,Me),P=b(To,P,Ie),Je===null?Ne=To:Je.sibling=To,Je=To,Me=Ve}if(et.done)return i(H,Me),Xe&&zs(H,Ie),Ne;if(Me===null){for(;!et.done;Ie++,et=G.next())et=ie(H,et.value,re),et!==null&&(P=b(et,P,Ie),Je===null?Ne=et:Je.sibling=et,Je=et);return Xe&&zs(H,Ie),Ne}for(Me=u(Me);!et.done;Ie++,et=G.next())et=Z(Me,H,Ie,et.value,re),et!==null&&(e&&et.alternate!==null&&Me.delete(et.key===null?Ie:et.key),P=b(et,P,Ie),Je===null?Ne=et:Je.sibling=et,Je=et);return e&&Me.forEach(function(WM){return o(H,WM)}),Xe&&zs(H,Ie),Ne}function dt(H,P,G,re){if(typeof G=="object"&&G!==null&&G.type===C&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case w:e:{for(var Ne=G.key;P!==null;){if(P.key===Ne){if(Ne=G.type,Ne===C){if(P.tag===7){i(H,P.sibling),re=y(P,G.props.children),re.return=H,H=re;break e}}else if(P.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===q&&ta(Ne)===P.type){i(H,P.sibling),re=y(P,G.props),$r(re,G),re.return=H,H=re;break e}i(H,P);break}else o(H,P);P=P.sibling}G.type===C?(re=Xo(G.props.children,H.mode,re,G.key),re.return=H,H=re):(re=al(G.type,G.key,G.props,null,H.mode,re),$r(re,G),re.return=H,H=re)}return M(H);case S:e:{for(Ne=G.key;P!==null;){if(P.key===Ne)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){i(H,P.sibling),re=y(P,G.children||[]),re.return=H,H=re;break e}else{i(H,P);break}else o(H,P);P=P.sibling}re=Xu(G,H.mode,re),re.return=H,H=re}return M(H);case q:return G=ta(G),dt(H,P,G,re)}if(ue(G))return xe(H,P,G,re);if(ee(G)){if(Ne=ee(G),typeof Ne!="function")throw Error(s(150));return G=Ne.call(G),je(H,P,G,re)}if(typeof G.then=="function")return dt(H,P,fl(G),re);if(G.$$typeof===N)return dt(H,P,ll(H,G),re);hl(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,P!==null&&P.tag===6?(i(H,P.sibling),re=y(P,G),re.return=H,H=re):(i(H,P),re=Yu(G,H.mode,re),re.return=H,H=re),M(H)):i(H,P)}return function(H,P,G,re){try{Br=0;var Ne=dt(H,P,G,re);return Ua=null,Ne}catch(Me){if(Me===Ha||Me===ul)throw Me;var Je=wn(29,Me,null,H.mode);return Je.lanes=re,Je.return=H,Je}finally{}}}var sa=zg(!0),Og=zg(!1),fo=!1;function ld(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cd(e,o){e=e.updateQueue,o.updateQueue===e&&(o.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ho(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function po(e,o,i){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(tt&2)!==0){var y=u.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),u.pending=o,o=ol(e),vg(e,null,i),o}return sl(e,u,o,i),ol(e)}function Gr(e,o,i){if(o=o.updateQueue,o!==null&&(o=o.shared,(i&4194048)!==0)){var u=o.lanes;u&=e.pendingLanes,i|=u,o.lanes=i,lt(e,i)}}function ud(e,o){var i=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,i===u)){var y=null,b=null;if(i=i.firstBaseUpdate,i!==null){do{var M={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};b===null?y=b=M:b=b.next=M,i=i.next}while(i!==null);b===null?y=b=o:b=b.next=o}else y=b=o;i={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:u.shared,callbacks:u.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=o:e.next=o,i.lastBaseUpdate=o}var dd=!1;function Qr(){if(dd){var e=qa;if(e!==null)throw e}}function Fr(e,o,i,u){dd=!1;var y=e.updateQueue;fo=!1;var b=y.firstBaseUpdate,M=y.lastBaseUpdate,A=y.shared.pending;if(A!==null){y.shared.pending=null;var O=A,Q=O.next;O.next=null,M===null?b=Q:M.next=Q,M=O;var ne=e.alternate;ne!==null&&(ne=ne.updateQueue,A=ne.lastBaseUpdate,A!==M&&(A===null?ne.firstBaseUpdate=Q:A.next=Q,ne.lastBaseUpdate=O))}if(b!==null){var ie=y.baseState;M=0,ne=Q=O=null,A=b;do{var K=A.lane&-536870913,Z=K!==A.lane;if(Z?(Fe&K)===K:(u&K)===K){K!==0&&K===Ia&&(dd=!0),ne!==null&&(ne=ne.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var xe=e,je=A;K=o;var dt=i;switch(je.tag){case 1:if(xe=je.payload,typeof xe=="function"){ie=xe.call(dt,ie,K);break e}ie=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=je.payload,K=typeof xe=="function"?xe.call(dt,ie,K):xe,K==null)break e;ie=m({},ie,K);break e;case 2:fo=!0}}K=A.callback,K!==null&&(e.flags|=64,Z&&(e.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ne===null?(Q=ne=Z,O=ie):ne=ne.next=Z,M|=K;if(A=A.next,A===null){if(A=y.shared.pending,A===null)break;Z=A,A=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);ne===null&&(O=ie),y.baseState=O,y.firstBaseUpdate=Q,y.lastBaseUpdate=ne,b===null&&(y.shared.lanes=0),bo|=M,e.lanes=M,e.memoizedState=ie}}function Lg(e,o){if(typeof e!="function")throw Error(s(191,e));e.call(o)}function Pg(e,o){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Lg(i[e],o)}var Ba=_(null),pl=_(0);function Ig(e,o){e=Qs,X(pl,e),X(Ba,o),Qs=e|o.baseLanes}function fd(){X(pl,Qs),X(Ba,Ba.current)}function hd(){Qs=pl.current,$(Ba),$(pl)}var Cn=_(null),Hn=null;function go(e){var o=e.alternate;X(Nt,Nt.current&1),X(Cn,e),Hn===null&&(o===null||Ba.current!==null||o.memoizedState!==null)&&(Hn=e)}function pd(e){X(Nt,Nt.current),X(Cn,e),Hn===null&&(Hn=e)}function qg(e){e.tag===22?(X(Nt,Nt.current),X(Cn,e),Hn===null&&(Hn=e)):mo()}function mo(){X(Nt,Nt.current),X(Cn,Cn.current)}function Sn(e){$(Cn),Hn===e&&(Hn=null),$(Nt)}var Nt=_(0);function gl(e){for(var o=e;o!==null;){if(o.tag===13){var i=o.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||wf(i)||Cf(i)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ps=0,Le=null,ct=null,Lt=null,ml=!1,$a=!1,oa=!1,yl=0,Vr=0,Ga=null,US=0;function St(){throw Error(s(321))}function gd(e,o){if(o===null)return!1;for(var i=0;i<o.length&&i<e.length;i++)if(!xn(e[i],o[i]))return!1;return!0}function md(e,o,i,u,y,b){return Ps=b,Le=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,z.H=e===null||e.memoizedState===null?Cm:kd,oa=!1,b=i(u,y),oa=!1,$a&&(b=Ug(o,i,u,y)),Hg(e),b}function Hg(e){z.H=Xr;var o=ct!==null&&ct.next!==null;if(Ps=0,Lt=ct=Le=null,ml=!1,Vr=0,Ga=null,o)throw Error(s(300));e===null||Pt||(e=e.dependencies,e!==null&&il(e)&&(Pt=!0))}function Ug(e,o,i,u){Le=e;var y=0;do{if($a&&(Ga=null),Vr=0,$a=!1,25<=y)throw Error(s(301));if(y+=1,Lt=ct=null,e.updateQueue!=null){var b=e.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}z.H=Sm,b=o(i,u)}while($a);return b}function BS(){var e=z.H,o=e.useState()[0];return o=typeof o.then=="function"?Kr(o):o,e=e.useState()[0],(ct!==null?ct.memoizedState:null)!==e&&(Le.flags|=1024),o}function yd(){var e=yl!==0;return yl=0,e}function vd(e,o,i){o.updateQueue=e.updateQueue,o.flags&=-2053,e.lanes&=~i}function bd(e){if(ml){for(e=e.memoizedState;e!==null;){var o=e.queue;o!==null&&(o.pending=null),e=e.next}ml=!1}Ps=0,Lt=ct=Le=null,$a=!1,Vr=yl=0,Ga=null}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Le.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function At(){if(ct===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var o=Lt===null?Le.memoizedState:Lt.next;if(o!==null)Lt=o,ct=e;else{if(e===null)throw Le.alternate===null?Error(s(467)):Error(s(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Lt===null?Le.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function vl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kr(e){var o=Vr;return Vr+=1,Ga===null&&(Ga=[]),e=kg(Ga,e,o),o=Le,(Lt===null?o.memoizedState:Lt.next)===null&&(o=o.alternate,z.H=o===null||o.memoizedState===null?Cm:kd),e}function bl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Kr(e);if(e.$$typeof===N)return Jt(e)}throw Error(s(438,String(e)))}function xd(e){var o=null,i=Le.updateQueue;if(i!==null&&(o=i.memoCache),o==null){var u=Le.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),i===null&&(i=vl(),Le.updateQueue=i),i.memoCache=o,i=o.data[o.index],i===void 0)for(i=o.data[o.index]=Array(e),u=0;u<e;u++)i[u]=se;return o.index++,i}function Is(e,o){return typeof o=="function"?o(e):o}function xl(e){var o=At();return wd(o,ct,e)}function wd(e,o,i){var u=e.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=i;var y=e.baseQueue,b=u.pending;if(b!==null){if(y!==null){var M=y.next;y.next=b.next,b.next=M}o.baseQueue=y=b,u.pending=null}if(b=e.baseState,y===null)e.memoizedState=b;else{o=y.next;var A=M=null,O=null,Q=o,ne=!1;do{var ie=Q.lane&-536870913;if(ie!==Q.lane?(Fe&ie)===ie:(Ps&ie)===ie){var K=Q.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ie===Ia&&(ne=!0);else if((Ps&K)===K){Q=Q.next,K===Ia&&(ne=!0);continue}else ie={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(A=O=ie,M=b):O=O.next=ie,Le.lanes|=K,bo|=K;ie=Q.action,oa&&i(b,ie),b=Q.hasEagerState?Q.eagerState:i(b,ie)}else K={lane:ie,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(A=O=K,M=b):O=O.next=K,Le.lanes|=ie,bo|=ie;Q=Q.next}while(Q!==null&&Q!==o);if(O===null?M=b:O.next=A,!xn(b,e.memoizedState)&&(Pt=!0,ne&&(i=qa,i!==null)))throw i;e.memoizedState=b,e.baseState=M,e.baseQueue=O,u.lastRenderedState=b}return y===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function Cd(e){var o=At(),i=o.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var u=i.dispatch,y=i.pending,b=o.memoizedState;if(y!==null){i.pending=null;var M=y=y.next;do b=e(b,M.action),M=M.next;while(M!==y);xn(b,o.memoizedState)||(Pt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),i.lastRenderedState=b}return[b,u]}function Bg(e,o,i){var u=Le,y=At(),b=Xe;if(b){if(i===void 0)throw Error(s(407));i=i()}else i=o();var M=!xn((ct||y).memoizedState,i);if(M&&(y.memoizedState=i,Pt=!0),y=y.queue,Ed(Qg.bind(null,u,y,e),[e]),y.getSnapshot!==o||M||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,Qa(9,{destroy:void 0},Gg.bind(null,u,y,i,o),null),ft===null)throw Error(s(349));b||(Ps&127)!==0||$g(u,o,i)}return i}function $g(e,o,i){e.flags|=16384,e={getSnapshot:o,value:i},o=Le.updateQueue,o===null?(o=vl(),Le.updateQueue=o,o.stores=[e]):(i=o.stores,i===null?o.stores=[e]:i.push(e))}function Gg(e,o,i,u){o.value=i,o.getSnapshot=u,Fg(o)&&Vg(e)}function Qg(e,o,i){return i(function(){Fg(o)&&Vg(e)})}function Fg(e){var o=e.getSnapshot;e=e.value;try{var i=o();return!xn(e,i)}catch{return!0}}function Vg(e){var o=Yo(e,2);o!==null&&yn(o,e,2)}function Sd(e){var o=cn();if(typeof e=="function"){var i=e;if(e=i(),oa){Ft(!0);try{i()}finally{Ft(!1)}}}return o.memoizedState=o.baseState=e,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},o}function Kg(e,o,i,u){return e.baseState=i,wd(e,ct,typeof u=="function"?u:Is)}function $S(e,o,i,u,y){if(Sl(e))throw Error(s(485));if(e=o.action,e!==null){var b={payload:y,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){b.listeners.push(M)}};z.T!==null?i(!0):b.isTransition=!1,u(b),i=o.pending,i===null?(b.next=o.pending=b,Yg(o,b)):(b.next=i.next,o.pending=i.next=b)}}function Yg(e,o){var i=o.action,u=o.payload,y=e.state;if(o.isTransition){var b=z.T,M={};z.T=M;try{var A=i(y,u),O=z.S;O!==null&&O(M,A),Xg(e,o,A)}catch(Q){Md(e,o,Q)}finally{b!==null&&M.types!==null&&(b.types=M.types),z.T=b}}else try{b=i(y,u),Xg(e,o,b)}catch(Q){Md(e,o,Q)}}function Xg(e,o,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(u){Wg(e,o,u)},function(u){return Md(e,o,u)}):Wg(e,o,i)}function Wg(e,o,i){o.status="fulfilled",o.value=i,Zg(o),e.state=i,o=e.pending,o!==null&&(i=o.next,i===o?e.pending=null:(i=i.next,o.next=i,Yg(e,i)))}function Md(e,o,i){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=i,Zg(o),o=o.next;while(o!==u)}e.action=null}function Zg(e){e=e.listeners;for(var o=0;o<e.length;o++)(0,e[o])()}function Jg(e,o){return o}function em(e,o){if(Xe){var i=ft.formState;if(i!==null){e:{var u=Le;if(Xe){if(bt){t:{for(var y=bt,b=qn;y.nodeType!==8;){if(!b){y=null;break t}if(y=Un(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){bt=Un(y.nextSibling),u=y.data==="F!";break e}}co(u)}u=!1}u&&(o=i[0])}}return i=cn(),i.memoizedState=i.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jg,lastRenderedState:o},i.queue=u,i=bm.bind(null,Le,u),u.dispatch=i,u=Sd(!1),b=jd.bind(null,Le,!1,u.queue),u=cn(),y={state:o,dispatch:null,action:e,pending:null},u.queue=y,i=$S.bind(null,Le,y,b,i),y.dispatch=i,u.memoizedState=e,[o,i,!1]}function tm(e){var o=At();return nm(o,ct,e)}function nm(e,o,i){if(o=wd(e,o,Jg)[0],e=xl(Is)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Kr(o)}catch(M){throw M===Ha?ul:M}else u=o;o=At();var y=o.queue,b=y.dispatch;return i!==o.memoizedState&&(Le.flags|=2048,Qa(9,{destroy:void 0},GS.bind(null,y,i),null)),[u,b,e]}function GS(e,o){e.action=o}function sm(e){var o=At(),i=ct;if(i!==null)return nm(o,i,e);At(),o=o.memoizedState,i=At();var u=i.queue.dispatch;return i.memoizedState=e,[o,u,!1]}function Qa(e,o,i,u){return e={tag:e,create:i,deps:u,inst:o,next:null},o=Le.updateQueue,o===null&&(o=vl(),Le.updateQueue=o),i=o.lastEffect,i===null?o.lastEffect=e.next=e:(u=i.next,i.next=e,e.next=u,o.lastEffect=e),e}function om(){return At().memoizedState}function wl(e,o,i,u){var y=cn();Le.flags|=e,y.memoizedState=Qa(1|o,{destroy:void 0},i,u===void 0?null:u)}function Cl(e,o,i,u){var y=At();u=u===void 0?null:u;var b=y.memoizedState.inst;ct!==null&&u!==null&&gd(u,ct.memoizedState.deps)?y.memoizedState=Qa(o,b,i,u):(Le.flags|=e,y.memoizedState=Qa(1|o,b,i,u))}function am(e,o){wl(8390656,8,e,o)}function Ed(e,o){Cl(2048,8,e,o)}function QS(e){Le.flags|=4;var o=Le.updateQueue;if(o===null)o=vl(),Le.updateQueue=o,o.events=[e];else{var i=o.events;i===null?o.events=[e]:i.push(e)}}function rm(e){var o=At().memoizedState;return QS({ref:o,nextImpl:e}),function(){if((tt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function im(e,o){return Cl(4,2,e,o)}function lm(e,o){return Cl(4,4,e,o)}function cm(e,o){if(typeof o=="function"){e=e();var i=o(e);return function(){typeof i=="function"?i():o(null)}}if(o!=null)return e=e(),o.current=e,function(){o.current=null}}function um(e,o,i){i=i!=null?i.concat([e]):null,Cl(4,4,cm.bind(null,o,e),i)}function Rd(){}function dm(e,o){var i=At();o=o===void 0?null:o;var u=i.memoizedState;return o!==null&&gd(o,u[1])?u[0]:(i.memoizedState=[e,o],e)}function fm(e,o){var i=At();o=o===void 0?null:o;var u=i.memoizedState;if(o!==null&&gd(o,u[1]))return u[0];if(u=e(),oa){Ft(!0);try{e()}finally{Ft(!1)}}return i.memoizedState=[u,o],u}function Nd(e,o,i){return i===void 0||(Ps&1073741824)!==0&&(Fe&261930)===0?e.memoizedState=o:(e.memoizedState=i,e=hy(),Le.lanes|=e,bo|=e,i)}function hm(e,o,i,u){return xn(i,o)?i:Ba.current!==null?(e=Nd(e,i,u),xn(e,o)||(Pt=!0),e):(Ps&42)===0||(Ps&1073741824)!==0&&(Fe&261930)===0?(Pt=!0,e.memoizedState=i):(e=hy(),Le.lanes|=e,bo|=e,o)}function pm(e,o,i,u,y){var b=D.p;D.p=b!==0&&8>b?b:8;var M=z.T,A={};z.T=A,jd(e,!1,o,i);try{var O=y(),Q=z.S;if(Q!==null&&Q(A,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ne=HS(O,u);Yr(e,o,ne,Rn(e))}else Yr(e,o,u,Rn(e))}catch(ie){Yr(e,o,{then:function(){},status:"rejected",reason:ie},Rn())}finally{D.p=b,M!==null&&A.types!==null&&(M.types=A.types),z.T=M}}function FS(){}function Ad(e,o,i,u){if(e.tag!==5)throw Error(s(476));var y=gm(e).queue;pm(e,y,o,L,i===null?FS:function(){return mm(e),i(u)})}function gm(e){var o=e.memoizedState;if(o!==null)return o;o={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:L},next:null};var i={};return o.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:i},next:null},e.memoizedState=o,e=e.alternate,e!==null&&(e.memoizedState=o),o}function mm(e){var o=gm(e);o.next===null&&(o=e.alternate.memoizedState),Yr(e,o.next.queue,{},Rn())}function Td(){return Jt(fi)}function ym(){return At().memoizedState}function vm(){return At().memoizedState}function VS(e){for(var o=e.return;o!==null;){switch(o.tag){case 24:case 3:var i=Rn();e=ho(i);var u=po(o,e,i);u!==null&&(yn(u,o,i),Gr(u,o,i)),o={cache:od()},e.payload=o;return}o=o.return}}function KS(e,o,i){var u=Rn();i={lane:u,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Sl(e)?xm(o,i):(i=Vu(e,o,i,u),i!==null&&(yn(i,e,u),wm(i,o,u)))}function bm(e,o,i){var u=Rn();Yr(e,o,i,u)}function Yr(e,o,i,u){var y={lane:u,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Sl(e))xm(o,y);else{var b=e.alternate;if(e.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var M=o.lastRenderedState,A=b(M,i);if(y.hasEagerState=!0,y.eagerState=A,xn(A,M))return sl(e,o,y,0),ft===null&&nl(),!1}catch{}finally{}if(i=Vu(e,o,y,u),i!==null)return yn(i,e,u),wm(i,o,u),!0}return!1}function jd(e,o,i,u){if(u={lane:2,revertLane:cf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sl(e)){if(o)throw Error(s(479))}else o=Vu(e,i,u,2),o!==null&&yn(o,e,2)}function Sl(e){var o=e.alternate;return e===Le||o!==null&&o===Le}function xm(e,o){$a=ml=!0;var i=e.pending;i===null?o.next=o:(o.next=i.next,i.next=o),e.pending=o}function wm(e,o,i){if((i&4194048)!==0){var u=o.lanes;u&=e.pendingLanes,i|=u,o.lanes=i,lt(e,i)}}var Xr={readContext:Jt,use:bl,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};Xr.useEffectEvent=St;var Cm={readContext:Jt,use:bl,useCallback:function(e,o){return cn().memoizedState=[e,o===void 0?null:o],e},useContext:Jt,useEffect:am,useImperativeHandle:function(e,o,i){i=i!=null?i.concat([e]):null,wl(4194308,4,cm.bind(null,o,e),i)},useLayoutEffect:function(e,o){return wl(4194308,4,e,o)},useInsertionEffect:function(e,o){wl(4,2,e,o)},useMemo:function(e,o){var i=cn();o=o===void 0?null:o;var u=e();if(oa){Ft(!0);try{e()}finally{Ft(!1)}}return i.memoizedState=[u,o],u},useReducer:function(e,o,i){var u=cn();if(i!==void 0){var y=i(o);if(oa){Ft(!0);try{i(o)}finally{Ft(!1)}}}else y=o;return u.memoizedState=u.baseState=y,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:y},u.queue=e,e=e.dispatch=KS.bind(null,Le,e),[u.memoizedState,e]},useRef:function(e){var o=cn();return e={current:e},o.memoizedState=e},useState:function(e){e=Sd(e);var o=e.queue,i=bm.bind(null,Le,o);return o.dispatch=i,[e.memoizedState,i]},useDebugValue:Rd,useDeferredValue:function(e,o){var i=cn();return Nd(i,e,o)},useTransition:function(){var e=Sd(!1);return e=pm.bind(null,Le,e.queue,!0,!1),cn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,o,i){var u=Le,y=cn();if(Xe){if(i===void 0)throw Error(s(407));i=i()}else{if(i=o(),ft===null)throw Error(s(349));(Fe&127)!==0||$g(u,o,i)}y.memoizedState=i;var b={value:i,getSnapshot:o};return y.queue=b,am(Qg.bind(null,u,b,e),[e]),u.flags|=2048,Qa(9,{destroy:void 0},Gg.bind(null,u,b,i,o),null),i},useId:function(){var e=cn(),o=ft.identifierPrefix;if(Xe){var i=cs,u=ls;i=(u&~(1<<32-_t(u)-1)).toString(32)+i,o="_"+o+"R_"+i,i=yl++,0<i&&(o+="H"+i.toString(32)),o+="_"}else i=US++,o="_"+o+"r_"+i.toString(32)+"_";return e.memoizedState=o},useHostTransitionStatus:Td,useFormState:em,useActionState:em,useOptimistic:function(e){var o=cn();o.memoizedState=o.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=i,o=jd.bind(null,Le,!0,i),i.dispatch=o,[e,o]},useMemoCache:xd,useCacheRefresh:function(){return cn().memoizedState=VS.bind(null,Le)},useEffectEvent:function(e){var o=cn(),i={impl:e};return o.memoizedState=i,function(){if((tt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},kd={readContext:Jt,use:bl,useCallback:dm,useContext:Jt,useEffect:Ed,useImperativeHandle:um,useInsertionEffect:im,useLayoutEffect:lm,useMemo:fm,useReducer:xl,useRef:om,useState:function(){return xl(Is)},useDebugValue:Rd,useDeferredValue:function(e,o){var i=At();return hm(i,ct.memoizedState,e,o)},useTransition:function(){var e=xl(Is)[0],o=At().memoizedState;return[typeof e=="boolean"?e:Kr(e),o]},useSyncExternalStore:Bg,useId:ym,useHostTransitionStatus:Td,useFormState:tm,useActionState:tm,useOptimistic:function(e,o){var i=At();return Kg(i,ct,e,o)},useMemoCache:xd,useCacheRefresh:vm};kd.useEffectEvent=rm;var Sm={readContext:Jt,use:bl,useCallback:dm,useContext:Jt,useEffect:Ed,useImperativeHandle:um,useInsertionEffect:im,useLayoutEffect:lm,useMemo:fm,useReducer:Cd,useRef:om,useState:function(){return Cd(Is)},useDebugValue:Rd,useDeferredValue:function(e,o){var i=At();return ct===null?Nd(i,e,o):hm(i,ct.memoizedState,e,o)},useTransition:function(){var e=Cd(Is)[0],o=At().memoizedState;return[typeof e=="boolean"?e:Kr(e),o]},useSyncExternalStore:Bg,useId:ym,useHostTransitionStatus:Td,useFormState:sm,useActionState:sm,useOptimistic:function(e,o){var i=At();return ct!==null?Kg(i,ct,e,o):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:xd,useCacheRefresh:vm};Sm.useEffectEvent=rm;function Dd(e,o,i,u){o=e.memoizedState,i=i(u,o),i=i==null?o:m({},o,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var _d={enqueueSetState:function(e,o,i){e=e._reactInternals;var u=Rn(),y=ho(u);y.payload=o,i!=null&&(y.callback=i),o=po(e,y,u),o!==null&&(yn(o,e,u),Gr(o,e,u))},enqueueReplaceState:function(e,o,i){e=e._reactInternals;var u=Rn(),y=ho(u);y.tag=1,y.payload=o,i!=null&&(y.callback=i),o=po(e,y,u),o!==null&&(yn(o,e,u),Gr(o,e,u))},enqueueForceUpdate:function(e,o){e=e._reactInternals;var i=Rn(),u=ho(i);u.tag=2,o!=null&&(u.callback=o),o=po(e,u,i),o!==null&&(yn(o,e,i),Gr(o,e,i))}};function Mm(e,o,i,u,y,b,M){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,b,M):o.prototype&&o.prototype.isPureReactComponent?!Lr(i,u)||!Lr(y,b):!0}function Em(e,o,i,u){e=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(i,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(i,u),o.state!==e&&_d.enqueueReplaceState(o,o.state,null)}function aa(e,o){var i=o;if("ref"in o){i={};for(var u in o)u!=="ref"&&(i[u]=o[u])}if(e=e.defaultProps){i===o&&(i=m({},i));for(var y in e)i[y]===void 0&&(i[y]=e[y])}return i}function Rm(e){tl(e)}function Nm(e){console.error(e)}function Am(e){tl(e)}function Ml(e,o){try{var i=e.onUncaughtError;i(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Tm(e,o,i){try{var u=e.onCaughtError;u(i.value,{componentStack:i.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function zd(e,o,i){return i=ho(i),i.tag=3,i.payload={element:null},i.callback=function(){Ml(e,o)},i}function jm(e){return e=ho(e),e.tag=3,e}function km(e,o,i,u){var y=i.type.getDerivedStateFromError;if(typeof y=="function"){var b=u.value;e.payload=function(){return y(b)},e.callback=function(){Tm(o,i,u)}}var M=i.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(e.callback=function(){Tm(o,i,u),typeof y!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function YS(e,o,i,u,y){if(i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=i.alternate,o!==null&&Pa(o,i,y,!0),i=Cn.current,i!==null){switch(i.tag){case 31:case 13:return Hn===null?Ll():i.alternate===null&&Mt===0&&(Mt=3),i.flags&=-257,i.flags|=65536,i.lanes=y,u===dl?i.flags|=16384:(o=i.updateQueue,o===null?i.updateQueue=new Set([u]):o.add(u),af(e,u,y)),!1;case 22:return i.flags|=65536,u===dl?i.flags|=16384:(o=i.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},i.updateQueue=o):(i=o.retryQueue,i===null?o.retryQueue=new Set([u]):i.add(u)),af(e,u,y)),!1}throw Error(s(435,i.tag))}return af(e,u,y),Ll(),!1}if(Xe)return o=Cn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,u!==Ju&&(e=Error(s(422),{cause:u}),qr(Ln(e,i)))):(u!==Ju&&(o=Error(s(423),{cause:u}),qr(Ln(o,i))),e=e.current.alternate,e.flags|=65536,y&=-y,e.lanes|=y,u=Ln(u,i),y=zd(e.stateNode,u,y),ud(e,y),Mt!==4&&(Mt=2)),!1;var b=Error(s(520),{cause:u});if(b=Ln(b,i),oi===null?oi=[b]:oi.push(b),Mt!==4&&(Mt=2),o===null)return!0;u=Ln(u,i),i=o;do{switch(i.tag){case 3:return i.flags|=65536,e=y&-y,i.lanes|=e,e=zd(i.stateNode,u,e),ud(i,e),!1;case 1:if(o=i.type,b=i.stateNode,(i.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(xo===null||!xo.has(b))))return i.flags|=65536,y&=-y,i.lanes|=y,y=jm(y),km(y,e,i,u),ud(i,y),!1}i=i.return}while(i!==null);return!1}var Od=Error(s(461)),Pt=!1;function en(e,o,i,u){o.child=e===null?Og(o,null,i,u):sa(o,e.child,i,u)}function Dm(e,o,i,u,y){i=i.render;var b=o.ref;if("ref"in u){var M={};for(var A in u)A!=="ref"&&(M[A]=u[A])}else M=u;return Jo(o),u=md(e,o,i,M,b,y),A=yd(),e!==null&&!Pt?(vd(e,o,y),qs(e,o,y)):(Xe&&A&&Wu(o),o.flags|=1,en(e,o,u,y),o.child)}function _m(e,o,i,u,y){if(e===null){var b=i.type;return typeof b=="function"&&!Ku(b)&&b.defaultProps===void 0&&i.compare===null?(o.tag=15,o.type=b,zm(e,o,b,u,y)):(e=al(i.type,null,u,o,o.mode,y),e.ref=o.ref,e.return=o,o.child=e)}if(b=e.child,!$d(e,y)){var M=b.memoizedProps;if(i=i.compare,i=i!==null?i:Lr,i(M,u)&&e.ref===o.ref)return qs(e,o,y)}return o.flags|=1,e=_s(b,u),e.ref=o.ref,e.return=o,o.child=e}function zm(e,o,i,u,y){if(e!==null){var b=e.memoizedProps;if(Lr(b,u)&&e.ref===o.ref)if(Pt=!1,o.pendingProps=u=b,$d(e,y))(e.flags&131072)!==0&&(Pt=!0);else return o.lanes=e.lanes,qs(e,o,y)}return Ld(e,o,i,u,y)}function Om(e,o,i,u){var y=u.children,b=e!==null?e.memoizedState:null;if(e===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|i:i,e!==null){for(u=o.child=e.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~b}else u=0,o.child=null;return Lm(e,o,b,i,u)}if((i&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},e!==null&&cl(o,b!==null?b.cachePool:null),b!==null?Ig(o,b):fd(),qg(o);else return u=o.lanes=536870912,Lm(e,o,b!==null?b.baseLanes|i:i,i,u)}else b!==null?(cl(o,b.cachePool),Ig(o,b),mo(),o.memoizedState=null):(e!==null&&cl(o,null),fd(),mo());return en(e,o,y,i),o.child}function Wr(e,o){return e!==null&&e.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Lm(e,o,i,u,y){var b=rd();return b=b===null?null:{parent:Ot._currentValue,pool:b},o.memoizedState={baseLanes:i,cachePool:b},e!==null&&cl(o,null),fd(),qg(o),e!==null&&Pa(e,o,u,!0),o.childLanes=y,null}function El(e,o){return o=Nl({mode:o.mode,children:o.children},e.mode),o.ref=e.ref,e.child=o,o.return=e,o}function Pm(e,o,i){return sa(o,e.child,null,i),e=El(o,o.pendingProps),e.flags|=2,Sn(o),o.memoizedState=null,e}function XS(e,o,i){var u=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,e===null){if(Xe){if(u.mode==="hidden")return e=El(o,u),o.lanes=536870912,Wr(null,e);if(pd(o),(e=bt)?(e=Yy(e,qn),e=e!==null&&e.data==="&"?e:null,e!==null&&(o.memoizedState={dehydrated:e,treeContext:io!==null?{id:ls,overflow:cs}:null,retryLane:536870912,hydrationErrors:null},i=xg(e),i.return=o,o.child=i,Zt=o,bt=null)):e=null,e===null)throw co(o);return o.lanes=536870912,null}return El(o,u)}var b=e.memoizedState;if(b!==null){var M=b.dehydrated;if(pd(o),y)if(o.flags&256)o.flags&=-257,o=Pm(e,o,i);else if(o.memoizedState!==null)o.child=e.child,o.flags|=128,o=null;else throw Error(s(558));else if(Pt||Pa(e,o,i,!1),y=(i&e.childLanes)!==0,Pt||y){if(u=ft,u!==null&&(M=zt(u,i),M!==0&&M!==b.retryLane))throw b.retryLane=M,Yo(e,M),yn(u,e,M),Od;Ll(),o=Pm(e,o,i)}else e=b.treeContext,bt=Un(M.nextSibling),Zt=o,Xe=!0,lo=null,qn=!1,e!==null&&Sg(o,e),o=El(o,u),o.flags|=4096;return o}return e=_s(e.child,{mode:u.mode,children:u.children}),e.ref=o.ref,o.child=e,e.return=o,e}function Rl(e,o){var i=o.ref;if(i===null)e!==null&&e.ref!==null&&(o.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(o.flags|=4194816)}}function Ld(e,o,i,u,y){return Jo(o),i=md(e,o,i,u,void 0,y),u=yd(),e!==null&&!Pt?(vd(e,o,y),qs(e,o,y)):(Xe&&u&&Wu(o),o.flags|=1,en(e,o,i,y),o.child)}function Im(e,o,i,u,y,b){return Jo(o),o.updateQueue=null,i=Ug(o,u,i,y),Hg(e),u=yd(),e!==null&&!Pt?(vd(e,o,b),qs(e,o,b)):(Xe&&u&&Wu(o),o.flags|=1,en(e,o,i,b),o.child)}function qm(e,o,i,u,y){if(Jo(o),o.stateNode===null){var b=_a,M=i.contextType;typeof M=="object"&&M!==null&&(b=Jt(M)),b=new i(u,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=_d,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=u,b.state=o.memoizedState,b.refs={},ld(o),M=i.contextType,b.context=typeof M=="object"&&M!==null?Jt(M):_a,b.state=o.memoizedState,M=i.getDerivedStateFromProps,typeof M=="function"&&(Dd(o,i,M,u),b.state=o.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(M=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),M!==b.state&&_d.enqueueReplaceState(b,b.state,null),Fr(o,u,b,y),Qr(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(e===null){b=o.stateNode;var A=o.memoizedProps,O=aa(i,A);b.props=O;var Q=b.context,ne=i.contextType;M=_a,typeof ne=="object"&&ne!==null&&(M=Jt(ne));var ie=i.getDerivedStateFromProps;ne=typeof ie=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,ne||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||Q!==M)&&Em(o,b,u,M),fo=!1;var K=o.memoizedState;b.state=K,Fr(o,u,b,y),Qr(),Q=o.memoizedState,A||K!==Q||fo?(typeof ie=="function"&&(Dd(o,i,ie,u),Q=o.memoizedState),(O=fo||Mm(o,i,O,u,K,Q,M))?(ne||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=Q),b.props=u,b.state=Q,b.context=M,u=O):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{b=o.stateNode,cd(e,o),M=o.memoizedProps,ne=aa(i,M),b.props=ne,ie=o.pendingProps,K=b.context,Q=i.contextType,O=_a,typeof Q=="object"&&Q!==null&&(O=Jt(Q)),A=i.getDerivedStateFromProps,(Q=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M!==ie||K!==O)&&Em(o,b,u,O),fo=!1,K=o.memoizedState,b.state=K,Fr(o,u,b,y),Qr();var Z=o.memoizedState;M!==ie||K!==Z||fo||e!==null&&e.dependencies!==null&&il(e.dependencies)?(typeof A=="function"&&(Dd(o,i,A,u),Z=o.memoizedState),(ne=fo||Mm(o,i,ne,u,K,Z,O)||e!==null&&e.dependencies!==null&&il(e.dependencies))?(Q||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(u,Z,O),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(u,Z,O)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||M===e.memoizedProps&&K===e.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&K===e.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=Z),b.props=u,b.state=Z,b.context=O,u=ne):(typeof b.componentDidUpdate!="function"||M===e.memoizedProps&&K===e.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&K===e.memoizedState||(o.flags|=1024),u=!1)}return b=u,Rl(e,o),u=(o.flags&128)!==0,b||u?(b=o.stateNode,i=u&&typeof i.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,e!==null&&u?(o.child=sa(o,e.child,null,y),o.child=sa(o,null,i,y)):en(e,o,i,y),o.memoizedState=b.state,e=o.child):e=qs(e,o,y),e}function Hm(e,o,i,u){return Wo(),o.flags|=256,en(e,o,i,u),o.child}var Pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Id(e){return{baseLanes:e,cachePool:Tg()}}function qd(e,o,i){return e=e!==null?e.childLanes&~i:0,o&&(e|=En),e}function Um(e,o,i){var u=o.pendingProps,y=!1,b=(o.flags&128)!==0,M;if((M=b)||(M=e!==null&&e.memoizedState===null?!1:(Nt.current&2)!==0),M&&(y=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,e===null){if(Xe){if(y?go(o):mo(),(e=bt)?(e=Yy(e,qn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(o.memoizedState={dehydrated:e,treeContext:io!==null?{id:ls,overflow:cs}:null,retryLane:536870912,hydrationErrors:null},i=xg(e),i.return=o,o.child=i,Zt=o,bt=null)):e=null,e===null)throw co(o);return Cf(e)?o.lanes=32:o.lanes=536870912,null}var A=u.children;return u=u.fallback,y?(mo(),y=o.mode,A=Nl({mode:"hidden",children:A},y),u=Xo(u,y,i,null),A.return=o,u.return=o,A.sibling=u,o.child=A,u=o.child,u.memoizedState=Id(i),u.childLanes=qd(e,M,i),o.memoizedState=Pd,Wr(null,u)):(go(o),Hd(o,A))}var O=e.memoizedState;if(O!==null&&(A=O.dehydrated,A!==null)){if(b)o.flags&256?(go(o),o.flags&=-257,o=Ud(e,o,i)):o.memoizedState!==null?(mo(),o.child=e.child,o.flags|=128,o=null):(mo(),A=u.fallback,y=o.mode,u=Nl({mode:"visible",children:u.children},y),A=Xo(A,y,i,null),A.flags|=2,u.return=o,A.return=o,u.sibling=A,o.child=u,sa(o,e.child,null,i),u=o.child,u.memoizedState=Id(i),u.childLanes=qd(e,M,i),o.memoizedState=Pd,o=Wr(null,u));else if(go(o),Cf(A)){if(M=A.nextSibling&&A.nextSibling.dataset,M)var Q=M.dgst;M=Q,u=Error(s(419)),u.stack="",u.digest=M,qr({value:u,source:null,stack:null}),o=Ud(e,o,i)}else if(Pt||Pa(e,o,i,!1),M=(i&e.childLanes)!==0,Pt||M){if(M=ft,M!==null&&(u=zt(M,i),u!==0&&u!==O.retryLane))throw O.retryLane=u,Yo(e,u),yn(M,e,u),Od;wf(A)||Ll(),o=Ud(e,o,i)}else wf(A)?(o.flags|=192,o.child=e.child,o=null):(e=O.treeContext,bt=Un(A.nextSibling),Zt=o,Xe=!0,lo=null,qn=!1,e!==null&&Sg(o,e),o=Hd(o,u.children),o.flags|=4096);return o}return y?(mo(),A=u.fallback,y=o.mode,O=e.child,Q=O.sibling,u=_s(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,Q!==null?A=_s(Q,A):(A=Xo(A,y,i,null),A.flags|=2),A.return=o,u.return=o,u.sibling=A,o.child=u,Wr(null,u),u=o.child,A=e.child.memoizedState,A===null?A=Id(i):(y=A.cachePool,y!==null?(O=Ot._currentValue,y=y.parent!==O?{parent:O,pool:O}:y):y=Tg(),A={baseLanes:A.baseLanes|i,cachePool:y}),u.memoizedState=A,u.childLanes=qd(e,M,i),o.memoizedState=Pd,Wr(e.child,u)):(go(o),i=e.child,e=i.sibling,i=_s(i,{mode:"visible",children:u.children}),i.return=o,i.sibling=null,e!==null&&(M=o.deletions,M===null?(o.deletions=[e],o.flags|=16):M.push(e)),o.child=i,o.memoizedState=null,i)}function Hd(e,o){return o=Nl({mode:"visible",children:o},e.mode),o.return=e,e.child=o}function Nl(e,o){return e=wn(22,e,null,o),e.lanes=0,e}function Ud(e,o,i){return sa(o,e.child,null,i),e=Hd(o,o.pendingProps.children),e.flags|=2,o.memoizedState=null,e}function Bm(e,o,i){e.lanes|=o;var u=e.alternate;u!==null&&(u.lanes|=o),nd(e.return,o,i)}function Bd(e,o,i,u,y,b){var M=e.memoizedState;M===null?e.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:i,tailMode:y,treeForkCount:b}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=u,M.tail=i,M.tailMode=y,M.treeForkCount=b)}function $m(e,o,i){var u=o.pendingProps,y=u.revealOrder,b=u.tail;u=u.children;var M=Nt.current,A=(M&2)!==0;if(A?(M=M&1|2,o.flags|=128):M&=1,X(Nt,M),en(e,o,u,i),u=Xe?Ir:0,!A&&e!==null&&(e.flags&128)!==0)e:for(e=o.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bm(e,i,o);else if(e.tag===19)Bm(e,i,o);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===o)break e;for(;e.sibling===null;){if(e.return===null||e.return===o)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(y){case"forwards":for(i=o.child,y=null;i!==null;)e=i.alternate,e!==null&&gl(e)===null&&(y=i),i=i.sibling;i=y,i===null?(y=o.child,o.child=null):(y=i.sibling,i.sibling=null),Bd(o,!1,y,i,b,u);break;case"backwards":case"unstable_legacy-backwards":for(i=null,y=o.child,o.child=null;y!==null;){if(e=y.alternate,e!==null&&gl(e)===null){o.child=y;break}e=y.sibling,y.sibling=i,i=y,y=e}Bd(o,!0,i,null,b,u);break;case"together":Bd(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function qs(e,o,i){if(e!==null&&(o.dependencies=e.dependencies),bo|=o.lanes,(i&o.childLanes)===0)if(e!==null){if(Pa(e,o,i,!1),(i&o.childLanes)===0)return null}else return null;if(e!==null&&o.child!==e.child)throw Error(s(153));if(o.child!==null){for(e=o.child,i=_s(e,e.pendingProps),o.child=i,i.return=o;e.sibling!==null;)e=e.sibling,i=i.sibling=_s(e,e.pendingProps),i.return=o;i.sibling=null}return o.child}function $d(e,o){return(e.lanes&o)!==0?!0:(e=e.dependencies,!!(e!==null&&il(e)))}function WS(e,o,i){switch(o.tag){case 3:V(o,o.stateNode.containerInfo),uo(o,Ot,e.memoizedState.cache),Wo();break;case 27:case 5:me(o);break;case 4:V(o,o.stateNode.containerInfo);break;case 10:uo(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,pd(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(go(o),o.flags|=128,null):(i&o.child.childLanes)!==0?Um(e,o,i):(go(o),e=qs(e,o,i),e!==null?e.sibling:null);go(o);break;case 19:var y=(e.flags&128)!==0;if(u=(i&o.childLanes)!==0,u||(Pa(e,o,i,!1),u=(i&o.childLanes)!==0),y){if(u)return $m(e,o,i);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),X(Nt,Nt.current),u)break;return null;case 22:return o.lanes=0,Om(e,o,i,o.pendingProps);case 24:uo(o,Ot,e.memoizedState.cache)}return qs(e,o,i)}function Gm(e,o,i){if(e!==null)if(e.memoizedProps!==o.pendingProps)Pt=!0;else{if(!$d(e,i)&&(o.flags&128)===0)return Pt=!1,WS(e,o,i);Pt=(e.flags&131072)!==0}else Pt=!1,Xe&&(o.flags&1048576)!==0&&Cg(o,Ir,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(e=ta(o.elementType),o.type=e,typeof e=="function")Ku(e)?(u=aa(e,u),o.tag=1,o=qm(null,o,e,u,i)):(o.tag=0,o=Ld(null,o,e,u,i));else{if(e!=null){var y=e.$$typeof;if(y===T){o.tag=11,o=Dm(null,o,e,u,i);break e}else if(y===I){o.tag=14,o=_m(null,o,e,u,i);break e}}throw o=ce(e)||e,Error(s(306,o,""))}}return o;case 0:return Ld(e,o,o.type,o.pendingProps,i);case 1:return u=o.type,y=aa(u,o.pendingProps),qm(e,o,u,y,i);case 3:e:{if(V(o,o.stateNode.containerInfo),e===null)throw Error(s(387));u=o.pendingProps;var b=o.memoizedState;y=b.element,cd(e,o),Fr(o,u,null,i);var M=o.memoizedState;if(u=M.cache,uo(o,Ot,u),u!==b.cache&&sd(o,[Ot],i,!0),Qr(),u=M.element,b.isDehydrated)if(b={element:u,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Hm(e,o,u,i);break e}else if(u!==y){y=Ln(Error(s(424)),o),qr(y),o=Hm(e,o,u,i);break e}else{switch(e=o.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(bt=Un(e.firstChild),Zt=o,Xe=!0,lo=null,qn=!0,i=Og(o,null,u,i),o.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Wo(),u===y){o=qs(e,o,i);break e}en(e,o,u,i)}o=o.child}return o;case 26:return Rl(e,o),e===null?(i=tv(o.type,null,o.pendingProps,null))?o.memoizedState=i:Xe||(i=o.type,e=o.pendingProps,u=$l(ae.current).createElement(i),u[mt]=o,u[Ht]=e,tn(u,i,e),Vt(u),o.stateNode=u):o.memoizedState=tv(o.type,e.memoizedProps,o.pendingProps,e.memoizedState),null;case 27:return me(o),e===null&&Xe&&(u=o.stateNode=Zy(o.type,o.pendingProps,ae.current),Zt=o,qn=!0,y=bt,Mo(o.type)?(Sf=y,bt=Un(u.firstChild)):bt=y),en(e,o,o.pendingProps.children,i),Rl(e,o),e===null&&(o.flags|=4194304),o.child;case 5:return e===null&&Xe&&((y=u=bt)&&(u=NM(u,o.type,o.pendingProps,qn),u!==null?(o.stateNode=u,Zt=o,bt=Un(u.firstChild),qn=!1,y=!0):y=!1),y||co(o)),me(o),y=o.type,b=o.pendingProps,M=e!==null?e.memoizedProps:null,u=b.children,vf(y,b)?u=null:M!==null&&vf(y,M)&&(o.flags|=32),o.memoizedState!==null&&(y=md(e,o,BS,null,null,i),fi._currentValue=y),Rl(e,o),en(e,o,u,i),o.child;case 6:return e===null&&Xe&&((e=i=bt)&&(i=AM(i,o.pendingProps,qn),i!==null?(o.stateNode=i,Zt=o,bt=null,e=!0):e=!1),e||co(o)),null;case 13:return Um(e,o,i);case 4:return V(o,o.stateNode.containerInfo),u=o.pendingProps,e===null?o.child=sa(o,null,u,i):en(e,o,u,i),o.child;case 11:return Dm(e,o,o.type,o.pendingProps,i);case 7:return en(e,o,o.pendingProps,i),o.child;case 8:return en(e,o,o.pendingProps.children,i),o.child;case 12:return en(e,o,o.pendingProps.children,i),o.child;case 10:return u=o.pendingProps,uo(o,o.type,u.value),en(e,o,u.children,i),o.child;case 9:return y=o.type._context,u=o.pendingProps.children,Jo(o),y=Jt(y),u=u(y),o.flags|=1,en(e,o,u,i),o.child;case 14:return _m(e,o,o.type,o.pendingProps,i);case 15:return zm(e,o,o.type,o.pendingProps,i);case 19:return $m(e,o,i);case 31:return XS(e,o,i);case 22:return Om(e,o,i,o.pendingProps);case 24:return Jo(o),u=Jt(Ot),e===null?(y=rd(),y===null&&(y=ft,b=od(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=i),y=b),o.memoizedState={parent:u,cache:y},ld(o),uo(o,Ot,y)):((e.lanes&i)!==0&&(cd(e,o),Fr(o,null,null,i),Qr()),y=e.memoizedState,b=o.memoizedState,y.parent!==u?(y={parent:u,cache:u},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),uo(o,Ot,u)):(u=b.cache,uo(o,Ot,u),u!==y.cache&&sd(o,[Ot],i,!0))),en(e,o,o.pendingProps.children,i),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Hs(e){e.flags|=4}function Gd(e,o,i,u,y){if((o=(e.mode&32)!==0)&&(o=!1),o){if(e.flags|=16777216,(y&335544128)===y)if(e.stateNode.complete)e.flags|=8192;else if(yy())e.flags|=8192;else throw na=dl,id}else e.flags&=-16777217}function Qm(e,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!rv(o))if(yy())e.flags|=8192;else throw na=dl,id}function Al(e,o){o!==null&&(e.flags|=4),e.flags&16384&&(o=e.tag!==22?J():536870912,e.lanes|=o,Ya|=o)}function Zr(e,o){if(!Xe)switch(e.tailMode){case"hidden":o=e.tail;for(var i=null;o!==null;)o.alternate!==null&&(i=o),o=o.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?o||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function xt(e){var o=e.alternate!==null&&e.alternate.child===e.child,i=0,u=0;if(o)for(var y=e.child;y!==null;)i|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)i|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=u,e.childLanes=i,o}function ZS(e,o,i){var u=o.pendingProps;switch(Zu(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(o),null;case 1:return xt(o),null;case 3:return i=o.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ls(Ot),pe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(La(o)?Hs(o):e===null||e.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ed())),xt(o),null;case 26:var y=o.type,b=o.memoizedState;return e===null?(Hs(o),b!==null?(xt(o),Qm(o,b)):(xt(o),Gd(o,y,null,u,i))):b?b!==e.memoizedState?(Hs(o),xt(o),Qm(o,b)):(xt(o),o.flags&=-16777217):(e=e.memoizedProps,e!==u&&Hs(o),xt(o),Gd(o,y,e,u,i)),null;case 27:if(ye(o),i=ae.current,y=o.type,e!==null&&o.stateNode!=null)e.memoizedProps!==u&&Hs(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return xt(o),null}e=W.current,La(o)?Mg(o):(e=Zy(y,u,i),o.stateNode=e,Hs(o))}return xt(o),null;case 5:if(ye(o),y=o.type,e!==null&&o.stateNode!=null)e.memoizedProps!==u&&Hs(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return xt(o),null}if(b=W.current,La(o))Mg(o);else{var M=$l(ae.current);switch(b){case 1:b=M.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=M.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=M.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=M.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=M.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof u.is=="string"?M.createElement("select",{is:u.is}):M.createElement("select"),u.multiple?b.multiple=!0:u.size&&(b.size=u.size);break;default:b=typeof u.is=="string"?M.createElement(y,{is:u.is}):M.createElement(y)}}b[mt]=o,b[Ht]=u;e:for(M=o.child;M!==null;){if(M.tag===5||M.tag===6)b.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===o)break e;for(;M.sibling===null;){if(M.return===null||M.return===o)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}o.stateNode=b;e:switch(tn(b,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Hs(o)}}return xt(o),Gd(o,o.type,e===null?null:e.memoizedProps,o.pendingProps,i),null;case 6:if(e&&o.stateNode!=null)e.memoizedProps!==u&&Hs(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(e=ae.current,La(o)){if(e=o.stateNode,i=o.memoizedProps,u=null,y=Zt,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}e[mt]=o,e=!!(e.nodeValue===i||u!==null&&u.suppressHydrationWarning===!0||Uy(e.nodeValue,i)),e||co(o,!0)}else e=$l(e).createTextNode(u),e[mt]=o,o.stateNode=e}return xt(o),null;case 31:if(i=o.memoizedState,e===null||e.memoizedState!==null){if(u=La(o),i!==null){if(e===null){if(!u)throw Error(s(318));if(e=o.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[mt]=o}else Wo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;xt(o),e=!1}else i=ed(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return o.flags&256?(Sn(o),o):(Sn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return xt(o),null;case 13:if(u=o.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(y=La(o),u!==null&&u.dehydrated!==null){if(e===null){if(!y)throw Error(s(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[mt]=o}else Wo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;xt(o),y=!1}else y=ed(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Sn(o),o):(Sn(o),null)}return Sn(o),(o.flags&128)!==0?(o.lanes=i,o):(i=u!==null,e=e!==null&&e.memoizedState!==null,i&&(u=o.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),b=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==y&&(u.flags|=2048)),i!==e&&i&&(o.child.flags|=8192),Al(o,o.updateQueue),xt(o),null);case 4:return pe(),e===null&&hf(o.stateNode.containerInfo),xt(o),null;case 10:return Ls(o.type),xt(o),null;case 19:if($(Nt),u=o.memoizedState,u===null)return xt(o),null;if(y=(o.flags&128)!==0,b=u.rendering,b===null)if(y)Zr(u,!1);else{if(Mt!==0||e!==null&&(e.flags&128)!==0)for(e=o.child;e!==null;){if(b=gl(e),b!==null){for(o.flags|=128,Zr(u,!1),e=b.updateQueue,o.updateQueue=e,Al(o,e),o.subtreeFlags=0,e=i,i=o.child;i!==null;)bg(i,e),i=i.sibling;return X(Nt,Nt.current&1|2),Xe&&zs(o,u.treeForkCount),o.child}e=e.sibling}u.tail!==null&&Ze()>_l&&(o.flags|=128,y=!0,Zr(u,!1),o.lanes=4194304)}else{if(!y)if(e=gl(b),e!==null){if(o.flags|=128,y=!0,e=e.updateQueue,o.updateQueue=e,Al(o,e),Zr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!b.alternate&&!Xe)return xt(o),null}else 2*Ze()-u.renderingStartTime>_l&&i!==536870912&&(o.flags|=128,y=!0,Zr(u,!1),o.lanes=4194304);u.isBackwards?(b.sibling=o.child,o.child=b):(e=u.last,e!==null?e.sibling=b:o.child=b,u.last=b)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=Ze(),e.sibling=null,i=Nt.current,X(Nt,y?i&1|2:i&1),Xe&&zs(o,u.treeForkCount),e):(xt(o),null);case 22:case 23:return Sn(o),hd(),u=o.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(i&536870912)!==0&&(o.flags&128)===0&&(xt(o),o.subtreeFlags&6&&(o.flags|=8192)):xt(o),i=o.updateQueue,i!==null&&Al(o,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==i&&(o.flags|=2048),e!==null&&$(ea),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),o.memoizedState.cache!==i&&(o.flags|=2048),Ls(Ot),xt(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function JS(e,o){switch(Zu(o),o.tag){case 1:return e=o.flags,e&65536?(o.flags=e&-65537|128,o):null;case 3:return Ls(Ot),pe(),e=o.flags,(e&65536)!==0&&(e&128)===0?(o.flags=e&-65537|128,o):null;case 26:case 27:case 5:return ye(o),null;case 31:if(o.memoizedState!==null){if(Sn(o),o.alternate===null)throw Error(s(340));Wo()}return e=o.flags,e&65536?(o.flags=e&-65537|128,o):null;case 13:if(Sn(o),e=o.memoizedState,e!==null&&e.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Wo()}return e=o.flags,e&65536?(o.flags=e&-65537|128,o):null;case 19:return $(Nt),null;case 4:return pe(),null;case 10:return Ls(o.type),null;case 22:case 23:return Sn(o),hd(),e!==null&&$(ea),e=o.flags,e&65536?(o.flags=e&-65537|128,o):null;case 24:return Ls(Ot),null;case 25:return null;default:return null}}function Fm(e,o){switch(Zu(o),o.tag){case 3:Ls(Ot),pe();break;case 26:case 27:case 5:ye(o);break;case 4:pe();break;case 31:o.memoizedState!==null&&Sn(o);break;case 13:Sn(o);break;case 19:$(Nt);break;case 10:Ls(o.type);break;case 22:case 23:Sn(o),hd(),e!==null&&$(ea);break;case 24:Ls(Ot)}}function Jr(e,o){try{var i=o.updateQueue,u=i!==null?i.lastEffect:null;if(u!==null){var y=u.next;i=y;do{if((i.tag&e)===e){u=void 0;var b=i.create,M=i.inst;u=b(),M.destroy=u}i=i.next}while(i!==y)}}catch(A){rt(o,o.return,A)}}function yo(e,o,i){try{var u=o.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var b=y.next;u=b;do{if((u.tag&e)===e){var M=u.inst,A=M.destroy;if(A!==void 0){M.destroy=void 0,y=o;var O=i,Q=A;try{Q()}catch(ne){rt(y,O,ne)}}}u=u.next}while(u!==b)}}catch(ne){rt(o,o.return,ne)}}function Vm(e){var o=e.updateQueue;if(o!==null){var i=e.stateNode;try{Pg(o,i)}catch(u){rt(e,e.return,u)}}}function Km(e,o,i){i.props=aa(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(u){rt(e,o,u)}}function ei(e,o){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var u=e.stateNode;break;case 30:u=e.stateNode;break;default:u=e.stateNode}typeof i=="function"?e.refCleanup=i(u):i.current=u}}catch(y){rt(e,o,y)}}function us(e,o){var i=e.ref,u=e.refCleanup;if(i!==null)if(typeof u=="function")try{u()}catch(y){rt(e,o,y)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(y){rt(e,o,y)}else i.current=null}function Ym(e){var o=e.type,i=e.memoizedProps,u=e.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":i.autoFocus&&u.focus();break e;case"img":i.src?u.src=i.src:i.srcSet&&(u.srcset=i.srcSet)}}catch(y){rt(e,e.return,y)}}function Qd(e,o,i){try{var u=e.stateNode;wM(u,e.type,i,o),u[Ht]=o}catch(y){rt(e,e.return,y)}}function Xm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Mo(e.type)||e.tag===4}function Fd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Mo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vd(e,o,i){var u=e.tag;if(u===5||u===6)e=e.stateNode,o?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,o):(o=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.appendChild(e),i=i._reactRootContainer,i!=null||o.onclick!==null||(o.onclick=ks));else if(u!==4&&(u===27&&Mo(e.type)&&(i=e.stateNode,o=null),e=e.child,e!==null))for(Vd(e,o,i),e=e.sibling;e!==null;)Vd(e,o,i),e=e.sibling}function Tl(e,o,i){var u=e.tag;if(u===5||u===6)e=e.stateNode,o?i.insertBefore(e,o):i.appendChild(e);else if(u!==4&&(u===27&&Mo(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Tl(e,o,i),e=e.sibling;e!==null;)Tl(e,o,i),e=e.sibling}function Wm(e){var o=e.stateNode,i=e.memoizedProps;try{for(var u=e.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);tn(o,u,i),o[mt]=e,o[Ht]=i}catch(b){rt(e,e.return,b)}}var Us=!1,It=!1,Kd=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function eM(e,o){if(e=e.containerInfo,mf=Xl,e=ug(e),Uu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var u=i.getSelection&&i.getSelection();if(u&&u.rangeCount!==0){i=u.anchorNode;var y=u.anchorOffset,b=u.focusNode;u=u.focusOffset;try{i.nodeType,b.nodeType}catch{i=null;break e}var M=0,A=-1,O=-1,Q=0,ne=0,ie=e,K=null;t:for(;;){for(var Z;ie!==i||y!==0&&ie.nodeType!==3||(A=M+y),ie!==b||u!==0&&ie.nodeType!==3||(O=M+u),ie.nodeType===3&&(M+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)K=ie,ie=Z;for(;;){if(ie===e)break t;if(K===i&&++Q===y&&(A=M),K===b&&++ne===u&&(O=M),(Z=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=Z}i=A===-1||O===-1?null:{start:A,end:O}}else i=null}i=i||{start:0,end:0}}else i=null;for(yf={focusedElem:e,selectionRange:i},Xl=!1,Kt=o;Kt!==null;)if(o=Kt,e=o.child,(o.subtreeFlags&1028)!==0&&e!==null)e.return=o,Kt=e;else for(;Kt!==null;){switch(o=Kt,b=o.alternate,e=o.flags,o.tag){case 0:if((e&4)!==0&&(e=o.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)y=e[i],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&b!==null){e=void 0,i=o,y=b.memoizedProps,b=b.memoizedState,u=i.stateNode;try{var xe=aa(i.type,y);e=u.getSnapshotBeforeUpdate(xe,b),u.__reactInternalSnapshotBeforeUpdate=e}catch(je){rt(i,i.return,je)}}break;case 3:if((e&1024)!==0){if(e=o.stateNode.containerInfo,i=e.nodeType,i===9)xf(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":xf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=o.sibling,e!==null){e.return=o.return,Kt=e;break}Kt=o.return}}function Jm(e,o,i){var u=i.flags;switch(i.tag){case 0:case 11:case 15:$s(e,i),u&4&&Jr(5,i);break;case 1:if($s(e,i),u&4)if(e=i.stateNode,o===null)try{e.componentDidMount()}catch(M){rt(i,i.return,M)}else{var y=aa(i.type,o.memoizedProps);o=o.memoizedState;try{e.componentDidUpdate(y,o,e.__reactInternalSnapshotBeforeUpdate)}catch(M){rt(i,i.return,M)}}u&64&&Vm(i),u&512&&ei(i,i.return);break;case 3:if($s(e,i),u&64&&(e=i.updateQueue,e!==null)){if(o=null,i.child!==null)switch(i.child.tag){case 27:case 5:o=i.child.stateNode;break;case 1:o=i.child.stateNode}try{Pg(e,o)}catch(M){rt(i,i.return,M)}}break;case 27:o===null&&u&4&&Wm(i);case 26:case 5:$s(e,i),o===null&&u&4&&Ym(i),u&512&&ei(i,i.return);break;case 12:$s(e,i);break;case 31:$s(e,i),u&4&&ny(e,i);break;case 13:$s(e,i),u&4&&sy(e,i),u&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=cM.bind(null,i),TM(e,i))));break;case 22:if(u=i.memoizedState!==null||Us,!u){o=o!==null&&o.memoizedState!==null||It,y=Us;var b=It;Us=u,(It=o)&&!b?Gs(e,i,(i.subtreeFlags&8772)!==0):$s(e,i),Us=y,It=b}break;case 30:break;default:$s(e,i)}}function ey(e){var o=e.alternate;o!==null&&(e.alternate=null,ey(o)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(o=e.stateNode,o!==null&&Mu(o)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ct=null,hn=!1;function Bs(e,o,i){for(i=i.child;i!==null;)ty(e,o,i),i=i.sibling}function ty(e,o,i){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(rs,i)}catch{}switch(i.tag){case 26:It||us(i,o),Bs(e,o,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:It||us(i,o);var u=Ct,y=hn;Mo(i.type)&&(Ct=i.stateNode,hn=!1),Bs(e,o,i),ci(i.stateNode),Ct=u,hn=y;break;case 5:It||us(i,o);case 6:if(u=Ct,y=hn,Ct=null,Bs(e,o,i),Ct=u,hn=y,Ct!==null)if(hn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(i.stateNode)}catch(b){rt(i,o,b)}else try{Ct.removeChild(i.stateNode)}catch(b){rt(i,o,b)}break;case 18:Ct!==null&&(hn?(e=Ct,Vy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),sr(e)):Vy(Ct,i.stateNode));break;case 4:u=Ct,y=hn,Ct=i.stateNode.containerInfo,hn=!0,Bs(e,o,i),Ct=u,hn=y;break;case 0:case 11:case 14:case 15:yo(2,i,o),It||yo(4,i,o),Bs(e,o,i);break;case 1:It||(us(i,o),u=i.stateNode,typeof u.componentWillUnmount=="function"&&Km(i,o,u)),Bs(e,o,i);break;case 21:Bs(e,o,i);break;case 22:It=(u=It)||i.memoizedState!==null,Bs(e,o,i),It=u;break;default:Bs(e,o,i)}}function ny(e,o){if(o.memoizedState===null&&(e=o.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{sr(e)}catch(i){rt(o,o.return,i)}}}function sy(e,o){if(o.memoizedState===null&&(e=o.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sr(e)}catch(i){rt(o,o.return,i)}}function tM(e){switch(e.tag){case 31:case 13:case 19:var o=e.stateNode;return o===null&&(o=e.stateNode=new Zm),o;case 22:return e=e.stateNode,o=e._retryCache,o===null&&(o=e._retryCache=new Zm),o;default:throw Error(s(435,e.tag))}}function jl(e,o){var i=tM(e);o.forEach(function(u){if(!i.has(u)){i.add(u);var y=uM.bind(null,e,u);u.then(y,y)}})}function pn(e,o){var i=o.deletions;if(i!==null)for(var u=0;u<i.length;u++){var y=i[u],b=e,M=o,A=M;e:for(;A!==null;){switch(A.tag){case 27:if(Mo(A.type)){Ct=A.stateNode,hn=!1;break e}break;case 5:Ct=A.stateNode,hn=!1;break e;case 3:case 4:Ct=A.stateNode.containerInfo,hn=!0;break e}A=A.return}if(Ct===null)throw Error(s(160));ty(b,M,y),Ct=null,hn=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)oy(o,e),o=o.sibling}var Zn=null;function oy(e,o){var i=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pn(o,e),gn(e),u&4&&(yo(3,e,e.return),Jr(3,e),yo(5,e,e.return));break;case 1:pn(o,e),gn(e),u&512&&(It||i===null||us(i,i.return)),u&64&&Us&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?u:i.concat(u))));break;case 26:var y=Zn;if(pn(o,e),gn(e),u&512&&(It||i===null||us(i,i.return)),u&4){var b=i!==null?i.memoizedState:null;if(u=e.memoizedState,i===null)if(u===null)if(e.stateNode===null){e:{u=e.type,i=e.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Nr]||b[mt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(u),y.head.insertBefore(b,y.querySelector("head > title"))),tn(b,u,i),b[mt]=e,Vt(b),u=b;break e;case"link":var M=ov("link","href",y).get(u+(i.href||""));if(M){for(var A=0;A<M.length;A++)if(b=M[A],b.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&b.getAttribute("rel")===(i.rel==null?null:i.rel)&&b.getAttribute("title")===(i.title==null?null:i.title)&&b.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){M.splice(A,1);break t}}b=y.createElement(u),tn(b,u,i),y.head.appendChild(b);break;case"meta":if(M=ov("meta","content",y).get(u+(i.content||""))){for(A=0;A<M.length;A++)if(b=M[A],b.getAttribute("content")===(i.content==null?null:""+i.content)&&b.getAttribute("name")===(i.name==null?null:i.name)&&b.getAttribute("property")===(i.property==null?null:i.property)&&b.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&b.getAttribute("charset")===(i.charSet==null?null:i.charSet)){M.splice(A,1);break t}}b=y.createElement(u),tn(b,u,i),y.head.appendChild(b);break;default:throw Error(s(468,u))}b[mt]=e,Vt(b),u=b}e.stateNode=u}else av(y,e.type,e.stateNode);else e.stateNode=sv(y,u,e.memoizedProps);else b!==u?(b===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):b.count--,u===null?av(y,e.type,e.stateNode):sv(y,u,e.memoizedProps)):u===null&&e.stateNode!==null&&Qd(e,e.memoizedProps,i.memoizedProps)}break;case 27:pn(o,e),gn(e),u&512&&(It||i===null||us(i,i.return)),i!==null&&u&4&&Qd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(pn(o,e),gn(e),u&512&&(It||i===null||us(i,i.return)),e.flags&32){y=e.stateNode;try{Ra(y,"")}catch(xe){rt(e,e.return,xe)}}u&4&&e.stateNode!=null&&(y=e.memoizedProps,Qd(e,y,i!==null?i.memoizedProps:y)),u&1024&&(Kd=!0);break;case 6:if(pn(o,e),gn(e),u&4){if(e.stateNode===null)throw Error(s(162));u=e.memoizedProps,i=e.stateNode;try{i.nodeValue=u}catch(xe){rt(e,e.return,xe)}}break;case 3:if(Fl=null,y=Zn,Zn=Gl(o.containerInfo),pn(o,e),Zn=y,gn(e),u&4&&i!==null&&i.memoizedState.isDehydrated)try{sr(o.containerInfo)}catch(xe){rt(e,e.return,xe)}Kd&&(Kd=!1,ay(e));break;case 4:u=Zn,Zn=Gl(e.stateNode.containerInfo),pn(o,e),gn(e),Zn=u;break;case 12:pn(o,e),gn(e);break;case 31:pn(o,e),gn(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,jl(e,u)));break;case 13:pn(o,e),gn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Dl=Ze()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,jl(e,u)));break;case 22:y=e.memoizedState!==null;var O=i!==null&&i.memoizedState!==null,Q=Us,ne=It;if(Us=Q||y,It=ne||O,pn(o,e),It=ne,Us=Q,gn(e),u&8192)e:for(o=e.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(i===null||O||Us||It||ra(e)),i=null,o=e;;){if(o.tag===5||o.tag===26){if(i===null){O=i=o;try{if(b=O.stateNode,y)M=b.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{A=O.stateNode;var ie=O.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(xe){rt(O,O.return,xe)}}}else if(o.tag===6){if(i===null){O=o;try{O.stateNode.nodeValue=y?"":O.memoizedProps}catch(xe){rt(O,O.return,xe)}}}else if(o.tag===18){if(i===null){O=o;try{var Z=O.stateNode;y?Ky(Z,!0):Ky(O.stateNode,!1)}catch(xe){rt(O,O.return,xe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===e)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;i===o&&(i=null),o=o.return}i===o&&(i=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=e.updateQueue,u!==null&&(i=u.retryQueue,i!==null&&(u.retryQueue=null,jl(e,i))));break;case 19:pn(o,e),gn(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,jl(e,u)));break;case 30:break;case 21:break;default:pn(o,e),gn(e)}}function gn(e){var o=e.flags;if(o&2){try{for(var i,u=e.return;u!==null;){if(Xm(u)){i=u;break}u=u.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var y=i.stateNode,b=Fd(e);Tl(e,b,y);break;case 5:var M=i.stateNode;i.flags&32&&(Ra(M,""),i.flags&=-33);var A=Fd(e);Tl(e,A,M);break;case 3:case 4:var O=i.stateNode.containerInfo,Q=Fd(e);Vd(e,Q,O);break;default:throw Error(s(161))}}catch(ne){rt(e,e.return,ne)}e.flags&=-3}o&4096&&(e.flags&=-4097)}function ay(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var o=e;ay(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),e=e.sibling}}function $s(e,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Jm(e,o.alternate,o),o=o.sibling}function ra(e){for(e=e.child;e!==null;){var o=e;switch(o.tag){case 0:case 11:case 14:case 15:yo(4,o,o.return),ra(o);break;case 1:us(o,o.return);var i=o.stateNode;typeof i.componentWillUnmount=="function"&&Km(o,o.return,i),ra(o);break;case 27:ci(o.stateNode);case 26:case 5:us(o,o.return),ra(o);break;case 22:o.memoizedState===null&&ra(o);break;case 30:ra(o);break;default:ra(o)}e=e.sibling}}function Gs(e,o,i){for(i=i&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,y=e,b=o,M=b.flags;switch(b.tag){case 0:case 11:case 15:Gs(y,b,i),Jr(4,b);break;case 1:if(Gs(y,b,i),u=b,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Q){rt(u,u.return,Q)}if(u=b,y=u.updateQueue,y!==null){var A=u.stateNode;try{var O=y.shared.hiddenCallbacks;if(O!==null)for(y.shared.hiddenCallbacks=null,y=0;y<O.length;y++)Lg(O[y],A)}catch(Q){rt(u,u.return,Q)}}i&&M&64&&Vm(b),ei(b,b.return);break;case 27:Wm(b);case 26:case 5:Gs(y,b,i),i&&u===null&&M&4&&Ym(b),ei(b,b.return);break;case 12:Gs(y,b,i);break;case 31:Gs(y,b,i),i&&M&4&&ny(y,b);break;case 13:Gs(y,b,i),i&&M&4&&sy(y,b);break;case 22:b.memoizedState===null&&Gs(y,b,i),ei(b,b.return);break;case 30:break;default:Gs(y,b,i)}o=o.sibling}}function Yd(e,o){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(e=o.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Hr(i))}function Xd(e,o){e=null,o.alternate!==null&&(e=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==e&&(o.refCount++,e!=null&&Hr(e))}function Jn(e,o,i,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ry(e,o,i,u),o=o.sibling}function ry(e,o,i,u){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Jn(e,o,i,u),y&2048&&Jr(9,o);break;case 1:Jn(e,o,i,u);break;case 3:Jn(e,o,i,u),y&2048&&(e=null,o.alternate!==null&&(e=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==e&&(o.refCount++,e!=null&&Hr(e)));break;case 12:if(y&2048){Jn(e,o,i,u),e=o.stateNode;try{var b=o.memoizedProps,M=b.id,A=b.onPostCommit;typeof A=="function"&&A(M,o.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){rt(o,o.return,O)}}else Jn(e,o,i,u);break;case 31:Jn(e,o,i,u);break;case 13:Jn(e,o,i,u);break;case 23:break;case 22:b=o.stateNode,M=o.alternate,o.memoizedState!==null?b._visibility&2?Jn(e,o,i,u):ti(e,o):b._visibility&2?Jn(e,o,i,u):(b._visibility|=2,Fa(e,o,i,u,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Yd(M,o);break;case 24:Jn(e,o,i,u),y&2048&&Xd(o.alternate,o);break;default:Jn(e,o,i,u)}}function Fa(e,o,i,u,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=e,M=o,A=i,O=u,Q=M.flags;switch(M.tag){case 0:case 11:case 15:Fa(b,M,A,O,y),Jr(8,M);break;case 23:break;case 22:var ne=M.stateNode;M.memoizedState!==null?ne._visibility&2?Fa(b,M,A,O,y):ti(b,M):(ne._visibility|=2,Fa(b,M,A,O,y)),y&&Q&2048&&Yd(M.alternate,M);break;case 24:Fa(b,M,A,O,y),y&&Q&2048&&Xd(M.alternate,M);break;default:Fa(b,M,A,O,y)}o=o.sibling}}function ti(e,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var i=e,u=o,y=u.flags;switch(u.tag){case 22:ti(i,u),y&2048&&Yd(u.alternate,u);break;case 24:ti(i,u),y&2048&&Xd(u.alternate,u);break;default:ti(i,u)}o=o.sibling}}var ni=8192;function Va(e,o,i){if(e.subtreeFlags&ni)for(e=e.child;e!==null;)iy(e,o,i),e=e.sibling}function iy(e,o,i){switch(e.tag){case 26:Va(e,o,i),e.flags&ni&&e.memoizedState!==null&&UM(i,Zn,e.memoizedState,e.memoizedProps);break;case 5:Va(e,o,i);break;case 3:case 4:var u=Zn;Zn=Gl(e.stateNode.containerInfo),Va(e,o,i),Zn=u;break;case 22:e.memoizedState===null&&(u=e.alternate,u!==null&&u.memoizedState!==null?(u=ni,ni=16777216,Va(e,o,i),ni=u):Va(e,o,i));break;default:Va(e,o,i)}}function ly(e){var o=e.alternate;if(o!==null&&(e=o.child,e!==null)){o.child=null;do o=e.sibling,e.sibling=null,e=o;while(e!==null)}}function si(e){var o=e.deletions;if((e.flags&16)!==0){if(o!==null)for(var i=0;i<o.length;i++){var u=o[i];Kt=u,uy(u,e)}ly(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cy(e),e=e.sibling}function cy(e){switch(e.tag){case 0:case 11:case 15:si(e),e.flags&2048&&yo(9,e,e.return);break;case 3:si(e);break;case 12:si(e);break;case 22:var o=e.stateNode;e.memoizedState!==null&&o._visibility&2&&(e.return===null||e.return.tag!==13)?(o._visibility&=-3,kl(e)):si(e);break;default:si(e)}}function kl(e){var o=e.deletions;if((e.flags&16)!==0){if(o!==null)for(var i=0;i<o.length;i++){var u=o[i];Kt=u,uy(u,e)}ly(e)}for(e=e.child;e!==null;){switch(o=e,o.tag){case 0:case 11:case 15:yo(8,o,o.return),kl(o);break;case 22:i=o.stateNode,i._visibility&2&&(i._visibility&=-3,kl(o));break;default:kl(o)}e=e.sibling}}function uy(e,o){for(;Kt!==null;){var i=Kt;switch(i.tag){case 0:case 11:case 15:yo(8,i,o);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var u=i.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Hr(i.memoizedState.cache)}if(u=i.child,u!==null)u.return=i,Kt=u;else e:for(i=e;Kt!==null;){u=Kt;var y=u.sibling,b=u.return;if(ey(u),u===i){Kt=null;break e}if(y!==null){y.return=b,Kt=y;break e}Kt=b}}}var nM={getCacheForType:function(e){var o=Jt(Ot),i=o.data.get(e);return i===void 0&&(i=e(),o.data.set(e,i)),i},cacheSignal:function(){return Jt(Ot).controller.signal}},sM=typeof WeakMap=="function"?WeakMap:Map,tt=0,ft=null,Ge=null,Fe=0,at=0,Mn=null,vo=!1,Ka=!1,Wd=!1,Qs=0,Mt=0,bo=0,ia=0,Zd=0,En=0,Ya=0,oi=null,mn=null,Jd=!1,Dl=0,dy=0,_l=1/0,zl=null,xo=null,Ut=0,wo=null,Xa=null,Fs=0,ef=0,tf=null,fy=null,ai=0,nf=null;function Rn(){return(tt&2)!==0&&Fe!==0?Fe&-Fe:z.T!==null?cf():ln()}function hy(){if(En===0)if((Fe&536870912)===0||Xe){var e=$o;$o<<=1,($o&3932160)===0&&($o=262144),En=e}else En=536870912;return e=Cn.current,e!==null&&(e.flags|=32),En}function yn(e,o,i){(e===ft&&(at===2||at===9)||e.cancelPendingCommit!==null)&&(Wa(e,0),Co(e,Fe,En,!1)),be(e,i),((tt&2)===0||e!==ft)&&(e===ft&&((tt&2)===0&&(ia|=i),Mt===4&&Co(e,Fe,En,!1)),ds(e))}function py(e,o,i){if((tt&6)!==0)throw Error(s(327));var u=!i&&(o&127)===0&&(o&e.expiredLanes)===0||Ts(e,o),y=u?rM(e,o):of(e,o,!0),b=u;do{if(y===0){Ka&&!u&&Co(e,o,0,!1);break}else{if(i=e.current.alternate,b&&!oM(i)){y=of(e,o,!1),b=!1;continue}if(y===2){if(b=o,e.errorRecoveryDisabledLanes&b)var M=0;else M=e.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;e:{var A=e;y=oi;var O=A.current.memoizedState.isDehydrated;if(O&&(Wa(A,M).flags|=256),M=of(A,M,!1),M!==2){if(Wd&&!O){A.errorRecoveryDisabledLanes|=b,ia|=b,y=4;break e}b=mn,mn=y,b!==null&&(mn===null?mn=b:mn.push.apply(mn,b))}y=M}if(b=!1,y!==2)continue}}if(y===1){Wa(e,0),Co(e,o,0,!0);break}e:{switch(u=e,b=y,b){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Co(u,o,En,!vo);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(y=Dl+300-Ze(),10<y)){if(Co(u,o,En,!vo),As(u,0,!0)!==0)break e;Fs=o,u.timeoutHandle=Qy(gy.bind(null,u,i,mn,zl,Jd,o,En,ia,Ya,vo,b,"Throttled",-0,0),y);break e}gy(u,i,mn,zl,Jd,o,En,ia,Ya,vo,b,null,-0,0)}}break}while(!0);ds(e)}function gy(e,o,i,u,y,b,M,A,O,Q,ne,ie,K,Z){if(e.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ks},iy(o,b,ie);var xe=(b&62914560)===b?Dl-Ze():(b&4194048)===b?dy-Ze():0;if(xe=BM(ie,xe),xe!==null){Fs=b,e.cancelPendingCommit=xe(Sy.bind(null,e,o,b,i,u,y,M,A,O,ne,ie,null,K,Z)),Co(e,b,M,!Q);return}}Sy(e,o,b,i,u,y,M,A,O)}function oM(e){for(var o=e;;){var i=o.tag;if((i===0||i===11||i===15)&&o.flags&16384&&(i=o.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var u=0;u<i.length;u++){var y=i[u],b=y.getSnapshot;y=y.value;try{if(!xn(b(),y))return!1}catch{return!1}}if(i=o.child,o.subtreeFlags&16384&&i!==null)i.return=o,o=i;else{if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Co(e,o,i,u){o&=~Zd,o&=~ia,e.suspendedLanes|=o,e.pingedLanes&=~o,u&&(e.warmLanes|=o),u=e.expirationTimes;for(var y=o;0<y;){var b=31-_t(y),M=1<<b;u[b]=-1,y&=~M}i!==0&&Oe(e,i,o)}function Ol(){return(tt&6)===0?(ri(0),!1):!0}function sf(){if(Ge!==null){if(at===0)var e=Ge.return;else e=Ge,Os=Zo=null,bd(e),Ua=null,Br=0,e=Ge;for(;e!==null;)Fm(e.alternate,e),e=e.return;Ge=null}}function Wa(e,o){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,MM(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Fs=0,sf(),ft=e,Ge=i=_s(e.current,null),Fe=o,at=0,Mn=null,vo=!1,Ka=Ts(e,o),Wd=!1,Ya=En=Zd=ia=bo=Mt=0,mn=oi=null,Jd=!1,(o&8)!==0&&(o|=o&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=o;0<u;){var y=31-_t(u),b=1<<y;o|=e[y],u&=~b}return Qs=o,nl(),i}function my(e,o){Le=null,z.H=Xr,o===Ha||o===ul?(o=Dg(),at=3):o===id?(o=Dg(),at=4):at=o===Od?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Mn=o,Ge===null&&(Mt=1,Ml(e,Ln(o,e.current)))}function yy(){var e=Cn.current;return e===null?!0:(Fe&4194048)===Fe?Hn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?e===Hn:!1}function vy(){var e=z.H;return z.H=Xr,e===null?Xr:e}function by(){var e=z.A;return z.A=nM,e}function Ll(){Mt=4,vo||(Fe&4194048)!==Fe&&Cn.current!==null||(Ka=!0),(bo&134217727)===0&&(ia&134217727)===0||ft===null||Co(ft,Fe,En,!1)}function of(e,o,i){var u=tt;tt|=2;var y=vy(),b=by();(ft!==e||Fe!==o)&&(zl=null,Wa(e,o)),o=!1;var M=Mt;e:do try{if(at!==0&&Ge!==null){var A=Ge,O=Mn;switch(at){case 8:sf(),M=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(o=!0);var Q=at;if(at=0,Mn=null,Za(e,A,O,Q),i&&Ka){M=0;break e}break;default:Q=at,at=0,Mn=null,Za(e,A,O,Q)}}aM(),M=Mt;break}catch(ne){my(e,ne)}while(!0);return o&&e.shellSuspendCounter++,Os=Zo=null,tt=u,z.H=y,z.A=b,Ge===null&&(ft=null,Fe=0,nl()),M}function aM(){for(;Ge!==null;)xy(Ge)}function rM(e,o){var i=tt;tt|=2;var u=vy(),y=by();ft!==e||Fe!==o?(zl=null,_l=Ze()+500,Wa(e,o)):Ka=Ts(e,o);e:do try{if(at!==0&&Ge!==null){o=Ge;var b=Mn;t:switch(at){case 1:at=0,Mn=null,Za(e,o,b,1);break;case 2:case 9:if(jg(b)){at=0,Mn=null,wy(o);break}o=function(){at!==2&&at!==9||ft!==e||(at=7),ds(e)},b.then(o,o);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:jg(b)?(at=0,Mn=null,wy(o)):(at=0,Mn=null,Za(e,o,b,7));break;case 5:var M=null;switch(Ge.tag){case 26:M=Ge.memoizedState;case 5:case 27:var A=Ge;if(M?rv(M):A.stateNode.complete){at=0,Mn=null;var O=A.sibling;if(O!==null)Ge=O;else{var Q=A.return;Q!==null?(Ge=Q,Pl(Q)):Ge=null}break t}}at=0,Mn=null,Za(e,o,b,5);break;case 6:at=0,Mn=null,Za(e,o,b,6);break;case 8:sf(),Mt=6;break e;default:throw Error(s(462))}}iM();break}catch(ne){my(e,ne)}while(!0);return Os=Zo=null,z.H=u,z.A=y,tt=i,Ge!==null?0:(ft=null,Fe=0,nl(),Mt)}function iM(){for(;Ge!==null&&!pt();)xy(Ge)}function xy(e){var o=Gm(e.alternate,e,Qs);e.memoizedProps=e.pendingProps,o===null?Pl(e):Ge=o}function wy(e){var o=e,i=o.alternate;switch(o.tag){case 15:case 0:o=Im(i,o,o.pendingProps,o.type,void 0,Fe);break;case 11:o=Im(i,o,o.pendingProps,o.type.render,o.ref,Fe);break;case 5:bd(o);default:Fm(i,o),o=Ge=bg(o,Qs),o=Gm(i,o,Qs)}e.memoizedProps=e.pendingProps,o===null?Pl(e):Ge=o}function Za(e,o,i,u){Os=Zo=null,bd(o),Ua=null,Br=0;var y=o.return;try{if(YS(e,y,o,i,Fe)){Mt=1,Ml(e,Ln(i,e.current)),Ge=null;return}}catch(b){if(y!==null)throw Ge=y,b;Mt=1,Ml(e,Ln(i,e.current)),Ge=null;return}o.flags&32768?(Xe||u===1?e=!0:Ka||(Fe&536870912)!==0?e=!1:(vo=e=!0,(u===2||u===9||u===3||u===6)&&(u=Cn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Cy(o,e)):Pl(o)}function Pl(e){var o=e;do{if((o.flags&32768)!==0){Cy(o,vo);return}e=o.return;var i=ZS(o.alternate,o,Qs);if(i!==null){Ge=i;return}if(o=o.sibling,o!==null){Ge=o;return}Ge=o=e}while(o!==null);Mt===0&&(Mt=5)}function Cy(e,o){do{var i=JS(e.alternate,e);if(i!==null){i.flags&=32767,Ge=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!o&&(e=e.sibling,e!==null)){Ge=e;return}Ge=e=i}while(e!==null);Mt=6,Ge=null}function Sy(e,o,i,u,y,b,M,A,O){e.cancelPendingCommit=null;do Il();while(Ut!==0);if((tt&6)!==0)throw Error(s(327));if(o!==null){if(o===e.current)throw Error(s(177));if(b=o.lanes|o.childLanes,b|=Fu,_e(e,i,b,M,A,O),e===ft&&(Ge=ft=null,Fe=0),Xa=o,wo=e,Fs=i,ef=b,tf=y,fy=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,dM(Yt,function(){return Ay(),null})):(e.callbackNode=null,e.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=z.T,z.T=null,y=D.p,D.p=2,M=tt,tt|=4;try{eM(e,o,i)}finally{tt=M,D.p=y,z.T=u}}Ut=1,My(),Ey(),Ry()}}function My(){if(Ut===1){Ut=0;var e=wo,o=Xa,i=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||i){i=z.T,z.T=null;var u=D.p;D.p=2;var y=tt;tt|=4;try{oy(o,e);var b=yf,M=ug(e.containerInfo),A=b.focusedElem,O=b.selectionRange;if(M!==A&&A&&A.ownerDocument&&cg(A.ownerDocument.documentElement,A)){if(O!==null&&Uu(A)){var Q=O.start,ne=O.end;if(ne===void 0&&(ne=Q),"selectionStart"in A)A.selectionStart=Q,A.selectionEnd=Math.min(ne,A.value.length);else{var ie=A.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var Z=K.getSelection(),xe=A.textContent.length,je=Math.min(O.start,xe),dt=O.end===void 0?je:Math.min(O.end,xe);!Z.extend&&je>dt&&(M=dt,dt=je,je=M);var H=lg(A,je),P=lg(A,dt);if(H&&P&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==P.node||Z.focusOffset!==P.offset)){var G=ie.createRange();G.setStart(H.node,H.offset),Z.removeAllRanges(),je>dt?(Z.addRange(G),Z.extend(P.node,P.offset)):(G.setEnd(P.node,P.offset),Z.addRange(G))}}}}for(ie=[],Z=A;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ie.length;A++){var re=ie[A];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Xl=!!mf,yf=mf=null}finally{tt=y,D.p=u,z.T=i}}e.current=o,Ut=2}}function Ey(){if(Ut===2){Ut=0;var e=wo,o=Xa,i=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||i){i=z.T,z.T=null;var u=D.p;D.p=2;var y=tt;tt|=4;try{Jm(e,o.alternate,o)}finally{tt=y,D.p=u,z.T=i}}Ut=3}}function Ry(){if(Ut===4||Ut===3){Ut=0,qt();var e=wo,o=Xa,i=Fs,u=fy;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ut=5:(Ut=0,Xa=wo=null,Ny(e,e.pendingLanes));var y=e.pendingLanes;if(y===0&&(xo=null),Rt(i),o=o.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(rs,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=z.T,y=D.p,D.p=2,z.T=null;try{for(var b=e.onRecoverableError,M=0;M<u.length;M++){var A=u[M];b(A.value,{componentStack:A.stack})}}finally{z.T=o,D.p=y}}(Fs&3)!==0&&Il(),ds(e),y=e.pendingLanes,(i&261930)!==0&&(y&42)!==0?e===nf?ai++:(ai=0,nf=e):ai=0,ri(0)}}function Ny(e,o){(e.pooledCacheLanes&=o)===0&&(o=e.pooledCache,o!=null&&(e.pooledCache=null,Hr(o)))}function Il(){return My(),Ey(),Ry(),Ay()}function Ay(){if(Ut!==5)return!1;var e=wo,o=ef;ef=0;var i=Rt(Fs),u=z.T,y=D.p;try{D.p=32>i?32:i,z.T=null,i=tf,tf=null;var b=wo,M=Fs;if(Ut=0,Xa=wo=null,Fs=0,(tt&6)!==0)throw Error(s(331));var A=tt;if(tt|=4,cy(b.current),ry(b,b.current,M,i),tt=A,ri(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(rs,b)}catch{}return!0}finally{D.p=y,z.T=u,Ny(e,o)}}function Ty(e,o,i){o=Ln(i,o),o=zd(e.stateNode,o,2),e=po(e,o,2),e!==null&&(be(e,2),ds(e))}function rt(e,o,i){if(e.tag===3)Ty(e,e,i);else for(;o!==null;){if(o.tag===3){Ty(o,e,i);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(xo===null||!xo.has(u))){e=Ln(i,e),i=jm(2),u=po(o,i,2),u!==null&&(km(i,u,o,e),be(u,2),ds(u));break}}o=o.return}}function af(e,o,i){var u=e.pingCache;if(u===null){u=e.pingCache=new sM;var y=new Set;u.set(o,y)}else y=u.get(o),y===void 0&&(y=new Set,u.set(o,y));y.has(i)||(Wd=!0,y.add(i),e=lM.bind(null,e,o,i),o.then(e,e))}function lM(e,o,i){var u=e.pingCache;u!==null&&u.delete(o),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,ft===e&&(Fe&i)===i&&(Mt===4||Mt===3&&(Fe&62914560)===Fe&&300>Ze()-Dl?(tt&2)===0&&Wa(e,0):Zd|=i,Ya===Fe&&(Ya=0)),ds(e)}function jy(e,o){o===0&&(o=J()),e=Yo(e,o),e!==null&&(be(e,o),ds(e))}function cM(e){var o=e.memoizedState,i=0;o!==null&&(i=o.retryLane),jy(e,i)}function uM(e,o){var i=0;switch(e.tag){case 31:case 13:var u=e.stateNode,y=e.memoizedState;y!==null&&(i=y.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),jy(e,i)}function dM(e,o){return Be(e,o)}var ql=null,Ja=null,rf=!1,Hl=!1,lf=!1,So=0;function ds(e){e!==Ja&&e.next===null&&(Ja===null?ql=Ja=e:Ja=Ja.next=e),Hl=!0,rf||(rf=!0,hM())}function ri(e,o){if(!lf&&Hl){lf=!0;do for(var i=!1,u=ql;u!==null;){if(e!==0){var y=u.pendingLanes;if(y===0)var b=0;else{var M=u.suspendedLanes,A=u.pingedLanes;b=(1<<31-_t(42|e)+1)-1,b&=y&~(M&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(i=!0,zy(u,b))}else b=Fe,b=As(u,u===ft?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(b&3)===0||Ts(u,b)||(i=!0,zy(u,b));u=u.next}while(i);lf=!1}}function fM(){ky()}function ky(){Hl=rf=!1;var e=0;So!==0&&SM()&&(e=So);for(var o=Ze(),i=null,u=ql;u!==null;){var y=u.next,b=Dy(u,o);b===0?(u.next=null,i===null?ql=y:i.next=y,y===null&&(Ja=i)):(i=u,(e!==0||(b&3)!==0)&&(Hl=!0)),u=y}Ut!==0&&Ut!==5||ri(e),So!==0&&(So=0)}function Dy(e,o){for(var i=e.suspendedLanes,u=e.pingedLanes,y=e.expirationTimes,b=e.pendingLanes&-62914561;0<b;){var M=31-_t(b),A=1<<M,O=y[M];O===-1?((A&i)===0||(A&u)!==0)&&(y[M]=Su(A,o)):O<=o&&(e.expiredLanes|=A),b&=~A}if(o=ft,i=Fe,i=As(e,e===o?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u=e.callbackNode,i===0||e===o&&(at===2||at===9)||e.cancelPendingCommit!==null)return u!==null&&u!==null&&yt(u),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Ts(e,i)){if(o=i&-i,o===e.callbackPriority)return o;switch(u!==null&&yt(u),Rt(i)){case 2:case 8:i=gt;break;case 32:i=Yt;break;case 268435456:i=Rs;break;default:i=Yt}return u=_y.bind(null,e),i=Be(i,u),e.callbackPriority=o,e.callbackNode=i,o}return u!==null&&u!==null&&yt(u),e.callbackPriority=2,e.callbackNode=null,2}function _y(e,o){if(Ut!==0&&Ut!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Il()&&e.callbackNode!==i)return null;var u=Fe;return u=As(e,e===ft?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u===0?null:(py(e,u,o),Dy(e,Ze()),e.callbackNode!=null&&e.callbackNode===i?_y.bind(null,e):null)}function zy(e,o){if(Il())return null;py(e,o,!0)}function hM(){EM(function(){(tt&6)!==0?Be(vt,fM):ky()})}function cf(){if(So===0){var e=Ia;e===0&&(e=Ns,Ns<<=1,(Ns&261888)===0&&(Ns=256)),So=e}return So}function Oy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ki(""+e)}function Ly(e,o){var i=o.ownerDocument.createElement("input");return i.name=o.name,i.value=o.value,e.id&&i.setAttribute("form",e.id),o.parentNode.insertBefore(i,o),e=new FormData(e),i.parentNode.removeChild(i),e}function pM(e,o,i,u,y){if(o==="submit"&&i&&i.stateNode===y){var b=Oy((y[Ht]||null).action),M=u.submitter;M&&(o=(o=M[Ht]||null)?Oy(o.formAction):M.getAttribute("formAction"),o!==null&&(b=o,M=null));var A=new Zi("action","action",null,u,y);e.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(So!==0){var O=M?Ly(y,M):new FormData(y);Ad(i,{pending:!0,data:O,method:y.method,action:b},null,O)}}else typeof b=="function"&&(A.preventDefault(),O=M?Ly(y,M):new FormData(y),Ad(i,{pending:!0,data:O,method:y.method,action:b},b,O))},currentTarget:y}]})}}for(var uf=0;uf<Qu.length;uf++){var df=Qu[uf],gM=df.toLowerCase(),mM=df[0].toUpperCase()+df.slice(1);Wn(gM,"on"+mM)}Wn(hg,"onAnimationEnd"),Wn(pg,"onAnimationIteration"),Wn(gg,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(DS,"onTransitionRun"),Wn(_S,"onTransitionStart"),Wn(zS,"onTransitionCancel"),Wn(mg,"onTransitionEnd"),Ma("onMouseEnter",["mouseout","mouseover"]),Ma("onMouseLeave",["mouseout","mouseover"]),Ma("onPointerEnter",["pointerout","pointerover"]),Ma("onPointerLeave",["pointerout","pointerover"]),Qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ii));function Py(e,o){o=(o&4)!==0;for(var i=0;i<e.length;i++){var u=e[i],y=u.event;u=u.listeners;e:{var b=void 0;if(o)for(var M=u.length-1;0<=M;M--){var A=u[M],O=A.instance,Q=A.currentTarget;if(A=A.listener,O!==b&&y.isPropagationStopped())break e;b=A,y.currentTarget=Q;try{b(y)}catch(ne){tl(ne)}y.currentTarget=null,b=O}else for(M=0;M<u.length;M++){if(A=u[M],O=A.instance,Q=A.currentTarget,A=A.listener,O!==b&&y.isPropagationStopped())break e;b=A,y.currentTarget=Q;try{b(y)}catch(ne){tl(ne)}y.currentTarget=null,b=O}}}}function Qe(e,o){var i=o[$e];i===void 0&&(i=o[$e]=new Set);var u=e+"__bubble";i.has(u)||(Iy(o,e,2,!1),i.add(u))}function ff(e,o,i){var u=0;o&&(u|=4),Iy(i,e,u,o)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function hf(e){if(!e[Ul]){e[Ul]=!0,kp.forEach(function(i){i!=="selectionchange"&&(yM.has(i)||ff(i,!1,e),ff(i,!0,e))});var o=e.nodeType===9?e:e.ownerDocument;o===null||o[Ul]||(o[Ul]=!0,ff("selectionchange",!1,o))}}function Iy(e,o,i,u){switch(hv(o)){case 2:var y=QM;break;case 8:y=FM;break;default:y=Af}i=y.bind(null,o,i,e),y=void 0,!Du||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),u?y!==void 0?e.addEventListener(o,i,{capture:!0,passive:y}):e.addEventListener(o,i,!0):y!==void 0?e.addEventListener(o,i,{passive:y}):e.addEventListener(o,i,!1)}function pf(e,o,i,u,y){var b=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var M=u.tag;if(M===3||M===4){var A=u.stateNode.containerInfo;if(A===y)break;if(M===4)for(M=u.return;M!==null;){var O=M.tag;if((O===3||O===4)&&M.stateNode.containerInfo===y)return;M=M.return}for(;A!==null;){if(M=wa(A),M===null)return;if(O=M.tag,O===5||O===6||O===26||O===27){u=b=M;continue e}A=A.parentNode}}u=u.return}$p(function(){var Q=b,ne=ju(i),ie=[];e:{var K=yg.get(e);if(K!==void 0){var Z=Zi,xe=e;switch(e){case"keypress":if(Xi(i)===0)break e;case"keydown":case"keyup":Z=uS;break;case"focusin":xe="focus",Z=Lu;break;case"focusout":xe="blur",Z=Lu;break;case"beforeblur":case"afterblur":Z=Lu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=ZC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=hS;break;case hg:case pg:case gg:Z=tS;break;case mg:Z=gS;break;case"scroll":case"scrollend":Z=XC;break;case"wheel":Z=yS;break;case"copy":case"cut":case"paste":Z=sS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Kp;break;case"toggle":case"beforetoggle":Z=bS}var je=(o&4)!==0,dt=!je&&(e==="scroll"||e==="scrollend"),H=je?K!==null?K+"Capture":null:K;je=[];for(var P=Q,G;P!==null;){var re=P;if(G=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||G===null||H===null||(re=Tr(P,H),re!=null&&je.push(li(P,re,G))),dt)break;P=P.return}0<je.length&&(K=new Z(K,xe,null,i,ne),ie.push({event:K,listeners:je}))}}if((o&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",K&&i!==Tu&&(xe=i.relatedTarget||i.fromElement)&&(wa(xe)||xe[is]))break e;if((Z||K)&&(K=ne.window===ne?ne:(K=ne.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(xe=i.relatedTarget||i.toElement,Z=Q,xe=xe?wa(xe):null,xe!==null&&(dt=l(xe),je=xe.tag,xe!==dt||je!==5&&je!==27&&je!==6)&&(xe=null)):(Z=null,xe=Q),Z!==xe)){if(je=Fp,re="onMouseLeave",H="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(je=Kp,re="onPointerLeave",H="onPointerEnter",P="pointer"),dt=Z==null?K:Ar(Z),G=xe==null?K:Ar(xe),K=new je(re,P+"leave",Z,i,ne),K.target=dt,K.relatedTarget=G,re=null,wa(ne)===Q&&(je=new je(H,P+"enter",xe,i,ne),je.target=G,je.relatedTarget=dt,re=je),dt=re,Z&&xe)t:{for(je=vM,H=Z,P=xe,G=0,re=H;re;re=je(re))G++;re=0;for(var Ne=P;Ne;Ne=je(Ne))re++;for(;0<G-re;)H=je(H),G--;for(;0<re-G;)P=je(P),re--;for(;G--;){if(H===P||P!==null&&H===P.alternate){je=H;break t}H=je(H),P=je(P)}je=null}else je=null;Z!==null&&qy(ie,K,Z,je,!1),xe!==null&&dt!==null&&qy(ie,dt,xe,je,!0)}}e:{if(K=Q?Ar(Q):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var Je=ng;else if(eg(K))if(sg)Je=TS;else{Je=NS;var Me=RS}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Q&&Au(Q.elementType)&&(Je=ng):Je=AS;if(Je&&(Je=Je(e,Q))){tg(ie,Je,i,ne);break e}Me&&Me(e,K,Q),e==="focusout"&&Q&&K.type==="number"&&Q.memoizedProps.value!=null&&Nu(K,"number",K.value)}switch(Me=Q?Ar(Q):window,e){case"focusin":(eg(Me)||Me.contentEditable==="true")&&(ja=Me,Bu=Q,Pr=null);break;case"focusout":Pr=Bu=ja=null;break;case"mousedown":$u=!0;break;case"contextmenu":case"mouseup":case"dragend":$u=!1,dg(ie,i,ne);break;case"selectionchange":if(kS)break;case"keydown":case"keyup":dg(ie,i,ne)}var Ie;if(Iu)e:{switch(e){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Ta?Zp(e,i)&&(Ve="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ve="onCompositionStart");Ve&&(Yp&&i.locale!=="ko"&&(Ta||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Ta&&(Ie=Gp()):(ro=ne,_u="value"in ro?ro.value:ro.textContent,Ta=!0)),Me=Bl(Q,Ve),0<Me.length&&(Ve=new Vp(Ve,e,null,i,ne),ie.push({event:Ve,listeners:Me}),Ie?Ve.data=Ie:(Ie=Jp(i),Ie!==null&&(Ve.data=Ie)))),(Ie=wS?CS(e,i):SS(e,i))&&(Ve=Bl(Q,"onBeforeInput"),0<Ve.length&&(Me=new Vp("onBeforeInput","beforeinput",null,i,ne),ie.push({event:Me,listeners:Ve}),Me.data=Ie)),pM(ie,e,Q,i,ne)}Py(ie,o)})}function li(e,o,i){return{instance:e,listener:o,currentTarget:i}}function Bl(e,o){for(var i=o+"Capture",u=[];e!==null;){var y=e,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=Tr(e,i),y!=null&&u.unshift(li(e,y,b)),y=Tr(e,o),y!=null&&u.push(li(e,y,b))),e.tag===3)return u;e=e.return}return[]}function vM(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function qy(e,o,i,u,y){for(var b=o._reactName,M=[];i!==null&&i!==u;){var A=i,O=A.alternate,Q=A.stateNode;if(A=A.tag,O!==null&&O===u)break;A!==5&&A!==26&&A!==27||Q===null||(O=Q,y?(Q=Tr(i,b),Q!=null&&M.unshift(li(i,Q,O))):y||(Q=Tr(i,b),Q!=null&&M.push(li(i,Q,O)))),i=i.return}M.length!==0&&e.push({event:o,listeners:M})}var bM=/\r\n?/g,xM=/\u0000|\uFFFD/g;function Hy(e){return(typeof e=="string"?e:""+e).replace(bM,`
`).replace(xM,"")}function Uy(e,o){return o=Hy(o),Hy(e)===o}function ut(e,o,i,u,y,b){switch(i){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Ra(e,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Ra(e,""+u);break;case"className":Fi(e,"class",u);break;case"tabIndex":Fi(e,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Fi(e,i,u);break;case"style":Up(e,u,b);break;case"data":if(o!=="object"){Fi(e,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||i!=="href")){e.removeAttribute(i);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(i);break}u=Ki(""+u),e.setAttribute(i,u);break;case"action":case"formAction":if(typeof u=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(i==="formAction"?(o!=="input"&&ut(e,o,"name",y.name,y,null),ut(e,o,"formEncType",y.formEncType,y,null),ut(e,o,"formMethod",y.formMethod,y,null),ut(e,o,"formTarget",y.formTarget,y,null)):(ut(e,o,"encType",y.encType,y,null),ut(e,o,"method",y.method,y,null),ut(e,o,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(i);break}u=Ki(""+u),e.setAttribute(i,u);break;case"onClick":u!=null&&(e.onclick=ks);break;case"onScroll":u!=null&&Qe("scroll",e);break;case"onScrollEnd":u!=null&&Qe("scrollend",e);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(i=u.__html,i!=null){if(y.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":e.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){e.removeAttribute("xlink:href");break}i=Ki(""+u),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(i,""+u):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":u===!0?e.setAttribute(i,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(i,u):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?e.setAttribute(i,u):e.removeAttribute(i);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?e.removeAttribute(i):e.setAttribute(i,u);break;case"popover":Qe("beforetoggle",e),Qe("toggle",e),Qi(e,"popover",u);break;case"xlinkActuate":js(e,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":js(e,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":js(e,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":js(e,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":js(e,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":js(e,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":js(e,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":js(e,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":js(e,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qi(e,"is",u);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=KC.get(i)||i,Qi(e,i,u))}}function gf(e,o,i,u,y,b){switch(i){case"style":Up(e,u,b);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(i=u.__html,i!=null){if(y.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof u=="string"?Ra(e,u):(typeof u=="number"||typeof u=="bigint")&&Ra(e,""+u);break;case"onScroll":u!=null&&Qe("scroll",e);break;case"onScrollEnd":u!=null&&Qe("scrollend",e);break;case"onClick":u!=null&&(e.onclick=ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dp.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(y=i.endsWith("Capture"),o=i.slice(2,y?i.length-7:void 0),b=e[Ht]||null,b=b!=null?b[i]:null,typeof b=="function"&&e.removeEventListener(o,b,y),typeof u=="function")){typeof b!="function"&&b!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(o,u,y);break e}i in e?e[i]=u:u===!0?e.setAttribute(i,""):Qi(e,i,u)}}}function tn(e,o,i){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",e),Qe("load",e);var u=!1,y=!1,b;for(b in i)if(i.hasOwnProperty(b)){var M=i[b];if(M!=null)switch(b){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:ut(e,o,b,M,i,null)}}y&&ut(e,o,"srcSet",i.srcSet,i,null),u&&ut(e,o,"src",i.src,i,null);return;case"input":Qe("invalid",e);var A=b=M=y=null,O=null,Q=null;for(u in i)if(i.hasOwnProperty(u)){var ne=i[u];if(ne!=null)switch(u){case"name":y=ne;break;case"type":M=ne;break;case"checked":O=ne;break;case"defaultChecked":Q=ne;break;case"value":b=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,o));break;default:ut(e,o,u,ne,i,null)}}Pp(e,b,A,O,Q,M,y,!1);return;case"select":Qe("invalid",e),u=M=b=null;for(y in i)if(i.hasOwnProperty(y)&&(A=i[y],A!=null))switch(y){case"value":b=A;break;case"defaultValue":M=A;break;case"multiple":u=A;default:ut(e,o,y,A,i,null)}o=b,i=M,e.multiple=!!u,o!=null?Ea(e,!!u,o,!1):i!=null&&Ea(e,!!u,i,!0);return;case"textarea":Qe("invalid",e),b=y=u=null;for(M in i)if(i.hasOwnProperty(M)&&(A=i[M],A!=null))switch(M){case"value":u=A;break;case"defaultValue":y=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:ut(e,o,M,A,i,null)}qp(e,u,y,b);return;case"option":for(O in i)if(i.hasOwnProperty(O)&&(u=i[O],u!=null))switch(O){case"selected":e.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ut(e,o,O,u,i,null)}return;case"dialog":Qe("beforetoggle",e),Qe("toggle",e),Qe("cancel",e),Qe("close",e);break;case"iframe":case"object":Qe("load",e);break;case"video":case"audio":for(u=0;u<ii.length;u++)Qe(ii[u],e);break;case"image":Qe("error",e),Qe("load",e);break;case"details":Qe("toggle",e);break;case"embed":case"source":case"link":Qe("error",e),Qe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in i)if(i.hasOwnProperty(Q)&&(u=i[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:ut(e,o,Q,u,i,null)}return;default:if(Au(o)){for(ne in i)i.hasOwnProperty(ne)&&(u=i[ne],u!==void 0&&gf(e,o,ne,u,i,void 0));return}}for(A in i)i.hasOwnProperty(A)&&(u=i[A],u!=null&&ut(e,o,A,u,i,null))}function wM(e,o,i,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,M=null,A=null,O=null,Q=null,ne=null;for(Z in i){var ie=i[Z];if(i.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":O=ie;default:u.hasOwnProperty(Z)||ut(e,o,Z,null,u,ie)}}for(var K in u){var Z=u[K];if(ie=i[K],u.hasOwnProperty(K)&&(Z!=null||ie!=null))switch(K){case"type":b=Z;break;case"name":y=Z;break;case"checked":Q=Z;break;case"defaultChecked":ne=Z;break;case"value":M=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,o));break;default:Z!==ie&&ut(e,o,K,Z,u,ie)}}Ru(e,M,A,O,Q,ne,b,y);return;case"select":Z=M=A=K=null;for(b in i)if(O=i[b],i.hasOwnProperty(b)&&O!=null)switch(b){case"value":break;case"multiple":Z=O;default:u.hasOwnProperty(b)||ut(e,o,b,null,u,O)}for(y in u)if(b=u[y],O=i[y],u.hasOwnProperty(y)&&(b!=null||O!=null))switch(y){case"value":K=b;break;case"defaultValue":A=b;break;case"multiple":M=b;default:b!==O&&ut(e,o,y,b,u,O)}o=A,i=M,u=Z,K!=null?Ea(e,!!i,K,!1):!!u!=!!i&&(o!=null?Ea(e,!!i,o,!0):Ea(e,!!i,i?[]:"",!1));return;case"textarea":Z=K=null;for(A in i)if(y=i[A],i.hasOwnProperty(A)&&y!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ut(e,o,A,null,u,y)}for(M in u)if(y=u[M],b=i[M],u.hasOwnProperty(M)&&(y!=null||b!=null))switch(M){case"value":K=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==b&&ut(e,o,M,y,u,b)}Ip(e,K,Z);return;case"option":for(var xe in i)if(K=i[xe],i.hasOwnProperty(xe)&&K!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":e.selected=!1;break;default:ut(e,o,xe,null,u,K)}for(O in u)if(K=u[O],Z=i[O],u.hasOwnProperty(O)&&K!==Z&&(K!=null||Z!=null))switch(O){case"selected":e.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ut(e,o,O,K,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in i)K=i[je],i.hasOwnProperty(je)&&K!=null&&!u.hasOwnProperty(je)&&ut(e,o,je,null,u,K);for(Q in u)if(K=u[Q],Z=i[Q],u.hasOwnProperty(Q)&&K!==Z&&(K!=null||Z!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,o));break;default:ut(e,o,Q,K,u,Z)}return;default:if(Au(o)){for(var dt in i)K=i[dt],i.hasOwnProperty(dt)&&K!==void 0&&!u.hasOwnProperty(dt)&&gf(e,o,dt,void 0,u,K);for(ne in u)K=u[ne],Z=i[ne],!u.hasOwnProperty(ne)||K===Z||K===void 0&&Z===void 0||gf(e,o,ne,K,u,Z);return}}for(var H in i)K=i[H],i.hasOwnProperty(H)&&K!=null&&!u.hasOwnProperty(H)&&ut(e,o,H,null,u,K);for(ie in u)K=u[ie],Z=i[ie],!u.hasOwnProperty(ie)||K===Z||K==null&&Z==null||ut(e,o,ie,K,u,Z)}function By(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CM(){if(typeof performance.getEntriesByType=="function"){for(var e=0,o=0,i=performance.getEntriesByType("resource"),u=0;u<i.length;u++){var y=i[u],b=y.transferSize,M=y.initiatorType,A=y.duration;if(b&&A&&By(M)){for(M=0,A=y.responseEnd,u+=1;u<i.length;u++){var O=i[u],Q=O.startTime;if(Q>A)break;var ne=O.transferSize,ie=O.initiatorType;ne&&By(ie)&&(O=O.responseEnd,M+=ne*(O<A?1:(A-Q)/(O-Q)))}if(--u,o+=8*(b+M)/(y.duration/1e3),e++,10<e)break}}if(0<e)return o/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var mf=null,yf=null;function $l(e){return e.nodeType===9?e:e.ownerDocument}function $y(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gy(e,o){if(e===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&o==="foreignObject"?0:e}function vf(e,o){return e==="textarea"||e==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var bf=null;function SM(){var e=window.event;return e&&e.type==="popstate"?e===bf?!1:(bf=e,!0):(bf=null,!1)}var Qy=typeof setTimeout=="function"?setTimeout:void 0,MM=typeof clearTimeout=="function"?clearTimeout:void 0,Fy=typeof Promise=="function"?Promise:void 0,EM=typeof queueMicrotask=="function"?queueMicrotask:typeof Fy<"u"?function(e){return Fy.resolve(null).then(e).catch(RM)}:Qy;function RM(e){setTimeout(function(){throw e})}function Mo(e){return e==="head"}function Vy(e,o){var i=o,u=0;do{var y=i.nextSibling;if(e.removeChild(i),y&&y.nodeType===8)if(i=y.data,i==="/$"||i==="/&"){if(u===0){e.removeChild(y),sr(o);return}u--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")u++;else if(i==="html")ci(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,ci(i);for(var b=i.firstChild;b;){var M=b.nextSibling,A=b.nodeName;b[Nr]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&b.rel.toLowerCase()==="stylesheet"||i.removeChild(b),b=M}}else i==="body"&&ci(e.ownerDocument.body);i=y}while(i);sr(o)}function Ky(e,o){var i=e;e=0;do{var u=i.nextSibling;if(i.nodeType===1?o?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(o?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=u}while(i)}function xf(e){var o=e.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var i=o;switch(o=o.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":xf(i),Mu(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function NM(e,o,i,u){for(;e.nodeType===1;){var y=i;if(e.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(u){if(!e[Nr])switch(o){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(b=e.getAttribute("rel"),b==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(b!==y.rel||e.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||e.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||e.getAttribute("title")!==(y.title==null?null:y.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(b=e.getAttribute("src"),(b!==(y.src==null?null:y.src)||e.getAttribute("type")!==(y.type==null?null:y.type)||e.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(o==="input"&&e.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&e.getAttribute("name")===b)return e}else return e;if(e=Un(e.nextSibling),e===null)break}return null}function AM(e,o,i){if(o==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Un(e.nextSibling),e===null))return null;return e}function Yy(e,o){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Un(e.nextSibling),e===null))return null;return e}function wf(e){return e.data==="$?"||e.data==="$~"}function Cf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function TM(e,o){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=o;else if(e.data!=="$?"||i.readyState!=="loading")o();else{var u=function(){o(),i.removeEventListener("DOMContentLoaded",u)};i.addEventListener("DOMContentLoaded",u),e._reactRetry=u}}function Un(e){for(;e!=null;e=e.nextSibling){var o=e.nodeType;if(o===1||o===3)break;if(o===8){if(o=e.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return e}var Sf=null;function Xy(e){e=e.nextSibling;for(var o=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(o===0)return Un(e.nextSibling);o--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||o++}e=e.nextSibling}return null}function Wy(e){e=e.previousSibling;for(var o=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(o===0)return e;o--}else i!=="/$"&&i!=="/&"||o++}e=e.previousSibling}return null}function Zy(e,o,i){switch(o=$l(i),e){case"html":if(e=o.documentElement,!e)throw Error(s(452));return e;case"head":if(e=o.head,!e)throw Error(s(453));return e;case"body":if(e=o.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ci(e){for(var o=e.attributes;o.length;)e.removeAttributeNode(o[0]);Mu(e)}var Bn=new Map,Jy=new Set;function Gl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Vs=D.d;D.d={f:jM,r:kM,D:DM,C:_M,L:zM,m:OM,X:PM,S:LM,M:IM};function jM(){var e=Vs.f(),o=Ol();return e||o}function kM(e){var o=Ca(e);o!==null&&o.tag===5&&o.type==="form"?mm(o):Vs.r(e)}var er=typeof document>"u"?null:document;function ev(e,o,i){var u=er;if(u&&typeof o=="string"&&o){var y=zn(o);y='link[rel="'+e+'"][href="'+y+'"]',typeof i=="string"&&(y+='[crossorigin="'+i+'"]'),Jy.has(y)||(Jy.add(y),e={rel:e,crossOrigin:i,href:o},u.querySelector(y)===null&&(o=u.createElement("link"),tn(o,"link",e),Vt(o),u.head.appendChild(o)))}}function DM(e){Vs.D(e),ev("dns-prefetch",e,null)}function _M(e,o){Vs.C(e,o),ev("preconnect",e,o)}function zM(e,o,i){Vs.L(e,o,i);var u=er;if(u&&e&&o){var y='link[rel="preload"][as="'+zn(o)+'"]';o==="image"&&i&&i.imageSrcSet?(y+='[imagesrcset="'+zn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(y+='[imagesizes="'+zn(i.imageSizes)+'"]')):y+='[href="'+zn(e)+'"]';var b=y;switch(o){case"style":b=tr(e);break;case"script":b=nr(e)}Bn.has(b)||(e=m({rel:"preload",href:o==="image"&&i&&i.imageSrcSet?void 0:e,as:o},i),Bn.set(b,e),u.querySelector(y)!==null||o==="style"&&u.querySelector(ui(b))||o==="script"&&u.querySelector(di(b))||(o=u.createElement("link"),tn(o,"link",e),Vt(o),u.head.appendChild(o)))}}function OM(e,o){Vs.m(e,o);var i=er;if(i&&e){var u=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+zn(u)+'"][href="'+zn(e)+'"]',b=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=nr(e)}if(!Bn.has(b)&&(e=m({rel:"modulepreload",href:e},o),Bn.set(b,e),i.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(di(b)))return}u=i.createElement("link"),tn(u,"link",e),Vt(u),i.head.appendChild(u)}}}function LM(e,o,i){Vs.S(e,o,i);var u=er;if(u&&e){var y=Sa(u).hoistableStyles,b=tr(e);o=o||"default";var M=y.get(b);if(!M){var A={loading:0,preload:null};if(M=u.querySelector(ui(b)))A.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":o},i),(i=Bn.get(b))&&Mf(e,i);var O=M=u.createElement("link");Vt(O),tn(O,"link",e),O._p=new Promise(function(Q,ne){O.onload=Q,O.onerror=ne}),O.addEventListener("load",function(){A.loading|=1}),O.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ql(M,o,u)}M={type:"stylesheet",instance:M,count:1,state:A},y.set(b,M)}}}function PM(e,o){Vs.X(e,o);var i=er;if(i&&e){var u=Sa(i).hoistableScripts,y=nr(e),b=u.get(y);b||(b=i.querySelector(di(y)),b||(e=m({src:e,async:!0},o),(o=Bn.get(y))&&Ef(e,o),b=i.createElement("script"),Vt(b),tn(b,"link",e),i.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(y,b))}}function IM(e,o){Vs.M(e,o);var i=er;if(i&&e){var u=Sa(i).hoistableScripts,y=nr(e),b=u.get(y);b||(b=i.querySelector(di(y)),b||(e=m({src:e,async:!0,type:"module"},o),(o=Bn.get(y))&&Ef(e,o),b=i.createElement("script"),Vt(b),tn(b,"link",e),i.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(y,b))}}function tv(e,o,i,u){var y=(y=ae.current)?Gl(y):null;if(!y)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(o=tr(i.href),i=Sa(y).hoistableStyles,u=i.get(o),u||(u={type:"style",instance:null,count:0,state:null},i.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=tr(i.href);var b=Sa(y).hoistableStyles,M=b.get(e);if(M||(y=y.ownerDocument||y,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(e,M),(b=y.querySelector(ui(e)))&&!b._p&&(M.instance=b,M.state.loading=5),Bn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Bn.set(e,i),b||qM(y,e,i,M.state))),o&&u===null)throw Error(s(528,""));return M}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=i.async,i=i.src,typeof i=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=nr(i),i=Sa(y).hoistableScripts,u=i.get(o),u||(u={type:"script",instance:null,count:0,state:null},i.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function tr(e){return'href="'+zn(e)+'"'}function ui(e){return'link[rel="stylesheet"]['+e+"]"}function nv(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function qM(e,o,i,u){e.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=e.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),tn(o,"link",i),Vt(o),e.head.appendChild(o))}function nr(e){return'[src="'+zn(e)+'"]'}function di(e){return"script[async]"+e}function sv(e,o,i){if(o.count++,o.instance===null)switch(o.type){case"style":var u=e.querySelector('style[data-href~="'+zn(i.href)+'"]');if(u)return o.instance=u,Vt(u),u;var y=m({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return u=(e.ownerDocument||e).createElement("style"),Vt(u),tn(u,"style",y),Ql(u,i.precedence,e),o.instance=u;case"stylesheet":y=tr(i.href);var b=e.querySelector(ui(y));if(b)return o.state.loading|=4,o.instance=b,Vt(b),b;u=nv(i),(y=Bn.get(y))&&Mf(u,y),b=(e.ownerDocument||e).createElement("link"),Vt(b);var M=b;return M._p=new Promise(function(A,O){M.onload=A,M.onerror=O}),tn(b,"link",u),o.state.loading|=4,Ql(b,i.precedence,e),o.instance=b;case"script":return b=nr(i.src),(y=e.querySelector(di(b)))?(o.instance=y,Vt(y),y):(u=i,(y=Bn.get(b))&&(u=m({},i),Ef(u,y)),e=e.ownerDocument||e,y=e.createElement("script"),Vt(y),tn(y,"link",u),e.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,Ql(u,i.precedence,e));return o.instance}function Ql(e,o,i){for(var u=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,b=y,M=0;M<u.length;M++){var A=u[M];if(A.dataset.precedence===o)b=A;else if(b!==y)break}b?b.parentNode.insertBefore(e,b.nextSibling):(o=i.nodeType===9?i.head:i,o.insertBefore(e,o.firstChild))}function Mf(e,o){e.crossOrigin==null&&(e.crossOrigin=o.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=o.referrerPolicy),e.title==null&&(e.title=o.title)}function Ef(e,o){e.crossOrigin==null&&(e.crossOrigin=o.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=o.referrerPolicy),e.integrity==null&&(e.integrity=o.integrity)}var Fl=null;function ov(e,o,i){if(Fl===null){var u=new Map,y=Fl=new Map;y.set(i,u)}else y=Fl,u=y.get(i),u||(u=new Map,y.set(i,u));if(u.has(e))return u;for(u.set(e,null),i=i.getElementsByTagName(e),y=0;y<i.length;y++){var b=i[y];if(!(b[Nr]||b[mt]||e==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var M=b.getAttribute(o)||"";M=e+M;var A=u.get(M);A?A.push(b):u.set(M,[b])}}return u}function av(e,o,i){e=e.ownerDocument||e,e.head.insertBefore(i,o==="title"?e.querySelector("head > title"):null)}function HM(e,o,i){if(i===1||o.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return e=o.disabled,typeof o.precedence=="string"&&e==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function rv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function UM(e,o,i,u){if(i.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var y=tr(u.href),b=o.querySelector(ui(y));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(e.count++,e=Vl.bind(e),o.then(e,e)),i.state.loading|=4,i.instance=b,Vt(b);return}b=o.ownerDocument||o,u=nv(u),(y=Bn.get(y))&&Mf(u,y),b=b.createElement("link"),Vt(b);var M=b;M._p=new Promise(function(A,O){M.onload=A,M.onerror=O}),tn(b,"link",u),i.instance=b}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,o),(o=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Vl.bind(e),o.addEventListener("load",i),o.addEventListener("error",i))}}var Rf=0;function BM(e,o){return e.stylesheets&&e.count===0&&Yl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var u=setTimeout(function(){if(e.stylesheets&&Yl(e,e.stylesheets),e.unsuspend){var b=e.unsuspend;e.unsuspend=null,b()}},6e4+o);0<e.imgBytes&&Rf===0&&(Rf=62500*CM());var y=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Yl(e,e.stylesheets),e.unsuspend)){var b=e.unsuspend;e.unsuspend=null,b()}},(e.imgBytes>Rf?50:800)+o);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function Vl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kl=null;function Yl(e,o){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kl=new Map,o.forEach($M,e),Kl=null,Vl.call(e))}function $M(e,o){if(!(o.state.loading&4)){var i=Kl.get(e);if(i)var u=i.get(null);else{i=new Map,Kl.set(e,i);for(var y=e.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var M=y[b];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(i.set(M.dataset.precedence,M),u=M)}u&&i.set(null,u)}y=o.instance,M=y.getAttribute("data-precedence"),b=i.get(M)||u,b===u&&i.set(null,y),i.set(M,y),this.count++,u=Vl.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),b?b.parentNode.insertBefore(y,b.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(y,e.firstChild)),o.state.loading|=4}}var fi={$$typeof:N,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function GM(e,o,i,u,y,b,M,A,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fe(0),this.hiddenUpdates=fe(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function iv(e,o,i,u,y,b,M,A,O,Q,ne,ie){return e=new GM(e,o,i,M,O,Q,ne,ie,A),o=1,b===!0&&(o|=24),b=wn(3,null,null,o),e.current=b,b.stateNode=e,o=od(),o.refCount++,e.pooledCache=o,o.refCount++,b.memoizedState={element:u,isDehydrated:i,cache:o},ld(b),e}function lv(e){return e?(e=_a,e):_a}function cv(e,o,i,u,y,b){y=lv(y),u.context===null?u.context=y:u.pendingContext=y,u=ho(o),u.payload={element:i},b=b===void 0?null:b,b!==null&&(u.callback=b),i=po(e,u,o),i!==null&&(yn(i,e,o),Gr(i,e,o))}function uv(e,o){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<o?i:o}}function Nf(e,o){uv(e,o),(e=e.alternate)&&uv(e,o)}function dv(e){if(e.tag===13||e.tag===31){var o=Yo(e,67108864);o!==null&&yn(o,e,67108864),Nf(e,67108864)}}function fv(e){if(e.tag===13||e.tag===31){var o=Rn();o=Wt(o);var i=Yo(e,o);i!==null&&yn(i,e,o),Nf(e,o)}}var Xl=!0;function QM(e,o,i,u){var y=z.T;z.T=null;var b=D.p;try{D.p=2,Af(e,o,i,u)}finally{D.p=b,z.T=y}}function FM(e,o,i,u){var y=z.T;z.T=null;var b=D.p;try{D.p=8,Af(e,o,i,u)}finally{D.p=b,z.T=y}}function Af(e,o,i,u){if(Xl){var y=Tf(u);if(y===null)pf(e,o,u,Wl,i),pv(e,u);else if(KM(y,e,o,i,u))u.stopPropagation();else if(pv(e,u),o&4&&-1<VM.indexOf(e)){for(;y!==null;){var b=Ca(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var M=Xn(b.pendingLanes);if(M!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;M;){var O=1<<31-_t(M);A.entanglements[1]|=O,M&=~O}ds(b),(tt&6)===0&&(_l=Ze()+500,ri(0))}}break;case 31:case 13:A=Yo(b,2),A!==null&&yn(A,b,2),Ol(),Nf(b,2)}if(b=Tf(u),b===null&&pf(e,o,u,Wl,i),b===y)break;y=b}y!==null&&u.stopPropagation()}else pf(e,o,u,null,i)}}function Tf(e){return e=ju(e),jf(e)}var Wl=null;function jf(e){if(Wl=null,e=wa(e),e!==null){var o=l(e);if(o===null)e=null;else{var i=o.tag;if(i===13){if(e=c(o),e!==null)return e;e=null}else if(i===31){if(e=d(o),e!==null)return e;e=null}else if(i===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;e=null}else o!==e&&(e=null)}}return Wl=e,null}function hv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dt()){case vt:return 2;case gt:return 8;case Yt:case Qt:return 32;case Rs:return 268435456;default:return 32}default:return 32}}var kf=!1,Eo=null,Ro=null,No=null,hi=new Map,pi=new Map,Ao=[],VM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pv(e,o){switch(e){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":Ro=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":hi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":pi.delete(o.pointerId)}}function gi(e,o,i,u,y,b){return e===null||e.nativeEvent!==b?(e={blockedOn:o,domEventName:i,eventSystemFlags:u,nativeEvent:b,targetContainers:[y]},o!==null&&(o=Ca(o),o!==null&&dv(o)),e):(e.eventSystemFlags|=u,o=e.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),e)}function KM(e,o,i,u,y){switch(o){case"focusin":return Eo=gi(Eo,e,o,i,u,y),!0;case"dragenter":return Ro=gi(Ro,e,o,i,u,y),!0;case"mouseover":return No=gi(No,e,o,i,u,y),!0;case"pointerover":var b=y.pointerId;return hi.set(b,gi(hi.get(b)||null,e,o,i,u,y)),!0;case"gotpointercapture":return b=y.pointerId,pi.set(b,gi(pi.get(b)||null,e,o,i,u,y)),!0}return!1}function gv(e){var o=wa(e.target);if(o!==null){var i=l(o);if(i!==null){if(o=i.tag,o===13){if(o=c(i),o!==null){e.blockedOn=o,wt(e.priority,function(){fv(i)});return}}else if(o===31){if(o=d(i),o!==null){e.blockedOn=o,wt(e.priority,function(){fv(i)});return}}else if(o===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zl(e){if(e.blockedOn!==null)return!1;for(var o=e.targetContainers;0<o.length;){var i=Tf(e.nativeEvent);if(i===null){i=e.nativeEvent;var u=new i.constructor(i.type,i);Tu=u,i.target.dispatchEvent(u),Tu=null}else return o=Ca(i),o!==null&&dv(o),e.blockedOn=i,!1;o.shift()}return!0}function mv(e,o,i){Zl(e)&&i.delete(o)}function YM(){kf=!1,Eo!==null&&Zl(Eo)&&(Eo=null),Ro!==null&&Zl(Ro)&&(Ro=null),No!==null&&Zl(No)&&(No=null),hi.forEach(mv),pi.forEach(mv)}function Jl(e,o){e.blockedOn===o&&(e.blockedOn=null,kf||(kf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,YM)))}var ec=null;function yv(e){ec!==e&&(ec=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ec===e&&(ec=null);for(var o=0;o<e.length;o+=3){var i=e[o],u=e[o+1],y=e[o+2];if(typeof u!="function"){if(jf(u||i)===null)continue;break}var b=Ca(i);b!==null&&(e.splice(o,3),o-=3,Ad(b,{pending:!0,data:y,method:i.method,action:u},u,y))}}))}function sr(e){function o(O){return Jl(O,e)}Eo!==null&&Jl(Eo,e),Ro!==null&&Jl(Ro,e),No!==null&&Jl(No,e),hi.forEach(o),pi.forEach(o);for(var i=0;i<Ao.length;i++){var u=Ao[i];u.blockedOn===e&&(u.blockedOn=null)}for(;0<Ao.length&&(i=Ao[0],i.blockedOn===null);)gv(i),i.blockedOn===null&&Ao.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(u=0;u<i.length;u+=3){var y=i[u],b=i[u+1],M=y[Ht]||null;if(typeof b=="function")M||yv(i);else if(M){var A=null;if(b&&b.hasAttribute("formAction")){if(y=b,M=b[Ht]||null)A=M.formAction;else if(jf(y)!==null)continue}else A=M.action;typeof A=="function"?i[u+1]=A:(i.splice(u,3),u-=3),yv(i)}}}function vv(){function e(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(M){return y=M})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),u||setTimeout(i,20)}function i(){if(!u&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(i,100),function(){u=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Df(e){this._internalRoot=e}tc.prototype.render=Df.prototype.render=function(e){var o=this._internalRoot;if(o===null)throw Error(s(409));var i=o.current,u=Rn();cv(i,u,e,o,null,null)},tc.prototype.unmount=Df.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var o=e.containerInfo;cv(e.current,2,null,e,null,null),Ol(),o[is]=null}};function tc(e){this._internalRoot=e}tc.prototype.unstable_scheduleHydration=function(e){if(e){var o=ln();e={blockedOn:null,target:e,priority:o};for(var i=0;i<Ao.length&&o!==0&&o<Ao[i].priority;i++);Ao.splice(i,0,e),i===0&&gv(e)}};var bv=t.version;if(bv!=="19.2.0")throw Error(s(527,bv,"19.2.0"));D.findDOMNode=function(e){var o=e._reactInternals;if(o===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(o),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var XM={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{rs=nc.inject(XM),Xt=nc}catch{}}return yi.createRoot=function(e,o){if(!r(e))throw Error(s(299));var i=!1,u="",y=Rm,b=Nm,M=Am;return o!=null&&(o.unstable_strictMode===!0&&(i=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=iv(e,1,!1,null,null,i,u,null,y,b,M,vv),e[is]=o.current,hf(e),new Df(o)},yi.hydrateRoot=function(e,o,i){if(!r(e))throw Error(s(299));var u=!1,y="",b=Rm,M=Nm,A=Am,O=null;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(y=i.identifierPrefix),i.onUncaughtError!==void 0&&(b=i.onUncaughtError),i.onCaughtError!==void 0&&(M=i.onCaughtError),i.onRecoverableError!==void 0&&(A=i.onRecoverableError),i.formState!==void 0&&(O=i.formState)),o=iv(e,1,!0,o,i??null,u,y,O,b,M,A,vv),o.context=lv(null),i=o.current,u=Rn(),u=Wt(u),y=ho(u),y.callback=null,po(i,y,u),i=u,o.current.lanes=i,be(o,i),ds(o),e[is]=o.current,hf(e),new tc(o)},yi.version="19.2.0",yi}var Tv;function rE(){if(Tv)return Of.exports;Tv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Of.exports=aE(),Of.exports}var iE=rE();const lE=Nh(iE);let cE={data:""},uE=a=>{if(typeof window=="object"){let t=(a?a.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(a||document.head).appendChild(t),t.firstChild}return a||cE},dE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,fE=/\/\*[^]*?\*\/|  +/g,jv=/\n+/g,Do=(a,t)=>{let n="",s="",r="";for(let l in a){let c=a[l];l[0]=="@"?l[1]=="i"?n=l+" "+c+";":s+=l[1]=="f"?Do(c,l):l+"{"+Do(c,l[1]=="k"?"":t)+"}":typeof c=="object"?s+=Do(c,t?t.replace(/([^,])+/g,d=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,d):d?d+" "+h:h)):l):c!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Do.p?Do.p(l,c):l+":"+c+";")}return n+(t&&r?t+"{"+r+"}":r)+s},Ks={},D0=a=>{if(typeof a=="object"){let t="";for(let n in a)t+=n+D0(a[n]);return t}return a},hE=(a,t,n,s,r)=>{let l=D0(a),c=Ks[l]||(Ks[l]=(h=>{let p=0,g=11;for(;p<h.length;)g=101*g+h.charCodeAt(p++)>>>0;return"go"+g})(l));if(!Ks[c]){let h=l!==a?a:(p=>{let g,m,v=[{}];for(;g=dE.exec(p.replace(fE,""));)g[4]?v.shift():g[3]?(m=g[3].replace(jv," ").trim(),v.unshift(v[0][m]=v[0][m]||{})):v[0][g[1]]=g[2].replace(jv," ").trim();return v[0]})(a);Ks[c]=Do(r?{["@keyframes "+c]:h}:h,n?"":"."+c)}let d=n&&Ks.g?Ks.g:null;return n&&(Ks.g=Ks[c]),((h,p,g,m)=>{m?p.data=p.data.replace(m,h):p.data.indexOf(h)===-1&&(p.data=g?h+p.data:p.data+h)})(Ks[c],t,s,d),c},pE=(a,t,n)=>a.reduce((s,r,l)=>{let c=t[l];if(c&&c.call){let d=c(n),h=d&&d.props&&d.props.className||/^go/.test(d)&&d;c=h?"."+h:d&&typeof d=="object"?d.props?"":Do(d,""):d===!1?"":d}return s+r+(c??"")},"");function Ic(a){let t=this||{},n=a.call?a(t.p):a;return hE(n.unshift?n.raw?pE(n,[].slice.call(arguments,1),t.p):n.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):n,uE(t.target),t.g,t.o,t.k)}let _0,oh,ah;Ic.bind({g:1});let eo=Ic.bind({k:1});function gE(a,t,n,s){Do.p=t,_0=a,oh=n,ah=s}function Io(a,t){let n=this||{};return function(){let s=arguments;function r(l,c){let d=Object.assign({},l),h=d.className||r.className;n.p=Object.assign({theme:oh&&oh()},d),n.o=/ *go\d+/.test(h),d.className=Ic.apply(n,s)+(h?" "+h:"");let p=a;return a[0]&&(p=d.as||a,delete d.as),ah&&p[0]&&ah(d),_0(p,d)}return r}}var mE=a=>typeof a=="function",Sc=(a,t)=>mE(a)?a(t):a,yE=(()=>{let a=0;return()=>(++a).toString()})(),z0=(()=>{let a;return()=>{if(a===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");a=!t||t.matches}return a}})(),vE=20,jh="default",O0=(a,t)=>{let{toastLimit:n}=a.settings;switch(t.type){case 0:return{...a,toasts:[t.toast,...a.toasts].slice(0,n)};case 1:return{...a,toasts:a.toasts.map(c=>c.id===t.toast.id?{...c,...t.toast}:c)};case 2:let{toast:s}=t;return O0(a,{type:a.toasts.find(c=>c.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...a,toasts:a.toasts.map(c=>c.id===r||r===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return t.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(c=>c.id!==t.toastId)};case 5:return{...a,pausedAt:t.time};case 6:let l=t.time-(a.pausedAt||0);return{...a,pausedAt:void 0,toasts:a.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+l}))}}},mc=[],L0={toasts:[],pausedAt:void 0,settings:{toastLimit:vE}},ps={},P0=(a,t=jh)=>{ps[t]=O0(ps[t]||L0,a),mc.forEach(([n,s])=>{n===t&&s(ps[t])})},I0=a=>Object.keys(ps).forEach(t=>P0(a,t)),bE=a=>Object.keys(ps).find(t=>ps[t].toasts.some(n=>n.id===a)),qc=(a=jh)=>t=>{P0(t,a)},xE={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},wE=(a={},t=jh)=>{let[n,s]=x.useState(ps[t]||L0),r=x.useRef(ps[t]);x.useEffect(()=>(r.current!==ps[t]&&s(ps[t]),mc.push([t,s]),()=>{let c=mc.findIndex(([d])=>d===t);c>-1&&mc.splice(c,1)}),[t]);let l=n.toasts.map(c=>{var d,h,p;return{...a,...a[c.type],...c,removeDelay:c.removeDelay||((d=a[c.type])==null?void 0:d.removeDelay)||a?.removeDelay,duration:c.duration||((h=a[c.type])==null?void 0:h.duration)||a?.duration||xE[c.type],style:{...a.style,...(p=a[c.type])==null?void 0:p.style,...c.style}}});return{...n,toasts:l}},CE=(a,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:a,pauseDuration:0,...n,id:n?.id||yE()}),Di=a=>(t,n)=>{let s=CE(t,a,n);return qc(s.toasterId||bE(s.id))({type:2,toast:s}),s.id},$t=(a,t)=>Di("blank")(a,t);$t.error=Di("error");$t.success=Di("success");$t.loading=Di("loading");$t.custom=Di("custom");$t.dismiss=(a,t)=>{let n={type:3,toastId:a};t?qc(t)(n):I0(n)};$t.dismissAll=a=>$t.dismiss(void 0,a);$t.remove=(a,t)=>{let n={type:4,toastId:a};t?qc(t)(n):I0(n)};$t.removeAll=a=>$t.remove(void 0,a);$t.promise=(a,t,n)=>{let s=$t.loading(t.loading,{...n,...n?.loading});return typeof a=="function"&&(a=a()),a.then(r=>{let l=t.success?Sc(t.success,r):void 0;return l?$t.success(l,{id:s,...n,...n?.success}):$t.dismiss(s),r}).catch(r=>{let l=t.error?Sc(t.error,r):void 0;l?$t.error(l,{id:s,...n,...n?.error}):$t.dismiss(s)}),a};var SE=1e3,ME=(a,t="default")=>{let{toasts:n,pausedAt:s}=wE(a,t),r=x.useRef(new Map).current,l=x.useCallback((m,v=SE)=>{if(r.has(m))return;let w=setTimeout(()=>{r.delete(m),c({type:4,toastId:m})},v);r.set(m,w)},[]);x.useEffect(()=>{if(s)return;let m=Date.now(),v=n.map(w=>{if(w.duration===1/0)return;let S=(w.duration||0)+w.pauseDuration-(m-w.createdAt);if(S<0){w.visible&&$t.dismiss(w.id);return}return setTimeout(()=>$t.dismiss(w.id,t),S)});return()=>{v.forEach(w=>w&&clearTimeout(w))}},[n,s,t]);let c=x.useCallback(qc(t),[t]),d=x.useCallback(()=>{c({type:5,time:Date.now()})},[c]),h=x.useCallback((m,v)=>{c({type:1,toast:{id:m,height:v}})},[c]),p=x.useCallback(()=>{s&&c({type:6,time:Date.now()})},[s,c]),g=x.useCallback((m,v)=>{let{reverseOrder:w=!1,gutter:S=8,defaultPosition:C}=v||{},R=n.filter(N=>(N.position||C)===(m.position||C)&&N.height),E=R.findIndex(N=>N.id===m.id),j=R.filter((N,T)=>T<E&&N.visible).length;return R.filter(N=>N.visible).slice(...w?[j+1]:[0,j]).reduce((N,T)=>N+(T.height||0)+S,0)},[n]);return x.useEffect(()=>{n.forEach(m=>{if(m.dismissed)l(m.id,m.removeDelay);else{let v=r.get(m.id);v&&(clearTimeout(v),r.delete(m.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:h,startPause:d,endPause:p,calculateOffset:g}}},EE=eo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,RE=eo`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,NE=eo`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,AE=Io("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${a=>a.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${EE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${RE} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${a=>a.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${NE} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,TE=eo`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,jE=Io("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${a=>a.secondary||"#e0e0e0"};
  border-right-color: ${a=>a.primary||"#616161"};
  animation: ${TE} 1s linear infinite;
`,kE=eo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,DE=eo`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,_E=Io("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${a=>a.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${kE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${DE} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${a=>a.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,zE=Io("div")`
  position: absolute;
`,OE=Io("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,LE=eo`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,PE=Io("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${LE} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,IE=({toast:a})=>{let{icon:t,type:n,iconTheme:s}=a;return t!==void 0?typeof t=="string"?x.createElement(PE,null,t):t:n==="blank"?null:x.createElement(OE,null,x.createElement(jE,{...s}),n!=="loading"&&x.createElement(zE,null,n==="error"?x.createElement(AE,{...s}):x.createElement(_E,{...s})))},qE=a=>`
0% {transform: translate3d(0,${a*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,HE=a=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${a*-150}%,-1px) scale(.6); opacity:0;}
`,UE="0%{opacity:0;} 100%{opacity:1;}",BE="0%{opacity:1;} 100%{opacity:0;}",$E=Io("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,GE=Io("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,QE=(a,t)=>{let n=a.includes("top")?1:-1,[s,r]=z0()?[UE,BE]:[qE(n),HE(n)];return{animation:t?`${eo(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${eo(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},FE=x.memo(({toast:a,position:t,style:n,children:s})=>{let r=a.height?QE(a.position||t||"top-center",a.visible):{opacity:0},l=x.createElement(IE,{toast:a}),c=x.createElement(GE,{...a.ariaProps},Sc(a.message,a));return x.createElement($E,{className:a.className,style:{...r,...n,...a.style}},typeof s=="function"?s({icon:l,message:c}):x.createElement(x.Fragment,null,l,c))});gE(x.createElement);var VE=({id:a,className:t,style:n,onHeightUpdate:s,children:r})=>{let l=x.useCallback(c=>{if(c){let d=()=>{let h=c.getBoundingClientRect().height;s(a,h)};d(),new MutationObserver(d).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[a,s]);return x.createElement("div",{ref:l,className:t,style:n},r)},KE=(a,t)=>{let n=a.includes("top"),s=n?{top:0}:{bottom:0},r=a.includes("center")?{justifyContent:"center"}:a.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:z0()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...s,...r}},YE=Ic`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,sc=16,XE=({reverseOrder:a,position:t="top-center",toastOptions:n,gutter:s,children:r,toasterId:l,containerStyle:c,containerClassName:d})=>{let{toasts:h,handlers:p}=ME(n,l);return x.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:sc,left:sc,right:sc,bottom:sc,pointerEvents:"none",...c},className:d,onMouseEnter:p.startPause,onMouseLeave:p.endPause},h.map(g=>{let m=g.position||t,v=p.calculateOffset(g,{reverseOrder:a,gutter:s,defaultPosition:t}),w=KE(m,v);return x.createElement(VE,{id:g.id,key:g.id,onHeightUpdate:p.updateHeight,className:g.visible?YE:"",style:w},g.type==="custom"?Sc(g.message,g):r?r(g):x.createElement(FE,{toast:g,position:m}))}))},nL=$t;function kv(a,t){if(typeof a=="function")return a(t);a!=null&&(a.current=t)}function Cs(...a){return t=>{let n=!1;const s=a.map(r=>{const l=kv(r,t);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let r=0;r<s.length;r++){const l=s[r];typeof l=="function"?l():kv(a[r],null)}}}}function De(...a){return x.useCallback(Cs(...a),a)}var WE=Symbol.for("react.lazy"),Mc=Th[" use ".trim().toString()];function ZE(a){return typeof a=="object"&&a!==null&&"then"in a}function q0(a){return a!=null&&typeof a=="object"&&"$$typeof"in a&&a.$$typeof===WE&&"_payload"in a&&ZE(a._payload)}function kh(a){const t=eR(a),n=x.forwardRef((s,r)=>{let{children:l,...c}=s;q0(l)&&typeof Mc=="function"&&(l=Mc(l._payload));const d=x.Children.toArray(l),h=d.find(nR);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(t,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(t,{...c,ref:r,children:l})});return n.displayName=`${a}.Slot`,n}var JE=kh("Slot");function eR(a){const t=x.forwardRef((n,s)=>{let{children:r,...l}=n;if(q0(r)&&typeof Mc=="function"&&(r=Mc(r._payload)),x.isValidElement(r)){const c=oR(r),d=sR(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return t.displayName=`${a}.SlotClone`,t}var tR=Symbol("radix.slottable");function nR(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===tR}function sR(a,t){const n={...t};for(const s in t){const r=a[s],l=t[s];/^on[A-Z]/.test(s)?r&&l?n[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(n[s]=r):s==="style"?n[s]={...r,...l}:s==="className"&&(n[s]=[r,l].filter(Boolean).join(" "))}return{...a,...n}}function oR(a){let t=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?a.ref:(t=Object.getOwnPropertyDescriptor(a,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?a.props.ref:a.props.ref||a.ref)}function H0(a){var t,n,s="";if(typeof a=="string"||typeof a=="number")s+=a;else if(typeof a=="object")if(Array.isArray(a)){var r=a.length;for(t=0;t<r;t++)a[t]&&(n=H0(a[t]))&&(s&&(s+=" "),s+=n)}else for(n in a)a[n]&&(s&&(s+=" "),s+=n);return s}function U0(){for(var a,t,n=0,s="",r=arguments.length;n<r;n++)(a=arguments[n])&&(t=H0(a))&&(s&&(s+=" "),s+=t);return s}const Dv=a=>typeof a=="boolean"?`${a}`:a===0?"0":a,_v=U0,Dh=(a,t)=>n=>{var s;if(t?.variants==null)return _v(a,n?.class,n?.className);const{variants:r,defaultVariants:l}=t,c=Object.keys(r).map(p=>{const g=n?.[p],m=l?.[p];if(g===null)return null;const v=Dv(g)||Dv(m);return r[p][v]}),d=n&&Object.entries(n).reduce((p,g)=>{let[m,v]=g;return v===void 0||(p[m]=v),p},{}),h=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((p,g)=>{let{class:m,className:v,...w}=g;return Object.entries(w).every(S=>{let[C,R]=S;return Array.isArray(R)?R.includes({...l,...d}[C]):{...l,...d}[C]===R})?[...p,m,v]:p},[]);return _v(a,c,h,n?.class,n?.className)},aR=(a,t)=>{const n=new Array(a.length+t.length);for(let s=0;s<a.length;s++)n[s]=a[s];for(let s=0;s<t.length;s++)n[a.length+s]=t[s];return n},rR=(a,t)=>({classGroupId:a,validator:t}),B0=(a=new Map,t=null,n)=>({nextPart:a,validators:t,classGroupId:n}),Ec="-",zv=[],iR="arbitrary..",lR=a=>{const t=uR(a),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=a;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return cR(c);const d=c.split(Ec),h=d[0]===""&&d.length>1?1:0;return $0(d,h,t)},getConflictingClassGroupIds:(c,d)=>{if(d){const h=s[c],p=n[c];return h?p?aR(p,h):h:p||zv}return n[c]||zv}}},$0=(a,t,n)=>{if(a.length-t===0)return n.classGroupId;const r=a[t],l=n.nextPart.get(r);if(l){const p=$0(a,t+1,l);if(p)return p}const c=n.validators;if(c===null)return;const d=t===0?a.join(Ec):a.slice(t).join(Ec),h=c.length;for(let p=0;p<h;p++){const g=c[p];if(g.validator(d))return g.classGroupId}},cR=a=>a.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=a.slice(1,-1),n=t.indexOf(":"),s=t.slice(0,n);return s?iR+s:void 0})(),uR=a=>{const{theme:t,classGroups:n}=a;return dR(n,t)},dR=(a,t)=>{const n=B0();for(const s in a){const r=a[s];_h(r,n,s,t)}return n},_h=(a,t,n,s)=>{const r=a.length;for(let l=0;l<r;l++){const c=a[l];fR(c,t,n,s)}},fR=(a,t,n,s)=>{if(typeof a=="string"){hR(a,t,n);return}if(typeof a=="function"){pR(a,t,n,s);return}gR(a,t,n,s)},hR=(a,t,n)=>{const s=a===""?t:G0(t,a);s.classGroupId=n},pR=(a,t,n,s)=>{if(mR(a)){_h(a(s),t,n,s);return}t.validators===null&&(t.validators=[]),t.validators.push(rR(n,a))},gR=(a,t,n,s)=>{const r=Object.entries(a),l=r.length;for(let c=0;c<l;c++){const[d,h]=r[c];_h(h,G0(t,d),n,s)}},G0=(a,t)=>{let n=a;const s=t.split(Ec),r=s.length;for(let l=0;l<r;l++){const c=s[l];let d=n.nextPart.get(c);d||(d=B0(),n.nextPart.set(c,d)),n=d}return n},mR=a=>"isThemeGetter"in a&&a.isThemeGetter===!0,yR=a=>{if(a<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),s=Object.create(null);const r=(l,c)=>{n[l]=c,t++,t>a&&(t=0,s=n,n=Object.create(null))};return{get(l){let c=n[l];if(c!==void 0)return c;if((c=s[l])!==void 0)return r(l,c),c},set(l,c){l in n?n[l]=c:r(l,c)}}},rh="!",Ov=":",vR=[],Lv=(a,t,n,s,r)=>({modifiers:a,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:s,isExternal:r}),bR=a=>{const{prefix:t,experimentalParseClassName:n}=a;let s=r=>{const l=[];let c=0,d=0,h=0,p;const g=r.length;for(let C=0;C<g;C++){const R=r[C];if(c===0&&d===0){if(R===Ov){l.push(r.slice(h,C)),h=C+1;continue}if(R==="/"){p=C;continue}}R==="["?c++:R==="]"?c--:R==="("?d++:R===")"&&d--}const m=l.length===0?r:r.slice(h);let v=m,w=!1;m.endsWith(rh)?(v=m.slice(0,-1),w=!0):m.startsWith(rh)&&(v=m.slice(1),w=!0);const S=p&&p>h?p-h:void 0;return Lv(l,w,v,S)};if(t){const r=t+Ov,l=s;s=c=>c.startsWith(r)?l(c.slice(r.length)):Lv(vR,!1,c,void 0,!0)}if(n){const r=s;s=l=>n({className:l,parseClassName:r})}return s},xR=a=>{const t=new Map;return a.orderSensitiveModifiers.forEach((n,s)=>{t.set(n,1e6+s)}),n=>{const s=[];let r=[];for(let l=0;l<n.length;l++){const c=n[l],d=c[0]==="[",h=t.has(c);d||h?(r.length>0&&(r.sort(),s.push(...r),r=[]),s.push(c)):r.push(c)}return r.length>0&&(r.sort(),s.push(...r)),s}},wR=a=>({cache:yR(a.cacheSize),parseClassName:bR(a),sortModifiers:xR(a),...lR(a)}),CR=/\s+/,SR=(a,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:l}=t,c=[],d=a.trim().split(CR);let h="";for(let p=d.length-1;p>=0;p-=1){const g=d[p],{isExternal:m,modifiers:v,hasImportantModifier:w,baseClassName:S,maybePostfixModifierPosition:C}=n(g);if(m){h=g+(h.length>0?" "+h:h);continue}let R=!!C,E=s(R?S.substring(0,C):S);if(!E){if(!R){h=g+(h.length>0?" "+h:h);continue}if(E=s(S),!E){h=g+(h.length>0?" "+h:h);continue}R=!1}const j=v.length===0?"":v.length===1?v[0]:l(v).join(":"),N=w?j+rh:j,T=N+E;if(c.indexOf(T)>-1)continue;c.push(T);const k=r(E,R);for(let U=0;U<k.length;++U){const I=k[U];c.push(N+I)}h=g+(h.length>0?" "+h:h)}return h},MR=(...a)=>{let t=0,n,s,r="";for(;t<a.length;)(n=a[t++])&&(s=Q0(n))&&(r&&(r+=" "),r+=s);return r},Q0=a=>{if(typeof a=="string")return a;let t,n="";for(let s=0;s<a.length;s++)a[s]&&(t=Q0(a[s]))&&(n&&(n+=" "),n+=t);return n},ER=(a,...t)=>{let n,s,r,l;const c=h=>{const p=t.reduce((g,m)=>m(g),a());return n=wR(p),s=n.cache.get,r=n.cache.set,l=d,d(h)},d=h=>{const p=s(h);if(p)return p;const g=SR(h,n);return r(h,g),g};return l=c,(...h)=>l(MR(...h))},RR=[],Bt=a=>{const t=n=>n[a]||RR;return t.isThemeGetter=!0,t},F0=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,V0=/^\((?:(\w[\w-]*):)?(.+)\)$/i,NR=/^\d+\/\d+$/,AR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,TR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,kR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,or=a=>NR.test(a),qe=a=>!!a&&!Number.isNaN(Number(a)),jo=a=>!!a&&Number.isInteger(Number(a)),qf=a=>a.endsWith("%")&&qe(a.slice(0,-1)),Ys=a=>AR.test(a),_R=()=>!0,zR=a=>TR.test(a)&&!jR.test(a),K0=()=>!1,OR=a=>kR.test(a),LR=a=>DR.test(a),PR=a=>!we(a)&&!Ce(a),IR=a=>br(a,W0,K0),we=a=>F0.test(a),la=a=>br(a,Z0,zR),Hf=a=>br(a,$R,qe),Pv=a=>br(a,Y0,K0),qR=a=>br(a,X0,LR),oc=a=>br(a,J0,OR),Ce=a=>V0.test(a),vi=a=>xr(a,Z0),HR=a=>xr(a,GR),Iv=a=>xr(a,Y0),UR=a=>xr(a,W0),BR=a=>xr(a,X0),ac=a=>xr(a,J0,!0),br=(a,t,n)=>{const s=F0.exec(a);return s?s[1]?t(s[1]):n(s[2]):!1},xr=(a,t,n=!1)=>{const s=V0.exec(a);return s?s[1]?t(s[1]):n:!1},Y0=a=>a==="position"||a==="percentage",X0=a=>a==="image"||a==="url",W0=a=>a==="length"||a==="size"||a==="bg-size",Z0=a=>a==="length",$R=a=>a==="number",GR=a=>a==="family-name",J0=a=>a==="shadow",QR=()=>{const a=Bt("color"),t=Bt("font"),n=Bt("text"),s=Bt("font-weight"),r=Bt("tracking"),l=Bt("leading"),c=Bt("breakpoint"),d=Bt("container"),h=Bt("spacing"),p=Bt("radius"),g=Bt("shadow"),m=Bt("inset-shadow"),v=Bt("text-shadow"),w=Bt("drop-shadow"),S=Bt("blur"),C=Bt("perspective"),R=Bt("aspect"),E=Bt("ease"),j=Bt("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...T(),Ce,we],U=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],q=()=>[Ce,we,h],te=()=>[or,"full","auto",...q()],se=()=>[jo,"none","subgrid",Ce,we],le=()=>["auto",{span:["full",jo,Ce,we]},jo,Ce,we],ee=()=>[jo,"auto",Ce,we],oe=()=>["auto","min","max","fr",Ce,we],ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ue=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...q()],D=()=>[or,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...q()],L=()=>[a,Ce,we],Y=()=>[...T(),Iv,Pv,{position:[Ce,we]}],he=()=>["no-repeat",{repeat:["","x","y","space","round"]}],_=()=>["auto","cover","contain",UR,IR,{size:[Ce,we]}],$=()=>[qf,vi,la],X=()=>["","none","full",p,Ce,we],W=()=>["",qe,vi,la],F=()=>["solid","dashed","dotted","double"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>[qe,qf,Iv,Pv],V=()=>["","none",S,Ce,we],pe=()=>["none",qe,Ce,we],me=()=>["none",qe,Ce,we],ye=()=>[qe,Ce,we],ve=()=>[or,"full",...q()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ys],breakpoint:[Ys],color:[_R],container:[Ys],"drop-shadow":[Ys],ease:["in","out","in-out"],font:[PR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ys],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ys],shadow:[Ys],spacing:["px",qe],text:[Ys],"text-shadow":[Ys],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",or,we,Ce,R]}],container:["container"],columns:[{columns:[qe,we,Ce,d]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:te()}],"inset-x":[{"inset-x":te()}],"inset-y":[{"inset-y":te()}],start:[{start:te()}],end:[{end:te()}],top:[{top:te()}],right:[{right:te()}],bottom:[{bottom:te()}],left:[{left:te()}],visibility:["visible","invisible","collapse"],z:[{z:[jo,"auto",Ce,we]}],basis:[{basis:[or,"full","auto",d,...q()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qe,or,"auto","initial","none",we]}],grow:[{grow:["",qe,Ce,we]}],shrink:[{shrink:["",qe,Ce,we]}],order:[{order:[jo,"first","last","none",Ce,we]}],"grid-cols":[{"grid-cols":se()}],"col-start-end":[{col:le()}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":se()}],"row-start-end":[{row:le()}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":oe()}],"auto-rows":[{"auto-rows":oe()}],gap:[{gap:q()}],"gap-x":[{"gap-x":q()}],"gap-y":[{"gap-y":q()}],"justify-content":[{justify:[...ce(),"normal"]}],"justify-items":[{"justify-items":[...ue(),"normal"]}],"justify-self":[{"justify-self":["auto",...ue()]}],"align-content":[{content:["normal",...ce()]}],"align-items":[{items:[...ue(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ue(),{baseline:["","last"]}]}],"place-content":[{"place-content":ce()}],"place-items":[{"place-items":[...ue(),"baseline"]}],"place-self":[{"place-self":["auto",...ue()]}],p:[{p:q()}],px:[{px:q()}],py:[{py:q()}],ps:[{ps:q()}],pe:[{pe:q()}],pt:[{pt:q()}],pr:[{pr:q()}],pb:[{pb:q()}],pl:[{pl:q()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":q()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":q()}],"space-y-reverse":["space-y-reverse"],size:[{size:D()}],w:[{w:[d,"screen",...D()]}],"min-w":[{"min-w":[d,"screen","none",...D()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...D()]}],h:[{h:["screen","lh",...D()]}],"min-h":[{"min-h":["screen","lh","none",...D()]}],"max-h":[{"max-h":["screen","lh",...D()]}],"font-size":[{text:["base",n,vi,la]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Ce,Hf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",qf,we]}],"font-family":[{font:[HR,we,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Ce,we]}],"line-clamp":[{"line-clamp":[qe,"none",Ce,Hf]}],leading:[{leading:[l,...q()]}],"list-image":[{"list-image":["none",Ce,we]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ce,we]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:[qe,"from-font","auto",Ce,la]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[qe,"auto",Ce,we]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce,we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce,we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:he()}],"bg-size":[{bg:_()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},jo,Ce,we],radial:["",Ce,we],conic:[jo,Ce,we]},BR,qR]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:$()}],"gradient-via-pos":[{via:$()}],"gradient-to-pos":[{to:$()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:X()}],"rounded-s":[{"rounded-s":X()}],"rounded-e":[{"rounded-e":X()}],"rounded-t":[{"rounded-t":X()}],"rounded-r":[{"rounded-r":X()}],"rounded-b":[{"rounded-b":X()}],"rounded-l":[{"rounded-l":X()}],"rounded-ss":[{"rounded-ss":X()}],"rounded-se":[{"rounded-se":X()}],"rounded-ee":[{"rounded-ee":X()}],"rounded-es":[{"rounded-es":X()}],"rounded-tl":[{"rounded-tl":X()}],"rounded-tr":[{"rounded-tr":X()}],"rounded-br":[{"rounded-br":X()}],"rounded-bl":[{"rounded-bl":X()}],"border-w":[{border:W()}],"border-w-x":[{"border-x":W()}],"border-w-y":[{"border-y":W()}],"border-w-s":[{"border-s":W()}],"border-w-e":[{"border-e":W()}],"border-w-t":[{"border-t":W()}],"border-w-r":[{"border-r":W()}],"border-w-b":[{"border-b":W()}],"border-w-l":[{"border-l":W()}],"divide-x":[{"divide-x":W()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":W()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...F(),"hidden","none"]}],"divide-style":[{divide:[...F(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...F(),"none","hidden"]}],"outline-offset":[{"outline-offset":[qe,Ce,we]}],"outline-w":[{outline:["",qe,vi,la]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",g,ac,oc]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",m,ac,oc]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[qe,la]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":W()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",v,ac,oc]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[qe,Ce,we]}],"mix-blend":[{"mix-blend":[...ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qe]}],"mask-image-linear-from-pos":[{"mask-linear-from":B()}],"mask-image-linear-to-pos":[{"mask-linear-to":B()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":B()}],"mask-image-t-to-pos":[{"mask-t-to":B()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":B()}],"mask-image-r-to-pos":[{"mask-r-to":B()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":B()}],"mask-image-b-to-pos":[{"mask-b-to":B()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":B()}],"mask-image-l-to-pos":[{"mask-l-to":B()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":B()}],"mask-image-x-to-pos":[{"mask-x-to":B()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":B()}],"mask-image-y-to-pos":[{"mask-y-to":B()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[Ce,we]}],"mask-image-radial-from-pos":[{"mask-radial-from":B()}],"mask-image-radial-to-pos":[{"mask-radial-to":B()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[qe]}],"mask-image-conic-from-pos":[{"mask-conic-from":B()}],"mask-image-conic-to-pos":[{"mask-conic-to":B()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:he()}],"mask-size":[{mask:_()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ce,we]}],filter:[{filter:["","none",Ce,we]}],blur:[{blur:V()}],brightness:[{brightness:[qe,Ce,we]}],contrast:[{contrast:[qe,Ce,we]}],"drop-shadow":[{"drop-shadow":["","none",w,ac,oc]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",qe,Ce,we]}],"hue-rotate":[{"hue-rotate":[qe,Ce,we]}],invert:[{invert:["",qe,Ce,we]}],saturate:[{saturate:[qe,Ce,we]}],sepia:[{sepia:["",qe,Ce,we]}],"backdrop-filter":[{"backdrop-filter":["","none",Ce,we]}],"backdrop-blur":[{"backdrop-blur":V()}],"backdrop-brightness":[{"backdrop-brightness":[qe,Ce,we]}],"backdrop-contrast":[{"backdrop-contrast":[qe,Ce,we]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qe,Ce,we]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qe,Ce,we]}],"backdrop-invert":[{"backdrop-invert":["",qe,Ce,we]}],"backdrop-opacity":[{"backdrop-opacity":[qe,Ce,we]}],"backdrop-saturate":[{"backdrop-saturate":[qe,Ce,we]}],"backdrop-sepia":[{"backdrop-sepia":["",qe,Ce,we]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":q()}],"border-spacing-x":[{"border-spacing-x":q()}],"border-spacing-y":[{"border-spacing-y":q()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ce,we]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qe,"initial",Ce,we]}],ease:[{ease:["linear","initial",E,Ce,we]}],delay:[{delay:[qe,Ce,we]}],animate:[{animate:["none",j,Ce,we]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,Ce,we]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:me()}],"scale-x":[{"scale-x":me()}],"scale-y":[{"scale-y":me()}],"scale-z":[{"scale-z":me()}],"scale-3d":["scale-3d"],skew:[{skew:ye()}],"skew-x":[{"skew-x":ye()}],"skew-y":[{"skew-y":ye()}],transform:[{transform:[Ce,we,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ve()}],"translate-x":[{"translate-x":ve()}],"translate-y":[{"translate-y":ve()}],"translate-z":[{"translate-z":ve()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce,we]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce,we]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[qe,vi,la,Hf]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},FR=ER(QR);function Ee(...a){return FR(U0(a))}function sL(a,t){return a?{...t,...a}:t}const zh=Dh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Te=x.forwardRef(({className:a,variant:t,size:n,asChild:s=!1,...r},l)=>{const c=s?JE:"button";return f.jsx(c,{className:Ee(zh({variant:t,size:n,className:a})),ref:l,...r})});Te.displayName="Button";var _i=k0();const VR=Nh(_i);var KR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],YR=KR.reduce((a,t)=>{const n=kh(`Primitive.${t}`),s=x.forwardRef((r,l)=>{const{asChild:c,...d}=r,h=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(h,{...d,ref:l})});return s.displayName=`Primitive.${t}`,{...a,[t]:s}},{}),XR="Separator",qv="horizontal",WR=["horizontal","vertical"],eb=x.forwardRef((a,t)=>{const{decorative:n,orientation:s=qv,...r}=a,l=ZR(s)?s:qv,d=n?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return f.jsx(YR.div,{"data-orientation":l,...d,...r,ref:t})});eb.displayName=XR;function ZR(a){return WR.includes(a)}var tb=eb;const vn=x.forwardRef(({className:a,orientation:t="horizontal",decorative:n=!0,...s},r)=>f.jsx(tb,{ref:r,decorative:n,orientation:t,className:Ee("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...s}));vn.displayName=tb.displayName;const Hv=a=>{let t;const n=new Set,s=(p,g)=>{const m=typeof p=="function"?p(t):p;if(!Object.is(m,t)){const v=t;t=g??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(w=>w(t,v))}},r=()=>t,d={setState:s,getState:r,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p))},h=t=a(s,r,d);return d},JR=(a=>a?Hv(a):Hv),eN=a=>a;function tN(a,t=eN){const n=Et.useSyncExternalStore(a.subscribe,Et.useCallback(()=>t(a.getState()),[a,t]),Et.useCallback(()=>t(a.getInitialState()),[a,t]));return Et.useDebugValue(n),n}const Uv=a=>{const t=JR(a),n=s=>tN(t,s);return Object.assign(n,t),n},Ss=(a=>a?Uv(a):Uv);class nN{nodes=[];connections=[];handlers=new Map;postgresQueryEngine=null;messageQueue=new Map;messageHistory=[];isRunning=!1;updateInterval=200;intervalId=null;messageIdCounter=0;MAX_HISTORY=1e3;constructor(){this.registerDefaultHandlers()}registerDefaultHandlers(){this.registerHandler("crm",this.createBusinessDataHandler("crm")),this.registerHandler("erp",this.createBusinessDataHandler("erp")),this.registerHandler("payment-gateway",this.createBusinessDataHandler("payment")),this.registerHandler("postgres",this.createDatabaseHandler("postgres")),this.registerHandler("mongodb",this.createDatabaseHandler("mongodb")),this.registerHandler("redis",this.createDatabaseHandler("redis")),this.registerHandler("kafka",this.createMessageBrokerHandler("kafka")),this.registerHandler("rabbitmq",this.createMessageBrokerHandler("rabbitmq")),this.registerHandler("activemq",this.createMessageBrokerHandler("activemq")),this.registerHandler("aws-sqs",this.createMessageBrokerHandler("aws-sqs")),this.registerHandler("gcp-pubsub",this.createMessageBrokerHandler("gcp-pubsub")),this.registerHandler("rest",this.createAPIHandler("rest")),this.registerHandler("grpc",this.createAPIHandler("grpc")),this.registerHandler("graphql",this.createAPIHandler("graphql")),this.registerHandler("websocket",this.createAPIHandler("websocket")),this.registerHandler("kong",this.createIntegrationHandler("kong")),this.registerHandler("apigee",this.createIntegrationHandler("apigee")),this.registerHandler("mulesoft",this.createIntegrationHandler("mulesoft")),this.registerHandler("graphql-gateway",this.createIntegrationHandler("graphql-gateway")),this.registerHandler("bff-service",this.createIntegrationHandler("bff-service")),this.registerHandler("webhook-relay",this.createIntegrationHandler("webhook-relay"))}registerHandler(t,n){this.handlers.set(t,n)}initialize(t,n){this.nodes=t,this.connections=n,this.messageQueue.clear(),this.messageHistory=[];for(const s of n)this.messageQueue.set(s.id,[])}updateNodesAndConnections(t,n){this.nodes=t,this.connections=n;const s=new Set(n.map(r=>r.id));for(const[r]of this.messageQueue.entries())s.has(r)||this.messageQueue.delete(r);for(const r of n)this.messageQueue.has(r.id)||this.messageQueue.set(r.id,[])}start(){this.isRunning||(this.isRunning=!0,this.intervalId=setInterval(()=>{this.processDataFlow()},this.updateInterval))}stop(){this.isRunning=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}processDataFlow(){this.generateSourceData(),this.processInTransitMessages(),this.deliverMessages()}generateSourceData(){for(const t of this.connections){const n=this.nodes.find(c=>c.id===t.source);if(!n)continue;const s=this.handlers.get(n.type);if(!s?.generateData)continue;const r=n.data.config||{},l=s.generateData(n,r);if(l&&l.length>0){const c=this.messageQueue.get(t.id)||[];for(const d of l)d.connectionId=t.id,d.target=t.target,d.status="pending",d.id=`msg-${++this.messageIdCounter}`,d.timestamp=Date.now(),c.push(d);this.messageQueue.set(t.id,c)}}}processInTransitMessages(){for(const[t,n]of this.messageQueue.entries()){const s=this.connections.find(c=>c.id===t);if(!s)continue;const r=this.nodes.find(c=>c.id===s.source),l=this.nodes.find(c=>c.id===s.target);if(!(!r||!l)){for(const c of n)if(c.status==="pending")this.transformMessageIfNeeded(c,r,l,s)&&(c.status="in-transit",c.latency=this.calculateTransitTime(s));else if(c.status==="in-transit"){const d=Date.now()-c.timestamp;c.latency&&d>=c.latency&&(c.status="delivered")}}}}deliverMessages(){for(const[t,n]of this.messageQueue.entries()){const s=this.connections.find(h=>h.id===t);if(!s)continue;const r=this.nodes.find(h=>h.id===s.target);if(!r)continue;const l=this.handlers.get(r.type);if(!l?.processData)continue;const c=r.data.config||{},d=n.filter(h=>h.status==="delivered");for(const h of d)try{l.processData(r,h,c)&&(this.addToHistory(h),n.splice(n.indexOf(h),1))}catch(p){h.status="failed",h.error=p instanceof Error?p.message:"Unknown error",this.addToHistory(h),n.splice(n.indexOf(h),1)}this.messageQueue.set(t,n)}}transformMessageIfNeeded(t,n,s,r){const l=this.handlers.get(n.type),c=this.handlers.get(s.type),d=l?.getSupportedFormats?.(n)||[t.format],h=c?.getSupportedFormats?.(s)||[t.format];if(h.includes(t.format))return t;const p=h.find(m=>d.includes(m));if(p)return t.format=p,t.status="transformed",t;const g=this.findIntegrationHandler(r);if(g?.transformData){const m=g.transformData(n,t,s.type,n.data.config||{});if(m)return m}if(l?.transformData){const m=l.transformData(n,t,s.type,n.data.config||{});if(m)return m}return t.status="failed",t.error=`Format ${t.format} not supported by target ${s.type}`,null}findIntegrationHandler(t){const n=this.nodes.find(s=>s.id===t.source);return n&&["kong","apigee","mulesoft","bff-service"].includes(n.type)&&this.handlers.get(n.type)||null}calculateTransitTime(t){const n=t.data||{},s=n.latencyMs||10,r=(n.jitterMs||0)*(Math.random()-.5);return Math.max(1,s+r)}addToHistory(t){this.messageHistory.push(t),this.messageHistory.length>this.MAX_HISTORY&&this.messageHistory.shift()}getConnectionMessages(t){return this.messageQueue.get(t)||[]}getMessageHistory(t){const n=[...this.messageHistory].reverse();return t?n.slice(0,t):n}getComponentMessages(t){const n=[];for(const s of this.messageQueue.values())for(const r of s)(r.source===t||r.target===t)&&n.push(r);return n}createBusinessDataHandler(t){return{generateData:(n,s)=>{const r=[],l=s.generateInterval||2e3,c=n._lastGenerate||0,d=Date.now();if(d-c<l)return null;switch(n._lastGenerate=d,t){case"crm":r.push(this.createCRMDataMessage(n));break;case"erp":r.push(this.createERPDataMessage(n));break;case"payment":r.push(this.createPaymentDataMessage(n));break}return r},getSupportedFormats:()=>["json","xml"]}}validateMongoDBSchema(t,n){if(!n||!n.$jsonSchema)return{valid:!0};const s=n.$jsonSchema;if(s.required&&Array.isArray(s.required)){for(const r of s.required)if(!(r in t)||t[r]===void 0||t[r]===null)return{valid:!1,error:`Required field "${r}" is missing`}}if(s.properties){for(const[r,l]of Object.entries(s.properties))if(r in t){const c=t[r],d=l;if(d.type){const h=d.type,p=Array.isArray(c)?"array":typeof c;if(h==="string"&&p!=="string")return{valid:!1,error:`Field "${r}" must be of type string`};if(h==="number"&&p!=="number")return{valid:!1,error:`Field "${r}" must be of type number`};if(h==="boolean"&&p!=="boolean")return{valid:!1,error:`Field "${r}" must be of type boolean`};if(h==="array"&&p!=="array")return{valid:!1,error:`Field "${r}" must be of type array`};if(h==="object"&&(p!=="object"||Array.isArray(c)))return{valid:!1,error:`Field "${r}" must be of type object`}}}}return{valid:!0}}createDatabaseHandler(t){return{processData:(n,s,r)=>{if(t==="postgres"&&s.payload?.sql)return this.processPostgreSQLQuery(n,s,r);if(t==="redis")return this.processRedisCommand(n,s,r);if(t==="cassandra")return this.processCQLQuery(n,s,r);const l=s.payload?.operation||"insert";switch(l){case"insert":case"update":{const d=r.queryLatency||10;if(s.latency=d,t==="mongodb"){const p=n.data.config?.collections||[],g=s.payload;let m=g?.collection;if(!m&&p.length>0&&(g?.type?m=p.find(w=>w.name.toLowerCase().includes(g.type.toLowerCase()))?.name||p[0].name:m=p[0].name),m){const v=p.find(w=>w.name===m);if(v){if(v.validation){const w=v.validation;if(w.validationLevel!=="off"){const C={...g?.document||g?.data||g};delete C._id;const R=this.validateMongoDBSchema(C,w.validator);if(!R.valid){if(w.validationAction==="error")return s.status="failed",s.error=`Schema validation failed for collection "${m}": ${R.error}`,s;w.validationAction==="warn"&&(s.metadata={...s.metadata,validationWarning:R.error,collection:m})}}}l==="insert"?s.metadata={...s.metadata,collection:m,documentStored:!0}:l==="update"&&(s.metadata={...s.metadata,collection:m,documentUpdated:!0})}else return s.status="failed",s.error=`Collection "${m}" not found`,s}}return s.status="delivered",s}case"delete":const c=r.queryLatency||10;return s.latency=c,s.status="delivered",s;case"query":{let d=[];if(t==="mongodb"){const p=n.data.config?.collections||[],g=s.payload,m=g?.collection||p[0]?.name;if(m){const v=p.find(w=>w.name===m);if(v?.documents&&v.documents.length>0){if(d=v.documents.map(S=>({...S})),g?.filter)try{const S=typeof g.filter=="string"?JSON.parse(g.filter):g.filter;d=d.filter(C=>{for(const[R,E]of Object.entries(S))if(C[R]!==E)return!1;return!0})}catch{}const w=g?.limit||100;d=d.slice(0,w)}else d=this.generateQueryResults(t,g?.query)}else d=this.generateQueryResults(t,g?.query)}else d=this.generateQueryResults(t,s.payload?.query);return s.payload={...s.payload,results:d},s.status="delivered",s}default:return s.status="failed",s.error=`Unknown operation: ${l}`,s}},getSupportedFormats:()=>["json","binary"]}}processPostgreSQLQuery(t,n,s){if(!this.postgresQueryEngine)return n.status="failed",n.error="PostgreSQL Query Engine not initialized",n;const r=n.payload?.sql;if(!r||typeof r!="string")return n.status="failed",n.error="No SQL query provided",n;const l=t.data.config,c=l.tables||[],d=this.extractIndexesFromConfig(l,c),h=l.views||[],p=this.postgresQueryEngine.execute(r,c,d,h);return p.success?(n.status="delivered",n.latency=p.executionTime||s.queryLatency||10,n.payload={...n.payload,results:p.rows||[],rowCount:p.rowCount||0,queryPlan:p.queryPlan,indexesUsed:p.indexesUsed||[]}):(n.status="failed",n.error=p.error||"Query execution failed",n.latency=p.executionTime||0),n}processRedisCommand(t,n,s){const r=n.payload,l=it.getRedisRoutingEngine(t.id);if(!l)return n.status="failed",n.error="Redis Routing Engine not initialized",n;let c,d;if(r?.command)c=r.command,d=r.args||[];else if(r?.redisCommand){const p=String(r.redisCommand).trim().split(/\s+/);c=p[0],d=p.slice(1)}else if(typeof r=="string"){const p=r.trim().split(/\s+/);c=p[0],d=p.slice(1)}else{const p=r?.operation||"get";switch(p.toLowerCase()){case"get":c="GET",d=[r?.key||"default:key"];break;case"set":c="SET",d=[r?.key||"default:key",typeof r?.value=="string"?r.value:JSON.stringify(r?.value||"")],r?.ttl&&d.push("EX",String(r.ttl));break;case"delete":case"del":c="DEL",d=Array.isArray(r?.keys)?r.keys:[r?.key||"default:key"];break;case"exists":c="EXISTS",d=Array.isArray(r?.keys)?r.keys:[r?.key||"default:key"];break;default:return n.status="failed",n.error=`Unknown Redis operation: ${p}`,n}}const h=l.executeCommand(c,d);return h.success?(n.status="delivered",n.latency=h.latency||1,n.payload={...n.payload,command:c,args:d,result:h.value,redisResult:h.value}):(n.status="failed",n.error=h.error||"Redis command execution failed",n.latency=h.latency||0),n}processCQLQuery(t,n,s){const r=n.payload,l=it.getCassandraRoutingEngine(t.id);if(!l)return n.status="failed",n.error="Cassandra Routing Engine not initialized",n;let c,d;if(r?.cql)c=r.cql,d=r.consistency;else if(r?.query)c=r.query,d=r.consistency;else if(typeof r=="string")c=r;else{const p=r?.operation||"select",g=t.data.config,m=r?.keyspace||g?.keyspace||"system",v=r?.table||"default_table";switch(p.toLowerCase()){case"select":case"read":c=`SELECT * FROM ${m}.${v}`,r?.limit&&(c+=` LIMIT ${r.limit}`);break;case"insert":case"write":const w=r?.columns?Object.keys(r.columns).join(", "):"id, data",S=r?.columns?Object.values(r.columns).map(E=>`'${E}'`).join(", "):`${Date.now()}, 'data'`;c=`INSERT INTO ${m}.${v} (${w}) VALUES (${S})`;break;case"update":const C=r?.columns||{},R=Object.entries(C).map(([E,j])=>`${E} = '${j}'`).join(", ");c=`UPDATE ${m}.${v} SET ${R}`,r?.where&&(c+=` WHERE ${r.where}`);break;case"delete":c=`DELETE FROM ${m}.${v}`,r?.where&&(c+=` WHERE ${r.where}`);break;default:return n.status="failed",n.error=`Unknown CQL operation: ${p}`,n}}d||(d=t.data.config?.consistencyLevel||"QUORUM");const h=l.executeCQL(c,d);return h.success?(n.status="delivered",n.latency=h.latency||5,n.payload={...n.payload,cql:c,consistency:h.consistency,rows:h.rows||[],rowCount:h.rowCount||0,replicasQueried:h.replicasQueried,cqlResult:h.rows},n.metadata={...n.metadata,cassandraConsistency:h.consistency,cassandraReplicasQueried:h.replicasQueried}):(n.status="failed",n.error=h.error||"CQL query execution failed",n.latency=h.latency||0),n}extractIndexesFromConfig(t,n){const s=[];for(const r of n)for(const l of r.indexes||[]){const c=l.match(/CREATE\s+(?:UNIQUE\s+)?INDEX\s+(\w+)\s+ON\s+\w+\s*\(([^)]+)\)/i);c?s.push({name:c[1],table:r.name,schema:r.schema,columns:c[2].split(",").map(d=>d.trim()),unique:l.toUpperCase().includes("UNIQUE")}):s.push({name:l,table:r.name,schema:r.schema,columns:[l.replace(/^idx_|^index_/i,"")]})}return s}createMessageBrokerHandler(t){return t==="rabbitmq"?{processData:(n,s,r)=>{const l=it.getRabbitMQRoutingEngine(n.id);if(!l)return s.status="delivered",s;const c=r?.messaging||s.metadata?.messaging||{},d=c.exchange||"amq.topic",h=c.routingKey||s.metadata?.routingKey||"default",p=s.metadata?.headers,g=s.metadata?.priority,m=l.routeMessage(d,h,s.payload,s.size,p,g);return m.length>0?(s.status="delivered",s.metadata={...s.metadata,routedQueues:m,exchange:d,routingKey:h}):(s.status="failed",s.error=`No queues bound to exchange '${d}' with routing key '${h}'`),s},getSupportedFormats:()=>["json","binary","text"]}:t==="activemq"?{processData:(n,s,r)=>{const l=it.getActiveMQRoutingEngine(n.id);if(!l)return s.status="delivered",s;const c=r?.messaging||s.metadata?.messaging||{},d=c.queue,h=c.topic,p=s.metadata?.headers,g=s.metadata?.priority;let m=!1,v="";const w=n.data.config||{},S=w.acls||[],R=this.nodes.find(j=>j.id===s.source)?.data.config,E=s.metadata?.principal||R?.username||R?.clientId||w.username||`user-${s.source.slice(0,8)}`;if(d){if(!(it.checkActiveMQACLPermissionPublic?.(S,E,`queue://${d}`,"write")??!0))return s.status="failed",s.error=`Access denied: principal '${E}' does not have write permission for queue '${d}'`,s;l.routeToQueue(d,s.payload,s.size,p,g)&&(m=!0,v=d)}if(h){if(!(it.checkActiveMQACLPermissionPublic?.(S,E,`topic://${h}`,"write")??!0))return s.status="failed",s.error=`Access denied: principal '${E}' does not have write permission for topic '${h}'`,s;l.publishToTopic(h,s.payload,s.size,p,g).length>0&&(m=!0,v=h)}return m?(s.status="delivered",s.metadata={...s.metadata,destination:v,queue:d||void 0,topic:h||void 0}):(s.status="failed",s.error=`No queue or topic found. Queue: '${d||"none"}', Topic: '${h||"none"}'`),s},getSupportedFormats:()=>["json","binary","text"]}:t==="aws-sqs"?{processData:(n,s,r)=>{const l=it.getSQSRoutingEngine(n.id);if(!l)return s.status="delivered",s;const c=r?.messaging||s.metadata?.messaging||{},d=c.queueUrl,h=c.queueName||(d?d.split("/").pop():null)||s.metadata?.queueName||"default-queue",p=n.data.config||{},g=p.iamPolicies||[],v=this.nodes.find(N=>N.id===s.source)?.data.config,w=s.metadata?.principal||v?.accessKeyId||v?.clientId||p.accessKeyId||`arn:aws:iam::123456789012:user/${s.source.slice(0,8)}`;if(!(it.checkSQSIAMPolicy?.(g,w,h,"sqs:SendMessage")??!0))return s.status="failed",s.error=`Access denied: principal '${w}' does not have sqs:SendMessage permission for queue '${h}'`,s;const C=s.metadata?.messageGroupId,R=s.metadata?.messageDeduplicationId,E=s.metadata?.attributes,j=l.sendMessage(h,s.payload,s.size,E,C,R);return j?(s.status="delivered",s.metadata={...s.metadata,queueName:h,messageId:j,queueUrl:d||`https://sqs.${p.defaultRegion||"us-east-1"}.amazonaws.com/.../${h}`}):(s.status="failed",s.error=`Queue '${h}' not found`),s},getSupportedFormats:()=>["json","binary","text"]}:t==="azure-service-bus"?{processData:(n,s,r)=>{const l=it.getAzureServiceBusRoutingEngine(n.id);if(!l)return s.status="delivered",s;const c=r?.messaging||s.metadata?.messaging||{},d=c.queue,h=c.topic,p=s.metadata?.properties||s.metadata?.headers,g=s.metadata?.sessionId,m=s.metadata?.scheduledEnqueueTime;let v=!1,w="",S=[];if(d){const C=l.sendToQueue(d,s.payload,s.size,p,g,m);C&&(v=!0,w=d,S.push(C))}if(h){const C=l.publishToTopic(h,s.payload,s.size,p,m);C.length>0&&(v=!0,w=h,S=C)}return v?(s.status="delivered",s.metadata={...s.metadata,destination:w,queue:d||void 0,topic:h||void 0,messageIds:S,sessionId:g||void 0}):(s.status="failed",s.error=`No queue or topic found. Queue: '${d||"none"}', Topic: '${h||"none"}'`),s},getSupportedFormats:()=>["json","binary","text"]}:t==="gcp-pubsub"?{processData:(n,s,r)=>{const l=it.getPubSubRoutingEngine(n.id);if(!l)return s.status="delivered",s;const c=r?.messaging||s.metadata?.messaging||{},d=c.topic||s.metadata?.topic,h=c.orderingKey||s.metadata?.orderingKey,p=s.metadata?.attributes||s.metadata?.headers,g=n.data.config||{},m=d||g.topics&&g.topics[0]?.name||null;if(!m)return s.status="failed",s.error="No topic specified for Pub/Sub message",s;const v=l.publishToTopic(m,s.payload,s.size,p,h);return v?(s.status="delivered",s.metadata={...s.metadata,topic:m,messageId:v,orderingKey:h||void 0}):(s.status="failed",s.error=`Topic '${m}' not found`),s},getSupportedFormats:()=>["json","binary","text"]}:{processData:(n,s,r)=>(s.status="delivered",s),getSupportedFormats:()=>["json","binary","text"]}}createAPIHandler(t){return{processData:(n,s,r)=>{const l={status:"success",data:s.payload,timestamp:Date.now()};return s.payload=l,s.status="delivered",s},transformData:(n,s,r,l)=>(t==="rest"&&s.format!=="json"?(s.format="json",s.status="transformed"):t==="grpc"&&s.format!=="protobuf"&&(s.format="protobuf",s.status="transformed"),s),getSupportedFormats:()=>{switch(t){case"rest":return["json","xml"];case"grpc":return["protobuf","binary"];case"graphql":return["json"];case"websocket":return["json","text","binary"];default:return["json"]}}}}createIntegrationHandler(t){return t==="kong"?{processData:(n,s,r)=>{const l=it.getKongRoutingEngine(n.id);if(!l)return s.status="delivered",s;const c=s.payload,d=c?.path||s.metadata?.path||"/",h=c?.method||s.metadata?.method||"GET",p=c?.headers||s.metadata?.headers||{},g=c?.query||s.metadata?.query||{},m=p.apikey||p["X-API-Key"]||g.apikey,v=s.metadata?.consumerId,w=l.routeRequest({path:d,method:h,headers:p,query:g,body:c?.body,consumerId:v,apiKey:m});return w.response.status>=200&&w.response.status<300?(s.status="delivered",s.latency=w.response.latency,s.metadata={...s.metadata,kongRoute:w.match?.route.id,kongService:w.match?.service.id,kongTarget:w.target,kongResponseStatus:w.response.status}):(s.status="failed",s.error=w.response.error||`HTTP ${w.response.status}`,s.latency=w.response.latency),s},transformData:(n,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json","xml","binary"]}:t==="apigee"?{processData:(n,s,r)=>{const l=it.getApigeeRoutingEngine(n.id);if(!l)return s.status="delivered",s;const c=s.payload,d=c?.path||s.metadata?.path||"/",h=c?.method||s.metadata?.method||"GET",p=c?.headers||s.metadata?.headers||{},g=c?.query||s.metadata?.query||{},m=p.apikey||p["X-API-Key"]||g.apikey,v=p.Authorization||"",w=v.startsWith("OAuth ")?v.replace("OAuth ",""):void 0,S=v.startsWith("Bearer ")?v.replace("Bearer ",""):p["X-JWT-Token"],C=l.routeRequest({path:d,method:h,headers:p,query:g,body:c?.body,apiKey:m,oauthToken:w,jwtToken:S});return C.response.status>=200&&C.response.status<300?(s.status="delivered",s.latency=C.response.latency,s.metadata={...s.metadata,apigeeProxy:C.match?.proxy.name,apigeeTarget:C.target,apigeeResponseStatus:C.response.status,apigeeEnvironment:C.match?.proxy.environment}):(s.status="failed",s.error=C.response.error||`HTTP ${C.response.status}`,s.latency=C.response.latency),s},transformData:(n,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json","xml","binary"]}:t==="graphql-gateway"?{processData:(n,s,r)=>{const l=it.getGraphQLGatewayRoutingEngine(n.id);if(!l)return s.status="delivered",s;const c=s.payload,d=c?.query||c?.body||s.metadata?.query,h=c?.variables||s.metadata?.variables,p=c?.operationName||s.metadata?.operationName,g=c?.headers||s.metadata?.headers||{},m=l.routeRequest({query:d||"",variables:h,headers:g,operationName:p});if(s.latency=m.latency,m.status>=200&&m.status<300){s.status="delivered";const S=l.getServiceRegistry().getConnectedServices().map(C=>C.endpoint);s.metadata={...s.metadata,graphqlGatewayStatus:m.status,graphqlGatewayEndpoints:S}}else s.status="failed",s.error=m.error||`HTTP ${m.status}`;return s},transformData:(n,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json"]}:t==="mulesoft"?{processData:(n,s,r)=>{const l=it.getMuleSoftRoutingEngine(n.id);if(!l)return s.status="delivered",s;const c=s.payload,d=this.nodes.find(g=>g.id===s.source),h=this.nodes.find(g=>g.id===s.target),p=l.processData({path:c?.path||s.metadata?.path,method:c?.method||s.metadata?.method||"POST",headers:c?.headers||s.metadata?.headers||{},query:c?.query||s.metadata?.query||{},body:c?.body||c||s.payload,format:s.format,sourceComponentType:d?.type,sourceComponentId:d?.id,targetComponentType:h?.type,targetComponentId:h?.id});return p.response.status==="success"?(s.status="delivered",s.latency=p.response.latency,s.payload=p.response.data,p.response.format&&(s.format=p.response.format),s.metadata={...s.metadata,mulesoftApplication:p.response.application,mulesoftFlow:p.response.flow,mulesoftConnector:p.response.connector}):(s.status="failed",s.error=p.response.error||"MuleSoft processing failed",s.latency=p.response.latency||0),s},transformData:(n,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json","xml","binary","text"]}:t==="bff-service"?{processData:(n,s,r)=>{const l=it.getBFFRoutingEngine(n.id);if(!l)return s.status="delivered",s;const c=s.payload,d=c?.path||s.metadata?.path||"/",h=c?.method||s.metadata?.method||"GET",p=c?.headers||s.metadata?.headers||{},g=c?.query||s.metadata?.query||{},m=c?.body||c||s.payload,v=l.routeRequest({path:d,method:h,headers:p,query:g,body:m});return v.status>=200&&v.status<300?(s.status="delivered",s.latency=v.latency,s.payload=v.data,s.metadata={...s.metadata,bffCacheHit:v.cacheHit,bffBackendResponses:v.backendResponses.length,bffStatus:v.status}):(s.status="failed",s.error=v.error||`HTTP ${v.status}`,s.latency=v.latency),s},transformData:(n,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json"]}:t==="webhook-relay"?{processData:(n,s,r)=>{const l=it.getWebhookRelayRoutingEngine(n.id);if(!l)return s.status="delivered",s;const c=s.payload,d=c?.url||s.metadata?.url||c?.path||"/",h=c?.method||s.metadata?.method||"POST",p=c?.headers||s.metadata?.headers||{},g=c?.body||c||s.payload,m=c?.ip||s.metadata?.ip||p["x-forwarded-for"]?.split(",")[0]?.trim(),v=c?.event||s.metadata?.event||p["x-event"]||p["x-github-event"]||"",w=l.relayWebhook({url:d,method:h,headers:p,body:g,ip:m,event:v});return w.success?(s.status="delivered",s.latency=w.latency,s.metadata={...s.metadata,webhookRelayId:w.relayId,webhookDeliveryId:w.deliveryId,webhookAttempts:w.attempts,webhookStatus:w.status}):(s.status="failed",s.error=w.error||`Webhook relay failed (HTTP ${w.status})`,s.latency=w.latency,s.metadata={...s.metadata,webhookRelayId:w.relayId,webhookDeliveryId:w.deliveryId,webhookAttempts:w.attempts,webhookStatus:w.status}),s},transformData:(n,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json","text","binary"]}:{transformData:(n,s,r,l)=>{const c=this.getTargetFormats(r);return c.length>0&&!c.includes(s.format)&&(s.format=c[0],s.status="transformed"),s},getSupportedFormats:()=>["json","xml","binary"]}}getTargetFormats(t){return this.handlers.get(t)?.getSupportedFormats?.({type:t})||["json"]}createCRMDataMessage(t){const n=t.data.config||{},s=n.contacts||[],r=n.deals||[],l=Math.random()>.5?"contact":"deal";let c;if(l==="contact"&&s.length>0){const h=s[Math.floor(Math.random()*s.length)];c={operation:"create",type:"contact",data:{name:h.name,email:h.email,company:h.company,status:h.status}}}else if(r.length>0){const h=r[Math.floor(Math.random()*r.length)];c={operation:"update",type:"deal",data:{id:h.id,name:h.name,value:h.value,stage:h.stage}}}else c={operation:"create",type:"contact",data:{name:`Contact ${Date.now()}`,email:`contact${Date.now()}@example.com`}};const d=JSON.stringify(c);return{id:"",timestamp:Date.now(),source:t.id,target:"",connectionId:"",format:"json",payload:c,size:new Blob([d]).size,metadata:{contentType:"application/json",operation:c.operation},status:"pending"}}createERPDataMessage(t){const n=t.data.config||{},s=n.orders||[],r=n.inventory||[],l=Math.random()>.5?"order":"inventory";let c;if(l==="order"&&s.length>0){const h=s[Math.floor(Math.random()*s.length)];c={operation:"create",type:"order",data:{orderNumber:h.orderNumber,customer:h.customer,total:h.total,items:h.items}}}else if(r.length>0){const h=r[Math.floor(Math.random()*r.length)];c={operation:"update",type:"inventory",data:{sku:h.sku,quantity:h.quantity,status:h.status}}}else c={operation:"create",type:"order",data:{orderNumber:`ORD-${Date.now()}`,total:Math.random()*1e3}};const d=JSON.stringify(c);return{id:"",timestamp:Date.now(),source:t.id,target:"",connectionId:"",format:"json",payload:c,size:new Blob([d]).size,metadata:{contentType:"application/json",operation:c.operation},status:"pending"}}createPaymentDataMessage(t){const s=(t.data.config||{}).transactions||[];let r;if(s.length>0){const c=s[Math.floor(Math.random()*s.length)];r={operation:"process",type:"transaction",data:{id:c.id,amount:c.amount,currency:c.currency,status:c.status}}}else r={operation:"process",type:"transaction",data:{amount:Math.random()*1e3,currency:"USD"}};const l=JSON.stringify(r);return{id:"",timestamp:Date.now(),source:t.id,target:"",connectionId:"",format:"json",payload:r,size:new Blob([l]).size,metadata:{contentType:"application/json",operation:r.operation},status:"pending"}}generateQueryResults(t,n){const s=Math.floor(Math.random()*10)+1,r=[];for(let l=0;l<s;l++)r.push({id:l+1,name:`Record ${l+1}`,value:Math.random()*100,timestamp:new Date().toISOString()});return r}}const un=new nN;class sN{componentStates=new Map;setComponentState(t,n,s){const r={nodeId:t,state:n,degradedLevel:s?.degradedLevel||.5,failureRate:s?.failureRate||.1,latencyMultiplier:s?.latencyMultiplier||2,throughputMultiplier:s?.throughputMultiplier||.5};this.componentStates.set(t,r)}getComponentState(t){return this.componentStates.get(t)}isEnabled(t){const n=this.componentStates.get(t);return!n||n.state==="enabled"}applyStateEffects(t,n){const s=this.componentStates.get(t);if(!s||s.state==="enabled")return{...n};if(s.state==="disabled"||s.state==="failed")return{throughput:0,latency:1/0,errorRate:1,utilization:0};if(s.state==="degraded"){const r=s.degradedLevel||.5;return{throughput:n.throughput*(s.throughputMultiplier||.5)*(1-r*.5),latency:n.latency*(s.latencyMultiplier||2)*(1+r),errorRate:Math.min(1,n.errorRate+(s.failureRate||.1)*r),utilization:Math.min(1,n.utilization*(1+r*.3))}}return{...n}}reset(){this.componentStates.clear()}resetComponent(t){this.componentStates.delete(t)}getAllStates(){return Array.from(this.componentStates.values())}}const ur=new sN;class oN{queues=new Map;exchanges=new Map;bindings=new Map;queueMessages=new Map;unackedMessages=new Map;queueState=new Map;initialize(t){if(this.queues.clear(),this.exchanges.clear(),this.bindings.clear(),this.queueMessages.clear(),this.unackedMessages.clear(),this.queueState.clear(),t.queues)for(const n of t.queues)this.queues.set(n.name,{...n}),this.queueMessages.set(n.name,[]),this.unackedMessages.set(n.name,[]),this.queueState.set(n.name,{ready:n.ready||0,unacked:n.unacked||0,total:n.messages||0,lastUpdate:Date.now()});if(t.exchanges)for(const n of t.exchanges)this.exchanges.set(n.name,{...n}),this.bindings.set(n.name,[]);if(t.bindings)for(const n of t.bindings){const s=this.bindings.get(n.source)||[];s.push(n),this.bindings.set(n.source,s)}}routeMessage(t,n,s,r,l,c){const d=this.exchanges.get(t);if(!d)return[];const h=this.bindings.get(t)||[],p=[];for(const v of h)this.shouldRouteToQueue(d,v,n,l)&&p.push(v.destination);const g=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,m=Date.now();for(const v of p){const w=this.queues.get(v);if(!w)continue;if(w.maxLength&&(this.queueMessages.get(v)||[]).length>=w.maxLength){w.deadLetterExchange&&this.routeToDeadLetterExchange(w.deadLetterExchange,w.deadLetterRoutingKey||n,s,r,l,c);continue}const S={id:g,timestamp:m,routingKey:n,exchange:t,payload:s,size:r,priority:c||w.maxPriority?c||0:void 0,headers:l,ttl:w.messageTtl?m+w.messageTtl:void 0},C=this.queueMessages.get(v)||[];C.push(S),w.maxPriority&&S.priority!==void 0&&C.sort((R,E)=>(E.priority||0)-(R.priority||0)),this.queueMessages.set(v,C)}return p}shouldRouteToQueue(t,n,s,r){switch(t.type){case"direct":return n.routingKey===s;case"topic":return this.matchTopicPattern(n.routingKey,s);case"fanout":return!0;case"headers":if(!r||!n.arguments)return!1;for(const[l,c]of Object.entries(n.arguments))if(!l.startsWith("x-")&&r[l]!==c)return!1;return!0;default:return!1}}matchTopicPattern(t,n){const s=t.replace(/\./g,"\\.").replace(/\*/g,"[^.]+").replace(/#/g,".*");return new RegExp(`^${s}$`).test(n)}routeToDeadLetterExchange(t,n,s,r,l,c){this.routeMessage(t,n,s,r,l,c)}processConsumption(t){const n=Date.now();for(const[s,r]of this.queues.entries()){let l=this.queueMessages.get(s)||[],c=this.unackedMessages.get(s)||[];const d=this.queueState.get(s)||{ready:0,unacked:0,total:0,lastUpdate:n};l=l.filter(R=>R.ttl&&n>R.ttl?(r.deadLetterExchange&&this.routeToDeadLetterExchange(r.deadLetterExchange,r.deadLetterRoutingKey||R.routingKey,R.payload,R.size,R.headers,R.priority),!1):!0),this.queueMessages.set(s,l);const g=(r.consumers||0)*10*t/1e3,m=Math.min(g,l.length),v=l.splice(0,m);c.push(...v),this.unackedMessages.set(s,c);const S=t/100*c.length,C=Math.min(S,c.length);c.splice(0,Math.floor(C)),this.unackedMessages.set(s,c),d.ready=l.length,d.unacked=c.length,d.total=l.length+c.length,d.lastUpdate=n,this.queueState.set(s,d)}}getQueueMetrics(t){const n=this.queues.get(t);if(!n)return null;const s=this.queueMessages.get(t)||[],r=this.unackedMessages.get(t)||[];this.queueState.get(t);const l=s.length,c=r.length;return{messages:l+c,ready:l,unacked:c,consumers:n.consumers||0}}getAllQueueMetrics(){const t=new Map;for(const n of this.queues.keys()){const s=this.getQueueMetrics(n);s&&t.set(n,s)}return t}getTotalQueueDepth(){let t=0;for(const n of this.queueMessages.values())t+=n.length;for(const n of this.unackedMessages.values())t+=n.length;return t}getActiveConnections(){let t=0;for(const n of this.queues.values())n.consumers&&(t+=n.consumers);return t+=this.exchanges.size,Math.max(1,t)}updateQueue(t,n){const s=this.queues.get(t);s&&(Object.assign(s,n),this.queues.set(t,s))}}class aN{queues=new Map;topics=new Map;subscriptions=new Map;queueMessages=new Map;topicMessages=new Map;subscriptionMessages=new Map;queueState=new Map;topicState=new Map;initialize(t){if(this.queues.clear(),this.topics.clear(),this.subscriptions.clear(),this.queueMessages.clear(),this.topicMessages.clear(),this.subscriptionMessages.clear(),this.queueState.clear(),this.topicState.clear(),t.queues)for(const n of t.queues)this.queues.set(n.name,{...n}),this.queueMessages.set(n.name,[]),this.queueState.set(n.name,{queueSize:n.queueSize||0,consumerCount:n.consumerCount||0,enqueueCount:n.enqueueCount||0,dequeueCount:n.dequeueCount||0,lastUpdate:Date.now()});if(t.topics)for(const n of t.topics)this.topics.set(n.name,{...n}),this.topicMessages.set(n.name,[]),this.subscriptions.set(n.name,[]),this.topicState.set(n.name,{subscriberCount:n.subscriberCount||0,enqueueCount:n.enqueueCount||0,dequeueCount:n.dequeueCount||0,lastUpdate:Date.now()});if(t.subscriptions)for(const n of t.subscriptions){const s=this.subscriptions.get(n.destination)||[];s.push(n),this.subscriptions.set(n.destination,s),this.subscriptionMessages.set(n.id,[])}}routeToQueue(t,n,s,r,l){if(!this.queues.get(t))return!1;const d=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,h=Date.now(),p={id:d,timestamp:h,destination:t,payload:n,size:s,headers:r,priority:l},g=this.queueMessages.get(t)||[];g.push(p),l!==void 0&&g.sort((v,w)=>(w.priority||0)-(v.priority||0)),this.queueMessages.set(t,g);const m=this.queueState.get(t)||{queueSize:0,consumerCount:0,enqueueCount:0,dequeueCount:0,lastUpdate:h};return m.queueSize=g.length,m.enqueueCount=(m.enqueueCount||0)+1,m.lastUpdate=h,this.queueState.set(t,m),!0}publishToTopic(t,n,s,r,l){if(!this.topics.get(t))return[];const d=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,h=Date.now(),p=this.subscriptions.get(t)||[],g=[],m={id:d,timestamp:h,destination:t,payload:n,size:s,headers:r,priority:l};for(const w of p){if(w.selector&&!this.matchesSelector(w.selector,r))continue;const S=this.subscriptionMessages.get(w.id)||[];S.push(m),this.subscriptionMessages.set(w.id,S),g.push(w.id),w.pendingQueueSize=(w.pendingQueueSize||0)+1,w.enqueueCounter=(w.enqueueCounter||0)+1}if(p.length===0){const w=this.topicMessages.get(t)||[];w.push(m),this.topicMessages.set(t,w)}const v=this.topicState.get(t)||{subscriberCount:0,enqueueCount:0,dequeueCount:0,lastUpdate:h};return v.enqueueCount=(v.enqueueCount||0)+1,v.lastUpdate=h,this.topicState.set(t,v),g}matchesSelector(t,n){if(!n||!t)return!0;try{const s=t.trim(),r=s.match(/^(\w+)\s*=\s*['"]([^'"]+)['"]$/);if(r){const c=r[1],d=r[2];return n[c]===d}const l=s.match(/^(\w+)\s*([><=]+)\s*(\d+)$/);if(l){const c=l[1],d=l[2],h=Number(l[3]),p=Number(n[c]);if(isNaN(p))return!1;switch(d){case">":return p>h;case"<":return p<h;case">=":return p>=h;case"<=":return p<=h;case"=":return p===h;default:return!1}}for(const c in n)if(s.includes(c))return!0;return!1}catch{return!0}}processConsumption(t){const n=Date.now();for(const[s,r]of this.queues.entries()){let l=this.queueMessages.get(s)||[];const c=this.queueState.get(s)||{queueSize:0,consumerCount:0,enqueueCount:0,dequeueCount:0,lastUpdate:n};l=l.filter(v=>!(v.ttl&&n>v.ttl)),this.queueMessages.set(s,l);const p=(r.consumerCount||c.consumerCount||0)*10*t/1e3,g=Math.min(p,l.length),m=l.splice(0,Math.floor(g));this.queueMessages.set(s,l),c.queueSize=l.length,c.dequeueCount=(c.dequeueCount||0)+m.length,c.lastUpdate=n,this.queueState.set(s,c)}for(const[s,r]of this.subscriptions.entries()){for(const c of r){let d=this.subscriptionMessages.get(c.id)||[];d=d.filter(v=>!(v.ttl&&n>v.ttl));const p=10*t/1e3,g=Math.min(p,d.length),m=d.splice(0,Math.floor(g));c.pendingQueueSize=d.length,c.dispatchedQueueSize=(c.dispatchedQueueSize||0)+m.length,c.dequeueCounter=(c.dequeueCounter||0)+m.length,this.subscriptionMessages.set(c.id,d)}const l=this.topicState.get(s);l&&(l.dequeueCount=r.reduce((c,d)=>c+(d.dequeueCounter||0),0),l.lastUpdate=n)}}getQueueMetrics(t){if(!this.queues.get(t))return null;const s=this.queueState.get(t);return s?{queueSize:s.queueSize,consumerCount:s.consumerCount,enqueueCount:s.enqueueCount,dequeueCount:s.dequeueCount}:null}getTopicMetrics(t){if(!this.topics.get(t))return null;const s=this.topicState.get(t);return s?{subscriberCount:s.subscriberCount,enqueueCount:s.enqueueCount,dequeueCount:s.dequeueCount}:null}getAllQueueMetrics(){const t=new Map;for(const n of this.queues.keys()){const s=this.getQueueMetrics(n);s&&t.set(n,s)}return t}getAllTopicMetrics(){const t=new Map;for(const n of this.topics.keys()){const s=this.getTopicMetrics(n);s&&t.set(n,s)}return t}getTotalQueueDepth(){let t=0;for(const n of this.queueMessages.values())t+=n.length;return t}getTotalTopicMessages(){let t=0;for(const n of this.subscriptionMessages.values())t+=n.length;for(const n of this.topicMessages.values())t+=n.length;return t}getActiveConnections(){let t=0;for(const n of this.queues.values())n.consumerCount&&(t+=n.consumerCount);for(const n of this.subscriptions.values())t+=n.length;return Math.max(1,t+1)}updateQueue(t,n){const s=this.queues.get(t);if(s){Object.assign(s,n),this.queues.set(t,s);const r=this.queueState.get(t);r&&n.consumerCount!==void 0&&(r.consumerCount=n.consumerCount)}}updateTopic(t,n){const s=this.topics.get(t);if(s){Object.assign(s,n),this.topics.set(t,s);const r=this.topicState.get(t);r&&n.subscriberCount!==void 0&&(r.subscriberCount=n.subscriberCount)}}}class rN{queues=new Map;queueMessages=new Map;inFlightMessages=new Map;dlqMessages=new Map;queueState=new Map;messageGroups=new Map;deduplicationIds=new Map;initialize(t){if(this.queues.clear(),this.queueMessages.clear(),this.inFlightMessages.clear(),this.dlqMessages.clear(),this.queueState.clear(),this.messageGroups.clear(),this.deduplicationIds.clear(),t.queues)for(const n of t.queues)this.queues.set(n.name,{...n}),this.queueMessages.set(n.name,[]),this.inFlightMessages.set(n.name,[]),this.queueState.set(n.name,{approximateMessages:0,approximateMessagesNotVisible:0,approximateMessagesDelayed:0,sentCount:0,receivedCount:0,deletedCount:0,dlqCount:0,lastUpdate:Date.now()}),n.type==="fifo"&&(this.messageGroups.set(n.name,new Map),this.deduplicationIds.set(n.name,new Set))}sendMessage(t,n,s,r,l,c){const d=this.queues.get(t);if(!d)return null;const h=Date.now(),p=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,g=`${t}-${p}`;if(d.type==="fifo"){if(d.contentBasedDedup&&!c){const j=JSON.stringify(n);c=this.hashString(j)}if(c){const j=this.deduplicationIds.get(t);if(j&&j.has(c))return g;j?.add(c)}l||(l="default-group")}const m=d.messageRetention*24*60*60*1e3,v=h+m,w=d.delaySeconds*1e3,S=w>0?h+w:void 0,C={id:p,messageId:g,timestamp:h,queueName:t,payload:n,size:s,attributes:r,messageGroupId:l,messageDeduplicationId:c,receiveCount:0,retentionExpiresAt:v,delayUntil:S},R=this.queueMessages.get(t)||[];if(d.type==="fifo"&&l){const j=this.messageGroups.get(t);if(j){const N=j.get(l)||[];N.push(C),j.set(l,N)}}R.push(C),this.queueMessages.set(t,R);const E=this.queueState.get(t);if(E){const j=this.queueMessages.get(t)||[],N=this.inFlightMessages.get(t)||[],T=j.filter(k=>k.delayUntil&&h<k.delayUntil);E.approximateMessages=j.length,E.approximateMessagesNotVisible=N.length,E.approximateMessagesDelayed=T.length,E.sentCount=(E.sentCount||0)+1,E.lastUpdate=h}return g}receiveMessage(t,n=1,s){const r=this.queues.get(t);if(!r)return[];const l=Date.now(),d=(s!==void 0?s:r.visibilityTimeout)*1e3;let h=(this.queueMessages.get(t)||[]).filter(v=>!(v.delayUntil&&l<v.delayUntil||l>=v.retentionExpiresAt));if(r.type==="fifo"){const v=this.messageGroups.get(t);if(v){h=[];let w=0;for(const[S,C]of v.entries()){if(w>=n)break;if(C.length>0){const R=C[0];(!R.delayUntil||l>=R.delayUntil)&&l<R.retentionExpiresAt&&(h.push(R),w++)}}}}const p=Math.min(n,h.length),g=[];for(let v=0;v<p;v++){const w=h[v],S=`receipt_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;w.receiptHandle=S,w.receiveCount=(w.receiveCount||0)+1,w.firstReceivedAt||(w.firstReceivedAt=l);const C={message:w,receivedAt:l,visibilityTimeoutExpiresAt:l+d},R=this.inFlightMessages.get(t)||[];R.push(C),this.inFlightMessages.set(t,R);const E=this.queueMessages.get(t)||[],j=E.indexOf(w);if(j>-1&&E.splice(j,1),this.queueMessages.set(t,E),r.type==="fifo"&&w.messageGroupId){const N=this.messageGroups.get(t);if(N){const T=N.get(w.messageGroupId)||[],k=T.indexOf(w);k>-1&&T.splice(k,1),T.length===0?N.delete(w.messageGroupId):N.set(w.messageGroupId,T)}}g.push(w)}const m=this.queueState.get(t);return m&&(m.receivedCount=(m.receivedCount||0)+g.length,m.lastUpdate=l),g}deleteMessage(t,n){if(!this.queues.get(t))return!1;const r=this.inFlightMessages.get(t)||[],l=r.findIndex(d=>d.message.receiptHandle===n);if(l===-1)return!1;r[l],r.splice(l,1),this.inFlightMessages.set(t,r);const c=this.queueState.get(t);return c&&(c.deletedCount=(c.deletedCount||0)+1,c.lastUpdate=Date.now()),!0}processConsumption(t){const n=Date.now();for(const[s,r]of this.queues.entries()){const l=this.inFlightMessages.get(s)||[],c=[],d=[];for(const m of l)if(n>=m.visibilityTimeoutExpiresAt){const v=m.message;v.receiptHandle=void 0,r.maxReceiveCount&&v.receiveCount>=r.maxReceiveCount?this.sendToDLQ(r,v):c.push(v)}else d.push(m);if(this.inFlightMessages.set(s,d),c.length>0){const m=this.queueMessages.get(s)||[];if(r.type==="fifo"){const v=this.messageGroups.get(s);if(v)for(const w of c){const S=w.messageGroupId||"default-group",C=v.get(S)||[];C.push(w),v.set(S,C)}}m.push(...c),this.queueMessages.set(s,m)}const p=(this.queueMessages.get(s)||[]).filter(m=>n>=m.retentionExpiresAt?(r.deadLetterQueue&&this.sendToDLQ(r,m),!1):!0);if(this.queueMessages.set(s,p),r.type==="fifo"){const m=this.messageGroups.get(s);if(m)for(const[v,w]of m.entries()){const S=w.filter(C=>n>=C.retentionExpiresAt?(r.deadLetterQueue&&this.sendToDLQ(r,C),!1):!0);S.length===0?m.delete(v):m.set(v,S)}}const g=this.queueState.get(s);if(g){const m=this.queueMessages.get(s)||[],v=this.inFlightMessages.get(s)||[],w=m.filter(S=>S.delayUntil&&n<S.delayUntil);g.approximateMessages=m.length,g.approximateMessagesNotVisible=v.length,g.approximateMessagesDelayed=w.length,g.lastUpdate=n}}}sendToDLQ(t,n){if(!t.deadLetterQueue||!this.queues.get(t.deadLetterQueue))return;const r=this.dlqMessages.get(t.deadLetterQueue)||[];r.push(n),this.dlqMessages.set(t.deadLetterQueue,r);const l=this.queueState.get(t.deadLetterQueue);l&&(l.dlqCount=(l.dlqCount||0)+1,l.approximateMessages=r.length);const c=this.queueState.get(t.name);c&&(c.dlqCount=(c.dlqCount||0)+1)}hashString(t){let n=0;for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);n=(n<<5)-n+r,n=n&n}return Math.abs(n).toString(36)}getQueueMetrics(t){if(!this.queues.get(t))return null;const s=this.queueState.get(t);return s?{approximateMessages:s.approximateMessages,approximateMessagesNotVisible:s.approximateMessagesNotVisible,approximateMessagesDelayed:s.approximateMessagesDelayed,sentCount:s.sentCount,receivedCount:s.receivedCount,deletedCount:s.deletedCount,dlqCount:s.dlqCount}:null}getAllQueueMetrics(){const t=new Map;for(const n of this.queues.keys()){const s=this.getQueueMetrics(n);s&&t.set(n,s)}return t}getTotalQueueDepth(){let t=0;for(const n of this.queueMessages.values())t+=n.length;for(const n of this.inFlightMessages.values())t+=n.length;return t}getActiveConnections(){let t=0;for(const n of this.queueState.values())(n.sentCount>0||n.receivedCount>0)&&(t+=1);return Math.max(1,t)}updateQueue(t,n){const s=this.queues.get(t);s&&(Object.assign(s,n),this.queues.set(t,s))}}class iN{queues=new Map;topics=new Map;subscriptions=new Map;queueMessages=new Map;topicMessages=new Map;subscriptionMessages=new Map;lockedMessages=new Map;deadLetterMessages=new Map;scheduledMessages=new Map;sessionMessages=new Map;queueState=new Map;subscriptionState=new Map;initialize(t){if(this.queues.clear(),this.topics.clear(),this.subscriptions.clear(),this.queueMessages.clear(),this.topicMessages.clear(),this.subscriptionMessages.clear(),this.lockedMessages.clear(),this.deadLetterMessages.clear(),this.scheduledMessages.clear(),this.sessionMessages.clear(),this.queueState.clear(),this.subscriptionState.clear(),t.queues)for(const n of t.queues)this.queues.set(n.name,{...n}),this.queueMessages.set(n.name,[]),this.lockedMessages.set(n.name,[]),this.deadLetterMessages.set(n.name,[]),this.scheduledMessages.set(n.name,[]),this.queueState.set(n.name,{activeMessageCount:n.activeMessageCount||0,deadLetterMessageCount:n.deadLetterMessageCount||0,scheduledMessageCount:n.scheduledMessageCount||0,sentCount:0,receivedCount:0,completedCount:0,abandonedCount:0,lastUpdate:Date.now()}),n.enableSessions&&this.sessionMessages.set(n.name,new Map);if(t.topics){for(const n of t.topics)if(this.topics.set(n.name,{...n}),this.topicMessages.set(n.name,[]),this.scheduledMessages.set(n.name,[]),this.subscriptions.set(n.name,[]),n.subscriptions)for(const s of n.subscriptions){const r=this.subscriptions.get(n.name)||[];r.push(s),this.subscriptions.set(n.name,r);const l=`${n.name}/subscriptions/${s.name}`;this.subscriptionMessages.set(l,[]),this.lockedMessages.set(l,[]),this.deadLetterMessages.set(l,[]),this.subscriptionState.set(l,{activeMessageCount:s.activeMessageCount||0,deadLetterMessageCount:0,sentCount:0,receivedCount:0,completedCount:0,abandonedCount:0,lastUpdate:Date.now()}),this.sessionMessages.set(l,new Map)}}}sendToQueue(t,n,s,r,l,c){const d=this.queues.get(t);if(!d)return null;const h=Date.now(),p=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,g=`${t}-${p}`,m=d.defaultMessageTimeToLive*1e3,v=h+m,w={id:p,messageId:g,timestamp:h,destination:t,payload:n,size:s,properties:r,sessionId:l,scheduledEnqueueTime:c,expirationTime:v,deliveryCount:0,enqueuedTime:c||h};if(c&&c>h){const C=this.scheduledMessages.get(t)||[];C.push(w),this.scheduledMessages.set(t,C);const R=this.queueState.get(t);return R&&(R.scheduledMessageCount=C.length),g}if(d.enableSessions&&l){const C=this.sessionMessages.get(t);if(C){const R=C.get(l)||[];R.push(w),C.set(l,R)}}else{const C=this.queueMessages.get(t)||[];C.push(w),this.queueMessages.set(t,C)}const S=this.queueState.get(t);if(S){const C=this.getAvailableMessages(t);S.activeMessageCount=C.length,S.sentCount=(S.sentCount||0)+1,S.lastUpdate=h}return g}publishToTopic(t,n,s,r,l){const c=this.topics.get(t);if(!c)return[];const d=Date.now(),h=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,p=`${t}-${h}`,g=c.defaultMessageTimeToLive*1e3,m=d+g,v={id:h,messageId:p,timestamp:d,destination:t,payload:n,size:s,properties:r,scheduledEnqueueTime:l,expirationTime:m,deliveryCount:0,enqueuedTime:l||d},w=[];if(l&&l>d){const C=this.scheduledMessages.get(t)||[];return C.push(v),this.scheduledMessages.set(t,C),[p]}const S=this.subscriptions.get(t)||[];if(S.length===0)return[];for(const C of S){const R=`${t}/subscriptions/${C.name}`,E=this.subscriptionMessages.get(R)||[],j={...v,id:`${h}-${C.name}`,messageId:`${p}-${C.name}`,subscriptionName:C.name};E.push(j),this.subscriptionMessages.set(R,E),w.push(j.messageId);const N=this.subscriptionState.get(R);if(N){const T=this.getAvailableSubscriptionMessages(R);N.activeMessageCount=T.length,N.sentCount=(N.sentCount||0)+1,N.lastUpdate=d}}return w}receiveFromQueue(t,n,s){const r=this.queues.get(t);if(!r)return null;const l=Date.now(),c=(n||r.lockDuration)*1e3,d=l+c;let h;if(r.enableSessions&&s){const v=this.sessionMessages.get(t);if(!v)return null;h=v.get(s)||[]}else h=this.getAvailableMessages(t);if(h.length===0)return null;const p=h.shift();p.deliveryCount=(p.deliveryCount||0)+1,p.lockedUntil=d,p.lockToken=`lock_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;const g=this.lockedMessages.get(t)||[];if(g.push({message:p,lockedAt:l,lockExpiresAt:d}),this.lockedMessages.set(t,g),r.enableSessions&&s){const v=this.sessionMessages.get(t);if(v){const w=v.get(s)||[],S=w.findIndex(C=>C.id===p.id);S>=0&&(w.splice(S,1),v.set(s,w))}}const m=this.queueState.get(t);if(m){const v=this.getAvailableMessages(t);m.activeMessageCount=v.length,m.receivedCount=(m.receivedCount||0)+1,m.lastUpdate=l}return p}receiveFromSubscription(t,n,s){const r=`${t}/subscriptions/${n}`,l=this.getAvailableSubscriptionMessages(r);if(l.length===0)return null;const c=this.subscriptions.get(t)?.find(w=>w.name===n);if(!c)return null;const d=Date.now(),h=(s||c.lockDuration)*1e3,p=d+h,g=l.shift();g.deliveryCount=(g.deliveryCount||0)+1,g.lockedUntil=p,g.lockToken=`lock_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;const m=this.lockedMessages.get(r)||[];m.push({message:g,lockedAt:d,lockExpiresAt:p}),this.lockedMessages.set(r,m);const v=this.subscriptionState.get(r);if(v){const w=this.getAvailableSubscriptionMessages(r);v.activeMessageCount=w.length,v.receivedCount=(v.receivedCount||0)+1,v.lastUpdate=d}return g}completeMessage(t,n){const s=this.lockedMessages.get(t)||[],r=s.findIndex(c=>c.message.lockToken===n);if(r<0)return!1;if(s.splice(r,1),this.lockedMessages.set(t,s),this.queues.has(t)){const c=this.queueState.get(t);c&&(c.completedCount=(c.completedCount||0)+1,c.lastUpdate=Date.now())}else{const c=this.subscriptionState.get(t);c&&(c.completedCount=(c.completedCount||0)+1,c.lastUpdate=Date.now())}return!0}abandonMessage(t,n){const s=this.lockedMessages.get(t)||[],r=s.findIndex(p=>p.message.lockToken===n);if(r<0)return!1;const l=s[r];s.splice(r,1),this.lockedMessages.set(t,s);const c=l.message;c.lockToken=void 0,c.lockedUntil=void 0;const d=this.queues.has(t),h=d?this.queues.get(t)?.maxDeliveryCount||10:this.subscriptions.get(c.destination)?.find(p=>p.name===c.subscriptionName)?.maxDeliveryCount||10;if(c.deliveryCount>=h){const p=this.deadLetterMessages.get(t)||[];if(p.push(c),this.deadLetterMessages.set(t,p),d){const g=this.queueState.get(t);g&&(g.deadLetterMessageCount=p.length,g.abandonedCount=(g.abandonedCount||0)+1,g.lastUpdate=Date.now())}else{const g=this.subscriptionState.get(t);g&&(g.deadLetterMessageCount=p.length,g.abandonedCount=(g.abandonedCount||0)+1,g.lastUpdate=Date.now())}}else{if(d){const p=this.queues.get(t);if(p)if(p.enableSessions&&c.sessionId){const g=this.sessionMessages.get(t);if(g){const m=g.get(c.sessionId)||[];m.push(c),g.set(c.sessionId,m)}}else{const g=this.queueMessages.get(t)||[];g.push(c),this.queueMessages.set(t,g)}}else{const p=this.subscriptionMessages.get(t)||[];p.push(c),this.subscriptionMessages.set(t,p)}if(d){const p=this.queueState.get(t);if(p){const g=this.getAvailableMessages(t);p.activeMessageCount=g.length,p.abandonedCount=(p.abandonedCount||0)+1,p.lastUpdate=Date.now()}}else{const p=this.subscriptionState.get(t);if(p){const g=this.getAvailableSubscriptionMessages(t);p.activeMessageCount=g.length,p.abandonedCount=(p.abandonedCount||0)+1,p.lastUpdate=Date.now()}}}return!0}processConsumption(t){const n=Date.now();for(const[s,r]of this.queues.entries()){const l=this.scheduledMessages.get(s)||[],c=this.queueMessages.get(s)||[],d=this.sessionMessages.get(s);for(let m=l.length-1;m>=0;m--){const v=l[m];if(v.scheduledEnqueueTime&&v.scheduledEnqueueTime<=n)if(l.splice(m,1),r.enableSessions&&v.sessionId&&d){const w=d.get(v.sessionId)||[];w.push(v),d.set(v.sessionId,w)}else c.push(v)}this.scheduledMessages.set(s,l),this.queueMessages.set(s,c);const h=this.lockedMessages.get(s)||[];for(let m=h.length-1;m>=0;m--){const v=h[m];v.lockExpiresAt<=n&&(h.splice(m,1),this.abandonMessage(s,v.message.lockToken))}this.lockedMessages.set(s,h);const p=this.getAvailableMessages(s);for(let m=p.length-1;m>=0;m--){const v=p[m];if(v.expirationTime<=n&&(p.splice(m,1),r.enableDeadLetteringOnMessageExpiration)){const w=this.deadLetterMessages.get(s)||[];w.push(v),this.deadLetterMessages.set(s,w)}}this.queueMessages.set(s,p);const g=this.queueState.get(s);g&&(g.activeMessageCount=this.getAvailableMessages(s).length,g.deadLetterMessageCount=(this.deadLetterMessages.get(s)||[]).length,g.scheduledMessageCount=l.length,g.lastUpdate=n)}for(const[s,r]of this.topics.entries()){const l=this.scheduledMessages.get(s)||[];for(let d=l.length-1;d>=0;d--){const h=l[d];h.scheduledEnqueueTime&&h.scheduledEnqueueTime<=n&&(l.splice(d,1),this.publishToTopic(s,h.payload,h.size,h.properties))}this.scheduledMessages.set(s,l);const c=this.subscriptions.get(s)||[];for(const d of c){const h=`${s}/subscriptions/${d.name}`,p=this.lockedMessages.get(h)||[];for(let v=p.length-1;v>=0;v--){const w=p[v];w.lockExpiresAt<=n&&(p.splice(v,1),this.abandonMessage(h,w.message.lockToken))}this.lockedMessages.set(h,p);const g=this.getAvailableSubscriptionMessages(h);for(let v=g.length-1;v>=0;v--){const w=g[v];if(w.expirationTime<=n&&(g.splice(v,1),d.enableDeadLetteringOnMessageExpiration)){const S=this.deadLetterMessages.get(h)||[];S.push(w),this.deadLetterMessages.set(h,S)}}this.subscriptionMessages.set(h,g);const m=this.subscriptionState.get(h);m&&(m.activeMessageCount=this.getAvailableSubscriptionMessages(h).length,m.deadLetterMessageCount=(this.deadLetterMessages.get(h)||[]).length,m.lastUpdate=n)}}}getAvailableMessages(t){if(!this.queues.get(t))return[];const s=Date.now();return(this.queueMessages.get(t)||[]).filter(l=>l.expirationTime>s)}getAvailableSubscriptionMessages(t){const n=Date.now();return(this.subscriptionMessages.get(t)||[]).filter(r=>r.expirationTime>n)}getTotalQueueDepth(){let t=0;for(const n of this.queues.keys())t+=this.getAvailableMessages(n).length;return t}getTotalSubscriptionMessages(){let t=0;for(const n of this.subscriptionMessages.keys())t+=this.getAvailableSubscriptionMessages(n).length;return t}getQueueMetrics(t){const n=this.queueState.get(t);return n?{activeMessageCount:n.activeMessageCount,deadLetterMessageCount:n.deadLetterMessageCount,scheduledMessageCount:n.scheduledMessageCount,sentCount:n.sentCount,receivedCount:n.receivedCount,completedCount:n.completedCount,abandonedCount:n.abandonedCount}:null}getSubscriptionMetrics(t,n){const s=`${t}/subscriptions/${n}`,r=this.subscriptionState.get(s);return r?{activeMessageCount:r.activeMessageCount,deadLetterMessageCount:r.deadLetterMessageCount,sentCount:r.sentCount,receivedCount:r.receivedCount,completedCount:r.completedCount,abandonedCount:r.abandonedCount}:null}getAllQueueMetrics(){const t=new Map;for(const n of this.queues.keys()){const s=this.getQueueMetrics(n);s&&t.set(n,s)}return t}getAllSubscriptionMetrics(){const t=new Map;for(const[n,s]of this.subscriptionState.entries())t.set(n,{activeMessageCount:s.activeMessageCount,deadLetterMessageCount:s.deadLetterMessageCount,sentCount:s.sentCount,receivedCount:s.receivedCount,completedCount:s.completedCount,abandonedCount:s.abandonedCount});return t}getActiveConnections(){return this.queues.size+this.topics.size}}class lN{topics=new Map;subscriptions=new Map;topicSubscriptions=new Map;topicMessages=new Map;subscriptionMessages=new Map;unackedMessages=new Map;orderingKeyQueues=new Map;topicState=new Map;subscriptionState=new Map;initialize(t){if(this.topics.clear(),this.subscriptions.clear(),this.topicSubscriptions.clear(),this.topicMessages.clear(),this.subscriptionMessages.clear(),this.unackedMessages.clear(),this.orderingKeyQueues.clear(),this.topicState.clear(),this.subscriptionState.clear(),t.topics)for(const n of t.topics)this.topics.set(n.name,{...n}),this.topicMessages.set(n.name,[]),this.topicSubscriptions.set(n.name,[]),this.orderingKeyQueues.set(n.name,new Map),this.topicState.set(n.name,{messageCount:n.messageCount||0,byteCount:n.byteCount||0,publishedCount:0,lastUpdate:Date.now()});if(t.subscriptions)for(const n of t.subscriptions){this.subscriptions.set(n.name,{...n}),this.subscriptionMessages.set(n.name,[]),this.unackedMessages.set(n.name,[]);const s=this.topicSubscriptions.get(n.topic)||[];s.includes(n.name)||s.push(n.name),this.topicSubscriptions.set(n.topic,s),this.subscriptionState.set(n.name,{messageCount:n.messageCount||0,unackedMessageCount:n.unackedMessageCount||0,deliveredCount:0,acknowledgedCount:0,nackedCount:0,lastUpdate:Date.now()})}}publishToTopic(t,n,s,r,l){if(!this.topics.get(t))return null;const d=Date.now(),h=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,p=d,g={id:`pubsub_${h}`,messageId:h,publishTime:p,data:n,attributes:r,orderingKey:l,size:s},m=this.topicMessages.get(t)||[];if(l){const S=this.orderingKeyQueues.get(t)||new Map,C=S.get(l)||[];C.push(g),S.set(l,C),this.orderingKeyQueues.set(t,S)}else m.push(g),this.topicMessages.set(t,m);const v=this.topicSubscriptions.get(t)||[];for(const S of v){const C=this.subscriptions.get(S);if(!C)continue;const R={...g,id:`${g.id}_${S}`},E=this.subscriptionMessages.get(S)||[];C.enableMessageOrdering,E.push(R),this.subscriptionMessages.set(S,E)}const w=this.topicState.get(t)||{messageCount:0,byteCount:0,publishedCount:0,lastUpdate:d};return w.messageCount=m.length+(l&&this.orderingKeyQueues.get(t)?.get(l)?.length||0),w.byteCount=(w.byteCount||0)+s,w.publishedCount=(w.publishedCount||0)+1,w.lastUpdate=d,this.topicState.set(t,w),h}pullFromSubscription(t,n=100){const s=this.subscriptions.get(t);if(!s)return[];const r=this.subscriptionMessages.get(t)||[];if(r.length===0)return[];const l=Date.now(),c=s.ackDeadlineSeconds*1e3,d=[],h=[];if(s.enableMessageOrdering){const m=new Map;for(const v of r){const w=v.orderingKey||"__no_key__";m.has(w)||m.set(w,[]),m.get(w).push(v)}for(const[v,w]of m.entries()){if(d.length>=n)break;const S=Math.min(w.length,n-d.length),C=w.splice(0,S);d.push(...C),h.push(...w)}for(const[v,w]of m.entries())w.length>0&&h.find(S=>(S.orderingKey||"__no_key__")===v)===void 0&&h.push(...w)}else{const m=Math.min(r.length,n);d.push(...r.splice(0,m)),h.push(...r)}this.subscriptionMessages.set(t,h);const p=this.unackedMessages.get(t)||[];for(const m of d){const v=`ack_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;m.ackId=v,p.push({message:m,subscriptionName:t,ackDeadlineExpiresAt:l+c,deliveryAttempt:1,orderingKey:m.orderingKey})}this.unackedMessages.set(t,p);const g=this.subscriptionState.get(t)||{messageCount:0,unackedMessageCount:0,deliveredCount:0,acknowledgedCount:0,nackedCount:0,lastUpdate:l};return g.messageCount=h.length,g.unackedMessageCount=p.length,g.deliveredCount=(g.deliveredCount||0)+d.length,g.lastUpdate=l,this.subscriptionState.set(t,g),d}ackMessage(t,n){if(!this.subscriptions.get(t))return!1;const r=this.unackedMessages.get(t)||[],l=r.length,c=r.filter(d=>d.message.ackId!==n);if(this.unackedMessages.set(t,c),c.length<l){const d=this.subscriptionState.get(t);return d&&(d.unackedMessageCount=c.length,d.acknowledgedCount=(d.acknowledgedCount||0)+1,d.lastUpdate=Date.now()),!0}return!1}nackMessage(t,n){if(!this.subscriptions.get(t))return!1;const r=this.unackedMessages.get(t)||[],l=r.findIndex(g=>g.message.ackId===n);if(l===-1)return!1;const d=r[l].message;r.splice(l,1),this.unackedMessages.set(t,r);const h=this.subscriptionMessages.get(t)||[];d.ackId=void 0,h.push(d),this.subscriptionMessages.set(t,h);const p=this.subscriptionState.get(t);return p&&(p.unackedMessageCount=r.length,p.messageCount=h.length,p.nackedCount=(p.nackedCount||0)+1,p.lastUpdate=Date.now()),!0}processConsumption(t){const n=Date.now();for(const[s,r]of this.unackedMessages.entries()){if(!this.subscriptions.get(s))continue;const c=[],d=[];for(const h of r)n>=h.ackDeadlineExpiresAt?c.push(h):d.push(h);if(c.length>0){const h=this.subscriptionMessages.get(s)||[];for(const g of c){const m=g.message;m.ackId=void 0,h.push(m)}this.subscriptionMessages.set(s,h);const p=this.subscriptionState.get(s);p&&(p.unackedMessageCount=d.length,p.messageCount=h.length)}this.unackedMessages.set(s,d)}for(const[s,r]of this.subscriptions.entries())if(r.pushEndpoint){const l=this.subscriptionMessages.get(s)||[];if(l.length>0){const d=Math.min(l.length,10),h=l.splice(0,d),p=this.unackedMessages.get(s)||[],g=Date.now(),m=r.ackDeadlineSeconds*1e3;for(const w of h){const S=`ack_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;w.ackId=S,p.push({message:w,subscriptionName:s,ackDeadlineExpiresAt:g+m,deliveryAttempt:1,orderingKey:w.orderingKey})}this.subscriptionMessages.set(s,l),this.unackedMessages.set(s,p);const v=this.subscriptionState.get(s);v&&(v.messageCount=l.length,v.unackedMessageCount=p.length,v.deliveredCount=(v.deliveredCount||0)+h.length)}}for(const[s,r]of this.topics.entries()){const c=(r.messageRetentionDuration||604800)*1e3,d=this.topicMessages.get(s)||[],h=Date.now(),p=d.filter(g=>h-g.publishTime<c);if(p.length<d.length){d.length-p.length,this.topicMessages.set(s,p);const g=this.topicState.get(s);g&&(g.messageCount=p.length)}}}getTopicMetrics(t){if(!this.topics.get(t))return null;const s=this.topicState.get(t);return s?{messageCount:s.messageCount,byteCount:s.byteCount,publishedCount:s.publishedCount}:null}getSubscriptionMetrics(t){if(!this.subscriptions.get(t))return null;const s=this.subscriptionState.get(t);return s?{messageCount:s.messageCount,unackedMessageCount:s.unackedMessageCount,deliveredCount:s.deliveredCount,acknowledgedCount:s.acknowledgedCount,nackedCount:s.nackedCount}:null}getAllTopicMetrics(){const t=new Map;for(const n of this.topics.keys()){const s=this.getTopicMetrics(n);s&&t.set(n,s)}return t}getAllSubscriptionMetrics(){const t=new Map;for(const n of this.subscriptions.keys()){const s=this.getSubscriptionMetrics(n);s&&t.set(n,s)}return t}getTotalTopicMessages(){let t=0;for(const n of this.topicMessages.values())t+=n.length;for(const n of this.orderingKeyQueues.values())for(const s of n.values())t+=s.length;return t}getTotalUnackedMessages(){let t=0;for(const n of this.unackedMessages.values())t+=n.length;return t}getActiveConnections(){let t=0;for(const n of this.subscriptions.values())n.pushEndpoint,t+=1;return Math.max(1,t+1)}updateTopic(t,n){const s=this.topics.get(t);s&&(Object.assign(s,n),this.topics.set(t,s))}updateSubscription(t,n){const s=this.subscriptions.get(t);s&&(Object.assign(s,n),this.subscriptions.set(t,s))}}class cN{services=new Map;routes=new Map;upstreams=new Map;consumers=new Map;plugins=[];roundRobinCounters=new Map;connectionCounts=new Map;consistentHashRing=new Map;rateLimitCounters=new Map;initialize(t){if(this.services.clear(),this.routes.clear(),this.upstreams.clear(),this.consumers.clear(),this.plugins=[],this.roundRobinCounters.clear(),this.connectionCounts.clear(),this.consistentHashRing.clear(),this.rateLimitCounters.clear(),t.services)for(const n of t.services)this.services.set(n.id,{...n});if(t.routes)for(const n of t.routes)this.routes.set(n.id,{...n});if(t.upstreams){for(const n of t.upstreams)if(this.upstreams.set(n.name,{...n}),this.roundRobinCounters.set(n.name,0),n.algorithm==="consistent-hashing"&&n.targets){const s=[...n.targets].filter(r=>r.health==="healthy").sort((r,l)=>r.target.localeCompare(l.target));this.consistentHashRing.set(n.name,s.map(r=>r.target))}}if(t.consumers)for(const n of t.consumers)this.consumers.set(n.id,{...n});t.plugins&&(this.plugins=t.plugins.filter(n=>n.enabled))}routeRequest(t){const n=Date.now(),s=this.matchRoute(t);if(!s)return{match:null,response:{status:404,error:"No route matched",latency:Date.now()-n}};const r=this.executePlugins(t,s,"access");if(r.blocked)return{match:s,response:{status:r.status||403,error:r.error||"Request blocked by plugin",latency:Date.now()-n}};const l=this.selectUpstreamTarget(s.service);if(!l)return{match:s,response:{status:503,error:"No healthy upstream target available",latency:Date.now()-n}};this.transformPath(t.path,s);const c={status:200,latency:Date.now()-n};return c.latency=(c.latency||0)+this.simulateUpstreamLatency(l),{match:s,response:c,target:l}}matchRoute(t){const n=Array.from(this.routes.values()).sort((s,r)=>(r.priority||0)-(s.priority||0));for(const s of n){if(s.method&&s.method.toUpperCase()!==t.method.toUpperCase())continue;const r=this.matchPath(s.path,t.path);if(r){const l=this.services.get(s.service);if(!l||!l.enabled)continue;return{route:s,service:l,matchedPath:r.matched,remainingPath:r.remaining}}}return null}matchPath(t,n){if(n.startsWith(t))return{matched:t,remaining:n.substring(t.length)};try{if(new RegExp(`^${t}$`).test(n))return{matched:n,remaining:""}}catch{}return null}selectUpstreamTarget(t){const n=t.upstream||t.name,s=this.upstreams.get(n);if(!s||!s.targets||s.targets.length===0)return t.url;const r=s.targets.filter(c=>c.health==="healthy");if(r.length===0)return null;switch(s.algorithm||"round-robin"){case"round-robin":return this.selectRoundRobin(n,r);case"consistent-hashing":return this.selectConsistentHash(n,r,t.name);case"least-connections":return this.selectLeastConnections(r);default:return r[0].target}}selectRoundRobin(t,n){const s=this.roundRobinCounters.get(t)||0,r=n[s%n.length];return this.roundRobinCounters.set(t,(s+1)%n.length),r.target}selectConsistentHash(t,n,s){const l=this.simpleHash(s)%n.length;return n[l].target}selectLeastConnections(t){let n=1/0,s=t[0].target;for(const l of t){const c=this.connectionCounts.get(l.target)||0;c<n&&(n=c,s=l.target)}const r=this.connectionCounts.get(s)||0;return this.connectionCounts.set(s,r+1),s}simpleHash(t){let n=0;for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);n=(n<<5)-n+r,n=n&n}return Math.abs(n)}transformPath(t,n){return n.route.stripPath?n.remainingPath||"/":t}executePlugins(t,n,s){const r=this.plugins.filter(l=>!(l.route&&l.route!==n.route.id||l.service&&l.service!==n.service.id));for(const l of r){const c=this.executePlugin(l,t,n,s);if(c.blocked)return c}return{blocked:!1}}executePlugin(t,n,s,r){const l=t.config||{};switch(t.name){case"rate-limiting":return this.executeRateLimiting(t,n,s,l);case"key-auth":return this.executeKeyAuth(t,n,s,l);case"jwt":return this.executeJWT(t,n,s,l);case"cors":return{blocked:!1};case"ip-restriction":return this.executeIPRestriction(t,n,s,l);default:return{blocked:!1}}}executeRateLimiting(t,n,s,r){const l=n.consumerId||s.service.id||s.route.id,c=Date.now();let d=this.rateLimitCounters.get(t.id);d||(d=new Map,this.rateLimitCounters.set(t.id,d));let h=d.get(l);(!h||h.resetAt<c)&&(h={count:0,resetAt:c+6e4},d.set(l,h));const p=r.minute||1e3;return r.hour,h.count++,h.count>p?{blocked:!0,status:429,error:"Rate limit exceeded (per minute)"}:{blocked:!1}}executeKeyAuth(t,n,s,r){const l=r.key_names||["apikey"],c=n.apiKey||n.headers?.[l[0]]||n.query?.[l[0]];return c?Array.from(this.consumers.values()).find(h=>h.credentials?.some(p=>p.type==="key-auth"&&p.key===c))?{blocked:!1}:{blocked:!0,status:401,error:"Invalid API key"}:{blocked:!0,status:401,error:"API key required"}}executeJWT(t,n,s,r){const l=n.headers?.Authorization;return!l||!l.startsWith("Bearer ")?{blocked:!0,status:401,error:"JWT token required"}:{blocked:!1}}executeIPRestriction(t,n,s,r){const l=n.headers?.["X-Forwarded-For"]||n.headers?.["X-Real-IP"]||"unknown",c=r.whitelist||[];return(r.blacklist||[]).includes(l)?{blocked:!0,status:403,error:"IP address blocked"}:c.length>0&&!c.includes(l)?{blocked:!0,status:403,error:"IP address not whitelisted"}:{blocked:!1}}simulateUpstreamLatency(t){return 10+Math.random()*40}getStats(){return{services:this.services.size,routes:this.routes.size,upstreams:this.upstreams.size,consumers:this.consumers.size,plugins:this.plugins.length}}}class uN{proxies=new Map;policies=[];organization;environment;quotaCounters=new Map;spikeArrestBuckets=new Map;apiKeyCache=new Map;oauthTokenCache=new Map;jwtTokenCache=new Map;proxyMetrics=new Map;initialize(t){if(this.proxies.clear(),this.policies=[],this.quotaCounters.clear(),this.spikeArrestBuckets.clear(),this.apiKeyCache.clear(),this.oauthTokenCache.clear(),this.jwtTokenCache.clear(),this.proxyMetrics.clear(),this.organization=t.organization||"archiphoenix-org",this.environment=t.environment||"prod",t.proxies)for(const n of t.proxies)this.proxies.set(n.name,{...n}),this.proxyMetrics.set(n.name,{requestCount:0,errorCount:0,totalLatency:0,lastRequestTime:0}),n.spikeArrest&&n.spikeArrest>0&&this.spikeArrestBuckets.set(n.name,{tokens:n.spikeArrest,lastRefill:Date.now(),rate:n.spikeArrest});t.policies&&(this.policies=t.policies.filter(n=>n.enabled))}routeRequest(t){const n=Date.now(),s=this.matchProxy(t);if(!s)return{match:null,response:{status:404,error:"No API proxy matched for path",latency:Date.now()-n}};if(s.proxy.status==="undeployed")return this.updateProxyMetrics(s.proxy.name,!1,Date.now()-n),{match:s,response:{status:503,error:`Proxy '${s.proxy.name}' is not deployed`,latency:Date.now()-n}};const r=this.policies.filter(w=>w.enabled&&(w.executionFlow==="PreFlow"||!w.executionFlow&&this.isPreFlowPolicy(w.type))),l=this.executePolicies(r,t,s,"PreFlow");if(l.blocked)return this.updateProxyMetrics(s.proxy.name,!0,Date.now()-n),{match:s,response:{status:l.status||401,error:l.error||"Authentication failed",latency:Date.now()-n}};const c=this.policies.filter(w=>w.enabled&&(w.executionFlow==="RequestFlow"||!w.executionFlow&&this.isRequestFlowPolicy(w.type))),d=this.executePolicies(c,t,s,"RequestFlow");if(d.blocked)return this.updateProxyMetrics(s.proxy.name,!0,Date.now()-n),{match:s,response:{status:d.status||429,error:d.error||"Request policy violation",latency:Date.now()-n}};const h=this.buildTargetUrl(s.proxy,s.remainingPath),p=this.simulateUpstreamLatency(h),g=Date.now()-n+p,m=this.policies.filter(w=>w.enabled&&(w.executionFlow==="PostFlow"||!w.executionFlow&&this.isPostFlowPolicy(w.type))),v={status:200,latency:g};return this.executePolicies(m,t,s,"PostFlow",v),this.updateProxyMetrics(s.proxy.name,!1,g),{match:s,response:v,target:h}}matchProxy(t){const n=Array.from(this.proxies.values()).filter(s=>s.status==="deployed"||s.status===void 0).sort((s,r)=>r.basePath.length-s.basePath.length);for(const s of n)if(t.path.startsWith(s.basePath)){const r=t.path.slice(s.basePath.length)||"/";return{proxy:s,matchedPath:s.basePath,remainingPath:r}}return null}isPreFlowPolicy(t){return["verify-api-key","oauth","jwt"].includes(t)}isRequestFlowPolicy(t){return["quota","spike-arrest"].includes(t)}isPostFlowPolicy(t){return["cors","xml-to-json"].includes(t)}evaluateCondition(t,n,s){if(!t)return!0;try{if(t.includes("request.path")){const r=t.match(/request\.path\s*[=!]=\s*['"]([^'"]+)['"]/);if(r)return n.path===r[1]}return t.length>0}catch{return!0}}executePolicies(t,n,s,r,l){for(const c of t)if(this.evaluateCondition(c.condition,n,s))if(r==="PreFlow"){const d=this.executePreFlowPolicy(c,n,s);if(d.blocked)return d}else if(r==="RequestFlow"){const d=this.executeRequestFlowPolicy(c,n,s);if(d.blocked)return d}else r==="PostFlow"&&l&&this.executePostFlowPolicy(c,n,s,l);return{blocked:!1}}executePreFlowPolicy(t,n,s){if(s.proxy,t.type==="verify-api-key"){const r=n.apiKey||n.headers?.["X-API-Key"]||n.headers?.apikey||n.query?.apikey;if(!r)return{blocked:!0,status:401,error:"API key is required"};if(!this.validateApiKey(r))return{blocked:!0,status:401,error:"Invalid API key"}}if(t.type==="oauth"&&s.proxy.enableOAuth){const l=n.oauthToken||n.headers?.Authorization?.replace("Bearer ","")||n.headers?.Authorization?.replace("OAuth ","");if(!l)return{blocked:!0,status:401,error:"OAuth token is required"};if(!this.validateOAuthToken(l))return{blocked:!0,status:401,error:"Invalid or expired OAuth token"}}if(t.type==="jwt"){const r=s.proxy;if(r.jwtIssuer){const l=n.jwtToken||n.headers?.Authorization?.replace("Bearer ","")||n.headers?.["X-JWT-Token"];if(!l)return{blocked:!0,status:401,error:"JWT token is required"};if(!this.validateJWTToken(l,r.jwtIssuer))return{blocked:!0,status:401,error:"Invalid or expired JWT token"}}}return{blocked:!1}}executeRequestFlowPolicy(t,n,s){const r=s.proxy,l=n.headers?.["X-Consumer-ID"]||"default";if(t.type==="quota"){const c=t.config?.quota||r.quota,d=t.config?.interval||r.quotaInterval;if(c&&d&&!this.checkQuota(r.name,l,c,d))return{blocked:!0,status:429,error:`Quota exceeded: ${c} requests per ${d} seconds`}}if(t.type==="spike-arrest"){const c=t.config?.rate||r.spikeArrest;if(c&&c>0&&!this.checkSpikeArrest(r.name,c))return{blocked:!0,status:429,error:`Spike arrest limit exceeded: ${c} requests per second`}}return{blocked:!1}}executePostFlowPolicy(t,n,s,r){t.type==="cors"&&(r.headers||(r.headers={}),r.headers["Access-Control-Allow-Origin"]=t.config?.origins?.[0]||"*",r.headers["Access-Control-Allow-Methods"]=t.config?.methods?.join(", ")||"GET, POST, PUT, DELETE",r.headers["Access-Control-Allow-Headers"]=t.config?.headers?.join(", ")||"Content-Type, Authorization"),t.type==="xml-to-json"&&(r.headers||(r.headers={}),r.headers["Content-Type"]="application/json")}checkQuota(t,n,s,r){const l=Date.now(),c=r*1e3;let d=this.quotaCounters.get(t);d||(d=new Map,this.quotaCounters.set(t,d));let h=d.get(n);return(!h||h.resetAt<l)&&(h={count:0,resetAt:l+c,identifier:n},d.set(n,h)),h.count>=s?!1:(h.count++,!0)}checkSpikeArrest(t,n){const s=Date.now();let r=this.spikeArrestBuckets.get(t);r||(r={tokens:n,lastRefill:s,rate:n},this.spikeArrestBuckets.set(t,r));const c=(s-r.lastRefill)/1e3*r.rate;return r.tokens=Math.min(r.rate,r.tokens+c),r.lastRefill=s,r.tokens<1?!1:(r.tokens-=1,!0)}validateApiKey(t){const n=this.apiKeyCache.get(t);if(n&&n.expiresAt>Date.now())return n.valid;const s=t.length>=10;return this.apiKeyCache.set(t,{valid:s,expiresAt:Date.now()+300*1e3}),s}validateOAuthToken(t){const n=this.oauthTokenCache.get(t);if(n&&n.expiresAt>Date.now())return n.valid;const s=t.length>=20;return this.oauthTokenCache.set(t,{valid:s,expiresAt:Date.now()+3600*1e3}),s}validateJWTToken(t,n){const s=this.jwtTokenCache.get(t);if(s&&s.expiresAt>Date.now())return s.valid&&s.issuer===n;const r=t.length>=20;return this.jwtTokenCache.set(t,{valid:r,issuer:n,expiresAt:Date.now()+3600*1e3}),r}buildTargetUrl(t,n){const s=t.targetEndpoint.replace(/\/$/,""),r=n.startsWith("/")?n:`/${n}`;return`${s}${r}`}simulateUpstreamLatency(t){const n=10+Math.random()*40,s=(Math.random()-.5)*10;return Math.max(1,n+s)}updateProxyMetrics(t,n,s){const r=this.proxyMetrics.get(t);r&&(r.requestCount++,n&&r.errorCount++,r.totalLatency+=s,r.lastRequestTime=Date.now())}getStats(){let t=0,n=0,s=0;for(const l of this.proxyMetrics.values())t+=l.requestCount,n+=l.errorCount,s+=l.totalLatency;const r=t>0?s/t:0;return{proxies:this.proxies.size,policies:this.policies.length,totalRequests:t,totalErrors:n,avgLatency:r}}getProxyMetrics(t){const n=this.proxyMetrics.get(t);return n?{requestCount:n.requestCount,errorCount:n.errorCount,avgResponseTime:n.requestCount>0?n.totalLatency/n.requestCount:0}:null}clearCaches(){this.apiKeyCache.clear(),this.oauthTokenCache.clear(),this.jwtTokenCache.clear()}}class dN{applications=new Map;connectors=new Map;organization;environment;applicationMetrics=new Map;connectorMetrics=new Map;reconnectionState=new Map;initialize(t){if(this.applications.clear(),this.connectors.clear(),this.applicationMetrics.clear(),this.connectorMetrics.clear(),this.reconnectionState.clear(),this.organization=t.organization||"archiphoenix-org",this.environment=t.environment||"production",t.applications)for(const n of t.applications)this.applications.set(n.name,{...n}),this.applicationMetrics.set(n.name,{requestCount:0,errorCount:0,totalLatency:0,lastRequestTime:0});if(t.connectors)for(const n of t.connectors)this.connectors.set(n.name,{...n}),this.connectorMetrics.set(n.name,{requestCount:0,errorCount:0,totalLatency:0,lastRequestTime:0}),this.reconnectionState.set(n.name,{attempts:0,lastAttempt:0,nextAttempt:0})}processData(t){const n=Date.now(),s=this.matchApplication(t);if(!s)return{match:null,response:{status:"error",error:"No Mule application matched for request",latency:Date.now()-n}};if(s.application.status!=="running")return this.updateApplicationMetrics(s.application.name,!1,Date.now()-n),{match:s,response:{status:"error",error:`Application '${s.application.name}' is not running (status: ${s.application.status})`,latency:Date.now()-n}};let r=0,l;try{r=this.processFlow(s,t)}catch(d){l=d instanceof Error?d.message:"Unknown error"}if(l&&!this.handleError(s.application,l))return this.updateApplicationMetrics(s.application.name,!0,Date.now()-n),{match:s,response:{status:"error",error:l,latency:Date.now()-n,application:s.application.name,flow:s.flow?.name}};const c=this.transformData(t,s);return this.updateApplicationMetrics(s.application.name,!1,Date.now()-n),s.matchedConnector&&this.updateConnectorMetrics(s.matchedConnector.name,!1,Date.now()-n),{match:s,response:{status:"success",data:c.data,format:c.format||t.format,latency:Date.now()-n,application:s.application.name,flow:s.flow?.name,connector:s.matchedConnector?.name}}}matchApplication(t){if(t.sourceComponentType||t.targetComponentType)for(const[n,s]of this.applications.entries()){if(s.status!=="running")continue;const r=this.findMatchingConnector(s,t.sourceComponentType,t.targetComponentType);if(r){const l=s.flows?.find(c=>c.source===r.name||c.target===r.name)||s.flows?.[0];return{application:s,flow:l,matchedConnector:r}}}for(const[n,s]of this.applications.entries())if(s.status==="running")return{application:s,flow:s.flows?.[0]};return null}findMatchingConnector(t,n,s){const r=t.connectors||[];for(const l of r){const c=this.connectors.get(l);if(!(!c||!c.enabled)&&(n&&this.connectorMatchesComponentType(c,n)||s&&this.connectorMatchesComponentType(c,s)))return c}return null}connectorMatchesComponentType(t,n){const s={database:["postgres","mongodb","redis","cassandra","clickhouse","snowflake","elasticsearch"],api:["rest","grpc","graphql","soap","websocket","webhook"],messaging:["kafka","rabbitmq","activemq","aws-sqs","azure-service-bus","gcp-pubsub"],file:["s3-datalake"],business:["crm","erp","payment-gateway"]};for(const[r,l]of Object.entries(s))if(t.type===r&&l.includes(n))return!0;return t.targetComponentType===n}processFlow(t,n){if(!t.flow)return this.calculateBaseProcessingTime(t.application);let s=this.calculateBaseProcessingTime(t.application);if(t.flow.processors)for(const r of t.flow.processors)s+=this.processProcessor(r,n);return t.matchedConnector&&(s+=this.calculateConnectorLatency(t.matchedConnector)),s}calculateBaseProcessingTime(t){const n=5+Math.random()*10,s=parseFloat(t.runtimeVersion)>=4.5?.9:1;return n*s}processProcessor(t,n){switch(t.type){case"transform":return 2+Math.random()*6;case"validate":return 1+Math.random()*2;case"filter":return .5+Math.random()*1.5;case"enrich":return 3+Math.random()*7;case"route":return .5+Math.random()*.5;default:return 1}}calculateConnectorLatency(t){const s={database:10,api:20,messaging:5,file:50,custom:15}[t.type]||15,r=s*.5*Math.random();return s+r}transformData(t,n){if(t.targetComponentType){const s=this.getTargetFormat(t.targetComponentType);if(s&&s!==t.format)return{data:t.body,format:s}}return{data:t.body,format:t.format}}getTargetFormat(t){return{postgres:"json",mongodb:"json",redis:"json",rest:"json",graphql:"json",soap:"xml",grpc:"binary",kafka:"json",rabbitmq:"json"}[t]}handleError(t,n){switch(t.errorStrategy||"continue"){case"continue":return!0;case"rollback":return!1;case"propagate":return!1;default:return!1}}updateApplicationMetrics(t,n,s){const r=this.applicationMetrics.get(t);r&&(r.requestCount++,n&&r.errorCount++,r.totalLatency+=s,r.lastRequestTime=Date.now())}updateConnectorMetrics(t,n,s){const r=this.connectorMetrics.get(t);r&&(r.requestCount++,n&&r.errorCount++,r.totalLatency+=s,r.lastRequestTime=Date.now())}getStats(){let t=0,n=0,s=0;for(const c of this.applicationMetrics.values())t+=c.requestCount,n+=c.errorCount,s+=c.totalLatency;const r=Array.from(this.applications.values()).filter(c=>c.status==="running").length,l=Array.from(this.connectors.values()).filter(c=>c.enabled).length;return{applications:this.applications.size,runningApplications:r,connectors:this.connectors.size,enabledConnectors:l,totalRequests:t,totalErrors:n,avgLatency:t>0?s/t:0}}getApplicationMetrics(t){const n=this.applicationMetrics.get(t);return n?{requestCount:n.requestCount,errorCount:n.errorCount,avgLatency:n.requestCount>0?n.totalLatency/n.requestCount:0}:null}getConnectorMetrics(t){const n=this.connectorMetrics.get(t);return n?{requestCount:n.requestCount,errorCount:n.errorCount,avgLatency:n.requestCount>0?n.totalLatency/n.requestCount:0}:null}}class fN{parseQuery(t){const n=t.query.trim(),s=this.extractOperationType(n),r=t.operationName||this.extractOperationName(n),l=this.extractFields(n),c=this.calculateDepth(n),d=this.estimateComplexity(n,r);return{operationName:r,operationType:s,fields:l,depth:c,complexity:d,rawQuery:n}}extractOperationType(t){const n=t.trim();return n.startsWith("mutation")?"mutation":n.startsWith("subscription")?"subscription":"query"}extractOperationName(t){const n=t.match(/(?:query|mutation|subscription)\s+([a-zA-Z0-9_]+)/);return n?n[1]:void 0}extractFields(t){const n=[],s=/([a-zA-Z0-9_]+)\s*(?:\(|\{)/g;let r;for(;(r=s.exec(t))!==null;)n.push(r[1]);return n.length>0?n:["unknown"]}calculateDepth(t){let n=0,s=0;for(const r of t)r==="{"?(n+=1,s=Math.max(s,n)):r==="}"&&(n=Math.max(0,n-1));return s}estimateComplexity(t,n){const s=t.match(/[a-zA-Z0-9_]+(\s*[({])/g),r=s?s.length:5,l=this.calculateDepth(t),c=n?Math.max(1,n.length%5):1;return Math.round(r*(1+l*.5)*c*10)}}class hN{federationConfig;constructor(t){this.federationConfig=t}planQuery(t,n){if(n.length===0)return{subqueries:[],requiresFederation:!1,estimatedLatency:0};const s=this.federationConfig?.enabled??!1,l=this.selectServices(t,n).map(h=>({serviceId:h.id,serviceName:h.name,endpoint:h.endpoint,query:t.rawQuery,fields:t.fields,estimatedLatency:this.estimateServiceLatency(h,t)})),c=l.reduce((h,p)=>h+p.estimatedLatency,0),d=s?3+Math.random()*5:0;return{subqueries:l,requiresFederation:s,estimatedLatency:c+d}}selectServices(t,n){if(this.federationConfig?.enabled&&this.federationConfig.services?.length){const l=n.filter(c=>this.federationConfig.services.includes(c.name));return l.length>0?l:n.slice(0,Math.min(2,n.length))}const s=this.hashString(t.operationName||t.rawQuery),r=Math.abs(s)%n.length;return[n[r]]}estimateServiceLatency(t,n){const s=t.avgLatencyMs,r=Math.sqrt(n.complexity)*.8,l=n.depth*1.5,c=Math.random()*5;return s+r+l+c}hashString(t){let n=0;for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);n=(n<<5)-n+r,n|=0}return n}updateFederationConfig(t){this.federationConfig=t}}class pN{serviceRegistry;constructor(t){this.serviceRegistry=t}executePlan(t){if(t.subqueries.length===0)return{success:!1,totalLatency:0,error:"No services available",executedEndpoints:[]};let n=0;const s=[];for(const r of t.subqueries){const l=this.serviceRegistry.getService(r.serviceId);if(!l)return{success:!1,totalLatency:n,error:`Service ${r.serviceId} not found`,failedService:r.serviceId,executedEndpoints:s};const c=r.endpoint||l.endpoint;s.push(c);const h=this.getEndpointLatency(c,l.avgLatencyMs)+(r.estimatedLatency-l.avgLatencyMs);if(n+=h,Math.random()<l.errorRate)return this.serviceRegistry.recordRequest(l.id,h,!1),{success:!1,totalLatency:n,error:`Upstream error at ${l.name} (${c})`,failedService:l.id,executedEndpoints:s};this.serviceRegistry.recordRequest(l.id,h,!0)}return{success:!0,totalLatency:n,executedEndpoints:s}}getEndpointLatency(t,n){return t.includes("localhost")||t.includes("127.0.0.1")?n*.8:t.includes("https://")?n*1.1:n}}class gN{services=new Map;registerService(t){const n=this.services.get(t.id);this.services.set(t.id,{id:t.id,name:t.name,endpoint:t.endpoint,avgLatencyMs:t.avgLatencyMs??20,errorRate:t.errorRate??.01,status:t.status??"connected",rollingLatency:n?.rollingLatency||[],rollingErrors:n?.rollingErrors||[]})}unregisterService(t){this.services.delete(t)}getConnectedServices(){return Array.from(this.services.values()).filter(t=>t.status==="connected")}getService(t){return this.services.get(t)}getServiceByName(t){return Array.from(this.services.values()).find(n=>n.name===t)}recordRequest(t,n,s){const r=this.services.get(t);if(!r)return;r.rollingLatency.push(n),r.rollingLatency.length>50&&r.rollingLatency.shift(),s||(r.rollingErrors.push(n),r.rollingErrors.length>50&&r.rollingErrors.shift());const l=r.rollingLatency.reduce((d,h)=>d+h,0)/r.rollingLatency.length;r.avgLatencyMs=l;const c=r.rollingErrors.length/Math.max(r.rollingLatency.length,1);r.errorRate=c}initialize(t){this.services.clear();for(const n of t)this.registerService(n)}getAllServices(){return Array.from(this.services.values())}}class mN{cache=new Map;ttl;persistQueries;constructor(t=0,n=!1){this.ttl=t,this.persistQueries=n}generateCacheKey(t,n){const s=n?JSON.stringify(n):"";return this.hashString(t+s)}getCached(t,n){if(this.ttl<=0||!this.persistQueries)return{hit:!1,latencyReduction:0};const s=this.generateCacheKey(t,n),r=this.cache.get(s);return r?Date.now()-r.timestamp>r.ttl*1e3?(this.cache.delete(s),{hit:!1,latencyReduction:0}):{hit:!0,latencyReduction:.7}:{hit:!1,latencyReduction:0}}setCached(t,n,s){if(this.ttl<=0||!this.persistQueries)return;const r=this.generateCacheKey(t,s);if(this.cache.set(r,{query:t,response:n,timestamp:Date.now(),ttl:this.ttl}),this.cache.size>1e3){const l=this.cache.keys().next().value;this.cache.delete(l)}}getCacheHitProbability(t){if(this.ttl<=0||!this.persistQueries)return 0;const n=.2,s=Math.min(t.complexity/2e3,.4);return Math.min(n+s,.6)}updateConfig(t,n){t!==void 0&&(this.ttl=t),n!==void 0&&(this.persistQueries=n)}clearCache(){this.cache.clear()}hashString(t){let n=0;for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);n=(n<<5)-n+r,n|=0}return Math.abs(n).toString(16)}}class yN{enabled;limits=new Map;defaultLimit=100;windowMs=6e4;constructor(t=!1,n=100){this.enabled=t,this.defaultLimit=n}checkLimit(t,n){if(!this.enabled)return{allowed:!0,remaining:1/0,resetAt:Date.now()+this.windowMs};const s=n||this.defaultLimit,r=Date.now(),l=this.limits.get(t);if(!l||r>=l.resetAt){const c={count:1,resetAt:r+this.windowMs,windowStart:r};return this.limits.set(t,c),{allowed:!0,remaining:s-1,resetAt:c.resetAt}}return l.count>=s?{allowed:!1,remaining:0,resetAt:l.resetAt}:(l.count+=1,{allowed:!0,remaining:s-l.count,resetAt:l.resetAt})}getIdentifier(t){if(!t)return"default";const n=t["x-api-key"]||t.apikey;if(n)return`key:${n}`;const s=t["x-client-id"];return s?`client:${s}`:"default"}setEnabled(t){this.enabled=t}updateDefaultLimit(t){this.defaultLimit=t}clearLimits(){this.limits.clear()}}class vN{maxQueryDepth;maxQueryComplexity;enabled;constructor(t=15,n=1e3,s=!0){this.maxQueryDepth=t,this.maxQueryComplexity=n,this.enabled=s}validateQuery(t){return this.enabled?t.depth>this.maxQueryDepth?{valid:!1,error:`Query depth ${t.depth} exceeds limit ${this.maxQueryDepth}`}:t.complexity>this.maxQueryComplexity?{valid:!1,error:`Query complexity ${t.complexity} exceeds limit ${this.maxQueryComplexity}`}:{valid:!0}:{valid:!0}}updateLimits(t,n){t!==void 0&&(this.maxQueryDepth=t),n!==void 0&&(this.maxQueryComplexity=n)}setEnabled(t){this.enabled=t}}class bN{config;constructor(t){this.config=t}isEnabled(){return this.config?.enabled??!1}getVersion(){return this.config?.version}getFederatedServices(){return this.config?.services||[]}getPlanningOverhead(){return this.isEnabled()?(this.config?.version==="2"?2:4)+Math.random()*3:0}isFederatedService(t){return this.isEnabled()?this.config?.services?.includes(t.name)??!1:!1}getSupergraphSchema(){return this.config?.supergraph}updateConfig(t){this.config=t}}class xN{queryParser;queryPlanner;queryExecutor;serviceRegistry;cacheManager;rateLimiter;complexityAnalyzer;federationComposer;constructor(){this.serviceRegistry=new gN,this.queryParser=new fN,this.queryPlanner=new hN,this.queryExecutor=new pN(this.serviceRegistry),this.cacheManager=new mN,this.rateLimiter=new yN,this.complexityAnalyzer=new vN,this.federationComposer=new bN}initialize(t){t.services&&this.serviceRegistry.initialize(t.services),this.federationComposer.updateConfig(t.federation),this.queryPlanner.updateFederationConfig(t.federation),this.cacheManager.updateConfig(t.cacheTtl??0,t.persistQueries??!1),this.rateLimiter.setEnabled(t.enableRateLimiting??!1),this.complexityAnalyzer.updateLimits(t.maxQueryDepth??15,t.maxQueryComplexity??1e3),this.complexityAnalyzer.setEnabled(t.enableQueryComplexityAnalysis??!0)}routeRequest(t){const n=Date.now();if(!t.query||t.query.trim().length===0)return{status:400,latency:Date.now()-n,error:"Empty query"};const s=this.rateLimiter.getIdentifier(t.headers);if(!this.rateLimiter.checkLimit(s).allowed)return{status:429,latency:Date.now()-n,error:"Rate limit exceeded"};const l=this.queryParser.parseQuery(t),c=this.cacheManager.getCached(t.query,t.variables);if(c.hit)return{status:200,latency:(Date.now()-n)*(1-c.latencyReduction)};const d=this.complexityAnalyzer.validateQuery(l);if(!d.valid)return{status:413,latency:Date.now()-n,error:d.error};const h=this.serviceRegistry.getConnectedServices();if(h.length===0)return{status:503,latency:Date.now()-n,error:"No connected services"};const p=this.queryPlanner.planQuery(l,h),g=this.queryExecutor.executePlan(p);return g.success?(this.cacheManager.setCached(t.query,{success:!0},t.variables),{status:200,latency:g.totalLatency+(Date.now()-n)}):{status:502,latency:g.totalLatency+(Date.now()-n),error:g.error}}getServiceRegistry(){return this.serviceRegistry}getCacheManager(){return this.cacheManager}getRateLimiter(){return this.rateLimiter}}class wN{backends=new Map;endpoints=new Map;config={};circuitBreakers=new Map;cache=new Map;cacheMode="memory";defaultCacheTtl=5;redisEngine=null;redisNodeId="";backendMetrics=new Map;batchQueue=new Map;batchTimer=null;batchSize=10;batchTimeout=50;initialize(t){if(this.config=t,this.backends.clear(),this.endpoints.clear(),this.circuitBreakers.clear(),this.cache.clear(),this.backendMetrics.clear(),this.cacheMode=t.cacheMode||"memory",this.defaultCacheTtl=t.cacheTtl||5,this.redisEngine=t.redisEngine||null,this.redisNodeId=t.redisNodeId||"",t.backends)for(const n of t.backends)this.backends.set(n.id,{...n}),this.initializeCircuitBreaker(n.id,n.circuitBreaker),this.initializeBackendMetrics(n.id);if(t.endpoints)for(const n of t.endpoints)this.endpoints.set(n.id,{...n})}initializeCircuitBreaker(t,n){n?.enabled&&this.circuitBreakers.set(t,{failures:0,successes:0,state:"closed",lastFailureTime:0,nextAttemptTime:0})}initializeBackendMetrics(t){this.backendMetrics.set(t,{requestCount:0,errorCount:0,totalLatency:0,averageLatency:0,lastRequestTime:0,cacheHits:0,cacheMisses:0})}routeRequest(t){const n=Date.now(),s=this.matchEndpoint(t);if(!s)return{status:404,error:"Endpoint not found",latency:Date.now()-n,backendResponses:[],cacheHit:!1};if(this.config.enableCaching&&this.cacheMode!=="off"){const c=this.getCacheKey(s,t),d=this.getCached(c);if(d){const h=this.backendMetrics.get(s.backends[0])||this.initializeBackendMetrics(s.backends[0]);return h&&h.cacheHits++,{status:200,data:d.data,latency:Date.now()-n,backendResponses:[],cacheHit:!0}}}const r=this.aggregateBackends(s,t),l=this.aggregateResponses(s,r);if(this.config.enableCaching&&this.cacheMode!=="off"&&l.status===200){const c=this.getCacheKey(s,t),d=s.cacheTtl||this.defaultCacheTtl;this.setCached(c,l.data,d)}for(const c of r){const d=this.backendMetrics.get(c.backendId);d&&(d.requestCount++,c.status>=400&&d.errorCount++,d.totalLatency+=c.latency,d.averageLatency=d.totalLatency/d.requestCount,d.lastRequestTime=Date.now(),c.cached||d.cacheMisses++)}return{...l,latency:Date.now()-n,backendResponses:r,cacheHit:!1}}matchEndpoint(t){for(const n of this.endpoints.values())if(n.path===t.path&&n.method===t.method)return n;return null}aggregateBackends(t,n){const s=t.backends;switch(t.aggregator){case"parallel":return this.executeBackendsParallel(s,n,t);case"sequential":return this.executeBackendsSequential(s,n,t);case"merge":default:return this.executeBackendsParallel(s,n,t)}}executeBackendsParallel(t,n,s){const r=[];for(const l of t){const c=this.executeBackend(l,n,s);r.push(c)}return r}executeBackendsSequential(t,n,s){const r=[];let l={};for(const c of t){const d={...n,body:{...typeof n.body=="object"?n.body:{},...l}},h=this.executeBackend(c,d,s);if(r.push(h),h.status>=200&&h.status<300&&h.data)typeof h.data=="object"&&(l={...l,...h.data});else break}return r}executeBackend(t,n,s){const r=this.backends.get(t);if(!r)return{backendId:t,status:503,error:"Backend not found",latency:0,cached:!1};const l=this.circuitBreakers.get(t);if(l){const g=Date.now();if(l.state==="open"){if(g<l.nextAttemptTime)return{backendId:t,status:503,error:"Circuit breaker is open",latency:0,cached:!1};l.state="half-open"}}if(this.config.enableCaching&&this.cacheMode!=="off"){const g=`${t}:${s.path}:${JSON.stringify(n.query||{})}`,m=this.getCached(g);if(m)return{backendId:t,status:200,data:m.data,latency:1,cached:!0}}s.timeout||r.timeout||this.config.defaultTimeout;const c=r.retries||0,d=r.retryBackoff||"exponential";let h,p=0;for(let g=0;g<=c;g++){if(g>0){const R=this.calculateBackoff(g,d);p+=R}const m=50+Math.random()*150,v=(Math.random()-.5)*20,w=m+v;p+=w;const S=r.status==="connected"?.95:.5;if(Math.random()<S){l&&(l.state==="half-open"?(l.successes++,l.successes>=(r.circuitBreaker?.successThreshold||2)&&(l.state="closed",l.failures=0,l.successes=0)):l.failures=Math.max(0,l.failures-1));const R=this.generateMockResponse(r,n);return{backendId:t,status:200,data:R,latency:p,cached:!1}}else h=`Backend error (attempt ${g+1}/${c+1})`,l&&(l.failures++,l.lastFailureTime=Date.now(),l.failures>=(r.circuitBreaker?.failureThreshold||5)&&(l.state="open",l.nextAttemptTime=Date.now()+(r.circuitBreaker?.timeout||6e4)))}return{backendId:t,status:503,error:h||"Backend request failed",latency:p,cached:!1}}calculateBackoff(t,n){switch(n){case"exponential":return Math.min(1e3*Math.pow(2,t-1),1e4);case"linear":return 100*t;case"constant":default:return 100}}generateMockResponse(t,n){const s=t.name.toLowerCase();return s.includes("user")||s.includes("profile")?{id:Math.floor(Math.random()*1e3),name:"John Doe",email:"john.doe@example.com",avatar:"https://example.com/avatar.jpg"}:s.includes("order")||s.includes("cart")?{id:Math.floor(Math.random()*1e3),items:[{id:1,name:"Product 1",price:29.99,quantity:2},{id:2,name:"Product 2",price:49.99,quantity:1}],total:109.97}:s.includes("product")||s.includes("catalog")?{products:[{id:1,name:"Product 1",price:29.99,inStock:!0},{id:2,name:"Product 2",price:49.99,inStock:!0}],total:2}:{data:"Mock response",timestamp:Date.now()}}aggregateResponses(t,n){if(n.length===0)return{status:503,error:"No backends configured for endpoint"};if(n.every(l=>l.status>=400))return{status:503,error:"All backends failed"};const r=n.some(l=>l.status>=400);if(t.aggregator==="merge"||t.aggregator==="parallel"){const l={};for(const c of n)if(c.status>=200&&c.status<300&&c.data){const h=this.backends.get(c.backendId)?.name||c.backendId;typeof c.data=="object"&&c.data,l[h]=c.data}return{status:r?207:200,data:l}}else{const l=n[n.length-1];return l.status>=200&&l.status<300?{status:200,data:l.data}:{status:l.status,error:l.error}}}getCacheKey(t,n){return t.cacheKey?t.cacheKey:`${t.path}:${t.method}:${JSON.stringify(n.query||{})}`}getCached(t){if(this.cacheMode==="off")return null;if(this.cacheMode==="redis"&&this.redisEngine){const s=this.getRedisCacheKey(t),r=this.redisEngine.executeCommand("GET",[s]);if(r.success&&r.value!==null)try{const l=typeof r.value=="string"?JSON.parse(r.value):r.value;return{key:t,data:l,expiresAt:Date.now()+this.defaultCacheTtl*1e3,hitCount:1}}catch{return null}return null}const n=this.cache.get(t);return n?Date.now()>n.expiresAt?(this.cache.delete(t),null):(n.hitCount++,n):null}setCached(t,n,s){if(this.cacheMode!=="off"){if(this.cacheMode==="redis"&&this.redisEngine){const r=this.getRedisCacheKey(t),l=typeof n=="string"?n:JSON.stringify(n),c=[r,l];s>0&&c.push("EX",String(s)),this.redisEngine.executeCommand("SET",c);return}this.cache.set(t,{key:t,data:n,expiresAt:Date.now()+s*1e3,hitCount:0}),this.cache.size>1e3&&this.cleanupCache()}}getRedisCacheKey(t){return`${this.redisNodeId?`bff:${this.redisNodeId}:`:"bff:"}${t}`}cleanupCache(){const t=Date.now();for(const[n,s]of this.cache.entries())t>s.expiresAt&&this.cache.delete(n)}getStats(){let t=0,n=0,s=0,r=0,l=0;const c={};for(const[d,h]of this.backendMetrics.entries())t+=h.requestCount,n+=h.errorCount,s+=h.totalLatency,r+=h.cacheHits,l+=h.cacheMisses,c[d]={...h};return{totalRequests:t,totalErrors:n,averageLatency:t>0?s/t:0,cacheHitRate:r+l>0?r/(r+l):0,backendStats:c}}getBackendMetrics(t){return this.backendMetrics.get(t)}getBackends(){return Array.from(this.backends.values())}getEndpoints(){return Array.from(this.endpoints.values())}updateBackendStatus(t,n){const s=this.backends.get(t);s&&(s.status=n)}}class CN{relays=new Map;config={};deliveries=new Map;pendingDeliveries=new Map;relayMetrics=new Map;initialize(t){if(this.config=t,this.relays.clear(),this.deliveries.clear(),this.pendingDeliveries.clear(),this.relayMetrics.clear(),t.relays)for(const n of t.relays)n.enabled&&(this.relays.set(n.id,{...n}),this.initializeRelayMetrics(n.id))}initializeRelayMetrics(t){this.relayMetrics.set(t,{totalRequests:0,successfulDeliveries:0,failedDeliveries:0,totalRetries:0,averageLatency:0,totalLatency:0,lastRequestTime:0})}relayWebhook(t){const n=Date.now(),s=this.findMatchingRelay(t);if(!s)return{success:!1,status:404,latency:Date.now()-n,attempts:0,error:"No matching relay found"};if(s.allowedIps&&s.allowedIps.length>0&&t.ip&&!this.isIpAllowed(t.ip,s.allowedIps))return this.updateRelayMetrics(s.id,!1,Date.now()-n),{success:!1,status:403,latency:Date.now()-n,attempts:0,error:"IP address not allowed",relayId:s.id};if(this.config.enableSignatureVerification&&s.signatureSecret&&!this.verifySignature(t,s.signatureSecret,s.signatureHeader||"X-Signature"))return this.updateRelayMetrics(s.id,!1,Date.now()-n),{success:!1,status:401,latency:Date.now()-n,attempts:0,error:"Invalid signature",relayId:s.id};let r=t.body;s.transformTemplate&&(r=this.transformPayload(t.body,s.transformTemplate));const l=this.deliverWebhook(s,{...t,body:r});return this.updateRelayMetrics(s.id,l.success,l.latency),{...l,relayId:s.id}}findMatchingRelay(t){for(const n of this.relays.values())if(t.url.startsWith(n.sourceUrl)||n.sourceUrl==="*"||t.url.includes(n.sourceUrl)){if(n.events&&n.events.length>0){const s=t.event||t.headers["x-event"]||t.headers["x-github-event"]||"";if(!n.events.includes(s)&&s!=="")continue}return n}return null}isIpAllowed(t,n){for(const s of n)if(this.matchesCidr(t,s))return!0;return!1}matchesCidr(t,n){if(n==="*"||n===t)return!0;if(n.includes("/")){const[s,r]=n.split("/"),l=parseInt(r,10),c=s.split("."),d=t.split(".");if(c.length!==4||d.length!==4)return!1;const h=Math.floor(l/8);for(let p=0;p<h;p++)if(c[p]!==d[p])return!1;return!0}return t===n}verifySignature(t,n,s){const r=t.headers[s.toLowerCase()]||t.headers[s]||t.headers["x-signature"]||t.headers["x-hub-signature-256"];return r?(typeof t.body=="string"?t.body:JSON.stringify(t.body),r.length>0&&n.length>0):!1}transformPayload(t,n){try{let s=n;if(s.includes("{{raw}}")){const r=typeof t=="string"?t:JSON.stringify(t);s=s.replace(/\{\{raw\}\}/g,r)}if(s.includes("{{json}}")){const r=typeof t=="string"?JSON.parse(t):t;s=s.replace(/\{\{json\}\}/g,JSON.stringify(r))}try{return JSON.parse(s)}catch{return s}}catch{return t}}deliverWebhook(t,n){const s=t.maxRetryAttempts||this.config.maxRetryAttempts||3,r=t.retryDelay||this.config.retryDelay||5,l=t.timeout||this.config.timeout||30,c=this.config.enableRetryOnFailure!==!1,d=t.retryBackoff||"exponential";let h=0,p,g;const m=Date.now();for(;h<s;){h++;const S=this.simulateHttpRequest(t.targetUrl,n,l);if(S.success){const C=`delivery-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,R={id:C,relayId:t.id,event:n.event||"unknown",payload:typeof n.body=="string"?n.body:JSON.stringify(n.body),status:"success",timestamp:new Date().toISOString(),attempts:h,responseCode:S.statusCode};return this.deliveries.set(C,R),{success:!0,status:S.statusCode||200,latency:Date.now()-m,deliveryId:C,attempts:h}}if(p=S.error,g=S.statusCode,!c||h>=s)break;this.calculateRetryDelay(h,r,d)}const v=`delivery-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,w={id:v,relayId:t.id,event:n.event||"unknown",payload:typeof n.body=="string"?n.body:JSON.stringify(n.body),status:"failed",timestamp:new Date().toISOString(),attempts:h,responseCode:g,error:p};return this.deliveries.set(v,w),{success:!1,status:g||500,latency:Date.now()-m,deliveryId:v,attempts:h,error:p||"Delivery failed after all retry attempts"}}simulateHttpRequest(t,n,s){const r=10+Math.random()*40,l=5+Math.random()*95,c=Math.random()<.05;if(Math.random()<.02)return{success:!1,statusCode:504,error:"Request timeout",latency:s*1e3};if(c){const h=[500,502,503,429],p=h[Math.floor(Math.random()*h.length)];return{success:!1,statusCode:p,error:`HTTP ${p} error`,latency:r+l}}return{success:!0,statusCode:200,latency:r+l}}calculateRetryDelay(t,n,s){switch(s){case"exponential":return n*Math.pow(2,t-1);case"linear":return n*t;case"constant":default:return n}}updateRelayMetrics(t,n,s){let r=this.relayMetrics.get(t);r||(r={totalRequests:0,successfulDeliveries:0,failedDeliveries:0,totalRetries:0,averageLatency:0,totalLatency:0,lastRequestTime:0},this.relayMetrics.set(t,r)),r.totalRequests++,r.totalLatency+=s,r.averageLatency=r.totalLatency/r.totalRequests,r.lastRequestTime=Date.now(),n?r.successfulDeliveries++:r.failedDeliveries++}getDeliveries(t){const n=Array.from(this.deliveries.values());return t?n.filter(s=>s.relayId===t):n}getRelayMetrics(t){return this.relayMetrics.get(t)}getAllRelayMetrics(){return new Map(this.relayMetrics)}getRelay(t){return this.relays.get(t)}getAllRelays(){return Array.from(this.relays.values())}}class SN{keys=new Map;config={};maxMemoryBytes=256*1024*1024;currentMemoryUsage=0;metrics={totalKeys:0,keysByType:{string:0,hash:0,list:0,set:0,zset:0,stream:0},memoryUsage:0,memoryUsagePercent:0,operationsPerSecond:0,hitCount:0,missCount:0,hitRate:0,expiredKeys:0,evictedKeys:0,connectedClients:0};operationCount=0;lastMetricsUpdate=Date.now();operationHistory=[];clusterSlots=new Map;clusterNodes=[];initialize(t){if(this.config={...t},this.keys.clear(),this.currentMemoryUsage=0,this.operationCount=0,this.lastMetricsUpdate=Date.now(),this.operationHistory=[],t.maxMemory&&(this.maxMemoryBytes=this.parseMemorySize(t.maxMemory)),t.enableCluster&&t.clusterNodes&&(this.clusterNodes=[...t.clusterNodes],this.initializeClusterSlots()),t.keys)for(const n of t.keys)this.setKey(n.key,n.type,n.value,n.ttl);this.updateMetrics()}parseMemorySize(t){const n=t.match(/^(\d+)([kmg]?b?)$/i);if(!n)return 256*1024*1024;const s=parseInt(n[1]);switch(n[2].toLowerCase()){case"kb":return s*1024;case"mb":return s*1024*1024;case"gb":return s*1024*1024*1024;default:return s}}initializeClusterSlots(){if(this.clusterNodes.length===0)return;const t=Math.floor(16384/this.clusterNodes.length);let n=0;for(let s=0;s<this.clusterNodes.length;s++){const r=s===this.clusterNodes.length-1?16383:n+t-1;for(let l=n;l<=r;l++)this.clusterSlots.set(l,this.clusterNodes[s]);n=r+1}}getClusterSlot(t){const n=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935];let s=0;for(let r=0;r<t.length;r++){const l=t.charCodeAt(r);s=(s<<8^n[(s>>8^l)&255])&65535}return s%16384}isKeyForThisNode(t){if(!this.config.enableCluster||this.clusterNodes.length===0)return!0;const n=this.getClusterSlot(t);return this.clusterSlots.get(n),!0}executeCommand(t,n){const s=Date.now(),r=t.toUpperCase();try{let l;switch(r){case"GET":l=this.get(n[0]);break;case"SET":l=this.set(n[0],n[1],n[2]?parseInt(n[2]):void 0);break;case"DEL":l=this.del(n);break;case"EXISTS":l=this.exists(n);break;case"EXPIRE":l=this.expire(n[0],parseInt(n[1]));break;case"TTL":l=this.ttl(n[0]);break;case"KEYS":l=this.keys(n[0]||"*");break;case"HGET":l=this.hget(n[0],n[1]);break;case"HSET":l=this.hset(n[0],n.slice(1));break;case"HGETALL":l=this.hgetall(n[0]);break;case"HDEL":l=this.hdel(n[0],n.slice(1));break;case"HKEYS":l=this.hkeys(n[0]);break;case"HVALS":l=this.hvals(n[0]);break;case"LPUSH":l=this.lpush(n[0],n.slice(1));break;case"RPUSH":l=this.rpush(n[0],n.slice(1));break;case"LPOP":l=this.lpop(n[0]);break;case"RPOP":l=this.rpop(n[0]);break;case"LLEN":l=this.llen(n[0]);break;case"LRANGE":l=this.lrange(n[0],parseInt(n[1]),parseInt(n[2]));break;case"SADD":l=this.sadd(n[0],n.slice(1));break;case"SREM":l=this.srem(n[0],n.slice(1));break;case"SMEMBERS":l=this.smembers(n[0]);break;case"SISMEMBER":l=this.sismember(n[0],n[1]);break;case"SCARD":l=this.scard(n[0]);break;case"ZADD":l=this.zadd(n[0],n.slice(1));break;case"ZREM":l=this.zrem(n[0],n.slice(1));break;case"ZRANGE":l=this.zrange(n[0],parseInt(n[1]),parseInt(n[2]));break;case"ZSCORE":l=this.zscore(n[0],n[1]);break;case"ZCARD":l=this.zcard(n[0]);break;case"PING":l="PONG";break;case"INFO":l=this.info(n[0]);break;case"DBSIZE":l=this.dbsize();break;default:return{success:!1,error:`Unknown command: ${t}`,latency:Date.now()-s}}const c=Date.now()-s;return this.recordOperation(),{success:!0,value:l,latency:c}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Unknown error",latency:Date.now()-s}}}recordOperation(){this.operationCount++,this.operationHistory.push({timestamp:Date.now()}),this.operationHistory.length>1e3&&this.operationHistory.shift()}get(t){if(!this.isKeyForThisNode(t))throw new Error("MOVED - key belongs to different node");const n=this.keys.get(t);return n?this.isExpired(n)?(this.deleteKey(t),this.metrics.missCount++,null):(this.metrics.hitCount++,typeof n.value=="string"?n.value:JSON.stringify(n.value)):(this.metrics.missCount++,null)}set(t,n,s){if(!this.isKeyForThisNode(t))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();const r=this.keys.get(t);r&&(this.currentMemoryUsage-=this.calculateKeySize(r));const l={key:t,type:"string",value:n,ttl:s!==void 0?s:r?.ttl,expiresAt:s!==void 0&&s>0?Date.now()+s*1e3:r?.expiresAt,size:this.estimateSize(n)};return this.keys.set(t,l),this.currentMemoryUsage+=this.calculateKeySize(l),"OK"}del(t){let n=0;for(const s of t)this.deleteKey(s)&&n++;return n}exists(t){let n=0;for(const s of t){const r=this.keys.get(s);r&&!this.isExpired(r)&&n++}return n}expire(t,n){const s=this.keys.get(t);return s?this.isExpired(s)?(this.deleteKey(t),0):(s.ttl=n,s.expiresAt=n>0?Date.now()+n*1e3:void 0,1):0}ttl(t){const n=this.keys.get(t);if(!n)return-2;if(this.isExpired(n))return this.deleteKey(t),-2;if(!n.expiresAt)return-1;const s=Math.floor((n.expiresAt-Date.now())/1e3);return s>0?s:-2}keys(t){const n=this.patternToRegex(t),s=[];for(const[r,l]of this.keys.entries()){if(this.isExpired(l)){this.deleteKey(r);continue}n.test(r)&&s.push(r)}return s}hget(t,n){const s=this.keys.get(t);return!s||s.type!=="hash"?null:this.isExpired(s)?(this.deleteKey(t),null):s.value[n]||null}hset(t,n){if(!this.isKeyForThisNode(t))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();let s=this.keys.get(t);(!s||s.type!=="hash")&&(s&&(this.currentMemoryUsage-=this.calculateKeySize(s)),s={key:t,type:"hash",value:{},size:0});const r=s.value;let l=0;for(let c=0;c<n.length;c+=2){const d=n[c],h=n[c+1];r[d]||l++,r[d]=h}return s.size=this.estimateSize(JSON.stringify(r)),this.keys.set(t,s),this.currentMemoryUsage+=this.calculateKeySize(s),l}hgetall(t){const n=this.keys.get(t);return!n||n.type!=="hash"?{}:this.isExpired(n)?(this.deleteKey(t),{}):{...n.value}}hdel(t,n){const s=this.keys.get(t);if(!s||s.type!=="hash")return 0;if(this.isExpired(s))return this.deleteKey(t),0;const r=s.value;let l=0;for(const c of n)r[c]&&(delete r[c],l++);return l>0&&(s.size=this.estimateSize(JSON.stringify(r)),this.keys.set(t,s)),l}hkeys(t){const n=this.keys.get(t);return!n||n.type!=="hash"?[]:this.isExpired(n)?(this.deleteKey(t),[]):Object.keys(n.value)}hvals(t){const n=this.keys.get(t);return!n||n.type!=="hash"?[]:this.isExpired(n)?(this.deleteKey(t),[]):Object.values(n.value)}lpush(t,n){if(!this.isKeyForThisNode(t))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();let s=this.keys.get(t);(!s||s.type!=="list")&&(s&&(this.currentMemoryUsage-=this.calculateKeySize(s)),s={key:t,type:"list",value:[],size:0});const r=s.value;return r.unshift(...n),s.size=this.estimateSize(JSON.stringify(r)),this.keys.set(t,s),this.currentMemoryUsage+=this.calculateKeySize(s),r.length}rpush(t,n){if(!this.isKeyForThisNode(t))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();let s=this.keys.get(t);(!s||s.type!=="list")&&(s&&(this.currentMemoryUsage-=this.calculateKeySize(s)),s={key:t,type:"list",value:[],size:0});const r=s.value;return r.push(...n),s.size=this.estimateSize(JSON.stringify(r)),this.keys.set(t,s),this.currentMemoryUsage+=this.calculateKeySize(s),r.length}lpop(t){const n=this.keys.get(t);if(!n||n.type!=="list")return null;if(this.isExpired(n))return this.deleteKey(t),null;const s=n.value;if(s.length===0)return null;const r=s.shift();return n.size=this.estimateSize(JSON.stringify(s)),this.keys.set(t,n),r}rpop(t){const n=this.keys.get(t);if(!n||n.type!=="list")return null;if(this.isExpired(n))return this.deleteKey(t),null;const s=n.value;if(s.length===0)return null;const r=s.pop();return n.size=this.estimateSize(JSON.stringify(s)),this.keys.set(t,n),r}llen(t){const n=this.keys.get(t);return!n||n.type!=="list"?0:this.isExpired(n)?(this.deleteKey(t),0):n.value.length}lrange(t,n,s){const r=this.keys.get(t);if(!r||r.type!=="list")return[];if(this.isExpired(r))return this.deleteKey(t),[];const l=r.value,c=l.length,d=n<0?Math.max(0,c+n):Math.min(n,c),h=s<0?Math.max(0,c+s):Math.min(s,c-1);return l.slice(d,h+1)}sadd(t,n){if(!this.isKeyForThisNode(t))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();let s=this.keys.get(t);(!s||s.type!=="set")&&(s&&(this.currentMemoryUsage-=this.calculateKeySize(s)),s={key:t,type:"set",value:new Set,size:0});const r=s.value;let l=0;for(const c of n)r.has(c)||(r.add(c),l++);return s.size=this.estimateSize(JSON.stringify(Array.from(r))),this.keys.set(t,s),this.currentMemoryUsage+=this.calculateKeySize(s),l}srem(t,n){const s=this.keys.get(t);if(!s||s.type!=="set")return 0;if(this.isExpired(s))return this.deleteKey(t),0;const r=s.value;let l=0;for(const c of n)r.has(c)&&(r.delete(c),l++);return l>0&&(s.size=this.estimateSize(JSON.stringify(Array.from(r))),this.keys.set(t,s)),l}smembers(t){const n=this.keys.get(t);return!n||n.type!=="set"?[]:this.isExpired(n)?(this.deleteKey(t),[]):Array.from(n.value)}sismember(t,n){const s=this.keys.get(t);return!s||s.type!=="set"?0:this.isExpired(s)?(this.deleteKey(t),0):s.value.has(n)?1:0}scard(t){const n=this.keys.get(t);return!n||n.type!=="set"?0:this.isExpired(n)?(this.deleteKey(t),0):n.value.size}zadd(t,n){if(!this.isKeyForThisNode(t))throw new Error("MOVED - key belongs to different node");this.checkMemoryAndEvict();let s=this.keys.get(t);(!s||s.type!=="zset")&&(s&&(this.currentMemoryUsage-=this.calculateKeySize(s)),s={key:t,type:"zset",value:new Map,size:0});const r=s.value;let l=0;for(let c=0;c<n.length;c+=2){const d=parseFloat(n[c]),h=n[c+1];r.has(h)||l++,r.set(h,d)}return s.size=this.estimateSize(JSON.stringify(Array.from(r.entries()))),this.keys.set(t,s),this.currentMemoryUsage+=this.calculateKeySize(s),l}zrem(t,n){const s=this.keys.get(t);if(!s||s.type!=="zset")return 0;if(this.isExpired(s))return this.deleteKey(t),0;const r=s.value;let l=0;for(const c of n)r.has(c)&&(r.delete(c),l++);return l>0&&(s.size=this.estimateSize(JSON.stringify(Array.from(r.entries()))),this.keys.set(t,s)),l}zrange(t,n,s){const r=this.keys.get(t);if(!r||r.type!=="zset")return[];if(this.isExpired(r))return this.deleteKey(t),[];const l=r.value,c=Array.from(l.entries()).sort((g,m)=>g[1]-m[1]),d=c.length,h=n<0?Math.max(0,d+n):Math.min(n,d),p=s<0?Math.max(0,d+s):Math.min(s,d-1);return c.slice(h,p+1).map(g=>g[0])}zscore(t,n){const s=this.keys.get(t);return!s||s.type!=="zset"?null:this.isExpired(s)?(this.deleteKey(t),null):s.value.get(n)??null}zcard(t){const n=this.keys.get(t);return!n||n.type!=="zset"?0:this.isExpired(n)?(this.deleteKey(t),0):n.value.size}info(t){const n=this.getMetrics();return`# Server
redis_version:7.2.0
redis_mode:${this.config.enableCluster?"cluster":"standalone"}

# Memory
used_memory:${n.memoryUsage}
used_memory_human:${this.formatBytes(n.memoryUsage)}
maxmemory:${this.maxMemoryBytes}
maxmemory_human:${this.formatBytes(this.maxMemoryBytes)}
maxmemory_policy:${this.config.maxMemoryPolicy||"noeviction"}
mem_fragmentation_ratio:1.0

# Stats
total_keys:${n.totalKeys}
expired_keys:${n.expiredKeys}
evicted_keys:${n.evictedKeys}
keyspace_hits:${n.hitCount}
keyspace_misses:${n.missCount}

# Cluster
cluster_enabled:${this.config.enableCluster?1:0}
`}dbsize(){return this.cleanupExpiredKeys(),this.keys.size}setKey(t,n,s,r){const l={key:t,type:n,value:s,ttl:r!==void 0?r:-1,expiresAt:r!==void 0&&r>0?Date.now()+r*1e3:void 0,size:this.estimateSize(typeof s=="string"?s:JSON.stringify(s))};this.keys.set(t,l),this.currentMemoryUsage+=this.calculateKeySize(l)}deleteKey(t){const n=this.keys.get(t);return n?(this.currentMemoryUsage-=this.calculateKeySize(n),this.keys.delete(t),!0):!1}isExpired(t){return t.expiresAt?Date.now()>=t.expiresAt:!1}cleanupExpiredKeys(){let t=0;for(const[n,s]of this.keys.entries())this.isExpired(s)&&(this.deleteKey(n),t++);t>0&&(this.metrics.expiredKeys+=t)}checkMemoryAndEvict(){if(this.currentMemoryUsage<=this.maxMemoryBytes)return;const t=this.config.maxMemoryPolicy||"noeviction";if(t==="noeviction")return;const n=this.selectKeysToEvict(t);let s=0;for(const r of n)if(this.deleteKey(r),s++,this.currentMemoryUsage<=this.maxMemoryBytes*.9)break;s>0&&(this.metrics.evictedKeys+=s)}selectKeysToEvict(t){const n=Array.from(this.keys.keys());switch(t){case"allkeys-lru":case"allkeys-lfu":case"allkeys-random":return n;case"volatile-lru":case"volatile-lfu":case"volatile-ttl":case"volatile-random":return n.filter(s=>{const r=this.keys.get(s);return r&&r.expiresAt!==void 0});default:return[]}}calculateKeySize(t){if(t.size)return t.size;let n=0;return typeof t.value=="string"?n=Buffer.byteLength(t.value,"utf8"):n=Buffer.byteLength(JSON.stringify(t.value),"utf8"),Buffer.byteLength(t.key,"utf8")+n+100}estimateSize(t){return Buffer.byteLength(t,"utf8")}patternToRegex(t){const n=t.replace(/[.+^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*").replace(/\?/g,".");return new RegExp(`^${n}$`)}formatBytes(t){if(t===0)return"0B";const n=1024,s=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(n));return Math.round(t/Math.pow(n,r)*100)/100+s[r]}getMetrics(){return this.cleanupExpiredKeys(),this.updateMetrics(),{...this.metrics}}updateMetrics(){const t=Date.now();(t-this.lastMetricsUpdate)/1e3;const n={string:0,hash:0,list:0,set:0,zset:0,stream:0};for(const c of this.keys.values())n[c.type]++;const s=this.operationHistory.filter(c=>c.timestamp>t-1e3).length,r=this.metrics.hitCount+this.metrics.missCount,l=r>0?this.metrics.hitCount/r:0;this.metrics={totalKeys:this.keys.size,keysByType:n,memoryUsage:this.currentMemoryUsage,memoryUsagePercent:this.maxMemoryBytes>0?this.currentMemoryUsage/this.maxMemoryBytes*100:0,operationsPerSecond:s,hitCount:this.metrics.hitCount,missCount:this.metrics.missCount,hitRate:l,expiredKeys:this.metrics.expiredKeys,evictedKeys:this.metrics.evictedKeys,connectedClients:1},this.lastMetricsUpdate=t}getAllKeys(){return this.cleanupExpiredKeys(),Array.from(this.keys.values())}getKey(t){const n=this.keys.get(t);if(n&&this.isExpired(n)){this.deleteKey(t);return}return n}syncKeysFromConfig(t){const n=new Map;for(const s of t)n.set(s.key,s);for(const[s,r]of this.keys.entries());for(const s of t){const r=this.keys.get(s.key);if(!r)this.setKey(s.key,s.type,s.value,s.ttl);else if(r.type!==s.type||JSON.stringify(r.value)!==JSON.stringify(s.value)||r.ttl!==s.ttl){this.currentMemoryUsage-=this.calculateKeySize(r);const l={...s,expiresAt:s.ttl!==void 0&&s.ttl>0?Date.now()+s.ttl*1e3:void 0,size:this.estimateSize(typeof s.value=="string"?s.value:JSON.stringify(s.value))};this.keys.set(s.key,l),this.currentMemoryUsage+=this.calculateKeySize(l)}}this.updateMetrics()}}class MN{config={};nodes=new Map;keyspaces=new Map;tables=new Map;data=new Map;metrics={totalNodes:0,healthyNodes:0,totalKeyspaces:0,totalTables:0,totalRows:0,totalSize:0,readLatency:0,writeLatency:0,readOperationsPerSecond:0,writeOperationsPerSecond:0,pendingCompactions:0,readConsistencyViolations:0,writeConsistencyViolations:0,hintedHandoffs:0};operationHistory=[];lastMetricsUpdate=Date.now();BASE_READ_LATENCY=2;BASE_WRITE_LATENCY=3;NETWORK_LATENCY_PER_NODE=1;REPLICATION_LATENCY_FACTOR=.5;initialize(t){if(this.config={...t},this.nodes.clear(),this.keyspaces.clear(),this.tables.clear(),this.data.clear(),this.operationHistory=[],this.lastMetricsUpdate=Date.now(),t.nodes&&t.nodes.length>0)for(const n of t.nodes)this.nodes.set(n.address,{...n});else{const n=[{address:"127.0.0.1:9042",status:"up",tokens:256,load:0},{address:"127.0.0.2:9042",status:"up",tokens:256,load:0},{address:"127.0.0.3:9042",status:"up",tokens:256,load:0}];for(const s of n)this.nodes.set(s.address,s)}if(t.keyspaces&&t.keyspaces.length>0)for(const n of t.keyspaces)this.keyspaces.set(n.name,{...n});else{const n={name:"system",replication:t.defaultReplicationFactor||3,replicationStrategy:"NetworkTopologyStrategy",durableWrites:!0};this.keyspaces.set("system",n)}if(t.tables&&t.tables.length>0)for(const n of t.tables){const s=`${n.keyspace}.${n.name}`;this.tables.set(s,{...n}),this.data.has(s)||this.data.set(s,[])}this.updateMetrics()}executeCQL(t,n){const s=Date.now(),r=n||this.config.defaultConsistencyLevel||"QUORUM";try{const l=t.trim().toUpperCase();return l.startsWith("SELECT")?this.executeSelect(t,r,s):l.startsWith("INSERT")?this.executeInsert(t,r,s):l.startsWith("UPDATE")?this.executeUpdate(t,r,s):l.startsWith("DELETE")?this.executeDelete(t,r,s):l.startsWith("CREATE KEYSPACE")?this.executeCreateKeyspace(t,s):l.startsWith("CREATE TABLE")?this.executeCreateTable(t,s):{success:!1,error:`Unsupported query type: ${t.substring(0,20)}...`,latency:Date.now()-s}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Unknown error",latency:Date.now()-s}}}executeSelect(t,n,s){const r=t.match(/FROM\s+([\w.]+)/i);if(!r)return{success:!1,error:"Invalid SELECT query: table not found",latency:Date.now()-s};const l=r[1].trim(),c=l.includes(".")?l:`system.${l}`,d=this.tables.get(c);if(!d)return{success:!1,error:`Table ${l} not found`,latency:Date.now()-s};const h=this.getReplicationFactor(d.keyspace),p=this.getReplicasForConsistency(n,h,"read"),g=Array.from(this.nodes.values()).filter(j=>j.status==="up").length;if(p>g)return this.metrics.readConsistencyViolations++,{success:!1,error:`Not enough healthy nodes for consistency level ${n}`,latency:Date.now()-s,consistency:n};const m=this.data.get(c)||[],v=this.BASE_READ_LATENCY,w=this.calculateConsistencyLatency(n,h,"read"),S=p*this.NETWORK_LATENCY_PER_NODE,C=v+w+S+Math.random()*2;this.recordOperation("read");let R=m;const E=t.match(/LIMIT\s+(\d+)/i);if(E){const j=parseInt(E[1]);R=m.slice(0,j)}return{success:!0,rows:R,rowCount:R.length,latency:C,consistency:n,replicasQueried:p}}executeInsert(t,n,s){const r=t.match(/INTO\s+([\w.]+)/i);if(!r)return{success:!1,error:"Invalid INSERT query: table not found",latency:Date.now()-s};const l=r[1].trim(),c=l.includes(".")?l:`system.${l}`,d=this.tables.get(c);if(!d)return{success:!1,error:`Table ${l} not found`,latency:Date.now()-s};const h=this.getReplicationFactor(d.keyspace),p=this.getReplicasForConsistency(n,h,"write"),g=Array.from(this.nodes.values()).filter(j=>j.status==="up").length;if(p>g)return this.metrics.writeConsistencyViolations++,this.metrics.hintedHandoffs+=p-g,{success:!1,error:`Not enough healthy nodes for consistency level ${n}`,latency:Date.now()-s,consistency:n};const m=this.BASE_WRITE_LATENCY,v=this.calculateConsistencyLatency(n,h,"write"),w=p*this.NETWORK_LATENCY_PER_NODE,S=(p-1)*this.REPLICATION_LATENCY_FACTOR,C=m+v+w+S+Math.random()*2,R=this.data.get(c)||[],E={id:Date.now(),data:"inserted"};return R.push(E),this.data.set(c,R),d.rows!==void 0&&(d.rows=R.length),this.recordOperation("write"),this.updateMetrics(),{success:!0,rowCount:1,latency:C,consistency:n,replicasQueried:p}}executeUpdate(t,n,s){return this.executeInsert(t,n,s)}executeDelete(t,n,s){return this.executeInsert(t,n,s)}executeCreateKeyspace(t,n){const s=t.match(/CREATE\s+KEYSPACE\s+(\w+)/i);if(!s)return{success:!1,error:"Invalid CREATE KEYSPACE query",latency:Date.now()-n};const r=s[1],l=t.match(/REPLICATION\s*=\s*\{[^}]*['"]replication_factor['"]\s*:\s*(\d+)/i)||t.match(/REPLICATION\s*=\s*\{[^}]*replication_factor\s*:\s*(\d+)/i),c=l?parseInt(l[1]):this.config.defaultReplicationFactor||3,d={name:r,replication:c,replicationStrategy:t.includes("NetworkTopologyStrategy")?"NetworkTopologyStrategy":"SimpleStrategy",durableWrites:!t.match(/durable_writes\s*=\s*false/i)};return this.keyspaces.set(r,d),this.updateMetrics(),{success:!0,latency:Date.now()-n}}executeCreateTable(t,n){const s=t.match(/CREATE\s+TABLE\s+(?:IF\s+NOT\s+EXISTS\s+)?([\w.]+)/i);if(!s)return{success:!1,error:"Invalid CREATE TABLE query",latency:Date.now()-n};const r=s[1].trim(),l=r.includes(".")?r:`system.${r}`,[c,d]=l.split(".");if(!this.keyspaces.has(c))return{success:!1,error:`Keyspace ${c} does not exist`,latency:Date.now()-n};const h={name:d,keyspace:c,rows:0,size:0};return this.tables.set(l,h),this.data.set(l,[]),this.updateMetrics(),{success:!0,latency:Date.now()-n}}getReplicationFactor(t){return this.keyspaces.get(t)?.replication||this.config.defaultReplicationFactor||3}getReplicasForConsistency(t,n,s){switch(t){case"ONE":case"LOCAL_ONE":return 1;case"QUORUM":case"LOCAL_QUORUM":return Math.floor(n/2)+1;case"ALL":return n;case"EACH_QUORUM":return n;default:return Math.floor(n/2)+1}}calculateConsistencyLatency(t,n,s){const r=this.getReplicasForConsistency(t,n,s);switch(t){case"ONE":case"LOCAL_ONE":return 0;case"QUORUM":case"LOCAL_QUORUM":return(r-1)*.5;case"ALL":return(r-1)*1;default:return(r-1)*.5}}recordOperation(t){this.operationHistory.push({timestamp:Date.now(),type:t}),this.operationHistory.length>1e3&&this.operationHistory.shift()}updateMetrics(){const t=Date.now(),n=Array.from(this.nodes.values()),s=this.operationHistory.filter(w=>w.timestamp>t-1e3),r=s.filter(w=>w.type==="read"),l=s.filter(w=>w.type==="write");let c=0,d=0;for(const w of this.tables.values())c+=w.rows||0,d+=w.size||0;const h=n.filter(w=>w.status==="up").length,p=this.config.defaultReplicationFactor||3,g=this.config.defaultConsistencyLevel||"QUORUM",m=this.getReplicasForConsistency(g,p,"read"),v=this.getReplicasForConsistency(g,p,"write");this.metrics={totalNodes:n.length,healthyNodes:h,totalKeyspaces:this.keyspaces.size,totalTables:this.tables.size,totalRows:c,totalSize:d,readLatency:this.BASE_READ_LATENCY+this.calculateConsistencyLatency(g,p,"read")+m*this.NETWORK_LATENCY_PER_NODE,writeLatency:this.BASE_WRITE_LATENCY+this.calculateConsistencyLatency(g,p,"write")+v*this.NETWORK_LATENCY_PER_NODE+(v-1)*this.REPLICATION_LATENCY_FACTOR,readOperationsPerSecond:r.length,writeOperationsPerSecond:l.length,pendingCompactions:this.config.enableCompaction?Math.floor(c/1e4):0,readConsistencyViolations:this.metrics.readConsistencyViolations,writeConsistencyViolations:this.metrics.writeConsistencyViolations,hintedHandoffs:this.metrics.hintedHandoffs},this.lastMetricsUpdate=t}getMetrics(){return this.updateMetrics(),{...this.metrics}}syncFromConfig(t){if(t.nodes)for(const n of t.nodes){const s=this.nodes.get(n.address);s?(s.status=n.status,s.load=n.load):this.nodes.set(n.address,{...n})}if(t.keyspaces)for(const n of t.keyspaces)this.keyspaces.set(n.name,{...n});if(t.tables)for(const n of t.tables){const s=`${n.keyspace}.${n.name}`,r=this.tables.get(s);r?(r.rows=n.rows,r.size=n.size):(this.tables.set(s,{...n}),this.data.has(s)||this.data.set(s,[]))}this.config={...this.config,...t},this.updateMetrics()}getKeyspaces(){return Array.from(this.keyspaces.values())}getTables(){return Array.from(this.tables.values())}getNodes(){return Array.from(this.nodes.values())}}class EN{nodes=[];connections=[];metrics=new Map;connectionMetrics=new Map;isRunning=!1;simulationTime=0;baseTime=Date.now();pausedTime=0;updateInterval=100;intervalId=null;latencyHistory=new Map;connectionLatencyHistory=new Map;HISTORY_SIZE=500;rabbitMQRoutingEngines=new Map;lastRabbitMQUpdate=new Map;activeMQRoutingEngines=new Map;lastActiveMQUpdate=new Map;sqsRoutingEngines=new Map;lastSQSUpdate=new Map;azureServiceBusRoutingEngines=new Map;lastAzureServiceBusUpdate=new Map;pubSubRoutingEngines=new Map;lastPubSubUpdate=new Map;kongRoutingEngines=new Map;apigeeRoutingEngines=new Map;mulesoftRoutingEngines=new Map;graphQLGatewayRoutingEngines=new Map;lastGraphQLGatewayUpdate=new Map;bffRoutingEngines=new Map;webhookRelayRoutingEngines=new Map;redisRoutingEngines=new Map;cassandraRoutingEngines=new Map;postgresConnectionPools=new Map;constructor(){this.initializeMetrics()}calculatePercentile(t,n){if(t.length===0)return 0;const s=n/100*(t.length-1),r=Math.floor(s),l=Math.ceil(s),c=s-r;return r===l?t[r]:t[r]*(1-c)+t[l]*c}updateLatencyPercentiles(t,n,s){let r=this.latencyHistory.get(t);if(r||(r=[],this.latencyHistory.set(t,r)),r.push(n),r.length>this.HISTORY_SIZE&&r.shift(),r.length>0){const l=[...r].sort((c,d)=>c-d);s.latencyP50=this.calculatePercentile(l,50),s.latencyP99=this.calculatePercentile(l,99)}}updateConnectionLatencyPercentiles(t,n,s){let r=this.connectionLatencyHistory.get(t);if(r||(r=[],this.connectionLatencyHistory.set(t,r)),r.push(n),r.length>this.HISTORY_SIZE&&r.shift(),r.length>0){const l=[...r].sort((c,d)=>c-d);s.latencyP50=this.calculatePercentile(l,50),s.latencyP99=this.calculatePercentile(l,99)}}initialize(t,n){this.nodes=t,this.connections=n,this.initializeMetrics();for(const s of t)s.type==="rabbitmq"&&this.initializeRabbitMQRoutingEngine(s),s.type==="activemq"&&this.initializeActiveMQRoutingEngine(s),s.type==="aws-sqs"&&this.initializeSQSRoutingEngine(s),s.type==="azure-service-bus"&&this.initializeAzureServiceBusRoutingEngine(s),s.type==="gcp-pubsub"&&this.initializePubSubRoutingEngine(s),s.type==="kong"&&this.initializeKongRoutingEngine(s),s.type==="apigee"&&this.initializeApigeeRoutingEngine(s),s.type==="mulesoft"&&this.initializeMuleSoftRoutingEngine(s),s.type==="graphql-gateway"&&this.initializeGraphQLGatewayRoutingEngine(s),s.type==="bff-service"&&this.initializeBFFRoutingEngine(s),s.type==="webhook-relay"&&this.initializeWebhookRelayRoutingEngine(s),s.type==="postgres"&&this.initializePostgreSQLConnectionPool(s),s.type==="redis"&&this.initializeRedisRoutingEngine(s),s.type==="cassandra"&&this.initializeCassandraRoutingEngine(s);for(const s of t)if(s.type==="postgres"){const r=this.postgresConnectionPools.get(s.id);if(r){const l=s.data.config;r.updateConfig({maxConnections:l.maxConnections||100,minConnections:l.minConnections||0,idleTimeout:l.idleTimeout||3e5,maxLifetime:l.maxLifetime||36e5,connectionTimeout:l.connectionTimeout||5e3})}}un.initialize(t,n)}updateNodesAndConnections(t,n){this.nodes=t,this.connections=n;for(const l of t)this.metrics.has(l.id)||this.metrics.set(l.id,this.createDefaultMetrics(l.id,l.type)),l.type==="rabbitmq"&&this.initializeRabbitMQRoutingEngine(l),l.type==="activemq"&&this.initializeActiveMQRoutingEngine(l),l.type==="aws-sqs"&&this.initializeSQSRoutingEngine(l),l.type==="azure-service-bus"&&this.initializeAzureServiceBusRoutingEngine(l),l.type==="gcp-pubsub"&&this.initializePubSubRoutingEngine(l),l.type==="kong"&&this.initializeKongRoutingEngine(l),l.type==="apigee"&&this.initializeApigeeRoutingEngine(l),l.type==="mulesoft"&&this.initializeMuleSoftRoutingEngine(l),l.type==="graphql-gateway"&&this.initializeGraphQLGatewayRoutingEngine(l),l.type==="bff-service"&&this.initializeBFFRoutingEngine(l),l.type==="webhook-relay"&&this.initializeWebhookRelayRoutingEngine(l);const s=new Set(t.map(l=>l.id));for(const[l]of this.metrics.entries())s.has(l)||(this.metrics.delete(l),this.rabbitMQRoutingEngines.delete(l),this.activeMQRoutingEngines.delete(l),this.sqsRoutingEngines.delete(l),this.azureServiceBusRoutingEngines.delete(l),this.pubSubRoutingEngines.delete(l),this.kongRoutingEngines.delete(l),this.apigeeRoutingEngines.delete(l),this.mulesoftRoutingEngines.delete(l),this.graphQLGatewayRoutingEngines.delete(l),this.bffRoutingEngines.delete(l),this.webhookRelayRoutingEngines.delete(l),this.redisRoutingEngines.delete(l),this.graphQLGatewayRoutingEngines.delete(l),this.lastRabbitMQUpdate.delete(l),this.lastActiveMQUpdate.delete(l),this.lastSQSUpdate.delete(l),this.lastAzureServiceBusUpdate.delete(l),this.lastPubSubUpdate.delete(l),this.lastGraphQLGatewayUpdate.delete(l));for(const l of n)this.connectionMetrics.has(l.id)||this.connectionMetrics.set(l.id,this.createDefaultConnectionMetrics(l));const r=new Set(n.map(l=>l.id));for(const[l]of this.connectionMetrics.entries())r.has(l)||this.connectionMetrics.delete(l);un.updateNodesAndConnections(t,n)}start(){this.isRunning||(this.isRunning=!0,this.baseTime=Date.now()-this.pausedTime,un.start(),this.intervalId=setInterval(()=>{this.simulate()},this.updateInterval))}stop(){this.isRunning&&(this.isRunning=!1,this.pausedTime=this.simulationTime,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),un.stop())}resetSimulation(){this.stop(),this.simulationTime=0,this.pausedTime=0,this.baseTime=Date.now(),this.initializeMetrics()}simulate(){this.simulationTime=Date.now()-this.baseTime;const t=Date.now();for(const[n,s]of this.rabbitMQRoutingEngines.entries()){const r=this.lastRabbitMQUpdate.get(n)||t,l=t-r;l>0&&(s.processConsumption(l),this.lastRabbitMQUpdate.set(n,t))}for(const[n,s]of this.activeMQRoutingEngines.entries()){const r=this.lastActiveMQUpdate.get(n)||t,l=t-r;l>0&&(s.processConsumption(l),this.lastActiveMQUpdate.set(n,t))}for(const[n,s]of this.sqsRoutingEngines.entries()){const r=this.lastSQSUpdate.get(n)||t,l=t-r;l>0&&(s.processConsumption(l),this.lastSQSUpdate.set(n,t))}for(const[n,s]of this.azureServiceBusRoutingEngines.entries()){const r=this.lastAzureServiceBusUpdate.get(n)||t,l=t-r;l>0&&(s.processConsumption(l),this.lastAzureServiceBusUpdate.set(n,t))}for(const[n,s]of this.pubSubRoutingEngines.entries()){const r=this.lastPubSubUpdate.get(n)||t,l=t-r;l>0&&(s.processConsumption(l),this.lastPubSubUpdate.set(n,t))}for(const n of this.nodes)this.updateComponentMetrics(n);for(const n of this.connections)this.updateConnectionMetrics(n)}updateComponentMetrics(t){const n=t.data.config||{},s=this.metrics.get(t.id)||this.createDefaultMetrics(t.id,t.type),r=this.connections.some(h=>h.target===t.id),l=this.connections.some(h=>h.source===t.id);if(!(r||l))s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0,s.customMetrics={};else switch(t.type){case"kafka":this.simulateKafka(t,n,s,r);break;case"rabbitmq":this.simulateRabbitMQ(t,n,s,r);break;case"activemq":this.simulateActiveMQ(t,n,s,r);break;case"aws-sqs":this.simulateSQS(t,n,s,r);break;case"azure-service-bus":this.simulateAzureServiceBus(t,n,s,r);break;case"gcp-pubsub":this.simulatePubSub(t,n,s,r);break;case"postgres":case"mongodb":case"redis":case"cassandra":this.simulateDatabase(t,n,s,r);break;case"nginx":this.simulateNginx(t,n,s,r);break;case"docker":case"kubernetes":this.simulateInfrastructure(t,n,s,r);break;case"rest":case"grpc":case"websocket":this.simulateAPI(t,n,s,r);break;case"kong":this.simulateKong(t,n,s,r);break;case"apigee":this.simulateApigee(t,n,s,r);break;case"mulesoft":this.simulateMuleSoft(t,n,s,r);break;case"bff-service":this.simulateBFF(t,n,s,r);break}this.applyCascadeEffects(t,s);const d=ur.applyStateEffects(t.id,{throughput:s.throughput,latency:s.latency,errorRate:s.errorRate,utilization:s.utilization});s.throughput=d.throughput,s.latency=d.latency,s.errorRate=d.errorRate,s.utilization=d.utilization,this.updateLatencyPercentiles(t.id,s.latency,s),s.timestamp=Date.now(),this.metrics.set(t.id,s)}applyCascadeEffects(t,n){const s=this.connections.filter(g=>g.target===t.id);if(s.length===0)return;let r=0,l=0,c=0;const d=n.latency;for(const g of s){const m=this.metrics.get(g.source),v=this.connectionMetrics.get(g.id);if(!m||!v)continue;const w=v.throughputDependency||.5;c+=w;const S=m.errorRate*w*.3;r+=S*w;const R=Math.min(m.latency,500)*w*.2;l+=R*w,(m.errorRate>.5||m.utilization>.95)&&(r+=.1*w,l+=100*w)}c>0&&(r/=c,l/=c),l=Math.min(l,500),n.errorRate=Math.min(1,n.errorRate+r),n.latency=d+l;const p=1e4;n.latency=Math.min(n.latency,p),l>50&&(n.utilization=Math.min(1,n.utilization+.1)),r>.1&&(n.throughput=n.throughput*(1-r*.5))}updateConnectionMetrics(t){const n=this.metrics.get(t.source),s=this.metrics.get(t.target);if(!n||!s)return;const r=this.connectionMetrics.get(t.id)||{id:t.id,source:t.source,target:t.target,traffic:0,latency:0,errorRate:0,utilization:0,timestamp:Date.now(),throughputDependency:0,backpressure:0,bottleneck:!1,effectiveThroughput:0,congestion:0},l=this.nodes.find(h=>h.id===t.source),c=this.nodes.find(h=>h.id===t.target),d=l?.data.config?.avgPayloadSize||1024;r.traffic=n.throughput*d/1024,r.latency=this.calculateConnectionLatency(t,n,s),r.errorRate=n.errorRate*.1,this.calculateInteractionMetrics(t,r,n,s,l,c),this.updateConnectionLatencyPercentiles(t.id,r.latency,r),r.timestamp=Date.now(),this.connectionMetrics.set(t.id,r)}calculateInteractionMetrics(t,n,s,r,l,c){const d=t.data||{},p=(d.bandwidthMbps||1e3)*1024*1024/8;this.getComponentCapacity(l);const g=this.getComponentCapacity(c),m=s.throughput,v=l?.data.config?.avgPayloadSize||1024,w=m*v,S=Math.min(w,p),C=g*v,R=Math.min(S,C);n.effectiveThroughput=R/v;const j=this.connections.filter(ee=>ee.target===t.target).reduce((ee,oe)=>{const ce=this.metrics.get(oe.source);return ee+(ce?.throughput||0)},0);n.throughputDependency=j>0?m/j:0;const N=r.utilization,T=w/p,k=m/g,U=(d.packetLossPercent||0)/100;n.backpressure=Math.min(1,N*.4+T*.3+k*.2+U*.1);const I=w>p*.8,q=m>g*.8,te=n.backpressure>.7;n.bottleneck=I||q||te;const se=this.getBaseLatency(t.type),le=Math.max(0,n.latency-se)/se;n.congestion=Math.min(1,T*.4+le*.3+U*.3),n.utilization=Math.min(1,n.effectiveThroughput/g)}getComponentCapacity(t){if(!t)return 1e3;const n=t.data.config||{};switch(t.type){case"kafka":case"rabbitmq":case"activemq":return n.throughputMsgs||1e3;case"postgres":case"mongodb":case"redis":return n.maxConnections?n.maxConnections*10:1e3;case"nginx":case"rest":case"grpc":case"websocket":return n.requestsPerSecond||1e3;case"docker":case"kubernetes":return(n.workerThreads||1)*500;default:return 1e3}}getBaseLatency(t){return{sync:5,async:2,http:10,grpc:5,websocket:3}[t]||10}simulateKafka(t,n,s,r){const l=t.data.config,c=l?.brokers||["localhost:9092"],d=l?.topics||[],h=l?.consumerGroups||[],p=d.length||n.topicCount||5,g=d.reduce((D,L)=>D+(L.partitions||3),0)||n.partitions||3,m=d.length>0?d.reduce((D,L)=>D+(L.replication||1),0)/d.length:n.replicationFactor||1,v=this.connections.filter(D=>D.target===t.id);let w=0;for(const D of v){const L=this.metrics.get(D.source);L&&(w+=L.throughput||0)}const S=n.throughputMsgs||Math.max(1e3,w);if(!r&&S<=0){if(s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0,d.length>0)for(const D of d)D.messages=D.messages||0,D.size=D.size||0;for(const D of h)D.lag=0;s.customMetrics={topics:p,partitions:g,replication:Math.round(m*10)/10,brokers:c.length,consumer_groups:h.length,total_lag:0};return}const C=.2*Math.sin(this.simulationTime/1e3);s.throughput=S*(1+C);const R=3,E=Math.min(g/10,10),j=Math.max(1,(m-1)*2),N=Math.max(0,(m-1)*1),T=this.calculateCompressionOverhead(d);if(s.latency=R+E+j+N+T,c.length>1){const D=Math.min(5,c.length*.5);s.latency+=D}const k=this.calculateUnderReplicatedPartitions(d,c.length),U=m>1?(m-1)*5e-4:0,I=k>0?k*.001:0,q=l?.acls||[];let te=0,se=0;for(const D of v){const L=this.nodes.find(X=>X.id===D.source);if(!L)continue;const Y=L.data.config||{},he=Y.messaging?.producerId||Y.clientId||`User:${L.id.slice(0,8)}`,_=Y.messaging?.topic||d[0]?.name||"default-topic";if(!this.checkACLPermission(q,he,"Topic",_,"Write")){const X=this.metrics.get(D.source);X&&(se+=X.throughput*.9,te+=.45)}}se>0&&(s.throughput=Math.max(0,s.throughput-se)),s.errorRate=Math.max(0,Math.min(.1,U+I+te+1e-4));const ee=Math.min(1,s.throughput/1e4),oe=Math.min(1,g/200);s.utilization=Math.min(1,ee*.7+oe*.3);const ce=n.avgPayloadSize||1024,ue=this.updateInterval/1e3;for(const D of d){const L=s.throughput/p,Y=L*ue;D.messages=(D.messages||0)+Y;const he=this.getCompressionRatio(D.config?.compressionType),_=Y*ce*he;if(D.size=(D.size||0)+_,D.config?.retentionMs&&D.config.retentionMs>0){const $=D.config.retentionMs/1e3,W=L*$;if(D.messages>W){const F=D.messages-W;D.messages=W,D.size=Math.max(0,D.size-F*ce*he)}}if(D.config?.retentionBytes&&D.config.retentionBytes>0&&D.size>D.config.retentionBytes){const $=1-D.config.retentionBytes/D.size;D.size=D.config.retentionBytes,D.messages=Math.max(0,D.messages*(1-$))}if((D.config?.cleanupPolicy==="compact"||D.config?.cleanupPolicy==="delete,compact")&&this.simulationTime%3e5<this.updateInterval){const W=Math.round(D.messages*.85),F=D.messages-W;D.messages=W,D.size=Math.max(0,D.size-F*ce*he)}if(D.config?.minInsyncReplicas){const $=D.config.minInsyncReplicas,X=this.getAverageISRCount(D,c.length);if(X<$){const W=$-X;s.errorRate+=W*.01}}if(D.config?.maxMessageBytes&&ce>D.config.maxMessageBytes){const $=Math.min(.1,(ce-D.config.maxMessageBytes)/D.config.maxMessageBytes);s.errorRate+=$*.5}}let z=0;for(const D of h){const L=d.find(st=>st.name===D.topic);if(!L)continue;const Y=D.members||1,he=L.partitions||1,_=this.assignPartitionsToConsumers(Y,he),$=300;let X=0;for(const st of _){const We=st.partitions.length;X+=We*$}const W=Math.min(X,Y*$),F=s.throughput/p||0,ae=D.id||`Group:${D.id}`,B=this.checkACLPermission(q,ae,"Topic",D.topic,"Read"),V=this.checkACLPermission(q,ae,"Group",D.id,"Read");let pe=W;(!B||!V)&&(pe=0);const me=F,ye=pe,ve=Math.max(0,(me-ye)*ue),Pe=D.lag||0,Ue=Math.max(0,Pe+ve-ye*ue);D.lag=Ue,z+=Ue,this.isRebalancing(t.id,D.id)&&(D.lag=Math.min(Ue*1.2,Ue+me*ue*.3),z+=Ue*.2)}s.customMetrics={topics:p,partitions:g,replication:Math.round(m*10)/10,brokers:c.length,consumer_groups:h.length,total_lag:Math.round(z),avg_topic_messages:p>0?Math.round(d.reduce((D,L)=>D+(L.messages||0),0)/p):0,total_topic_size_mb:Math.round(d.reduce((D,L)=>D+(L.size||0),0)/1024/1024*100)/100,under_replicated_partitions:k}}calculateCompressionOverhead(t){if(t.length===0)return 0;const n={uncompressed:0,gzip:2,snappy:.5,lz4:.3,zstd:1};let s=0,r=0;for(const l of t){const c=l.config?.compressionType||"gzip",d=n[c]||0;d>0&&(s+=d,r++)}return r>0?s/r:0}getCompressionRatio(t){return{uncompressed:1,gzip:.3,snappy:.5,lz4:.4,zstd:.25}[t||"gzip"]||.3}calculateUnderReplicatedPartitions(t,n){let s=0;for(const r of t){const l=r.replication||1,c=r.partitions||1;if(r.partitionInfo&&Array.isArray(r.partitionInfo))for(const d of r.partitionInfo){const h=l;(d.isr?.length||d.replicas?.length||1)<h&&s++}else l>n&&(s+=c*Math.max(0,1-n/l)),Math.random()<.05&&l>1&&(s+=c*.1)}return Math.round(s)}assignPartitionsToConsumers(t,n){if(t===0||n===0)return[];const s=[],r=Math.floor(n/t),l=n%t;let c=0;for(let d=0;d<t;d++){const h=[],p=r+(d<l?1:0);for(let g=0;g<p;g++)c<n&&(h.push(c),c++);s.push({consumerId:d,partitions:h})}return s}consumerGroupMemberCounts=new Map;rebalancingGroups=new Map;isRebalancing(t,n){const s=`${t}:${n}`,r=this.rebalancingGroups.get(s);if(r&&Date.now()<r)return!0;const l=this.getCurrentGroupMembers(t,n),c=this.consumerGroupMemberCounts.get(s);return c!==void 0&&l!==c?(this.rebalancingGroups.set(s,Date.now()+2e3),this.consumerGroupMemberCounts.set(s,l),!0):((c===void 0||l!==c)&&this.consumerGroupMemberCounts.set(s,l),!1)}getCurrentGroupMembers(t,n){const s=this.nodes.find(d=>d.id===t);return s&&(s.data.config?.consumerGroups||[]).find(d=>d.id===n)?.members||0}getAverageISRCount(t,n){if(!t.partitionInfo||!Array.isArray(t.partitionInfo)||t.partitionInfo.length===0){const l=t.replication||1;return Math.min(l,n)*.95}let s=0,r=0;for(const l of t.partitionInfo){const c=l.isr?.length||l.replicas?.length||1;s+=c,r++}return r>0?s/r:1}checkACLPermission(t,n,s,r,l,c){if(!t||t.length===0)return!0;const d=n.includes(":")?n:`User:${n}`,h=t.filter(m=>{const v=m.principal||"";if(v!==d&&v!=="*"&&!d.includes(v)||m.resourceType!==s)return!1;const w=m.resourcePatternType||"Literal",S=m.resourceName||"";let C=!1;switch(w){case"Literal":C=S===r||S==="*";break;case"Prefixed":if(S==="*")C=!0;else if(S.endsWith("*")){const R=S.slice(0,-1);C=r.startsWith(R)}else C=r.startsWith(S);break;case"Match":if(S==="*")C=!0;else{const R=S.replace(/\./g,"\\.").replace(/\*/g,".*");C=new RegExp(`^${R}$`).test(r)}break;default:C=S===r||S==="*"}return!(!C||m.operation!==l&&m.operation!=="All"||m.host&&m.host!=="*"&&c&&m.host!==c)});return h.length===0||h.filter(m=>m.permission==="Deny").length>0?!1:h.filter(m=>m.permission==="Allow").length>0}simulateRabbitMQ(t,n,s,r){this.rabbitMQRoutingEngines.has(t.id)||this.initializeRabbitMQRoutingEngine(t);const l=this.rabbitMQRoutingEngines.get(t.id);if(t.data.config,!r){s.throughput=0,s.latency=2,s.errorRate=0;const N=l.getTotalQueueDepth();s.utilization=Math.min(1,N/1e5);const T=l.getAllQueueMetrics(),k=l.getActiveConnections();s.customMetrics={queue_depth:N,connections:k,replication:n.replicationFactor||1},this.updateQueueMetricsInConfig(t,T);return}const c=this.connections.filter(N=>N.target===t.id);let d=0;for(const N of c){const T=this.connectionMetrics.get(N.id);if(T){const U=T.traffic/1024;d+=U}}const h=n.throughputMsgs||d||1e3,p=n.replicationFactor||1,g=(Math.random()-.5)*.1;s.throughput=h*(1+g);const m=l.getTotalQueueDepth(),v=2,w=Math.min(50,m/1e3);s.latency=v+p*5+w+Math.random()*5;const S=5e-4,C=Math.min(.01,m/1e6);s.errorRate=S+C,s.utilization=Math.min(1,m/1e5);const R=l.getAllQueueMetrics(),E=l.getActiveConnections();let j=0;for(const N of R.values())j+=N.consumers;s.customMetrics={queue_depth:m,connections:E,replication:p,queues:R.size,consumers:j},this.updateQueueMetricsInConfig(t,R)}initializeRabbitMQRoutingEngine(t){const n=t.data.config||{},s=new oN;s.initialize({queues:n.queues||[],exchanges:n.exchanges||[{name:"amq.direct",type:"direct",durable:!0,autoDelete:!1,internal:!1},{name:"amq.topic",type:"topic",durable:!0,autoDelete:!1,internal:!1},{name:"amq.fanout",type:"fanout",durable:!0,autoDelete:!1,internal:!1}],bindings:n.bindings||[]}),this.rabbitMQRoutingEngines.set(t.id,s),this.lastRabbitMQUpdate.set(t.id,Date.now())}updateQueueMetricsInConfig(t,n){const s=t.data.config||{},r=s.queues||[];for(let l=0;l<r.length;l++){const c=r[l],d=n.get(c.name);d&&(r[l]={...c,messages:d.messages,ready:d.ready,unacked:d.unacked,consumers:d.consumers})}s.queues=r}simulateActiveMQ(t,n,s,r){this.activeMQRoutingEngines.has(t.id)||this.initializeActiveMQRoutingEngine(t);const l=this.activeMQRoutingEngines.get(t.id),c=t.data.config||{},d=c.protocol||"openwire",h=c.persistenceEnabled??!0,p=c.maxConnections||1e3,g=c.memoryLimit||1024,m=c.storeUsage||0,v=c.tempUsage||0,w=c.connections||[];if(!r){s.throughput=0,s.latency=this.getProtocolBaseLatency(d),s.errorRate=0;const W=l.getTotalQueueDepth(),F=l.getTotalTopicMessages(),ae=W+F;s.utilization=Math.min(1,ae/1e5);const B=l.getAllQueueMetrics(),V=l.getAllTopicMetrics(),pe=l.getActiveConnections();let me=0;for(const ve of B.values())me+=ve.consumerCount;let ye=0;for(const ve of V.values())ye+=ve.subscriberCount;s.customMetrics={queue_depth:W,topic_messages:F,connections:pe,queues:B.size,topics:V.size,consumers:me,subscribers:ye,memory_usage:m+v,memory_percent:g>0?(m+v)/g*100:0},this.updateActiveMQMetricsInConfig(t,B,V);return}const S=this.connections.filter(W=>W.target===t.id);let C=0;for(const W of S){const F=this.connectionMetrics.get(W.id);if(F){const B=F.traffic/1024;C+=B}}const R=n.throughputMsgs||C||1e3,E=(Math.random()-.5)*.1;s.throughput=R*(1+E);const j=l.getTotalQueueDepth(),N=l.getTotalTopicMessages(),T=j+N,k=this.getProtocolBaseLatency(d),U=h?5:0,I=Math.min(50,T/1e3),q=g>0&&m+v>g*.8?10:0;s.latency=k+U+I+q+Math.random()*5;const te=c.acls||[];let se=0,le=0;for(const W of S){const F=this.nodes.find(pe=>pe.id===W.source);if(!F)continue;const ae=F.data.config,B=ae?.messaging||{},V=ae?.username||ae?.clientId||c.username||`user-${W.source.slice(0,8)}`;if(B.queue&&!this.checkActiveMQACLPermission(te,V,`queue://${B.queue}`,"write")){const me=this.metrics.get(W.source);me&&(le+=me.throughput*.9,se+=.45)}if(B.topic&&!this.checkActiveMQACLPermission(te,V,`topic://${B.topic}`,"write")){const me=this.metrics.get(W.source);me&&(le+=me.throughput*.9,se+=.45)}}for(const W of queues)W.consumerCount&&W.consumerCount>0&&(this.checkActiveMQACLPermission(te,c.username||"admin",`queue://${W.name}`,"read")||(se+=.1));const ee=5e-4,oe=Math.min(.01,T/1e6),ce=g>0&&m+v>g?.01:0,ue=w.length>=p?.005:0;le>0&&(s.throughput=Math.max(0,s.throughput-le)),s.errorRate=Math.min(1,ee+oe+ce+ue+se);const z=Math.min(1,T/1e5),D=g>0?Math.min(1,(m+v)/g):0,L=Math.min(1,w.length/p);s.utilization=Math.max(z,D,L);const Y=l.getAllQueueMetrics(),he=l.getAllTopicMetrics(),_=l.getActiveConnections();let $=0;for(const W of Y.values())$+=W.consumerCount;let X=0;for(const W of he.values())X+=W.subscriberCount;s.customMetrics={queue_depth:j,topic_messages:N,connections:_,queues:Y.size,topics:he.size,consumers:$,subscribers:X,memory_usage:m+v,memory_percent:g>0?(m+v)/g*100:0,protocol:d},this.updateActiveMQMetricsInConfig(t,Y,he)}checkActiveMQACLPermission(t,n,s,r){if(!t||t.length===0)return!0;const l=t.filter(h=>{const p=h.principal||"";if(p!==n&&p!=="*"&&!n.includes(p))return!1;const g=h.resource||"";let m=!1;if(g==="*"||g===s)m=!0;else if(g.endsWith("*")){const S=g.slice(0,-1);m=s.startsWith(S)}else g.includes("://")?m=g===s:m=s.includes(g);if(!m)return!1;const v=(h.operation||"").toLowerCase(),w=r.toLowerCase();return!(v!==w&&v!=="all"&&v!=="*")});return l.length===0?!0:l.filter(h=>h.permission==="deny").length>0?!1:(l.filter(h=>h.permission==="allow").length>0,!0)}getProtocolBaseLatency(t){return{openwire:2,amqp:5,mqtt:8,stomp:10,ws:12}[t]||5}initializeActiveMQRoutingEngine(t){const n=t.data.config||{},s=new aN;s.initialize({queues:n.queues||[],topics:n.topics||[],subscriptions:n.subscriptions||[]}),this.activeMQRoutingEngines.set(t.id,s),this.lastActiveMQUpdate.set(t.id,Date.now())}updateActiveMQMetricsInConfig(t,n,s){const r=t.data.config||{},l=r,c=r.queues||[];for(let m=0;m<c.length;m++){const v=c[m],w=n.get(v.name);w&&(c[m]={...v,queueSize:w.queueSize,consumerCount:w.consumerCount,enqueueCount:w.enqueueCount,dequeueCount:w.dequeueCount})}r.queues=c;const d=r.topics||[];for(let m=0;m<d.length;m++){const v=d[m],w=s.get(v.name);w&&(d[m]={...v,subscriberCount:w.subscriberCount,enqueueCount:w.enqueueCount,dequeueCount:w.dequeueCount})}r.topics=d;const h=this.connections.filter(m=>m.target===t.id),p=[];for(const m of h){const v=this.nodes.find(E=>E.id===m.source);if(!v)continue;v.data.config?.messaging;const S=l.protocol||"openwire",C=this.connectionMetrics.get(m.id),R=C?Math.floor(C.traffic/1024):0;p.push({id:m.id,remoteAddress:`${v.label||v.id}`,clientId:`client-${m.source.slice(0,8)}`,userName:l.username||"admin",connectedSince:new Date().toISOString(),messageCount:R,protocol:S==="openwire"?"OpenWire":S==="amqp"?"AMQP":S==="mqtt"?"MQTT":S==="stomp"?"STOMP":S==="ws"?"WebSocket":"OpenWire"})}r.connections=p;const g=[];for(const m of d)for(const v of h){const w=this.nodes.find(R=>R.id===v.source);if(!w)continue;const C=w.data.config?.messaging||{};if(C.topic===m.name||!C.queue){const R=s.get(m.name);g.push({id:`sub-${v.id}-${m.name}`,destination:m.name,clientId:`client-${v.source.slice(0,8)}`,pendingQueueSize:0,dispatchedQueueSize:0,dispatchedCounter:R?.enqueueCount||0,enqueueCounter:R?.enqueueCount||0,dequeueCounter:R?.dequeueCount||0})}}r.subscriptions=g}simulateAzureServiceBus(t,n,s,r){this.azureServiceBusRoutingEngines.has(t.id)||this.initializeAzureServiceBusRoutingEngine(t);const l=this.azureServiceBusRoutingEngines.get(t.id),c=t.data.config||{};if(!r){s.throughput=0,s.latency=5,s.errorRate=0;const se=l.getTotalQueueDepth(),le=l.getTotalSubscriptionMessages(),ee=se+le;s.utilization=Math.min(1,ee/1e5);const oe=l.getAllQueueMetrics(),ce=l.getAllSubscriptionMetrics(),ue=l.getActiveConnections();s.customMetrics={queue_depth:se,subscription_messages:le,connections:ue,queues:c.queues?.length||0,topics:c.topics?.length||0},this.updateAzureServiceBusMetricsInConfig(t,oe,ce);return}const d=this.connections.filter(se=>se.target===t.id);let h=0;for(const se of d){const le=this.connectionMetrics.get(se.id);if(le){const oe=le.traffic/1024;h+=oe}}const p=n.throughputMsgs||h||1e3,g=(Math.random()-.5)*.1;s.throughput=p*(1+g);const m=l.getTotalQueueDepth(),v=l.getTotalSubscriptionMessages(),w=m+v,S=5,C=Math.min(50,w/1e3),R=2;s.latency=S+C+R+Math.random()*5;const E=l.getAllQueueMetrics(),j=l.getAllSubscriptionMetrics(),N=l.getActiveConnections(),T=5e-4,k=Math.min(.01,w/1e6);let U=0;for(const se of E.values())U+=se.deadLetterMessageCount||0;for(const se of j.values())U+=se.deadLetterMessageCount||0;const I=U>0?Math.min(.05,U/1e4):0;s.errorRate=Math.min(1,T+k+I),s.utilization=Math.min(1,w/1e5);let q=0;const te=c.topics||[];for(const se of te)q+=(se.subscriptions||[]).length;s.customMetrics={queue_depth:m,subscription_messages:v,dead_letter_messages:U,connections:N,queues:c.queues?.length||0,topics:c.topics?.length||0,subscriptions:q},this.updateAzureServiceBusMetricsInConfig(t,E,j)}initializeAzureServiceBusRoutingEngine(t){const n=t.data.config||{},s=new iN,r=(n.queues||[]).map(c=>({name:c.name,namespace:c.namespace||n.namespace||"archiphoenix.servicebus.windows.net",maxSizeInMegabytes:c.maxSizeInMegabytes||1024,defaultMessageTimeToLive:c.defaultMessageTimeToLive||2592e3,lockDuration:c.lockDuration||30,maxDeliveryCount:c.maxDeliveryCount||10,enablePartitioning:c.enablePartitioning||!1,enableDeadLetteringOnMessageExpiration:c.enableDeadLetteringOnMessageExpiration!==void 0?c.enableDeadLetteringOnMessageExpiration:!0,enableSessions:c.enableSessions||!1,activeMessageCount:c.activeMessageCount||0,deadLetterMessageCount:c.deadLetterMessageCount||0,scheduledMessageCount:c.scheduledMessageCount||0})),l=(n.topics||[]).map(c=>({name:c.name,namespace:c.namespace||n.namespace||"archiphoenix.servicebus.windows.net",maxSizeInMegabytes:c.maxSizeInMegabytes||1024,defaultMessageTimeToLive:c.defaultMessageTimeToLive||2592e3,enablePartitioning:c.enablePartitioning||!1,subscriptions:(c.subscriptions||[]).map(d=>({name:d.name,maxDeliveryCount:d.maxDeliveryCount||10,lockDuration:d.lockDuration||30,enableDeadLetteringOnMessageExpiration:d.enableDeadLetteringOnMessageExpiration!==void 0?d.enableDeadLetteringOnMessageExpiration:!0,activeMessageCount:d.activeMessageCount||0}))}));s.initialize({queues:r,topics:l}),this.azureServiceBusRoutingEngines.set(t.id,s),this.lastAzureServiceBusUpdate.set(t.id,Date.now())}updateAzureServiceBusMetricsInConfig(t,n,s){const r=t.data.config||{},l=r.queues||[];for(let d=0;d<l.length;d++){const h=l[d],p=n.get(h.name);p&&(l[d]={...h,activeMessageCount:p.activeMessageCount,deadLetterMessageCount:p.deadLetterMessageCount,scheduledMessageCount:p.scheduledMessageCount})}r.queues=l;const c=r.topics||[];for(let d=0;d<c.length;d++){const h=c[d],p=h.subscriptions||[];for(let g=0;g<p.length;g++){const m=p[g],v=`${h.name}/subscriptions/${m.name}`,w=s.get(v);w&&(p[g]={...m,activeMessageCount:w.activeMessageCount})}c[d]={...h,subscriptions:p}}r.topics=c}simulatePubSub(t,n,s,r){this.pubSubRoutingEngines.has(t.id)||this.initializePubSubRoutingEngine(t);const l=this.pubSubRoutingEngines.get(t.id),c=t.data.config||{},d=c.topics||[],h=c.subscriptions||[];if(!r){s.throughput=0,s.latency=3,s.errorRate=0;const z=l.getTotalTopicMessages(),D=l.getTotalUnackedMessages(),L=z+D;s.utilization=Math.min(1,L/1e5);const Y=l.getAllTopicMetrics(),he=l.getAllSubscriptionMetrics(),_=l.getActiveConnections();s.customMetrics={topic_messages:z,unacked_messages:D,connections:_,topics:d.length,subscriptions:h.length},this.updatePubSubMetricsInConfig(t,Y,he);return}const p=this.connections.filter(z=>z.target===t.id);let g=0;for(const z of p){const D=this.connectionMetrics.get(z.id);if(D){const Y=D.traffic/1024;g+=Y}}const m=n.throughputMsgs||g||1e3,v=(Math.random()-.5)*.1;s.throughput=m*(1+v);const w=l.getTotalTopicMessages(),S=l.getTotalUnackedMessages(),C=w+S,R=3,E=Math.min(15,C/1e4),j=h.filter(z=>z.pushEndpoint).length,N=j>0?2:0,T=S>0?.5:0;s.latency=R+E+N+T+Math.random()*2;const k=l.getAllTopicMetrics(),U=l.getAllSubscriptionMetrics(),I=l.getActiveConnections(),q=1e-4,te=Math.min(.001,C/5e6),se=j>0&&S>0?Math.min(.002,S/1e5):0,le=h.length>0?h.reduce((z,D)=>z+(D.ackDeadlineSeconds||10),0)/h.length:10,ee=S>0&&le<60?Math.min(.005,S/1e5):0;s.errorRate=Math.min(1,q+te+se+ee);const oe=Math.min(1,s.throughput/1e5),ce=Math.min(.3,C/5e5);s.utilization=Math.min(1,oe*.7+ce*.3);const ue=h.length-j;s.customMetrics={topic_messages:w,unacked_messages:S,connections:I,topics:d.length,subscriptions:h.length,push_subscriptions:j,pull_subscriptions:ue,total_bytes:Array.from(k.values()).reduce((z,D)=>z+D.byteCount,0)},this.updatePubSubMetricsInConfig(t,k,U)}initializePubSubRoutingEngine(t){const n=t.data.config||{},s=new lN,r=(n.topics||[]).map(c=>({name:c.name,projectId:c.projectId||n.projectId||"archiphoenix-lab",messageRetentionDuration:c.messageRetentionDuration||604800,labels:c.labels||{},messageCount:c.messageCount||0,byteCount:c.byteCount||0})),l=(n.subscriptions||[]).map(c=>({name:c.name,topic:c.topic,projectId:c.projectId||n.projectId||"archiphoenix-lab",ackDeadlineSeconds:c.ackDeadlineSeconds||10,messageRetentionDuration:c.messageRetentionDuration,enableMessageOrdering:c.enableMessageOrdering||!1,pushEndpoint:c.pushEndpoint,pushAttributes:c.pushAttributes||{},messageCount:c.messageCount||0,unackedMessageCount:c.unackedMessageCount||0}));s.initialize({topics:r,subscriptions:l}),this.pubSubRoutingEngines.set(t.id,s),this.lastPubSubUpdate.set(t.id,Date.now())}updatePubSubMetricsInConfig(t,n,s){const r=t.data.config||{},l=r.topics||[];for(let d=0;d<l.length;d++){const h=l[d],p=n.get(h.name);p&&(l[d]={...h,messageCount:p.messageCount,byteCount:p.byteCount})}r.topics=l;const c=r.subscriptions||[];for(let d=0;d<c.length;d++){const h=c[d],p=s.get(h.name);p&&(c[d]={...h,messageCount:p.messageCount,unackedMessageCount:p.unackedMessageCount})}r.subscriptions=c}simulateSQS(t,n,s,r){this.sqsRoutingEngines.has(t.id)||this.initializeSQSRoutingEngine(t);const l=this.sqsRoutingEngines.get(t.id);if(t.data.config,!r){s.throughput=0,s.latency=5,s.errorRate=0;const E=l.getTotalQueueDepth();s.utilization=Math.min(1,E/1e5);const j=l.getAllQueueMetrics(),N=l.getActiveConnections();s.customMetrics={queue_depth:E,connections:N,queues:j.size},this.updateSQSQueueMetricsInConfig(t,j);return}const c=this.connections.filter(E=>E.target===t.id);let d=0;for(const E of c){const j=this.connectionMetrics.get(E.id);if(j){const T=j.traffic/1024;d+=T}}const h=n.throughputMsgs||d||1e3,p=(Math.random()-.5)*.1;s.throughput=h*(1+p);const g=l.getTotalQueueDepth(),m=5,v=Math.min(50,g/1e3);s.latency=m+v+Math.random()*5;const w=5e-4,S=Math.min(.01,g/1e6);s.errorRate=w+S,s.utilization=Math.min(1,g/1e5);const C=l.getAllQueueMetrics(),R=l.getActiveConnections();s.customMetrics={queue_depth:g,connections:R,queues:C.size},this.updateSQSQueueMetricsInConfig(t,C)}initializeSQSRoutingEngine(t){const n=t.data.config||{},s=new rN,r=(n.queues||[]).map(l=>({name:l.name,type:l.type||"standard",region:l.region||n.defaultRegion||"us-east-1",visibilityTimeout:l.visibilityTimeout||30,messageRetention:l.messageRetention||4,delaySeconds:l.delaySeconds||0,maxReceiveCount:l.maxReceiveCount,deadLetterQueue:l.deadLetterQueue,contentBasedDedup:l.contentBasedDedup,fifoThroughputLimit:l.fifoThroughputLimit||"perQueue"}));s.initialize({queues:r}),this.sqsRoutingEngines.set(t.id,s),this.lastSQSUpdate.set(t.id,Date.now())}updateSQSQueueMetricsInConfig(t,n){const s=t.data.config||{},r=s.queues||[];for(let l=0;l<r.length;l++){const c=r[l],d=n.get(c.name);d&&(r[l]={...c,approximateMessages:d.approximateMessages,approximateMessagesNotVisible:d.approximateMessagesNotVisible,approximateMessagesDelayed:d.approximateMessagesDelayed})}s.queues=r}simulateDatabase(t,n,s,r){if(!r){if(s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0,s.customMetrics={},t.type==="postgres"){const v=this.postgresConnectionPools.get(t.id);v&&v.reset()}return}const l=n.maxConnections||100,c=n.queryLatency||10;if(t.type==="postgres"){const v=this.postgresConnectionPools.get(t.id);if(v){const S=this.connections.filter(U=>U.target===t.id).reduce((U,I)=>{const q=this.metrics.get(I.source);return U+(q?.throughput||0)},0),R=Math.min(S,l*10)*this.updateInterval/1e3;for(let U=0;U<Math.floor(R);U++){const I=v.acquireConnection("SELECT");if(I){const q=c+Math.random()*20;setTimeout(()=>{v.releaseConnection(I,q)},q)}}const E=v.getMetrics();s.throughput=E.queriesPerSecond,s.latency=E.averageQueryTime||c,s.utilization=E.utilization,s.errorRate=E.waitingConnections>0?.01:.001;const N=t.data.config.tables||[];let T=0;for(const U of N)T+=(U.indexes||[]).length;T===0&&(T=5);const k=this.calculateCacheHitRatio(t,E.queriesPerSecond);s.customMetrics={active_connections:E.activeConnections,idle_connections:E.idleConnections,waiting_connections:E.waitingConnections,total_connections:E.totalConnections,max_connections:l,indexes:T,cache_hit_ratio:k,connection_wait_time:E.connectionWaitTime};return}}if(t.type==="redis"){this.redisRoutingEngines.has(t.id)||this.initializeRedisRoutingEngine(t);const v=this.redisRoutingEngines.get(t.id),w=t.data.config;w?.keys&&v.syncKeysFromConfig(w.keys);const S=v.getMetrics(),R=this.connections.filter(T=>T.target===t.id).reduce((T,k)=>{const U=this.metrics.get(k.source);return T+(U?.throughput||0)},0);s.throughput=Math.max(S.operationsPerSecond,R);const E=.5,j=S.memoryUsagePercent/100,N=Math.min(1,S.totalKeys/1e5);s.latency=E+j*2+N*1,s.errorRate=j>.95?.01:.001,s.utilization=S.memoryUsagePercent/100,s.customMetrics={total_keys:S.totalKeys,keys_string:S.keysByType.string,keys_hash:S.keysByType.hash,keys_list:S.keysByType.list,keys_set:S.keysByType.set,keys_zset:S.keysByType.zset,keys_stream:S.keysByType.stream,memory_usage:S.memoryUsage,memory_usage_percent:S.memoryUsagePercent,operations_per_second:S.operationsPerSecond,hit_count:S.hitCount,miss_count:S.missCount,hit_rate:S.hitRate,expired_keys:S.expiredKeys,evicted_keys:S.evictedKeys,connected_clients:S.connectedClients};return}if(t.type==="cassandra"){this.cassandraRoutingEngines.has(t.id)||this.initializeCassandraRoutingEngine(t);const v=this.cassandraRoutingEngines.get(t.id),w=t.data.config;w&&v.syncFromConfig({clusterName:w.clusterName,nodes:w.nodes,keyspaces:w.keyspaces,tables:w.tables,defaultConsistencyLevel:w.consistencyLevel,defaultReplicationFactor:w.replicationFactor,enableCompaction:w.enableCompaction,compactionStrategy:w.compactionStrategy});const S=v.getMetrics(),R=this.connections.filter(k=>k.target===t.id).reduce((k,U)=>{const I=this.metrics.get(U.source);return k+(I?.throughput||0)},0);s.throughput=Math.max(S.readOperationsPerSecond+S.writeOperationsPerSecond,R);const E=S.readOperationsPerSecond+S.writeOperationsPerSecond;if(E>0){const k=S.readOperationsPerSecond/E,U=S.writeOperationsPerSecond/E;s.latency=S.readLatency*k+S.writeLatency*U}else s.latency=(S.readLatency+S.writeLatency)/2;const j=S.readConsistencyViolations+S.writeConsistencyViolations;s.errorRate=Math.min(.1,j/Math.max(1,E))||.001;const N=S.totalNodes>0?(S.totalNodes-S.healthyNodes)/S.totalNodes:0,T=Math.min(1,S.pendingCompactions/100);s.utilization=Math.min(1,N*.7+T*.3),s.customMetrics={total_nodes:S.totalNodes,healthy_nodes:S.healthyNodes,total_keyspaces:S.totalKeyspaces,total_tables:S.totalTables,total_rows:S.totalRows,total_size_gb:S.totalSize/(1024*1024*1024),read_latency_ms:S.readLatency,write_latency_ms:S.writeLatency,read_ops_per_sec:S.readOperationsPerSecond,write_ops_per_sec:S.writeOperationsPerSecond,pending_compactions:S.pendingCompactions,read_consistency_violations:S.readConsistencyViolations,write_consistency_violations:S.writeConsistencyViolations,hinted_handoffs:S.hintedHandoffs};return}let d=n.indexCount||5;t.type==="mongodb"&&(d=(t.data.config?.collections||[]).reduce((S,C)=>S+(C.indexes?.length||0),0),d===0&&(d=1));const p=this.connections.filter(v=>v.target===t.id).reduce((v,w)=>{const S=this.metrics.get(w.source);return v+(S?.throughput||0)},0),g=Math.min(l,Math.floor(p/10)||Math.floor(l*.3));s.throughput=g*(1e3/(c+Math.random()*20));const m=Math.min(.3,d*.02);if(s.latency=c+g/l*50*(1-m),s.errorRate=.001,s.utilization=g/l,s.customMetrics={active_connections:g,max_connections:l,indexes:d,cache_hit_ratio:Math.random()*.8+.2},t.type==="mongodb"){const v=t.data.config,w=v?.collections||[],S=w.filter(N=>N.validation&&N.validation.validationLevel!=="off").length;if(S>0){const N=Math.min(.05,S*.01);s.errorRate=Math.max(s.errorRate,N)}const C=v?.enableReplicaSet||!1,R=v?.replicaSetMembers||[];if(C&&R.length>1){const N=R.length,T=Math.min(.3,(N-1)*.1);s.errorRate=Math.max(0,s.errorRate*(1-T)),s.latency=s.latency*(1+.05*(N-1))}const E=v?.enableSharding||!1,j=v?.shardConfig;if(E&&j?.shards){const N=j.shards.length,T=1+(N-1)*.3;s.throughput=s.throughput*T,s.latency=s.latency*(1+.02*(N-1))}s.customMetrics={...s.customMetrics,collections:w.length,collections_with_validation:S,total_documents:w.reduce((N,T)=>N+(T.documentCount||0),0),replica_set_enabled:C,replica_members:C?R.length:0,sharding_enabled:E,shard_count:E&&j?.shards?.length||0}}}simulateNginx(t,n,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=n.workerThreads||4,c=n.requestsPerSecond||1e4,d=.5*Math.sin(this.simulationTime/2e3)+.5;s.throughput=c*d,s.latency=1+(1-d)*4,s.errorRate=1e-5,s.utilization=Math.min(1,s.throughput/c*(l/4)),s.customMetrics={worker_threads:l,active_connections:Math.floor(s.throughput*.1),cache_hits:Math.floor(Math.random()*1e4),cache_misses:Math.floor(Math.random()*1e3)}}simulateInfrastructure(t,n,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=n.workerThreads||1;s.throughput=100*l+Math.random()*50,s.latency=50+Math.random()*100,s.errorRate=1e-4,s.utilization=Math.random()*.8,s.customMetrics={replicas:l,cpu_percent:Math.random()*80,memory_percent:Math.random()*70}}simulateAPI(t,n,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=n.requestsPerSecond||100,c=n.responseLatency||50,d=Math.sin(this.simulationTime/1500)*.1+1;s.throughput=l*d,s.latency=c+Math.random()*30,s.errorRate=.005,s.utilization=s.throughput/l*Math.random(),s.customMetrics={rps:l,p50_latency:Math.round(c*.5),p99_latency:Math.round(c*2),errors:Math.round(s.throughput*s.errorRate)}}simulateKong(t,n,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=this.kongRoutingEngines.get(t.id);if(!l){this.simulateAPI(t,n,s,r);return}const c=n||{},d=c.requestsPerSecond||n.requestsPerSecond||450,h=l.getStats(),p=.5*Math.sin(this.simulationTime/2e3)+.5;let g=d*p;const m=(c.plugins||[]).filter(E=>E.name==="rate-limiting"&&E.enabled);if(m.length>0){const E=Math.min(...m.map(j=>j.config?.minute||1e3));g=Math.min(g,E*p)}s.throughput=g;const v=2+Math.random()*3,w=h.plugins*.5,S=10+Math.random()*40;s.latency=v+w+S;const C=.001,R=h.consumers>0?.02:0;s.errorRate=Math.min(1,C+R),s.utilization=Math.min(1,s.throughput/d),s.customMetrics={services:h.services,routes:h.routes,upstreams:h.upstreams,consumers:h.consumers,plugins:h.plugins,requests_per_second:d,gateway_latency:v+w,upstream_latency:S}}simulateApigee(t,n,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=this.apigeeRoutingEngines.get(t.id);if(!l){this.simulateAPI(t,n,s,r);return}const c=n||{},d=c.proxies||[],h=c.requestsPerSecond||n.requestsPerSecond||500,p=l.getStats(),g=.5*Math.sin(this.simulationTime/2e3)+.5;let m=h*g;const v=d.filter(N=>N.status!=="undeployed");if(v.length>0){const N=v.filter(k=>k.quota&&k.quotaInterval).map(k=>k.quota/k.quotaInterval*g);if(N.length>0){const k=Math.min(...N);m=Math.min(m,k)}const T=v.filter(k=>k.spikeArrest&&k.spikeArrest>0).map(k=>k.spikeArrest);if(T.length>0){const k=Math.min(...T);m=Math.min(m,k*g)}}s.throughput=m;const w=3+Math.random()*2,S=p.policies*.8,C=15+Math.random()*35;s.latency=w+S+C;const R=.001,E=p.policies>0?.015:0,j=p.totalErrors>0?p.totalErrors/Math.max(p.totalRequests,1)*.1:0;s.errorRate=Math.min(1,R+E+j),s.utilization=Math.min(1,s.throughput/h),s.customMetrics={proxies:p.proxies,policies:p.policies,total_requests:p.totalRequests,total_errors:p.totalErrors,avg_latency:Math.round(p.avgLatency),requests_per_second:h,gateway_latency:w+S,upstream_latency:C}}simulateMuleSoft(t,n,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=this.mulesoftRoutingEngines.get(t.id);if(!l){this.simulateAPI(t,n,s,r);return}const d=(n||{}).applications||[],h=l.getStats(),p=.5*Math.sin(this.simulationTime/2e3)+.5;let g=0,m=0;for(const k of d)if(k.status==="running"){const U=k.workerCount||2;m+=U,g+=U*75}g===0&&(g=100);let v=g*p;s.throughput=v;const w=5+Math.random()*10,S=h.enabledConnectors*2,C=3+Math.random()*5,R=15+Math.random()*25;s.latency=w+S+C+R;const E=.002,j=h.totalErrors>0?h.totalErrors/Math.max(h.totalRequests,1)*.15:0,N=h.runningApplications>0?.005:.01;s.errorRate=Math.min(1,E+j+N);const T=m>0?Math.min(1,s.throughput/(m*75)):.5;s.utilization=Math.min(1,T),s.customMetrics={applications:h.applications,running_applications:h.runningApplications,connectors:h.connectors,enabled_connectors:h.enabledConnectors,total_requests:h.totalRequests,total_errors:h.totalErrors,avg_latency:Math.round(h.avgLatency),total_workers:m,runtime_latency:w,connector_latency:R,transformation_latency:C}}simulateBFF(t,n,s,r){if(!r){s.throughput=0,s.latency=0,s.errorRate=0,s.utilization=0;return}const l=this.bffRoutingEngines.get(t.id);if(!l){this.simulateAPI(t,n,s,r);return}const c=n||{},d=c.endpoints||[],h=c.backends||[],p=this.connections.filter(te=>te.target===t.id);let g=0;for(const te of p){const se=this.connectionMetrics.get(te.id);if(se){const ee=se.traffic/2048;g+=ee}}const m=n.requestsPerSecond||g||100,v=l.getStats(),w=.3*Math.sin(this.simulationTime/2e3)+.7;s.throughput=m*w;let S=v.averageLatency||100;const C=5+Math.random()*10,R=v.cacheHitRate||0,E=R*.8,j=S*(1-E)+C;s.latency=j+Math.random()*20;const N=v.totalRequests>0?v.totalErrors/v.totalRequests:.005,T=.001;s.errorRate=Math.min(1,N+T);const k=c.maxConcurrentRequests||100,U=s.throughput*(s.latency/1e3);s.utilization=Math.min(1,U/k);const I=d.reduce((te,se)=>te+(se.requests||0),0),q=h.filter(te=>te.status==="connected").length;s.customMetrics={endpoints:d.length,backends:h.length,connected_backends:q,total_requests:v.totalRequests,total_errors:v.totalErrors,avg_latency:Math.round(v.averageLatency),cache_hit_rate:Math.round(R*100)/100,endpoint_requests:I,aggregation_overhead:Math.round(C),concurrent_requests:Math.round(U)}}initializeKongRoutingEngine(t){const n=t.data.config||{},s=new cN;s.initialize({services:n.services||[],routes:n.routes||[],upstreams:n.upstreams||[],consumers:n.consumers||[],plugins:n.plugins||[]}),this.kongRoutingEngines.set(t.id,s)}initializeApigeeRoutingEngine(t){const n=t.data.config||{},s=new uN;s.initialize({organization:n.organization,environment:n.environment,proxies:n.proxies||[],policies:n.policies||[]}),this.apigeeRoutingEngines.set(t.id,s)}initializeMuleSoftRoutingEngine(t){const n=t.data.config||{},s=new dN,r=(n.applications||[]).map(c=>({name:c.name,runtimeVersion:c.runtimeVersion||"4.6.0",workerCount:c.workerCount||2,status:c.status||"stopped",connectors:c.connectors||[],errorStrategy:c.errorStrategy||"continue",reconnectionStrategy:c.reconnectionStrategy||"exponential",auditLogging:c.auditLogging||!1,flows:c.flows||[]})),l=(n.connectors||[]).map(c=>({name:c.name,type:c.type||"api",enabled:c.enabled!==!1,config:c.config||{},targetComponentType:c.targetComponentType,targetComponentId:c.targetComponentId}));s.initialize({organization:n.organization,environment:n.environment,applications:r,connectors:l}),this.mulesoftRoutingEngines.set(t.id,s)}initializeGraphQLGatewayRoutingEngine(t){const n=t.data.config||{},s=new xN;s.initialize({services:n.services||[],federation:n.federation,cacheTtl:n.cacheTtl,persistQueries:n.persistQueries,subscriptions:n.subscriptions,enableIntrospection:n.enableIntrospection,enableQueryComplexityAnalysis:n.enableQueryComplexityAnalysis,enableRateLimiting:n.enableRateLimiting,maxQueryDepth:n.maxQueryDepth,maxQueryComplexity:n.maxQueryComplexity,endpoint:n.endpoint}),this.graphQLGatewayRoutingEngines.set(t.id,s),this.lastGraphQLGatewayUpdate.set(t.id,Date.now())}initializeBFFRoutingEngine(t){const n=t.data.config||{},s=new wN;let r=null,l="";if(n.cacheMode==="redis"){const c=this.connections.find(d=>(d.source===t.id||d.target===t.id)&&this.nodes.find(h=>h.id===(d.source===t.id?d.target:d.source))?.type==="redis");if(c){const d=this.nodes.find(h=>h.id===(c.source===t.id?c.target:c.source));d&&d.type==="redis"&&(this.redisRoutingEngines.has(d.id)||this.initializeRedisRoutingEngine(d),r=this.redisRoutingEngines.get(d.id),l=d.id)}}s.initialize({backends:n.backends||[],endpoints:n.endpoints||[],enableCaching:n.enableCaching??!0,enableRequestBatching:n.enableRequestBatching??!1,enableResponseCompression:n.enableResponseCompression??!0,defaultTimeout:n.defaultTimeout||5e3,maxConcurrentRequests:n.maxConcurrentRequests||100,cacheMode:n.cacheMode||"memory",cacheTtl:n.cacheTtl||5,fallbackEnabled:n.fallbackEnabled??!0,fallbackComponent:n.fallbackComponent,redisEngine:r||void 0,redisNodeId:l||void 0}),this.bffRoutingEngines.set(t.id,s)}initializeWebhookRelayRoutingEngine(t){const n=t.data.config||{},s=new CN;s.initialize({relays:n.relays||[],enableRetryOnFailure:n.enableRetryOnFailure??!0,enableSignatureVerification:n.enableSignatureVerification??!0,enableRequestLogging:n.enableRequestLogging??!0,maxRetryAttempts:n.maxRetryAttempts||3,retryDelay:n.retryDelay||5,timeout:n.timeout||30}),this.webhookRelayRoutingEngines.set(t.id,s)}initializeRedisRoutingEngine(t){const n=t.data.config||{},s=new SN;s.initialize({host:n.host||"localhost",port:n.port||6379,password:n.password||"",database:n.database||0,maxMemory:n.maxMemory||"256mb",maxMemoryPolicy:n.maxMemoryPolicy||"noeviction",enablePersistence:n.enablePersistence??!0,persistenceType:n.persistenceType||"rdb",enableCluster:n.enableCluster??!1,clusterNodes:n.clusterNodes||[],keys:n.keys||[]}),this.redisRoutingEngines.set(t.id,s)}initializeCassandraRoutingEngine(t){const n=t.data.config||{},s=new MN;s.initialize({clusterName:n.clusterName||"archiphoenix-cluster",nodes:n.nodes||[],keyspaces:n.keyspaces||[],tables:n.tables||[],defaultConsistencyLevel:n.consistencyLevel||"QUORUM",defaultReplicationFactor:n.replicationFactor||3,enableCompaction:n.enableCompaction??!0,compactionStrategy:n.compactionStrategy||"SizeTieredCompactionStrategy",datacenter:n.datacenter||"dc1"}),this.cassandraRoutingEngines.set(t.id,s)}calculateConnectionLatency(t,n,s){const l={sync:5,async:2,http:10,grpc:5,websocket:3}[t.type]||10,c=n.latency||0,d=s.latency||0,h=t.data||{},p=h.latencyMs||0,g=(h.jitterMs||0)*(Math.random()-.5),m=2+Math.random()*8+p+g;return l+(c+d)/2+m}createDefaultMetrics(t,n){return{id:t,type:n,throughput:0,latency:0,errorRate:0,utilization:0,timestamp:Date.now()}}createDefaultConnectionMetrics(t){return{id:t.id,source:t.source,target:t.target,traffic:0,latency:0,errorRate:0,utilization:0,timestamp:Date.now(),throughputDependency:0,backpressure:0,bottleneck:!1,effectiveThroughput:0,congestion:0}}initializeMetrics(){this.metrics.clear(),this.connectionMetrics.clear(),this.latencyHistory.clear(),this.connectionLatencyHistory.clear();for(const t of this.nodes)this.metrics.set(t.id,this.createDefaultMetrics(t.id,t.type))}getComponentMetrics(t){return this.metrics.get(t)}getRabbitMQRoutingEngine(t){return this.rabbitMQRoutingEngines.get(t)}getActiveMQRoutingEngine(t){return this.activeMQRoutingEngines.get(t)}getSQSRoutingEngine(t){return this.sqsRoutingEngines.get(t)}getAzureServiceBusRoutingEngine(t){return this.azureServiceBusRoutingEngines.get(t)}getPubSubRoutingEngine(t){return this.pubSubRoutingEngines.get(t)}getRedisRoutingEngine(t){return this.redisRoutingEngines.get(t)}getCassandraRoutingEngine(t){return this.cassandraRoutingEngines.get(t)}getKongRoutingEngine(t){return this.kongRoutingEngines.get(t)}getApigeeRoutingEngine(t){return this.apigeeRoutingEngines.get(t)}getMuleSoftRoutingEngine(t){return this.mulesoftRoutingEngines.get(t)}getGraphQLGatewayRoutingEngine(t){return this.graphQLGatewayRoutingEngines.get(t)}getBFFRoutingEngine(t){return this.bffRoutingEngines.get(t)}getWebhookRelayRoutingEngine(t){return this.webhookRelayRoutingEngines.get(t)}checkSQSIAMPolicy(t,n,s,r){if(!t||t.length===0)return!0;const l=t.filter(h=>{const p=h.principal||"";if(p!==n&&p!=="*"&&!n.includes(p))return!1;const g=h.resource||"";let m=!1;if(g==="*"||g===s)m=!0;else if(g.endsWith("*")){const w=g.slice(0,-1);m=s.startsWith(w.replace(/.*:/,""))}else if(g.includes("sqs:")||g.includes("arn:aws:sqs")){const w=g.split(":").pop()||g.split("/").pop()||"";m=w===s||w==="*"||s.includes(w)}else m=s.includes(g)||g==="*";if(!m)return!1;const v=h.action||"";return!(v!==r&&v!=="*"&&!v.includes(r))});return l.length===0?!0:l.filter(h=>h.effect==="Deny").length>0?!1:(l.filter(h=>h.effect==="Allow").length>0,!0)}checkActiveMQACLPermissionPublic(t,n,s,r){return this.checkActiveMQACLPermission(t,n,s,r)}getConnectionMetrics(t){return this.connectionMetrics.get(t)}getAllComponentMetrics(){return Array.from(this.metrics.values())}getAllConnectionMetrics(){return Array.from(this.connectionMetrics.values())}getIsRunning(){return this.isRunning}getSimulationTime(){return this.simulationTime}}const it=new EN;function RN(a,t){let n=null;return function(...r){const l=()=>{n=null,a(...r)};n!==null&&clearTimeout(n),n=setTimeout(l,t)}}class NN{logLevel;logs=[];maxLogs=100;constructor(){this.logLevel=2}debug(t,n){this.log(0,t,void 0,n)}info(t,n){this.log(1,t,void 0,n)}warn(t,n,s){this.log(2,t,n,s)}error(t,n,s){this.log(3,t,n,s)}log(t,n,s,r){if(t<this.logLevel)return;const l={level:t,message:n,error:s,timestamp:Date.now(),context:r};this.logs.push(l),this.logs.length>this.maxLogs&&this.logs.shift();const c=`[${this.getLevelName(t)}] ${n}`,d=r?{...r,error:s}:s;switch(t){case 0:console.debug(c,d||"");break;case 1:console.info(c,d||"");break;case 2:console.warn(c,d||"");break;case 3:console.error(c,d||"");break}}getLevelName(t){switch(t){case 0:return"DEBUG";case 1:return"INFO";case 2:return"WARN";case 3:return"ERROR";default:return"UNKNOWN"}}getRecentLogs(t,n=50){let s=this.logs;return t!==void 0&&(s=this.logs.filter(r=>r.level>=t)),s.slice(-n)}clearLogs(){this.logs=[]}setLogLevel(t){this.logLevel=t}}const nb=new NN,sb=(a,t,n)=>nb.warn(a,t,n),to=(a,t,n)=>nb.error(a,t,n),yc="archiphoenix_diagram",Oh=1,AN=500,TN=()=>{try{const a=localStorage.getItem(yc);if(!a)return null;const t=JSON.parse(a);return t.version!==Oh?(sb("Diagram version mismatch, using defaults"),null):t}catch(a){return to("Failed to load diagram from storage",a instanceof Error?a:new Error(String(a))),null}},jN=(a,t="My Diagram")=>{try{const n={...a,version:Oh,name:t,createdAt:localStorage.getItem(`${yc}_createdAt`)||new Date().toISOString(),updatedAt:new Date().toISOString()};localStorage.setItem(yc,JSON.stringify(n)),localStorage.setItem(`${yc}_createdAt`,n.createdAt)}catch(n){to("Failed to save diagram to storage",n instanceof Error?n:new Error(String(n)))}},ht=RN(jN,AN),kN=(a,t="diagram.json")=>{try{const n={...a,version:Oh,name:t.replace(".json",""),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},s=JSON.stringify(n,null,2),r=new Blob([s],{type:"application/json"}),l=URL.createObjectURL(r),c=document.createElement("a");c.href=l,c.download=t,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)}catch(n){to("Failed to export diagram",n instanceof Error?n:new Error(String(n)))}},DN=a=>new Promise(t=>{try{const n=new FileReader;n.onload=s=>{try{const r=s.target?.result,l=JSON.parse(r);if(!l.nodes||!l.connections||typeof l.zoom!="number"||!l.pan)throw new Error("Invalid diagram format");l.groups||(l.groups=[]),t(l)}catch(r){to("Failed to parse diagram file",r instanceof Error?r:new Error(String(r))),t(null)}},n.readAsText(a)}catch(n){to("Failed to import diagram",n instanceof Error?n:new Error(String(n))),t(null)}}),_N=50,Si=Ss((a,t)=>({past:[],future:[],canUndo:!1,canRedo:!1,pushState:n=>{a(s=>{const r=[...s.past,n];return r.length>_N&&r.shift(),{past:r,future:[],canUndo:!0,canRedo:!1}})},undo:()=>{const{past:n,future:s}=t();if(n.length===0)return null;const r=n[n.length-1],l=n.slice(0,-1);return a({past:l,future:[r,...s],canUndo:l.length>0,canRedo:!0}),r},redo:()=>{const{past:n,future:s}=t();if(s.length===0)return null;const r=s[0],l=s.slice(1);return a({past:[...n,r],future:l,canUndo:!0,canRedo:l.length>0}),r},clearHistory:()=>{a({past:[],future:[],canUndo:!1,canRedo:!1})}}));class zN{rules=new Map;allRules=[];register(t){const n=t.sourceType;this.rules.has(n)||this.rules.set(n,[]);const s=this.rules.get(n);s&&(s.push(t),this.allRules.push(t),s.sort((r,l)=>(l.priority||0)-(r.priority||0)))}registerMany(t){t.forEach(n=>this.register(n))}findRules(t,n){const s=[],r=this.rules.get(t)||[];for(const c of r)(c.targetTypes==="*"||Array.isArray(c.targetTypes)&&c.targetTypes.includes(n))&&s.push(c);const l=this.rules.get("*")||[];for(const c of l)(c.targetTypes==="*"||Array.isArray(c.targetTypes)&&c.targetTypes.includes(n))&&s.push(c);return s.sort((c,d)=>(d.priority||0)-(c.priority||0))}getAllRules(){return[...this.allRules]}getRulesForSource(t){return this.rules.get(t)||[]}clear(){this.rules.clear(),this.allRules=[]}}const ON={postgres:5432,mongodb:27017,redis:6379,cassandra:9042,clickhouse:8123,elasticsearch:9200,rest:8080,grpc:50051,graphql:4e3,websocket:8080,webhook:8080,soap:8080,nginx:80,envoy:80,haproxy:80,traefik:80,docker:2375,kubernetes:6443,kafka:9092,rabbitmq:5672,activemq:61616,"aws-sqs":9324,prometheus:9090,grafana:3e3,loki:3100,jaeger:16686,keycloak:8080,"secrets-vault":8200,crm:8080,erp:8080,"payment-gateway":443},LN={"api-gateway":9100,postgres:9187,redis:9121,"service-mesh":15014,istio:15014,envoy:9901,cdn:9101,"aws-sqs":9102};class ob{getHost(t){return t.data.label?t.data.label.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):t.id.slice(0,8)}getPort(t,n){const s=t.data.config||{};switch(n){case"main":return s.port||s.host?.split(":")[1]||ON[t.type];case"metrics":return s.metricsPort||s.metrics?.port||LN[t.type];case"admin":return s.adminPort||s.admin?.port}}getEndpoint(t,n="main"){const s=this.getHost(t),r=this.getPort(t,n);if(!r)throw new Error(`Port not found for ${t.type}:${n}`);return`${s}:${r}`}getURL(t,n="main",s="http"){const r=this.getEndpoint(t,n);return`${s}://${r}`}getConnectionMetadata(t,n,s){const r=this.getHost(t),l=this.getHost(n),c=this.getPort(t,"main"),d=this.getPort(n,"main");let h="http";return s.type==="grpc"?h="grpc":s.type==="websocket"?h="websocket":n.type==="kafka"?h="kafka":n.type==="rabbitmq"||n.type==="activemq"?h="rabbitmq":s.type==="async"?h="async":s.type==="sync"&&(h="sync"),{protocol:h,sourceHost:r,targetHost:l,sourcePort:c,targetPort:d,endpoint:d?`${l}:${d}`:void 0}}getCapabilities(t){return{defaultPort:this.getPort(t,"main"),metricsPort:this.getPort(t,"metrics"),adminPort:this.getPort(t,"admin"),getHost:n=>this.getHost(n),getPort:(n,s)=>this.getPort(n,s)}}}class PN{registry;discovery;constructor(){this.registry=new zN,this.discovery=new ob}initialize(t){this.registry.registerMany(t)}handleConnectionCreated(t,n,s,r){const l=this.registry.findRules(t.type,n.type);if(l.length===0)return{sourceUpdated:!1,targetUpdated:!1};let c=!1,d=!1;const h=this.discovery.getConnectionMetadata(t,n,s);for(const p of l)try{const g=p.updateSourceConfig(t,n,s,h);if(g&&Object.keys(g).length>0&&(r(t.id,{data:{...t.data,config:{...t.data.config,...g}}}),c=!0),p.updateTargetConfig){const m=p.updateTargetConfig(t,n,s,h);m&&Object.keys(m).length>0&&(r(n.id,{data:{...n.data,config:{...n.data.config,...m}}}),d=!0)}}catch(g){to(`Error applying rule for ${t.type} -> ${n.type}`,g instanceof Error?g:new Error(String(g)),{sourceType:t.type,targetType:n.type})}return{sourceUpdated:c,targetUpdated:d}}handleConnectionDeleted(t,n,s,r){const l=this.registry.findRules(t.type,n.type);if(l.length===0)return{sourceUpdated:!1,targetUpdated:!1};let c=!1,d=!1;const h=this.discovery.getConnectionMetadata(t,n,s);for(const p of l)try{if(p.cleanupSourceConfig){const g=p.cleanupSourceConfig(t,n,s,h);g&&Object.keys(g).length>0&&(r(t.id,{data:{...t.data,config:{...t.data.config,...g}}}),c=!0)}if(p.cleanupTargetConfig){const g=p.cleanupTargetConfig(t,n,s,h);g&&Object.keys(g).length>0&&(r(n.id,{data:{...n.data,config:{...n.data.config,...g}}}),d=!0)}}catch(g){to(`Error cleaning up rule for ${t.type} -> ${n.type}`,g instanceof Error?g:new Error(String(g)),{sourceType:t.type,targetType:n.type})}return{sourceUpdated:c,targetUpdated:d}}getDiscovery(){return this.discovery}getRegistry(){return this.registry}}function IN(a){return{sourceType:"envoy",targetTypes:["rest","grpc","graphql","websocket","soap","webhook","postgres","mongodb","redis","cassandra","clickhouse","crm","erp","payment-gateway","bpmn-engine"],priority:10,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(t.data.config||{}).clusters||[],d=c.find(m=>!m.hosts||!Array.isArray(m.hosts)?!1:m.hosts.some(v=>v.address===r.targetHost&&v.port===r.targetPort));if(d)return d.hosts.some(v=>v.address===r.targetHost&&v.port===r.targetPort)?null:{clusters:c.map(v=>v===d?{...v,hosts:[...v.hosts||[],{address:r.targetHost,port:r.targetPort}]}:v)};n.data.label||n.type;const h=`${n.type}-${n.id.slice(0,8)}-cluster`;let p="STRICT_DNS";r.protocol==="grpc"?p="STRICT_DNS":(n.type==="postgres"||n.type==="mongodb"||n.type==="redis")&&(p="STATIC_DNS");const g={name:h,type:p,hosts:[{address:r.targetHost,port:r.targetPort}],healthChecks:!0,connectTimeout:5e3,requests:0,errors:0};return{clusters:[...c,g],totalClusters:c.length+1}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function qN(a){return{sourceType:"api-gateway",targetTypes:["rest","grpc","graphql","websocket","soap","webhook"],priority:10,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(t.data.config||{}).apis||[];if(c.find(C=>C.backendUrl===`http://${r.targetHost}:${r.targetPort}`||C.backendUrl===`https://${r.targetHost}:${r.targetPort}`))return null;const p=`${n.data.label||n.type}-api`,g=`/api/${n.type}`;let m="GET";n.type==="grpc"?m="POST":n.type==="websocket"&&(m="GET");const w=`${r.protocol==="grpc","http"}://${r.targetHost}:${r.targetPort}`,S={name:p,path:g,method:m,backendUrl:w,enabled:!0,requests:0,errors:0};return{apis:[...c,S]}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function HN(a){return{sourceType:"kong",targetTypes:["rest","grpc","graphql","websocket","soap","webhook"],priority:10,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const l=t.data.config||{},c=l.services||[],d=l.routes||[],p=`${r.protocol==="grpc","http"}://${r.targetHost}:${r.targetPort}`,m=`${n.data.label||n.type}-service`;let v=c.find(E=>E.name===m||E.url===p);v||(v={id:String(c.length+1),name:m,url:p,routes:0,enabled:!0},c.push(v));const w=`/api/${n.type}`;if(d.find(E=>E.service===v.name&&E.path===w))return null;let C="GET";n.type==="grpc"?C="POST":(n.type==="websocket"||n.type==="rest"||n.type==="graphql")&&(C="GET");const R={id:String(d.length+1),path:w,method:C,service:v.name,stripPath:!0,protocols:["http","https"]};return v.routes=(v.routes||0)+1,{services:c,routes:[...d,R]}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function UN(a){return{sourceType:"service-mesh",targetTypes:"*",priority:10,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(t.data.config||{}).services||[];if(c.find(v=>v.host===r.targetHost&&v.port===r.targetPort))return null;const p=(n.data.label||n.type).toLowerCase().replace(/\s+/g,"-");let g="http";r.protocol==="grpc"?g="grpc":(n.type==="postgres"||n.type==="mongodb"||n.type==="redis")&&(g="tcp");const m={name:p,namespace:"default",host:r.targetHost,port:r.targetPort,protocol:g,enabled:!0};return{services:[...c,m]}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function BN(a){return{sourceType:"istio",targetTypes:"*",priority:10,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(t.data.config||{}).services||[];if(c.find(v=>v.host===r.targetHost&&v.port===r.targetPort))return null;const p=(n.data.label||n.type).toLowerCase().replace(/\s+/g,"-");let g="http";r.protocol==="grpc"?g="grpc":(n.type==="postgres"||n.type==="mongodb"||n.type==="redis")&&(g="tcp");const m={name:p,namespace:"default",host:r.targetHost,port:r.targetPort,protocol:g,enabled:!0};return{services:[...c,m]}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function $N(a){return{sourceType:"nginx",targetTypes:["rest","grpc","graphql","websocket","postgres","mongodb","redis","crm","erp","payment-gateway"],priority:10,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(t.data.config||{}).upstreams||[],d=`${n.type}-upstream`;let h=c.find(g=>g.name===d);if(h)return h.servers?.some(m=>(m.host===r.targetHost||m.address===`${r.targetHost}:${r.targetPort}`)&&(m.port===r.targetPort||m.address?.includes(`:${r.targetPort}`)))?null:{upstreams:c.map(m=>m.name===d?{...m,servers:[...m.servers||[],{host:r.targetHost,port:r.targetPort}]}:m)};const p={name:d,servers:[{host:r.targetHost,port:r.targetPort}],loadBalancing:"round-robin"};return{upstreams:[...c,p]}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function GN(a){return{sourceType:"haproxy",targetTypes:["rest","grpc","graphql","websocket","postgres","mongodb","redis","crm","erp","payment-gateway"],priority:10,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(t.data.config||{}).backends||[],d=`${n.type}-backend`;let h=c.find(g=>g.name===d);if(h)return h.servers?.some(m=>(m.host===r.targetHost||m.address===`${r.targetHost}:${r.targetPort}`)&&(m.port===r.targetPort||m.address?.includes(`:${r.targetPort}`)))?null:{backends:c.map(m=>m.name===d?{...m,servers:[...m.servers||[],{host:r.targetHost,port:r.targetPort}]}:m)};const p={name:d,servers:[{host:r.targetHost,port:r.targetPort}],balance:"roundrobin"};return{backends:[...c,p]}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function QN(a){return{sourceType:"traefik",targetTypes:["rest","grpc","graphql","websocket","postgres","mongodb","redis","crm","erp","payment-gateway"],priority:10,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const l=t.data.config||{},c=l.services||{},d=l.routers||{},h=`${n.type}-service`,p=`${n.type}-router`;if(c[h])return c[h].servers?.some(w=>w.url===`http://${r.targetHost}:${r.targetPort}`)?null:{services:{...c,[h]:{...c[h],servers:[...c[h].servers||[],{url:`http://${r.targetHost}:${r.targetPort}`}]}}};const m=`Host(\`${(n.data.label||n.type).toLowerCase()}.local\`)`;return{services:{...c,[h]:{loadBalancer:{servers:[{url:`http://${r.targetHost}:${r.targetPort}`}]}}},routers:{...d,[p]:{rule:m,service:h}}}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function FN(a){return{sourceType:"*",targetTypes:["postgres","mongodb","redis","cassandra","clickhouse","elasticsearch"],priority:5,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const l=t.data.config||{},c=n.type;let d={};switch(c){case"postgres":d={database:{host:r.targetHost,port:r.targetPort,database:l.database?.database||"postgres",username:l.database?.username||"postgres",password:l.database?.password||""}};break;case"mongodb":d={database:{connectionString:`mongodb://${r.targetHost}:${r.targetPort}`,database:l.database?.database||"admin"}};break;case"redis":d={database:{host:r.targetHost,port:r.targetPort,password:l.database?.password||""}};break;case"cassandra":d={database:{hosts:[`${r.targetHost}:${r.targetPort}`],keyspace:l.database?.keyspace||"system"}};break;case"clickhouse":d={database:{host:r.targetHost,port:r.targetPort,database:l.database?.database||"default"}};break;case"elasticsearch":d={database:{hosts:[`http://${r.targetHost}:${r.targetPort}`]}};break;default:return null}return d},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function VN(a){return{sourceType:"*",targetTypes:["kafka","rabbitmq","activemq","aws-sqs","azure-service-bus","gcp-pubsub"],priority:5,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const l=t.data.config||{},c=n.type;let d={};switch(c){case"kafka":d={messaging:{broker:`${r.targetHost}:${r.targetPort}`,topic:l.messaging?.topic||n.data.config?.defaultTopic||"default-topic",producerId:l.messaging?.producerId||t.id.slice(0,8)}};break;case"rabbitmq":d={messaging:{broker:`${r.targetHost}:${r.targetPort}`,exchange:l.messaging?.exchange||n.data.config?.defaultExchange||"amq.topic",routingKey:l.messaging?.routingKey||"default"}};break;case"activemq":const h=n.data.config?.queues||[],p=h.length>0&&typeof h[0]=="object"?h[0].name:h.length>0?h[0]:null;d={messaging:{broker:`${r.targetHost}:${r.targetPort}`,queue:l.messaging?.queue||p||"default-queue"}};break;case"aws-sqs":{const g=n.data.config?.queues||[],m=g.length>0&&typeof g[0]=="object"?g[0].name:g.length>0?g[0]:null,v=g.length>0&&typeof g[0]=="object"?g[0].region:n.data.config?.defaultRegion||"us-east-1";d={messaging:{queueUrl:`https://sqs.${v}.amazonaws.com/account/${m||"default-queue"}`,queueName:m||"default-queue",region:l.messaging?.region||v}};break}case"azure-service-bus":{const g=n.data.config||{},m=g.namespace||"archiphoenix.servicebus.windows.net";g.connectionString||`${m}`;const v=l.messaging?.entityType||g.entityType||"queue",w=l.messaging?.entityName||l.messaging?.queue||l.messaging?.topic||g.entityName||(v==="queue"?"events":"events-topic"),S=l.messaging?.subscriptionName||g.subscriptionName;d={messaging:{connectionString:g.connectionString||`Endpoint=sb://${m}/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=...`,namespace:m,entityType:v,queue:v==="queue"?w:void 0,topic:v==="topic"?w:void 0,subscriptionName:v==="topic"&&S?S:void 0}};break}case"gcp-pubsub":d={messaging:{projectId:l.messaging?.projectId||"default-project",topic:l.messaging?.topic||n.data.config?.defaultTopic||"default-topic"}};break;default:return null}return d},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function KN(a,t){const n=a.data.config||{};return n.metrics?.port?n.metrics.port:n.metricsPort?n.metricsPort:(a.type==="service-mesh"||a.type==="istio")&&n.metrics?.controlPlanePort?n.metrics.controlPlanePort:t.getPort(a,"metrics")}function ih(a){const t=a.data.config||{};return t.metrics?.path?t.metrics.path:t.metricsPath?t.metricsPath:a.type==="envoy"?t.metrics?.prometheusPath||"/stats/prometheus":"/metrics"}function Bv(a){return a.data.label?a.data.label.toLowerCase().replace(/\s+/g,"-"):`${a.type}-${a.id.slice(0,8)}`}function $v(a,t){const n=t.getHost(a),s=KN(a,t);if(!s){const l=t.getPort(a,"main");if(!l)return null;const c=ih(a);return`http://${n}:${l}${c}`}const r=ih(a);return`http://${n}:${s}${r}`}function YN(a){return{sourceType:"*",targetTypes:["prometheus"],priority:5,updateTargetConfig:(t,n,s,r)=>{const l=n.data.config||{},c=l.targets||[],d=l.scrapeInterval||"15s",h=$v(t,a);if(!h)return null;const p=Bv(t);if(c.find(v=>v.endpoint===h||v.job===p&&v.endpoint?.includes(a.getHost(t))))return null;const m={job:p,endpoint:h,interval:d,metricsPath:ih(t),status:"up",labels:{component:t.type,componentId:t.id}};return{targets:[...c,m]}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s),cleanupTargetConfig:(t,n,s,r)=>{const c=(n.data.config||{}).targets||[];if(!c||c.length===0)return null;const d=$v(t,a),h=Bv(t),p=a.getHost(t),g=c.filter(m=>!(d&&m.endpoint===d||m.job===h&&m.endpoint?.includes(p)||m.labels?.componentId===t.id));return g.length===c.length?null:{targets:g}}}}function ab(a){const t=["postgres","mongodb","redis","cassandra","clickhouse","snowflake","elasticsearch"],n=["rest","grpc","graphql","soap","websocket","webhook"],s=["kafka","rabbitmq","activemq","aws-sqs","azure-service-bus","gcp-pubsub"],r=["s3-datalake"],l=["crm","erp","payment-gateway"];return t.includes(a)?"database":n.includes(a)?"api":s.includes(a)?"messaging":r.includes(a)?"file":l.includes(a)?"api":"custom"}function Rc(a,t,n){const s=n?a.label||a.type:t.label||t.type,r=n?a.id.slice(0,8):t.id.slice(0,8);return`${s}-${r}`.toLowerCase().replace(/\s+/g,"-")}function XN(a){return{sourceType:"*",targetTypes:["mulesoft"],priority:5,updateTargetConfig:(t,n,s,r)=>{const c=(n.data.config||{}).connectors||[];if(c.find(m=>m.targetComponentId===t.id||m.name===Rc(t,n,!0)))return null;const h=ab(t.type),g={name:Rc(t,n,!0),type:h,enabled:!0,config:{},targetComponentType:t.type,targetComponentId:t.id};return h==="database"&&r.targetHost&&r.targetPort?g.config={host:r.targetHost,port:r.targetPort}:h==="api"&&r.targetHost&&r.targetPort?g.config={baseUrl:`http://${r.targetHost}:${r.targetPort}`}:h==="messaging"&&(g.config={broker:r.targetHost&&r.targetPort?`${r.targetHost}:${r.targetPort}`:void 0}),{connectors:[...c,g]}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function WN(a){return{sourceType:"mulesoft",targetTypes:"*",priority:5,updateSourceConfig:(t,n,s,r)=>{const c=(t.data.config||{}).connectors||[];if(c.find(m=>m.targetComponentId===n.id||m.name===Rc(t,n,!1)))return null;const h=ab(n.type),g={name:Rc(t,n,!1),type:h,enabled:!0,config:{},targetComponentType:n.type,targetComponentId:n.id};return h==="database"&&r.targetHost&&r.targetPort?g.config={host:r.targetHost,port:r.targetPort}:h==="api"&&r.targetHost&&r.targetPort?g.config={baseUrl:`http://${r.targetHost}:${r.targetPort}`}:h==="messaging"&&r.targetHost&&r.targetPort&&(g.config={broker:`${r.targetHost}:${r.targetPort}`}),{connectors:[...c,g]}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function ZN(a){return{sourceType:"graphql-gateway",targetTypes:["graphql"],priority:10,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(t.data.config||{}).services||[],d=`http://${r.targetHost}:${r.targetPort}/graphql`;if(c.find(m=>m.endpoint===d||m.name===n.data.label))return null;const p=n.data.label||n.type,g={id:`svc-${c.length+1}`,name:p,endpoint:d,status:"connected",requests:0,errors:0};return{services:[...c,g]}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function JN(a){return{sourceType:"bff-service",targetTypes:["rest","grpc","graphql","websocket","soap","webhook"],priority:10,updateSourceConfig:(t,n,s,r)=>{if(!r.targetHost||!r.targetPort)return null;const c=(t.data.config||{}).backends||[],d=n.data.label||n.type;if(c.find(m=>m.name===d||m.endpoint===`http://${r.targetHost}:${r.targetPort}`||m.id===n.id))return null;let p="http";n.type==="grpc"?p="grpc":n.type==="graphql"&&(p="graphql");const g={id:n.id||`backend-${Date.now()}`,name:d,endpoint:`http://${r.targetHost}:${r.targetPort}`,protocol:p,status:"connected",timeout:5e3,retries:3,retryBackoff:"exponential",circuitBreaker:{enabled:!0,failureThreshold:5,successThreshold:2,timeout:6e4}};return{backends:[...c,g]}},extractMetadata:(t,n,s)=>a.getConnectionMetadata(t,n,s)}}function e2(a){return[IN(a),$N(a),GN(a),QN(a),qN(a),HN(a),ZN(a),JN(a),UN(a),BN(a),FN(a),VN(a),YN(a),XN(a),WN(a)]}let Uf=null;function Gv(){if(!Uf){const a=new ob,t=new PN,n=e2(a);t.initialize(n),Uf=t}return Uf}const Fn=2e3,Qv=140,Fv=200,rc=(a,t)=>({x:Math.floor(a/Fn),y:Math.floor(t/Fn)}),t2=(a,t,n,s,r,l)=>{const c=r*Fn,d=(r+1)*Fn,h=l*Fn,p=(l+1)*Fn,g=a,m=a+n,v=t,w=t+s;return!(m<c||g>d||w<h||v>p)},Bf=a=>{const t=new Set,n=Qv+Fv,s=Qv+Fv,r=a.position.x,l=r+n,c=a.position.y,d=c+s,h=rc(r,c).x,p=rc(l,d).x,g=rc(r,c).y,m=rc(l,d).y;for(let v=h;v<=p;v++)for(let w=g;w<=m;w++)t2(r,c,n,s,v,w)&&t.add(`${v},${w}`);return t},$n=(a,t=[])=>{if(a.length===0)return[];const n=new Set,s=new Map(a.map(r=>[r.id,r]));return a.forEach(r=>{Bf(r).forEach(c=>n.add(c))}),t.forEach(r=>{const l=s.get(r.source),c=s.get(r.target);l&&Bf(l).forEach(h=>n.add(h)),c&&Bf(c).forEach(h=>n.add(h))}),Array.from(n).map(r=>{const[l,c]=r.split(",").map(Number);return{x:l,y:c}})},Gn=a=>{if(a.length===0)return{minX:0,minY:0,maxX:Fn,maxY:Fn};const t=a.map(d=>d.x),n=a.map(d=>d.y),s=Math.min(...t),r=Math.min(...n),l=Math.max(...t),c=Math.max(...n);return{minX:s*Fn,minY:r*Fn,maxX:(l+1)*Fn,maxY:(c+1)*Fn}},$f={nodes:[],connections:[],groups:[],zoom:1,pan:{x:0,y:0}},Re=Ss((a,t)=>{const n=TN(),s=n?{...$f,...n,groups:n.groups||[]}:$f;let r=!1,l=!1;const c=()=>{const g=t();return{nodes:g.nodes,connections:g.connections,groups:g.groups||[],zoom:g.zoom,pan:g.pan}},d=()=>{Si.getState().pushState(c())},h=$n(s.nodes,s.connections||[]),p=Gn(h);return{...s,selectedNodeId:null,selectedConnectionId:null,diagramName:n?.name||"Untitled Diagram",viewportWidth:0,viewportHeight:0,canvasBounds:p,canvasChunks:h,getDiagramState:c,updateCanvasBounds:()=>a(g=>{const m=$n(g.nodes,g.connections);return{canvasChunks:m,canvasBounds:Gn(m)}}),addNode:g=>a(m=>{d();const v=[...m.nodes,g],w=$n(v,m.connections),S={nodes:v,canvasChunks:w,canvasBounds:Gn(w)};return ht({...m,...S},m.diagramName),S}),updateNode:(g,m,v=!1)=>a(w=>{!v&&!r&&d();const S=w.nodes.map(E=>E.id===g?{...E,...m}:E),C=$n(S,w.connections),R={nodes:S,canvasChunks:C,canvasBounds:Gn(C)};return(!r||!v)&&ht({...w,...R},w.diagramName),R}),updateNodes:(g,m=!1)=>a(v=>{!m&&!r&&!l&&d();const w=new Map(g.map(E=>[E.id,E.updates])),S=v.nodes.map(E=>{const j=w.get(E.id);return j?{...E,...j}:E}),C=$n(S,v.connections),R={nodes:S,canvasChunks:C,canvasBounds:Gn(C)};return(!l||!m)&&ht({...v,...R},v.diagramName),R}),deleteNode:g=>a(m=>{d();const v=m.nodes.filter(R=>R.id!==g),w=m.connections.filter(R=>R.source!==g&&R.target!==g),S=$n(v,w),C={nodes:v,connections:w,selectedNodeId:m.selectedNodeId===g?null:m.selectedNodeId,canvasChunks:S,canvasBounds:Gn(S)};return ht({...m,...C},m.diagramName),C}),selectNode:(g,m=!1)=>a(v=>m&&g&&v.nodes.find(S=>S.id===g)?{selectedNodeId:g,nodes:v.nodes.map(S=>({...S,selected:S.id===g?!S.selected:S.selected||!1}))}:{selectedNodeId:g,nodes:v.nodes.map(w=>({...w,selected:w.id===g}))}),selectNodesByIds:g=>a(m=>({selectedNodeId:g.length>0?g[0]:null,nodes:m.nodes.map(v=>({...v,selected:g.includes(v.id)}))})),addConnection:g=>a(m=>{d();const v={...g,type:g.type||"async"},w=m.nodes.find(N=>N.id===v.source),S=m.nodes.find(N=>N.id===v.target);let C=[...m.nodes];if(w&&S){const N=Gv(),T=(k,U)=>{const I=C.findIndex(q=>q.id===k);I!==-1&&(C[I]={...C[I],...U})};N.handleConnectionCreated(w,S,v,T)}const R=[...m.connections,v],E=$n(C,R),j={nodes:C,connections:R,canvasChunks:E,canvasBounds:Gn(E)};return ht({...m,...j},m.diagramName),j}),updateConnection:(g,m)=>a(v=>{d();const w={connections:v.connections.map(S=>S.id===g?{...S,...m}:S)};return ht({...v,...w},v.diagramName),w}),deleteConnection:g=>a(m=>{d();const v=m.connections.find(E=>E.id===g);let w=[...m.nodes];if(v){const E=m.nodes.find(N=>N.id===v.source),j=m.nodes.find(N=>N.id===v.target);if(E&&j){const N=Gv(),T=(k,U)=>{const I=w.findIndex(q=>q.id===k);I!==-1&&(w[I]={...w[I],...U})};N.handleConnectionDeleted(E,j,v,T)}}const S=m.connections.filter(E=>E.id!==g),C=$n(w,S),R={nodes:w,connections:S,selectedConnectionId:m.selectedConnectionId===g?null:m.selectedConnectionId,canvasChunks:C,canvasBounds:Gn(C)};return ht({...m,...R},m.diagramName),R}),selectConnection:g=>a(m=>({selectedConnectionId:g,selectedNodeId:null,selectedGroupId:null,connections:m.connections.map(v=>({...v,selected:v.id===g}))})),addGroup:g=>a(m=>{d();const v={groups:[...m.groups,g]};return ht({...m,...v},m.diagramName),v}),updateGroup:(g,m)=>a(v=>{d();const w={groups:v.groups.map(S=>S.id===g?{...S,...m}:S)};return ht({...v,...w},v.diagramName),w}),deleteGroup:g=>a(m=>{d();const v={groups:m.groups.filter(w=>w.id!==g)};return ht({...m,...v},m.diagramName),v}),addNodeToGroup:(g,m)=>a(v=>{d();const w={groups:v.groups.map(S=>S.id===g&&!S.nodeIds.includes(m)?{...S,nodeIds:[...S.nodeIds,m]}:S)};return ht({...v,...w},v.diagramName),w}),removeNodeFromGroup:(g,m)=>a(v=>{d();const w={groups:v.groups.map(S=>S.id===g?{...S,nodeIds:S.nodeIds.filter(C=>C!==m)}:S)};return ht({...v,...w},v.diagramName),w}),selectGroup:g=>a(m=>({selectedGroupId:g,selectedNodeId:null,selectedConnectionId:null})),createGroupFromSelection:g=>a(m=>{d();const v=m.nodes.filter(C=>C.selected||C.id===m.selectedNodeId).map(C=>C.id);if(v.length===0)return m;const w={id:`group-${Date.now()}`,name:g,nodeIds:v,color:`hsl(${Math.random()*360}, 70%, 50%)`},S={groups:[...m.groups,w],nodes:m.nodes.map(C=>({...C,selected:!1})),selectedNodeId:null};return ht({...m,...S},m.diagramName),S}),autoGroupByConnections:()=>a(g=>{d();const m=new Set;g.groups.forEach(N=>{N.nodeIds.forEach(T=>m.add(T))});const v=new Map,w=N=>{v.has(N)||v.set(N,N);const T=v.get(N);if(T!==void 0&&T!==N){const k=w(T);return v.set(N,k),k}return T??N},S=(N,T)=>{const k=w(N),U=w(T);k!==U&&v.set(k,U)};g.connections.forEach(N=>{!m.has(N.source)&&!m.has(N.target)&&S(N.source,N.target)});const C=new Map;g.nodes.forEach(N=>{if(!m.has(N.id)){const T=w(N.id);C.has(T)||C.set(T,[]);const k=C.get(T);k&&k.push(N.id)}});const R=[];let E=g.groups.length+1;C.forEach((N,T)=>{N.length>=2&&R.push({id:`group-${Date.now()}-${R.length}`,name:`Group ${E++}`,nodeIds:N,color:`hsl(${Math.random()*360}, 70%, 50%)`})});const j={groups:[...g.groups,...R]};return ht({...g,...j},g.diagramName),j}),setZoom:g=>a(m=>(ht({...m,zoom:g},m.diagramName),{zoom:g})),setPan:g=>a(m=>(ht({...m,pan:g},m.diagramName),{pan:g})),setViewportSize:g=>a(()=>({viewportWidth:g.width,viewportHeight:g.height})),setDiagramName:g=>a(m=>(ht(m,g),{diagramName:g})),loadDiagramState:(g,m=!1)=>a(()=>{m||d();const v=$n(g.nodes||[],g.connections||[]),w={...g,canvasChunks:v,canvasBounds:Gn(v)};return ht(w,t().diagramName),w}),saveDiagram:()=>{const g=t();ht(g,g.diagramName)},resetCanvas:()=>{d();const g=$n([],[]);a({...$f,canvasChunks:g,canvasBounds:Gn(g)})},undo:()=>{const g=Si.getState().undo();g&&a(()=>{const m=$n(g.nodes||[],g.connections||[]),v={...g,canvasChunks:m,canvasBounds:Gn(m)};return ht(v,t().diagramName),v})},redo:()=>{const g=Si.getState().redo();g&&a(()=>{const m=$n(g.nodes||[],g.connections||[]),v={...g,canvasChunks:m,canvasBounds:Gn(m)};return ht(v,t().diagramName),v})},startDragOperation:g=>{const m=t();r=!0,m.nodes.find(v=>v.id===g),d()},endDragOperation:()=>{r=!1;const g=t();ht(g,g.diagramName)},setGroupDragging:g=>{l=g},getIsGroupDragging:()=>l,bringToFront:g=>a(m=>{d();const v=m.nodes.findIndex(R=>R.id===g);if(v===-1)return m;const w=[...m.nodes],[S]=w.splice(v,1);w.push(S);const C={nodes:w};return ht({...m,...C},m.diagramName),C}),sendToBack:g=>a(m=>{d();const v=m.nodes.findIndex(R=>R.id===g);if(v===-1)return m;const w=[...m.nodes],[S]=w.splice(v,1);w.unshift(S);const C={nodes:w};return ht({...m,...C},m.diagramName),C}),bringForward:g=>a(m=>{d();const v=m.nodes.findIndex(C=>C.id===g);if(v===-1||v===m.nodes.length-1)return m;const w=[...m.nodes];[w[v],w[v+1]]=[w[v+1],w[v]];const S={nodes:w};return ht({...m,...S},m.diagramName),S}),sendBackward:g=>a(m=>{d();const v=m.nodes.findIndex(C=>C.id===g);if(v===-1||v===0)return m;const w=[...m.nodes];[w[v],w[v-1]]=[w[v-1],w[v]];const S={nodes:w};return ht({...m,...S},m.diagramName),S})}}),_o=Ss((a,t)=>({isRunning:!1,messages:new Map,messageHistory:[],initialize:(n,s)=>{un.initialize(n,s),t().updateMessages(n,s)},start:()=>{un.start(),a({isRunning:!0});const n=setInterval(()=>{const{nodes:s,connections:r}=Re.getState();t().updateMessages(s,r)},200);un._pollInterval=n},stop:()=>{un.stop();const n=un._pollInterval;n&&clearInterval(n),a({isRunning:!1})},updateMessages:(n,s)=>{un.updateNodesAndConnections(n,s);const r=new Map;for(const c of s)r.set(c.id,un.getConnectionMessages(c.id));const l=un.getMessageHistory(100);a({messages:r,messageHistory:l})},getConnectionMessages:n=>un.getConnectionMessages(n),getComponentMessages:n=>un.getComponentMessages(n),getMessageHistory:n=>un.getMessageHistory(n)}));class n2{alerts=new Map;alertCallbacks=[];onAlert(t){this.alertCallbacks.push(t)}analyze(t,n,s,r){const l=[];for(const c of t){const d=n.get(c.id),h=r.find(p=>p.nodeId===c.id);if(!(!d||!h)){if(h.health==="down"){const p=`down-${c.id}`;if(!this.alerts.has(p)){const g={id:p,type:"critical",title:"Component Down",message:`${c.data.label} is down and not responding`,nodeId:c.id,nodeLabel:c.data.label,timestamp:Date.now(),acknowledged:!1,severity:1};this.addAlert(g),l.push(g)}}if(d.errorRate>.1){const p=`error-${c.id}`,g=this.alerts.get(p);if(!g||g.acknowledged){const m={id:p,type:"critical",title:"High Error Rate",message:`${c.data.label} has ${(d.errorRate*100).toFixed(1)}% error rate`,nodeId:c.id,nodeLabel:c.data.label,timestamp:Date.now(),acknowledged:!1,severity:.9};this.addAlert(m),l.push(m)}}if(d.latency>2e3){const p=`latency-${c.id}`,g=this.alerts.get(p);if(!g||g.acknowledged){const m={id:p,type:"warning",title:"High Latency",message:`${c.data.label} has latency of ${d.latency.toFixed(0)}ms`,nodeId:c.id,nodeLabel:c.data.label,timestamp:Date.now(),acknowledged:!1,severity:.7};this.addAlert(m),l.push(m)}}if(d.utilization>.9){const p=`utilization-${c.id}`,g=this.alerts.get(p);if(!g||g.acknowledged){const m={id:p,type:"warning",title:"High Utilization",message:`${c.data.label} is at ${(d.utilization*100).toFixed(0)}% capacity`,nodeId:c.id,nodeLabel:c.data.label,timestamp:Date.now(),acknowledged:!1,severity:.6};this.addAlert(m),l.push(m)}}}}for(const[c,d]of s.entries())if(d.bottleneck){const h=`bottleneck-${c}`,p=this.alerts.get(h);if(!p||p.acknowledged){const g={id:h,type:"critical",title:"Connection Bottleneck",message:"Bottleneck detected in connection",timestamp:Date.now(),acknowledged:!1,severity:.85};this.addAlert(g),l.push(g)}}return this.cleanupResolvedAlerts(t,n,s,r),l}addAlert(t){this.alerts.set(t.id,t),this.alertCallbacks.forEach(n=>n(t))}cleanupResolvedAlerts(t,n,s,r){new Set(t.map(l=>l.id)),new Set(s.keys());for(const[l,c]of this.alerts.entries()){if(c.acknowledged)continue;let d=!1;if(c.nodeId)if(!t.find(p=>p.id===c.nodeId))d=!0;else{const p=n.get(c.nodeId),g=r.find(m=>m.nodeId===c.nodeId);(l.startsWith("down-")&&g&&g.health!=="down"||l.startsWith("error-")&&p&&p.errorRate<=.1||l.startsWith("latency-")&&p&&p.latency<=2e3||l.startsWith("utilization-")&&p&&p.utilization<=.9)&&(d=!0)}else if(l.startsWith("bottleneck-")){const h=l.replace("bottleneck-",""),p=s.get(h);(!p||!p.bottleneck)&&(d=!0)}d&&this.alerts.delete(l)}}acknowledge(t){const n=this.alerts.get(t);n&&(n.acknowledged=!0,this.alerts.set(t,n))}getAlerts(){return Array.from(this.alerts.values()).filter(t=>!t.acknowledged).sort((t,n)=>n.severity-t.severity)}getAlertsByType(t){return this.getAlerts().filter(n=>n.type===t)}clear(){this.alerts.clear()}}const ar=new n2;class s2{nodes=[];connections=[];componentMetrics=new Map;connectionMetrics=new Map;dependencyGraph=new Map;componentStatuses=new Map;update(t,n,s,r){this.nodes=t,this.connections=n,this.componentMetrics=s,this.connectionMetrics=r,this.buildDependencyGraph(),this.analyzeComponentHealth(),this.identifyCriticalPaths(),this.calculateImpactScores()}buildDependencyGraph(){this.dependencyGraph.clear();for(const t of this.nodes){const n=[],s=this.connections.filter(r=>r.target===t.id);for(const r of s){const l=this.connectionMetrics.get(r.id),c=this.componentMetrics.get(r.source);if(!l||!c)continue;const d=Math.max(l.throughputDependency,l.utilization,l.backpressure);let h="direct";l.bottleneck?h="critical":d>.7&&(h="indirect"),n.push({sourceId:r.source,targetId:t.id,connectionId:r.id,type:h,strength:d,impact:this.calculateDependencyImpact(r,c)})}this.dependencyGraph.set(t.id,n)}}calculateDependencyImpact(t,n){const s=this.connectionMetrics.get(t.id);if(!s)return 0;const r=n.errorRate,l=Math.min(1,s.latency/1e3),c=s.backpressure,d=n.utilization>.8?.5:0;return Math.min(1,r*.4+l*.2+c*.3+d*.1)}analyzeComponentHealth(){this.componentStatuses.clear();for(const t of this.nodes){const n=this.componentMetrics.get(t.id),s=this.dependencyGraph.get(t.id)||[];if(!n){this.componentStatuses.set(t.id,{nodeId:t.id,health:"down",dependencies:s,dependents:[],criticalPath:!1,impactScore:0,failureRisk:1});continue}let r="healthy",l=0;n.errorRate>.1?(r="critical",l+=.4):n.errorRate>.05&&(r="degraded",l+=.2),n.utilization>.9?(r==="healthy"&&(r="degraded"),l+=.3):n.utilization>.8&&(l+=.15),n.latency>1e3?(r==="healthy"&&(r="degraded"),l+=.2):n.latency>500&&(l+=.1);for(const d of s){const h=this.componentStatuses.get(d.sourceId);h&&(h.health==="critical"||h.health==="down"?(r==="healthy"&&(r="degraded"),l+=d.impact*.3):h.health==="degraded"&&(l+=d.impact*.15))}l=Math.min(1,l);const c=[];for(const d of this.connections)if(d.source===t.id){const h=this.connectionMetrics.get(d.id);h&&c.push({sourceId:t.id,targetId:d.target,connectionId:d.id,type:h.bottleneck?"critical":"direct",strength:h.throughputDependency,impact:this.calculateDependencyImpact(d,n)})}this.componentStatuses.set(t.id,{nodeId:t.id,health:r,dependencies:s,dependents:c,criticalPath:!1,impactScore:0,failureRisk:l})}}identifyCriticalPaths(){const t=this.nodes.filter(s=>!this.connections.some(r=>r.target===s.id)),n=this.nodes.filter(s=>!this.connections.some(r=>r.source===s.id));for(const s of t)for(const r of n){const l=this.findPath(s.id,r.id);l&&l.length>1&&l.some(d=>{const h=this.componentStatuses.get(d),p=this.connections.find(g=>l.includes(g.source)&&l.includes(g.target)&&l.indexOf(g.source)<l.indexOf(g.target));if(p){const g=this.connectionMetrics.get(p.id);return g?.bottleneck||(g?.backpressure||0)>.7}return h?.health==="critical"||h?.health==="down"})&&l.forEach(d=>{const h=this.componentStatuses.get(d);h&&(h.criticalPath=!0)})}}findPath(t,n){if(t===n)return[t];const s=[{nodeId:t,path:[t]}],r=new Set([t]);for(;s.length>0;){const{nodeId:l,path:c}=s.shift(),d=this.connections.filter(h=>h.source===l);for(const h of d){if(h.target===n)return[...c,n];r.has(h.target)||(r.add(h.target),s.push({nodeId:h.target,path:[...c,h.target]}))}}return null}calculateImpactScores(){for(const[t,n]of this.componentStatuses.entries()){let s=0;s+=Math.min(1,n.dependents.length/5)*.3,n.health==="critical"||n.health==="down"?s+=.4:n.health==="degraded"&&(s+=.2),n.criticalPath&&(s+=.2),s+=n.failureRisk*.1,n.impactScore=Math.min(1,s),this.componentStatuses.set(t,n)}}analyzeSystem(){const t=[],n=[],s=[],r=[];for(const[h,p]of this.componentStatuses.entries())if(p.criticalPath){const g=this.findPathToSink(h);g&&!t.some(m=>JSON.stringify(m)===JSON.stringify(g))&&t.push(g)}for(const[h,p]of this.connectionMetrics.entries())if(p.bottleneck){const g=this.connections.find(m=>m.id===h);g&&(n.includes(g.source)||n.push(g.source),n.includes(g.target)||n.push(g.target))}for(const[h,p]of this.componentStatuses.entries())(p.failureRisk>.6||p.health==="critical"||p.health==="down")&&s.push(h);this.generateRecommendations(r);const l=Array.from(this.componentStatuses.values()).map(h=>{switch(h.health){case"down":return 0;case"critical":return .25;case"degraded":return .5;case"healthy":return 1}}),c=l.length>0?l.reduce((h,p)=>h+p,0)/l.length:1;let d="healthy";return c<.25?d="down":c<.5?d="critical":c<.75&&(d="degraded"),{criticalPaths:t,bottlenecks:n,riskComponents:s,recommendations:r,overallHealth:d}}findPathToSink(t){const n=this.nodes.filter(s=>!this.connections.some(r=>r.source===s.id));for(const s of n){const r=this.findPath(t,s.id);if(r)return r}return null}generateRecommendations(t){for(const[s,r]of this.componentStatuses.entries()){const l=this.nodes.find(d=>d.id===s),c=this.componentMetrics.get(s);!l||!c||(c.utilization>.85&&t.push({type:"scaling",priority:c.utilization>.95?"critical":"high",componentId:s,message:`${l.data.label} is highly utilized (${(c.utilization*100).toFixed(0)}%)`,impact:"May cause performance degradation and increased latency",suggestion:`Consider scaling ${l.data.label} horizontally or vertically`}),c.errorRate>.05&&t.push({type:"monitoring",priority:c.errorRate>.1?"critical":"high",componentId:s,message:`${l.data.label} has high error rate (${(c.errorRate*100).toFixed(1)}%)`,impact:"Affects system reliability and user experience",suggestion:`Investigate error logs and implement error handling for ${l.data.label}`}),c.latency>500&&t.push({type:"optimization",priority:c.latency>1e3?"high":"medium",componentId:s,message:`${l.data.label} has high latency (${c.latency.toFixed(0)}ms)`,impact:"Affects end-to-end response time",suggestion:`Optimize ${l.data.label} performance or add caching`}),r.criticalPath&&r.failureRisk>.5&&t.push({type:"redundancy",priority:"high",componentId:s,message:`${l.data.label} is on a critical path and at risk`,impact:"Failure would significantly impact system",suggestion:`Add redundancy or failover for ${l.data.label}`}))}for(const[s,r]of this.connectionMetrics.entries()){const l=this.connections.find(h=>h.id===s);if(!l)continue;const c=this.nodes.find(h=>h.id===l.source),d=this.nodes.find(h=>h.id===l.target);r.bottleneck&&t.push({type:"optimization",priority:"critical",connectionId:s,message:`Connection between ${c?.data.label||"source"} and ${d?.data.label||"target"} is a bottleneck`,impact:"Limiting overall system throughput",suggestion:"Increase bandwidth or optimize data transfer between these components"}),r.backpressure>.7&&t.push({type:"optimization",priority:"high",connectionId:s,message:`High backpressure (${(r.backpressure*100).toFixed(0)}%) on connection`,impact:"Target component cannot process data fast enough",suggestion:"Scale target component or implement buffering/queuing"})}const n={critical:0,high:1,medium:2,low:3};t.sort((s,r)=>n[s.priority]-n[r.priority])}getComponentStatus(t){return this.componentStatuses.get(t)}getAllComponentStatuses(){return Array.from(this.componentStatuses.values())}getDependencies(t){return this.dependencyGraph.get(t)||[]}}const Gf=new s2,fa=Ss((a,t)=>({componentStatuses:new Map,systemAnalysis:null,updateAnalysis:()=>{const{nodes:n,connections:s}=Re.getState(),{componentMetrics:r,connectionMetrics:l}=jt.getState();Gf.update(n,s,r,l);const c=Gf.analyzeSystem(),d=new Map(Gf.getAllComponentStatuses().map(h=>[h.nodeId,h]));a({componentStatuses:d,systemAnalysis:c})},getComponentStatus:n=>t().componentStatuses.get(n),getAllComponentStatuses:()=>Array.from(t().componentStatuses.values()),getSystemAnalysis:()=>t().systemAnalysis})),Lh=Ss((a,t)=>(ar.onAlert(n=>{t().updateAlerts()}),{alerts:[],updateAlerts:()=>{const{nodes:n,connections:s}=Re.getState(),{componentMetrics:r,connectionMetrics:l}=jt.getState(),c=fa.getState().getAllComponentStatuses();ar.analyze(n,r,l,c);const d=ar.getAlerts();a({alerts:d})},acknowledgeAlert:n=>{ar.acknowledge(n);const s=ar.getAlerts();a({alerts:s})},clearAlerts:()=>{ar.clear(),a({alerts:[]})},getCriticalAlerts:()=>t().alerts.filter(n=>n.type==="critical"),getWarningAlerts:()=>t().alerts.filter(n=>n.type==="warning")})),jt=Ss((a,t)=>({isRunning:!1,simulationTime:0,updateInterval:100,componentMetrics:new Map,connectionMetrics:new Map,initialize:(n,s)=>{it.initialize(n,s),a({componentMetrics:new Map(it.getAllComponentMetrics().map(r=>[r.id,r])),connectionMetrics:new Map(it.getAllConnectionMetrics().map(r=>[r.id,r]))}),_o.getState().initialize(n,s)},start:()=>{it.start(),a({isRunning:!0}),_o.getState().start();const n=setInterval(()=>{t().updateMetrics()},t().updateInterval);it._pollInterval=n},stop:()=>{it.stop();const n=it._pollInterval;n&&clearInterval(n),_o.getState().stop(),a({isRunning:!1})},reset:()=>{it.resetSimulation();const n=it._pollInterval;n&&clearInterval(n),_o.getState().stop(),a({isRunning:!1,simulationTime:0,componentMetrics:new Map,connectionMetrics:new Map})},setUpdateInterval:n=>{a({updateInterval:n})},updateMetrics:()=>{const{nodes:n,connections:s}=Re.getState();it.updateNodesAndConnections(n,s),a(r=>({simulationTime:it.getSimulationTime(),componentMetrics:new Map(it.getAllComponentMetrics().map(l=>[l.id,l])),connectionMetrics:new Map(it.getAllConnectionMetrics().map(l=>[l.id,l]))})),_o.getState().updateMessages(n,s),fa.getState().updateAnalysis(),Lh.getState().updateAlerts()},getComponentMetrics:n=>t().componentMetrics.get(n),getConnectionMetrics:n=>t().connectionMetrics.get(n)}));const o2=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a2=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),Vv=a=>{const t=a2(a);return t.charAt(0).toUpperCase()+t.slice(1)},rb=(...a)=>a.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),r2=a=>{for(const t in a)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var i2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l2=x.forwardRef(({color:a="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:c,...d},h)=>x.createElement("svg",{ref:h,...i2,width:t,height:t,stroke:a,strokeWidth:s?Number(n)*24/Number(t):n,className:rb("lucide",r),...!l&&!r2(d)&&{"aria-hidden":"true"},...d},[...c.map(([p,g])=>x.createElement(p,g)),...Array.isArray(l)?l:[l]]));const ke=(a,t)=>{const n=x.forwardRef(({className:s,...r},l)=>x.createElement(l2,{ref:l,iconNode:t,className:rb(`lucide-${o2(Vv(a))}`,`lucide-${a}`,s),...r}));return n.displayName=Vv(a),n};const c2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ha=ke("activity",c2);const u2=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],d2=ke("arrow-down",u2);const f2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],h2=ke("arrow-right",f2);const p2=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],g2=ke("arrow-up",p2);const m2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ph=ke("check",m2);const y2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Hc=ke("chevron-down",y2);const v2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ih=ke("chevron-right",v2);const b2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ib=ke("chevron-up",b2);const x2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ei=ke("circle-alert",x2);const w2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],qh=ke("circle-check",w2);const C2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],S2=ke("circle-question-mark",C2);const M2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],da=ke("circle-x",M2);const E2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],R2=ke("circle",E2);const N2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],lb=ke("copy",N2);const A2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],T2=ke("download",A2);const j2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],k2=ke("eye",j2);const D2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Kv=ke("file-text",D2);const _2=[["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],z2=ke("folder-minus",_2);const O2=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],lh=ke("folder-plus",O2);const L2=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],P2=ke("funnel",L2);const I2=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],q2=ke("grip-vertical",I2);const H2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],U2=ke("info",H2);const B2=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],cb=ke("layers",B2);const $2=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],G2=ke("map",$2);const Q2=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],F2=ke("maximize-2",Q2);const V2=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],K2=ke("network",V2);const Y2=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],X2=ke("pause",Y2);const W2=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Z2=ke("play",W2);const J2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Nc=ke("plus",J2);const eA=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vc=ke("power-off",eA);const tA=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],Qf=ke("power",tA);const nA=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],sA=ke("redo-2",nA);const oA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],aA=ke("refresh-cw",oA);const rA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ub=ke("rotate-ccw",rA);const iA=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],lA=ke("ruler",iA);const cA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],uA=ke("save",cA);const dA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Uc=ke("search",dA);const fA=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Ff=ke("settings-2",fA);const hA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pA=ke("settings",hA);const gA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],mA=ke("sparkles",gA);const yA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],vA=ke("square-pen",yA);const bA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],xA=ke("star",bA);const wA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Hh=ke("trash-2",wA);const CA=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],db=ke("trending-down",CA);const SA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ys=ke("triangle-alert",SA);const MA=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],EA=ke("undo-2",MA);const RA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],NA=ke("upload",RA);const AA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vs=ke("x",AA);const TA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],fb=ke("zap",TA);const jA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],kA=ke("zoom-in",jA);const DA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],_A=ke("zoom-out",DA);function zA(){const{isRunning:a,simulationTime:t,initialize:n,start:s,stop:r,reset:l}=jt(),{nodes:c,connections:d}=Re(),h=()=>{t===0&&n(c,d),s()},p=()=>{r()},g=()=>{l()},m=v=>{const w=Math.floor(v/1e3),S=Math.floor(w/60),C=w%60;return`${S}:${C.toString().padStart(2,"0")}`};return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"text-sm text-muted-foreground w-12",children:m(t)}),f.jsx(Te,{size:"sm",variant:a?"default":"outline",onClick:h,disabled:a,title:"Start emulation",children:f.jsx(Z2,{className:"w-4 h-4"})}),f.jsx(Te,{size:"sm",variant:a?"default":"outline",onClick:p,disabled:!a,title:"Stop emulation",children:f.jsx(X2,{className:"w-4 h-4"})}),f.jsx(Te,{size:"sm",variant:"outline",onClick:g,title:"Reset simulation",children:f.jsx(ub,{className:"w-4 h-4"})})]})}const Tt=x.forwardRef(({className:a,type:t,...n},s)=>f.jsx("input",{type:t,className:Ee("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...n}));Tt.displayName="Input";function OA(a){const t=LA(a),n=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(IA);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(t,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(t,{...c,ref:r,children:l})});return n.displayName=`${a}.Slot`,n}function LA(a){const t=x.forwardRef((n,s)=>{const{children:r,...l}=n;if(x.isValidElement(r)){const c=HA(r),d=qA(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return t.displayName=`${a}.SlotClone`,t}var PA=Symbol("radix.slottable");function IA(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===PA}function qA(a,t){const n={...t};for(const s in t){const r=a[s],l=t[s];/^on[A-Z]/.test(s)?r&&l?n[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(n[s]=r):s==="style"?n[s]={...r,...l}:s==="className"&&(n[s]=[r,l].filter(Boolean).join(" "))}return{...a,...n}}function HA(a){let t=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?a.ref:(t=Object.getOwnPropertyDescriptor(a,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?a.props.ref:a.props.ref||a.ref)}var UA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ae=UA.reduce((a,t)=>{const n=OA(`Primitive.${t}`),s=x.forwardRef((r,l)=>{const{asChild:c,...d}=r,h=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(h,{...d,ref:l})});return s.displayName=`Primitive.${t}`,{...a,[t]:s}},{});function hb(a,t){a&&_i.flushSync(()=>a.dispatchEvent(t))}var sn=globalThis?.document?x.useLayoutEffect:()=>{};function BA(a,t){return x.useReducer((n,s)=>t[n][s]??n,a)}var rn=a=>{const{present:t,children:n}=a,s=$A(t),r=typeof n=="function"?n({present:s.isPresent}):x.Children.only(n),l=De(s.ref,GA(r));return typeof n=="function"||s.isPresent?x.cloneElement(r,{ref:l}):null};rn.displayName="Presence";function $A(a){const[t,n]=x.useState(),s=x.useRef(null),r=x.useRef(a),l=x.useRef("none"),c=a?"mounted":"unmounted",[d,h]=BA(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const p=ic(s.current);l.current=d==="mounted"?p:"none"},[d]),sn(()=>{const p=s.current,g=r.current;if(g!==a){const v=l.current,w=ic(p);a?h("MOUNT"):w==="none"||p?.display==="none"?h("UNMOUNT"):h(g&&v!==w?"ANIMATION_OUT":"UNMOUNT"),r.current=a}},[a,h]),sn(()=>{if(t){let p;const g=t.ownerDocument.defaultView??window,m=w=>{const C=ic(s.current).includes(CSS.escape(w.animationName));if(w.target===t&&C&&(h("ANIMATION_END"),!r.current)){const R=t.style.animationFillMode;t.style.animationFillMode="forwards",p=g.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=R)})}},v=w=>{w.target===t&&(l.current=ic(s.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{g.clearTimeout(p),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else h("ANIMATION_END")},[t,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:x.useCallback(p=>{s.current=p?getComputedStyle(p):null,n(p)},[])}}function ic(a){return a?.animationName||"none"}function GA(a){let t=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?a.ref:(t=Object.getOwnPropertyDescriptor(a,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?a.props.ref:a.props.ref||a.ref)}function QA(a,t){const n=x.createContext(t),s=l=>{const{children:c,...d}=l,h=x.useMemo(()=>d,Object.values(d));return f.jsx(n.Provider,{value:h,children:c})};s.displayName=a+"Provider";function r(l){const c=x.useContext(n);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${a}\``)}return[s,r]}function bn(a,t=[]){let n=[];function s(l,c){const d=x.createContext(c),h=n.length;n=[...n,c];const p=m=>{const{scope:v,children:w,...S}=m,C=v?.[a]?.[h]||d,R=x.useMemo(()=>S,Object.values(S));return f.jsx(C.Provider,{value:R,children:w})};p.displayName=l+"Provider";function g(m,v){const w=v?.[a]?.[h]||d,S=x.useContext(w);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${l}\``)}return[p,g]}const r=()=>{const l=n.map(c=>x.createContext(c));return function(d){const h=d?.[a]||l;return x.useMemo(()=>({[`__scope${a}`]:{...d,[a]:h}}),[d,h])}};return r.scopeName=a,[s,FA(r,...t)]}function FA(...a){const t=a[0];if(a.length===1)return t;const n=()=>{const s=a.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(l){const c=s.reduce((d,{useScope:h,scopeName:p})=>{const m=h(l)[`__scope${p}`];return{...d,...m}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}function nn(a){const t=x.useRef(a);return x.useEffect(()=>{t.current=a}),x.useMemo(()=>(...n)=>t.current?.(...n),[])}var VA=x.createContext(void 0);function wr(a){const t=x.useContext(VA);return a||t||"ltr"}function Ri(a,[t,n]){return Math.min(n,Math.max(t,a))}function ge(a,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(a?.(r),n===!1||!r.defaultPrevented)return t?.(r)}}function KA(a,t){return x.useReducer((n,s)=>t[n][s]??n,a)}var Uh="ScrollArea",[pb]=bn(Uh),[YA,Kn]=pb(Uh),gb=x.forwardRef((a,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:r,scrollHideDelay:l=600,...c}=a,[d,h]=x.useState(null),[p,g]=x.useState(null),[m,v]=x.useState(null),[w,S]=x.useState(null),[C,R]=x.useState(null),[E,j]=x.useState(0),[N,T]=x.useState(0),[k,U]=x.useState(!1),[I,q]=x.useState(!1),te=De(t,le=>h(le)),se=wr(r);return f.jsx(YA,{scope:n,type:s,dir:se,scrollHideDelay:l,scrollArea:d,viewport:p,onViewportChange:g,content:m,onContentChange:v,scrollbarX:w,onScrollbarXChange:S,scrollbarXEnabled:k,onScrollbarXEnabledChange:U,scrollbarY:C,onScrollbarYChange:R,scrollbarYEnabled:I,onScrollbarYEnabledChange:q,onCornerWidthChange:j,onCornerHeightChange:T,children:f.jsx(Ae.div,{dir:se,...c,ref:te,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":N+"px",...a.style}})})});gb.displayName=Uh;var mb="ScrollAreaViewport",yb=x.forwardRef((a,t)=>{const{__scopeScrollArea:n,children:s,nonce:r,...l}=a,c=Kn(mb,n),d=x.useRef(null),h=De(t,d,c.onViewportChange);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),f.jsx(Ae.div,{"data-radix-scroll-area-viewport":"",...l,ref:h,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...a.style},children:f.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});yb.displayName=mb;var Ms="ScrollAreaScrollbar",Bh=x.forwardRef((a,t)=>{const{forceMount:n,...s}=a,r=Kn(Ms,a.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:c}=r,d=a.orientation==="horizontal";return x.useEffect(()=>(d?l(!0):c(!0),()=>{d?l(!1):c(!1)}),[d,l,c]),r.type==="hover"?f.jsx(XA,{...s,ref:t,forceMount:n}):r.type==="scroll"?f.jsx(WA,{...s,ref:t,forceMount:n}):r.type==="auto"?f.jsx(vb,{...s,ref:t,forceMount:n}):r.type==="always"?f.jsx($h,{...s,ref:t}):null});Bh.displayName=Ms;var XA=x.forwardRef((a,t)=>{const{forceMount:n,...s}=a,r=Kn(Ms,a.__scopeScrollArea),[l,c]=x.useState(!1);return x.useEffect(()=>{const d=r.scrollArea;let h=0;if(d){const p=()=>{window.clearTimeout(h),c(!0)},g=()=>{h=window.setTimeout(()=>c(!1),r.scrollHideDelay)};return d.addEventListener("pointerenter",p),d.addEventListener("pointerleave",g),()=>{window.clearTimeout(h),d.removeEventListener("pointerenter",p),d.removeEventListener("pointerleave",g)}}},[r.scrollArea,r.scrollHideDelay]),f.jsx(rn,{present:n||l,children:f.jsx(vb,{"data-state":l?"visible":"hidden",...s,ref:t})})}),WA=x.forwardRef((a,t)=>{const{forceMount:n,...s}=a,r=Kn(Ms,a.__scopeScrollArea),l=a.orientation==="horizontal",c=$c(()=>h("SCROLL_END"),100),[d,h]=KA("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(d==="idle"){const p=window.setTimeout(()=>h("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(p)}},[d,r.scrollHideDelay,h]),x.useEffect(()=>{const p=r.viewport,g=l?"scrollLeft":"scrollTop";if(p){let m=p[g];const v=()=>{const w=p[g];m!==w&&(h("SCROLL"),c()),m=w};return p.addEventListener("scroll",v),()=>p.removeEventListener("scroll",v)}},[r.viewport,l,h,c]),f.jsx(rn,{present:n||d!=="hidden",children:f.jsx($h,{"data-state":d==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:ge(a.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:ge(a.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),vb=x.forwardRef((a,t)=>{const n=Kn(Ms,a.__scopeScrollArea),{forceMount:s,...r}=a,[l,c]=x.useState(!1),d=a.orientation==="horizontal",h=$c(()=>{if(n.viewport){const p=n.viewport.offsetWidth<n.viewport.scrollWidth,g=n.viewport.offsetHeight<n.viewport.scrollHeight;c(d?p:g)}},10);return gr(n.viewport,h),gr(n.content,h),f.jsx(rn,{present:s||l,children:f.jsx($h,{"data-state":l?"visible":"hidden",...r,ref:t})})}),$h=x.forwardRef((a,t)=>{const{orientation:n="vertical",...s}=a,r=Kn(Ms,a.__scopeScrollArea),l=x.useRef(null),c=x.useRef(0),[d,h]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=Sb(d.viewport,d.content),g={...s,sizes:d,onSizesChange:h,hasThumb:p>0&&p<1,onThumbChange:v=>l.current=v,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:v=>c.current=v};function m(v,w){return sT(v,c.current,d,w)}return n==="horizontal"?f.jsx(ZA,{...g,ref:t,onThumbPositionChange:()=>{if(r.viewport&&l.current){const v=r.viewport.scrollLeft,w=Yv(v,d,r.dir);l.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:v=>{r.viewport&&(r.viewport.scrollLeft=v)},onDragScroll:v=>{r.viewport&&(r.viewport.scrollLeft=m(v,r.dir))}}):n==="vertical"?f.jsx(JA,{...g,ref:t,onThumbPositionChange:()=>{if(r.viewport&&l.current){const v=r.viewport.scrollTop,w=Yv(v,d);l.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:v=>{r.viewport&&(r.viewport.scrollTop=v)},onDragScroll:v=>{r.viewport&&(r.viewport.scrollTop=m(v))}}):null}),ZA=x.forwardRef((a,t)=>{const{sizes:n,onSizesChange:s,...r}=a,l=Kn(Ms,a.__scopeScrollArea),[c,d]=x.useState(),h=x.useRef(null),p=De(t,h,l.onScrollbarXChange);return x.useEffect(()=>{h.current&&d(getComputedStyle(h.current))},[h]),f.jsx(xb,{"data-orientation":"horizontal",...r,ref:p,sizes:n,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Bc(n)+"px",...a.style},onThumbPointerDown:g=>a.onThumbPointerDown(g.x),onDragScroll:g=>a.onDragScroll(g.x),onWheelScroll:(g,m)=>{if(l.viewport){const v=l.viewport.scrollLeft+g.deltaX;a.onWheelScroll(v),Eb(v,m)&&g.preventDefault()}},onResize:()=>{h.current&&l.viewport&&c&&s({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:Tc(c.paddingLeft),paddingEnd:Tc(c.paddingRight)}})}})}),JA=x.forwardRef((a,t)=>{const{sizes:n,onSizesChange:s,...r}=a,l=Kn(Ms,a.__scopeScrollArea),[c,d]=x.useState(),h=x.useRef(null),p=De(t,h,l.onScrollbarYChange);return x.useEffect(()=>{h.current&&d(getComputedStyle(h.current))},[h]),f.jsx(xb,{"data-orientation":"vertical",...r,ref:p,sizes:n,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Bc(n)+"px",...a.style},onThumbPointerDown:g=>a.onThumbPointerDown(g.y),onDragScroll:g=>a.onDragScroll(g.y),onWheelScroll:(g,m)=>{if(l.viewport){const v=l.viewport.scrollTop+g.deltaY;a.onWheelScroll(v),Eb(v,m)&&g.preventDefault()}},onResize:()=>{h.current&&l.viewport&&c&&s({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:Tc(c.paddingTop),paddingEnd:Tc(c.paddingBottom)}})}})}),[eT,bb]=pb(Ms),xb=x.forwardRef((a,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:r,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:d,onThumbPositionChange:h,onDragScroll:p,onWheelScroll:g,onResize:m,...v}=a,w=Kn(Ms,n),[S,C]=x.useState(null),R=De(t,te=>C(te)),E=x.useRef(null),j=x.useRef(""),N=w.viewport,T=s.content-s.viewport,k=nn(g),U=nn(h),I=$c(m,10);function q(te){if(E.current){const se=te.clientX-E.current.left,le=te.clientY-E.current.top;p({x:se,y:le})}}return x.useEffect(()=>{const te=se=>{const le=se.target;S?.contains(le)&&k(se,T)};return document.addEventListener("wheel",te,{passive:!1}),()=>document.removeEventListener("wheel",te,{passive:!1})},[N,S,T,k]),x.useEffect(U,[s,U]),gr(S,I),gr(w.content,I),f.jsx(eT,{scope:n,scrollbar:S,hasThumb:r,onThumbChange:nn(l),onThumbPointerUp:nn(c),onThumbPositionChange:U,onThumbPointerDown:nn(d),children:f.jsx(Ae.div,{...v,ref:R,style:{position:"absolute",...v.style},onPointerDown:ge(a.onPointerDown,te=>{te.button===0&&(te.target.setPointerCapture(te.pointerId),E.current=S.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),q(te))}),onPointerMove:ge(a.onPointerMove,q),onPointerUp:ge(a.onPointerUp,te=>{const se=te.target;se.hasPointerCapture(te.pointerId)&&se.releasePointerCapture(te.pointerId),document.body.style.webkitUserSelect=j.current,w.viewport&&(w.viewport.style.scrollBehavior=""),E.current=null})})})}),Ac="ScrollAreaThumb",wb=x.forwardRef((a,t)=>{const{forceMount:n,...s}=a,r=bb(Ac,a.__scopeScrollArea);return f.jsx(rn,{present:n||r.hasThumb,children:f.jsx(tT,{ref:t,...s})})}),tT=x.forwardRef((a,t)=>{const{__scopeScrollArea:n,style:s,...r}=a,l=Kn(Ac,n),c=bb(Ac,n),{onThumbPositionChange:d}=c,h=De(t,m=>c.onThumbChange(m)),p=x.useRef(void 0),g=$c(()=>{p.current&&(p.current(),p.current=void 0)},100);return x.useEffect(()=>{const m=l.viewport;if(m){const v=()=>{if(g(),!p.current){const w=oT(m,d);p.current=w,d()}};return d(),m.addEventListener("scroll",v),()=>m.removeEventListener("scroll",v)}},[l.viewport,g,d]),f.jsx(Ae.div,{"data-state":c.hasThumb?"visible":"hidden",...r,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ge(a.onPointerDownCapture,m=>{const w=m.target.getBoundingClientRect(),S=m.clientX-w.left,C=m.clientY-w.top;c.onThumbPointerDown({x:S,y:C})}),onPointerUp:ge(a.onPointerUp,c.onThumbPointerUp)})});wb.displayName=Ac;var Gh="ScrollAreaCorner",Cb=x.forwardRef((a,t)=>{const n=Kn(Gh,a.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?f.jsx(nT,{...a,ref:t}):null});Cb.displayName=Gh;var nT=x.forwardRef((a,t)=>{const{__scopeScrollArea:n,...s}=a,r=Kn(Gh,n),[l,c]=x.useState(0),[d,h]=x.useState(0),p=!!(l&&d);return gr(r.scrollbarX,()=>{const g=r.scrollbarX?.offsetHeight||0;r.onCornerHeightChange(g),h(g)}),gr(r.scrollbarY,()=>{const g=r.scrollbarY?.offsetWidth||0;r.onCornerWidthChange(g),c(g)}),p?f.jsx(Ae.div,{...s,ref:t,style:{width:l,height:d,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...a.style}}):null});function Tc(a){return a?parseInt(a,10):0}function Sb(a,t){const n=a/t;return isNaN(n)?0:n}function Bc(a){const t=Sb(a.viewport,a.content),n=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,s=(a.scrollbar.size-n)*t;return Math.max(s,18)}function sT(a,t,n,s="ltr"){const r=Bc(n),l=r/2,c=t||l,d=r-c,h=n.scrollbar.paddingStart+c,p=n.scrollbar.size-n.scrollbar.paddingEnd-d,g=n.content-n.viewport,m=s==="ltr"?[0,g]:[g*-1,0];return Mb([h,p],m)(a)}function Yv(a,t,n="ltr"){const s=Bc(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-r,c=t.content-t.viewport,d=l-s,h=n==="ltr"?[0,c]:[c*-1,0],p=Ri(a,h);return Mb([0,c],[0,d])(p)}function Mb(a,t){return n=>{if(a[0]===a[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(a[1]-a[0]);return t[0]+s*(n-a[0])}}function Eb(a,t){return a>0&&a<t}var oT=(a,t=()=>{})=>{let n={left:a.scrollLeft,top:a.scrollTop},s=0;return(function r(){const l={left:a.scrollLeft,top:a.scrollTop},c=n.left!==l.left,d=n.top!==l.top;(c||d)&&t(),n=l,s=window.requestAnimationFrame(r)})(),()=>window.cancelAnimationFrame(s)};function $c(a,t){const n=nn(a),s=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),x.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function gr(a,t){const n=nn(t);sn(()=>{let s=0;if(a){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return r.observe(a),()=>{window.cancelAnimationFrame(s),r.unobserve(a)}}},[a,n])}var Rb=gb,aT=yb,rT=Cb;const an=x.forwardRef(({className:a,children:t,...n},s)=>f.jsxs(Rb,{ref:s,className:Ee("relative overflow-hidden",a),scrollHideDelay:0,...n,children:[f.jsx(aT,{className:"h-full w-full rounded-[inherit]",children:t}),f.jsx(Gc,{}),f.jsx(rT,{})]}));an.displayName=Rb.displayName;const Gc=x.forwardRef(({className:a,orientation:t="vertical",...n},s)=>f.jsx(Bh,{ref:s,orientation:t,className:Ee("flex touch-none select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]","data-[state=visible]:bg-accent/20 data-[state=visible]:hover:bg-accent/30","[&[data-state=hidden]]:opacity-0 [&[data-state=visible]]:opacity-100",a),style:{transition:"none !important",transitionDelay:"0ms !important",transitionDuration:"0ms !important"},...n,children:f.jsx(wb,{className:"relative flex-1 rounded-full bg-accent/80 hover:bg-accent",style:{transition:"none !important"}})}));Gc.displayName=Bh.displayName;const zi=Ss(a=>({showMinimap:!0,setShowMinimap:t=>a({showMinimap:t}),toggleMinimap:()=>a(t=>({showMinimap:!t.showMinimap})),showHeatMapLegend:!0,setShowHeatMapLegend:t=>a({showHeatMapLegend:t}),toggleHeatMapLegend:()=>a(t=>({showHeatMapLegend:!t.showHeatMapLegend})),showRuler:!1,setShowRuler:t=>a({showRuler:t}),toggleRuler:()=>a(t=>({showRuler:!t.showRuler})),autoCenterOnSelect:!0,setAutoCenterOnSelect:t=>a({autoCenterOnSelect:t}),searchQuery:"",setSearchQuery:t=>a({searchQuery:t}),highlightedNodeId:null,setHighlightedNodeId:t=>a({highlightedNodeId:t})})),Ni=[{id:"kafka",type:"kafka",label:"Apache Kafka",icon:"",color:"#000000",category:"messaging"},{id:"rabbitmq",type:"rabbitmq",label:"RabbitMQ",icon:"",color:"#FF6600",category:"messaging"},{id:"activemq",type:"activemq",label:"ActiveMQ",icon:"",color:"#A1005A",category:"messaging"},{id:"aws-sqs",type:"aws-sqs",label:"AWS SQS",icon:"",color:"#FF9900",category:"messaging"},{id:"azure-service-bus",type:"azure-service-bus",label:"Azure Service Bus",icon:"",color:"#0078D7",category:"messaging"},{id:"gcp-pubsub",type:"gcp-pubsub",label:"Google Pub/Sub",icon:"",color:"#4285F4",category:"messaging"},{id:"kong",type:"kong",label:"Kong Gateway",icon:"",color:"#003459",category:"integration"},{id:"apigee",type:"apigee",label:"Apigee",icon:"",color:"#F26522",category:"integration"},{id:"mulesoft",type:"mulesoft",label:"MuleSoft",icon:"",color:"#00A0DF",category:"integration"},{id:"graphql-gateway",type:"graphql-gateway",label:"GraphQL Gateway",icon:"",color:"#E10098",category:"integration"},{id:"bff-service",type:"bff-service",label:"BFF Service",icon:"",color:"#6C5CE7",category:"integration"},{id:"webhook-relay",type:"webhook-relay",label:"Webhook Relay",icon:"",color:"#1ABC9C",category:"integration"},{id:"postgres",type:"postgres",label:"PostgreSQL",icon:"",color:"#336791",category:"data"},{id:"mongodb",type:"mongodb",label:"MongoDB",icon:"",color:"#47A248",category:"data"},{id:"redis",type:"redis",label:"Redis",icon:"",color:"#DC382D",category:"data"},{id:"cassandra",type:"cassandra",label:"Apache Cassandra",icon:"",color:"#1287B1",category:"data"},{id:"clickhouse",type:"clickhouse",label:"ClickHouse",icon:"",color:"#FFCC00",category:"data"},{id:"snowflake",type:"snowflake",label:"Snowflake",icon:"",color:"#29B5E8",category:"data"},{id:"elasticsearch",type:"elasticsearch",label:"Elasticsearch",icon:"",color:"#00A79D",category:"data"},{id:"s3-datalake",type:"s3-datalake",label:"S3 Data Lake",icon:"",color:"#FF9900",category:"data"},{id:"prometheus",type:"prometheus",label:"Prometheus",icon:"",color:"#E6522C",category:"observability"},{id:"grafana",type:"grafana",label:"Grafana",icon:"",color:"#F56815",category:"observability"},{id:"loki",type:"loki",label:"Loki",icon:"",color:"#7CBA3C",category:"observability"},{id:"jaeger",type:"jaeger",label:"Jaeger",icon:"",color:"#65D6AD",category:"observability"},{id:"otel-collector",type:"otel-collector",label:"OpenTelemetry Collector",icon:"",color:"#6E56CF",category:"observability"},{id:"pagerduty",type:"pagerduty",label:"PagerDuty",icon:"",color:"#06AC38",category:"observability"},{id:"keycloak",type:"keycloak",label:"Keycloak",icon:"",color:"#5C6BC0",category:"security"},{id:"waf",type:"waf",label:"WAF / API Shield",icon:"",color:"#F44336",category:"security"},{id:"firewall",type:"firewall",label:"Firewall",icon:"",color:"#FF7043",category:"security"},{id:"secrets-vault",type:"secrets-vault",label:"Secrets Vault",icon:"",color:"#009688",category:"security"},{id:"ids-ips",type:"ids-ips",label:"IDS / IPS",icon:"",color:"#512DA8",category:"security"},{id:"jenkins",type:"jenkins",label:"Jenkins",icon:"",color:"#D24939",category:"devops"},{id:"gitlab-ci",type:"gitlab-ci",label:"GitLab CI",icon:"",color:"#FC6D26",category:"devops"},{id:"argo-cd",type:"argo-cd",label:"Argo CD",icon:"",color:"#EF7B45",category:"devops"},{id:"terraform",type:"terraform",label:"Terraform",icon:"",color:"#7B42BC",category:"devops"},{id:"ansible",type:"ansible",label:"Ansible",icon:"",color:"#000000",category:"devops"},{id:"harbor",type:"harbor",label:"Harbor Registry",icon:"",color:"#3BC1C4",category:"devops"},{id:"nginx",type:"nginx",label:"NGINX",icon:"",color:"#009639",category:"infrastructure"},{id:"docker",type:"docker",label:"Docker",icon:"",color:"#2496ED",category:"infrastructure"},{id:"kubernetes",type:"kubernetes",label:"Kubernetes",icon:"",color:"#326CE5",category:"infrastructure"},{id:"haproxy",type:"haproxy",label:"HAProxy",icon:"",color:"#009FDF",category:"infrastructure"},{id:"envoy",type:"envoy",label:"Envoy Proxy",icon:"",color:"#D63384",category:"infrastructure"},{id:"traefik",type:"traefik",label:"Traefik",icon:"",color:"#24A1DE",category:"infrastructure"},{id:"istio",type:"istio",label:"Istio Mesh",icon:"",color:"#466BB0",category:"edge"},{id:"service-mesh",type:"service-mesh",label:"Service Mesh",icon:"",color:"#5E81AC",category:"edge"},{id:"api-gateway",type:"api-gateway",label:"Cloud API Gateway",icon:"",color:"#FFB300",category:"edge"},{id:"vpn",type:"vpn",label:"VPN Concentrator",icon:"",color:"#2D9CDB",category:"edge"},{id:"cdn",type:"cdn",label:"CDN Edge",icon:"",color:"#FF5A5F",category:"edge"},{id:"rest",type:"rest",label:"REST API",icon:"",color:"#61DAFB",category:"api"},{id:"grpc",type:"grpc",label:"gRPC",icon:"",color:"#244C5A",category:"api"},{id:"graphql",type:"graphql",label:"GraphQL",icon:"",color:"#DE33A6",category:"api"},{id:"soap",type:"soap",label:"SOAP",icon:"",color:"#2196F3",category:"api"},{id:"websocket",type:"websocket",label:"WebSocket",icon:"",color:"#010101",category:"api"},{id:"webhook",type:"webhook",label:"Webhook Endpoint",icon:"",color:"#0FA3B1",category:"api"},{id:"spark",type:"spark",label:"Apache Spark",icon:"",color:"#E25A1C",category:"ml"},{id:"tensorflow-serving",type:"tensorflow-serving",label:"TensorFlow Serving",icon:"",color:"#FF6F00",category:"ml"},{id:"pytorch-serve",type:"pytorch-serve",label:"PyTorch Serve",icon:"",color:"#EE4C2C",category:"ml"},{id:"mlflow",type:"mlflow",label:"MLflow",icon:"",color:"#4285F4",category:"ml"},{id:"feature-store",type:"feature-store",label:"Feature Store",icon:"",color:"#8E44AD",category:"ml"},{id:"crm",type:"crm",label:"CRM System",icon:"",color:"#F39C12",category:"business"},{id:"erp",type:"erp",label:"ERP / SAP",icon:"",color:"#1B75BC",category:"business"},{id:"payment-gateway",type:"payment-gateway",label:"Payment Gateway",icon:"",color:"#4CAF50",category:"business"},{id:"bpmn-engine",type:"bpmn-engine",label:"BPMN Engine",icon:"",color:"#34495E",category:"business"},{id:"rpa-bot",type:"rpa-bot",label:"RPA Bot",icon:"",color:"#9B59B6",category:"business"}],bi=[{id:"messaging",label:"Messaging & Event Bus",icon:""},{id:"integration",label:"Integration & API",icon:""},{id:"data",label:"Data & Storage",icon:""},{id:"observability",label:"Observability",icon:""},{id:"security",label:"Security & IAM",icon:""},{id:"devops",label:"DevOps & Platform",icon:""},{id:"infrastructure",label:"Runtime & Infra",icon:""},{id:"edge",label:"Edge & Networking",icon:""},{id:"api",label:"Protocols & APIs",icon:""},{id:"ml",label:"ML & Analytics",icon:""},{id:"business",label:"Business Systems",icon:""}];function iT(){const{nodes:a,selectNode:t,zoom:n,pan:s,setPan:r,setZoom:l}=Re(),{searchQuery:c,setSearchQuery:d,highlightedNodeId:h,setHighlightedNodeId:p}=zi(),[g,m]=x.useState(!1),v=x.useRef(null);x.useEffect(()=>{const C=R=>{v.current&&!v.current.contains(R.target)&&m(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[]);const w=x.useMemo(()=>{if(!c.trim())return[];const C=c.toLowerCase();return a.filter(R=>{const E=Ni.find(k=>k.type===R.type),j=R.data?.label||"",N=R.type||"",T=E?.category||"";return j.toLowerCase().includes(C)||N.toLowerCase().includes(C)||T.toLowerCase().includes(C)})},[a,c]),S=C=>{t(C),p(C);const R=a.find(E=>E.id===C);if(R&&g){const E=window.innerWidth/2,j=window.innerHeight/2,N=R.position.x+70,T=R.position.y+70,k=E-N*n,U=j-T*n;r({x:k,y:U}),n<.8&&l(1)}setTimeout(()=>p(null),2e3)};return f.jsxs("div",{className:"relative",ref:v,children:[f.jsxs("div",{className:"relative",children:[f.jsx(Uc,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),f.jsx(Tt,{type:"text",placeholder:"Search components...",value:c,onChange:C=>{d(C.target.value),m(!0)},onFocus:()=>m(!0),className:"pl-8 pr-8 w-64"}),c&&f.jsx(Te,{variant:"ghost",size:"icon",className:"absolute right-0 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>{d(""),m(!1),p(null)},children:f.jsx(vs,{className:"h-3 w-3"})})]}),g&&c&&f.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 bg-card border border-border rounded-md shadow-lg z-50 max-h-80 overflow-hidden",children:w.length>0?f.jsx(an,{className:"max-h-80",children:f.jsx("div",{className:"p-1",children:w.map(C=>{const R=Ni.find(j=>j.type===C.type),E=h===C.id;return f.jsxs("button",{onClick:()=>S(C.id),className:Ee("w-full text-left px-3 py-2 rounded-sm hover:bg-accent transition-colors flex items-center justify-between",E&&"bg-accent"),children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-sm font-medium truncate",children:C.data?.label||C.type}),f.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[R?.category||"Unknown","  ",C.type]})]}),f.jsx(Ih,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 ml-2"})]},C.id)})})}):f.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No components found"})})]})}function lT(a){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=a:n.appendChild(document.createTextNode(a))}Array(12).fill(0);let ch=1;class cT{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:s,...r}=t,l=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:ch++,c=this.toasts.find(h=>h.id===l),d=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(h=>h.id===l?(this.publish({...h,...t,id:l,title:s}),{...h,...t,id:l,dismissible:d,title:s}):h):this.addToast({title:s,...r,dismissible:d,id:l}),l},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(t instanceof Function?t():t);let l=s!==void 0,c;const d=r.then(async p=>{if(c=["resolve",p],Et.isValidElement(p))l=!1,this.create({id:s,type:"default",message:p});else if(dT(p)&&!p.ok){l=!1;const m=typeof n.error=="function"?await n.error(`HTTP error! status: ${p.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${p.status}`):n.description,S=typeof m=="object"&&!Et.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:v,...S})}else if(p instanceof Error){l=!1;const m=typeof n.error=="function"?await n.error(p):n.error,v=typeof n.description=="function"?await n.description(p):n.description,S=typeof m=="object"&&!Et.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:v,...S})}else if(n.success!==void 0){l=!1;const m=typeof n.success=="function"?await n.success(p):n.success,v=typeof n.description=="function"?await n.description(p):n.description,S=typeof m=="object"&&!Et.isValidElement(m)?m:{message:m};this.create({id:s,type:"success",description:v,...S})}}).catch(async p=>{if(c=["reject",p],n.error!==void 0){l=!1;const g=typeof n.error=="function"?await n.error(p):n.error,m=typeof n.description=="function"?await n.description(p):n.description,w=typeof g=="object"&&!Et.isValidElement(g)?g:{message:g};this.create({id:s,type:"error",description:m,...w})}}).finally(()=>{l&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),h=()=>new Promise((p,g)=>d.then(()=>c[0]==="reject"?g(c[1]):p(c[1])).catch(g));return typeof s!="string"&&typeof s!="number"?{unwrap:h}:Object.assign(s,{unwrap:h})},this.custom=(t,n)=>{const s=n?.id||ch++;return this.create({jsx:t(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Qn=new cT,uT=(a,t)=>{const n=t?.id||ch++;return Qn.addToast({title:a,...t,id:n}),n},dT=a=>a&&typeof a=="object"&&"ok"in a&&typeof a.ok=="boolean"&&"status"in a&&typeof a.status=="number",fT=uT,hT=()=>Qn.toasts,pT=()=>Qn.getActiveToasts(),Ke=Object.assign(fT,{success:Qn.success,info:Qn.info,warning:Qn.warning,error:Qn.error,custom:Qn.custom,message:Qn.message,promise:Qn.promise,dismiss:Qn.dismiss,loading:Qn.loading},{getHistory:hT,getToasts:pT});lT("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");var gT=Th[" useId ".trim().toString()]||(()=>{}),mT=0;function ns(a){const[t,n]=x.useState(gT());return sn(()=>{n(s=>s??String(mT++))},[a]),t?`radix-${t}`:""}var yT=Th[" useInsertionEffect ".trim().toString()]||sn;function xs({prop:a,defaultProp:t,onChange:n=()=>{},caller:s}){const[r,l,c]=vT({defaultProp:t,onChange:n}),d=a!==void 0,h=d?a:r;{const g=x.useRef(a!==void 0);x.useEffect(()=>{const m=g.current;m!==d&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=d},[d,s])}const p=x.useCallback(g=>{if(d){const m=bT(g)?g(a):g;m!==a&&c.current?.(m)}else l(g)},[d,a,l,c]);return[h,p]}function vT({defaultProp:a,onChange:t}){const[n,s]=x.useState(a),r=x.useRef(n),l=x.useRef(t);return yT(()=>{l.current=t},[t]),x.useEffect(()=>{r.current!==n&&(l.current?.(n),r.current=n)},[n,r]),[n,s,l]}function bT(a){return typeof a=="function"}function xT(a,t=globalThis?.document){const n=nn(a);x.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var wT="DismissableLayer",uh="dismissableLayer.update",CT="dismissableLayer.pointerDownOutside",ST="dismissableLayer.focusOutside",Xv,Nb=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Oi=x.forwardRef((a,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:l,onInteractOutside:c,onDismiss:d,...h}=a,p=x.useContext(Nb),[g,m]=x.useState(null),v=g?.ownerDocument??globalThis?.document,[,w]=x.useState({}),S=De(t,I=>m(I)),C=Array.from(p.layers),[R]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),E=C.indexOf(R),j=g?C.indexOf(g):-1,N=p.layersWithOutsidePointerEventsDisabled.size>0,T=j>=E,k=RT(I=>{const q=I.target,te=[...p.branches].some(se=>se.contains(q));!T||te||(r?.(I),c?.(I),I.defaultPrevented||d?.())},v),U=NT(I=>{const q=I.target;[...p.branches].some(se=>se.contains(q))||(l?.(I),c?.(I),I.defaultPrevented||d?.())},v);return xT(I=>{j===p.layers.size-1&&(s?.(I),!I.defaultPrevented&&d&&(I.preventDefault(),d()))},v),x.useEffect(()=>{if(g)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(Xv=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),Wv(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=Xv)}},[g,v,n,p]),x.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),Wv())},[g,p]),x.useEffect(()=>{const I=()=>w({});return document.addEventListener(uh,I),()=>document.removeEventListener(uh,I)},[]),f.jsx(Ae.div,{...h,ref:S,style:{pointerEvents:N?T?"auto":"none":void 0,...a.style},onFocusCapture:ge(a.onFocusCapture,U.onFocusCapture),onBlurCapture:ge(a.onBlurCapture,U.onBlurCapture),onPointerDownCapture:ge(a.onPointerDownCapture,k.onPointerDownCapture)})});Oi.displayName=wT;var MT="DismissableLayerBranch",ET=x.forwardRef((a,t)=>{const n=x.useContext(Nb),s=x.useRef(null),r=De(t,s);return x.useEffect(()=>{const l=s.current;if(l)return n.branches.add(l),()=>{n.branches.delete(l)}},[n.branches]),f.jsx(Ae.div,{...a,ref:r})});ET.displayName=MT;function RT(a,t=globalThis?.document){const n=nn(a),s=x.useRef(!1),r=x.useRef(()=>{});return x.useEffect(()=>{const l=d=>{if(d.target&&!s.current){let h=function(){Ab(CT,n,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=h,t.addEventListener("click",r.current,{once:!0})):h()}else t.removeEventListener("click",r.current);s.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",l),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function NT(a,t=globalThis?.document){const n=nn(a),s=x.useRef(!1);return x.useEffect(()=>{const r=l=>{l.target&&!s.current&&Ab(ST,n,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Wv(){const a=new CustomEvent(uh);document.dispatchEvent(a)}function Ab(a,t,n,{discrete:s}){const r=n.originalEvent.target,l=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(a,t,{once:!0}),s?hb(r,l):r.dispatchEvent(l)}var Vf="focusScope.autoFocusOnMount",Kf="focusScope.autoFocusOnUnmount",Zv={bubbles:!1,cancelable:!0},AT="FocusScope",Li=x.forwardRef((a,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:l,...c}=a,[d,h]=x.useState(null),p=nn(r),g=nn(l),m=x.useRef(null),v=De(t,C=>h(C)),w=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(s){let C=function(N){if(w.paused||!d)return;const T=N.target;d.contains(T)?m.current=T:ko(m.current,{select:!0})},R=function(N){if(w.paused||!d)return;const T=N.relatedTarget;T!==null&&(d.contains(T)||ko(m.current,{select:!0}))},E=function(N){if(document.activeElement===document.body)for(const k of N)k.removedNodes.length>0&&ko(d)};document.addEventListener("focusin",C),document.addEventListener("focusout",R);const j=new MutationObserver(E);return d&&j.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",R),j.disconnect()}}},[s,d,w.paused]),x.useEffect(()=>{if(d){e0.add(w);const C=document.activeElement;if(!d.contains(C)){const E=new CustomEvent(Vf,Zv);d.addEventListener(Vf,p),d.dispatchEvent(E),E.defaultPrevented||(TT(zT(Tb(d)),{select:!0}),document.activeElement===C&&ko(d))}return()=>{d.removeEventListener(Vf,p),setTimeout(()=>{const E=new CustomEvent(Kf,Zv);d.addEventListener(Kf,g),d.dispatchEvent(E),E.defaultPrevented||ko(C??document.body,{select:!0}),d.removeEventListener(Kf,g),e0.remove(w)},0)}}},[d,p,g,w]);const S=x.useCallback(C=>{if(!n&&!s||w.paused)return;const R=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,E=document.activeElement;if(R&&E){const j=C.currentTarget,[N,T]=jT(j);N&&T?!C.shiftKey&&E===T?(C.preventDefault(),n&&ko(N,{select:!0})):C.shiftKey&&E===N&&(C.preventDefault(),n&&ko(T,{select:!0})):E===j&&C.preventDefault()}},[n,s,w.paused]);return f.jsx(Ae.div,{tabIndex:-1,...c,ref:v,onKeyDown:S})});Li.displayName=AT;function TT(a,{select:t=!1}={}){const n=document.activeElement;for(const s of a)if(ko(s,{select:t}),document.activeElement!==n)return}function jT(a){const t=Tb(a),n=Jv(t,a),s=Jv(t.reverse(),a);return[n,s]}function Tb(a){const t=[],n=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Jv(a,t){for(const n of a)if(!kT(n,{upTo:t}))return n}function kT(a,{upTo:t}){if(getComputedStyle(a).visibility==="hidden")return!0;for(;a;){if(t!==void 0&&a===t)return!1;if(getComputedStyle(a).display==="none")return!0;a=a.parentElement}return!1}function DT(a){return a instanceof HTMLInputElement&&"select"in a}function ko(a,{select:t=!1}={}){if(a&&a.focus){const n=document.activeElement;a.focus({preventScroll:!0}),a!==n&&DT(a)&&t&&a.select()}}var e0=_T();function _T(){let a=[];return{add(t){const n=a[0];t!==n&&n?.pause(),a=t0(a,t),a.unshift(t)},remove(t){a=t0(a,t),a[0]?.resume()}}}function t0(a,t){const n=[...a],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function zT(a){return a.filter(t=>t.tagName!=="A")}var OT="Portal",Pi=x.forwardRef((a,t)=>{const{container:n,...s}=a,[r,l]=x.useState(!1);sn(()=>l(!0),[]);const c=n||r&&globalThis?.document?.body;return c?VR.createPortal(f.jsx(Ae.div,{...s,ref:t}),c):null});Pi.displayName=OT;var Yf=0;function Qc(){x.useEffect(()=>{const a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??n0()),document.body.insertAdjacentElement("beforeend",a[1]??n0()),Yf++,()=>{Yf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Yf--}},[])}function n0(){const a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var fs=function(){return fs=Object.assign||function(t){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},fs.apply(this,arguments)};function jb(a,t){var n={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&t.indexOf(s)<0&&(n[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(a);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(a,s[r])&&(n[s[r]]=a[s[r]]);return n}function LT(a,t,n){if(n||arguments.length===2)for(var s=0,r=t.length,l;s<r;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return a.concat(l||Array.prototype.slice.call(t))}var bc="right-scroll-bar-position",xc="width-before-scroll-bar",PT="with-scroll-bars-hidden",IT="--removed-body-scroll-bar-size";function Xf(a,t){return typeof a=="function"?a(t):a&&(a.current=t),a}function qT(a,t){var n=x.useState(function(){return{value:a,callback:t,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=t,n.facade}var HT=typeof window<"u"?x.useLayoutEffect:x.useEffect,s0=new WeakMap;function UT(a,t){var n=qT(null,function(s){return a.forEach(function(r){return Xf(r,s)})});return HT(function(){var s=s0.get(n);if(s){var r=new Set(s),l=new Set(a),c=n.current;r.forEach(function(d){l.has(d)||Xf(d,null)}),l.forEach(function(d){r.has(d)||Xf(d,c)})}s0.set(n,a)},[a]),n}function BT(a){return a}function $T(a,t){t===void 0&&(t=BT);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:a},useMedium:function(l){var c=t(l,s);return n.push(c),function(){n=n.filter(function(d){return d!==c})}},assignSyncMedium:function(l){for(s=!0;n.length;){var c=n;n=[],c.forEach(l)}n={push:function(d){return l(d)},filter:function(){return n}}},assignMedium:function(l){s=!0;var c=[];if(n.length){var d=n;n=[],d.forEach(l),c=n}var h=function(){var g=c;c=[],g.forEach(l)},p=function(){return Promise.resolve().then(h)};p(),n={push:function(g){c.push(g),p()},filter:function(g){return c=c.filter(g),n}}}};return r}function GT(a){a===void 0&&(a={});var t=$T(null);return t.options=fs({async:!0,ssr:!1},a),t}var kb=function(a){var t=a.sideCar,n=jb(a,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return x.createElement(s,fs({},n))};kb.isSideCarExport=!0;function QT(a,t){return a.useMedium(t),kb}var Db=GT(),Wf=function(){},Fc=x.forwardRef(function(a,t){var n=x.useRef(null),s=x.useState({onScrollCapture:Wf,onWheelCapture:Wf,onTouchMoveCapture:Wf}),r=s[0],l=s[1],c=a.forwardProps,d=a.children,h=a.className,p=a.removeScrollBar,g=a.enabled,m=a.shards,v=a.sideCar,w=a.noRelative,S=a.noIsolation,C=a.inert,R=a.allowPinchZoom,E=a.as,j=E===void 0?"div":E,N=a.gapMode,T=jb(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=v,U=UT([n,t]),I=fs(fs({},T),r);return x.createElement(x.Fragment,null,g&&x.createElement(k,{sideCar:Db,removeScrollBar:p,shards:m,noRelative:w,noIsolation:S,inert:C,setCallbacks:l,allowPinchZoom:!!R,lockRef:n,gapMode:N}),c?x.cloneElement(x.Children.only(d),fs(fs({},I),{ref:U})):x.createElement(j,fs({},I,{className:h,ref:U}),d))});Fc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fc.classNames={fullWidth:xc,zeroRight:bc};var FT=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function VT(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var t=FT();return t&&a.setAttribute("nonce",t),a}function KT(a,t){a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}function YT(a){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(a)}var XT=function(){var a=0,t=null;return{add:function(n){a==0&&(t=VT())&&(KT(t,n),YT(t)),a++},remove:function(){a--,!a&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},WT=function(){var a=XT();return function(t,n){x.useEffect(function(){return a.add(t),function(){a.remove()}},[t&&n])}},_b=function(){var a=WT(),t=function(n){var s=n.styles,r=n.dynamic;return a(s,r),null};return t},ZT={left:0,top:0,right:0,gap:0},Zf=function(a){return parseInt(a||"",10)||0},JT=function(a){var t=window.getComputedStyle(document.body),n=t[a==="padding"?"paddingLeft":"marginLeft"],s=t[a==="padding"?"paddingTop":"marginTop"],r=t[a==="padding"?"paddingRight":"marginRight"];return[Zf(n),Zf(s),Zf(r)]},ej=function(a){if(a===void 0&&(a="margin"),typeof window>"u")return ZT;var t=JT(a),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},tj=_b(),dr="data-scroll-locked",nj=function(a,t,n,s){var r=a.left,l=a.top,c=a.right,d=a.gap;return n===void 0&&(n="margin"),`
  .`.concat(PT,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(d,"px ").concat(s,`;
  }
  body[`).concat(dr,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(d,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bc,` {
    right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat(xc,` {
    margin-right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat(bc," .").concat(bc,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(xc," .").concat(xc,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(dr,`] {
    `).concat(IT,": ").concat(d,`px;
  }
`)},o0=function(){var a=parseInt(document.body.getAttribute(dr)||"0",10);return isFinite(a)?a:0},sj=function(){x.useEffect(function(){return document.body.setAttribute(dr,(o0()+1).toString()),function(){var a=o0()-1;a<=0?document.body.removeAttribute(dr):document.body.setAttribute(dr,a.toString())}},[])},oj=function(a){var t=a.noRelative,n=a.noImportant,s=a.gapMode,r=s===void 0?"margin":s;sj();var l=x.useMemo(function(){return ej(r)},[r]);return x.createElement(tj,{styles:nj(l,!t,r,n?"":"!important")})},dh=!1;if(typeof window<"u")try{var lc=Object.defineProperty({},"passive",{get:function(){return dh=!0,!0}});window.addEventListener("test",lc,lc),window.removeEventListener("test",lc,lc)}catch{dh=!1}var rr=dh?{passive:!1}:!1,aj=function(a){return a.tagName==="TEXTAREA"},zb=function(a,t){if(!(a instanceof Element))return!1;var n=window.getComputedStyle(a);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!aj(a)&&n[t]==="visible")},rj=function(a){return zb(a,"overflowY")},ij=function(a){return zb(a,"overflowX")},a0=function(a,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=Ob(a,s);if(r){var l=Lb(a,s),c=l[1],d=l[2];if(c>d)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},lj=function(a){var t=a.scrollTop,n=a.scrollHeight,s=a.clientHeight;return[t,n,s]},cj=function(a){var t=a.scrollLeft,n=a.scrollWidth,s=a.clientWidth;return[t,n,s]},Ob=function(a,t){return a==="v"?rj(t):ij(t)},Lb=function(a,t){return a==="v"?lj(t):cj(t)},uj=function(a,t){return a==="h"&&t==="rtl"?-1:1},dj=function(a,t,n,s,r){var l=uj(a,window.getComputedStyle(t).direction),c=l*s,d=n.target,h=t.contains(d),p=!1,g=c>0,m=0,v=0;do{if(!d)break;var w=Lb(a,d),S=w[0],C=w[1],R=w[2],E=C-R-l*S;(S||E)&&Ob(a,d)&&(m+=E,v+=S);var j=d.parentNode;d=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!h&&d!==document.body||h&&(t.contains(d)||t===d));return(g&&Math.abs(m)<1||!g&&Math.abs(v)<1)&&(p=!0),p},cc=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},r0=function(a){return[a.deltaX,a.deltaY]},i0=function(a){return a&&"current"in a?a.current:a},fj=function(a,t){return a[0]===t[0]&&a[1]===t[1]},hj=function(a){return`
  .block-interactivity-`.concat(a,` {pointer-events: none;}
  .allow-interactivity-`).concat(a,` {pointer-events: all;}
`)},pj=0,ir=[];function gj(a){var t=x.useRef([]),n=x.useRef([0,0]),s=x.useRef(),r=x.useState(pj++)[0],l=x.useState(_b)[0],c=x.useRef(a);x.useEffect(function(){c.current=a},[a]),x.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(r));var C=LT([a.lockRef.current],(a.shards||[]).map(i0),!0).filter(Boolean);return C.forEach(function(R){return R.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),C.forEach(function(R){return R.classList.remove("allow-interactivity-".concat(r))})}}},[a.inert,a.lockRef.current,a.shards]);var d=x.useCallback(function(C,R){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!c.current.allowPinchZoom;var E=cc(C),j=n.current,N="deltaX"in C?C.deltaX:j[0]-E[0],T="deltaY"in C?C.deltaY:j[1]-E[1],k,U=C.target,I=Math.abs(N)>Math.abs(T)?"h":"v";if("touches"in C&&I==="h"&&U.type==="range")return!1;var q=a0(I,U);if(!q)return!0;if(q?k=I:(k=I==="v"?"h":"v",q=a0(I,U)),!q)return!1;if(!s.current&&"changedTouches"in C&&(N||T)&&(s.current=k),!k)return!0;var te=s.current||k;return dj(te,R,C,te==="h"?N:T)},[]),h=x.useCallback(function(C){var R=C;if(!(!ir.length||ir[ir.length-1]!==l)){var E="deltaY"in R?r0(R):cc(R),j=t.current.filter(function(k){return k.name===R.type&&(k.target===R.target||R.target===k.shadowParent)&&fj(k.delta,E)})[0];if(j&&j.should){R.cancelable&&R.preventDefault();return}if(!j){var N=(c.current.shards||[]).map(i0).filter(Boolean).filter(function(k){return k.contains(R.target)}),T=N.length>0?d(R,N[0]):!c.current.noIsolation;T&&R.cancelable&&R.preventDefault()}}},[]),p=x.useCallback(function(C,R,E,j){var N={name:C,delta:R,target:E,should:j,shadowParent:mj(E)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(T){return T!==N})},1)},[]),g=x.useCallback(function(C){n.current=cc(C),s.current=void 0},[]),m=x.useCallback(function(C){p(C.type,r0(C),C.target,d(C,a.lockRef.current))},[]),v=x.useCallback(function(C){p(C.type,cc(C),C.target,d(C,a.lockRef.current))},[]);x.useEffect(function(){return ir.push(l),a.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",h,rr),document.addEventListener("touchmove",h,rr),document.addEventListener("touchstart",g,rr),function(){ir=ir.filter(function(C){return C!==l}),document.removeEventListener("wheel",h,rr),document.removeEventListener("touchmove",h,rr),document.removeEventListener("touchstart",g,rr)}},[]);var w=a.removeScrollBar,S=a.inert;return x.createElement(x.Fragment,null,S?x.createElement(l,{styles:hj(r)}):null,w?x.createElement(oj,{noRelative:a.noRelative,gapMode:a.gapMode}):null)}function mj(a){for(var t=null;a!==null;)a instanceof ShadowRoot&&(t=a.host,a=a.host),a=a.parentNode;return t}const yj=QT(Db,gj);var Ii=x.forwardRef(function(a,t){return x.createElement(Fc,fs({},a,{ref:t,sideCar:yj}))});Ii.classNames=Fc.classNames;var vj=function(a){if(typeof document>"u")return null;var t=Array.isArray(a)?a[0]:a;return t.ownerDocument.body},lr=new WeakMap,uc=new WeakMap,dc={},Jf=0,Pb=function(a){return a&&(a.host||Pb(a.parentNode))},bj=function(a,t){return t.map(function(n){if(a.contains(n))return n;var s=Pb(n);return s&&a.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",a,". Doing nothing"),null)}).filter(function(n){return!!n})},xj=function(a,t,n,s){var r=bj(t,Array.isArray(a)?a:[a]);dc[n]||(dc[n]=new WeakMap);var l=dc[n],c=[],d=new Set,h=new Set(r),p=function(m){!m||d.has(m)||(d.add(m),p(m.parentNode))};r.forEach(p);var g=function(m){!m||h.has(m)||Array.prototype.forEach.call(m.children,function(v){if(d.has(v))g(v);else try{var w=v.getAttribute(s),S=w!==null&&w!=="false",C=(lr.get(v)||0)+1,R=(l.get(v)||0)+1;lr.set(v,C),l.set(v,R),c.push(v),C===1&&S&&uc.set(v,!0),R===1&&v.setAttribute(n,"true"),S||v.setAttribute(s,"true")}catch(E){console.error("aria-hidden: cannot operate on ",v,E)}})};return g(t),d.clear(),Jf++,function(){c.forEach(function(m){var v=lr.get(m)-1,w=l.get(m)-1;lr.set(m,v),l.set(m,w),v||(uc.has(m)||m.removeAttribute(s),uc.delete(m)),w||m.removeAttribute(n)}),Jf--,Jf||(lr=new WeakMap,lr=new WeakMap,uc=new WeakMap,dc={})}},Vc=function(a,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(a)?a:[a]),r=vj(a);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),xj(s,r,n,"aria-hidden")):function(){return null}};function wj(a){const t=Cj(a),n=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(Mj);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(t,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(t,{...c,ref:r,children:l})});return n.displayName=`${a}.Slot`,n}function Cj(a){const t=x.forwardRef((n,s)=>{const{children:r,...l}=n;if(x.isValidElement(r)){const c=Rj(r),d=Ej(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return t.displayName=`${a}.SlotClone`,t}var Sj=Symbol("radix.slottable");function Mj(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===Sj}function Ej(a,t){const n={...t};for(const s in t){const r=a[s],l=t[s];/^on[A-Z]/.test(s)?r&&l?n[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(n[s]=r):s==="style"?n[s]={...r,...l}:s==="className"&&(n[s]=[r,l].filter(Boolean).join(" "))}return{...a,...n}}function Rj(a){let t=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?a.ref:(t=Object.getOwnPropertyDescriptor(a,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?a.props.ref:a.props.ref||a.ref)}var Kc="Dialog",[Ib,qb]=bn(Kc),[Nj,as]=Ib(Kc),Hb=a=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:r,onOpenChange:l,modal:c=!0}=a,d=x.useRef(null),h=x.useRef(null),[p,g]=xs({prop:s,defaultProp:r??!1,onChange:l,caller:Kc});return f.jsx(Nj,{scope:t,triggerRef:d,contentRef:h,contentId:ns(),titleId:ns(),descriptionId:ns(),open:p,onOpenChange:g,onOpenToggle:x.useCallback(()=>g(m=>!m),[g]),modal:c,children:n})};Hb.displayName=Kc;var Ub="DialogTrigger",Bb=x.forwardRef((a,t)=>{const{__scopeDialog:n,...s}=a,r=as(Ub,n),l=De(t,r.triggerRef);return f.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Vh(r.open),...s,ref:l,onClick:ge(a.onClick,r.onOpenToggle)})});Bb.displayName=Ub;var Qh="DialogPortal",[Aj,$b]=Ib(Qh,{forceMount:void 0}),Gb=a=>{const{__scopeDialog:t,forceMount:n,children:s,container:r}=a,l=as(Qh,t);return f.jsx(Aj,{scope:t,forceMount:n,children:x.Children.map(s,c=>f.jsx(rn,{present:n||l.open,children:f.jsx(Pi,{asChild:!0,container:r,children:c})}))})};Gb.displayName=Qh;var jc="DialogOverlay",Qb=x.forwardRef((a,t)=>{const n=$b(jc,a.__scopeDialog),{forceMount:s=n.forceMount,...r}=a,l=as(jc,a.__scopeDialog);return l.modal?f.jsx(rn,{present:s||l.open,children:f.jsx(jj,{...r,ref:t})}):null});Qb.displayName=jc;var Tj=wj("DialogOverlay.RemoveScroll"),jj=x.forwardRef((a,t)=>{const{__scopeDialog:n,...s}=a,r=as(jc,n);return f.jsx(Ii,{as:Tj,allowPinchZoom:!0,shards:[r.contentRef],children:f.jsx(Ae.div,{"data-state":Vh(r.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),pa="DialogContent",Fb=x.forwardRef((a,t)=>{const n=$b(pa,a.__scopeDialog),{forceMount:s=n.forceMount,...r}=a,l=as(pa,a.__scopeDialog);return f.jsx(rn,{present:s||l.open,children:l.modal?f.jsx(kj,{...r,ref:t}):f.jsx(Dj,{...r,ref:t})})});Fb.displayName=pa;var kj=x.forwardRef((a,t)=>{const n=as(pa,a.__scopeDialog),s=x.useRef(null),r=De(t,n.contentRef,s);return x.useEffect(()=>{const l=s.current;if(l)return Vc(l)},[]),f.jsx(Vb,{...a,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(a.onCloseAutoFocus,l=>{l.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:ge(a.onPointerDownOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0;(c.button===2||d)&&l.preventDefault()}),onFocusOutside:ge(a.onFocusOutside,l=>l.preventDefault())})}),Dj=x.forwardRef((a,t)=>{const n=as(pa,a.__scopeDialog),s=x.useRef(!1),r=x.useRef(!1);return f.jsx(Vb,{...a,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{a.onCloseAutoFocus?.(l),l.defaultPrevented||(s.current||n.triggerRef.current?.focus(),l.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:l=>{a.onInteractOutside?.(l),l.defaultPrevented||(s.current=!0,l.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const c=l.target;n.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&r.current&&l.preventDefault()}})}),Vb=x.forwardRef((a,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:l,...c}=a,d=as(pa,n),h=x.useRef(null),p=De(t,h);return Qc(),f.jsxs(f.Fragment,{children:[f.jsx(Li,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:l,children:f.jsx(Oi,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":Vh(d.open),...c,ref:p,onDismiss:()=>d.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(zj,{titleId:d.titleId}),f.jsx(Lj,{contentRef:h,descriptionId:d.descriptionId})]})]})}),Fh="DialogTitle",Kb=x.forwardRef((a,t)=>{const{__scopeDialog:n,...s}=a,r=as(Fh,n);return f.jsx(Ae.h2,{id:r.titleId,...s,ref:t})});Kb.displayName=Fh;var Yb="DialogDescription",Xb=x.forwardRef((a,t)=>{const{__scopeDialog:n,...s}=a,r=as(Yb,n);return f.jsx(Ae.p,{id:r.descriptionId,...s,ref:t})});Xb.displayName=Yb;var Wb="DialogClose",Zb=x.forwardRef((a,t)=>{const{__scopeDialog:n,...s}=a,r=as(Wb,n);return f.jsx(Ae.button,{type:"button",...s,ref:t,onClick:ge(a.onClick,()=>r.onOpenChange(!1))})});Zb.displayName=Wb;function Vh(a){return a?"open":"closed"}var Jb="DialogTitleWarning",[_j,ex]=QA(Jb,{contentName:pa,titleName:Fh,docsSlug:"dialog"}),zj=({titleId:a})=>{const t=ex(Jb),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{a&&(document.getElementById(a)||console.error(n))},[n,a]),null},Oj="DialogDescriptionWarning",Lj=({contentRef:a,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ex(Oj).contentName}}.`;return x.useEffect(()=>{const r=a.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(s))},[s,a,t]),null},tx=Hb,Pj=Bb,nx=Gb,Kh=Qb,Yh=Fb,Xh=Kb,Wh=Xb,Zh=Zb,Ij=Symbol("radix.slottable");function qj(a){const t=({children:n})=>f.jsx(f.Fragment,{children:n});return t.displayName=`${a}.Slottable`,t.__radixId=Ij,t}var sx="AlertDialog",[Hj]=bn(sx,[qb]),oo=qb(),ox=a=>{const{__scopeAlertDialog:t,...n}=a,s=oo(t);return f.jsx(tx,{...s,...n,modal:!0})};ox.displayName=sx;var Uj="AlertDialogTrigger",Bj=x.forwardRef((a,t)=>{const{__scopeAlertDialog:n,...s}=a,r=oo(n);return f.jsx(Pj,{...r,...s,ref:t})});Bj.displayName=Uj;var $j="AlertDialogPortal",ax=a=>{const{__scopeAlertDialog:t,...n}=a,s=oo(t);return f.jsx(nx,{...s,...n})};ax.displayName=$j;var Gj="AlertDialogOverlay",rx=x.forwardRef((a,t)=>{const{__scopeAlertDialog:n,...s}=a,r=oo(n);return f.jsx(Kh,{...r,...s,ref:t})});rx.displayName=Gj;var fr="AlertDialogContent",[Qj,Fj]=Hj(fr),Vj=qj("AlertDialogContent"),ix=x.forwardRef((a,t)=>{const{__scopeAlertDialog:n,children:s,...r}=a,l=oo(n),c=x.useRef(null),d=De(t,c),h=x.useRef(null);return f.jsx(_j,{contentName:fr,titleName:lx,docsSlug:"alert-dialog",children:f.jsx(Qj,{scope:n,cancelRef:h,children:f.jsxs(Yh,{role:"alertdialog",...l,...r,ref:d,onOpenAutoFocus:ge(r.onOpenAutoFocus,p=>{p.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[f.jsx(Vj,{children:s}),f.jsx(Yj,{contentRef:c})]})})})});ix.displayName=fr;var lx="AlertDialogTitle",cx=x.forwardRef((a,t)=>{const{__scopeAlertDialog:n,...s}=a,r=oo(n);return f.jsx(Xh,{...r,...s,ref:t})});cx.displayName=lx;var ux="AlertDialogDescription",dx=x.forwardRef((a,t)=>{const{__scopeAlertDialog:n,...s}=a,r=oo(n);return f.jsx(Wh,{...r,...s,ref:t})});dx.displayName=ux;var Kj="AlertDialogAction",fx=x.forwardRef((a,t)=>{const{__scopeAlertDialog:n,...s}=a,r=oo(n);return f.jsx(Zh,{...r,...s,ref:t})});fx.displayName=Kj;var hx="AlertDialogCancel",px=x.forwardRef((a,t)=>{const{__scopeAlertDialog:n,...s}=a,{cancelRef:r}=Fj(hx,n),l=oo(n),c=De(t,r);return f.jsx(Zh,{...l,...s,ref:c})});px.displayName=hx;var Yj=({contentRef:a})=>{const t=`\`${fr}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${fr}\` by passing a \`${ux}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${fr}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,a]),null},Xj=ox,Wj=ax,gx=rx,mx=ix,yx=fx,vx=px,bx=cx,xx=dx;const wx=Xj,Zj=Wj,Cx=x.forwardRef(({className:a,...t},n)=>f.jsx(gx,{className:Ee("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:n}));Cx.displayName=gx.displayName;const Jh=x.forwardRef(({className:a,...t},n)=>f.jsxs(Zj,{children:[f.jsx(Cx,{}),f.jsx(mx,{ref:n,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t})]}));Jh.displayName=mx.displayName;const Sx=({className:a,...t})=>f.jsx("div",{className:Ee("flex flex-col space-y-2 text-center sm:text-left",a),...t});Sx.displayName="AlertDialogHeader";const Mx=({className:a,...t})=>f.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t});Mx.displayName="AlertDialogFooter";const ep=x.forwardRef(({className:a,...t},n)=>f.jsx(bx,{ref:n,className:Ee("text-lg font-semibold",a),...t}));ep.displayName=bx.displayName;const tp=x.forwardRef(({className:a,...t},n)=>f.jsx(xx,{ref:n,className:Ee("text-sm text-muted-foreground",a),...t}));tp.displayName=xx.displayName;const np=x.forwardRef(({className:a,...t},n)=>f.jsx(yx,{ref:n,className:Ee(zh(),a),...t}));np.displayName=yx.displayName;const sp=x.forwardRef(({className:a,...t},n)=>f.jsx(vx,{ref:n,className:Ee(zh({variant:"outline"}),"mt-2 sm:mt-0",a),...t}));sp.displayName=vx.displayName;const op=tx,Jj=nx,Ex=x.forwardRef(({className:a,...t},n)=>f.jsx(Kh,{ref:n,className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t}));Ex.displayName=Kh.displayName;const Yc=x.forwardRef(({className:a,children:t,...n},s)=>f.jsxs(Jj,{children:[f.jsx(Ex,{}),f.jsxs(Yh,{ref:s,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[t,f.jsxs(Zh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[f.jsx(vs,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Yc.displayName=Yh.displayName;const Xc=({className:a,...t})=>f.jsx("div",{className:Ee("flex flex-col space-y-1.5 text-center sm:text-left",a),...t});Xc.displayName="DialogHeader";const Wc=({className:a,...t})=>f.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t});Wc.displayName="DialogFooter";const Zc=x.forwardRef(({className:a,...t},n)=>f.jsx(Xh,{ref:n,className:Ee("text-lg font-semibold leading-none tracking-tight",a),...t}));Zc.displayName=Xh.displayName;const Jc=x.forwardRef(({className:a,...t},n)=>f.jsx(Wh,{ref:n,className:Ee("text-sm text-muted-foreground",a),...t}));Jc.displayName=Wh.displayName;var ek=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tk=ek.reduce((a,t)=>{const n=kh(`Primitive.${t}`),s=x.forwardRef((r,l)=>{const{asChild:c,...d}=r,h=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(h,{...d,ref:l})});return s.displayName=`Primitive.${t}`,{...a,[t]:s}},{}),nk="Label",Rx=x.forwardRef((a,t)=>f.jsx(tk.label,{...a,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(a.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Rx.displayName=nk;var Nx=Rx;const sk=Dh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),nt=x.forwardRef(({className:a,...t},n)=>f.jsx(Nx,{ref:n,className:Ee(sk(),a),...t}));nt.displayName=Nx.displayName;function ap({open:a,initialName:t="",onConfirm:n,onCancel:s}){const[r,l]=x.useState(t);x.useEffect(()=>{a&&l(t)},[a,t]);const c=()=>{r.trim()&&n(r.trim())};return f.jsx(op,{open:a,onOpenChange:d=>!d&&s(),children:f.jsxs(Yc,{children:[f.jsxs(Xc,{children:[f.jsx(Zc,{children:t?"Rename Group":"Create Group"}),f.jsx(Jc,{children:t?"Enter a new name for the group":"Enter a name for the new group"})]}),f.jsxs("div",{className:"py-4",children:[f.jsx(nt,{htmlFor:"group-name",children:"Group Name"}),f.jsx(Tt,{id:"group-name",value:r,onChange:d=>l(d.target.value),onKeyDown:d=>{d.key==="Enter"&&c()},className:"mt-2",autoFocus:!0})]}),f.jsxs(Wc,{children:[f.jsx(Te,{variant:"outline",onClick:s,children:"Cancel"}),f.jsx(Te,{onClick:c,disabled:!r.trim(),children:t?"Save":"Create"})]})]})})}function ok(){const{zoom:a,setZoom:t,diagramName:n,setDiagramName:s,saveDiagram:r,loadDiagramState:l,undo:c,redo:d,selectedNodeId:h,createGroupFromSelection:p,autoGroupByConnections:g,nodes:m,pan:v,setPan:w,viewportWidth:S,viewportHeight:C}=Re(),{canUndo:R,canRedo:E}=Si(),j=x.useRef(null),[N,T]=x.useState(!1),[k,U]=x.useState(n),[I,q]=x.useState(!1),{showMinimap:te,toggleMinimap:se,showHeatMapLegend:le,toggleHeatMapLegend:ee,showRuler:oe,toggleRuler:ce}=zi(),ue=()=>t(Math.min(a+.1,2)),z=()=>t(a-.1),D=()=>{const ae=m;if(!ae.length){t(1),w({x:0,y:0});return}const B=100,V=ae.map(Qt=>Qt.position.x),pe=ae.map(Qt=>Qt.position.y),me=ae.map(Qt=>Qt.position.x+140),ye=ae.map(Qt=>Qt.position.y+140),ve=Math.min(...V)-B,Pe=Math.min(...pe)-B,Ue=Math.max(...me)+B,st=Math.max(...ye)+B,We=Ue-ve,kt=st-Pe,de=S||window.innerWidth,He=C||window.innerHeight-56,Be=de/We,yt=He/kt;let pt=Math.min(Be,yt);pt=Math.min(Math.max(pt,.2),2.5);const qt=ve+We/2,Ze=Pe+kt/2,Dt=de/2,vt=He/2,gt=Dt-qt*pt,Yt=vt-Ze*pt;t(pt),w({x:gt,y:Yt})},L=()=>{r(),Ke.success("Diagram saved to browser storage")},Y=()=>{const ae=`${n.replace(/\s+/g,"_")}_${Date.now()}.json`;kN(Re.getState(),ae),Ke.success("Diagram exported as JSON")},he=()=>{j.current?.click()},_=async ae=>{const B=ae.target.files?.[0];if(B){try{const V=await DN(B);if(!V){Ke.error("Failed to import diagram: Invalid file format");return}l({nodes:V.nodes||[],connections:V.connections||[],groups:V.groups||[],zoom:V.zoom||1,pan:V.pan||{x:0,y:0}}),s(V.name),Ke.success(`Diagram "${V.name}" imported successfully`)}catch(V){Ke.error("Failed to import diagram"),to("Failed to import diagram",V instanceof Error?V:new Error(String(V)))}j.current&&(j.current.value="")}},$=()=>{k.trim()&&(s(k.trim()),Ke.success("Diagram renamed")),T(!1)},X=()=>{const{nodes:ae}=Re.getState();if(ae.filter(V=>V.selected||V.id===h).length===0){Ke.error("Select at least one component to create a group");return}q(!0)},W=ae=>{p(ae),Ke.success(`Group "${ae}" created`),q(!1)},F=()=>{g(),Ke.success("Groups created automatically from connections")};return f.jsxs(f.Fragment,{children:[f.jsx(ap,{open:I,onConfirm:W,onCancel:()=>q(!1)}),f.jsxs("div",{className:"h-14 bg-toolbar-bg border-b border-border flex items-center justify-between px-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{onClick:()=>T(!0),className:"text-lg font-semibold text-foreground hover:text-primary transition-colors cursor-pointer",title:"Click to rename diagram",children:[f.jsx("span",{className:"text-primary",children:"Archi"}),"Phoenix",f.jsxs("span",{className:"text-xs text-secondary-foreground ml-2",children:[" ",n]})]}),f.jsx(vn,{orientation:"vertical",className:"h-6 mx-2"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:c,disabled:!R,title:"Undo (Ctrl/Cmd+Z)",children:f.jsx(EA,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:d,disabled:!E,title:"Redo (Ctrl/Cmd+Shift+Z or Ctrl/Cmd+Y)",children:f.jsx(sA,{className:"h-4 w-4"})})]}),f.jsx(vn,{orientation:"vertical",className:"h-6 mx-2"}),f.jsx(iT,{})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"flex items-center gap-1 bg-secondary/50 rounded-md p-1",children:[f.jsx(Te,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:ue,title:"Zoom In",children:f.jsx(kA,{className:"h-4 w-4"})}),f.jsxs("span",{className:"text-sm font-mono px-2 min-w-[60px] text-center",children:[Math.round(a*100),"%"]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:z,title:"Zoom Out",children:f.jsx(_A,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:D,title:"Fit to View",children:f.jsx(F2,{className:"h-4 w-4"})})]}),f.jsx(vn,{orientation:"vertical",className:"h-6"}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:L,title:"Save diagram to browser storage (auto-saves on changes)",children:f.jsx(uA,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:Y,title:"Export diagram as JSON file",children:f.jsx(T2,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:he,title:"Import diagram from JSON file",children:f.jsx(NA,{className:"h-4 w-4"})}),f.jsx(vn,{orientation:"vertical",className:"h-6"}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",title:"Create group from selection",onClick:X,disabled:!h,children:f.jsx(cb,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",title:"Auto-group by connections",onClick:F,children:f.jsx(mA,{className:"h-4 w-4"})}),f.jsx(vn,{orientation:"vertical",className:"h-6"}),f.jsx(zA,{}),f.jsx(Te,{variant:te?"default":"ghost",size:"icon",className:"h-9 w-9",title:te?"Hide minimap":"Show minimap",onClick:se,children:f.jsx(G2,{className:"h-4 w-4"})}),f.jsx(Te,{variant:le?"default":"ghost",size:"icon",className:"h-9 w-9",title:le?"Hide heat map legend":"Show heat map legend",onClick:ee,children:f.jsx(ha,{className:"h-4 w-4"})}),f.jsx(Te,{variant:oe?"default":"ghost",size:"icon",className:"h-9 w-9",title:oe?"Hide ruler":"Show ruler",onClick:ce,children:f.jsx(lA,{className:"h-4 w-4"})}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-9 w-9",title:"Settings",children:f.jsx(pA,{className:"h-4 w-4"})})]})]}),f.jsx("input",{ref:j,type:"file",accept:".json",onChange:_,className:"hidden","aria-label":"Import diagram from file"}),f.jsx(wx,{open:N,onOpenChange:T,children:f.jsxs(Jh,{children:[f.jsx(ep,{children:"Rename Diagram"}),f.jsx(tp,{children:"Enter a new name for your diagram"}),f.jsx("div",{className:"py-4",children:f.jsx(Tt,{value:k,onChange:ae=>U(ae.target.value),placeholder:"Diagram name",onKeyDown:ae=>{ae.key==="Enter"&&$()},autoFocus:!0})}),f.jsxs("div",{className:"flex gap-2 justify-end",children:[f.jsx(sp,{children:"Cancel"}),f.jsx(np,{onClick:$,children:"Save"})]})]})})]})}function l0(a){const t=ak(a),n=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(ik);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(t,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(t,{...c,ref:r,children:l})});return n.displayName=`${a}.Slot`,n}function ak(a){const t=x.forwardRef((n,s)=>{const{children:r,...l}=n;if(x.isValidElement(r)){const c=ck(r),d=lk(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return t.displayName=`${a}.SlotClone`,t}var rk=Symbol("radix.slottable");function ik(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===rk}function lk(a,t){const n={...t};for(const s in t){const r=a[s],l=t[s];/^on[A-Z]/.test(s)?r&&l?n[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(n[s]=r):s==="style"?n[s]={...r,...l}:s==="className"&&(n[s]=[r,l].filter(Boolean).join(" "))}return{...a,...n}}function ck(a){let t=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?a.ref:(t=Object.getOwnPropertyDescriptor(a,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?a.props.ref:a.props.ref||a.ref)}function eu(a){const t=a+"CollectionProvider",[n,s]=bn(t),[r,l]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=C=>{const{scope:R,children:E}=C,j=Et.useRef(null),N=Et.useRef(new Map).current;return f.jsx(r,{scope:R,itemMap:N,collectionRef:j,children:E})};c.displayName=t;const d=a+"CollectionSlot",h=l0(d),p=Et.forwardRef((C,R)=>{const{scope:E,children:j}=C,N=l(d,E),T=De(R,N.collectionRef);return f.jsx(h,{ref:T,children:j})});p.displayName=d;const g=a+"CollectionItemSlot",m="data-radix-collection-item",v=l0(g),w=Et.forwardRef((C,R)=>{const{scope:E,children:j,...N}=C,T=Et.useRef(null),k=De(R,T),U=l(g,E);return Et.useEffect(()=>(U.itemMap.set(T,{ref:T,...N}),()=>void U.itemMap.delete(T))),f.jsx(v,{[m]:"",ref:k,children:j})});w.displayName=g;function S(C){const R=l(a+"CollectionConsumer",C);return Et.useCallback(()=>{const j=R.collectionRef.current;if(!j)return[];const N=Array.from(j.querySelectorAll(`[${m}]`));return Array.from(R.itemMap.values()).sort((U,I)=>N.indexOf(U.ref.current)-N.indexOf(I.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:c,Slot:p,ItemSlot:w},S,s]}var eh="rovingFocusGroup.onEntryFocus",uk={bubbles:!1,cancelable:!0},qi="RovingFocusGroup",[fh,Ax,dk]=eu(qi),[fk,tu]=bn(qi,[dk]),[hk,pk]=fk(qi),Tx=x.forwardRef((a,t)=>f.jsx(fh.Provider,{scope:a.__scopeRovingFocusGroup,children:f.jsx(fh.Slot,{scope:a.__scopeRovingFocusGroup,children:f.jsx(gk,{...a,ref:t})})}));Tx.displayName=qi;var gk=x.forwardRef((a,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,...m}=a,v=x.useRef(null),w=De(t,v),S=wr(l),[C,R]=xs({prop:c,defaultProp:d??null,onChange:h,caller:qi}),[E,j]=x.useState(!1),N=nn(p),T=Ax(n),k=x.useRef(!1),[U,I]=x.useState(0);return x.useEffect(()=>{const q=v.current;if(q)return q.addEventListener(eh,N),()=>q.removeEventListener(eh,N)},[N]),f.jsx(hk,{scope:n,orientation:s,dir:S,loop:r,currentTabStopId:C,onItemFocus:x.useCallback(q=>R(q),[R]),onItemShiftTab:x.useCallback(()=>j(!0),[]),onFocusableItemAdd:x.useCallback(()=>I(q=>q+1),[]),onFocusableItemRemove:x.useCallback(()=>I(q=>q-1),[]),children:f.jsx(Ae.div,{tabIndex:E||U===0?-1:0,"data-orientation":s,...m,ref:w,style:{outline:"none",...a.style},onMouseDown:ge(a.onMouseDown,()=>{k.current=!0}),onFocus:ge(a.onFocus,q=>{const te=!k.current;if(q.target===q.currentTarget&&te&&!E){const se=new CustomEvent(eh,uk);if(q.currentTarget.dispatchEvent(se),!se.defaultPrevented){const le=T().filter(z=>z.focusable),ee=le.find(z=>z.active),oe=le.find(z=>z.id===C),ue=[ee,oe,...le].filter(Boolean).map(z=>z.ref.current);Dx(ue,g)}}k.current=!1}),onBlur:ge(a.onBlur,()=>j(!1))})})}),jx="RovingFocusGroupItem",kx=x.forwardRef((a,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:l,children:c,...d}=a,h=ns(),p=l||h,g=pk(jx,n),m=g.currentTabStopId===p,v=Ax(n),{onFocusableItemAdd:w,onFocusableItemRemove:S,currentTabStopId:C}=g;return x.useEffect(()=>{if(s)return w(),()=>S()},[s,w,S]),f.jsx(fh.ItemSlot,{scope:n,id:p,focusable:s,active:r,children:f.jsx(Ae.span,{tabIndex:m?0:-1,"data-orientation":g.orientation,...d,ref:t,onMouseDown:ge(a.onMouseDown,R=>{s?g.onItemFocus(p):R.preventDefault()}),onFocus:ge(a.onFocus,()=>g.onItemFocus(p)),onKeyDown:ge(a.onKeyDown,R=>{if(R.key==="Tab"&&R.shiftKey){g.onItemShiftTab();return}if(R.target!==R.currentTarget)return;const E=vk(R,g.orientation,g.dir);if(E!==void 0){if(R.metaKey||R.ctrlKey||R.altKey||R.shiftKey)return;R.preventDefault();let N=v().filter(T=>T.focusable).map(T=>T.ref.current);if(E==="last")N.reverse();else if(E==="prev"||E==="next"){E==="prev"&&N.reverse();const T=N.indexOf(R.currentTarget);N=g.loop?bk(N,T+1):N.slice(T+1)}setTimeout(()=>Dx(N))}}),children:typeof c=="function"?c({isCurrentTabStop:m,hasTabStop:C!=null}):c})})});kx.displayName=jx;var mk={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function yk(a,t){return t!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function vk(a,t,n){const s=yk(a.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return mk[s]}function Dx(a,t=!1){const n=document.activeElement;for(const s of a)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function bk(a,t){return a.map((n,s)=>a[(t+s)%a.length])}var _x=Tx,zx=kx,nu="Tabs",[xk]=bn(nu,[tu]),Ox=tu(),[wk,rp]=xk(nu),Lx=x.forwardRef((a,t)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:l,orientation:c="horizontal",dir:d,activationMode:h="automatic",...p}=a,g=wr(d),[m,v]=xs({prop:s,onChange:r,defaultProp:l??"",caller:nu});return f.jsx(wk,{scope:n,baseId:ns(),value:m,onValueChange:v,orientation:c,dir:g,activationMode:h,children:f.jsx(Ae.div,{dir:g,"data-orientation":c,...p,ref:t})})});Lx.displayName=nu;var Px="TabsList",Ix=x.forwardRef((a,t)=>{const{__scopeTabs:n,loop:s=!0,...r}=a,l=rp(Px,n),c=Ox(n);return f.jsx(_x,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:s,children:f.jsx(Ae.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:t})})});Ix.displayName=Px;var qx="TabsTrigger",Hx=x.forwardRef((a,t)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...l}=a,c=rp(qx,n),d=Ox(n),h=$x(c.baseId,s),p=Gx(c.baseId,s),g=s===c.value;return f.jsx(zx,{asChild:!0,...d,focusable:!r,active:g,children:f.jsx(Ae.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":p,"data-state":g?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:h,...l,ref:t,onMouseDown:ge(a.onMouseDown,m=>{!r&&m.button===0&&m.ctrlKey===!1?c.onValueChange(s):m.preventDefault()}),onKeyDown:ge(a.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&c.onValueChange(s)}),onFocus:ge(a.onFocus,()=>{const m=c.activationMode!=="manual";!g&&!r&&m&&c.onValueChange(s)})})})});Hx.displayName=qx;var Ux="TabsContent",Bx=x.forwardRef((a,t)=>{const{__scopeTabs:n,value:s,forceMount:r,children:l,...c}=a,d=rp(Ux,n),h=$x(d.baseId,s),p=Gx(d.baseId,s),g=s===d.value,m=x.useRef(g);return x.useEffect(()=>{const v=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(v)},[]),f.jsx(rn,{present:r||g,children:({present:v})=>f.jsx(Ae.div,{"data-state":g?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:p,tabIndex:0,...c,ref:t,style:{...a.style,animationDuration:m.current?"0s":void 0},children:v&&l})})});Bx.displayName=Ux;function $x(a,t){return`${a}-trigger-${t}`}function Gx(a,t){return`${a}-content-${t}`}var Ck=Lx,Qx=Ix,Fx=Hx,Vx=Bx;const ip=Ck,su=x.forwardRef(({className:a,...t},n)=>f.jsx(Qx,{ref:n,className:Ee("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...t}));su.displayName=Qx.displayName;const hs=x.forwardRef(({className:a,...t},n)=>f.jsx(Fx,{ref:n,className:Ee("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...t}));hs.displayName=Fx.displayName;const zo=x.forwardRef(({className:a,...t},n)=>f.jsx(Vx,{ref:n,className:Ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...t}));zo.displayName=Vx.displayName;const Sk=["top","right","bottom","left"],Lo=Math.min,Nn=Math.max,kc=Math.round,fc=Math.floor,bs=a=>({x:a,y:a}),Mk={left:"right",right:"left",bottom:"top",top:"bottom"},Ek={start:"end",end:"start"};function hh(a,t,n){return Nn(a,Lo(t,n))}function no(a,t){return typeof a=="function"?a(t):a}function so(a){return a.split("-")[0]}function Cr(a){return a.split("-")[1]}function lp(a){return a==="x"?"y":"x"}function cp(a){return a==="y"?"height":"width"}const Rk=new Set(["top","bottom"]);function gs(a){return Rk.has(so(a))?"y":"x"}function up(a){return lp(gs(a))}function Nk(a,t,n){n===void 0&&(n=!1);const s=Cr(a),r=up(a),l=cp(r);let c=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[l]>t.floating[l]&&(c=Dc(c)),[c,Dc(c)]}function Ak(a){const t=Dc(a);return[ph(a),t,ph(t)]}function ph(a){return a.replace(/start|end/g,t=>Ek[t])}const c0=["left","right"],u0=["right","left"],Tk=["top","bottom"],jk=["bottom","top"];function kk(a,t,n){switch(a){case"top":case"bottom":return n?t?u0:c0:t?c0:u0;case"left":case"right":return t?Tk:jk;default:return[]}}function Dk(a,t,n,s){const r=Cr(a);let l=kk(so(a),n==="start",s);return r&&(l=l.map(c=>c+"-"+r),t&&(l=l.concat(l.map(ph)))),l}function Dc(a){return a.replace(/left|right|bottom|top/g,t=>Mk[t])}function _k(a){return{top:0,right:0,bottom:0,left:0,...a}}function Kx(a){return typeof a!="number"?_k(a):{top:a,right:a,bottom:a,left:a}}function _c(a){const{x:t,y:n,width:s,height:r}=a;return{width:s,height:r,top:n,left:t,right:t+s,bottom:n+r,x:t,y:n}}function d0(a,t,n){let{reference:s,floating:r}=a;const l=gs(t),c=up(t),d=cp(c),h=so(t),p=l==="y",g=s.x+s.width/2-r.width/2,m=s.y+s.height/2-r.height/2,v=s[d]/2-r[d]/2;let w;switch(h){case"top":w={x:g,y:s.y-r.height};break;case"bottom":w={x:g,y:s.y+s.height};break;case"right":w={x:s.x+s.width,y:m};break;case"left":w={x:s.x-r.width,y:m};break;default:w={x:s.x,y:s.y}}switch(Cr(t)){case"start":w[c]-=v*(n&&p?-1:1);break;case"end":w[c]+=v*(n&&p?-1:1);break}return w}const zk=async(a,t,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:l=[],platform:c}=n,d=l.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(t));let p=await c.getElementRects({reference:a,floating:t,strategy:r}),{x:g,y:m}=d0(p,s,h),v=s,w={},S=0;for(let C=0;C<d.length;C++){const{name:R,fn:E}=d[C],{x:j,y:N,data:T,reset:k}=await E({x:g,y:m,initialPlacement:s,placement:v,strategy:r,middlewareData:w,rects:p,platform:c,elements:{reference:a,floating:t}});g=j??g,m=N??m,w={...w,[R]:{...w[R],...T}},k&&S<=50&&(S++,typeof k=="object"&&(k.placement&&(v=k.placement),k.rects&&(p=k.rects===!0?await c.getElementRects({reference:a,floating:t,strategy:r}):k.rects),{x:g,y:m}=d0(p,v,h)),C=-1)}return{x:g,y:m,placement:v,strategy:r,middlewareData:w}};async function Ai(a,t){var n;t===void 0&&(t={});const{x:s,y:r,platform:l,rects:c,elements:d,strategy:h}=a,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:m="floating",altBoundary:v=!1,padding:w=0}=no(t,a),S=Kx(w),R=d[v?m==="floating"?"reference":"floating":m],E=_c(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(R)))==null||n?R:R.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:p,rootBoundary:g,strategy:h})),j=m==="floating"?{x:s,y:r,width:c.floating.width,height:c.floating.height}:c.reference,N=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),T=await(l.isElement==null?void 0:l.isElement(N))?await(l.getScale==null?void 0:l.getScale(N))||{x:1,y:1}:{x:1,y:1},k=_c(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:j,offsetParent:N,strategy:h}):j);return{top:(E.top-k.top+S.top)/T.y,bottom:(k.bottom-E.bottom+S.bottom)/T.y,left:(E.left-k.left+S.left)/T.x,right:(k.right-E.right+S.right)/T.x}}const Ok=a=>({name:"arrow",options:a,async fn(t){const{x:n,y:s,placement:r,rects:l,platform:c,elements:d,middlewareData:h}=t,{element:p,padding:g=0}=no(a,t)||{};if(p==null)return{};const m=Kx(g),v={x:n,y:s},w=up(r),S=cp(w),C=await c.getDimensions(p),R=w==="y",E=R?"top":"left",j=R?"bottom":"right",N=R?"clientHeight":"clientWidth",T=l.reference[S]+l.reference[w]-v[w]-l.floating[S],k=v[w]-l.reference[w],U=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let I=U?U[N]:0;(!I||!await(c.isElement==null?void 0:c.isElement(U)))&&(I=d.floating[N]||l.floating[S]);const q=T/2-k/2,te=I/2-C[S]/2-1,se=Lo(m[E],te),le=Lo(m[j],te),ee=se,oe=I-C[S]-le,ce=I/2-C[S]/2+q,ue=hh(ee,ce,oe),z=!h.arrow&&Cr(r)!=null&&ce!==ue&&l.reference[S]/2-(ce<ee?se:le)-C[S]/2<0,D=z?ce<ee?ce-ee:ce-oe:0;return{[w]:v[w]+D,data:{[w]:ue,centerOffset:ce-ue-D,...z&&{alignmentOffset:D}},reset:z}}}),Lk=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(t){var n,s;const{placement:r,middlewareData:l,rects:c,initialPlacement:d,platform:h,elements:p}=t,{mainAxis:g=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:C=!0,...R}=no(a,t);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const E=so(r),j=gs(d),N=so(d)===d,T=await(h.isRTL==null?void 0:h.isRTL(p.floating)),k=v||(N||!C?[Dc(d)]:Ak(d)),U=S!=="none";!v&&U&&k.push(...Dk(d,C,S,T));const I=[d,...k],q=await Ai(t,R),te=[];let se=((s=l.flip)==null?void 0:s.overflows)||[];if(g&&te.push(q[E]),m){const ce=Nk(r,c,T);te.push(q[ce[0]],q[ce[1]])}if(se=[...se,{placement:r,overflows:te}],!te.every(ce=>ce<=0)){var le,ee;const ce=(((le=l.flip)==null?void 0:le.index)||0)+1,ue=I[ce];if(ue&&(!(m==="alignment"?j!==gs(ue):!1)||se.every(L=>gs(L.placement)===j?L.overflows[0]>0:!0)))return{data:{index:ce,overflows:se},reset:{placement:ue}};let z=(ee=se.filter(D=>D.overflows[0]<=0).sort((D,L)=>D.overflows[1]-L.overflows[1])[0])==null?void 0:ee.placement;if(!z)switch(w){case"bestFit":{var oe;const D=(oe=se.filter(L=>{if(U){const Y=gs(L.placement);return Y===j||Y==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(Y=>Y>0).reduce((Y,he)=>Y+he,0)]).sort((L,Y)=>L[1]-Y[1])[0])==null?void 0:oe[0];D&&(z=D);break}case"initialPlacement":z=d;break}if(r!==z)return{reset:{placement:z}}}return{}}}};function f0(a,t){return{top:a.top-t.height,right:a.right-t.width,bottom:a.bottom-t.height,left:a.left-t.width}}function h0(a){return Sk.some(t=>a[t]>=0)}const Pk=function(a){return a===void 0&&(a={}),{name:"hide",options:a,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...r}=no(a,t);switch(s){case"referenceHidden":{const l=await Ai(t,{...r,elementContext:"reference"}),c=f0(l,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:h0(c)}}}case"escaped":{const l=await Ai(t,{...r,altBoundary:!0}),c=f0(l,n.floating);return{data:{escapedOffsets:c,escaped:h0(c)}}}default:return{}}}}},Yx=new Set(["left","top"]);async function Ik(a,t){const{placement:n,platform:s,elements:r}=a,l=await(s.isRTL==null?void 0:s.isRTL(r.floating)),c=so(n),d=Cr(n),h=gs(n)==="y",p=Yx.has(c)?-1:1,g=l&&h?-1:1,m=no(t,a);let{mainAxis:v,crossAxis:w,alignmentAxis:S}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return d&&typeof S=="number"&&(w=d==="end"?S*-1:S),h?{x:w*g,y:v*p}:{x:v*p,y:w*g}}const qk=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(t){var n,s;const{x:r,y:l,placement:c,middlewareData:d}=t,h=await Ik(t,a);return c===((n=d.offset)==null?void 0:n.placement)&&(s=d.arrow)!=null&&s.alignmentOffset?{}:{x:r+h.x,y:l+h.y,data:{...h,placement:c}}}}},Hk=function(a){return a===void 0&&(a={}),{name:"shift",options:a,async fn(t){const{x:n,y:s,placement:r}=t,{mainAxis:l=!0,crossAxis:c=!1,limiter:d={fn:R=>{let{x:E,y:j}=R;return{x:E,y:j}}},...h}=no(a,t),p={x:n,y:s},g=await Ai(t,h),m=gs(so(r)),v=lp(m);let w=p[v],S=p[m];if(l){const R=v==="y"?"top":"left",E=v==="y"?"bottom":"right",j=w+g[R],N=w-g[E];w=hh(j,w,N)}if(c){const R=m==="y"?"top":"left",E=m==="y"?"bottom":"right",j=S+g[R],N=S-g[E];S=hh(j,S,N)}const C=d.fn({...t,[v]:w,[m]:S});return{...C,data:{x:C.x-n,y:C.y-s,enabled:{[v]:l,[m]:c}}}}}},Uk=function(a){return a===void 0&&(a={}),{options:a,fn(t){const{x:n,y:s,placement:r,rects:l,middlewareData:c}=t,{offset:d=0,mainAxis:h=!0,crossAxis:p=!0}=no(a,t),g={x:n,y:s},m=gs(r),v=lp(m);let w=g[v],S=g[m];const C=no(d,t),R=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(h){const N=v==="y"?"height":"width",T=l.reference[v]-l.floating[N]+R.mainAxis,k=l.reference[v]+l.reference[N]-R.mainAxis;w<T?w=T:w>k&&(w=k)}if(p){var E,j;const N=v==="y"?"width":"height",T=Yx.has(so(r)),k=l.reference[m]-l.floating[N]+(T&&((E=c.offset)==null?void 0:E[m])||0)+(T?0:R.crossAxis),U=l.reference[m]+l.reference[N]+(T?0:((j=c.offset)==null?void 0:j[m])||0)-(T?R.crossAxis:0);S<k?S=k:S>U&&(S=U)}return{[v]:w,[m]:S}}}},Bk=function(a){return a===void 0&&(a={}),{name:"size",options:a,async fn(t){var n,s;const{placement:r,rects:l,platform:c,elements:d}=t,{apply:h=()=>{},...p}=no(a,t),g=await Ai(t,p),m=so(r),v=Cr(r),w=gs(r)==="y",{width:S,height:C}=l.floating;let R,E;m==="top"||m==="bottom"?(R=m,E=v===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(E=m,R=v==="end"?"top":"bottom");const j=C-g.top-g.bottom,N=S-g.left-g.right,T=Lo(C-g[R],j),k=Lo(S-g[E],N),U=!t.middlewareData.shift;let I=T,q=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(q=N),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(I=j),U&&!v){const se=Nn(g.left,0),le=Nn(g.right,0),ee=Nn(g.top,0),oe=Nn(g.bottom,0);w?q=S-2*(se!==0||le!==0?se+le:Nn(g.left,g.right)):I=C-2*(ee!==0||oe!==0?ee+oe:Nn(g.top,g.bottom))}await h({...t,availableWidth:q,availableHeight:I});const te=await c.getDimensions(d.floating);return S!==te.width||C!==te.height?{reset:{rects:!0}}:{}}}};function ou(){return typeof window<"u"}function Sr(a){return Xx(a)?(a.nodeName||"").toLowerCase():"#document"}function An(a){var t;return(a==null||(t=a.ownerDocument)==null?void 0:t.defaultView)||window}function Es(a){var t;return(t=(Xx(a)?a.ownerDocument:a.document)||window.document)==null?void 0:t.documentElement}function Xx(a){return ou()?a instanceof Node||a instanceof An(a).Node:!1}function ss(a){return ou()?a instanceof Element||a instanceof An(a).Element:!1}function ws(a){return ou()?a instanceof HTMLElement||a instanceof An(a).HTMLElement:!1}function p0(a){return!ou()||typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof An(a).ShadowRoot}const $k=new Set(["inline","contents"]);function Hi(a){const{overflow:t,overflowX:n,overflowY:s,display:r}=os(a);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!$k.has(r)}const Gk=new Set(["table","td","th"]);function Qk(a){return Gk.has(Sr(a))}const Fk=[":popover-open",":modal"];function au(a){return Fk.some(t=>{try{return a.matches(t)}catch{return!1}})}const Vk=["transform","translate","scale","rotate","perspective"],Kk=["transform","translate","scale","rotate","perspective","filter"],Yk=["paint","layout","strict","content"];function dp(a){const t=fp(),n=ss(a)?os(a):a;return Vk.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Kk.some(s=>(n.willChange||"").includes(s))||Yk.some(s=>(n.contain||"").includes(s))}function Xk(a){let t=Po(a);for(;ws(t)&&!mr(t);){if(dp(t))return t;if(au(t))return null;t=Po(t)}return null}function fp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Wk=new Set(["html","body","#document"]);function mr(a){return Wk.has(Sr(a))}function os(a){return An(a).getComputedStyle(a)}function ru(a){return ss(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function Po(a){if(Sr(a)==="html")return a;const t=a.assignedSlot||a.parentNode||p0(a)&&a.host||Es(a);return p0(t)?t.host:t}function Wx(a){const t=Po(a);return mr(t)?a.ownerDocument?a.ownerDocument.body:a.body:ws(t)&&Hi(t)?t:Wx(t)}function Ti(a,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=Wx(a),l=r===((s=a.ownerDocument)==null?void 0:s.body),c=An(r);if(l){const d=gh(c);return t.concat(c,c.visualViewport||[],Hi(r)?r:[],d&&n?Ti(d):[])}return t.concat(r,Ti(r,[],n))}function gh(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function Zx(a){const t=os(a);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const r=ws(a),l=r?a.offsetWidth:n,c=r?a.offsetHeight:s,d=kc(n)!==l||kc(s)!==c;return d&&(n=l,s=c),{width:n,height:s,$:d}}function hp(a){return ss(a)?a:a.contextElement}function hr(a){const t=hp(a);if(!ws(t))return bs(1);const n=t.getBoundingClientRect(),{width:s,height:r,$:l}=Zx(t);let c=(l?kc(n.width):n.width)/s,d=(l?kc(n.height):n.height)/r;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const Zk=bs(0);function Jx(a){const t=An(a);return!fp()||!t.visualViewport?Zk:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Jk(a,t,n){return t===void 0&&(t=!1),!n||t&&n!==An(a)?!1:t}function ga(a,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=a.getBoundingClientRect(),l=hp(a);let c=bs(1);t&&(s?ss(s)&&(c=hr(s)):c=hr(a));const d=Jk(l,n,s)?Jx(l):bs(0);let h=(r.left+d.x)/c.x,p=(r.top+d.y)/c.y,g=r.width/c.x,m=r.height/c.y;if(l){const v=An(l),w=s&&ss(s)?An(s):s;let S=v,C=gh(S);for(;C&&s&&w!==S;){const R=hr(C),E=C.getBoundingClientRect(),j=os(C),N=E.left+(C.clientLeft+parseFloat(j.paddingLeft))*R.x,T=E.top+(C.clientTop+parseFloat(j.paddingTop))*R.y;h*=R.x,p*=R.y,g*=R.x,m*=R.y,h+=N,p+=T,S=An(C),C=gh(S)}}return _c({width:g,height:m,x:h,y:p})}function iu(a,t){const n=ru(a).scrollLeft;return t?t.left+n:ga(Es(a)).left+n}function ew(a,t){const n=a.getBoundingClientRect(),s=n.left+t.scrollLeft-iu(a,n),r=n.top+t.scrollTop;return{x:s,y:r}}function eD(a){let{elements:t,rect:n,offsetParent:s,strategy:r}=a;const l=r==="fixed",c=Es(s),d=t?au(t.floating):!1;if(s===c||d&&l)return n;let h={scrollLeft:0,scrollTop:0},p=bs(1);const g=bs(0),m=ws(s);if((m||!m&&!l)&&((Sr(s)!=="body"||Hi(c))&&(h=ru(s)),ws(s))){const w=ga(s);p=hr(s),g.x=w.x+s.clientLeft,g.y=w.y+s.clientTop}const v=c&&!m&&!l?ew(c,h):bs(0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-h.scrollLeft*p.x+g.x+v.x,y:n.y*p.y-h.scrollTop*p.y+g.y+v.y}}function tD(a){return Array.from(a.getClientRects())}function nD(a){const t=Es(a),n=ru(a),s=a.ownerDocument.body,r=Nn(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),l=Nn(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let c=-n.scrollLeft+iu(a);const d=-n.scrollTop;return os(s).direction==="rtl"&&(c+=Nn(t.clientWidth,s.clientWidth)-r),{width:r,height:l,x:c,y:d}}const g0=25;function sD(a,t){const n=An(a),s=Es(a),r=n.visualViewport;let l=s.clientWidth,c=s.clientHeight,d=0,h=0;if(r){l=r.width,c=r.height;const g=fp();(!g||g&&t==="fixed")&&(d=r.offsetLeft,h=r.offsetTop)}const p=iu(s);if(p<=0){const g=s.ownerDocument,m=g.body,v=getComputedStyle(m),w=g.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,S=Math.abs(s.clientWidth-m.clientWidth-w);S<=g0&&(l-=S)}else p<=g0&&(l+=p);return{width:l,height:c,x:d,y:h}}const oD=new Set(["absolute","fixed"]);function aD(a,t){const n=ga(a,!0,t==="fixed"),s=n.top+a.clientTop,r=n.left+a.clientLeft,l=ws(a)?hr(a):bs(1),c=a.clientWidth*l.x,d=a.clientHeight*l.y,h=r*l.x,p=s*l.y;return{width:c,height:d,x:h,y:p}}function m0(a,t,n){let s;if(t==="viewport")s=sD(a,n);else if(t==="document")s=nD(Es(a));else if(ss(t))s=aD(t,n);else{const r=Jx(a);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return _c(s)}function tw(a,t){const n=Po(a);return n===t||!ss(n)||mr(n)?!1:os(n).position==="fixed"||tw(n,t)}function rD(a,t){const n=t.get(a);if(n)return n;let s=Ti(a,[],!1).filter(d=>ss(d)&&Sr(d)!=="body"),r=null;const l=os(a).position==="fixed";let c=l?Po(a):a;for(;ss(c)&&!mr(c);){const d=os(c),h=dp(c);!h&&d.position==="fixed"&&(r=null),(l?!h&&!r:!h&&d.position==="static"&&!!r&&oD.has(r.position)||Hi(c)&&!h&&tw(a,c))?s=s.filter(g=>g!==c):r=d,c=Po(c)}return t.set(a,s),s}function iD(a){let{element:t,boundary:n,rootBoundary:s,strategy:r}=a;const c=[...n==="clippingAncestors"?au(t)?[]:rD(t,this._c):[].concat(n),s],d=c[0],h=c.reduce((p,g)=>{const m=m0(t,g,r);return p.top=Nn(m.top,p.top),p.right=Lo(m.right,p.right),p.bottom=Lo(m.bottom,p.bottom),p.left=Nn(m.left,p.left),p},m0(t,d,r));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function lD(a){const{width:t,height:n}=Zx(a);return{width:t,height:n}}function cD(a,t,n){const s=ws(t),r=Es(t),l=n==="fixed",c=ga(a,!0,l,t);let d={scrollLeft:0,scrollTop:0};const h=bs(0);function p(){h.x=iu(r)}if(s||!s&&!l)if((Sr(t)!=="body"||Hi(r))&&(d=ru(t)),s){const w=ga(t,!0,l,t);h.x=w.x+t.clientLeft,h.y=w.y+t.clientTop}else r&&p();l&&!s&&r&&p();const g=r&&!s&&!l?ew(r,d):bs(0),m=c.left+d.scrollLeft-h.x-g.x,v=c.top+d.scrollTop-h.y-g.y;return{x:m,y:v,width:c.width,height:c.height}}function th(a){return os(a).position==="static"}function y0(a,t){if(!ws(a)||os(a).position==="fixed")return null;if(t)return t(a);let n=a.offsetParent;return Es(a)===n&&(n=n.ownerDocument.body),n}function nw(a,t){const n=An(a);if(au(a))return n;if(!ws(a)){let r=Po(a);for(;r&&!mr(r);){if(ss(r)&&!th(r))return r;r=Po(r)}return n}let s=y0(a,t);for(;s&&Qk(s)&&th(s);)s=y0(s,t);return s&&mr(s)&&th(s)&&!dp(s)?n:s||Xk(a)||n}const uD=async function(a){const t=this.getOffsetParent||nw,n=this.getDimensions,s=await n(a.floating);return{reference:cD(a.reference,await t(a.floating),a.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function dD(a){return os(a).direction==="rtl"}const fD={convertOffsetParentRelativeRectToViewportRelativeRect:eD,getDocumentElement:Es,getClippingRect:iD,getOffsetParent:nw,getElementRects:uD,getClientRects:tD,getDimensions:lD,getScale:hr,isElement:ss,isRTL:dD};function sw(a,t){return a.x===t.x&&a.y===t.y&&a.width===t.width&&a.height===t.height}function hD(a,t){let n=null,s;const r=Es(a);function l(){var d;clearTimeout(s),(d=n)==null||d.disconnect(),n=null}function c(d,h){d===void 0&&(d=!1),h===void 0&&(h=1),l();const p=a.getBoundingClientRect(),{left:g,top:m,width:v,height:w}=p;if(d||t(),!v||!w)return;const S=fc(m),C=fc(r.clientWidth-(g+v)),R=fc(r.clientHeight-(m+w)),E=fc(g),N={rootMargin:-S+"px "+-C+"px "+-R+"px "+-E+"px",threshold:Nn(0,Lo(1,h))||1};let T=!0;function k(U){const I=U[0].intersectionRatio;if(I!==h){if(!T)return c();I?c(!1,I):s=setTimeout(()=>{c(!1,1e-7)},1e3)}I===1&&!sw(p,a.getBoundingClientRect())&&c(),T=!1}try{n=new IntersectionObserver(k,{...N,root:r.ownerDocument})}catch{n=new IntersectionObserver(k,N)}n.observe(a)}return c(!0),l}function pD(a,t,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:h=!1}=s,p=hp(a),g=r||l?[...p?Ti(p):[],...Ti(t)]:[];g.forEach(E=>{r&&E.addEventListener("scroll",n,{passive:!0}),l&&E.addEventListener("resize",n)});const m=p&&d?hD(p,n):null;let v=-1,w=null;c&&(w=new ResizeObserver(E=>{let[j]=E;j&&j.target===p&&w&&(w.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var N;(N=w)==null||N.observe(t)})),n()}),p&&!h&&w.observe(p),w.observe(t));let S,C=h?ga(a):null;h&&R();function R(){const E=ga(a);C&&!sw(C,E)&&n(),C=E,S=requestAnimationFrame(R)}return n(),()=>{var E;g.forEach(j=>{r&&j.removeEventListener("scroll",n),l&&j.removeEventListener("resize",n)}),m?.(),(E=w)==null||E.disconnect(),w=null,h&&cancelAnimationFrame(S)}}const gD=qk,mD=Hk,yD=Lk,vD=Bk,bD=Pk,v0=Ok,xD=Uk,wD=(a,t,n)=>{const s=new Map,r={platform:fD,...n},l={...r.platform,_c:s};return zk(a,t,{...r,platform:l})};var CD=typeof document<"u",SD=function(){},wc=CD?x.useLayoutEffect:SD;function zc(a,t){if(a===t)return!0;if(typeof a!=typeof t)return!1;if(typeof a=="function"&&a.toString()===t.toString())return!0;let n,s,r;if(a&&t&&typeof a=="object"){if(Array.isArray(a)){if(n=a.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!zc(a[s],t[s]))return!1;return!0}if(r=Object.keys(a),n=r.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,r[s]))return!1;for(s=n;s--!==0;){const l=r[s];if(!(l==="_owner"&&a.$$typeof)&&!zc(a[l],t[l]))return!1}return!0}return a!==a&&t!==t}function ow(a){return typeof window>"u"?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function b0(a,t){const n=ow(a);return Math.round(t*n)/n}function nh(a){const t=x.useRef(a);return wc(()=>{t.current=a}),t}function MD(a){a===void 0&&(a={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:l,floating:c}={},transform:d=!0,whileElementsMounted:h,open:p}=a,[g,m]=x.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,w]=x.useState(s);zc(v,s)||w(s);const[S,C]=x.useState(null),[R,E]=x.useState(null),j=x.useCallback(L=>{L!==U.current&&(U.current=L,C(L))},[]),N=x.useCallback(L=>{L!==I.current&&(I.current=L,E(L))},[]),T=l||S,k=c||R,U=x.useRef(null),I=x.useRef(null),q=x.useRef(g),te=h!=null,se=nh(h),le=nh(r),ee=nh(p),oe=x.useCallback(()=>{if(!U.current||!I.current)return;const L={placement:t,strategy:n,middleware:v};le.current&&(L.platform=le.current),wD(U.current,I.current,L).then(Y=>{const he={...Y,isPositioned:ee.current!==!1};ce.current&&!zc(q.current,he)&&(q.current=he,_i.flushSync(()=>{m(he)}))})},[v,t,n,le,ee]);wc(()=>{p===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,m(L=>({...L,isPositioned:!1})))},[p]);const ce=x.useRef(!1);wc(()=>(ce.current=!0,()=>{ce.current=!1}),[]),wc(()=>{if(T&&(U.current=T),k&&(I.current=k),T&&k){if(se.current)return se.current(T,k,oe);oe()}},[T,k,oe,se,te]);const ue=x.useMemo(()=>({reference:U,floating:I,setReference:j,setFloating:N}),[j,N]),z=x.useMemo(()=>({reference:T,floating:k}),[T,k]),D=x.useMemo(()=>{const L={position:n,left:0,top:0};if(!z.floating)return L;const Y=b0(z.floating,g.x),he=b0(z.floating,g.y);return d?{...L,transform:"translate("+Y+"px, "+he+"px)",...ow(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:he}},[n,d,z.floating,g.x,g.y]);return x.useMemo(()=>({...g,update:oe,refs:ue,elements:z,floatingStyles:D}),[g,oe,ue,z,D])}const ED=a=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:a,fn(n){const{element:s,padding:r}=typeof a=="function"?a(n):a;return s&&t(s)?s.current!=null?v0({element:s.current,padding:r}).fn(n):{}:s?v0({element:s,padding:r}).fn(n):{}}}},RD=(a,t)=>({...gD(a),options:[a,t]}),ND=(a,t)=>({...mD(a),options:[a,t]}),AD=(a,t)=>({...xD(a),options:[a,t]}),TD=(a,t)=>({...yD(a),options:[a,t]}),jD=(a,t)=>({...vD(a),options:[a,t]}),kD=(a,t)=>({...bD(a),options:[a,t]}),DD=(a,t)=>({...ED(a),options:[a,t]});var _D="Arrow",aw=x.forwardRef((a,t)=>{const{children:n,width:s=10,height:r=5,...l}=a;return f.jsx(Ae.svg,{...l,ref:t,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});aw.displayName=_D;var zD=aw;function lu(a){const[t,n]=x.useState(void 0);return sn(()=>{if(a){n({width:a.offsetWidth,height:a.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const l=r[0];let c,d;if("borderBoxSize"in l){const h=l.borderBoxSize,p=Array.isArray(h)?h[0]:h;c=p.inlineSize,d=p.blockSize}else c=a.offsetWidth,d=a.offsetHeight;n({width:c,height:d})});return s.observe(a,{box:"border-box"}),()=>s.unobserve(a)}else n(void 0)},[a]),t}var pp="Popper",[rw,Mr]=bn(pp),[OD,iw]=rw(pp),lw=a=>{const{__scopePopper:t,children:n}=a,[s,r]=x.useState(null);return f.jsx(OD,{scope:t,anchor:s,onAnchorChange:r,children:n})};lw.displayName=pp;var cw="PopperAnchor",uw=x.forwardRef((a,t)=>{const{__scopePopper:n,virtualRef:s,...r}=a,l=iw(cw,n),c=x.useRef(null),d=De(t,c),h=x.useRef(null);return x.useEffect(()=>{const p=h.current;h.current=s?.current||c.current,p!==h.current&&l.onAnchorChange(h.current)}),s?null:f.jsx(Ae.div,{...r,ref:d})});uw.displayName=cw;var gp="PopperContent",[LD,PD]=rw(gp),dw=x.forwardRef((a,t)=>{const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:l="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:w="optimized",onPlaced:S,...C}=a,R=iw(gp,n),[E,j]=x.useState(null),N=De(t,B=>j(B)),[T,k]=x.useState(null),U=lu(T),I=U?.width??0,q=U?.height??0,te=s+(l!=="center"?"-"+l:""),se=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},le=Array.isArray(p)?p:[p],ee=le.length>0,oe={padding:se,boundary:le.filter(qD),altBoundary:ee},{refs:ce,floatingStyles:ue,placement:z,isPositioned:D,middlewareData:L}=MD({strategy:"fixed",placement:te,whileElementsMounted:(...B)=>pD(...B,{animationFrame:w==="always"}),elements:{reference:R.anchor},middleware:[RD({mainAxis:r+q,alignmentAxis:c}),h&&ND({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?AD():void 0,...oe}),h&&TD({...oe}),jD({...oe,apply:({elements:B,rects:V,availableWidth:pe,availableHeight:me})=>{const{width:ye,height:ve}=V.reference,Pe=B.floating.style;Pe.setProperty("--radix-popper-available-width",`${pe}px`),Pe.setProperty("--radix-popper-available-height",`${me}px`),Pe.setProperty("--radix-popper-anchor-width",`${ye}px`),Pe.setProperty("--radix-popper-anchor-height",`${ve}px`)}}),T&&DD({element:T,padding:d}),HD({arrowWidth:I,arrowHeight:q}),v&&kD({strategy:"referenceHidden",...oe})]}),[Y,he]=pw(z),_=nn(S);sn(()=>{D&&_?.()},[D,_]);const $=L.arrow?.x,X=L.arrow?.y,W=L.arrow?.centerOffset!==0,[F,ae]=x.useState();return sn(()=>{E&&ae(window.getComputedStyle(E).zIndex)},[E]),f.jsx("div",{ref:ce.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:D?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:F,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:f.jsx(LD,{scope:n,placedSide:Y,onArrowChange:k,arrowX:$,arrowY:X,shouldHideArrow:W,children:f.jsx(Ae.div,{"data-side":Y,"data-align":he,...C,ref:N,style:{...C.style,animation:D?void 0:"none"}})})})});dw.displayName=gp;var fw="PopperArrow",ID={top:"bottom",right:"left",bottom:"top",left:"right"},hw=x.forwardRef(function(t,n){const{__scopePopper:s,...r}=t,l=PD(fw,s),c=ID[l.placedSide];return f.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:f.jsx(zD,{...r,ref:n,style:{...r.style,display:"block"}})})});hw.displayName=fw;function qD(a){return a!==null}var HD=a=>({name:"transformOrigin",options:a,fn(t){const{placement:n,rects:s,middlewareData:r}=t,c=r.arrow?.centerOffset!==0,d=c?0:a.arrowWidth,h=c?0:a.arrowHeight,[p,g]=pw(n),m={start:"0%",center:"50%",end:"100%"}[g],v=(r.arrow?.x??0)+d/2,w=(r.arrow?.y??0)+h/2;let S="",C="";return p==="bottom"?(S=c?m:`${v}px`,C=`${-h}px`):p==="top"?(S=c?m:`${v}px`,C=`${s.floating.height+h}px`):p==="right"?(S=`${-h}px`,C=c?m:`${w}px`):p==="left"&&(S=`${s.floating.width+h}px`,C=c?m:`${w}px`),{data:{x:S,y:C}}}});function pw(a){const[t,n="center"]=a.split("-");return[t,n]}var mp=lw,cu=uw,yp=dw,vp=hw;function UD(a){const t=BD(a),n=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(GD);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(t,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(t,{...c,ref:r,children:l})});return n.displayName=`${a}.Slot`,n}function BD(a){const t=x.forwardRef((n,s)=>{const{children:r,...l}=n;if(x.isValidElement(r)){const c=FD(r),d=QD(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return t.displayName=`${a}.SlotClone`,t}var $D=Symbol("radix.slottable");function GD(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===$D}function QD(a,t){const n={...t};for(const s in t){const r=a[s],l=t[s];/^on[A-Z]/.test(s)?r&&l?n[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(n[s]=r):s==="style"?n[s]={...r,...l}:s==="className"&&(n[s]=[r,l].filter(Boolean).join(" "))}return{...a,...n}}function FD(a){let t=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?a.ref:(t=Object.getOwnPropertyDescriptor(a,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?a.props.ref:a.props.ref||a.ref)}var mh=["Enter"," "],VD=["ArrowDown","PageUp","Home"],gw=["ArrowUp","PageDown","End"],KD=[...VD,...gw],YD={ltr:[...mh,"ArrowRight"],rtl:[...mh,"ArrowLeft"]},XD={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ui="Menu",[ji,WD,ZD]=eu(Ui),[va,mw]=bn(Ui,[ZD,Mr,tu]),uu=Mr(),yw=tu(),[JD,ba]=va(Ui),[e_,Bi]=va(Ui),vw=a=>{const{__scopeMenu:t,open:n=!1,children:s,dir:r,onOpenChange:l,modal:c=!0}=a,d=uu(t),[h,p]=x.useState(null),g=x.useRef(!1),m=nn(l),v=wr(r);return x.useEffect(()=>{const w=()=>{g.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>g.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),f.jsx(mp,{...d,children:f.jsx(JD,{scope:t,open:n,onOpenChange:m,content:h,onContentChange:p,children:f.jsx(e_,{scope:t,onClose:x.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:g,dir:v,modal:c,children:s})})})};vw.displayName=Ui;var t_="MenuAnchor",bp=x.forwardRef((a,t)=>{const{__scopeMenu:n,...s}=a,r=uu(n);return f.jsx(cu,{...r,...s,ref:t})});bp.displayName=t_;var xp="MenuPortal",[n_,bw]=va(xp,{forceMount:void 0}),xw=a=>{const{__scopeMenu:t,forceMount:n,children:s,container:r}=a,l=ba(xp,t);return f.jsx(n_,{scope:t,forceMount:n,children:f.jsx(rn,{present:n||l.open,children:f.jsx(Pi,{asChild:!0,container:r,children:s})})})};xw.displayName=xp;var Vn="MenuContent",[s_,wp]=va(Vn),ww=x.forwardRef((a,t)=>{const n=bw(Vn,a.__scopeMenu),{forceMount:s=n.forceMount,...r}=a,l=ba(Vn,a.__scopeMenu),c=Bi(Vn,a.__scopeMenu);return f.jsx(ji.Provider,{scope:a.__scopeMenu,children:f.jsx(rn,{present:s||l.open,children:f.jsx(ji.Slot,{scope:a.__scopeMenu,children:c.modal?f.jsx(o_,{...r,ref:t}):f.jsx(a_,{...r,ref:t})})})})}),o_=x.forwardRef((a,t)=>{const n=ba(Vn,a.__scopeMenu),s=x.useRef(null),r=De(t,s);return x.useEffect(()=>{const l=s.current;if(l)return Vc(l)},[]),f.jsx(Cp,{...a,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ge(a.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),a_=x.forwardRef((a,t)=>{const n=ba(Vn,a.__scopeMenu);return f.jsx(Cp,{...a,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),r_=UD("MenuContent.ScrollLock"),Cp=x.forwardRef((a,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:r,onOpenAutoFocus:l,onCloseAutoFocus:c,disableOutsidePointerEvents:d,onEntryFocus:h,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:v,onDismiss:w,disableOutsideScroll:S,...C}=a,R=ba(Vn,n),E=Bi(Vn,n),j=uu(n),N=yw(n),T=WD(n),[k,U]=x.useState(null),I=x.useRef(null),q=De(t,I,R.onContentChange),te=x.useRef(0),se=x.useRef(""),le=x.useRef(0),ee=x.useRef(null),oe=x.useRef("right"),ce=x.useRef(0),ue=S?Ii:x.Fragment,z=S?{as:r_,allowPinchZoom:!0}:void 0,D=Y=>{const he=se.current+Y,_=T().filter(B=>!B.disabled),$=document.activeElement,X=_.find(B=>B.ref.current===$)?.textValue,W=_.map(B=>B.textValue),F=v_(W,he,X),ae=_.find(B=>B.textValue===F)?.ref.current;(function B(V){se.current=V,window.clearTimeout(te.current),V!==""&&(te.current=window.setTimeout(()=>B(""),1e3))})(he),ae&&setTimeout(()=>ae.focus())};x.useEffect(()=>()=>window.clearTimeout(te.current),[]),Qc();const L=x.useCallback(Y=>oe.current===ee.current?.side&&x_(Y,ee.current?.area),[]);return f.jsx(s_,{scope:n,searchRef:se,onItemEnter:x.useCallback(Y=>{L(Y)&&Y.preventDefault()},[L]),onItemLeave:x.useCallback(Y=>{L(Y)||(I.current?.focus(),U(null))},[L]),onTriggerLeave:x.useCallback(Y=>{L(Y)&&Y.preventDefault()},[L]),pointerGraceTimerRef:le,onPointerGraceIntentChange:x.useCallback(Y=>{ee.current=Y},[]),children:f.jsx(ue,{...z,children:f.jsx(Li,{asChild:!0,trapped:r,onMountAutoFocus:ge(l,Y=>{Y.preventDefault(),I.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:f.jsx(Oi,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:v,onDismiss:w,children:f.jsx(_x,{asChild:!0,...N,dir:E.dir,orientation:"vertical",loop:s,currentTabStopId:k,onCurrentTabStopIdChange:U,onEntryFocus:ge(h,Y=>{E.isUsingKeyboardRef.current||Y.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(yp,{role:"menu","aria-orientation":"vertical","data-state":Pw(R.open),"data-radix-menu-content":"",dir:E.dir,...j,...C,ref:q,style:{outline:"none",...C.style},onKeyDown:ge(C.onKeyDown,Y=>{const _=Y.target.closest("[data-radix-menu-content]")===Y.currentTarget,$=Y.ctrlKey||Y.altKey||Y.metaKey,X=Y.key.length===1;_&&(Y.key==="Tab"&&Y.preventDefault(),!$&&X&&D(Y.key));const W=I.current;if(Y.target!==W||!KD.includes(Y.key))return;Y.preventDefault();const ae=T().filter(B=>!B.disabled).map(B=>B.ref.current);gw.includes(Y.key)&&ae.reverse(),m_(ae)}),onBlur:ge(a.onBlur,Y=>{Y.currentTarget.contains(Y.target)||(window.clearTimeout(te.current),se.current="")}),onPointerMove:ge(a.onPointerMove,ki(Y=>{const he=Y.target,_=ce.current!==Y.clientX;if(Y.currentTarget.contains(he)&&_){const $=Y.clientX>ce.current?"right":"left";oe.current=$,ce.current=Y.clientX}}))})})})})})})});ww.displayName=Vn;var i_="MenuGroup",Sp=x.forwardRef((a,t)=>{const{__scopeMenu:n,...s}=a;return f.jsx(Ae.div,{role:"group",...s,ref:t})});Sp.displayName=i_;var l_="MenuLabel",Cw=x.forwardRef((a,t)=>{const{__scopeMenu:n,...s}=a;return f.jsx(Ae.div,{...s,ref:t})});Cw.displayName=l_;var Oc="MenuItem",x0="menu.itemSelect",du=x.forwardRef((a,t)=>{const{disabled:n=!1,onSelect:s,...r}=a,l=x.useRef(null),c=Bi(Oc,a.__scopeMenu),d=wp(Oc,a.__scopeMenu),h=De(t,l),p=x.useRef(!1),g=()=>{const m=l.current;if(!n&&m){const v=new CustomEvent(x0,{bubbles:!0,cancelable:!0});m.addEventListener(x0,w=>s?.(w),{once:!0}),hb(m,v),v.defaultPrevented?p.current=!1:c.onClose()}};return f.jsx(Sw,{...r,ref:h,disabled:n,onClick:ge(a.onClick,g),onPointerDown:m=>{a.onPointerDown?.(m),p.current=!0},onPointerUp:ge(a.onPointerUp,m=>{p.current||m.currentTarget?.click()}),onKeyDown:ge(a.onKeyDown,m=>{const v=d.searchRef.current!=="";n||v&&m.key===" "||mh.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});du.displayName=Oc;var Sw=x.forwardRef((a,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:r,...l}=a,c=wp(Oc,n),d=yw(n),h=x.useRef(null),p=De(t,h),[g,m]=x.useState(!1),[v,w]=x.useState("");return x.useEffect(()=>{const S=h.current;S&&w((S.textContent??"").trim())},[l.children]),f.jsx(ji.ItemSlot,{scope:n,disabled:s,textValue:r??v,children:f.jsx(zx,{asChild:!0,...d,focusable:!s,children:f.jsx(Ae.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...l,ref:p,onPointerMove:ge(a.onPointerMove,ki(S=>{s?c.onItemLeave(S):(c.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ge(a.onPointerLeave,ki(S=>c.onItemLeave(S))),onFocus:ge(a.onFocus,()=>m(!0)),onBlur:ge(a.onBlur,()=>m(!1))})})})}),c_="MenuCheckboxItem",Mw=x.forwardRef((a,t)=>{const{checked:n=!1,onCheckedChange:s,...r}=a;return f.jsx(Tw,{scope:a.__scopeMenu,checked:n,children:f.jsx(du,{role:"menuitemcheckbox","aria-checked":Lc(n)?"mixed":n,...r,ref:t,"data-state":Ep(n),onSelect:ge(r.onSelect,()=>s?.(Lc(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Mw.displayName=c_;var Ew="MenuRadioGroup",[u_,d_]=va(Ew,{value:void 0,onValueChange:()=>{}}),Rw=x.forwardRef((a,t)=>{const{value:n,onValueChange:s,...r}=a,l=nn(s);return f.jsx(u_,{scope:a.__scopeMenu,value:n,onValueChange:l,children:f.jsx(Sp,{...r,ref:t})})});Rw.displayName=Ew;var Nw="MenuRadioItem",Aw=x.forwardRef((a,t)=>{const{value:n,...s}=a,r=d_(Nw,a.__scopeMenu),l=n===r.value;return f.jsx(Tw,{scope:a.__scopeMenu,checked:l,children:f.jsx(du,{role:"menuitemradio","aria-checked":l,...s,ref:t,"data-state":Ep(l),onSelect:ge(s.onSelect,()=>r.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Aw.displayName=Nw;var Mp="MenuItemIndicator",[Tw,f_]=va(Mp,{checked:!1}),jw=x.forwardRef((a,t)=>{const{__scopeMenu:n,forceMount:s,...r}=a,l=f_(Mp,n);return f.jsx(rn,{present:s||Lc(l.checked)||l.checked===!0,children:f.jsx(Ae.span,{...r,ref:t,"data-state":Ep(l.checked)})})});jw.displayName=Mp;var h_="MenuSeparator",kw=x.forwardRef((a,t)=>{const{__scopeMenu:n,...s}=a;return f.jsx(Ae.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});kw.displayName=h_;var p_="MenuArrow",Dw=x.forwardRef((a,t)=>{const{__scopeMenu:n,...s}=a,r=uu(n);return f.jsx(vp,{...r,...s,ref:t})});Dw.displayName=p_;var g_="MenuSub",[oL,_w]=va(g_),xi="MenuSubTrigger",zw=x.forwardRef((a,t)=>{const n=ba(xi,a.__scopeMenu),s=Bi(xi,a.__scopeMenu),r=_w(xi,a.__scopeMenu),l=wp(xi,a.__scopeMenu),c=x.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:h}=l,p={__scopeMenu:a.__scopeMenu},g=x.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return x.useEffect(()=>g,[g]),x.useEffect(()=>{const m=d.current;return()=>{window.clearTimeout(m),h(null)}},[d,h]),f.jsx(bp,{asChild:!0,...p,children:f.jsx(Sw,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":Pw(n.open),...a,ref:Cs(t,r.onTriggerChange),onClick:m=>{a.onClick?.(m),!(a.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ge(a.onPointerMove,ki(m=>{l.onItemEnter(m),!m.defaultPrevented&&!a.disabled&&!n.open&&!c.current&&(l.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{n.onOpenChange(!0),g()},100))})),onPointerLeave:ge(a.onPointerLeave,ki(m=>{g();const v=n.content?.getBoundingClientRect();if(v){const w=n.content?.dataset.side,S=w==="right",C=S?-5:5,R=v[S?"left":"right"],E=v[S?"right":"left"];l.onPointerGraceIntentChange({area:[{x:m.clientX+C,y:m.clientY},{x:R,y:v.top},{x:E,y:v.top},{x:E,y:v.bottom},{x:R,y:v.bottom}],side:w}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(m),m.defaultPrevented)return;l.onPointerGraceIntentChange(null)}})),onKeyDown:ge(a.onKeyDown,m=>{const v=l.searchRef.current!=="";a.disabled||v&&m.key===" "||YD[s.dir].includes(m.key)&&(n.onOpenChange(!0),n.content?.focus(),m.preventDefault())})})})});zw.displayName=xi;var Ow="MenuSubContent",Lw=x.forwardRef((a,t)=>{const n=bw(Vn,a.__scopeMenu),{forceMount:s=n.forceMount,...r}=a,l=ba(Vn,a.__scopeMenu),c=Bi(Vn,a.__scopeMenu),d=_w(Ow,a.__scopeMenu),h=x.useRef(null),p=De(t,h);return f.jsx(ji.Provider,{scope:a.__scopeMenu,children:f.jsx(rn,{present:s||l.open,children:f.jsx(ji.Slot,{scope:a.__scopeMenu,children:f.jsx(Cp,{id:d.contentId,"aria-labelledby":d.triggerId,...r,ref:p,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{c.isUsingKeyboardRef.current&&h.current?.focus(),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:ge(a.onFocusOutside,g=>{g.target!==d.trigger&&l.onOpenChange(!1)}),onEscapeKeyDown:ge(a.onEscapeKeyDown,g=>{c.onClose(),g.preventDefault()}),onKeyDown:ge(a.onKeyDown,g=>{const m=g.currentTarget.contains(g.target),v=XD[c.dir].includes(g.key);m&&v&&(l.onOpenChange(!1),d.trigger?.focus(),g.preventDefault())})})})})})});Lw.displayName=Ow;function Pw(a){return a?"open":"closed"}function Lc(a){return a==="indeterminate"}function Ep(a){return Lc(a)?"indeterminate":a?"checked":"unchecked"}function m_(a){const t=document.activeElement;for(const n of a)if(n===t||(n.focus(),document.activeElement!==t))return}function y_(a,t){return a.map((n,s)=>a[(t+s)%a.length])}function v_(a,t,n){const r=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,l=n?a.indexOf(n):-1;let c=y_(a,Math.max(l,0));r.length===1&&(c=c.filter(p=>p!==n));const h=c.find(p=>p.toLowerCase().startsWith(r.toLowerCase()));return h!==n?h:void 0}function b_(a,t){const{x:n,y:s}=a;let r=!1;for(let l=0,c=t.length-1;l<t.length;c=l++){const d=t[l],h=t[c],p=d.x,g=d.y,m=h.x,v=h.y;g>s!=v>s&&n<(m-p)*(s-g)/(v-g)+p&&(r=!r)}return r}function x_(a,t){if(!t)return!1;const n={x:a.clientX,y:a.clientY};return b_(n,t)}function ki(a){return t=>t.pointerType==="mouse"?a(t):void 0}var w_=vw,C_=bp,S_=xw,M_=ww,E_=Sp,R_=Cw,N_=du,A_=Mw,T_=Rw,j_=Aw,k_=jw,D_=kw,__=Dw,z_=zw,O_=Lw,fu="DropdownMenu",[L_]=bn(fu,[mw]),dn=mw(),[P_,Iw]=L_(fu),qw=a=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:r,defaultOpen:l,onOpenChange:c,modal:d=!0}=a,h=dn(t),p=x.useRef(null),[g,m]=xs({prop:r,defaultProp:l??!1,onChange:c,caller:fu});return f.jsx(P_,{scope:t,triggerId:ns(),triggerRef:p,contentId:ns(),open:g,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(v=>!v),[m]),modal:d,children:f.jsx(w_,{...h,open:g,onOpenChange:m,dir:s,modal:d,children:n})})};qw.displayName=fu;var Hw="DropdownMenuTrigger",Uw=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...r}=a,l=Iw(Hw,n),c=dn(n);return f.jsx(C_,{asChild:!0,...c,children:f.jsx(Ae.button,{type:"button",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":l.open?l.contentId:void 0,"data-state":l.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:Cs(t,l.triggerRef),onPointerDown:ge(a.onPointerDown,d=>{!s&&d.button===0&&d.ctrlKey===!1&&(l.onOpenToggle(),l.open||d.preventDefault())}),onKeyDown:ge(a.onKeyDown,d=>{s||(["Enter"," "].includes(d.key)&&l.onOpenToggle(),d.key==="ArrowDown"&&l.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});Uw.displayName=Hw;var I_="DropdownMenuPortal",Bw=a=>{const{__scopeDropdownMenu:t,...n}=a,s=dn(t);return f.jsx(S_,{...s,...n})};Bw.displayName=I_;var $w="DropdownMenuContent",Gw=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=Iw($w,n),l=dn(n),c=x.useRef(!1);return f.jsx(M_,{id:r.contentId,"aria-labelledby":r.triggerId,...l,...s,ref:t,onCloseAutoFocus:ge(a.onCloseAutoFocus,d=>{c.current||r.triggerRef.current?.focus(),c.current=!1,d.preventDefault()}),onInteractOutside:ge(a.onInteractOutside,d=>{const h=d.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,g=h.button===2||p;(!r.modal||g)&&(c.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Gw.displayName=$w;var q_="DropdownMenuGroup",H_=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=dn(n);return f.jsx(E_,{...r,...s,ref:t})});H_.displayName=q_;var U_="DropdownMenuLabel",Qw=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=dn(n);return f.jsx(R_,{...r,...s,ref:t})});Qw.displayName=U_;var B_="DropdownMenuItem",Fw=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=dn(n);return f.jsx(N_,{...r,...s,ref:t})});Fw.displayName=B_;var $_="DropdownMenuCheckboxItem",Vw=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=dn(n);return f.jsx(A_,{...r,...s,ref:t})});Vw.displayName=$_;var G_="DropdownMenuRadioGroup",Q_=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=dn(n);return f.jsx(T_,{...r,...s,ref:t})});Q_.displayName=G_;var F_="DropdownMenuRadioItem",Kw=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=dn(n);return f.jsx(j_,{...r,...s,ref:t})});Kw.displayName=F_;var V_="DropdownMenuItemIndicator",Yw=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=dn(n);return f.jsx(k_,{...r,...s,ref:t})});Yw.displayName=V_;var K_="DropdownMenuSeparator",Xw=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=dn(n);return f.jsx(D_,{...r,...s,ref:t})});Xw.displayName=K_;var Y_="DropdownMenuArrow",X_=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=dn(n);return f.jsx(__,{...r,...s,ref:t})});X_.displayName=Y_;var W_="DropdownMenuSubTrigger",Ww=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=dn(n);return f.jsx(z_,{...r,...s,ref:t})});Ww.displayName=W_;var Z_="DropdownMenuSubContent",Zw=x.forwardRef((a,t)=>{const{__scopeDropdownMenu:n,...s}=a,r=dn(n);return f.jsx(O_,{...r,...s,ref:t,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Zw.displayName=Z_;var J_=qw,e5=Uw,t5=Bw,Jw=Gw,e1=Qw,t1=Fw,n1=Vw,s1=Kw,o1=Yw,a1=Xw,r1=Ww,i1=Zw;const n5=J_,s5=e5,o5=x.forwardRef(({className:a,inset:t,children:n,...s},r)=>f.jsxs(r1,{ref:r,className:Ee("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",a),...s,children:[n,f.jsx(Ih,{className:"ml-auto"})]}));o5.displayName=r1.displayName;const a5=x.forwardRef(({className:a,...t},n)=>f.jsx(i1,{ref:n,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...t}));a5.displayName=i1.displayName;const l1=x.forwardRef(({className:a,sideOffset:t=4,...n},s)=>f.jsx(t5,{children:f.jsx(Jw,{ref:s,sideOffset:t,className:Ee("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...n})}));l1.displayName=Jw.displayName;const Cc=x.forwardRef(({className:a,inset:t,...n},s)=>f.jsx(t1,{ref:s,className:Ee("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",a),...n}));Cc.displayName=t1.displayName;const r5=x.forwardRef(({className:a,children:t,checked:n,...s},r)=>f.jsxs(n1,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...s,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(o1,{children:f.jsx(Ph,{className:"h-4 w-4"})})}),t]}));r5.displayName=n1.displayName;const i5=x.forwardRef(({className:a,children:t,...n},s)=>f.jsxs(s1,{ref:s,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(o1,{children:f.jsx(R2,{className:"h-2 w-2 fill-current"})})}),t]}));i5.displayName=s1.displayName;const yh=x.forwardRef(({className:a,inset:t,...n},s)=>f.jsx(e1,{ref:s,className:Ee("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",a),...n}));yh.displayName=e1.displayName;const c1=x.forwardRef(({className:a,...t},n)=>f.jsx(a1,{ref:n,className:Ee("-mx-1 my-1 h-px bg-muted",a),...t}));c1.displayName=a1.displayName;const u1="archiphoenix_component_library",w0=()=>{if(typeof window>"u")return{favorites:[],collections:[]};try{const a=window.localStorage.getItem(u1);if(!a)return{favorites:[],collections:[]};const t=JSON.parse(a);return{favorites:Array.isArray(t.favorites)?t.favorites:[],collections:Array.isArray(t.collections)?t.collections:[]}}catch(a){return sb("Failed to load component library state",a instanceof Error?a:new Error(String(a))),{favorites:[],collections:[]}}},cr=a=>{typeof window>"u"||window.localStorage.setItem(u1,JSON.stringify(a))},l5=Ss((a,t)=>({favorites:w0().favorites,collections:w0().collections,toggleFavorite:n=>{a(s=>{const l=s.favorites.includes(n)?s.favorites.filter(c=>c!==n):[...s.favorites,n];return cr({favorites:l,collections:s.collections}),{favorites:l}})},createCollection:n=>{const s=n.trim();if(!s)return null;const r={id:`collection-${Date.now()}`,name:s,componentIds:[]};return a(l=>{const c=[...l.collections,r];return cr({favorites:l.favorites,collections:c}),{collections:c}}),r.id},renameCollection:(n,s)=>{a(r=>{const l=r.collections.map(c=>c.id===n?{...c,name:s}:c);return cr({favorites:r.favorites,collections:l}),{collections:l}})},deleteCollection:n=>{a(s=>{const r=s.collections.filter(l=>l.id!==n);return cr({favorites:s.favorites,collections:r}),{collections:r}})},addComponentToCollection:(n,s)=>{a(r=>{const l=r.collections.map(c=>c.id!==n||c.componentIds.includes(s)?c:{...c,componentIds:[...c.componentIds,s]});return cr({favorites:r.favorites,collections:l}),{collections:l}})},removeComponentFromCollection:(n,s)=>{a(r=>{const l=r.collections.map(c=>c.id!==n?c:{...c,componentIds:c.componentIds.filter(d=>d!==s)});return cr({favorites:r.favorites,collections:l}),{collections:l}})}}));function C0({open:a,initialName:t="",onConfirm:n,onCancel:s}){const[r,l]=x.useState(t);x.useEffect(()=>{a&&l(t)},[a,t]);const c=()=>{r.trim()&&n(r.trim())};return f.jsx(op,{open:a,onOpenChange:d=>!d&&s(),children:f.jsxs(Yc,{children:[f.jsxs(Xc,{children:[f.jsx(Zc,{children:t?"Rename Collection":"Create Collection"}),f.jsx(Jc,{children:t?"Enter a new name for the collection":"Enter a name for the new collection"})]}),f.jsxs("div",{className:"py-4",children:[f.jsx(nt,{htmlFor:"collection-name",children:"Collection Name"}),f.jsx(Tt,{id:"collection-name",value:r,onChange:d=>l(d.target.value),onKeyDown:d=>{d.key==="Enter"&&c()},className:"mt-2",autoFocus:!0})]}),f.jsxs(Wc,{children:[f.jsx(Te,{variant:"outline",onClick:s,children:"Cancel"}),f.jsx(Te,{onClick:c,disabled:!r.trim(),children:t?"Save":"Create"})]})]})})}function c5(){const[a,t]=x.useState(""),[n,s]=x.useState("all"),[r,l]=x.useState(!1),[c,d]=x.useState(!1),[h,p]=x.useState(null),[g,m]=x.useState(null),[v,w]=x.useState(180),[S,C]=x.useState(!1),R=x.useRef(null),[E,j]=x.useState(()=>{const F=localStorage.getItem("sidebar-expanded-categories");if(F)try{const ae=JSON.parse(F);return bi.reduce((B,V)=>(B[V.id]=ae[V.id]!==void 0?ae[V.id]:!0,B),{})}catch{}return bi.reduce((ae,B)=>(ae[B.id]=!0,ae),{})}),{favorites:N,collections:T,toggleFavorite:k,createCollection:U,renameCollection:I,deleteCollection:q,addComponentToCollection:te,removeComponentFromCollection:se}=l5(),le=F=>{j(ae=>({...ae,[F]:!ae[F]}))},ee=a.toLowerCase(),oe=x.useMemo(()=>Ni.filter(F=>F.label.toLowerCase().includes(ee)),[ee]),ce=x.useMemo(()=>oe.filter(F=>N.includes(F.id)),[N,oe]),ue=(F,ae)=>{F.dataTransfer.setData("application/json",JSON.stringify(ae)),F.dataTransfer.effectAllowed="copy"},z=()=>{p(null),l(!0)},D=F=>{if(h)I(h.id,F),p(null);else{if(T.some(V=>V.name.toLowerCase()===F.toLowerCase())){alert("A collection with this name already exists");return}U(F)||alert("Failed to create collection")}l(!1)},L=()=>{l(!1),p(null)},Y=F=>{m(F),p(null),d(!0)},he=F=>{if(!g)return;if(T.some(V=>V.name.toLowerCase()===F.toLowerCase())){alert("A collection with this name already exists");return}const B=U(F);B?te(B,g):alert("Failed to create collection"),d(!1),m(null)},_=()=>{d(!1),m(null)},$=F=>{p(F),l(!0)};x.useEffect(()=>{localStorage.setItem("sidebar-expanded-categories",JSON.stringify(E))},[E]),x.useEffect(()=>{if(!S)return;const F=B=>{if(!R.current)return;const V=R.current.closest(".h-full");if(!V)return;const pe=V.getBoundingClientRect();R.current.getBoundingClientRect();const me=pe.bottom-B.clientY,ye=70,ve=pe.height*.8;w(Math.max(ye,Math.min(ve,me)))},ae=()=>{C(!1)};return document.addEventListener("mousemove",F),document.addEventListener("mouseup",ae),()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",ae)}},[S]);const X=(F,ae)=>{const B=N.includes(F.id);return f.jsxs("div",{draggable:!0,onDragStart:V=>ue(V,F),className:`flex items-center gap-1 px-1 ${ae?.compact?"py-0.5 text-[10px]":"py-1 text-xs"} rounded-md bg-secondary/50 hover:bg-secondary cursor-move transition-colors border border-border/50`,children:[f.jsxs("div",{className:"flex items-center gap-0.5 flex-1 min-w-0",children:[f.jsx("span",{className:"text-sm flex-shrink-0",children:F.icon}),f.jsx("span",{className:"text-foreground truncate min-w-0",children:F.label})]}),f.jsxs("div",{className:"ml-auto flex items-center gap-1",children:[f.jsx("button",{type:"button",onClick:V=>{V.preventDefault(),V.stopPropagation(),k(F.id)},onMouseDown:V=>V.stopPropagation(),className:"p-1 rounded-md hover:bg-muted transition-colors",title:B?"Remove from favorites":"Add to favorites",children:f.jsx(xA,{className:`h-4 w-4 ${B?"text-yellow-400":"text-muted-foreground"}`,fill:B?"currentColor":"none"})}),f.jsxs(n5,{children:[f.jsx(s5,{asChild:!0,children:f.jsx("button",{type:"button",onMouseDown:V=>V.stopPropagation(),className:"p-1 rounded-md hover:bg-muted transition-colors",title:"Add to collection",children:f.jsx(Nc,{className:"h-4 w-4 text-muted-foreground"})})}),f.jsxs(l1,{align:"end",className:"w-48",children:[T.length===0&&f.jsxs(f.Fragment,{children:[f.jsx(yh,{children:"No collections"}),f.jsxs(Cc,{onSelect:V=>{V.preventDefault(),Y(F.id)},children:[f.jsx(lh,{className:"h-4 w-4 mr-2"}),"Create and add"]})]}),T.length>0&&f.jsxs(f.Fragment,{children:[f.jsx(yh,{children:"Add to collection"}),T.map(V=>f.jsx(Cc,{onSelect:pe=>{pe.preventDefault(),te(V.id,F.id)},children:V.name},V.id)),f.jsx(c1,{}),f.jsxs(Cc,{onSelect:V=>{V.preventDefault(),Y(F.id)},children:[f.jsx(lh,{className:"h-4 w-4 mr-2"}),"New collection"]})]})]})]}),ae?.onRemove&&f.jsx("button",{type:"button",onClick:V=>{V.preventDefault(),V.stopPropagation(),ae.onRemove?.()},onMouseDown:V=>V.stopPropagation(),className:"p-1 rounded-md hover:bg-muted transition-colors",title:"Remove from collection",children:f.jsx(vs,{className:"h-4 w-4 text-muted-foreground"})})]})]},`${F.id}-${ae?.compact?"compact":"default"}`)},W=n==="all"?bi:bi.filter(F=>F.id===n);return f.jsxs("div",{className:"w-60 h-full bg-sidebar-bg border-r border-border flex flex-col",children:[f.jsxs("div",{className:"p-3 border-b border-border",children:[f.jsx("h2",{className:"text-xs font-semibold text-foreground mb-2",children:"Components"}),f.jsxs("div",{className:"relative",children:[f.jsx(Uc,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),f.jsx(Tt,{type:"text",placeholder:"Search...",value:a,onChange:F=>t(F.target.value),className:"pl-7 h-8 text-xs"})]})]}),f.jsx("div",{className:"px-3 py-1.5 border-b border-border pb-2",children:f.jsx(ip,{value:n,onValueChange:s,children:f.jsxs(an,{orientation:"horizontal",className:"w-full",children:[f.jsxs(su,{className:"flex w-max gap-0.5",children:[f.jsx(hs,{value:"all",className:"text-xs px-2 py-1",children:"All"}),bi.map(F=>f.jsx(hs,{value:F.id,className:"text-xs px-2 py-1",children:F.icon},F.id))]}),f.jsx(Gc,{orientation:"horizontal",className:"data-[state=visible]:bg-accent/20 data-[state=visible]:hover:bg-accent/30 [&>[data-radix-scroll-area-thumb]]:bg-accent/80 hover:[&>[data-radix-scroll-area-thumb]]:bg-accent rounded-full",style:{transition:"none"}})]})})}),ce.length>0&&f.jsxs("div",{className:"px-3 py-2 border-b border-border",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsx("span",{className:"text-[10px] font-semibold uppercase text-muted-foreground",children:"Favorites"}),f.jsx("span",{className:"text-[10px] text-muted-foreground",children:ce.length})]}),f.jsx("div",{className:"space-y-1",children:ce.map(F=>X(F,{compact:!0}))})]}),f.jsx(an,{className:"flex-1",children:f.jsx("div",{className:"pl-3 pr-6 py-2",children:W.map(F=>{const ae=oe.filter(B=>B.category===F.id);return ae.length===0&&a?null:f.jsxs("div",{className:"mb-1.5",children:[f.jsxs(Te,{variant:"ghost",className:"w-full justify-start px-1 h-7 text-xs",onClick:()=>le(F.id),children:[E[F.id]?f.jsx(Hc,{className:"h-3.5 w-3.5 mr-0.5"}):f.jsx(Ih,{className:"h-3.5 w-3.5 mr-0.5"}),f.jsx("span",{className:"mr-1",children:F.icon}),f.jsx("span",{className:"flex-1 text-left truncate min-w-0 mr-1",children:F.label}),f.jsx("span",{className:"text-[10px] text-muted-foreground flex-shrink-0",children:ae.length})]}),E[F.id]&&f.jsx("div",{className:"ml-1.5 mt-1 space-y-1",children:ae.map(B=>X(B,{compact:!0}))})]},F.id)})})}),f.jsx("div",{ref:R,className:"h-2 border-t border-border cursor-row-resize hover:bg-accent/50 transition-colors relative group flex items-center justify-center",onMouseDown:F=>{F.preventDefault(),C(!0)},style:{userSelect:"none"},children:f.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:f.jsx(q2,{className:"h-3 w-3 text-muted-foreground"})})}),f.jsxs("div",{className:"border-t border-border overflow-hidden flex flex-col",style:{height:`${v}px`},children:[f.jsx("div",{className:"p-2 pb-1.5 flex-shrink-0",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-[10px] uppercase font-semibold text-muted-foreground",children:"Collections"}),f.jsxs(Te,{size:"xs",variant:"outline",className:"h-6 text-[10px] px-2",onClick:F=>{F.preventDefault(),F.stopPropagation(),z()},type:"button",children:[f.jsx(Nc,{className:"h-3 w-3 mr-0.5"}),"New"]})]})}),f.jsx(an,{className:"flex-1",children:f.jsx("div",{className:"pl-1.5 pr-4 pb-2 space-y-1.5",children:T.length===0?f.jsx("p",{className:"text-[10px] text-muted-foreground px-0.5",children:"Create collections to quickly build typical architectures."}):T.map(F=>{const ae=F.componentIds.map(B=>Ni.find(V=>V.id===B)).filter(B=>!!B).filter(B=>B.label.toLowerCase().includes(ee));return f.jsxs("div",{className:"rounded-md border border-border/60 p-1.5",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-xs font-medium text-foreground truncate",children:F.name}),f.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[ae.length," items"]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Te,{size:"icon",variant:"ghost",className:"h-7 w-7",title:"Rename",onClick:()=>$(F),children:""}),f.jsx(Te,{size:"icon",variant:"ghost",className:"h-7 w-7",title:"Delete collection",onClick:()=>q(F.id),children:f.jsx(vs,{className:"h-4 w-4"})})]})]}),ae.length===0?f.jsx("p",{className:"text-[10px] text-muted-foreground",children:'Add components via "+" menu.'}):f.jsx("div",{className:"space-y-1",children:ae.map(B=>X(B,{compact:!0,onRemove:()=>se(F.id,B.id)}))})]},F.id)})})})]}),f.jsx(C0,{open:r,initialName:h?.name||"",onConfirm:D,onCancel:L}),f.jsx(C0,{open:c,initialName:"",onConfirm:he,onCancel:_})]})}const hu=Ss(a=>({tabs:[{id:"diagram-1",title:"Untitled Diagram",type:"diagram",active:!0}],addTab:t=>a(n=>{if(t.componentId){const r=n.tabs.find(l=>l.componentId===t.componentId);if(r)return{tabs:n.tabs.map(l=>({...l,active:l.id===r.id}))}}const s={...t,id:`${t.type}-${Date.now()}`,active:!0};return{tabs:[...n.tabs.map(r=>({...r,active:!1})),s]}}),closeTab:t=>a(n=>{const s=n.tabs.filter(c=>c.id!==t);if(s.length===0)return{tabs:[{id:"diagram-1",title:"Untitled Diagram",type:"diagram",active:!0}]};const r=n.tabs.findIndex(c=>c.id===t);if(n.tabs[r]?.active&&s.length>0){const c=Math.min(r,s.length-1);s[c].active=!0}return{tabs:s}}),setActiveTab:t=>a(n=>({tabs:n.tabs.map(s=>({...s,active:s.id===t}))})),updateTab:(t,n)=>a(s=>({tabs:s.tabs.map(r=>r.id===t?{...r,...n}:r)}))}));function u5(a){const t=d5(a),n=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(h5);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(t,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(t,{...c,ref:r,children:l})});return n.displayName=`${a}.Slot`,n}function d5(a){const t=x.forwardRef((n,s)=>{const{children:r,...l}=n;if(x.isValidElement(r)){const c=g5(r),d=p5(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return t.displayName=`${a}.SlotClone`,t}var f5=Symbol("radix.slottable");function h5(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===f5}function p5(a,t){const n={...t};for(const s in t){const r=a[s],l=t[s];/^on[A-Z]/.test(s)?r&&l?n[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(n[s]=r):s==="style"?n[s]={...r,...l}:s==="className"&&(n[s]=[r,l].filter(Boolean).join(" "))}return{...a,...n}}function g5(a){let t=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?a.ref:(t=Object.getOwnPropertyDescriptor(a,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?a.props.ref:a.props.ref||a.ref)}function pu(a){const t=x.useRef({value:a,previous:a});return x.useMemo(()=>(t.current.value!==a&&(t.current.previous=t.current.value,t.current.value=a),t.current.previous),[a])}var d1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),m5="VisuallyHidden",y5=x.forwardRef((a,t)=>f.jsx(Ae.span,{...a,ref:t,style:{...d1,...a.style}}));y5.displayName=m5;var v5=[" ","Enter","ArrowUp","ArrowDown"],b5=[" ","Enter"],ma="Select",[gu,mu,x5]=eu(ma),[Er]=bn(ma,[x5,Mr]),yu=Mr(),[w5,qo]=Er(ma),[C5,S5]=Er(ma),f1=a=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:r,onOpenChange:l,value:c,defaultValue:d,onValueChange:h,dir:p,name:g,autoComplete:m,disabled:v,required:w,form:S}=a,C=yu(t),[R,E]=x.useState(null),[j,N]=x.useState(null),[T,k]=x.useState(!1),U=wr(p),[I,q]=xs({prop:s,defaultProp:r??!1,onChange:l,caller:ma}),[te,se]=xs({prop:c,defaultProp:d,onChange:h,caller:ma}),le=x.useRef(null),ee=R?S||!!R.closest("form"):!0,[oe,ce]=x.useState(new Set),ue=Array.from(oe).map(z=>z.props.value).join(";");return f.jsx(mp,{...C,children:f.jsxs(w5,{required:w,scope:t,trigger:R,onTriggerChange:E,valueNode:j,onValueNodeChange:N,valueNodeHasChildren:T,onValueNodeHasChildrenChange:k,contentId:ns(),value:te,onValueChange:se,open:I,onOpenChange:q,dir:U,triggerPointerDownPosRef:le,disabled:v,children:[f.jsx(gu.Provider,{scope:t,children:f.jsx(C5,{scope:a.__scopeSelect,onNativeOptionAdd:x.useCallback(z=>{ce(D=>new Set(D).add(z))},[]),onNativeOptionRemove:x.useCallback(z=>{ce(D=>{const L=new Set(D);return L.delete(z),L})},[]),children:n})}),ee?f.jsxs(L1,{"aria-hidden":!0,required:w,tabIndex:-1,name:g,autoComplete:m,value:te,onChange:z=>se(z.target.value),disabled:v,form:S,children:[te===void 0?f.jsx("option",{value:""}):null,Array.from(oe)]},ue):null]})})};f1.displayName=ma;var h1="SelectTrigger",p1=x.forwardRef((a,t)=>{const{__scopeSelect:n,disabled:s=!1,...r}=a,l=yu(n),c=qo(h1,n),d=c.disabled||s,h=De(t,c.onTriggerChange),p=mu(n),g=x.useRef("touch"),[m,v,w]=I1(C=>{const R=p().filter(N=>!N.disabled),E=R.find(N=>N.value===c.value),j=q1(R,C,E);j!==void 0&&c.onValueChange(j.value)}),S=C=>{d||(c.onOpenChange(!0),w()),C&&(c.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return f.jsx(cu,{asChild:!0,...l,children:f.jsx(Ae.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":P1(c.value)?"":void 0,...r,ref:h,onClick:ge(r.onClick,C=>{C.currentTarget.focus(),g.current!=="mouse"&&S(C)}),onPointerDown:ge(r.onPointerDown,C=>{g.current=C.pointerType;const R=C.target;R.hasPointerCapture(C.pointerId)&&R.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(S(C),C.preventDefault())}),onKeyDown:ge(r.onKeyDown,C=>{const R=m.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&v(C.key),!(R&&C.key===" ")&&v5.includes(C.key)&&(S(),C.preventDefault())})})})});p1.displayName=h1;var g1="SelectValue",m1=x.forwardRef((a,t)=>{const{__scopeSelect:n,className:s,style:r,children:l,placeholder:c="",...d}=a,h=qo(g1,n),{onValueNodeHasChildrenChange:p}=h,g=l!==void 0,m=De(t,h.onValueNodeChange);return sn(()=>{p(g)},[p,g]),f.jsx(Ae.span,{...d,ref:m,style:{pointerEvents:"none"},children:P1(h.value)?f.jsx(f.Fragment,{children:c}):l})});m1.displayName=g1;var M5="SelectIcon",y1=x.forwardRef((a,t)=>{const{__scopeSelect:n,children:s,...r}=a;return f.jsx(Ae.span,{"aria-hidden":!0,...r,ref:t,children:s||""})});y1.displayName=M5;var E5="SelectPortal",v1=a=>f.jsx(Pi,{asChild:!0,...a});v1.displayName=E5;var ya="SelectContent",b1=x.forwardRef((a,t)=>{const n=qo(ya,a.__scopeSelect),[s,r]=x.useState();if(sn(()=>{r(new DocumentFragment)},[]),!n.open){const l=s;return l?_i.createPortal(f.jsx(x1,{scope:a.__scopeSelect,children:f.jsx(gu.Slot,{scope:a.__scopeSelect,children:f.jsx("div",{children:a.children})})}),l):null}return f.jsx(w1,{...a,ref:t})});b1.displayName=ya;var es=10,[x1,Ho]=Er(ya),R5="SelectContentImpl",N5=u5("SelectContent.RemoveScroll"),w1=x.forwardRef((a,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:l,onPointerDownOutside:c,side:d,sideOffset:h,align:p,alignOffset:g,arrowPadding:m,collisionBoundary:v,collisionPadding:w,sticky:S,hideWhenDetached:C,avoidCollisions:R,...E}=a,j=qo(ya,n),[N,T]=x.useState(null),[k,U]=x.useState(null),I=De(t,B=>T(B)),[q,te]=x.useState(null),[se,le]=x.useState(null),ee=mu(n),[oe,ce]=x.useState(!1),ue=x.useRef(!1);x.useEffect(()=>{if(N)return Vc(N)},[N]),Qc();const z=x.useCallback(B=>{const[V,...pe]=ee().map(ve=>ve.ref.current),[me]=pe.slice(-1),ye=document.activeElement;for(const ve of B)if(ve===ye||(ve?.scrollIntoView({block:"nearest"}),ve===V&&k&&(k.scrollTop=0),ve===me&&k&&(k.scrollTop=k.scrollHeight),ve?.focus(),document.activeElement!==ye))return},[ee,k]),D=x.useCallback(()=>z([q,N]),[z,q,N]);x.useEffect(()=>{oe&&D()},[oe,D]);const{onOpenChange:L,triggerPointerDownPosRef:Y}=j;x.useEffect(()=>{if(N){let B={x:0,y:0};const V=me=>{B={x:Math.abs(Math.round(me.pageX)-(Y.current?.x??0)),y:Math.abs(Math.round(me.pageY)-(Y.current?.y??0))}},pe=me=>{B.x<=10&&B.y<=10?me.preventDefault():N.contains(me.target)||L(!1),document.removeEventListener("pointermove",V),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",V),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",pe,{capture:!0})}}},[N,L,Y]),x.useEffect(()=>{const B=()=>L(!1);return window.addEventListener("blur",B),window.addEventListener("resize",B),()=>{window.removeEventListener("blur",B),window.removeEventListener("resize",B)}},[L]);const[he,_]=I1(B=>{const V=ee().filter(ye=>!ye.disabled),pe=V.find(ye=>ye.ref.current===document.activeElement),me=q1(V,B,pe);me&&setTimeout(()=>me.ref.current.focus())}),$=x.useCallback((B,V,pe)=>{const me=!ue.current&&!pe;(j.value!==void 0&&j.value===V||me)&&(te(B),me&&(ue.current=!0))},[j.value]),X=x.useCallback(()=>N?.focus(),[N]),W=x.useCallback((B,V,pe)=>{const me=!ue.current&&!pe;(j.value!==void 0&&j.value===V||me)&&le(B)},[j.value]),F=s==="popper"?vh:C1,ae=F===vh?{side:d,sideOffset:h,align:p,alignOffset:g,arrowPadding:m,collisionBoundary:v,collisionPadding:w,sticky:S,hideWhenDetached:C,avoidCollisions:R}:{};return f.jsx(x1,{scope:n,content:N,viewport:k,onViewportChange:U,itemRefCallback:$,selectedItem:q,onItemLeave:X,itemTextRefCallback:W,focusSelectedItem:D,selectedItemText:se,position:s,isPositioned:oe,searchRef:he,children:f.jsx(Ii,{as:N5,allowPinchZoom:!0,children:f.jsx(Li,{asChild:!0,trapped:j.open,onMountAutoFocus:B=>{B.preventDefault()},onUnmountAutoFocus:ge(r,B=>{j.trigger?.focus({preventScroll:!0}),B.preventDefault()}),children:f.jsx(Oi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:B=>B.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:f.jsx(F,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:B=>B.preventDefault(),...E,...ae,onPlaced:()=>ce(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:ge(E.onKeyDown,B=>{const V=B.ctrlKey||B.altKey||B.metaKey;if(B.key==="Tab"&&B.preventDefault(),!V&&B.key.length===1&&_(B.key),["ArrowUp","ArrowDown","Home","End"].includes(B.key)){let me=ee().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(B.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(B.key)){const ye=B.target,ve=me.indexOf(ye);me=me.slice(ve+1)}setTimeout(()=>z(me)),B.preventDefault()}})})})})})})});w1.displayName=R5;var A5="SelectItemAlignedPosition",C1=x.forwardRef((a,t)=>{const{__scopeSelect:n,onPlaced:s,...r}=a,l=qo(ya,n),c=Ho(ya,n),[d,h]=x.useState(null),[p,g]=x.useState(null),m=De(t,I=>g(I)),v=mu(n),w=x.useRef(!1),S=x.useRef(!0),{viewport:C,selectedItem:R,selectedItemText:E,focusSelectedItem:j}=c,N=x.useCallback(()=>{if(l.trigger&&l.valueNode&&d&&p&&C&&R&&E){const I=l.trigger.getBoundingClientRect(),q=p.getBoundingClientRect(),te=l.valueNode.getBoundingClientRect(),se=E.getBoundingClientRect();if(l.dir!=="rtl"){const ye=se.left-q.left,ve=te.left-ye,Pe=I.left-ve,Ue=I.width+Pe,st=Math.max(Ue,q.width),We=window.innerWidth-es,kt=Ri(ve,[es,Math.max(es,We-st)]);d.style.minWidth=Ue+"px",d.style.left=kt+"px"}else{const ye=q.right-se.right,ve=window.innerWidth-te.right-ye,Pe=window.innerWidth-I.right-ve,Ue=I.width+Pe,st=Math.max(Ue,q.width),We=window.innerWidth-es,kt=Ri(ve,[es,Math.max(es,We-st)]);d.style.minWidth=Ue+"px",d.style.right=kt+"px"}const le=v(),ee=window.innerHeight-es*2,oe=C.scrollHeight,ce=window.getComputedStyle(p),ue=parseInt(ce.borderTopWidth,10),z=parseInt(ce.paddingTop,10),D=parseInt(ce.borderBottomWidth,10),L=parseInt(ce.paddingBottom,10),Y=ue+z+oe+L+D,he=Math.min(R.offsetHeight*5,Y),_=window.getComputedStyle(C),$=parseInt(_.paddingTop,10),X=parseInt(_.paddingBottom,10),W=I.top+I.height/2-es,F=ee-W,ae=R.offsetHeight/2,B=R.offsetTop+ae,V=ue+z+B,pe=Y-V;if(V<=W){const ye=le.length>0&&R===le[le.length-1].ref.current;d.style.bottom="0px";const ve=p.clientHeight-C.offsetTop-C.offsetHeight,Pe=Math.max(F,ae+(ye?X:0)+ve+D),Ue=V+Pe;d.style.height=Ue+"px"}else{const ye=le.length>0&&R===le[0].ref.current;d.style.top="0px";const Pe=Math.max(W,ue+C.offsetTop+(ye?$:0)+ae)+pe;d.style.height=Pe+"px",C.scrollTop=V-W+C.offsetTop}d.style.margin=`${es}px 0`,d.style.minHeight=he+"px",d.style.maxHeight=ee+"px",s?.(),requestAnimationFrame(()=>w.current=!0)}},[v,l.trigger,l.valueNode,d,p,C,R,E,l.dir,s]);sn(()=>N(),[N]);const[T,k]=x.useState();sn(()=>{p&&k(window.getComputedStyle(p).zIndex)},[p]);const U=x.useCallback(I=>{I&&S.current===!0&&(N(),j?.(),S.current=!1)},[N,j]);return f.jsx(j5,{scope:n,contentWrapper:d,shouldExpandOnScrollRef:w,onScrollButtonChange:U,children:f.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:f.jsx(Ae.div,{...r,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});C1.displayName=A5;var T5="SelectPopperPosition",vh=x.forwardRef((a,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:r=es,...l}=a,c=yu(n);return f.jsx(yp,{...c,...l,ref:t,align:s,collisionPadding:r,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vh.displayName=T5;var[j5,Rp]=Er(ya,{}),bh="SelectViewport",S1=x.forwardRef((a,t)=>{const{__scopeSelect:n,nonce:s,...r}=a,l=Ho(bh,n),c=Rp(bh,n),d=De(t,l.onViewportChange),h=x.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),f.jsx(gu.Slot,{scope:n,children:f.jsx(Ae.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ge(r.onScroll,p=>{const g=p.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:v}=c;if(v?.current&&m){const w=Math.abs(h.current-g.scrollTop);if(w>0){const S=window.innerHeight-es*2,C=parseFloat(m.style.minHeight),R=parseFloat(m.style.height),E=Math.max(C,R);if(E<S){const j=E+w,N=Math.min(S,j),T=j-N;m.style.height=N+"px",m.style.bottom==="0px"&&(g.scrollTop=T>0?T:0,m.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});S1.displayName=bh;var M1="SelectGroup",[k5,D5]=Er(M1),_5=x.forwardRef((a,t)=>{const{__scopeSelect:n,...s}=a,r=ns();return f.jsx(k5,{scope:n,id:r,children:f.jsx(Ae.div,{role:"group","aria-labelledby":r,...s,ref:t})})});_5.displayName=M1;var E1="SelectLabel",R1=x.forwardRef((a,t)=>{const{__scopeSelect:n,...s}=a,r=D5(E1,n);return f.jsx(Ae.div,{id:r.id,...s,ref:t})});R1.displayName=E1;var Pc="SelectItem",[z5,N1]=Er(Pc),A1=x.forwardRef((a,t)=>{const{__scopeSelect:n,value:s,disabled:r=!1,textValue:l,...c}=a,d=qo(Pc,n),h=Ho(Pc,n),p=d.value===s,[g,m]=x.useState(l??""),[v,w]=x.useState(!1),S=De(t,j=>h.itemRefCallback?.(j,s,r)),C=ns(),R=x.useRef("touch"),E=()=>{r||(d.onValueChange(s),d.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(z5,{scope:n,value:s,disabled:r,textId:C,isSelected:p,onItemTextChange:x.useCallback(j=>{m(N=>N||(j?.textContent??"").trim())},[]),children:f.jsx(gu.ItemSlot,{scope:n,value:s,disabled:r,textValue:g,children:f.jsx(Ae.div,{role:"option","aria-labelledby":C,"data-highlighted":v?"":void 0,"aria-selected":p&&v,"data-state":p?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...c,ref:S,onFocus:ge(c.onFocus,()=>w(!0)),onBlur:ge(c.onBlur,()=>w(!1)),onClick:ge(c.onClick,()=>{R.current!=="mouse"&&E()}),onPointerUp:ge(c.onPointerUp,()=>{R.current==="mouse"&&E()}),onPointerDown:ge(c.onPointerDown,j=>{R.current=j.pointerType}),onPointerMove:ge(c.onPointerMove,j=>{R.current=j.pointerType,r?h.onItemLeave?.():R.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(c.onPointerLeave,j=>{j.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:ge(c.onKeyDown,j=>{h.searchRef?.current!==""&&j.key===" "||(b5.includes(j.key)&&E(),j.key===" "&&j.preventDefault())})})})})});A1.displayName=Pc;var wi="SelectItemText",T1=x.forwardRef((a,t)=>{const{__scopeSelect:n,className:s,style:r,...l}=a,c=qo(wi,n),d=Ho(wi,n),h=N1(wi,n),p=S5(wi,n),[g,m]=x.useState(null),v=De(t,E=>m(E),h.onItemTextChange,E=>d.itemTextRefCallback?.(E,h.value,h.disabled)),w=g?.textContent,S=x.useMemo(()=>f.jsx("option",{value:h.value,disabled:h.disabled,children:w},h.value),[h.disabled,h.value,w]),{onNativeOptionAdd:C,onNativeOptionRemove:R}=p;return sn(()=>(C(S),()=>R(S)),[C,R,S]),f.jsxs(f.Fragment,{children:[f.jsx(Ae.span,{id:h.textId,...l,ref:v}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?_i.createPortal(l.children,c.valueNode):null]})});T1.displayName=wi;var j1="SelectItemIndicator",k1=x.forwardRef((a,t)=>{const{__scopeSelect:n,...s}=a;return N1(j1,n).isSelected?f.jsx(Ae.span,{"aria-hidden":!0,...s,ref:t}):null});k1.displayName=j1;var xh="SelectScrollUpButton",D1=x.forwardRef((a,t)=>{const n=Ho(xh,a.__scopeSelect),s=Rp(xh,a.__scopeSelect),[r,l]=x.useState(!1),c=De(t,s.onScrollButtonChange);return sn(()=>{if(n.viewport&&n.isPositioned){let d=function(){const p=h.scrollTop>0;l(p)};const h=n.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[n.viewport,n.isPositioned]),r?f.jsx(z1,{...a,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:h}=n;d&&h&&(d.scrollTop=d.scrollTop-h.offsetHeight)}}):null});D1.displayName=xh;var wh="SelectScrollDownButton",_1=x.forwardRef((a,t)=>{const n=Ho(wh,a.__scopeSelect),s=Rp(wh,a.__scopeSelect),[r,l]=x.useState(!1),c=De(t,s.onScrollButtonChange);return sn(()=>{if(n.viewport&&n.isPositioned){let d=function(){const p=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<p;l(g)};const h=n.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[n.viewport,n.isPositioned]),r?f.jsx(z1,{...a,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:h}=n;d&&h&&(d.scrollTop=d.scrollTop+h.offsetHeight)}}):null});_1.displayName=wh;var z1=x.forwardRef((a,t)=>{const{__scopeSelect:n,onAutoScroll:s,...r}=a,l=Ho("SelectScrollButton",n),c=x.useRef(null),d=mu(n),h=x.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return x.useEffect(()=>()=>h(),[h]),sn(()=>{d().find(g=>g.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),f.jsx(Ae.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:ge(r.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(s,50))}),onPointerMove:ge(r.onPointerMove,()=>{l.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(s,50))}),onPointerLeave:ge(r.onPointerLeave,()=>{h()})})}),O5="SelectSeparator",O1=x.forwardRef((a,t)=>{const{__scopeSelect:n,...s}=a;return f.jsx(Ae.div,{"aria-hidden":!0,...s,ref:t})});O1.displayName=O5;var Ch="SelectArrow",L5=x.forwardRef((a,t)=>{const{__scopeSelect:n,...s}=a,r=yu(n),l=qo(Ch,n),c=Ho(Ch,n);return l.open&&c.position==="popper"?f.jsx(vp,{...r,...s,ref:t}):null});L5.displayName=Ch;var P5="SelectBubbleInput",L1=x.forwardRef(({__scopeSelect:a,value:t,...n},s)=>{const r=x.useRef(null),l=De(s,r),c=pu(t);return x.useEffect(()=>{const d=r.current;if(!d)return;const h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==t&&g){const m=new Event("change",{bubbles:!0});g.call(d,t),d.dispatchEvent(m)}},[c,t]),f.jsx(Ae.select,{...n,style:{...d1,...n.style},ref:l,defaultValue:t})});L1.displayName=P5;function P1(a){return a===""||a===void 0}function I1(a){const t=nn(a),n=x.useRef(""),s=x.useRef(0),r=x.useCallback(c=>{const d=n.current+c;t(d),(function h(p){n.current=p,window.clearTimeout(s.current),p!==""&&(s.current=window.setTimeout(()=>h(""),1e3))})(d)},[t]),l=x.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,r,l]}function q1(a,t,n){const r=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,l=n?a.indexOf(n):-1;let c=I5(a,Math.max(l,0));r.length===1&&(c=c.filter(p=>p!==n));const h=c.find(p=>p.textValue.toLowerCase().startsWith(r.toLowerCase()));return h!==n?h:void 0}function I5(a,t){return a.map((n,s)=>a[(t+s)%a.length])}var q5=f1,H1=p1,H5=m1,U5=y1,B5=v1,U1=b1,$5=S1,B1=R1,$1=A1,G5=T1,Q5=k1,G1=D1,Q1=_1,F1=O1;const F5=q5,V5=H5,V1=x.forwardRef(({className:a,children:t,...n},s)=>f.jsxs(H1,{ref:s,className:Ee("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[t,f.jsx(U5,{asChild:!0,children:f.jsx(Hc,{className:"h-4 w-4 opacity-50"})})]}));V1.displayName=H1.displayName;const K1=x.forwardRef(({className:a,...t},n)=>f.jsx(G1,{ref:n,className:Ee("flex cursor-default items-center justify-center py-1",a),...t,children:f.jsx(ib,{className:"h-4 w-4"})}));K1.displayName=G1.displayName;const Y1=x.forwardRef(({className:a,...t},n)=>f.jsx(Q1,{ref:n,className:Ee("flex cursor-default items-center justify-center py-1",a),...t,children:f.jsx(Hc,{className:"h-4 w-4"})}));Y1.displayName=Q1.displayName;const X1=x.forwardRef(({className:a,children:t,position:n="popper",...s},r)=>f.jsx(B5,{children:f.jsxs(U1,{ref:r,className:Ee("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...s,children:[f.jsx(K1,{}),f.jsx($5,{className:Ee("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),f.jsx(Y1,{})]})}));X1.displayName=U1.displayName;const K5=x.forwardRef(({className:a,...t},n)=>f.jsx(B1,{ref:n,className:Ee("px-2 py-1.5 text-sm font-semibold",a),...t}));K5.displayName=B1.displayName;const Ci=x.forwardRef(({className:a,children:t,...n},s)=>f.jsxs($1,{ref:s,className:Ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[f.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(Q5,{children:f.jsx(Ph,{className:"h-4 w-4"})})}),f.jsx(G5,{children:t})]}));Ci.displayName=$1.displayName;const Y5=x.forwardRef(({className:a,...t},n)=>f.jsx(F1,{ref:n,className:Ee("-mx-1 my-1 h-px bg-muted",a),...t}));Y5.displayName=F1.displayName;var W1=["PageUp","PageDown"],Z1=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],J1={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Rr="Slider",[Sh,X5,W5]=eu(Rr),[eC]=bn(Rr,[W5]),[Z5,vu]=eC(Rr),tC=x.forwardRef((a,t)=>{const{name:n,min:s=0,max:r=100,step:l=1,orientation:c="horizontal",disabled:d=!1,minStepsBetweenThumbs:h=0,defaultValue:p=[s],value:g,onValueChange:m=()=>{},onValueCommit:v=()=>{},inverted:w=!1,form:S,...C}=a,R=x.useRef(new Set),E=x.useRef(0),N=c==="horizontal"?J5:ez,[T=[],k]=xs({prop:g,defaultProp:p,onChange:le=>{[...R.current][E.current]?.focus(),m(le)}}),U=x.useRef(T);function I(le){const ee=az(T,le);se(le,ee)}function q(le){se(le,E.current)}function te(){const le=U.current[E.current];T[E.current]!==le&&v(T)}function se(le,ee,{commit:oe}={commit:!1}){const ce=cz(l),ue=uz(Math.round((le-s)/l)*l+s,ce),z=Ri(ue,[s,r]);k((D=[])=>{const L=sz(D,z,ee);if(lz(L,h*l)){E.current=L.indexOf(z);const Y=String(L)!==String(D);return Y&&oe&&v(L),Y?L:D}else return D})}return f.jsx(Z5,{scope:a.__scopeSlider,name:n,disabled:d,min:s,max:r,valueIndexToChangeRef:E,thumbs:R.current,values:T,orientation:c,form:S,children:f.jsx(Sh.Provider,{scope:a.__scopeSlider,children:f.jsx(Sh.Slot,{scope:a.__scopeSlider,children:f.jsx(N,{"aria-disabled":d,"data-disabled":d?"":void 0,...C,ref:t,onPointerDown:ge(C.onPointerDown,()=>{d||(U.current=T)}),min:s,max:r,inverted:w,onSlideStart:d?void 0:I,onSlideMove:d?void 0:q,onSlideEnd:d?void 0:te,onHomeKeyDown:()=>!d&&se(s,0,{commit:!0}),onEndKeyDown:()=>!d&&se(r,T.length-1,{commit:!0}),onStepKeyDown:({event:le,direction:ee})=>{if(!d){const ue=W1.includes(le.key)||le.shiftKey&&Z1.includes(le.key)?10:1,z=E.current,D=T[z],L=l*ue*ee;se(D+L,z,{commit:!0})}}})})})})});tC.displayName=Rr;var[nC,sC]=eC(Rr,{startEdge:"left",endEdge:"right",size:"width",direction:1}),J5=x.forwardRef((a,t)=>{const{min:n,max:s,dir:r,inverted:l,onSlideStart:c,onSlideMove:d,onSlideEnd:h,onStepKeyDown:p,...g}=a,[m,v]=x.useState(null),w=De(t,N=>v(N)),S=x.useRef(void 0),C=wr(r),R=C==="ltr",E=R&&!l||!R&&l;function j(N){const T=S.current||m.getBoundingClientRect(),k=[0,T.width],I=Np(k,E?[n,s]:[s,n]);return S.current=T,I(N-T.left)}return f.jsx(nC,{scope:a.__scopeSlider,startEdge:E?"left":"right",endEdge:E?"right":"left",direction:E?1:-1,size:"width",children:f.jsx(oC,{dir:C,"data-orientation":"horizontal",...g,ref:w,style:{...g.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const T=j(N.clientX);c?.(T)},onSlideMove:N=>{const T=j(N.clientX);d?.(T)},onSlideEnd:()=>{S.current=void 0,h?.()},onStepKeyDown:N=>{const k=J1[E?"from-left":"from-right"].includes(N.key);p?.({event:N,direction:k?-1:1})}})})}),ez=x.forwardRef((a,t)=>{const{min:n,max:s,inverted:r,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:h,...p}=a,g=x.useRef(null),m=De(t,g),v=x.useRef(void 0),w=!r;function S(C){const R=v.current||g.current.getBoundingClientRect(),E=[0,R.height],N=Np(E,w?[s,n]:[n,s]);return v.current=R,N(C-R.top)}return f.jsx(nC,{scope:a.__scopeSlider,startEdge:w?"bottom":"top",endEdge:w?"top":"bottom",size:"height",direction:w?1:-1,children:f.jsx(oC,{"data-orientation":"vertical",...p,ref:m,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:C=>{const R=S(C.clientY);l?.(R)},onSlideMove:C=>{const R=S(C.clientY);c?.(R)},onSlideEnd:()=>{v.current=void 0,d?.()},onStepKeyDown:C=>{const E=J1[w?"from-bottom":"from-top"].includes(C.key);h?.({event:C,direction:E?-1:1})}})})}),oC=x.forwardRef((a,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:r,onSlideEnd:l,onHomeKeyDown:c,onEndKeyDown:d,onStepKeyDown:h,...p}=a,g=vu(Rr,n);return f.jsx(Ae.span,{...p,ref:t,onKeyDown:ge(a.onKeyDown,m=>{m.key==="Home"?(c(m),m.preventDefault()):m.key==="End"?(d(m),m.preventDefault()):W1.concat(Z1).includes(m.key)&&(h(m),m.preventDefault())}),onPointerDown:ge(a.onPointerDown,m=>{const v=m.target;v.setPointerCapture(m.pointerId),m.preventDefault(),g.thumbs.has(v)?v.focus():s(m)}),onPointerMove:ge(a.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&r(m)}),onPointerUp:ge(a.onPointerUp,m=>{const v=m.target;v.hasPointerCapture(m.pointerId)&&(v.releasePointerCapture(m.pointerId),l(m))})})}),aC="SliderTrack",rC=x.forwardRef((a,t)=>{const{__scopeSlider:n,...s}=a,r=vu(aC,n);return f.jsx(Ae.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...s,ref:t})});rC.displayName=aC;var Mh="SliderRange",iC=x.forwardRef((a,t)=>{const{__scopeSlider:n,...s}=a,r=vu(Mh,n),l=sC(Mh,n),c=x.useRef(null),d=De(t,c),h=r.values.length,p=r.values.map(v=>uC(v,r.min,r.max)),g=h>1?Math.min(...p):0,m=100-Math.max(...p);return f.jsx(Ae.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:d,style:{...a.style,[l.startEdge]:g+"%",[l.endEdge]:m+"%"}})});iC.displayName=Mh;var Eh="SliderThumb",lC=x.forwardRef((a,t)=>{const n=X5(a.__scopeSlider),[s,r]=x.useState(null),l=De(t,d=>r(d)),c=x.useMemo(()=>s?n().findIndex(d=>d.ref.current===s):-1,[n,s]);return f.jsx(tz,{...a,ref:l,index:c})}),tz=x.forwardRef((a,t)=>{const{__scopeSlider:n,index:s,name:r,...l}=a,c=vu(Eh,n),d=sC(Eh,n),[h,p]=x.useState(null),g=De(t,j=>p(j)),m=h?c.form||!!h.closest("form"):!0,v=lu(h),w=c.values[s],S=w===void 0?0:uC(w,c.min,c.max),C=oz(s,c.values.length),R=v?.[d.size],E=R?rz(R,S,d.direction):0;return x.useEffect(()=>{if(h)return c.thumbs.add(h),()=>{c.thumbs.delete(h)}},[h,c.thumbs]),f.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${S}% + ${E}px)`},children:[f.jsx(Sh.ItemSlot,{scope:a.__scopeSlider,children:f.jsx(Ae.span,{role:"slider","aria-label":a["aria-label"]||C,"aria-valuemin":c.min,"aria-valuenow":w,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...l,ref:g,style:w===void 0?{display:"none"}:a.style,onFocus:ge(a.onFocus,()=>{c.valueIndexToChangeRef.current=s})})}),m&&f.jsx(cC,{name:r??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:w},s)]})});lC.displayName=Eh;var nz="RadioBubbleInput",cC=x.forwardRef(({__scopeSlider:a,value:t,...n},s)=>{const r=x.useRef(null),l=De(r,s),c=pu(t);return x.useEffect(()=>{const d=r.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==t&&g){const m=new Event("input",{bubbles:!0});g.call(d,t),d.dispatchEvent(m)}},[c,t]),f.jsx(Ae.input,{style:{display:"none"},...n,ref:l,defaultValue:t})});cC.displayName=nz;function sz(a=[],t,n){const s=[...a];return s[n]=t,s.sort((r,l)=>r-l)}function uC(a,t,n){const l=100/(n-t)*(a-t);return Ri(l,[0,100])}function oz(a,t){return t>2?`Value ${a+1} of ${t}`:t===2?["Minimum","Maximum"][a]:void 0}function az(a,t){if(a.length===1)return 0;const n=a.map(r=>Math.abs(r-t)),s=Math.min(...n);return n.indexOf(s)}function rz(a,t,n){const s=a/2,l=Np([0,50],[0,s]);return(s-l(t)*n)*n}function iz(a){return a.slice(0,-1).map((t,n)=>a[n+1]-t)}function lz(a,t){if(t>0){const n=iz(a);return Math.min(...n)>=t}return!0}function Np(a,t){return n=>{if(a[0]===a[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(a[1]-a[0]);return t[0]+s*(n-a[0])}}function cz(a){return(String(a).split(".")[1]||"").length}function uz(a,t){const n=Math.pow(10,t);return Math.round(a*n)/n}var dC=tC,dz=rC,fz=iC,hz=lC;const ts=x.forwardRef(({className:a,...t},n)=>f.jsxs(dC,{ref:n,className:Ee("relative flex w-full touch-none select-none items-center",a),...t,children:[f.jsx(dz,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:f.jsx(fz,{className:"absolute h-full bg-primary"})}),f.jsx(hz,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));ts.displayName=dC.displayName;var bu="Switch",[pz]=bn(bu),[gz,mz]=pz(bu),fC=x.forwardRef((a,t)=>{const{__scopeSwitch:n,name:s,checked:r,defaultChecked:l,required:c,disabled:d,value:h="on",onCheckedChange:p,form:g,...m}=a,[v,w]=x.useState(null),S=De(t,N=>w(N)),C=x.useRef(!1),R=v?g||!!v.closest("form"):!0,[E,j]=xs({prop:r,defaultProp:l??!1,onChange:p,caller:bu});return f.jsxs(gz,{scope:n,checked:E,disabled:d,children:[f.jsx(Ae.button,{type:"button",role:"switch","aria-checked":E,"aria-required":c,"data-state":mC(E),"data-disabled":d?"":void 0,disabled:d,value:h,...m,ref:S,onClick:ge(a.onClick,N=>{j(T=>!T),R&&(C.current=N.isPropagationStopped(),C.current||N.stopPropagation())})}),R&&f.jsx(gC,{control:v,bubbles:!C.current,name:s,value:h,checked:E,required:c,disabled:d,form:g,style:{transform:"translateX(-100%)"}})]})});fC.displayName=bu;var hC="SwitchThumb",pC=x.forwardRef((a,t)=>{const{__scopeSwitch:n,...s}=a,r=mz(hC,n);return f.jsx(Ae.span,{"data-state":mC(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:t})});pC.displayName=hC;var yz="SwitchBubbleInput",gC=x.forwardRef(({__scopeSwitch:a,control:t,checked:n,bubbles:s=!0,...r},l)=>{const c=x.useRef(null),d=De(c,l),h=pu(n),p=lu(t);return x.useEffect(()=>{const g=c.current;if(!g)return;const m=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(m,"checked").set;if(h!==n&&w){const S=new Event("click",{bubbles:s});w.call(g,n),g.dispatchEvent(S)}},[h,n,s]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:d,style:{...r.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});gC.displayName=yz;function mC(a){return a?"checked":"unchecked"}var yC=fC,vz=pC;const ua=x.forwardRef(({className:a,...t},n)=>f.jsx(yC,{className:Ee("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...t,ref:n,children:f.jsx(vz,{className:Ee("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ua.displayName=yC.displayName;const Tn=x.forwardRef(({className:a,...t},n)=>f.jsx("div",{ref:n,className:Ee("rounded-xl border bg-card text-card-foreground shadow",a),...t}));Tn.displayName="Card";const Ws=x.forwardRef(({className:a,...t},n)=>f.jsx("div",{ref:n,className:Ee("flex flex-col space-y-1.5 p-6",a),...t}));Ws.displayName="CardHeader";const Zs=x.forwardRef(({className:a,...t},n)=>f.jsx("div",{ref:n,className:Ee("font-semibold leading-none tracking-tight",a),...t}));Zs.displayName="CardTitle";const pr=x.forwardRef(({className:a,...t},n)=>f.jsx("div",{ref:n,className:Ee("text-sm text-muted-foreground",a),...t}));pr.displayName="CardDescription";const Js=x.forwardRef(({className:a,...t},n)=>f.jsx("div",{ref:n,className:Ee("p-6 pt-0",a),...t}));Js.displayName="CardContent";const bz=x.forwardRef(({className:a,...t},n)=>f.jsx("div",{ref:n,className:Ee("flex items-center p-6 pt-0",a),...t}));bz.displayName="CardFooter";const xz=Dh("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Gt({className:a,variant:t,...n}){return f.jsx("div",{className:Ee(xz({variant:t}),a),...n})}const Mi={heading:{h1:"text-2xl font-bold text-foreground",h2:"text-lg font-semibold text-foreground",h3:"text-sm font-semibold text-foreground",h4:"text-xs font-semibold text-foreground",h5:"text-[10px] font-semibold text-muted-foreground uppercase"},body:{base:"text-sm text-foreground",small:"text-xs text-foreground",micro:"text-[10px] text-foreground"},muted:{base:"text-sm text-muted-foreground",small:"text-xs text-muted-foreground",micro:"text-[10px] text-muted-foreground"},mono:{base:"font-mono text-sm text-foreground",small:"font-mono text-xs text-foreground",micro:"font-mono text-[10px] text-foreground"},status:{success:"text-success",warning:"text-warning",error:"text-destructive",info:"text-primary"}},ms=x.forwardRef(({level:a,as:t,className:n,children:s,...r},l)=>{const c=t||`h${a}`,d=`h${a}`;return f.jsx(c,{ref:l,className:Ee(Mi.heading[d],n),...r,children:s})});ms.displayName="Heading";const Ye=x.forwardRef(({size:a="base",muted:t=!1,mono:n=!1,as:s="p",className:r,children:l,...c},d)=>{const h=s;let p;return n?p=Mi.mono[a]:t?p=Mi.muted[a]:p=Mi.body[a],f.jsx(h,{ref:d,className:Ee(p,r),...c,children:l})});Ye.displayName="Text";const ca=x.forwardRef(({status:a,size:t="base",weight:n="normal",as:s="span",className:r,children:l,...c},d)=>{const h=s,p={base:"text-sm",small:"text-xs",micro:"text-[10px]"},g={normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold"};return f.jsx(h,{ref:d,className:Ee(p[t],g[n],Mi.status[a],r),...c,children:l})});ca.displayName="StatusText";const wz=x.forwardRef(({as:a="h2",className:t,children:n,...s},r)=>f.jsx(ms,{ref:r,level:1,as:a,className:t,...s,children:n}));wz.displayName="PageTitle";const Cz=x.forwardRef(({as:a="h3",className:t,children:n,...s},r)=>f.jsx(ms,{ref:r,level:2,as:a,className:t,...s,children:n}));Cz.displayName="SectionTitle";const Xs=x.forwardRef(({as:a="h3",className:t,children:n,...s},r)=>f.jsx(ms,{ref:r,level:3,as:a,className:t,...s,children:n}));Xs.displayName="PanelTitle";const Sz=x.forwardRef(({as:a="p",className:t,children:n,...s},r)=>f.jsx(Ye,{ref:r,size:"base",muted:!0,as:a,className:Ee("mt-1",t),...s,children:n}));Sz.displayName="Description";function Mz({connection:a,onUpdate:t}){const n=a.data||{},{isRunning:s}=jt(),{getConnectionMessages:r,getMessageHistory:l}=_o(),[c,d]=x.useState([]),[h,p]=x.useState([]);x.useEffect(()=>{if(!s){d([]),p([]);return}const E=setInterval(()=>{const j=r(a.id),N=l(50).filter(T=>T.connectionId===a.id);d(j),p(N)},200);return()=>clearInterval(E)},[s,a.id,r,l]);const g=E=>{const j={...n,...E};t(a.id,{data:j})},m=E=>{g({latencyMs:Math.max(0,E)})},v=E=>{g({bandwidthMbps:Math.max(1,E)})},w=E=>{g({packetLossPercent:Math.max(0,Math.min(100,E))})},S=E=>{g({jitterMs:Math.max(0,E)})},C=E=>{g({retryCount:Math.max(0,E)})},R=E=>{g({timeoutMs:Math.max(1e3,E)})};return f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx(Xs,{children:"Connection"}),f.jsxs("div",{className:"space-y-0.5",children:[f.jsxs(Ye,{size:"micro",muted:!0,children:["From: ",a.source]}),f.jsxs(Ye,{size:"micro",muted:!0,children:["To: ",a.target]}),f.jsxs(Ye,{size:"micro",muted:!0,children:["Type: ",a.type]})]})]}),f.jsxs("div",{className:"border-t border-border pt-2 space-y-2",children:[f.jsxs("div",{children:[f.jsx(ms,{level:5,className:"mb-1.5 opacity-70",children:"Network Parameters"}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(nt,{className:"text-xs",children:"Latency (ms)"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:n.latencyMs??0})]}),f.jsx(ts,{value:[n.latencyMs??0],onValueChange:E=>m(E[0]),min:0,max:5e3,step:10,className:"w-full"}),f.jsx(Tt,{type:"number",value:n.latencyMs??0,onChange:E=>m(parseInt(E.target.value)||0),placeholder:"0-5000",className:"h-7 text-xs"})]}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(nt,{className:"text-xs",children:"Bandwidth (Mbps)"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:n.bandwidthMbps??1e3})]}),f.jsx(ts,{value:[n.bandwidthMbps??1e3],onValueChange:E=>v(E[0]),min:1,max:1e5,step:10,className:"w-full"}),f.jsx(Tt,{type:"number",value:n.bandwidthMbps??1e3,onChange:E=>v(parseInt(E.target.value)||1e3),placeholder:"1-100000",className:"h-7 text-xs"})]}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(nt,{className:"text-xs",children:"Packet Loss (%)"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:n.packetLossPercent??0})]}),f.jsx(ts,{value:[n.packetLossPercent??0],onValueChange:E=>w(E[0]),min:0,max:100,step:.1,className:"w-full"}),f.jsx(Tt,{type:"number",step:"0.1",value:n.packetLossPercent??0,onChange:E=>w(parseFloat(E.target.value)||0),placeholder:"0-100",className:"h-7 text-xs"})]}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(nt,{className:"text-xs",children:"Jitter (ms)"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:n.jitterMs??0})]}),f.jsx(ts,{value:[n.jitterMs??0],onValueChange:E=>S(E[0]),min:0,max:1e3,step:5,className:"w-full"}),f.jsx(Tt,{type:"number",value:n.jitterMs??0,onChange:E=>S(parseInt(E.target.value)||0),placeholder:"0-1000",className:"h-7 text-xs"})]})]}),f.jsxs("div",{className:"border-t border-border pt-2",children:[f.jsx("h4",{className:"text-[9px] font-semibold text-foreground mb-1.5 uppercase opacity-70",children:"Traffic Characteristics"}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsx(nt,{className:"text-xs",children:"Priority Level"}),f.jsxs(F5,{value:n.priorityLevel||"medium",onValueChange:E=>g({priorityLevel:E}),children:[f.jsx(V1,{className:"h-7 text-[11px]",children:f.jsx(V5,{})}),f.jsxs(X1,{children:[f.jsx(Ci,{value:"low",children:"Low"}),f.jsx(Ci,{value:"medium",children:"Medium"}),f.jsx(Ci,{value:"high",children:"High"}),f.jsx(Ci,{value:"critical",children:"Critical"})]})]})]}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(nt,{className:"text-xs",children:"Retry Count"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:n.retryCount??3})]}),f.jsx(ts,{value:[n.retryCount??3],onValueChange:E=>C(E[0]),min:0,max:10,step:1,className:"w-full"}),f.jsx(Tt,{type:"number",value:n.retryCount??3,onChange:E=>C(parseInt(E.target.value)||0),placeholder:"0-10",className:"h-7 text-xs"})]}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(nt,{className:"text-xs",children:"Timeout (ms)"}),f.jsx(Ye,{mono:!0,size:"micro",className:"text-primary",children:n.timeoutMs??3e4})]}),f.jsx(ts,{value:[n.timeoutMs??3e4],onValueChange:E=>R(E[0]),min:1e3,max:12e4,step:1e3,className:"w-full"}),f.jsx(Tt,{type:"number",value:n.timeoutMs??3e4,onChange:E=>R(parseInt(E.target.value)||3e4),placeholder:"1000-120000",className:"h-7 text-xs"})]})]}),f.jsxs("div",{className:"border-t border-border pt-2",children:[f.jsx(ms,{level:5,className:"mb-1.5 opacity-70",children:"Monitoring"}),f.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-accent/20 rounded-md",children:[f.jsx(nt,{className:"text-xs cursor-pointer",children:"Enable Monitoring"}),f.jsx(ua,{checked:n.enableMonitoring??!1,onCheckedChange:E=>g({enableMonitoring:E})})]})]}),f.jsx(Tn,{className:"bg-card/50 border-border/50 p-1.5 mt-2",children:f.jsxs("div",{className:"space-y-0.5",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx(Ye,{size:"micro",muted:!0,children:"Effective Bandwidth:"}),f.jsxs(Ye,{mono:!0,size:"micro",children:[Math.max(1,(n.bandwidthMbps??1e3)*(1-(n.packetLossPercent??0)/100)).toFixed(2)," Mbps"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx(Ye,{size:"micro",muted:!0,children:"Effective Latency:"}),f.jsxs(Ye,{mono:!0,size:"micro",children:[((n.latencyMs??0)+(n.jitterMs??0)/2).toFixed(0)," ms"]})]})]})}),s&&f.jsx("div",{className:"border-t border-border pt-2 mt-2",children:f.jsxs(ip,{defaultValue:"active",className:"w-full",children:[f.jsxs(su,{className:"grid w-full grid-cols-2 h-7",children:[f.jsxs(hs,{value:"active",className:"text-xs px-2",children:[f.jsx(ha,{className:"h-3 w-3 mr-1"}),"Active (",c.length,")"]}),f.jsxs(hs,{value:"history",className:"text-xs px-2",children:[f.jsx(Kv,{className:"h-3 w-3 mr-1"}),"History (",h.length,")"]})]}),f.jsx(zo,{value:"active",className:"mt-1.5 space-y-1",children:c.length===0?f.jsxs("div",{className:"text-center py-3",children:[f.jsx(ha,{className:"h-5 w-5 mx-auto mb-1 opacity-50"}),f.jsx(Ye,{size:"micro",muted:!0,children:"No active messages"})]}):f.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:c.map((E,j)=>f.jsxs(Tn,{className:"p-1 border-border/50",children:[f.jsx("div",{className:"flex items-start justify-between gap-1.5",children:f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(Gt,{variant:"outline",className:"text-xs px-0.5 py-0",children:E.format}),f.jsx(Gt,{variant:E.status==="delivered"?"default":E.status==="failed"?"destructive":E.status==="transformed"?"secondary":"outline",className:"text-xs px-0.5 py-0",children:E.status})]}),f.jsxs("div",{className:"text-[9px] text-muted-foreground space-y-0.5",children:[f.jsxs("div",{children:["Size: ",(E.size/1024).toFixed(2)," KB"]}),E.latency&&f.jsxs("div",{children:["Latency: ",E.latency.toFixed(0)," ms"]})]}),E.error&&f.jsxs("div",{className:"text-[10px] text-destructive mt-0.5 flex items-center gap-0.5",children:[f.jsx(Ei,{className:"h-2.5 w-2.5"}),E.error]})]})}),E.payload&&f.jsxs("details",{className:"mt-1",children:[f.jsx("summary",{className:"text-[9px] cursor-pointer text-muted-foreground hover:text-foreground",children:"Show Data"}),f.jsx("pre",{className:"mt-1 p-1 bg-muted rounded text-[9px] overflow-x-auto max-h-32 overflow-y-auto",children:JSON.stringify(E.payload,null,2)})]})]},E.id||j))})}),f.jsx(zo,{value:"history",className:"mt-1.5 space-y-1",children:h.length===0?f.jsxs("div",{className:"text-center py-3",children:[f.jsx(Kv,{className:"h-5 w-5 mx-auto mb-1 opacity-50"}),f.jsx(Ye,{size:"micro",muted:!0,children:"History is empty"})]}):f.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:h.map((E,j)=>f.jsxs(Tn,{className:"p-1 border-border/50",children:[f.jsx("div",{className:"flex items-start justify-between gap-1.5",children:f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(Gt,{variant:"outline",className:"text-xs px-0.5 py-0",children:E.format}),f.jsx(Gt,{variant:E.status==="delivered"?"default":E.status==="failed"?"destructive":"outline",className:"text-xs px-0.5 py-0",children:E.status}),f.jsx("span",{className:"text-[9px] text-muted-foreground",children:new Date(E.timestamp).toLocaleTimeString()})]}),f.jsxs("div",{className:"text-[9px] text-muted-foreground space-y-0.5",children:[f.jsxs("div",{children:["Size: ",(E.size/1024).toFixed(2)," KB"]}),E.latency&&f.jsxs("div",{children:["Latency: ",E.latency.toFixed(0)," ms"]})]}),E.error&&f.jsxs("div",{className:"text-[10px] text-destructive mt-0.5 flex items-center gap-0.5",children:[f.jsx(Ei,{className:"h-2.5 w-2.5"}),E.error]})]})}),E.payload&&f.jsxs("details",{className:"mt-1",children:[f.jsx("summary",{className:"text-[9px] cursor-pointer text-muted-foreground hover:text-foreground",children:"Show Data"}),f.jsx("pre",{className:"mt-1 p-1 bg-muted rounded text-[9px] overflow-x-auto max-h-32 overflow-y-auto",children:JSON.stringify(E.payload,null,2)})]})]},E.id||j))})})]})})]})]})}function Ez(a){const t=Rz(a),n=x.forwardRef((s,r)=>{const{children:l,...c}=s,d=x.Children.toArray(l),h=d.find(Az);if(h){const p=h.props.children,g=d.map(m=>m===h?x.Children.count(p)>1?x.Children.only(null):x.isValidElement(p)?p.props.children:null:m);return f.jsx(t,{...c,ref:r,children:x.isValidElement(p)?x.cloneElement(p,void 0,g):null})}return f.jsx(t,{...c,ref:r,children:l})});return n.displayName=`${a}.Slot`,n}function Rz(a){const t=x.forwardRef((n,s)=>{const{children:r,...l}=n;if(x.isValidElement(r)){const c=jz(r),d=Tz(l,r.props);return r.type!==x.Fragment&&(d.ref=s?Cs(s,c):c),x.cloneElement(r,d)}return x.Children.count(r)>1?x.Children.only(null):null});return t.displayName=`${a}.SlotClone`,t}var Nz=Symbol("radix.slottable");function Az(a){return x.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===Nz}function Tz(a,t){const n={...t};for(const s in t){const r=a[s],l=t[s];/^on[A-Z]/.test(s)?r&&l?n[s]=(...d)=>{const h=l(...d);return r(...d),h}:r&&(n[s]=r):s==="style"?n[s]={...r,...l}:s==="className"&&(n[s]=[r,l].filter(Boolean).join(" "))}return{...a,...n}}function jz(a){let t=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?a.ref:(t=Object.getOwnPropertyDescriptor(a,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?a.props.ref:a.props.ref||a.ref)}var xu="Popover",[vC]=bn(xu,[Mr]),$i=Mr(),[kz,Uo]=vC(xu),bC=a=>{const{__scopePopover:t,children:n,open:s,defaultOpen:r,onOpenChange:l,modal:c=!1}=a,d=$i(t),h=x.useRef(null),[p,g]=x.useState(!1),[m,v]=xs({prop:s,defaultProp:r??!1,onChange:l,caller:xu});return f.jsx(mp,{...d,children:f.jsx(kz,{scope:t,contentId:ns(),triggerRef:h,open:m,onOpenChange:v,onOpenToggle:x.useCallback(()=>v(w=>!w),[v]),hasCustomAnchor:p,onCustomAnchorAdd:x.useCallback(()=>g(!0),[]),onCustomAnchorRemove:x.useCallback(()=>g(!1),[]),modal:c,children:n})})};bC.displayName=xu;var xC="PopoverAnchor",Dz=x.forwardRef((a,t)=>{const{__scopePopover:n,...s}=a,r=Uo(xC,n),l=$i(n),{onCustomAnchorAdd:c,onCustomAnchorRemove:d}=r;return x.useEffect(()=>(c(),()=>d()),[c,d]),f.jsx(cu,{...l,...s,ref:t})});Dz.displayName=xC;var wC="PopoverTrigger",CC=x.forwardRef((a,t)=>{const{__scopePopover:n,...s}=a,r=Uo(wC,n),l=$i(n),c=De(t,r.triggerRef),d=f.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":NC(r.open),...s,ref:c,onClick:ge(a.onClick,r.onOpenToggle)});return r.hasCustomAnchor?d:f.jsx(cu,{asChild:!0,...l,children:d})});CC.displayName=wC;var Ap="PopoverPortal",[_z,zz]=vC(Ap,{forceMount:void 0}),SC=a=>{const{__scopePopover:t,forceMount:n,children:s,container:r}=a,l=Uo(Ap,t);return f.jsx(_z,{scope:t,forceMount:n,children:f.jsx(rn,{present:n||l.open,children:f.jsx(Pi,{asChild:!0,container:r,children:s})})})};SC.displayName=Ap;var yr="PopoverContent",MC=x.forwardRef((a,t)=>{const n=zz(yr,a.__scopePopover),{forceMount:s=n.forceMount,...r}=a,l=Uo(yr,a.__scopePopover);return f.jsx(rn,{present:s||l.open,children:l.modal?f.jsx(Lz,{...r,ref:t}):f.jsx(Pz,{...r,ref:t})})});MC.displayName=yr;var Oz=Ez("PopoverContent.RemoveScroll"),Lz=x.forwardRef((a,t)=>{const n=Uo(yr,a.__scopePopover),s=x.useRef(null),r=De(t,s),l=x.useRef(!1);return x.useEffect(()=>{const c=s.current;if(c)return Vc(c)},[]),f.jsx(Ii,{as:Oz,allowPinchZoom:!0,children:f.jsx(EC,{...a,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(a.onCloseAutoFocus,c=>{c.preventDefault(),l.current||n.triggerRef.current?.focus()}),onPointerDownOutside:ge(a.onPointerDownOutside,c=>{const d=c.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,p=d.button===2||h;l.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:ge(a.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),Pz=x.forwardRef((a,t)=>{const n=Uo(yr,a.__scopePopover),s=x.useRef(!1),r=x.useRef(!1);return f.jsx(EC,{...a,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{a.onCloseAutoFocus?.(l),l.defaultPrevented||(s.current||n.triggerRef.current?.focus(),l.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:l=>{a.onInteractOutside?.(l),l.defaultPrevented||(s.current=!0,l.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const c=l.target;n.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&r.current&&l.preventDefault()}})}),EC=x.forwardRef((a,t)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:g,...m}=a,v=Uo(yr,n),w=$i(n);return Qc(),f.jsx(Li,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:l,children:f.jsx(Oi,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:g,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onDismiss:()=>v.onOpenChange(!1),children:f.jsx(yp,{"data-state":NC(v.open),role:"dialog",id:v.contentId,...w,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),RC="PopoverClose",Iz=x.forwardRef((a,t)=>{const{__scopePopover:n,...s}=a,r=Uo(RC,n);return f.jsx(Ae.button,{type:"button",...s,ref:t,onClick:ge(a.onClick,()=>r.onOpenChange(!1))})});Iz.displayName=RC;var qz="PopoverArrow",Hz=x.forwardRef((a,t)=>{const{__scopePopover:n,...s}=a,r=$i(n);return f.jsx(vp,{...r,...s,ref:t})});Hz.displayName=qz;function NC(a){return a?"open":"closed"}var Uz=bC,Bz=CC,$z=SC,AC=MC;const Gz=Uz,Qz=Bz,TC=x.forwardRef(({className:a,align:t="center",sideOffset:n=4,...s},r)=>f.jsx($z,{children:f.jsx(AC,{ref:r,align:t,sideOffset:n,className:Ee("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",a),...s})}));TC.displayName=AC.displayName;const jC=Ss((a,t)=>({componentStates:new Map,setComponentState:(n,s,r)=>{ur.setComponentState(n,s,r);const l=ur.getComponentState(n);l&&a(c=>({componentStates:new Map(c.componentStates).set(n,l)}))},resetComponent:n=>{ur.resetComponent(n),a(s=>{const r=new Map(s.componentStates);return r.delete(n),{componentStates:r}})},resetAll:()=>{ur.reset(),a({componentStates:new Map})},getComponentState:n=>t().componentStates.get(n),isEnabled:n=>ur.isEnabled(n),getAllStates:()=>Array.from(t().componentStates.values())}));function Fz({componentId:a,componentLabel:t}){const{isRunning:n}=jt(),{getComponentState:s,setComponentState:r,resetComponent:l}=jC(),c=s(a),d=c?.state||"enabled",[h,p]=x.useState(c?.degradedLevel||.5),[g,m]=x.useState(c?.failureRate||.1),[v,w]=x.useState(c?.latencyMultiplier||2),[S,C]=x.useState(c?.throughputMultiplier||.5),R=T=>{T==="degraded"?r(a,T,{degradedLevel:h,failureRate:g,latencyMultiplier:v,throughputMultiplier:S}):r(a,T)},E=()=>{l(a),p(.5),m(.1),w(2),C(.5)},j=T=>{switch(T){case"enabled":return"bg-green-500/20 text-green-500 border-green-500/50";case"disabled":return"bg-gray-500/20 text-gray-500 border-gray-500/50";case"degraded":return"bg-yellow-500/20 text-yellow-500 border-yellow-500/50";case"failed":return"bg-red-500/20 text-red-500 border-red-500/50"}},N=T=>{switch(T){case"enabled":return f.jsx(Qf,{className:"w-4 h-4"});case"disabled":return f.jsx(vc,{className:"w-4 h-4"});case"degraded":return f.jsx(ys,{className:"w-4 h-4"});case"failed":return f.jsx(da,{className:"w-4 h-4"})}};return f.jsxs(Tn,{className:"border",children:[f.jsx(Ws,{className:"p-2 pb-1.5",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsxs(Zs,{className:"text-[11px] flex items-center gap-1",children:[f.jsx(ha,{className:"w-3 h-3"}),"Component State",f.jsxs(Gz,{children:[f.jsx(Qz,{asChild:!0,children:f.jsx(Te,{variant:"ghost",size:"icon",className:"h-3.5 w-3.5 rounded-full",children:f.jsx(S2,{className:"w-2.5 h-2.5 text-muted-foreground"})})}),f.jsx(TC,{className:"w-72 text-xs",align:"start",children:f.jsxs("div",{className:"space-y-2",children:[f.jsx("h4",{className:"font-semibold text-sm",children:"Component States"}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(Qf,{className:"w-3.5 h-3.5 text-green-500 mt-0.5 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-green-500",children:"Enabled"}),f.jsx("span",{className:"text-muted-foreground",children:"  normal operation"})]})]}),f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(vc,{className:"w-3.5 h-3.5 text-gray-500 mt-0.5 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-gray-500",children:"Disabled"}),f.jsx("span",{className:"text-muted-foreground",children:"  turned off. Throughput=0, Errors=100%"})]})]}),f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(ys,{className:"w-3.5 h-3.5 text-yellow-500 mt-0.5 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-yellow-500",children:"Degraded"}),f.jsx("span",{className:"text-muted-foreground",children:"  partial failure. Throughput 50%, Latency 2x, Errors 10%"})]})]}),f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(da,{className:"w-3.5 h-3.5 text-red-500 mt-0.5 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-red-500",children:"Failed"}),f.jsx("span",{className:"text-muted-foreground",children:"  crashed. Same as Disabled but indicates failure"})]})]})]}),f.jsx("p",{className:"text-muted-foreground pt-1 border-t border-border",children:"Use to simulate failures and test architecture resilience."})]})})]})]}),f.jsx(pr,{className:"text-[9px] mt-0.5",children:"Control operational state"})]}),c&&f.jsxs(Gt,{variant:"outline",className:`${j(d)} text-xs px-1 py-0.5`,children:[N(d),f.jsx("span",{className:"ml-0.5",children:d.toUpperCase()})]})]})}),f.jsxs(Js,{className:"p-2 pt-1.5 space-y-2",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[f.jsxs(Te,{variant:d==="enabled"?"default":"outline",size:"sm",onClick:()=>R("enabled"),className:"flex items-center gap-1 h-7 text-xs",disabled:!n,children:[f.jsx(Qf,{className:"w-3.5 h-3.5"}),"Enabled"]}),f.jsxs(Te,{variant:d==="disabled"?"destructive":"outline",size:"sm",onClick:()=>R("disabled"),className:"flex items-center gap-1 h-7 text-xs",disabled:!n,children:[f.jsx(vc,{className:"w-3.5 h-3.5"}),"Disabled"]}),f.jsxs(Te,{variant:d==="degraded"?"default":"outline",size:"sm",onClick:()=>R("degraded"),className:"flex items-center gap-1 h-7 text-xs bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-600 dark:text-yellow-400",disabled:!n,children:[f.jsx(ys,{className:"w-3.5 h-3.5"}),"Degraded"]}),f.jsxs(Te,{variant:d==="failed"?"destructive":"outline",size:"sm",onClick:()=>R("failed"),className:"flex items-center gap-1 h-7 text-xs",disabled:!n,children:[f.jsx(da,{className:"w-3.5 h-3.5"}),"Failed"]})]}),d==="degraded"&&f.jsxs("div",{className:"space-y-2 p-2 bg-yellow-500/10 rounded-lg border border-yellow-500/20",children:[f.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[f.jsx(db,{className:"w-3 h-3 text-yellow-600 dark:text-yellow-400"}),f.jsx(nt,{className:"text-[11px] font-semibold text-yellow-600 dark:text-yellow-400",children:"Degradation Settings"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[f.jsx(nt,{className:"text-[10px]",children:"Degradation Level"}),f.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[(h*100).toFixed(0),"%"]})]}),f.jsx(ts,{value:[h],onValueChange:T=>{p(T[0]),R("degraded")},min:0,max:1,step:.1,className:"w-full"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[f.jsx(nt,{className:"text-[10px]",children:"Failure Rate"}),f.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[(g*100).toFixed(0),"%"]})]}),f.jsx(ts,{value:[g],onValueChange:T=>{m(T[0]),R("degraded")},min:0,max:1,step:.05,className:"w-full"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[f.jsx(nt,{className:"text-[10px]",children:"Latency Multiplier"}),f.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[v.toFixed(1),"x"]})]}),f.jsx(ts,{value:[v],onValueChange:T=>{w(T[0]),R("degraded")},min:1,max:5,step:.1,className:"w-full"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[f.jsx(nt,{className:"text-[10px]",children:"Throughput Multiplier"}),f.jsxs("span",{className:"text-[9px] text-muted-foreground",children:[(S*100).toFixed(0),"%"]})]}),f.jsx(ts,{value:[S],onValueChange:T=>{C(T[0]),R("degraded")},min:0,max:1,step:.05,className:"w-full"})]})]})]}),c&&f.jsxs(Te,{variant:"outline",size:"sm",onClick:E,className:"w-full flex items-center gap-1 h-7 text-xs",disabled:!n,children:[f.jsx(ub,{className:"w-3.5 h-3.5"}),"Reset to Normal"]}),!n&&f.jsxs("div",{className:"flex items-center gap-1 p-1 bg-muted rounded text-[9px] text-muted-foreground",children:[f.jsx(Ei,{className:"w-3 h-3"}),"Start emulation to control component state"]})]})]})}function Vz({onFilterChange:a}){const{nodes:t,connections:n,selectNode:s}=Re(),{isRunning:r,getComponentMetrics:l}=jt(),{getAllComponentStatuses:c}=fa(),[d,h]=x.useState(""),[p,g]=x.useState(!1),[m,v]=x.useState(!0),[w,S]=x.useState(!0),[C,R]=x.useState(!0),[E,j]=x.useState(!0),[N,T]=x.useState(100),[k,U]=x.useState(5),[I,q]=x.useState(new Set),te=Et.useMemo(()=>r?t.filter(oe=>{if(d&&!oe.data.label.toLowerCase().includes(d.toLowerCase()))return!1;if(!p)return!0;const ce=l(oe.id),z=c().find(D=>D.nodeId===oe.id);return!!(m&&n.some(L=>L.source===oe.id||L.target===oe.id?jt.getState().getConnectionMetrics(L.id)?.bottleneck:!1)||w&&ce&&ce.errorRate*100>=k||E&&ce&&ce.latency>=N||C&&z?.criticalPath||z&&(z.health==="critical"||z.health==="down"))}):t,[d,p,m,w,E,C,N,k,r,t,n]);Et.useEffect(()=>{if(p){const oe=new Set(te.map(ce=>ce.id));q(oe),a?.(Array.from(oe))}else q(new Set),a?.(t.map(oe=>oe.id))},[p,te,t,a]);const se=oe=>{s(oe)},le=te.length,ee=t.filter(oe=>{if(!r)return!1;const ce=l(oe.id),z=c().find(D=>D.nodeId===oe.id);return ce&&(ce.errorRate*100>=k||ce.latency>=N)||z?.criticalPath||z&&(z.health==="critical"||z.health==="down")||n.some(D=>D.source===oe.id||D.target===oe.id?jt.getState().getConnectionMetrics(D.id)?.bottleneck:!1)}).length;return f.jsxs(Tn,{className:"h-full border-2",children:[f.jsx(Ws,{className:"pb-3",children:f.jsxs(Zs,{className:"text-sm flex items-center gap-2",children:[f.jsx(P2,{className:"w-4 h-4"}),"Problem Filters",le>0&&f.jsx(Gt,{variant:"destructive",className:"ml-auto",children:le})]})}),f.jsxs(Js,{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(nt,{className:"text-xs",children:"Search Components"}),f.jsxs("div",{className:"relative",children:[f.jsx(Uc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),f.jsx(Tt,{placeholder:"Search by name...",value:d,onChange:oe=>h(oe.target.value),className:"pl-8 h-8 text-xs"})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(nt,{className:"text-xs flex items-center gap-2",children:[f.jsx(k2,{className:"w-4 h-4"}),"Show Only Problems"]}),f.jsx(ua,{checked:p,onCheckedChange:g})]}),p&&f.jsxs("div",{className:"pl-6 space-y-2 border-l-2 border-border",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(nt,{className:"text-xs flex items-center gap-2",children:[f.jsx(db,{className:"w-4 h-4 text-red-500"}),"Bottlenecks"]}),f.jsx(ua,{checked:m,onCheckedChange:v})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(nt,{className:"text-xs flex items-center gap-2",children:[f.jsx(da,{className:"w-4 h-4 text-orange-500"}),"High Error Rate (>",k,"%)"]}),f.jsx(ua,{checked:w,onCheckedChange:S})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(nt,{className:"text-xs flex items-center gap-2",children:[f.jsx(fb,{className:"w-4 h-4 text-yellow-500"}),"High Latency (>",N,"ms)"]}),f.jsx(ua,{checked:E,onCheckedChange:j})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs(nt,{className:"text-xs flex items-center gap-2",children:[f.jsx(ha,{className:"w-4 h-4 text-purple-500"}),"Critical Paths"]}),f.jsx(ua,{checked:C,onCheckedChange:R})]})]})]}),p&&f.jsxs("div",{className:"space-y-2 pt-2 border-t border-border",children:[f.jsxs("div",{children:[f.jsx(nt,{className:"text-xs",children:"Min Latency (ms)"}),f.jsx(Tt,{type:"number",value:N,onChange:oe=>T(Number(oe.target.value)),className:"h-8 text-xs mt-1",min:0})]}),f.jsxs("div",{children:[f.jsx(nt,{className:"text-xs",children:"Min Error Rate (%)"}),f.jsx(Tt,{type:"number",value:k,onChange:oe=>U(Number(oe.target.value)),className:"h-8 text-xs mt-1",min:0,max:100})]})]}),r&&f.jsx("div",{className:"pt-2 border-t border-border",children:f.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total problems detected: ",f.jsx("span",{className:"font-semibold text-foreground",children:ee})]})}),p&&te.length>0&&f.jsx(an,{className:"h-48 border border-border rounded p-2",children:f.jsx("div",{className:"space-y-1",children:te.map(oe=>{const ce=l(oe.id),z=c().find(D=>D.nodeId===oe.id);return f.jsx(Te,{variant:"ghost",size:"sm",className:"w-full justify-start text-xs h-auto py-1.5",onClick:()=>se(oe.id),children:f.jsxs("div",{className:"flex items-center gap-2 w-full",children:[z?.criticalPath&&f.jsx(Gt,{variant:"outline",className:"bg-purple-500/20 text-purple-500 border-purple-500/50 text-xs px-1",children:"Critical"}),f.jsx("span",{className:"flex-1 text-left truncate",children:oe.data.label}),ce&&ce.errorRate*100>=k&&f.jsxs(Gt,{variant:"destructive",className:"text-xs px-1",children:[(ce.errorRate*100).toFixed(0),"%"]})]})},oe.id)})})}),!r&&f.jsx("div",{className:"text-xs text-muted-foreground text-center py-4",children:"Start emulation to see problems"})]})]})}function Kz(){const{nodes:a,connections:t}=Re(),{isRunning:n,getComponentMetrics:s,getConnectionMetrics:r}=jt(),{getAllComponentStatuses:l,getSystemAnalysis:c}=fa(),[d,h]=x.useState(""),[p,g]=x.useState("all");if(!n)return f.jsx(Tn,{className:"h-full",children:f.jsxs(Ws,{children:[f.jsx(Zs,{children:"Diagnostics"}),f.jsx(pr,{children:"Start emulation to see diagnostics"})]})});const m=[],v=l();c(),a.forEach(R=>{const E=s(R.id),j=v.find(k=>k.nodeId===R.id);if(!E||!j)return;const N={nodeId:R.id,nodeLabel:R.data.label,problem:"",severity:"info",metrics:{throughput:E.throughput,latency:E.latency,errorRate:E.errorRate,utilization:E.utilization},affectedConnections:[],recommendations:[]},T=t.filter(k=>k.source===R.id||k.target===R.id?r(k.id)?.bottleneck:!1);if(T.length>0){N.problem=`Bottleneck detected in ${T.length} connection(s)`,N.severity="critical",N.affectedConnections=T.map(k=>k.id),N.rootCause="High throughput dependency or backpressure",N.recommendations=["Consider scaling this component horizontally","Optimize data processing logic","Check for connection bandwidth limits"],m.push(N);return}if(E.errorRate>.05){N.problem=`High error rate: ${(E.errorRate*100).toFixed(1)}%`,N.severity=E.errorRate>.1?"critical":"warning",N.rootCause="Component is experiencing failures",N.recommendations=["Check component logs for error details","Verify input data format and validation","Review retry and error handling logic"],m.push(N);return}if(E.latency>1e3){N.problem=`High latency: ${E.latency.toFixed(0)}ms`,N.severity=E.latency>2e3?"critical":"warning",N.rootCause="Component processing is slow",N.recommendations=["Optimize database queries or data processing","Consider caching frequently accessed data","Review component configuration for performance"],m.push(N);return}if(E.utilization>.9){N.problem=`High utilization: ${(E.utilization*100).toFixed(0)}%`,N.severity="warning",N.rootCause="Component is near capacity",N.recommendations=["Consider scaling this component","Optimize resource usage","Monitor for potential failures"],m.push(N);return}(j.health==="critical"||j.health==="down")&&(N.problem=`Component health: ${j.health}`,N.severity="critical",N.rootCause="Component is in critical state or down",N.recommendations=["Immediately check component status","Review error logs and metrics","Consider failover or restart"],m.push(N))});const w=m.filter(R=>!(p!=="all"&&R.severity!==p||d&&!R.nodeLabel.toLowerCase().includes(d.toLowerCase()))),S=R=>{switch(R){case"critical":return f.jsx(da,{className:"w-4 h-4 text-red-500"});case"warning":return f.jsx(ys,{className:"w-4 h-4 text-yellow-500"});default:return f.jsx(Ei,{className:"w-4 h-4 text-blue-500"})}},C=R=>{switch(R){case"critical":return f.jsx(Gt,{variant:"destructive",className:"text-xs",children:"Critical"});case"warning":return f.jsx(Gt,{variant:"outline",className:"border-yellow-500 text-yellow-600 text-xs",children:"Warning"});default:return f.jsx(Gt,{variant:"outline",className:"text-xs",children:"Info"})}};return f.jsxs(Tn,{className:"h-full flex flex-col",children:[f.jsxs(Ws,{className:"pb-3",children:[f.jsx(Zs,{className:"text-sm font-semibold",children:"Diagnostics"}),f.jsxs(pr,{className:"text-xs text-muted-foreground",children:[w.length," problem",w.length!==1?"s":""," detected"]})]}),f.jsxs(Js,{className:"flex-1 flex flex-col overflow-hidden p-0",children:[f.jsxs("div",{className:"p-4 border-b border-border space-y-2",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Uc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),f.jsx(Tt,{placeholder:"Search components...",value:d,onChange:R=>h(R.target.value),className:"pl-8 h-8 text-xs"})]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx(Te,{variant:p==="all"?"default":"outline",size:"sm",className:"h-7 text-xs px-2",onClick:()=>g("all"),children:"All"}),f.jsx(Te,{variant:p==="critical"?"default":"outline",size:"sm",className:"h-7 text-xs px-2",onClick:()=>g("critical"),children:"Critical"}),f.jsx(Te,{variant:p==="warning"?"default":"outline",size:"sm",className:"h-7 text-xs px-2",onClick:()=>g("warning"),children:"Warning"})]})]}),f.jsx(an,{className:"flex-1",children:f.jsx("div",{className:"p-4 space-y-2",children:w.length===0?f.jsxs("div",{className:"text-center text-sm text-muted-foreground py-6",children:[f.jsx(ha,{className:"w-6 h-6 mx-auto mb-1.5 opacity-50"}),f.jsx("p",{children:"No problems detected"})]}):w.map((R,E)=>f.jsxs(Tn,{className:`border-l-4 ${R.severity==="critical"?"border-l-red-500":R.severity==="warning"?"border-l-yellow-500":"border-l-blue-500"}`,children:[f.jsxs(Ws,{className:"pb-2 p-3",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[S(R.severity),f.jsx(Zs,{className:"text-xs font-semibold",children:R.nodeLabel}),C(R.severity)]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{a.find(N=>N.id===R.nodeId)&&Re.getState().selectNode(R.nodeId)},children:f.jsx(h2,{className:"w-3.5 h-3.5"})})]}),f.jsx(pr,{className:"text-xs mt-0.5",children:R.problem})]}),f.jsxs(Js,{className:"pt-0 p-3 space-y-2",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[R.metrics.throughput!==void 0&&f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Throughput: "}),f.jsxs("span",{className:"font-mono",children:[R.metrics.throughput.toFixed(0)," ops/s"]})]}),R.metrics.latency!==void 0&&f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Latency: "}),f.jsxs("span",{className:"font-mono",children:[R.metrics.latency.toFixed(0),"ms"]})]}),R.metrics.errorRate!==void 0&&f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Error Rate: "}),f.jsxs("span",{className:"font-mono",children:[(R.metrics.errorRate*100).toFixed(1),"%"]})]}),R.metrics.utilization!==void 0&&f.jsxs("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Utilization: "}),f.jsxs("span",{className:"font-mono",children:[(R.metrics.utilization*100).toFixed(0),"%"]})]})]}),R.rootCause&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs font-semibold text-muted-foreground mb-0.5",children:"Root Cause:"}),f.jsx("div",{className:"text-xs",children:R.rootCause})]}),R.recommendations.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs font-semibold text-muted-foreground mb-0.5",children:"Recommendations:"}),f.jsx("ul",{className:"text-xs space-y-0.5 list-disc list-inside",children:R.recommendations.map((j,N)=>f.jsx("li",{className:"text-muted-foreground",children:j},N))})]})]})]},E))})})]})]})}function Yz(){const{alerts:a,acknowledgeAlert:t,clearAlerts:n,getCriticalAlerts:s,getWarningAlerts:r}=Lh(),{selectNode:l}=Re(),c=s(),d=r();a.filter(g=>g.type==="info");const h=g=>{switch(g){case"critical":return f.jsx(da,{className:"w-4 h-4 text-red-500"});case"warning":return f.jsx(ys,{className:"w-4 h-4 text-yellow-500"});default:return f.jsx(U2,{className:"w-4 h-4 text-blue-500"})}},p=g=>{l(g)};return a.length===0?f.jsxs(Tn,{className:"h-full",children:[f.jsx(Ws,{children:f.jsx(Zs,{className:"text-sm",children:"Alerts"})}),f.jsx(Js,{children:f.jsxs("div",{className:"text-center text-sm text-muted-foreground py-8",children:[f.jsx(qh,{className:"w-8 h-8 mx-auto mb-2 opacity-50 text-green-500"}),f.jsx("p",{children:"No active alerts"})]})})]}):f.jsxs(Tn,{className:"h-full flex flex-col",children:[f.jsx(Ws,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(Zs,{className:"text-sm",children:"Alerts"}),f.jsxs("div",{className:"flex gap-2 mt-1",children:[c.length>0&&f.jsxs(Gt,{variant:"destructive",className:"text-xs",children:[c.length," Critical"]}),d.length>0&&f.jsxs(Gt,{variant:"outline",className:"text-xs border-yellow-500 text-yellow-600",children:[d.length," Warning"]})]})]}),f.jsx(Te,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:n,children:"Clear All"})]})}),f.jsx(Js,{className:"flex-1 overflow-hidden p-0",children:f.jsx(an,{className:"h-full",children:f.jsx("div",{className:"p-4 space-y-2",children:a.map(g=>f.jsx(Tn,{className:`border-l-4 ${g.type==="critical"?"border-l-red-500 bg-red-500/5":g.type==="warning"?"border-l-yellow-500 bg-yellow-500/5":"border-l-blue-500 bg-blue-500/5"}`,children:f.jsx(Js,{className:"p-3",children:f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[h(g.type),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("h4",{className:"text-xs font-semibold",children:g.title}),f.jsx(Gt,{variant:g.type==="critical"?"destructive":g.type==="warning"?"outline":"secondary",className:"text-xs",children:g.type})]}),f.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:g.message}),g.nodeLabel&&f.jsxs(Te,{variant:"ghost",size:"sm",className:"h-6 text-xs p-1",onClick:()=>g.nodeId&&p(g.nodeId),children:["View: ",g.nodeLabel]}),f.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(g.timestamp).toLocaleTimeString()})]})]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>t(g.id),children:f.jsx(vs,{className:"w-3 h-3"})})]})})},g.id))})})})]})}function Xz(){const{nodes:a,connections:t}=Re(),{isRunning:n,componentMetrics:s,connectionMetrics:r}=jt(),{getSystemAnalysis:l}=fa(),{getCriticalAlerts:c,getWarningAlerts:d}=Lh(),h=x.useMemo(()=>{if(!n)return{totalThroughput:0,averageLatency:0,totalErrorRate:0,activeComponents:0,activeConnections:0,bottlenecks:0,healthyComponents:0,degradedComponents:0,criticalComponents:0};let m=0,v=0,w=0,S=0,C=0,R=0,E=0,j=0,N=0;s.forEach(I=>{(I.throughput>.1||I.errorRate>.001)&&(S++,m+=I.throughput||0,v+=I.latency||0,w+=I.errorRate||0)}),r.forEach(I=>{(I.effectiveThroughput>0||I.traffic>0)&&(C++,I.bottleneck&&R++)});const T=fa.getState();a.forEach(I=>{const q=T.getComponentStatus(I.id);if(q)switch(q.health){case"healthy":E++;break;case"degraded":j++;break;case"critical":case"down":N++;break}});const k=S>0?v/S:0,U=S>0?w/S:0;return{totalThroughput:m,averageLatency:k,totalErrorRate:U,activeComponents:S,activeConnections:C,bottlenecks:R,healthyComponents:E,degradedComponents:j,criticalComponents:N}},[n,s,r,a]),p=c(),g=d();return n?f.jsxs("div",{className:"space-y-2.5",children:[f.jsxs("div",{className:"space-y-1.5",children:[f.jsx(ms,{level:5,children:"Performance"}),f.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[f.jsxs("div",{className:"p-1.5 bg-card border border-border rounded",children:[f.jsx(Ye,{size:"micro",muted:!0,className:"mb-0.5",children:"Total Throughput"}),f.jsxs(ca,{status:"success",size:"base",weight:"bold",children:[h.totalThroughput.toFixed(0),f.jsx(Ye,{size:"micro",muted:!0,className:"ml-0.5",children:"ops/s"})]})]}),f.jsxs("div",{className:"p-1.5 bg-card border border-border rounded",children:[f.jsx(Ye,{size:"micro",muted:!0,className:"mb-0.5",children:"Avg Latency"}),f.jsxs(ca,{status:"warning",size:"base",weight:"bold",children:[h.averageLatency.toFixed(0),f.jsx(Ye,{size:"micro",muted:!0,className:"ml-0.5",children:"ms"})]})]}),f.jsxs("div",{className:"p-1.5 bg-card border border-border rounded",children:[f.jsx(Ye,{size:"micro",muted:!0,className:"mb-0.5",children:"Error Rate"}),f.jsxs(ca,{status:"error",size:"base",weight:"bold",children:[(h.totalErrorRate*100).toFixed(2),f.jsx(Ye,{size:"micro",muted:!0,className:"ml-0.5",children:"%"})]})]}),f.jsxs("div",{className:"p-1.5 bg-card border border-border rounded",children:[f.jsx(Ye,{size:"micro",muted:!0,className:"mb-0.5",children:"Bottlenecks"}),f.jsxs(ca,{status:"warning",size:"base",weight:"bold",children:[h.bottlenecks,f.jsx(Ye,{size:"micro",muted:!0,className:"ml-0.5",children:"conn"})]})]})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx(ms,{level:5,children:"Component Health"}),f.jsxs("div",{className:"space-y-0.5",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(qh,{className:"w-4 h-4 text-success"}),f.jsx(Ye,{size:"micro",children:"Healthy"})]}),f.jsx(Gt,{variant:"outline",className:"bg-success/20 border-success/50 text-success text-xs px-1 py-0",children:h.healthyComponents})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(ys,{className:"w-4 h-4 text-warning"}),f.jsx(Ye,{size:"micro",children:"Degraded"})]}),f.jsx(Gt,{variant:"outline",className:"bg-warning/20 border-warning/50 text-warning text-xs px-1 py-0",children:h.degradedComponents})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(ys,{className:"w-4 h-4 text-destructive"}),f.jsx(Ye,{size:"micro",children:"Critical/Down"})]}),f.jsx(Gt,{variant:"outline",className:"bg-destructive/20 border-destructive/50 text-destructive text-xs px-1 py-0",children:h.criticalComponents})]})]})]}),f.jsxs("div",{className:"space-y-1.5",children:[f.jsx(ms,{level:5,children:"Activity"}),f.jsxs("div",{className:"space-y-0.5",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(K2,{className:"w-4 h-4 text-muted-foreground"}),f.jsx(Ye,{size:"micro",children:"Active Components"})]}),f.jsxs(Ye,{mono:!0,size:"micro",children:[h.activeComponents," / ",a.length]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(fb,{className:"w-4 h-4 text-muted-foreground"}),f.jsx(Ye,{size:"micro",children:"Active Connections"})]}),f.jsxs(Ye,{mono:!0,size:"micro",children:[h.activeConnections," / ",t.length]})]})]})]}),(p.length>0||g.length>0)&&f.jsxs("div",{className:"space-y-1.5",children:[f.jsx(ms,{level:5,children:"Alerts"}),f.jsxs("div",{className:"space-y-0.5",children:[p.length>0&&f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(ca,{status:"error",size:"micro",children:"Critical"}),f.jsx(Gt,{variant:"destructive",className:"text-xs px-1 py-0",children:p.length})]}),g.length>0&&f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(ca,{status:"warning",size:"micro",children:"Warnings"}),f.jsx(Gt,{variant:"outline",className:"border-warning text-warning text-xs px-1 py-0",children:g.length})]})]})]})]}):f.jsxs("div",{className:"text-center text-sm text-muted-foreground py-8",children:[f.jsx(ha,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"Start emulation to see system statistics"})]})}var wu="Checkbox",[Wz]=bn(wu),[Zz,Tp]=Wz(wu);function Jz(a){const{__scopeCheckbox:t,checked:n,children:s,defaultChecked:r,disabled:l,form:c,name:d,onCheckedChange:h,required:p,value:g="on",internal_do_not_use_render:m}=a,[v,w]=xs({prop:n,defaultProp:r??!1,onChange:h,caller:wu}),[S,C]=x.useState(null),[R,E]=x.useState(null),j=x.useRef(!1),N=S?!!c||!!S.closest("form"):!0,T={checked:v,disabled:l,setChecked:w,control:S,setControl:C,name:d,form:c,value:g,hasConsumerStoppedPropagationRef:j,required:p,defaultChecked:Oo(r)?!1:r,isFormControl:N,bubbleInput:R,setBubbleInput:E};return f.jsx(Zz,{scope:t,...T,children:e3(m)?m(T):s})}var kC="CheckboxTrigger",DC=x.forwardRef(({__scopeCheckbox:a,onKeyDown:t,onClick:n,...s},r)=>{const{control:l,value:c,disabled:d,checked:h,required:p,setControl:g,setChecked:m,hasConsumerStoppedPropagationRef:v,isFormControl:w,bubbleInput:S}=Tp(kC,a),C=De(r,g),R=x.useRef(h);return x.useEffect(()=>{const E=l?.form;if(E){const j=()=>m(R.current);return E.addEventListener("reset",j),()=>E.removeEventListener("reset",j)}},[l,m]),f.jsx(Ae.button,{type:"button",role:"checkbox","aria-checked":Oo(h)?"mixed":h,"aria-required":p,"data-state":PC(h),"data-disabled":d?"":void 0,disabled:d,value:c,...s,ref:C,onKeyDown:ge(t,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:ge(n,E=>{m(j=>Oo(j)?!0:!j),S&&w&&(v.current=E.isPropagationStopped(),v.current||E.stopPropagation())})})});DC.displayName=kC;var jp=x.forwardRef((a,t)=>{const{__scopeCheckbox:n,name:s,checked:r,defaultChecked:l,required:c,disabled:d,value:h,onCheckedChange:p,form:g,...m}=a;return f.jsx(Jz,{__scopeCheckbox:n,checked:r,defaultChecked:l,disabled:d,required:c,onCheckedChange:p,name:s,form:g,value:h,internal_do_not_use_render:({isFormControl:v})=>f.jsxs(f.Fragment,{children:[f.jsx(DC,{...m,ref:t,__scopeCheckbox:n}),v&&f.jsx(LC,{__scopeCheckbox:n})]})})});jp.displayName=wu;var _C="CheckboxIndicator",zC=x.forwardRef((a,t)=>{const{__scopeCheckbox:n,forceMount:s,...r}=a,l=Tp(_C,n);return f.jsx(rn,{present:s||Oo(l.checked)||l.checked===!0,children:f.jsx(Ae.span,{"data-state":PC(l.checked),"data-disabled":l.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...a.style}})})});zC.displayName=_C;var OC="CheckboxBubbleInput",LC=x.forwardRef(({__scopeCheckbox:a,...t},n)=>{const{control:s,hasConsumerStoppedPropagationRef:r,checked:l,defaultChecked:c,required:d,disabled:h,name:p,value:g,form:m,bubbleInput:v,setBubbleInput:w}=Tp(OC,a),S=De(n,w),C=pu(l),R=lu(s);x.useEffect(()=>{const j=v;if(!j)return;const N=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(N,"checked").set,U=!r.current;if(C!==l&&k){const I=new Event("click",{bubbles:U});j.indeterminate=Oo(l),k.call(j,Oo(l)?!1:l),j.dispatchEvent(I)}},[v,C,l,r]);const E=x.useRef(Oo(l)?!1:l);return f.jsx(Ae.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??E.current,required:d,disabled:h,name:p,value:g,form:m,...t,tabIndex:-1,ref:S,style:{...t.style,...R,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});LC.displayName=OC;function e3(a){return typeof a=="function"}function Oo(a){return a==="indeterminate"}function PC(a){return Oo(a)?"indeterminate":a?"checked":"unchecked"}const Rh=x.forwardRef(({className:a,...t},n)=>f.jsx(jp,{ref:n,className:Ee("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...t,children:f.jsx(zC,{className:Ee("grid place-content-center text-current"),children:f.jsx(Ph,{className:"h-4 w-4"})})}));Rh.displayName=jp.displayName;function IC({open:a,groupName:t,onConfirm:n,onCancel:s}){return f.jsx(wx,{open:a,onOpenChange:r=>!r&&s(),children:f.jsxs(Jh,{children:[f.jsxs(Sx,{children:[f.jsx(ep,{children:"Delete Group?"}),f.jsxs(tp,{children:['Are you sure you want to delete the group "',t,'"? This action cannot be undone.']})]}),f.jsxs(Mx,{children:[f.jsx(sp,{onClick:s,children:"Cancel"}),f.jsx(np,{onClick:n,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})}function t3({group:a}){const{nodes:t,updateGroup:n,deleteGroup:s,removeNodeFromGroup:r,addNodeToGroup:l,selectGroup:c}=Re(),[d,h]=x.useState(!1),[p,g]=x.useState(!1),[m,v]=x.useState(!1),[w,S]=x.useState(new Set),C=T=>{n(a.id,{name:T}),Ke.success("Group renamed"),g(!1)},R=()=>{h(!0)},E=()=>{s(a.id),c(null),Ke.success("Group deleted"),h(!1)},j=T=>{r(a.id,T),Ke.success("Component removed from group")},N=t.filter(T=>a.nodeIds.includes(T.id));return f.jsxs("div",{className:"space-y-2.5",children:[f.jsxs("div",{children:[f.jsx(nt,{htmlFor:"group-name",className:"text-xs font-medium",children:"Group Name"}),f.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[f.jsx(Tt,{id:"group-name",value:a.name,onChange:T=>n(a.id,{name:T.target.value}),className:"flex-1 h-8 text-xs"}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:R,children:f.jsx(Hh,{className:"h-3.5 w-3.5 text-destructive"})})]})]}),f.jsx(IC,{open:d,groupName:a.name,onConfirm:E,onCancel:()=>h(!1)}),f.jsx(ap,{open:p,initialName:a.name,onConfirm:C,onCancel:()=>g(!1)}),f.jsx(vn,{}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Rh,{id:"show-name",checked:a.showName!==!1,onCheckedChange:T=>n(a.id,{showName:T!==!1})}),f.jsx(nt,{htmlFor:"show-name",className:"text-xs font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Show name on canvas"})]}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsx(nt,{className:"text-xs font-medium mb-1.5 block",children:"Color"}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("input",{type:"color",value:a.color||"#3b82f6",onChange:T=>n(a.id,{color:T.target.value}),className:"w-10 h-8 rounded border border-border cursor-pointer"}),f.jsx(Tt,{value:a.color||"#3b82f6",onChange:T=>n(a.id,{color:T.target.value}),className:"flex-1 font-mono text-xs h-8",placeholder:"#3b82f6"})]})]}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsxs(nt,{className:"text-xs font-medium",children:["Components (",a.nodeIds.length,")"]}),f.jsxs(Te,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>{if(Re.getState().nodes.filter(U=>!a.nodeIds.includes(U.id)).length===0){Ke.info("All components are already in this group");return}S(new Set),v(!0)},children:[f.jsx(Nc,{className:"h-3 w-3 mr-1"}),"Add"]})]}),f.jsxs("div",{className:"space-y-1.5 max-h-48 overflow-y-auto",children:[N.map(T=>f.jsxs("div",{className:"flex items-center justify-between p-1.5 bg-secondary/50 rounded border border-border",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-xs font-medium truncate",children:T.data?.label||T.type}),f.jsx("div",{className:"text-[10px] text-muted-foreground truncate",children:T.type})]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:()=>j(T.id),title:"Remove from group",children:f.jsx(vs,{className:"h-3 w-3"})})]},T.id)),N.length===0&&f.jsx("div",{className:"text-xs text-muted-foreground text-center py-3",children:"No components in group"})]})]}),f.jsx(vn,{}),f.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted-foreground",children:[f.jsx("span",{children:"Group ID:"}),f.jsx("code",{className:"font-mono bg-secondary/50 px-1.5 py-0.5 rounded text-[10px]",children:a.id})]}),f.jsx(op,{open:m,onOpenChange:v,children:f.jsxs(Yc,{className:"max-w-md",children:[f.jsxs(Xc,{children:[f.jsx(Zc,{children:"Add Components to Group"}),f.jsxs(Jc,{children:['Select components to add to "',a.name,'"']})]}),f.jsx(an,{className:"max-h-96",children:f.jsxs("div",{className:"space-y-2 py-2",children:[t.filter(T=>!a.nodeIds.includes(T.id)).map(T=>f.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded border border-border hover:bg-secondary/50 cursor-pointer",onClick:()=>{const k=new Set(w);k.has(T.id)?k.delete(T.id):k.add(T.id),S(k)},children:[f.jsx(Rh,{checked:w.has(T.id),onCheckedChange:k=>{const U=new Set(w);k?U.add(T.id):U.delete(T.id),S(U)}}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-sm font-medium truncate",children:T.data?.label||T.type}),f.jsx("div",{className:"text-xs text-muted-foreground truncate",children:T.type})]})]},T.id)),t.filter(T=>!a.nodeIds.includes(T.id)).length===0&&f.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"All components are already in this group"})]})}),f.jsxs(Wc,{children:[f.jsx(Te,{variant:"outline",onClick:()=>{v(!1),S(new Set)},children:"Cancel"}),f.jsxs(Te,{onClick:()=>{if(w.size===0){Ke.error("Select at least one component");return}w.forEach(T=>{l(a.id,T)}),Ke.success(`${w.size} component(s) added to group`),v(!1),S(new Set)},children:["Add Selected (",w.size,")"]})]})]})})]})}function n3(){const{selectedNodeId:a,nodes:t,updateNode:n,selectNode:s,connections:r,updateConnection:l,selectedConnectionId:c,selectConnection:d,selectedGroupId:h,groups:p,selectGroup:g}=Re(),{addTab:m}=hu(),v=t.find(C=>C.id===a),w=r.find(C=>C.id===c),S=p.find(C=>C.id===h);return S?f.jsxs("div",{className:"w-60 h-full bg-card border-l border-border flex flex-col",children:[f.jsxs("div",{className:"p-1.5 border-b border-border flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Ff,{className:"h-3 w-3 text-muted-foreground"}),f.jsx(Xs,{children:"Group Properties"})]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>g(null),children:f.jsx(vs,{className:"h-3 w-3"})})]}),f.jsx(an,{className:"flex-1",children:f.jsx("div",{className:"p-1.5",children:f.jsx(t3,{group:S})})})]}):!v&&!w?f.jsx("div",{className:"w-60 h-full bg-card border-l border-border flex flex-col",children:f.jsxs(ip,{defaultValue:"stats",className:"h-full flex flex-col",children:[f.jsx("div",{className:"p-1 border-b border-border",children:f.jsxs(su,{className:"grid w-full grid-cols-5 h-6 gap-0.5 p-0.5",children:[f.jsx(hs,{value:"stats",className:"text-xs px-1 py-0.5",children:"Stats"}),f.jsx(hs,{value:"diagnostics",className:"text-xs px-1 py-0.5",children:"Diag"}),f.jsx(hs,{value:"alerts",className:"text-xs px-1 py-0.5",children:"Alerts"}),f.jsx(hs,{value:"filters",className:"text-xs px-1 py-0.5",children:"Filter"}),f.jsx(hs,{value:"properties",className:"text-xs px-1 py-0.5",children:"Groups"})]})}),f.jsx(zo,{value:"stats",className:"flex-1 m-0 p-0 overflow-hidden",children:f.jsx(an,{className:"h-full",children:f.jsx("div",{className:"p-1.5",children:f.jsx(Xz,{})})})}),f.jsx(zo,{value:"diagnostics",className:"flex-1 m-0 p-0 overflow-hidden",children:f.jsx(Kz,{})}),f.jsx(zo,{value:"alerts",className:"flex-1 m-0 p-0 overflow-hidden",children:f.jsx(Yz,{})}),f.jsx(zo,{value:"filters",className:"flex-1 m-0 p-0 overflow-hidden",children:f.jsx(an,{className:"h-full",children:f.jsx("div",{className:"p-1.5",children:f.jsx(Vz,{})})})}),f.jsx(zo,{value:"properties",className:"flex-1 m-0 p-0 overflow-hidden",children:f.jsx(an,{className:"h-full",children:f.jsx("div",{className:"p-1.5 space-y-1.5",children:f.jsxs("div",{children:[f.jsxs(Xs,{as:"h4",className:"mb-1",children:["Groups (",p.length,")"]}),p.length>0?f.jsx("div",{className:"space-y-1",children:p.map(C=>f.jsx("div",{className:"p-1.5 bg-secondary/50 rounded border border-border cursor-pointer hover:bg-secondary transition-colors",onClick:()=>g(C.id),children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx(Ye,{size:"small",className:"font-medium truncate",children:C.name}),f.jsxs(Ye,{size:"micro",muted:!0,children:[C.nodeIds.length," component",C.nodeIds.length!==1?"s":""]})]}),f.jsx("div",{className:"w-2.5 h-2.5 rounded border-2 border-border flex-shrink-0 ml-1",style:{backgroundColor:C.color||"hsl(var(--primary))"}})]})},C.id))}):f.jsx(Ye,{size:"micro",muted:!0,className:"text-center py-2",children:"No groups created yet"})]})})})})]})}):w?f.jsxs("div",{className:"w-60 h-full bg-card border-l border-border flex flex-col",children:[f.jsxs("div",{className:"p-1.5 border-b border-border flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Ff,{className:"h-3 w-3 text-muted-foreground"}),f.jsx(Xs,{children:"Connection"})]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>d(null),children:f.jsx(vs,{className:"h-3 w-3"})})]}),f.jsx(an,{className:"flex-1",children:f.jsx("div",{className:"p-1.5",children:f.jsx(Mz,{connection:w,onUpdate:(C,R)=>l(C,R)})})})]}):f.jsxs("div",{className:"w-60 h-full bg-card border-l border-border flex flex-col",children:[f.jsxs("div",{className:"p-1.5 border-b border-border flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Ff,{className:"h-3 w-3 text-muted-foreground"}),f.jsx(Xs,{children:"Properties"})]}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>s(null),children:f.jsx(vs,{className:"h-3 w-3"})})]}),f.jsx(an,{className:"flex-1",children:f.jsxs("div",{className:"p-1.5 space-y-1.5",children:[f.jsx(Fz,{componentId:v.id,componentLabel:v.data.label}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsx(nt,{htmlFor:"label",className:"text-xs font-medium",children:"Label"}),f.jsx(Tt,{id:"label",value:v.data.label,onChange:C=>n(v.id,{data:{...v.data,label:C.target.value}}),className:"mt-0.5 h-7 text-xs"})]}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsx(Xs,{as:"h4",className:"mb-1",children:"Position"}),f.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[f.jsxs("div",{children:[f.jsx(nt,{htmlFor:"pos-x",className:"text-xs text-muted-foreground",children:"X"}),f.jsx(Tt,{id:"pos-x",type:"number",value:Math.round(v.position.x),onChange:C=>n(v.id,{position:{...v.position,x:parseInt(C.target.value)||0}}),className:"mt-0.5 h-7 text-xs"})]}),f.jsxs("div",{children:[f.jsx(nt,{htmlFor:"pos-y",className:"text-xs text-muted-foreground",children:"Y"}),f.jsx(Tt,{id:"pos-y",type:"number",value:Math.round(v.position.y),onChange:C=>n(v.id,{position:{...v.position,y:parseInt(C.target.value)||0}}),className:"mt-0.5 h-7 text-xs"})]})]})]}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsx(Xs,{as:"h4",className:"mb-1",children:"Component Type"}),f.jsx("div",{className:"bg-secondary/50 rounded-md p-1.5 border border-border",children:f.jsx(Ye,{mono:!0,size:"small",children:v.type})})]}),f.jsx(vn,{}),f.jsxs("div",{children:[f.jsx(Xs,{as:"h4",className:"mb-1",children:"Configuration"}),f.jsx(Te,{variant:"outline",size:"sm",className:"w-full h-7 text-xs",onClick:()=>{m({title:`${v.data.label} Config`,type:"component",componentId:v.id,componentType:v.type})},children:"Open Configuration Panel"})]})]})})]})}function s3(){const{tabs:a,setActiveTab:t,closeTab:n,addTab:s}=hu(),r=()=>{s({title:"Untitled Diagram",type:"diagram"})};return f.jsx("div",{className:"h-10 bg-secondary/30 border-b border-border flex items-center",children:f.jsxs(an,{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center",children:[a.map(l=>f.jsxs("div",{className:`
                flex items-center gap-2 px-4 h-10 border-r border-border cursor-pointer group
                transition-colors
                ${l.active?"bg-canvas-bg text-foreground":"text-muted-foreground hover:bg-secondary/50"}
              `,onClick:()=>t(l.id),children:[f.jsx("span",{className:"text-sm",children:l.title}),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover:opacity-100 hover:bg-destructive/10",onClick:c=>{c.stopPropagation(),n(l.id)},children:f.jsx(vs,{className:"h-3 w-3"})})]},l.id)),f.jsx(Te,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-none",onClick:r,children:f.jsx(Nc,{className:"h-4 w-4"})})]}),f.jsx(Gc,{orientation:"horizontal"})]})})}const S0=a=>Symbol.iterator in a,M0=a=>"entries"in a,E0=(a,t)=>{const n=a instanceof Map?a:new Map(a.entries()),s=t instanceof Map?t:new Map(t.entries());if(n.size!==s.size)return!1;for(const[r,l]of n)if(!s.has(r)||!Object.is(l,s.get(r)))return!1;return!0},o3=(a,t)=>{const n=a[Symbol.iterator](),s=t[Symbol.iterator]();let r=n.next(),l=s.next();for(;!r.done&&!l.done;){if(!Object.is(r.value,l.value))return!1;r=n.next(),l=s.next()}return!!r.done&&!!l.done};function a3(a,t){return Object.is(a,t)?!0:typeof a!="object"||a===null||typeof t!="object"||t===null||Object.getPrototypeOf(a)!==Object.getPrototypeOf(t)?!1:S0(a)&&S0(t)?M0(a)&&M0(t)?E0(a,t):o3(a,t):E0({entries:()=>Object.entries(a)},{entries:()=>Object.entries(t)})}function qC(a){const t=Et.useRef(void 0);return n=>{const s=a(n);return a3(t.current,s)?t.current:t.current=s}}const R0=globalThis;function hc(a){try{if(typeof R0.structuredClone=="function")return R0.structuredClone(a)}catch{}return JSON.parse(JSON.stringify(a))}function vr(a,t,n=140,s=100,r=16){const l=[],c=n/2,d=s/2,h=a+c,p=t+d;for(let g=0;g<r;g++){const m=g/r*2*Math.PI-Math.PI/2;let v,w;const S=(m%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(S>=0&&S<Math.PI/2){const C=S/(Math.PI/2);v=h+c,w=p-d+C*s}else if(S>=Math.PI/2&&S<Math.PI){const C=(S-Math.PI/2)/(Math.PI/2);v=h+c-C*n,w=p+d}else if(S>=Math.PI&&S<3*Math.PI/2){const C=(S-Math.PI)/(Math.PI/2);v=h-c,w=p+d-C*s}else{const C=(S-3*Math.PI/2)/(Math.PI/2);v=h-c+C*n,w=p-d}l.push({x:v,y:w,index:g})}return l}function r3(a,t,n){let s=1/0,r=0;for(let l=0;l<a.length;l++){const c=a[l],d=Math.sqrt(Math.pow(t-c.x,2)+Math.pow(n-c.y,2));d<s&&(s=d,r=l)}return r}function N0(a,t,n,s,r,l,c,d=140,h=100){const p=vr(l,c,d,h),g=r3(p,n,s);if(r.filter(v=>v.source===a&&v.target===t&&v.sourcePort===g||v.target===a&&v.source===t&&v.targetPort===g).length===0)return g;for(let v=1;v<p.length;v++){const w=(g+v)%p.length,S=(g-v+p.length)%p.length;if(r.filter(E=>E.source===a&&E.target===t&&E.sourcePort===w||E.target===a&&E.source===t&&E.targetPort===w).length===0)return w;if(r.filter(E=>E.source===a&&E.target===t&&E.sourcePort===S||E.target===a&&E.source===t&&E.targetPort===S).length===0)return S}return g}const HC=x.createContext(null);function i3({children:a}){const t=x.useRef(new Map),n=x.useCallback((c,d)=>{d?t.current.set(c,d):t.current.delete(c)},[]),s=x.useCallback(c=>t.current.get(c)||null,[]),r=x.useCallback(c=>{t.current.delete(c)},[]),l={registerNodeRef:n,getNodeRef:s,unregisterNodeRef:r};return f.jsx(HC.Provider,{value:l,children:a})}function Cu(){const a=x.useContext(HC);if(!a)throw new Error("useNodeRefs must be used within NodeRefsProvider");return a}function l3({node:a,onConnectionStart:t,onConnectionEnd:n,isConnecting:s=!1,onContextMenu:r}){const{registerNodeRef:l,unregisterNodeRef:c}=Cu(),d=x.useRef(null);x.useEffect(()=>(d.current&&l(a.id,d.current),()=>{c(a.id)}),[a.id,l,c]);const h=Re(de=>de.selectNode),p=Re(de=>de.updateNode),g=Re(de=>de.updateNodes),m=Re(de=>de.deleteNode);Re(de=>de.addNode);const v=Re(de=>de.startDragOperation),w=Re(de=>de.endDragOperation);Re(de=>de.bringToFront),Re(de=>de.sendToBack),Re(de=>de.bringForward),Re(de=>de.sendBackward);const{connections:S,zoom:C,pan:R,nodes:E}=Re(qC(de=>({connections:de.connections,zoom:de.zoom,pan:de.pan,nodes:de.nodes}))),{addTab:j}=hu(),[N,T]=x.useState(!1),[k,U]=x.useState(!1),I=x.useRef({x:0,y:0}),q=x.useRef({x:0,y:0}),te=x.useRef({x:0,y:0}),se=x.useRef({x:0,y:0}),le=x.useRef(null),ee=x.useRef(null),oe=x.useRef(!1),ce=x.useRef(!1),ue=x.useRef({}),z=x.useMemo(()=>Ni.find(de=>de.type===a.type),[a.type]),{isRunning:D,getComponentMetrics:L}=jt(),Y=fa(de=>de.getComponentStatus(a.id)),he=jC(de=>de.getComponentState(a.id)),_=D?L(a.id):void 0,X=zi(de=>de.highlightedNodeId)===a.id,W=x.useMemo(()=>S.some(de=>de.source===a.id||de.target===a.id),[S,a.id]),F=_&&(_.throughput&&_.throughput>.1||_.errorRate&&_.errorRate>.001||_.utilization&&_.utilization>.01),ae=()=>{if(!D||!_||!W||!F)return"";const de=_.utilization||0,He=_.errorRate||0,Be=Math.min(1,de*.7+He*.3);return Be>.8?"border-red-500":Be>.6?"border-orange-500":Be>.4?"border-yellow-500":Be>.2?"border-green-500":""},B=()=>{if(!D)return null;if(he)switch(he.state){case"disabled":case"failed":return f.jsx(vc,{className:"text-red-500",size:16});case"degraded":return f.jsx(ys,{className:"text-yellow-500",size:16})}if(!W||!F||!Y)return null;const de=Y.health,He=16;switch(de){case"healthy":return f.jsx(qh,{className:"text-green-500",size:He});case"degraded":return f.jsx(ys,{className:"text-yellow-500",size:He});case"critical":return f.jsx(Ei,{className:"text-orange-500",size:He});case"down":return f.jsx(da,{className:"text-red-500",size:He});default:return null}},V=()=>{if(!D)return a.selected?"border-primary":"border-border";if(he)switch(he.state){case"disabled":case"failed":return"border-red-500 border-2";case"degraded":return"border-yellow-500 border-2"}if(!Y)return a.selected?"border-primary":"border-border";if(Y.criticalPath)return"border-purple-500 border-2";switch(Y.health){case"down":return"border-red-500 border-2";case"critical":return"border-orange-500";case"degraded":return"border-yellow-500";default:return a.selected?"border-primary":"border-border"}},pe=x.useRef(C),me=x.useRef(R);x.useEffect(()=>{pe.current=C,me.current=R},[C,R]),x.useEffect(()=>{const de=Be=>{if(!oe.current)return;if(Re.getState().getIsGroupDragging()){oe.current=!1,ce.current=!1,T(!1);return}const pt=Be.clientX-q.current.x,qt=Be.clientY-q.current.y,Ze=Math.sqrt(pt*pt+qt*qt);if(!ce.current&&Ze>3){ce.current=!0,T(!0),v(a.id);const vt=Re.getState().nodes.filter(gt=>gt.selected);ue.current={},vt.forEach(gt=>{ue.current[gt.id]={x:gt.position.x,y:gt.position.y}})}if(ce.current&&le.current){const Dt=pe.current,vt=me.current,gt=le.current.getBoundingClientRect(),Yt=(Be.clientX-gt.left-vt.x)/Dt,Qt=(Be.clientY-gt.top-vt.y)/Dt,Rs=Yt-te.current.x,Yn=Qt-te.current.y,rs=Re.getState().nodes.filter(Ft=>Ft.selected),Xt=Object.keys(ue.current).length>0;if(rs.length>1&&Xt){const Ft=[];rs.forEach(_t=>{const Bo=ue.current[_t.id];Bo&&Ft.push({id:_t.id,updates:{position:{x:Bo.x+Rs,y:Bo.y+Yn}}})}),Ft.length>0&&g(Ft,!0)}else{const Ft=se.current.x+Rs,_t=se.current.y+Yn;p(a.id,{position:{x:Ft,y:_t}},!0)}}},He=()=>{oe.current&&(oe.current=!1,ce.current&&(ce.current=!1,T(!1),w()))};return document.addEventListener("mousemove",de),document.addEventListener("mouseup",He),()=>{document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",He)}},[a.id,p,g,v,w]);const ye=de=>{if(de.button!==0)return;const Be=Re.getState().nodes.filter(jn=>jn.selected),yt=a.selected,pt=Be.some(jn=>jn.id!==a.id);if(!(yt&&pt&&!de.ctrlKey&&!de.metaKey)){const jn=de.ctrlKey||de.metaKey;h(a.id,jn)}const qt=document.querySelector(".flex-1.overflow-hidden.relative");if(!qt){I.current={x:0,y:0},te.current={x:0,y:0},se.current={x:0,y:0},le.current=null,ee.current=null;return}le.current=qt;const Ze=pe.current,Dt=me.current,vt=qt.getBoundingClientRect();ee.current=vt;const gt=(de.clientX-vt.left-Dt.x)/Ze,Yt=(de.clientY-vt.top-Dt.y)/Ze;te.current={x:gt,y:Yt};const Yn=Re.getState().nodes.find(jn=>jn.id===a.id)?.position||a.position;se.current={x:Yn.x,y:Yn.y},I.current={x:gt-Yn.x,y:Yt-Yn.y},q.current={x:de.clientX,y:de.clientY},oe.current=!0,ce.current=!1,de.stopPropagation()},ve=de=>{de.stopPropagation(),de.preventDefault(),N&&(T(!1),w()),j({title:`${a.data.label} Config`,type:"component",componentId:a.id,componentType:a.type})},Pe=de=>{de.key==="Delete"&&a.selected&&m(a.id)},Ue=de=>{if(de.preventDefault(),de.stopPropagation(),!a.selected){const He=E.some(Be=>Be.id!==a.id&&Be.selected);h(a.id,He)}r?.(de.clientX,de.clientY)},st=(de,He)=>{de.stopPropagation(),t?.(He)},We=x.useCallback(()=>{if(!d.current)return{width:140,height:100};const Be=(d.current.querySelector(".bg-card")||d.current).getBoundingClientRect();return{width:Be.width/C,height:Be.height/C}},[C]),kt=de=>{if(s){de.stopPropagation();const He=We(),Be=vr(a.position.x,a.position.y,He.width,He.height,16),yt=document.querySelector(".flex-1.overflow-hidden.relative");if(yt){const pt=yt.getBoundingClientRect(),qt=(de.clientX-pt.left-R.x)/C,Ze=(de.clientY-pt.top-R.y)/C;let Dt=1/0,vt=0;for(let gt=0;gt<Be.length;gt++){const Yt=Be[gt],Qt=Math.sqrt(Math.pow(qt-Yt.x,2)+Math.pow(Ze-Yt.y,2));Qt<Dt&&(Dt=Qt,vt=gt)}n?.(vt)}else n?.()}};return f.jsx(f.Fragment,{children:f.jsx("div",{ref:d,"data-node-id":a.id,className:`
          absolute cursor-move select-none
          transition-shadow
          ${a.selected?"glow-primary":""}
          ${N?"pointer-events-none":""}
        `,style:{left:`${a.position.x}px`,top:`${a.position.y}px`},onMouseDown:ye,onMouseUp:kt,onDoubleClick:ve,onContextMenu:Ue,onKeyDown:Pe,onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1),tabIndex:0,children:f.jsxs("div",{className:Ee("bg-card border-2 rounded-lg p-4 min-w-[140px] relative",V(),ae(),"hover:border-primary/50 transition-colors",Y?.criticalPath&&"shadow-lg shadow-purple-500/20",X&&"ring-4 ring-yellow-400 ring-offset-2 animate-pulse"),children:[D&&Y&&f.jsx("div",{className:"absolute -top-2 -right-2 bg-card rounded-full p-0.5 border border-border",children:B()}),D&&Y?.criticalPath&&f.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 bg-purple-500 text-white text-[10px] px-1.5 py-0.5 rounded-full font-semibold",children:"CRITICAL"}),f.jsxs("div",{className:"flex flex-col items-center gap-2 select-none",children:[f.jsx("div",{className:"text-3xl select-none pointer-events-none",children:z?.icon}),f.jsx("div",{className:"text-sm font-medium text-center text-foreground select-none pointer-events-none",children:a.data.label})]}),(k||s)&&(()=>{const de=d.current?(()=>{const pt=(d.current.querySelector(".bg-card")||d.current).getBoundingClientRect();return{width:pt.width/C,height:pt.height/C}})():{width:140,height:100},He=vr(a.position.x,a.position.y,de.width,de.height,16);return f.jsx(f.Fragment,{children:He.map((Be,yt)=>{const pt=Be.x-a.position.x,qt=Be.y-a.position.y;return f.jsx("div",{className:"absolute w-3 h-3 rounded-full bg-primary/80 border-2 border-card cursor-crosshair hover:scale-150 hover:bg-primary transition-all z-10",style:{left:`${pt-6}px`,top:`${qt-6}px`},onMouseDown:Ze=>{Ze.stopPropagation(),st(Ze,yt)},onMouseUp:Ze=>{Ze.stopPropagation(),s&&n?.(yt)},title:"Connection point"},yt)})})})()]})})})}const c3=x.memo(l3,(a,t)=>!(a.node.id!==t.node.id||a.node.position.x!==t.node.position.x||a.node.position.y!==t.node.position.y||a.node.selected!==t.node.selected||a.node.type!==t.node.type||a.node.data.label!==t.node.data.label||a.isConnecting!==t.isConnecting||a.onConnectionStart!==t.onConnectionStart||a.onConnectionEnd!==t.onConnectionEnd||a.onContextMenu!==t.onContextMenu));function u3({selectedNodeId:a,highlightPath:t=!0}){const{nodes:n,connections:s}=Re(),{isRunning:r}=jt(),{getConnectionMessages:l}=_o(),[c,d]=x.useState(new Set),[h,p]=x.useState(new Map);return x.useEffect(()=>{if(!a||!t||!r){d(new Set),p(new Map);return}const g=new Set,m=new Map,v=[{nodeId:a,path:[a]}];for(;v.length>0;){const{nodeId:w,path:S}=v.shift();if(g.has(w))continue;g.add(w);const C=s.filter(R=>R.source===w);for(const R of C){const E=R.target,j=[...S,E];m.set(R.id,j),g.has(E)||v.push({nodeId:E,path:j})}}p(m),d(new Set(m.keys()))},[a,s,t,r]),x.useEffect(()=>{if(!a||!t||!r)return;const g=new Set,m=[{nodeId:a,path:[a]}];for(;m.length>0;){const{nodeId:v,path:w}=m.shift();if(g.has(v))continue;g.add(v);const S=s.filter(C=>C.target===v);for(const C of S){const R=C.source,E=[R,...w],j=h.get(C.id)||[];(j.length===0||E.length<j.length)&&(h.set(C.id,E),p(new Map(h))),g.has(R)||m.push({nodeId:R,path:E})}}d(new Set(h.keys()))},[a,s,t,r]),null}function d3(a){const{selectedNodeId:t}=Re(),{isRunning:n}=jt(),[s,r]=x.useState(!1);return x.useEffect(()=>{if(!t||!n){r(!1);return}const{nodes:l,connections:c}=Re.getState();if(!l.find(p=>p.id===t)){r(!1);return}const h=c.find(p=>p.id===a);h&&(h.source===t||h.target===t)?r(!0):r(!1)},[t,a,n]),s}const UC=x.createContext(null);function f3({children:a}){const t=x.useRef(null),n=x.useRef(new WeakMap);x.useEffect(()=>(t.current=new ResizeObserver(l=>{l.forEach(c=>{const d=n.current.get(c.target);d&&d()})}),()=>{t.current&&(t.current.disconnect(),t.current=null)}),[]);const r={observe:x.useCallback((l,c)=>t.current?(n.current.set(l,c),t.current.observe(l),()=>{t.current&&(t.current.unobserve(l),n.current.delete(l))}):()=>{},[])};return f.jsx(UC.Provider,{value:r,children:a})}function BC(){const a=x.useContext(UC);if(!a)throw new Error("useResizeObserver must be used within ResizeObserverProvider");return a}function h3({connection:a,sourceNode:t,targetNode:n,zoom:s,pan:r,isSelected:l=!1,onClick:c,onContextMenu:d}){const[h,p]=x.useState(!1),{isRunning:g,connectionMetrics:m}=jt(qC(V=>({isRunning:V.isRunning,connectionMetrics:V.connectionMetrics}))),v=g?m.get(a.id):void 0,{getConnectionMessages:w}=_o(),S=Re(V=>V.selectedNodeId),C=Re(V=>V.connections),R=g?w(a.id):[],E=x.useMemo(()=>R.filter(V=>V.status==="in-transit"||V.status==="pending"),[R]),j=d3(a.id);x.useMemo(()=>C.some(V=>V.source===a.target&&V.target===a.source),[C,a.target,a.source]);const{getNodeRef:N}=Cu(),{observe:T}=BC(),[k,U]=x.useState(()=>{const V=pe=>{const me=N(pe);if(!me)return{width:140,height:100};const Pe=(me.querySelector(".bg-card")||me).getBoundingClientRect();return{width:Pe.width/s,height:Pe.height/s}};return{source:V(t.id),target:V(n.id)}});x.useEffect(()=>{const V=()=>{const We=kt=>{const de=N(kt);if(!de)return{width:140,height:100};const yt=(de.querySelector(".bg-card")||de).getBoundingClientRect();return{width:yt.width/s,height:yt.height/s}};U({source:We(t.id),target:We(n.id)})};V();const pe=N(t.id),me=N(n.id),ye=pe?.querySelector(".bg-card"),ve=me?.querySelector(".bg-card"),Pe=ye||pe,Ue=ve||me,st=[];if(Pe){const We=T(Pe,V);st.push(We)}if(Ue){const We=T(Ue,V);st.push(We)}return()=>{st.forEach(We=>We())}},[t.id,n.id,s,N,T]);const I=k.source.width,q=k.source.height,te=k.target.width,se=k.target.height,le=I/2,ee=q/2,oe=te/2,ce=se/2;let ue,z,D,L;if(a.sourcePort!==void 0&&a.targetPort!==void 0){const V=vr(t.position.x,t.position.y,I,q,16),pe=vr(n.position.x,n.position.y,te,se,16),me=V[a.sourcePort],ye=pe[a.targetPort];ue=me.x,z=me.y,D=ye.x,L=ye.y}else{const V=t.position.x+le,pe=t.position.y+ee,me=n.position.x+oe,ye=n.position.y+ce,ve=Math.atan2(ye-pe,me-V),Pe=(We,kt,de,He)=>{const Be=Math.abs(de),yt=He?le:oe,pt=He?ee:ce,qt=Math.atan2(pt,yt);let Ze,Dt;if(Be<qt||Be>Math.PI-qt){const vt=He?1:-1;Ze=We+vt*yt*Math.sign(Math.cos(de)),Dt=kt+vt*yt*Math.tan(de)*Math.sign(Math.cos(de))}else{const vt=He?1:-1;Ze=We+vt*pt/Math.tan(de)*Math.sign(Math.sin(de)),Dt=kt+vt*pt*Math.sign(Math.sin(de))}return{x:Ze,y:Dt}},Ue=Pe(V,pe,ve,!0),st=Pe(me,ye,ve,!1);ue=Ue.x,z=Ue.y,D=st.x,L=st.y}const Y=D-ue,he=L-z,_=Math.min(Math.abs(Y),Math.abs(he))*.3+30,$=`
    M ${ue},${z}
    C ${ue+_*Math.sign(Y)},${z}
      ${D-_*Math.sign(Y)},${L}
      ${D},${L}
  `;let X="hsl(var(--border))",W=2;j&&S?(X="hsl(280 100% 70%)",W=3):l?(X="hsl(var(--primary))",W=2.5):h?(X="hsl(var(--accent))",W=2.5):v&&g&&(v.effectiveThroughput>0||v.traffic>0)&&(v.bottleneck?(X="hsl(0 84% 60%)",W=3):v.backpressure>.7?(X="hsl(25 95% 53%)",W=2.5):v.congestion>.6?(X="hsl(45 93% 47%)",W=2.5):v.throughputDependency>.5?(X="hsl(142 76% 36%)",W=2):v.effectiveThroughput>0&&(X="hsl(var(--primary))",W=2));const F=V=>{V.stopPropagation(),c?.()},ae=V=>{V.preventDefault(),V.stopPropagation(),d?.(V)},B=g&&v&&v.effectiveThroughput>0?v.effectiveThroughput%40/2:0;return f.jsxs("g",{children:[f.jsx("path",{d:$,fill:"none",stroke:"transparent",strokeWidth:20/s,style:{cursor:"pointer"},onClick:F,onContextMenu:ae,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)}),g&&v&&v.effectiveThroughput>0&&v.traffic>0&&f.jsx("path",{d:$,fill:"none",stroke:X,strokeWidth:Math.max(1,W/s),strokeLinecap:"round",strokeDasharray:`${Math.max(4,8/s)} ${Math.max(2,4/s)}`,strokeDashoffset:-B,style:{opacity:.4,pointerEvents:"none",animation:"flow 2s linear infinite"}}),g&&E.map((V,pe)=>{const me=Date.now()-V.timestamp,ve=V.latency?Math.min(1,me/V.latency):0,Pe=ue+(D-ue)*ve,Ue=z+(L-z)*ve,We={json:"hsl(142 76% 36%)",xml:"hsl(25 95% 53%)",binary:"hsl(221 83% 53%)",protobuf:"hsl(280 100% 70%)",text:"hsl(210 40% 50%)"}[V.format]||"hsl(var(--primary))";return f.jsxs("g",{children:[f.jsx("circle",{cx:Pe,cy:Ue,r:4/s,fill:We,stroke:"hsl(var(--background))",strokeWidth:1/s,style:{pointerEvents:"none",filter:"drop-shadow(0 0 2px rgba(0,0,0,0.3))"},children:f.jsx("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"1s",repeatCount:"indefinite"})}),V.size>1e3&&f.jsx("text",{x:Pe,y:Ue-8/s,fill:We,fontSize:8/s,textAnchor:"middle",style:{pointerEvents:"none",userSelect:"none"},children:V.format})]},V.id||pe)}),f.jsx("path",{d:$,fill:"none",stroke:X,strokeWidth:Math.max(1,W/s),strokeLinecap:"round",markerEnd:g&&v&&(v.effectiveThroughput>0||v.traffic>0)?`url(#arrowhead-${l?"selected":v?.bottleneck?"bottleneck":"default"})`:l?"url(#arrowhead-selected)":"url(#arrowhead-default)",style:{transition:"stroke 0.3s, stroke-width 0.3s",pointerEvents:"none"}}),g&&v&&(v.effectiveThroughput>0||v.traffic>0)?f.jsxs("g",{children:[f.jsx("text",{x:(ue+D)/2,y:(z+L)/2-10/s,fill:"hsl(var(--primary))",fontSize:Math.max(8,11/s),textAnchor:"middle",fontWeight:"500",style:{pointerEvents:"none",userSelect:"none"},children:a.label||`${v.latency.toFixed(1)}ms`}),f.jsx("text",{x:(ue+D)/2,y:(z+L)/2+8/s,fill:"hsl(var(--muted-foreground))",fontSize:Math.max(7,9/s),textAnchor:"middle",style:{pointerEvents:"none",userSelect:"none"},children:v.traffic>0?`${v.traffic.toFixed(1)} KB/s`:`${v.effectiveThroughput.toFixed(0)} msg/s`}),a.data?.bandwidthMbps&&v.traffic>0&&f.jsxs("text",{x:(ue+D)/2,y:(z+L)/2+20/s,fill:"hsl(var(--muted-foreground))",fontSize:Math.max(6,8/s),textAnchor:"middle",style:{pointerEvents:"none",userSelect:"none",opacity:.7},children:["Limit: ",a.data.bandwidthMbps,"Mbps"]})]}):a.label?f.jsx("g",{children:f.jsx("text",{x:(ue+D)/2,y:(z+L)/2-10/s,fill:"hsl(var(--primary))",fontSize:Math.max(8,11/s),textAnchor:"middle",fontWeight:"500",style:{pointerEvents:"none",userSelect:"none"},children:a.label})}):null]})}const p3=x.memo(h3,(a,t)=>!(a.connection.id!==t.connection.id||a.connection.sourcePort!==t.connection.sourcePort||a.connection.targetPort!==t.connection.targetPort||a.connection.label!==t.connection.label||a.sourceNode.id!==t.sourceNode.id||a.sourceNode.position.x!==t.sourceNode.position.x||a.sourceNode.position.y!==t.sourceNode.position.y||a.targetNode.id!==t.targetNode.id||a.targetNode.position.x!==t.targetNode.position.x||a.targetNode.position.y!==t.targetNode.position.y||a.zoom!==t.zoom||a.pan.x!==t.pan.x||a.pan.y!==t.pan.y||a.isSelected!==t.isSelected||a.onClick!==t.onClick||a.onContextMenu!==t.onContextMenu)),g3=140,m3=140,y3=16;function v3({nodeId:a,position:t}){const n=jt(g=>g.componentMetrics.get(a)),{connections:s}=Re(),{isRunning:r}=jt(),l=s.some(g=>g.source===a||g.target===a),c=n&&(n.throughput&&n.throughput>.1||n.errorRate&&n.errorRate>.001||n.utilization&&n.utilization>.01),d=x.useMemo(()=>{if(!n)return[];const g=[{label:"Throughput",value:`${Math.round(n.throughput)}`,unit:"ops/s",color:"text-blue-400"},{label:"Latency (avg)",value:`${Math.round(n.latency)}`,unit:"ms",color:"text-yellow-400"}];return n.latencyP50!==void 0&&g.push({label:"Latency (p50)",value:`${Math.round(n.latencyP50)}`,unit:"ms",color:"text-green-400"}),n.latencyP99!==void 0&&g.push({label:"Latency (p99)",value:`${Math.round(n.latencyP99)}`,unit:"ms",color:"text-red-400"}),g.push({label:"Error Rate",value:`${(n.errorRate*100).toFixed(2)}`,unit:"%",color:"text-orange-400"},{label:"Utilization",value:`${Math.round(n.utilization*100)}`,unit:"%",color:"text-purple-400"}),g},[n]);if(!r||!n||!l||!c||d.length===0)return null;const h=t.x+g3/2,p=t.y+m3+y3;return f.jsx("div",{className:"absolute pointer-events-none",style:{left:`${h}px`,top:`${p}px`,transform:"translateX(-50%)",zIndex:10},children:f.jsx("div",{className:"bg-slate-900 border border-slate-700 rounded-lg p-2 shadow-lg min-w-max",children:f.jsx("div",{className:"text-xs space-y-1",children:d.map(g=>f.jsxs("div",{className:"flex items-center justify-between gap-3",children:[f.jsxs("span",{className:"text-slate-400",children:[g.label,":"]}),f.jsxs("span",{className:`font-mono font-semibold ${g.color}`,children:[g.value," ",g.unit]})]},g.label))})})})}function b3({isVisible:a=!0}){return a?f.jsx("div",{className:"absolute bottom-4 right-4 bg-card/95 backdrop-blur-sm border border-border rounded-md p-2 z-10 pointer-events-none",children:f.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-muted-foreground",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-green-500/20 border border-green-500/30"}),f.jsx("span",{children:"<20%"})]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500/20 border border-yellow-500/30"}),f.jsx("span",{children:"20-40%"})]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-orange-500/20 border border-orange-500/30"}),f.jsx("span",{children:"40-60%"})]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-red-500/20 border border-red-500/30"}),f.jsx("span",{children:">60%"})]})]})}):null}function x3({isVisible:a=!0}){const{nodes:t,connections:n,zoom:s,pan:r}=Re(),{isRunning:l}=jt(),c=Et.useMemo(()=>{if(t.length===0)return{minX:0,minY:0,maxX:2e3,maxY:2e3};const j=t.map(q=>q.position.x),N=t.map(q=>q.position.y),T=Math.min(...j)-200,k=Math.min(...N)-200,U=Math.max(...j)+200,I=Math.max(...N)+200;return{minX:T,minY:k,maxX:U,maxY:I}},[t]),d=c.maxX-c.minX,h=c.maxY-c.minY,p=120,g=80,m=p/Math.max(d,1e3),v=g/Math.max(h,1e3),w=Math.min(m,v),S=window.innerWidth/s*w,C=window.innerHeight/s*w,R=(-r.x/s-c.minX)*w,E=(-r.y/s-c.minY)*w;return a?f.jsx("div",{className:"absolute bottom-4 left-4 bg-card/95 backdrop-blur-sm border border-border rounded-md p-2 z-10 pointer-events-none",children:f.jsxs("svg",{width:p,height:g,className:"border border-border/50 rounded",style:{background:"hsl(var(--background))"},children:[n.map(j=>{const N=t.find(te=>te.id===j.source),T=t.find(te=>te.id===j.target);if(!N||!T)return null;const k=(N.position.x-c.minX)*w,U=(N.position.y-c.minY)*w,I=(T.position.x-c.minX)*w,q=(T.position.y-c.minY)*w;return f.jsx("line",{x1:k,y1:U,x2:I,y2:q,stroke:"hsl(var(--border))",strokeWidth:.3,opacity:.2},j.id)}),t.map(j=>f.jsx("circle",{cx:(j.position.x-c.minX)*w,cy:(j.position.y-c.minY)*w,r:1.5,fill:"hsl(var(--muted-foreground))",opacity:.5},j.id)),f.jsx("rect",{x:R,y:E,width:S,height:C,fill:"hsl(var(--primary))",fillOpacity:.2,stroke:"hsl(var(--primary))",strokeWidth:1.5,strokeDasharray:"2 2"})]})}):null}function w3({x:a,y:t,onDelete:n,onRename:s,onCopyId:r,onClose:l}){const c=x.useRef(null),[d,h]=x.useState({x:a,y:t});return x.useEffect(()=>{if(c.current){const p=c.current.getBoundingClientRect(),g=window.innerWidth,m=window.innerHeight;let v=a,w=t;a+p.width>g&&(v=g-p.width-10),t+p.height>m&&(w=m-p.height-10),v=Math.max(10,v),w=Math.max(10,w),h({x:v,y:w})}},[a,t]),x.useEffect(()=>{const p=m=>{c.current&&!c.current.contains(m.target)&&l()},g=m=>{m.key==="Escape"&&l()};return document.addEventListener("mousedown",p),document.addEventListener("keydown",g),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("keydown",g)}},[l]),f.jsxs("div",{ref:c,className:"fixed bg-popover border border-border rounded-md shadow-lg z-50 py-0.5 min-w-[120px]",style:{left:`${d.x}px`,top:`${d.y}px`},children:[f.jsxs("button",{onClick:()=>{s(),l()},className:"w-full px-2 py-1 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(vA,{className:"w-3.5 h-3.5"}),"Rename"]}),f.jsxs("button",{onClick:()=>{r(),l()},className:"w-full px-2 py-1 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(lb,{className:"w-3.5 h-3.5"}),"Copy ID"]}),f.jsx("div",{className:"border-t border-border my-0.5"}),f.jsxs("button",{onClick:()=>{n(),l()},className:"w-full px-2.5 py-1.5 text-xs text-destructive hover:bg-destructive hover:text-destructive-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(Hh,{className:"w-3.5 h-3.5"}),"Delete"]})]})}const C3=140,S3=100;function M3(a,t,n){const s=n(a);if(!s)return{width:C3,height:S3};const c=(s.querySelector(".bg-card")||s).getBoundingClientRect();return{width:c.width/t,height:c.height/t}}function E3(a,t){const{getNodeRef:n}=Cu(),{observe:s}=BC(),[r,l]=x.useState({}),c=x.useCallback(()=>{const d={};a.forEach(h=>{const p=M3(h,t,n);p&&(d[h]=p)}),l(h=>({...h,...d}))},[a,t,n]);return x.useEffect(()=>{if(a.length===0)return;c();const d=[];return a.forEach(h=>{const p=n(h);if(p){const m=p.querySelector(".bg-card")||p;if(m){const v=s(m,c);d.push(v)}}}),()=>{d.forEach(h=>h())}},[a,t,c,n,s]),r}const sh=20,R3=140,N3=100,A3=18,T3=6,j3=A3+T3*2;function k3(a,t,n,s){return x.useMemo(()=>{const r=t.filter(v=>a.nodeIds.includes(v.id));if(r.length===0)return null;const l=sh,c=sh,d=a.showName!==!1?j3:sh;let h=1/0,p=1/0,g=-1/0,m=-1/0;return r.forEach(v=>{const w=n[v.id]||{width:R3,height:N3},S=v.position.x,C=v.position.y,R=S+w.width,E=C+w.height;h=Math.min(h,S),p=Math.min(p,C),g=Math.max(g,R),m=Math.max(m,E)}),{x:h-l,y:p-d,width:g-h+l*2,height:m-p+d+c}},[t,a.nodeIds,n,s,a.showName])}function D3(a,t){const{nodes:n,updateNodes:s}=Re(),[r,l]=x.useState(!1),c=x.useRef({x:0,y:0}),d=x.useRef({}),h=x.useCallback(p=>{if(p.button!==0||p.target.closest("[data-node-id]"))return;p.stopPropagation();const v=Re.getState();v.selectGroup(a.id),l(!0),c.current.x=p.clientX,c.current.y=p.clientY,v.setGroupDragging(!0);const w=n.filter(S=>a.nodeIds.includes(S.id));d.current={},w.forEach(S=>{d.current[S.id]={...S.position}})},[a.id,a.nodeIds,n]);return x.useEffect(()=>{if(!r)return;let p=null,g=null,m=!0;const v=S=>{if(!m)return;const C=(S.clientX-c.current.x)/t,R=(S.clientY-c.current.y)/t;g={dx:C,dy:R},p===null&&(p=requestAnimationFrame(()=>{if(!m||!g){p=null,g=null;return}const{dx:E,dy:j}=g,N=Re.getState(),T=a.nodeIds.map(k=>{const U=d.current[k];return U?{id:k,updates:{position:{x:U.x+E,y:U.y+j}}}:null}).filter(k=>k!==null);T.length>0&&N.updateNodes(T,!0),p=null,g=null}))},w=S=>{if(S&&S.button!==0)return;m=!1,p!==null&&(cancelAnimationFrame(p),p=null);const C=Re.getState();if(g){const{dx:R,dy:E}=g,j=a.nodeIds.map(N=>{const T=d.current[N];return T?{id:N,updates:{position:{x:T.x+R,y:T.y+E}}}:null}).filter(N=>N!==null);if(C.setGroupDragging(!1),j.length>0){C.updateNodes(j,!0);const N=Re.getState();ht(N,N.diagramName)}}else C.setGroupDragging(!1);g=null,l(!1)};return document.addEventListener("mousemove",v,{passive:!0}),document.addEventListener("mouseup",w,{capture:!0}),()=>{m=!1,p!==null&&cancelAnimationFrame(p),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",w,{capture:!0}),Re.getState().setGroupDragging(!1)}},[r,a.nodeIds,t]),{isDragging:r,handleMouseDown:h}}const A0=18,pc=6;function _3({group:a,zoom:t}){const{nodes:n,selectedGroupId:s,selectGroup:r,deleteGroup:l,updateGroup:c}=Re(),[d,h]=x.useState(null),[p,g]=x.useState(!1),[m,v]=x.useState(!1),w=E3(a.nodeIds,t),S=k3(a,n,w,t),{handleMouseDown:C}=D3(a,t);if(!S)return null;const R=s===a.id,E=a.color||"hsl(var(--primary))",j=q=>{q.preventDefault(),q.stopPropagation(),r(a.id),h({x:q.clientX,y:q.clientY})},N=()=>{g(!0)},T=()=>{l(a.id),Ke.success("Group deleted"),g(!1)},k=()=>{v(!0)},U=q=>{c(a.id,{name:q}),Ke.success("Group renamed"),v(!1)},I=()=>{navigator.clipboard.writeText(a.id),Ke.success("Group ID copied to clipboard")};return f.jsxs(f.Fragment,{children:[f.jsxs("g",{children:[f.jsx("rect",{x:S.x,y:S.y,width:S.width,height:S.height,fill:E,fillOpacity:R?.1:.05,stroke:E,strokeWidth:R?3/t:2/t,strokeDasharray:R?"0":"5,5",rx:8/t,ry:8/t,style:{cursor:"pointer",transition:"all 0.2s"},onMouseDown:C,onContextMenu:j}),a.showName!==!1&&f.jsxs("g",{onClick:q=>{q.stopPropagation(),r(a.id)},onContextMenu:j,style:{cursor:"pointer"},children:[f.jsx("rect",{x:S.x+pc,y:S.y+pc,width:Math.max(80,a.name.length*6.5+16),height:A0,fill:E,fillOpacity:.85,rx:3,ry:3,stroke:E,strokeWidth:.5}),f.jsx("text",{x:S.x+pc+8,y:S.y+pc+A0/2,fill:"white",fontSize:11,fontWeight:"600",dominantBaseline:"middle",style:{pointerEvents:"none",userSelect:"none"},children:a.name})]})]}),d&&f.jsx(w3,{x:d.x,y:d.y,onDelete:N,onRename:k,onCopyId:I,onClose:()=>h(null)}),f.jsx(IC,{open:p,groupName:a.name,onConfirm:T,onCancel:()=>g(!1)}),f.jsx(ap,{open:m,initialName:a.name,onConfirm:U,onCancel:()=>v(!1)})]})}const z3=x.memo(_3,(a,t)=>!(a.group.id!==t.group.id||a.group.name!==t.group.name||a.group.color!==t.group.color||a.group.nodeIds.length!==t.group.nodeIds.length||a.group.nodeIds.some((n,s)=>n!==t.group.nodeIds[s])||a.zoom!==t.zoom));function O3({isVisible:a,canvasRef:t}){const{zoom:n,pan:s}=Re(),[r,l]=x.useState(null),c=x.useRef(null);if(x.useEffect(()=>{if(!a){l(null);return}const k=()=>{if(t?.current)l(t.current.getBoundingClientRect());else if(c.current?.parentElement){const se=c.current.parentElement.getBoundingClientRect(),le=24;l({...se,width:se.width-le,height:se.height-le,left:se.left+le,top:se.top+le})}},U=setTimeout(k,10),I=requestAnimationFrame(k),q=requestAnimationFrame(()=>{requestAnimationFrame(k)});return window.addEventListener("resize",k),()=>{clearTimeout(U),cancelAnimationFrame(I),cancelAnimationFrame(q),window.removeEventListener("resize",k)}},[a,t]),x.useEffect(()=>{if(!a)return;const U=requestAnimationFrame(()=>{t?.current&&l(t.current.getBoundingClientRect())});return()=>cancelAnimationFrame(U)},[n,s,a,t]),!a)return null;if(!r)return f.jsx("div",{ref:c,className:"absolute inset-0 pointer-events-none z-20"});const d=20,h=d*n;let p=1;h<10?p=10:h<20?p=5:h<40&&(p=2);const g=d*p,m=24,v=24,w=r.width,S=r.height,C=Math.floor(-s.x/n/g)*g,R=Math.floor(-s.y/n/g)*g,E=C+w/n+g*2,j=R+S/n+g*2,N=[];for(let k=C;k<=E;k+=g)N.push(k);const T=[];for(let k=R;k<=j;k+=g)T.push(k);return f.jsxs("div",{ref:c,className:"absolute inset-0 pointer-events-none z-20",children:[f.jsx("div",{className:"absolute bg-card/90 backdrop-blur-sm border-b border-border pointer-events-none",style:{top:0,left:`${m}px`,right:0,height:`${v}px`,transform:`translate(${s.x}px, 0) scale(${n})`,transformOrigin:"0 0"},children:N.map(k=>f.jsx("div",{className:"absolute top-0 bottom-0 border-l border-border/60",style:{left:`${k}px`,width:"1px"},children:f.jsx("span",{className:"absolute top-0.5 left-1 text-[10px] text-muted-foreground font-mono whitespace-nowrap",style:{transform:`scale(${1/n})`,transformOrigin:"0 0"},children:k})},`h-${k}`))}),f.jsx("div",{className:"absolute bg-card/90 backdrop-blur-sm border-r border-border pointer-events-none",style:{top:`${v}px`,left:0,bottom:0,width:`${m}px`,transform:`translate(0, ${s.y}px) scale(${n})`,transformOrigin:"0 0"},children:T.map(k=>f.jsx("div",{className:"absolute left-0 right-0 border-t border-border/60",style:{top:`${k}px`,height:"1px"},children:f.jsx("span",{className:"absolute left-0.5 top-1 text-[10px] text-muted-foreground font-mono whitespace-nowrap",style:{transform:`scale(${1/n})`,transformOrigin:"0 0"},children:k})},`v-${k}`))}),f.jsx("div",{className:"absolute bg-card/90 backdrop-blur-sm border-b border-r border-border pointer-events-none",style:{top:0,left:0,width:`${m}px`,height:`${v}px`}})]})}function L3({x:a,y:t,onDelete:n,onDuplicate:s,onCopyId:r,onBringToFront:l,onSendToBack:c,onBringForward:d,onSendBackward:h,onAddToGroup:p,onRemoveFromGroup:g,onClose:m}){const v=x.useRef(null);x.useEffect(()=>{const U=q=>{v.current&&!v.current.contains(q.target)&&m()},I=q=>{q.key==="Escape"&&m()};return document.addEventListener("mousedown",U),document.addEventListener("keydown",I),()=>{document.removeEventListener("mousedown",U),document.removeEventListener("keydown",I)}},[m]);const w=()=>{n(),m()},S=()=>{s(),m()},C=()=>{r(),m()},R=()=>{l?.(),m()},E=()=>{c?.(),m()},j=()=>{d?.(),m()},N=()=>{h?.(),m()},T=()=>{p?.(),m()},k=()=>{g?.(),m()};return f.jsxs("div",{ref:v,className:"fixed bg-popover border border-border rounded-md shadow-lg z-50 py-0.5 min-w-[140px]",style:{left:`${a}px`,top:`${t}px`},children:[f.jsxs("button",{onClick:S,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(cb,{className:"w-3.5 h-3.5"}),"Duplicate"]}),f.jsxs("button",{onClick:C,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(lb,{className:"w-3.5 h-3.5"}),"Copy ID"]}),(p||g)&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"border-t border-border my-0.5"}),g&&f.jsxs("button",{onClick:k,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(z2,{className:"w-3.5 h-3.5"}),"Remove from Group"]}),p&&f.jsxs("button",{onClick:T,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(lh,{className:"w-3.5 h-3.5"}),"Add to Group"]})]}),f.jsx("div",{className:"border-t border-border my-0.5"}),(l||c||d||h)&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:R,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(g2,{className:"w-3.5 h-3.5"}),"Bring to Front"]}),f.jsxs("button",{onClick:E,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(d2,{className:"w-3.5 h-3.5"}),"Send to Back"]}),f.jsxs("button",{onClick:j,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(ib,{className:"w-3.5 h-3.5"}),"Bring Forward"]}),f.jsxs("button",{onClick:N,className:"w-full px-2 py-1.5 text-xs text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(Hc,{className:"w-3.5 h-3.5"}),"Send Backward"]}),f.jsx("div",{className:"border-t border-border my-0.5"})]}),f.jsxs("button",{onClick:w,className:"w-full px-2.5 py-1.5 text-xs text-destructive hover:bg-destructive hover:text-destructive-foreground flex items-center gap-1.5 transition-colors",children:[f.jsx(Hh,{className:"w-3.5 h-3.5"}),"Delete"]})]})}function P3({nodeId:a,x:t,y:n,onClose:s}){const r=x.useRef(null),{groups:l,addNodeToGroup:c}=Re();return x.useEffect(()=>{const d=p=>{r.current&&!r.current.contains(p.target)&&s()},h=p=>{p.key==="Escape"&&s()};return document.addEventListener("mousedown",d),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("keydown",h)}},[s]),f.jsxs("div",{ref:r,className:"fixed bg-popover border border-border rounded-md shadow-lg z-50 py-1 min-w-[180px]",style:{left:`${t}px`,top:`${n}px`},children:[f.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-b border-border",children:"Add to Group"}),f.jsx("div",{className:"max-h-60 overflow-y-auto",children:(()=>{const d=l.filter(h=>!h.nodeIds.includes(a));return d.length>0?d.map(h=>f.jsxs("button",{onClick:()=>{c(h.id,a),Ke.success(`Added to "${h.name}"`),s()},className:"w-full px-2 py-1.5 text-xs text-left text-foreground hover:bg-accent hover:text-accent-foreground flex items-center gap-2 transition-colors",children:[f.jsx("div",{className:"w-3 h-3 rounded border border-border flex-shrink-0",style:{backgroundColor:h.color||"hsl(var(--primary))"}}),f.jsx("span",{className:"truncate flex-1",children:h.name})]},h.id)):f.jsx("div",{className:"px-2 py-4 text-xs text-muted-foreground text-center",children:l.length===0?"No groups available":"Already in all groups"})})()}),f.jsx("div",{className:"border-t border-border mt-1",children:f.jsx("button",{onClick:s,className:"w-full px-2 py-1.5 text-xs text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors",children:"Cancel"})})]})}function I3({nodeId:a,x:t,y:n,onClose:s}){const r=x.useRef(null),{groups:l,removeNodeFromGroup:c}=Re(),d=l.filter(h=>h.nodeIds.includes(a));return x.useEffect(()=>{const h=g=>{r.current&&!r.current.contains(g.target)&&s()},p=g=>{g.key==="Escape"&&s()};return document.addEventListener("mousedown",h),document.addEventListener("keydown",p),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",p)}},[s]),f.jsxs("div",{ref:r,className:"fixed bg-popover border border-border rounded-md shadow-lg z-50 py-1 min-w-[180px]",style:{left:`${t}px`,top:`${n}px`},children:[f.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-b border-border",children:"Remove from Group"}),f.jsx("div",{className:"max-h-60 overflow-y-auto",children:d.length>0?d.map(h=>f.jsxs("button",{onClick:()=>{c(h.id,a),Ke.success(`Removed from "${h.name}"`),s()},className:"w-full px-2 py-1.5 text-xs text-left text-destructive hover:bg-destructive/10 hover:text-destructive flex items-center gap-2 transition-colors",children:[f.jsx("div",{className:"w-3 h-3 rounded border border-border flex-shrink-0",style:{backgroundColor:h.color||"hsl(var(--primary))"}}),f.jsx("span",{className:"truncate flex-1",children:h.name})]},h.id)):f.jsx("div",{className:"px-2 py-4 text-xs text-muted-foreground text-center",children:"Not in any groups"})}),f.jsx("div",{className:"border-t border-border mt-1",children:f.jsx("button",{onClick:s,className:"w-full px-2 py-1.5 text-xs text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors",children:"Cancel"})})]})}function q3({x:a,y:t,onDelete:n,onClose:s}){const r=x.useRef(null),[l,c]=x.useState({x:a,y:t});return x.useEffect(()=>{if(r.current){const d=r.current.getBoundingClientRect(),h=window.innerWidth,p=window.innerHeight;let g=a,m=t;a+d.width>h&&(g=h-d.width-8),t+d.height>p&&(m=p-d.height-8),g=Math.max(8,g),m=Math.max(8,m),c({x:g,y:m})}},[a,t]),x.useEffect(()=>{const d=p=>{r.current&&!r.current.contains(p.target)&&s()},h=p=>{p.key==="Escape"&&s()};return document.addEventListener("mousedown",d),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("keydown",h)}},[s]),f.jsx("div",{ref:r,className:"fixed bg-card border border-border rounded-md shadow-lg z-50",style:{left:`${l.x}px`,top:`${l.y}px`},children:f.jsx("button",{className:"w-full px-3 py-2 text-sm text-left hover:bg-accent transition-colors first:rounded-t-md last:rounded-b-md",onClick:n,children:"Delete"})})}function T0(){const a=x.useRef(null),{nodes:t,connections:n,groups:s=[],addNode:r,addConnection:l,deleteConnection:c,zoom:d,pan:h,setPan:p,setZoom:g,selectNode:m,selectConnection:v,selectGroup:w,selectNodesByIds:S,selectedConnectionId:C,selectedNodeId:R,setViewportSize:E,deleteNode:j,updateNode:N,bringToFront:T,sendToBack:k,bringForward:U,sendBackward:I,canvasBounds:q,canvasChunks:te,addNodeToGroup:se,removeNodeFromGroup:le}=Re(),{isRunning:ee}=jt(),{showMinimap:oe,showHeatMapLegend:ce,showRuler:ue}=zi(),{getNodeRef:z}=Cu(),[D,L]=x.useState(!1),[Y,he]=x.useState({x:0,y:0}),[_,$]=x.useState(!1),[X,W]=x.useState(null),[F,ae]=x.useState(void 0),[B,V]=x.useState(null),[pe,me]=x.useState(null),[ye,ve]=x.useState(null),[Pe,Ue]=x.useState(null),[st,We]=x.useState(null),[kt,de]=x.useState(null),[He,Be]=x.useState(null);x.useEffect(()=>{if(!a.current)return;const J=()=>{if(!a.current)return;const be=a.current.getBoundingClientRect();E({width:be.width,height:be.height})};J();const fe=new ResizeObserver(()=>{J()});return fe.observe(a.current),window.addEventListener("resize",J),()=>{fe.disconnect(),window.removeEventListener("resize",J)}},[E]),x.useEffect(()=>{const J=fe=>{if((fe.ctrlKey||fe.metaKey)&&a.current){const be=a.current.getBoundingClientRect();fe.clientX>=be.left&&fe.clientX<=be.right&&fe.clientY>=be.top&&fe.clientY<=be.bottom&&fe.preventDefault()}};return document.addEventListener("wheel",J,{passive:!1,capture:!0}),()=>{document.removeEventListener("wheel",J,{capture:!0})}},[]);const yt=J=>{if(J.preventDefault(),!a.current)return;const fe=J.dataTransfer.getData("application/json");if(!fe)return;const be=JSON.parse(fe),_e=a.current.getBoundingClientRect(),Oe=(J.clientX-_e.left-h.x)/d,lt=(J.clientY-_e.top-h.y)/d,zt={id:`node-${Date.now()}`,type:be.type,position:{x:Oe,y:lt},data:{label:be.label}};r(zt)},pt=J=>{J.preventDefault(),J.dataTransfer.dropEffect="copy"},qt=J=>{const fe=J.button===0;if(J.button===1||fe&&J.ctrlKey){L(!0),he({x:J.clientX-h.x,y:J.clientY-h.y}),J.preventDefault();return}if(fe&&!_&&!J.ctrlKey&&!J.metaKey){if(a.current){const _e=a.current.getBoundingClientRect(),Oe=(J.clientX-_e.left-h.x)/d,lt=(J.clientY-_e.top-h.y)/d;Ue({x:Oe,y:lt}),We({x:Oe,y:lt,width:0,height:0})}m(null),v(null),w(null)}},Ze=J=>{if(D)p({x:J.clientX-Y.x,y:J.clientY-Y.y});else if(_&&a.current){const fe=a.current.getBoundingClientRect();V({x:(J.clientX-fe.left-h.x)/d,y:(J.clientY-fe.top-h.y)/d})}else if(Pe&&a.current){const fe=a.current.getBoundingClientRect(),be=(J.clientX-fe.left-h.x)/d,_e=(J.clientY-fe.top-h.y)/d,Oe=Math.min(Pe.x,be),lt=Math.min(Pe.y,_e),zt=Math.abs(be-Pe.x),Wt=Math.abs(_e-Pe.y),Rt={x:Oe,y:lt,width:zt,height:Wt};We(Rt);const ln=t.filter(wt=>{const ot=wt.position.x,mt=wt.position.y,Ht=wt.position.x+140,is=wt.position.y+140;return Ht>=Rt.x&&ot<=Rt.x+Rt.width&&is>=Rt.y&&mt<=Rt.y+Rt.height}).map(wt=>wt.id);S(ln)}},Dt=()=>{L(!1),_&&($(!1),W(null),V(null)),Pe&&(Ue(null),We(null))},vt=x.useCallback((J,fe)=>{$(!0),W(J),ae(fe)},[]),gt=x.useCallback(J=>{const fe=z(J);if(!fe)return{width:140,height:100};const Oe=(fe.querySelector(".bg-card")||fe).getBoundingClientRect();return{width:Oe.width/d,height:Oe.height/d}},[z,d]),Yt=x.useCallback((J,fe)=>{if(_&&X&&X!==J){const be=t.find(Oe=>Oe.id===X),_e=t.find(Oe=>Oe.id===J);if(be&&_e){const Oe=gt(X),lt=gt(J),zt=B?.x??_e.position.x+lt.width/2,Wt=B?.y??_e.position.y+lt.height/2,Rt=be.position.x+Oe.width/2,ln=be.position.y+Oe.height/2,wt=F!==void 0?F:N0(X,J,zt,Wt,n,be.position.x,be.position.y,Oe.width,Oe.height),ot=fe!==void 0?fe:N0(J,X,Rt,ln,n,_e.position.x,_e.position.y,lt.width,lt.height),mt={id:`conn-${Date.now()}`,source:X,target:J,type:"async",sourcePort:wt,targetPort:ot};l(mt)}}$(!1),W(null),ae(void 0),V(null)},[_,X,F,t,n,l,B,gt]),Qt=x.useCallback(J=>{v(J)},[v]),Rs=x.useCallback((J,fe,be)=>{me({connectionId:J,x:fe,y:be})},[]),Yn=x.useCallback(J=>{const fe=J.target,be=fe.closest?.("[data-node-id]"),_e=fe.closest?.("[data-connection-id]"),Oe=fe instanceof SVGElement,lt=fe.closest?.("svg")!==null;if(be||_e||Oe||lt)return;const zt=t.filter(Wt=>Wt.selected);zt.length>0&&(J.preventDefault(),J.stopPropagation(),ve({nodeId:zt[0].id,x:J.clientX,y:J.clientY}))},[t]),jn=x.useCallback(()=>{pe&&(c(pe.connectionId),me(null))},[pe,c]),rs=x.useMemo(()=>t.map(J=>J.id).join(","),[t]),Xt=x.useMemo(()=>{const J=new Map;return t.forEach(fe=>{const be=fe.id;J.set(be,{onConnectionStart:_e=>vt(be,_e),onConnectionEnd:_e=>Yt(be,_e),onContextMenu:(_e,Oe)=>ve({nodeId:be,x:_e,y:Oe})})}),J},[rs,vt,Yt,t]),Ft=x.useMemo(()=>n.map(J=>J.id).join(","),[n]),_t=x.useMemo(()=>{const J=new Map;return n.forEach(fe=>{const be=fe.id;J.set(be,{onClick:()=>Qt(be),onContextMenu:_e=>Rs(be,_e.clientX,_e.clientY)})}),J},[Ft,Qt,Rs,n]),Bo=J=>{if(J.ctrlKey&&a.current){J.preventDefault();const{left:fe,top:be,width:_e,height:Oe}=a.current.getBoundingClientRect(),lt=J.clientX-fe,zt=J.clientY-be,Wt=(lt-h.x)/d,Rt=(zt-h.y)/d,ln=1+Math.min(Math.max(-J.deltaY/500,-.5),.5);let wt=d*ln;wt=Math.min(Math.max(wt,.3),2.5);const ot=lt-Wt*wt,mt=zt-Rt*wt;g(wt),p({x:ot,y:mt})}},kn=20,Gi=ue?24:0,Ns=2e3,$o=d<.5,ao=Re(J=>J.viewportWidth),Xn=Re(J=>J.viewportHeight),As=x.useMemo(()=>{if(ao===0||Xn===0)return t;const J=-h.x/d,fe=-h.y/d,be=(ao-h.x)/d,_e=(Xn-h.y)/d,Oe=200,lt=J-Oe,zt=fe-Oe,Wt=be+Oe,Rt=_e+Oe;return t.filter(ln=>{const wt=ln.position.x,ot=ln.position.y;return wt+140>=lt&&wt<=Wt&&ot+100>=zt&&ot<=Rt})},[t,d,h,ao,Xn]),Ts=x.useMemo(()=>new Set(As.map(J=>J.id)),[As]),Su=x.useMemo(()=>n.filter(J=>Ts.has(J.source)&&Ts.has(J.target)),[n,Ts]);return f.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[f.jsx(O3,{isVisible:ue,canvasRef:a}),f.jsx("div",{ref:a,className:"absolute overflow-hidden",style:{top:`${Gi}px`,left:`${Gi}px`,right:0,bottom:0,cursor:D?"grabbing":_?"crosshair":"default",backgroundColor:"hsl(var(--muted) / 0.1)"},onDrop:yt,onDragOver:pt,onMouseDown:qt,onMouseMove:Ze,onMouseUp:Dt,onMouseLeave:Dt,onWheel:Bo,onContextMenu:Yn,children:f.jsxs("div",{style:{transform:`translate(${h.x}px, ${h.y}px) scale(${d})`,transformOrigin:"0 0",width:"100%",height:"100%",position:"relative"},children:[te.map(J=>{const fe=J.x*Ns,be=J.y*Ns,_e=te.some(ot=>ot.x===J.x+1&&ot.y===J.y),Oe=te.some(ot=>ot.x===J.x&&ot.y===J.y+1),lt=h.x/d,zt=h.y/d,Wt=(-lt%kn+kn)%kn,Rt=(-zt%kn+kn)%kn,ln=fe%kn,wt=be%kn;return f.jsxs("div",{className:"absolute pointer-events-none",style:{left:`${fe}px`,top:`${be}px`,width:`${Ns}px`,height:`${Ns}px`,backgroundColor:"hsl(var(--canvas-bg))",backgroundImage:`
                  linear-gradient(hsl(var(--canvas-grid)) 1px, transparent 1px),
                  linear-gradient(90deg, hsl(var(--canvas-grid)) 1px, transparent 1px)
                `,backgroundSize:`${kn}px ${kn}px`,backgroundPosition:`${Wt+ln}px ${Rt+wt}px`,border:$o?"2px dashed hsl(var(--border) / 0.6)":"none",boxShadow:$o?"inset 0 0 0 1px hsl(var(--border) / 0.3)":"none"},children:[_e&&f.jsx("div",{className:"absolute top-0 bottom-0 pointer-events-none z-10",style:{right:0,width:"1px",backgroundColor:"hsl(var(--border) / 0.5)"}}),Oe&&f.jsx("div",{className:"absolute left-0 right-0 pointer-events-none z-10",style:{bottom:0,height:"1px",backgroundColor:"hsl(var(--border) / 0.5)"}})]},`chunk-${J.x}-${J.y}`)}),st&&f.jsx("div",{className:"absolute border-2 border-primary/60 bg-primary/10 pointer-events-none",style:{left:st.x,top:st.y,width:st.width,height:st.height}}),f.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"visible"},children:[f.jsxs("defs",{children:[f.jsx("marker",{id:"arrowhead-default",markerWidth:"8",markerHeight:"8",refX:"7",refY:"4",orient:"auto",markerUnits:"userSpaceOnUse",children:f.jsx("path",{d:"M0,0 L0,8 L8,4 z",fill:"hsl(var(--border))",stroke:"none"})}),f.jsx("marker",{id:"arrowhead-selected",markerWidth:"10",markerHeight:"10",refX:"8",refY:"5",orient:"auto",markerUnits:"userSpaceOnUse",children:f.jsx("path",{d:"M0,0 L0,10 L10,5 z",fill:"hsl(var(--primary))",stroke:"none"})}),f.jsx("marker",{id:"arrowhead-bottleneck",markerWidth:"12",markerHeight:"12",refX:"10",refY:"6",orient:"auto",markerUnits:"userSpaceOnUse",children:f.jsx("path",{d:"M0,0 L0,12 L12,6 z",fill:"hsl(0 84% 60%)",stroke:"none"})})]}),s&&s.length>0&&f.jsx("g",{style:{pointerEvents:"auto"},children:s.map(J=>f.jsx(z3,{group:J,zoom:d},J.id))}),f.jsxs("g",{style:{pointerEvents:"auto"},children:[Su.map(J=>{const fe=t.find(Oe=>Oe.id===J.source),be=t.find(Oe=>Oe.id===J.target);if(!fe||!be)return null;const _e=_t.get(J.id);return _e?f.jsx(p3,{connection:J,sourceNode:fe,targetNode:be,zoom:d,pan:h,isSelected:C===J.id,onClick:_e.onClick,onContextMenu:_e.onContextMenu},J.id):null}),_&&X&&B&&(()=>{const J=t.find(Oe=>Oe.id===X);if(!J)return null;const fe=gt(X);let be,_e;if(F!==void 0){const lt=vr(J.position.x,J.position.y,fe.width,fe.height,16)[F];be=lt.x,_e=lt.y}else be=J.position.x+fe.width/2,_e=J.position.y+fe.height/2;return f.jsx("line",{x1:be,y1:_e,x2:B.x,y2:B.y,stroke:"hsl(var(--primary))",strokeWidth:2/d,strokeDasharray:"5,5",style:{pointerEvents:"none"}})})()]})]}),As.map(J=>{const fe=Xt.get(J.id);return fe?f.jsx(c3,{node:J,onConnectionStart:fe.onConnectionStart,onConnectionEnd:fe.onConnectionEnd,isConnecting:_,onContextMenu:fe.onContextMenu},J.id):null}),ee&&As.map(J=>f.jsx(v3,{nodeId:J.id,position:J.position},`metrics-${J.id}`))]})}),f.jsx(b3,{isVisible:ce}),f.jsx(x3,{isVisible:oe}),f.jsx(u3,{selectedNodeId:R,highlightPath:!0}),pe&&f.jsx(q3,{x:pe.x,y:pe.y,onDelete:jn,onClose:()=>me(null)}),ye&&(()=>{const J=t.find($e=>$e.id===ye.nodeId);if(!J)return null;const fe=t.filter($e=>$e.selected),be=fe.length>1,_e=()=>{be?(fe.forEach($e=>{j($e.id)}),Ke.success(`${fe.length} elements deleted`)):(j(J.id),Ke.success("Element deleted")),ve(null)},Oe=()=>{if(be)fe.forEach(($e,Dn)=>{const Go={...hc($e),id:`${$e.type}_${Date.now()}_${Dn}`,position:{x:$e.position.x+20+Dn*10,y:$e.position.y+20+Dn*10},selected:!1};Go.data?.config&&(Go.data.config=hc(Go.data.config)),r(Go)}),Ke.success(`${fe.length} elements duplicated`);else{const $e={...hc(J),id:`${J.type}_${Date.now()}`,position:{x:J.position.x+20,y:J.position.y+20},selected:!1};$e.data?.config&&($e.data.config=hc($e.data.config)),r($e),Ke.success("Element duplicated")}ve(null)},lt=()=>{if(be){const $e=fe.map(Dn=>Dn.id).join(", ");navigator.clipboard.writeText($e),Ke.success(`${fe.length} IDs copied to clipboard`)}else navigator.clipboard.writeText(J.id),Ke.success("ID copied to clipboard");ve(null)},zt=()=>{be?(fe.forEach($e=>{T($e.id)}),Ke.success(`${fe.length} elements brought to front`)):(T(J.id),Ke.success("Brought to front")),ve(null)},Wt=()=>{be?(fe.forEach($e=>{k($e.id)}),Ke.success(`${fe.length} elements sent to back`)):(k(J.id),Ke.success("Sent to back")),ve(null)},Rt=()=>{be?(fe.forEach($e=>{U($e.id)}),Ke.success(`${fe.length} elements brought forward`)):(U(J.id),Ke.success("Brought forward")),ve(null)},ln=()=>{be?(fe.forEach($e=>{I($e.id)}),Ke.success(`${fe.length} elements sent backward`)):(I(J.id),Ke.success("Sent backward")),ve(null)},wt=()=>{de(be?{nodeId:fe[0].id,x:ye.x,y:ye.y}:{nodeId:J.id,x:ye.x,y:ye.y}),ve(null)},ot=be?s.filter($e=>fe.some(Dn=>$e.nodeIds.includes(Dn.id))):s.filter($e=>$e.nodeIds.includes(J.id)),mt=ot.length>=1,Ht=ot.length>=2,is=()=>{if(be){let $e=0;fe.forEach(Dn=>{s.filter(xa=>xa.nodeIds.includes(Dn.id)).forEach(xa=>{le(xa.id,Dn.id),$e++})}),$e>0&&Ke.success(`Removed ${fe.length} elements from groups`),ve(null)}else Ht?(Be({nodeId:J.id,x:ye.x,y:ye.y}),ve(null)):ot.length===1&&(le(ot[0].id,J.id),Ke.success(`Removed from "${ot[0].name}"`),ve(null))};return f.jsx(L3,{x:ye.x,y:ye.y,onDelete:_e,onDuplicate:Oe,onCopyId:lt,onBringToFront:zt,onSendToBack:Wt,onBringForward:Rt,onSendBackward:ln,onAddToGroup:wt,onRemoveFromGroup:mt?is:void 0,onClose:()=>ve(null)})})(),kt&&f.jsx(P3,{nodeId:kt.nodeId,x:kt.x,y:kt.y,onClose:()=>de(null)}),He&&f.jsx(I3,{nodeId:He.nodeId,x:He.x,y:He.y,onClose:()=>Be(null)})]})}const H3="modulepreload",U3=function(a){return"/"+a},j0={},Se=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");r=h(n.map(p=>{if(p=U3(p),p in j0)return;j0[p]=!0;const g=p.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":H3,g||(v.as="script"),v.crossOrigin="",v.href=p,d&&v.setAttribute("nonce",d),document.head.appendChild(v),g)return new Promise((w,S)=>{v.addEventListener("load",w),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return r.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return t().catch(l)})},B3=x.lazy(()=>Se(()=>import("./KafkaConfigAdvanced-Dvys2bqs.js"),__vite__mapDeps([0,1,2,3,4,5])).then(a=>({default:a.KafkaConfigAdvanced}))),$3=x.lazy(()=>Se(()=>import("./RabbitMQConfigAdvanced-C_ZnryOu.js"),__vite__mapDeps([6,1,7,8,9,10,11,12,5,3])).then(a=>({default:a.RabbitMQConfigAdvanced}))),G3=x.lazy(()=>Se(()=>import("./PostgreSQLConfigAdvanced-CNrQTAeD.js"),__vite__mapDeps([13,2,7,9,8,3,14,4,12])).then(a=>({default:a.PostgreSQLConfigAdvanced}))),Q3=x.lazy(()=>Se(()=>import("./MongoDBConfigAdvanced-B3_vac9_.js"),__vite__mapDeps([15,2,7,9,8,3])).then(a=>({default:a.MongoDBConfigAdvanced}))),F3=x.lazy(()=>Se(()=>import("./RedisConfigAdvanced-DtEZ_xvm.js"),__vite__mapDeps([16,2,9,8,3,12])).then(a=>({default:a.RedisConfigAdvanced}))),V3=x.lazy(()=>Se(()=>import("./ElasticsearchConfigAdvanced-BlZBHRHg.js"),__vite__mapDeps([17,2,18,19,20,3,5])).then(a=>({default:a.ElasticsearchConfigAdvanced}))),K3=x.lazy(()=>Se(()=>import("./CassandraConfigAdvanced-C-5EazNN.js"),__vite__mapDeps([21,1,2,9,3,14,20])).then(a=>({default:a.CassandraConfigAdvanced}))),Y3=x.lazy(()=>Se(()=>import("./ClickHouseConfigAdvanced-EJ9aFnjy.js"),__vite__mapDeps([22,2,1,7,8,9,23,3,20])).then(a=>({default:a.ClickHouseConfigAdvanced}))),X3=x.lazy(()=>Se(()=>import("./SnowflakeConfigAdvanced-BK-bLb0G.js"),__vite__mapDeps([24,2,18,19,3,12])).then(a=>({default:a.SnowflakeConfigAdvanced}))),W3=x.lazy(()=>Se(()=>import("./S3DataLakeConfigAdvanced-CymRnnHw.js"),__vite__mapDeps([25,18,19,12,26])).then(a=>({default:a.S3DataLakeConfigAdvanced}))),Z3=x.lazy(()=>Se(()=>import("./NginxConfigAdvanced-BlRcmvxr.js"),__vite__mapDeps([27,2,28,29,11,5])).then(a=>({default:a.NginxConfigAdvanced}))),J3=x.lazy(()=>Se(()=>import("./RestApiConfigAdvanced-BeGsAyne.js"),__vite__mapDeps([30,2,28,20])).then(a=>({default:a.RestApiConfigAdvanced}))),eO=x.lazy(()=>Se(()=>import("./GRPCConfigAdvanced-I91ORDdx.js"),__vite__mapDeps([31,2,18,29,32])).then(a=>({default:a.GRPCConfigAdvanced}))),tO=x.lazy(()=>Se(()=>import("./WebSocketConfigAdvanced-CAtiYcXi.js"),__vite__mapDeps([33,2,18,10,34,32])).then(a=>({default:a.WebSocketConfigAdvanced}))),nO=x.lazy(()=>Se(()=>import("./GraphQLConfigAdvanced-DkY7yHbv.js"),__vite__mapDeps([35,2,18,3,20,32])).then(a=>({default:a.GraphQLConfigAdvanced}))),sO=x.lazy(()=>Se(()=>import("./SOAPConfigAdvanced-DErt3G0U.js"),__vite__mapDeps([36,2,18,29,32])).then(a=>({default:a.SOAPConfigAdvanced}))),oO=x.lazy(()=>Se(()=>import("./WebhookConfigAdvanced-UenIzdAP.js"),__vite__mapDeps([37,18,38,34,32,39])).then(a=>({default:a.WebhookConfigAdvanced}))),aO=x.lazy(()=>Se(()=>import("./DockerK8sConfigAdvanced-BM2-QZlZ.js"),__vite__mapDeps([40,2,1])).then(a=>({default:a.DockerK8sConfigAdvanced}))),rO=x.lazy(()=>Se(()=>import("./HAProxyConfigAdvanced-C5RLssIJ.js"),__vite__mapDeps([41,18,42,32,29,5])).then(a=>({default:a.HAProxyConfigAdvanced}))),iO=x.lazy(()=>Se(()=>import("./TraefikConfigAdvanced-4_rJVCQz.js"),__vite__mapDeps([43,18,44,32,5])).then(a=>({default:a.TraefikConfigAdvanced}))),lO=x.lazy(()=>Se(()=>import("./EnvoyConfigAdvanced-p9I53Toe.js"),__vite__mapDeps([45,18,28,29,32])).then(a=>({default:a.EnvoyConfigAdvanced}))),cO=x.lazy(()=>Se(()=>import("./ActiveMQConfigAdvanced-Y0uhxPng.js"),__vite__mapDeps([46,1,47,18,10,3,4,5])).then(a=>({default:a.ActiveMQConfigAdvanced}))),uO=x.lazy(()=>Se(()=>import("./AWSSQSConfigAdvanced-CdOZWyca.js"),__vite__mapDeps([48,1,18,19,10,12,5,34])).then(a=>({default:a.AWSSQSConfigAdvanced}))),dO=x.lazy(()=>Se(()=>import("./AzureServiceBusConfigAdvanced-DHXeiD0G.js"),__vite__mapDeps([49,2,10,12])).then(a=>({default:a.AzureServiceBusConfigAdvanced}))),fO=x.lazy(()=>Se(()=>import("./GCPPubSubConfigAdvanced-CApPyGyK.js"),__vite__mapDeps([50,2,10,4,12])).then(a=>({default:a.GCPPubSubConfigAdvanced}))),hO=x.lazy(()=>Se(()=>import("./KongConfigAdvanced-D7O_k2p1.js"),__vite__mapDeps([51,2,9,29,44,4])).then(a=>({default:a.KongConfigAdvanced}))),pO=x.lazy(()=>Se(()=>import("./ApigeeConfigAdvanced-B44FO1S3.js"),__vite__mapDeps([52,1,5])).then(a=>({default:a.ApigeeConfigAdvanced}))),gO=x.lazy(()=>Se(()=>import("./MuleSoftConfigAdvanced-CsvROC4R.js"),__vite__mapDeps([53,1,3,32])).then(a=>({default:a.MuleSoftConfigAdvanced}))),mO=x.lazy(()=>Se(()=>import("./GraphQLGatewayConfigAdvanced-COLy0uoc.js"),__vite__mapDeps([54,32,28])).then(a=>({default:a.GraphQLGatewayConfigAdvanced}))),yO=x.lazy(()=>Se(()=>import("./BFFServiceConfigAdvanced-DpxRkdkv.js"),__vite__mapDeps([55,18])).then(a=>({default:a.BFFServiceConfigAdvanced}))),vO=x.lazy(()=>Se(()=>import("./WebhookRelayConfigAdvanced-CqCeBmB9.js"),__vite__mapDeps([56,2,47,18,38,34,32,39])).then(a=>({default:a.WebhookRelayConfigAdvanced}))),bO=x.lazy(()=>Se(()=>import("./PrometheusConfigAdvanced-KFJ36LxC.js"),__vite__mapDeps([57,2,9])).then(a=>({default:a.PrometheusConfigAdvanced}))),xO=x.lazy(()=>Se(()=>import("./GrafanaConfigAdvanced-D9xhcQuF.js"),__vite__mapDeps([58,2,23,3])).then(a=>({default:a.GrafanaConfigAdvanced}))),wO=x.lazy(()=>Se(()=>import("./LokiConfigAdvanced-CmF5A2XI.js"),[]).then(a=>({default:a.LokiConfigAdvanced}))),CO=x.lazy(()=>Se(()=>import("./JaegerConfigAdvanced-CCvlTg5c.js"),__vite__mapDeps([59,1,60])).then(a=>({default:a.JaegerConfigAdvanced}))),SO=x.lazy(()=>Se(()=>import("./OpenTelemetryCollectorConfigAdvanced-DXkHmQdr.js"),__vite__mapDeps([61,1,18,11])).then(a=>({default:a.OpenTelemetryCollectorConfigAdvanced}))),MO=x.lazy(()=>Se(()=>import("./PagerDutyConfigAdvanced-AYi0_ItJ.js"),__vite__mapDeps([62,18,4])).then(a=>({default:a.PagerDutyConfigAdvanced}))),EO=x.lazy(()=>Se(()=>import("./KeycloakConfigAdvanced-Bbmc56EY.js"),__vite__mapDeps([63,5,28,12,4,39,64])).then(a=>({default:a.KeycloakConfigAdvanced}))),RO=x.lazy(()=>Se(()=>import("./WAFConfigAdvanced-rQqAEeM2.js"),__vite__mapDeps([65,18,5,28,32])).then(a=>({default:a.WAFConfigAdvanced}))),NO=x.lazy(()=>Se(()=>import("./SecretsVaultConfigAdvanced-EHu2g6Bv.js"),__vite__mapDeps([66,2,18,12,3,5,32])).then(a=>({default:a.SecretsVaultConfigAdvanced}))),AO=x.lazy(()=>Se(()=>import("./IDSIPSConfigAdvanced-BTvJrjfz.js"),__vite__mapDeps([67,18,5,68,32])).then(a=>({default:a.IDSIPSConfigAdvanced}))),TO=x.lazy(()=>Se(()=>import("./FirewallConfigAdvanced-D5r9scpZ.js"),__vite__mapDeps([69,18,5,32,68,42])).then(a=>({default:a.FirewallConfigAdvanced}))),jO=x.lazy(()=>Se(()=>import("./JenkinsConfigAdvanced-BVE2wl7d.js"),__vite__mapDeps([70,1,60,71,4,39])).then(a=>({default:a.JenkinsConfigAdvanced}))),kO=x.lazy(()=>Se(()=>import("./GitLabCIConfigAdvanced-Lsk8ixuz.js"),__vite__mapDeps([72,1,60,39])).then(a=>({default:a.GitLabCIConfigAdvanced}))),DO=x.lazy(()=>Se(()=>import("./ArgoCDConfigAdvanced-BhrHdZes.js"),__vite__mapDeps([73,1,39])).then(a=>({default:a.ArgoCDConfigAdvanced}))),_O=x.lazy(()=>Se(()=>import("./HarborConfigAdvanced-kW2VmH1u.js"),__vite__mapDeps([74,71,26,4,5])).then(a=>({default:a.HarborConfigAdvanced}))),zO=x.lazy(()=>Se(()=>import("./TerraformConfigAdvanced-CnPyFDD0.js"),__vite__mapDeps([75,2,18,32,19,39])).then(a=>({default:a.TerraformConfigAdvanced}))),OO=x.lazy(()=>Se(()=>import("./AnsibleConfigAdvanced-BBtusjy_.js"),__vite__mapDeps([76,18,29,32,39])).then(a=>({default:a.AnsibleConfigAdvanced}))),LO=x.lazy(()=>Se(()=>import("./IstioConfigAdvanced-C22HjPMl.js"),__vite__mapDeps([77,18,28,44])).then(a=>({default:a.IstioConfigAdvanced}))),PO=x.lazy(()=>Se(()=>import("./ServiceMeshConfigAdvanced-CaQyZNhH.js"),__vite__mapDeps([78,18,29,5])).then(a=>({default:a.ServiceMeshConfigAdvanced}))),IO=x.lazy(()=>Se(()=>import("./APIGatewayConfigAdvanced-BTdqbH-K.js"),__vite__mapDeps([79,9,18,28,5,42,44])).then(a=>({default:a.APIGatewayConfigAdvanced}))),qO=x.lazy(()=>Se(()=>import("./VPNConfigAdvanced-CtUVApK_.js"),__vite__mapDeps([80,18,4,64,39])).then(a=>({default:a.VPNConfigAdvanced}))),HO=x.lazy(()=>Se(()=>import("./CDNConfigAdvanced-p8SAWhdI.js"),__vite__mapDeps([81,18,28,42])).then(a=>({default:a.CDNConfigAdvanced}))),UO=x.lazy(()=>Se(()=>import("./SparkConfigAdvanced-CJzQXXDl.js"),__vite__mapDeps([82,18,3,32,39])).then(a=>({default:a.SparkConfigAdvanced}))),BO=x.lazy(()=>Se(()=>import("./TensorFlowServingConfigAdvanced-BvE4KWQk.js"),__vite__mapDeps([83,2,18,3,32])).then(a=>({default:a.TensorFlowServingConfigAdvanced}))),$O=x.lazy(()=>Se(()=>import("./PyTorchServeConfigAdvanced-DkZOi47y.js"),__vite__mapDeps([84,2,18,3,32])).then(a=>({default:a.PyTorchServeConfigAdvanced}))),GO=x.lazy(()=>Se(()=>import("./FeatureStoreConfigAdvanced-KkGmEVop.js"),__vite__mapDeps([85,18,71,3,42])).then(a=>({default:a.FeatureStoreConfigAdvanced}))),QO=x.lazy(()=>Se(()=>import("./MLflowConfigAdvanced-TkPl7Dek.js"),__vite__mapDeps([86,71,42])).then(a=>({default:a.MLflowConfigAdvanced}))),FO=x.lazy(()=>Se(()=>import("./CRMConfigAdvanced-CwzekVqw.js"),__vite__mapDeps([87,18,4,88,42,89])).then(a=>({default:a.CRMConfigAdvanced}))),VO=x.lazy(()=>Se(()=>import("./ERPConfigAdvanced-CWWbXHaV.js"),__vite__mapDeps([90,18,71,88,42,89])).then(a=>({default:a.ERPConfigAdvanced}))),KO=x.lazy(()=>Se(()=>import("./RPABotConfigAdvanced-D998mG-f.js"),__vite__mapDeps([91,18,42,32,39])).then(a=>({default:a.RPABotConfigAdvanced}))),YO=x.lazy(()=>Se(()=>import("./BPMNEngineConfigAdvanced-B6k_GZE2.js"),__vite__mapDeps([92,18,32,39,4])).then(a=>({default:a.BPMNEngineConfigAdvanced}))),XO=x.lazy(()=>Se(()=>import("./PaymentGatewayConfigAdvanced-CM1V7ur2.js"),__vite__mapDeps([93,18,88,42,5,32,39])).then(a=>({default:a.PaymentGatewayConfigAdvanced}))),WO=()=>f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-muted-foreground",children:"Loading configuration..."})});function ZO({componentId:a,componentType:t}){const n=()=>{switch(t){case"kafka":return f.jsx(B3,{componentId:a});case"rabbitmq":return f.jsx($3,{componentId:a});case"postgres":return f.jsx(G3,{componentId:a});case"mongodb":return f.jsx(Q3,{componentId:a});case"redis":return f.jsx(F3,{componentId:a});case"elasticsearch":return f.jsx(V3,{componentId:a});case"cassandra":return f.jsx(K3,{componentId:a});case"clickhouse":return f.jsx(Y3,{componentId:a});case"snowflake":return f.jsx(X3,{componentId:a});case"s3-datalake":return f.jsx(W3,{componentId:a});case"nginx":return f.jsx(Z3,{componentId:a});case"rest":return f.jsx(J3,{componentId:a});case"grpc":return f.jsx(eO,{componentId:a});case"websocket":return f.jsx(tO,{componentId:a});case"graphql":return f.jsx(nO,{componentId:a});case"soap":return f.jsx(sO,{componentId:a});case"webhook":return f.jsx(oO,{componentId:a});case"docker":case"kubernetes":return f.jsx(aO,{componentId:a});case"haproxy":return f.jsx(rO,{componentId:a});case"traefik":return f.jsx(iO,{componentId:a});case"envoy":return f.jsx(lO,{componentId:a});case"activemq":return f.jsx(cO,{componentId:a});case"aws-sqs":return f.jsx(uO,{componentId:a});case"azure-service-bus":return f.jsx(dO,{componentId:a});case"gcp-pubsub":return f.jsx(fO,{componentId:a});case"kong":return f.jsx(hO,{componentId:a});case"apigee":return f.jsx(pO,{componentId:a});case"mulesoft":return f.jsx(gO,{componentId:a});case"graphql-gateway":return f.jsx(mO,{componentId:a});case"bff-service":return f.jsx(yO,{componentId:a});case"webhook-relay":return f.jsx(vO,{componentId:a});case"prometheus":return f.jsx(bO,{componentId:a});case"grafana":return f.jsx(xO,{componentId:a});case"loki":return f.jsx(wO,{componentId:a});case"jaeger":return f.jsx(CO,{componentId:a});case"otel-collector":return f.jsx(SO,{componentId:a});case"pagerduty":return f.jsx(MO,{componentId:a});case"keycloak":return f.jsx(EO,{componentId:a});case"waf":return f.jsx(RO,{componentId:a});case"firewall":return f.jsx(TO,{componentId:a});case"secrets-vault":return f.jsx(NO,{componentId:a});case"ids-ips":return f.jsx(AO,{componentId:a});case"jenkins":return f.jsx(jO,{componentId:a});case"gitlab-ci":return f.jsx(kO,{componentId:a});case"argo-cd":return f.jsx(DO,{componentId:a});case"terraform":return f.jsx(zO,{componentId:a});case"ansible":return f.jsx(OO,{componentId:a});case"harbor":return f.jsx(_O,{componentId:a});case"istio":return f.jsx(LO,{componentId:a});case"service-mesh":return f.jsx(PO,{componentId:a});case"api-gateway":return f.jsx(IO,{componentId:a});case"vpn":return f.jsx(qO,{componentId:a});case"cdn":return f.jsx(HO,{componentId:a});case"spark":return f.jsx(UO,{componentId:a});case"tensorflow-serving":return f.jsx(BO,{componentId:a});case"pytorch-serve":return f.jsx($O,{componentId:a});case"feature-store":return f.jsx(GO,{componentId:a});case"mlflow":return f.jsx(QO,{componentId:a});case"crm":return f.jsx(FO,{componentId:a});case"erp":return f.jsx(VO,{componentId:a});case"rpa-bot":return f.jsx(KO,{componentId:a});case"bpmn-engine":return f.jsx(YO,{componentId:a});case"payment-gateway":return f.jsx(XO,{componentId:a});default:return f.jsx("div",{className:"p-6 text-center text-muted-foreground",children:"Configuration panel not available for this component type"})}};return f.jsx(x.Suspense,{fallback:f.jsx(WO,{}),children:n()})}function JO(){const{undo:a,redo:t,zoom:n,setZoom:s,pan:r,setPan:l,resetCanvas:c,saveDiagram:d,selectedConnectionId:h,selectedNodeId:p,selectedGroupId:g,nodes:m,deleteConnection:v,deleteNode:w,deleteGroup:S,selectConnection:C,selectNode:R,selectGroup:E}=Re(),{canUndo:j,canRedo:N}=Si(),{isRunning:T,start:k,stop:U}=jt(),{showMinimap:I,toggleMinimap:q,showHeatMapLegend:te,toggleHeatMapLegend:se}=zi();x.useEffect(()=>{const le=ee=>{const oe=ee.ctrlKey||ee.metaKey;if(oe&&ee.key==="z"&&!ee.shiftKey&&j){ee.preventDefault(),a();return}if(oe&&(ee.key==="z"&&ee.shiftKey||ee.key==="y")&&N){ee.preventDefault(),t();return}if(oe&&(ee.key==="="||ee.key==="+")){ee.preventDefault(),s(Math.min(n+.1,2));return}if(oe&&ee.key==="-"){ee.preventDefault(),s(Math.max(n-.1,.5));return}if(oe&&ee.key==="0"){ee.preventDefault(),s(1),l({x:0,y:0});return}const ce=50;if(!oe){if(ee.key==="ArrowLeft"){ee.preventDefault(),l({x:r.x+ce,y:r.y});return}if(ee.key==="ArrowRight"){ee.preventDefault(),l({x:r.x-ce,y:r.y});return}if(ee.key==="ArrowUp"){ee.preventDefault(),l({x:r.x,y:r.y+ce});return}if(ee.key==="ArrowDown"){ee.preventDefault(),l({x:r.x,y:r.y-ce});return}}if(!oe&&ee.key===" "){const ue=ee.target;if(!ue){if(ee.preventDefault(),T)U();else{const{nodes:Y,connections:he}=Re.getState();jt.getState().initialize(Y,he),k()}return}const z=ue.tagName;if(z==="INPUT"||z==="TEXTAREA"||z==="SELECT"||ue.isContentEditable||ue.closest('input, textarea, select, [contenteditable="true"]'))return;const L=ue.getAttribute("role");if(L==="textbox"||L==="combobox"||L==="searchbox"||L==="spinbutton"||ue.closest("[data-radix-select-trigger], [data-radix-select-content], [data-radix-select-viewport]"))return;if(ee.preventDefault(),T)U();else{const{nodes:Y,connections:he}=Re.getState();jt.getState().initialize(Y,he),k()}return}if(oe&&(ee.key==="s"||ee.key==="")){ee.preventDefault(),d();return}if(oe&&(ee.key==="m"||ee.key==="")){ee.preventDefault(),q();return}if(oe&&(ee.key==="h"||ee.key==="")){ee.preventDefault(),se();return}if((ee.key==="Delete"||ee.key==="Backspace")&&!oe){const ue=document.activeElement;if(ue){const D=ue.tagName;if(D==="INPUT"||D==="TEXTAREA"||D==="SELECT"||ue.isContentEditable)return;const L=ue.getAttribute("role");if(L==="textbox"||L==="combobox"||L==="searchbox"||L==="spinbutton")return;const Y=ue.closest("form")!==null,he=ue.closest('[role="textbox"], [role="combobox"], [contenteditable="true"]')!==null,_=ue.closest("[data-radix-select-trigger], [data-radix-select-content]")!==null,$=ue.closest('[role="dialog"]')!==null;if(Y||he||_||$)return}if(ee.preventDefault(),h){v(h),C(null);return}if(g){S(g),E(null);return}const z=m.filter(D=>D.selected);if(z.length>0){z.forEach(D=>w(D.id)),R(null);return}if(p){w(p),R(null);return}}};return window.addEventListener("keydown",le),()=>{window.removeEventListener("keydown",le)}},[a,t,j,N,n,s,r,l,c,d,T,k,U,I,q,te,se,h,p,g,m,v,w,S,C,R,E])}class gc extends x.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){to("ErrorBoundary caught an error",t,{componentStack:n.componentStack}),this.setState({error:t,errorInfo:n}),this.props.onError&&this.props.onError(t,n)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:f.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:f.jsxs(Tn,{className:"w-full max-w-2xl",children:[f.jsxs(Ws,{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ys,{className:"h-5 w-5 text-destructive"}),f.jsx(Zs,{children:"-   "})]}),f.jsx(pr,{children:"    "})]}),f.jsxs(Js,{className:"space-y-4",children:[this.state.error&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-sm font-semibold text-foreground",children:":"}),f.jsx("pre",{className:"text-xs bg-muted p-3 rounded-md overflow-auto max-h-48",children:this.state.error.toString()})]}),!1,f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(Te,{onClick:this.handleReset,variant:"default",children:[f.jsx(aA,{className:"h-4 w-4 mr-2"})," "]}),f.jsx(Te,{onClick:()=>window.location.reload(),variant:"outline",children:" "})]})]})]})}):this.props.children}}function eL(){JO();const{tabs:a}=hu(),t=a.find(n=>n.active);return f.jsx(gc,{children:f.jsx(f3,{children:f.jsx(i3,{children:f.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[f.jsx(ok,{}),f.jsx(s3,{}),f.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f.jsx(gc,{children:f.jsx(c5,{})}),f.jsx(gc,{children:t?.type==="diagram"?f.jsx(T0,{}):t?.type==="component"&&t.componentId&&t.componentType?f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(ZO,{componentId:t.componentId,componentType:t.componentType})}):f.jsx(T0,{})}),f.jsx(gc,{children:f.jsx(n3,{})})]})]})})})})}lE.createRoot(document.getElementById("root")).render(f.jsxs(Et.StrictMode,{children:[f.jsx(XE,{position:"top-right"}),f.jsx(eL,{})]}));export{U2 as $,ha as A,Gt as B,Tn as C,op as D,ke as E,Kv as F,tL as G,wz as H,Tt as I,Sz as J,Uc as K,nt as L,k2 as M,Z2 as N,P2 as O,Nc as P,lb as Q,K2 as R,vn as S,ip as T,vA as U,it as V,cb as W,da as X,X2 as Y,fb as Z,jt as _,su as a,jC as a0,fa as a1,ys as a2,vs as a3,Ee as a4,Dh as a5,kh as a6,nL as a7,to as a8,qh as a9,aA as aa,hs as b,pA as c,zo as d,Ws as e,Zs as f,sL as g,pr as h,Te as i,f as j,Js as k,Ei as l,Hh as m,F5 as n,V1 as o,V5 as p,X1 as q,x as r,Ci as s,ua as t,Re as u,Yc as v,Xc as w,Zc as x,Jc as y,Wc as z};

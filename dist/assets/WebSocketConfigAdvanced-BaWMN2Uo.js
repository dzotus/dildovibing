import{u as H,j as e,r as M,i as C,S as w,C as t,e as l,f as c,R as T,k as r,T as V,a as q,b as j,c as O,d as g,h as u,L as i,I as x,B as p,ah as K,n as U,o as X,p as F,q as G,s as R,t as I}from"./index-D23A2X5A.js";import{T as J}from"./textarea-jYm4DBr1.js";import{R as Q}from"./refresh-ccw-C1sN3B1t.js";import{M as b}from"./message-square-BgY2EI2R.js";import{S as N}from"./send-BJRlhGYb.js";import{C as Y}from"./circle-check-big-D5vTmfeK.js";function te({componentId:S}){const{nodes:W,updateNode:D}=H(),v=W.find(s=>s.id===S);if(!v)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const a=v.data.config||{},o=a.connections||[],m=a.messages||[],y=a.endpoint||"ws://localhost:8080/ws",P=a.protocol||"ws",L=a.totalConnections||o.length,E=a.activeConnections||o.filter(s=>s.status==="connected").length,z=a.totalMessages||m.length,[h,k]=M.useState(""),[d,A]=M.useState(!1),n=s=>{D(S,{data:{...v.data,config:{...a,...s}}})},B=()=>{if(!h.trim())return;const s={id:`msg-${Date.now()}`,type:"sent",content:h,timestamp:new Date().toISOString()};n({messages:[...m,s]}),k("")},$=()=>{if(A(!d),!d){const s={id:`conn-${Date.now()}`,status:"connected",connectedAt:new Date().toISOString(),messagesSent:0,messagesReceived:0};n({connections:[...o,s]})}};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"WebSocket"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"WebSocket Server"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Real-time bidirectional communication"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(C,{variant:"outline",size:"sm",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(w,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(t,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(l,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-sm font-medium text-muted-foreground",children:"Connections"}),e.jsx(T,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:E}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["/ ",L," total"]})]})})]}),e.jsxs(t,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(l,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-sm font-medium text-muted-foreground",children:"Messages"}),e.jsx(b,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:z}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"exchanged"})]})})]}),e.jsxs(t,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(l,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-sm font-medium text-muted-foreground",children:"Sent"}),e.jsx(N,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(r,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:o.reduce((s,f)=>s+(f.messagesSent||0),0)})})})]}),e.jsxs(t,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(l,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-sm font-medium text-muted-foreground",children:"Received"}),e.jsx(b,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(r,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:o.reduce((s,f)=>s+(f.messagesReceived||0),0)})})})]})]}),e.jsxs(V,{defaultValue:"client",className:"space-y-4",children:[e.jsxs(q,{children:[e.jsxs(j,{value:"client",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Test Client"]}),e.jsxs(j,{value:"connections",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Connections (",o.length,")"]}),e.jsxs(j,{value:"messages",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Messages (",m.length,")"]}),e.jsxs(j,{value:"settings",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(g,{value:"client",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(c,{children:"WebSocket Test Client"}),e.jsx(u,{children:"Connect and send messages"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Endpoint"}),e.jsx(x,{value:y,onChange:s=>n({endpoint:s.target.value}),placeholder:"ws://localhost:8080/ws"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{onClick:$,variant:d?"destructive":"default",children:d?"Disconnect":"Connect"}),e.jsx(p,{variant:d?"default":"outline",children:d?"Connected":"Disconnected"})]}),e.jsx(w,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Send Message"}),e.jsx(J,{value:h,onChange:s=>k(s.target.value),className:"font-mono text-sm min-h-[100px]",placeholder:'{ "type": "message", "data": "Hello" }',disabled:!d})]}),e.jsxs(C,{onClick:B,disabled:!d||!h.trim(),children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Send Message"]})]})]})}),e.jsx(g,{value:"connections",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(c,{children:"Active Connections"}),e.jsx(u,{children:"WebSocket client connections"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:o.map(s=>e.jsxs(t,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(l,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.status==="connected"?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-gray-900/30"}`,children:s.status==="connected"?e.jsx(Y,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):e.jsx(K,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx(c,{className:"text-lg font-semibold",children:s.id}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(p,{variant:s.status==="connected"?"default":"outline",children:s.status}),s.connectedAt&&e.jsxs(p,{variant:"outline",children:["Connected ",new Date(s.connectedAt).toLocaleString()]})]})]})]})})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Sent:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.messagesSent||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Received:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.messagesReceived||0})]}),s.lastMessage&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last:"}),e.jsx("span",{className:"ml-2 font-semibold truncate",children:s.lastMessage})]})]})})]},s.id))})})]})}),e.jsx(g,{value:"messages",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(c,{children:"Message History"}),e.jsx(u,{children:"Sent and received messages"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:m.map(s=>e.jsxs(t,{className:`border-l-4 ${s.type==="sent"?"border-l-green-500 bg-card":"border-l-blue-500 bg-card"} hover:shadow-md transition-shadow`,children:[e.jsx(l,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.type==="sent"?"bg-green-100 dark:bg-green-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:s.type==="sent"?e.jsx(N,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):e.jsx(b,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(c,{className:"text-lg font-semibold capitalize",children:s.type}),e.jsx(p,{variant:"outline",className:"mt-2",children:new Date(s.timestamp).toLocaleString()})]})]})})}),e.jsx(r,{children:e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto",children:s.content})})]},s.id))})})]})}),e.jsx(g,{value:"settings",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(l,{children:[e.jsx(c,{children:"WebSocket Settings"}),e.jsx(u,{children:"Server configuration"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Endpoint URL"}),e.jsx(x,{value:y,onChange:s=>n({endpoint:s.target.value}),placeholder:"ws://localhost:8080/ws"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Protocol"}),e.jsxs(U,{value:P,onValueChange:s=>n({protocol:s}),children:[e.jsx(X,{children:e.jsx(F,{})}),e.jsxs(G,{children:[e.jsx(R,{value:"ws",children:"WS (WebSocket)"}),e.jsx(R,{value:"wss",children:"WSS (Secure WebSocket)"})]})]})]}),e.jsx(w,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Enable Compression"}),e.jsx(I,{checked:a.enableCompression??!0,onCheckedChange:s=>n({enableCompression:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Enable Ping/Pong"}),e.jsx(I,{checked:a.enablePingPong??!0,onCheckedChange:s=>n({enablePingPong:s})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Ping Interval (seconds)"}),e.jsx(x,{type:"number",value:a.pingInterval??30,onChange:s=>n({pingInterval:parseInt(s.target.value)||30}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Max Connections"}),e.jsx(x,{type:"number",value:a.maxConnections??1e3,onChange:s=>n({maxConnections:parseInt(s.target.value)||1e3}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Max Message Size (KB)"}),e.jsx(x,{type:"number",value:a.maxMessageSize??1024,onChange:s=>n({maxMessageSize:parseInt(s.target.value)||1024}),min:1})]})]})]})})]})]})})}export{te as WebSocketConfigAdvanced};

import{u as Ae,j as e,g as Re,r as k,B as I,S as Ie,T as Pe,a as Le,b as P,A as W,F as X,c as De,d as L,C as j,e as y,f as b,h as C,i as o,P as z,k as T,l as ee,I as t,m as U,L as c,n as u,o as g,p as v,q as N,s as l,t as Fe,D as se,v as ae,w as re,x as le,y as ce,z as ie}from"./index-Gi7Ro3vi.js";import{P as Be}from"./progress-DtRtVzOm.js";import{T as ze}from"./textarea-CJbxdcvv.js";import{D as ne}from"./database-B1g52c3Z.js";import{U as $}from"./users-CaHPnze_.js";import{S as te}from"./shield-N5IJIXZS.js";function He({componentId:Z}){const{nodes:oe,updateNode:de}=Ae(),E=oe.find(s=>s.id===Z);if(!E)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const w=Re(E.data.config,{}),h=w.brokers||["localhost:9092"],x=w.topics||[],D=w.consumerGroups||[],me=w.groupId||"default-group",he=w.clientId||"default-client",S=w.schemaRegistry||{url:"http://localhost:8081",subjects:[]},G=w.acls||[],[H,xe]=k.useState(null),[je,K]=k.useState(!1),[pe,M]=k.useState(!1),[ue,V]=k.useState(!1),[_,ge]=k.useState(null),[m,A]=k.useState({subjectName:"",schemaType:"AVRO",schema:""}),[i,f]=k.useState({principal:"User:",resourceType:"Topic",resourceName:"",resourcePatternType:"Literal",operation:"Read",permission:"Allow",host:"*"}),d=s=>{if(de(Z,{data:{...E.data,config:{...w,...s}}}),s.brokers!==void 0){const r={...p};r.brokers&&delete r.brokers,O(r)}},[p,O]=k.useState({}),q=()=>{if(!h||h.length===0)return O({...p,brokers:"Необходимо указать хотя бы один broker"}),!1;if(h.filter(a=>{if(!a||!a.trim())return!0;const n=a.trim().split(":");if(n.length!==2)return!0;const B=parseInt(n[1]);return isNaN(B)||B<=0||B>65535}).length>0)return O({...p,brokers:"Неверный формат broker. Используйте формат host:port"}),!1;const r={...p};return r.brokers&&delete r.brokers,O(r),!0},ve=()=>{d({brokers:[...h,"localhost:9093"]})},Ne=s=>{d({brokers:h.filter((r,a)=>a!==s)})},fe=(s,r)=>{const a=[...h];a[s]=r,d({brokers:a})},ye=()=>{const s={name:"new-topic",partitions:3,replication:1,messages:0,size:0,config:{retentionMs:6048e5,cleanupPolicy:"delete",compressionType:"gzip",maxMessageBytes:1e6,minInsyncReplicas:1},partitionInfo:Array.from({length:3},(r,a)=>({id:a,leader:0,replicas:[0,1],isr:[0,1]}))};d({topics:[...x,s]}),K(!1)},be=s=>{d({topics:x.filter((r,a)=>a!==s)})},J=(s,r,a)=>{const n=[...x];n[s]={...n[s],[r]:a},d({topics:n})},R=(s,r,a)=>{const n=[...x];n[s].config||(n[s].config={}),n[s].config={...n[s].config,[r]:a},d({topics:n})},Ce=()=>{d({consumerGroups:[...D,{id:"new-group",topic:x[0]?.name||"",lag:0,members:1,offsetStrategy:"latest",autoCommit:!0}]})},Te=s=>{d({consumerGroups:D.filter((r,a)=>a!==s)})},F=(s,r,a)=>{const n=[...D];n[s]={...n[s],[r]:a},d({consumerGroups:n})},we=()=>{if(!m.subjectName.trim()||!m.schema.trim())return;const s={name:m.subjectName.trim(),version:1,schemaType:m.schemaType,schema:m.schema.trim()};d({schemaRegistry:{...S,subjects:[...S.subjects||[],s]}}),A({subjectName:"",schemaType:"AVRO",schema:""}),M(!1)},ke=()=>{if(!i.principal.trim()||!i.resourceName.trim())return;const s={principal:i.principal.trim(),resourceType:i.resourceType,resourceName:i.resourceName.trim(),resourcePatternType:i.resourcePatternType,operation:i.operation,permission:i.permission,host:i.host||"*"};d({acls:[...G,s]}),f({principal:"User:",resourceType:"Topic",resourceName:"",resourcePatternType:"Literal",operation:"Read",permission:"Allow",host:"*"}),V(!1)},Se=s=>{d({acls:G.filter((r,a)=>a!==s)})};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(ne,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Kafka Cluster"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Apache Kafka Configuration & Management"})]})]})}),e.jsxs(I,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Configured"]})]}),e.jsx(Ie,{}),e.jsxs(Pe,{defaultValue:"brokers",className:"w-full",children:[e.jsxs(Le,{className:"grid w-full grid-cols-6",children:[e.jsxs(P,{value:"brokers",className:"gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Brokers"]}),e.jsxs(P,{value:"topics",className:"gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Topics"]}),e.jsxs(P,{value:"consumers",className:"gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Consumers"]}),e.jsxs(P,{value:"schemas",className:"gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Schemas"]}),e.jsxs(P,{value:"acls",className:"gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"ACLs"]}),e.jsxs(P,{value:"settings",className:"gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"Settings"]})]}),e.jsx(L,{value:"brokers",className:"space-y-4 mt-4",children:e.jsxs(j,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Broker Cluster"}),e.jsx(C,{children:"Kafka broker endpoints and connection details"})]}),e.jsxs(o,{size:"sm",onClick:ve,variant:"outline",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Add Broker"]})]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[h.length===0&&p.brokers&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-destructive p-2 border border-destructive rounded",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:p.brokers})]}),h.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-border rounded-lg bg-card",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsx(t,{value:s,onChange:a=>{fe(r,a.target.value),p.brokers&&q()},onBlur:q,placeholder:"localhost:9092",className:`flex-1 ${p.brokers?"border-destructive":""}`}),e.jsxs(I,{variant:"secondary",children:["Broker ",r+1]})]}),h.length>1&&e.jsx(o,{size:"icon",variant:"ghost",onClick:()=>Ne(r),children:e.jsx(U,{className:"h-4 w-4"})})]},r)),p.brokers&&h.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-destructive",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{children:p.brokers})]})]})})]})}),e.jsxs(L,{value:"topics",className:"space-y-4 mt-4",children:[je&&e.jsxs(j,{className:"mb-4 border-primary",children:[e.jsxs(y,{children:[e.jsx(b,{children:"Create New Topic"}),e.jsx(C,{children:"Configure topic settings"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Topic Name"}),e.jsx(t,{placeholder:"my-topic"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Partitions"}),e.jsx(t,{type:"number",defaultValue:3,min:1})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Replication Factor"}),e.jsx(t,{type:"number",defaultValue:1,min:1,max:h.length})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{onClick:ye,children:"Create Topic"}),e.jsx(o,{variant:"outline",onClick:()=>K(!1),children:"Cancel"})]})]})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Topics"}),e.jsx(C,{children:"Kafka topic configuration and monitoring"})]}),e.jsxs(o,{size:"sm",onClick:()=>K(!0),variant:"outline",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Create Topic"]})]})}),e.jsx(T,{children:x.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(W,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No topics configured"}),e.jsx("p",{className:"text-xs mt-2",children:'Click "Create Topic" to add a new topic'})]}):e.jsx("div",{className:"space-y-4",children:x.map((s,r)=>e.jsxs(j,{className:"border-border",children:[e.jsx(y,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded bg-primary/10",children:e.jsx(W,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx(b,{className:"text-lg",children:s.name}),e.jsxs(C,{className:"text-xs mt-1",children:[s.partitions," partitions • ",s.replication," replicas"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{size:"sm",variant:"outline",onClick:()=>xe(H===r?null:r),children:H===r?"Hide Config":"Show Config"}),x.length>1&&e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>be(r),children:e.jsx(U,{className:"h-4 w-4"})})]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Topic Name"}),e.jsx(t,{value:s.name,onChange:a=>J(r,"name",a.target.value),placeholder:"topic-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Partitions"}),e.jsx(t,{type:"number",min:"1",value:s.partitions,onChange:a=>J(r,"partitions",parseInt(a.target.value)||1)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Replication Factor"}),e.jsx(t,{type:"number",min:"1",max:h.length,value:s.replication,onChange:a=>J(r,"replication",parseInt(a.target.value)||1)})]}),H===r&&s.config&&e.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Topic Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Retention (ms)"}),e.jsx(t,{type:"number",value:s.config.retentionMs||6048e5,onChange:a=>R(r,"retentionMs",parseInt(a.target.value)||0),placeholder:"604800000 (7 days)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Retention (bytes)"}),e.jsx(t,{type:"number",value:s.config.retentionBytes||-1,onChange:a=>R(r,"retentionBytes",parseInt(a.target.value)||-1),placeholder:"-1 (unlimited)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Cleanup Policy"}),e.jsxs(u,{value:s.config.cleanupPolicy||"delete",onValueChange:a=>R(r,"cleanupPolicy",a),children:[e.jsx(g,{children:e.jsx(v,{})}),e.jsxs(N,{children:[e.jsx(l,{value:"delete",children:"Delete"}),e.jsx(l,{value:"compact",children:"Compact"}),e.jsx(l,{value:"delete,compact",children:"Delete, Compact"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Compression Type"}),e.jsxs(u,{value:s.config.compressionType||"gzip",onValueChange:a=>R(r,"compressionType",a),children:[e.jsx(g,{children:e.jsx(v,{})}),e.jsxs(N,{children:[e.jsx(l,{value:"uncompressed",children:"Uncompressed"}),e.jsx(l,{value:"gzip",children:"Gzip"}),e.jsx(l,{value:"snappy",children:"Snappy"}),e.jsx(l,{value:"lz4",children:"LZ4"}),e.jsx(l,{value:"zstd",children:"Zstd"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Max Message Bytes"}),e.jsx(t,{type:"number",value:s.config.maxMessageBytes||1e6,onChange:a=>R(r,"maxMessageBytes",parseInt(a.target.value)||1e6)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Min In-Sync Replicas"}),e.jsx(t,{type:"number",min:"1",value:s.config.minInsyncReplicas||1,onChange:a=>R(r,"minInsyncReplicas",parseInt(a.target.value)||1)})]})]})]}),s.partitionInfo&&s.partitionInfo.length>0&&e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Partition Details"}),e.jsx("div",{className:"space-y-2",children:s.partitionInfo.map((a,n)=>e.jsx("div",{className:"p-2 border rounded text-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-mono",children:["Partition ",a.id]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Leader: ",a.leader]}),e.jsxs("span",{children:["Replicas: [",a.replicas.join(", "),"]"]}),e.jsxs("span",{children:["ISR: [",a.isr.join(", "),"]"]})]})]})},n))})]}),e.jsx("div",{className:"pt-3 border-t border-border",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Messages:"}),e.jsx("span",{className:"ml-2 font-semibold",children:(s.messages||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Size:"}),e.jsxs("span",{className:"ml-2 font-semibold",children:[((s.size||0)/1024/1024).toFixed(2)," MB"]})]})]})})]})]},r))})})]})]}),e.jsx(L,{value:"consumers",className:"space-y-4 mt-4",children:e.jsxs(j,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Consumer Groups"}),e.jsx(C,{children:"Monitor consumer group lag and activity"})]}),e.jsxs(o,{size:"sm",onClick:Ce,variant:"outline",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Add Group"]})]})}),e.jsx(T,{children:D.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No consumer groups configured"})]}):e.jsx("div",{className:"space-y-3",children:D.map((s,r)=>e.jsxs(j,{className:"border-border",children:[e.jsx(y,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded bg-primary/10",children:e.jsx($,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx(b,{className:"text-lg",children:s.id}),e.jsxs(C,{className:"text-xs mt-1",children:["Topic: ",s.topic," • ",s.members||0," members"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{variant:s.lag&&s.lag>1e3?"destructive":"secondary",children:["Lag: ",Math.round(s.lag||0)]}),e.jsx(o,{size:"sm",variant:"outline",onClick:()=>ge(_===r?null:r),children:_===r?"Hide":"Edit"}),e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>Te(r),children:e.jsx(U,{className:"h-4 w-4"})})]})]})}),e.jsx(T,{className:"space-y-4",children:_===r?e.jsxs("div",{className:"space-y-4 pt-2 border-t border-border",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Group ID"}),e.jsx(t,{value:s.id,onChange:a=>F(r,"id",a.target.value),placeholder:"consumer-group-id"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Topic"}),e.jsxs(u,{value:s.topic,onValueChange:a=>F(r,"topic",a),children:[e.jsx(g,{children:e.jsx(v,{})}),e.jsx(N,{children:x.map(a=>e.jsx(l,{value:a.name,children:a.name},a.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Members"}),e.jsx(t,{type:"number",min:"1",value:s.members||1,onChange:a=>F(r,"members",parseInt(a.target.value)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Offset Strategy"}),e.jsxs(u,{value:s.offsetStrategy||"latest",onValueChange:a=>F(r,"offsetStrategy",a),children:[e.jsx(g,{children:e.jsx(v,{})}),e.jsxs(N,{children:[e.jsx(l,{value:"earliest",children:"Earliest"}),e.jsx(l,{value:"latest",children:"Latest"}),e.jsx(l,{value:"none",children:"None"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{htmlFor:`auto-commit-${r}`,children:"Auto Commit"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically commit offsets after consuming messages"})]}),e.jsx(Fe,{id:`auto-commit-${r}`,checked:s.autoCommit!==!1,onCheckedChange:a=>F(r,"autoCommit",a)})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Members:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.members||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Offset:"}),e.jsx("span",{className:"ml-2 font-semibold capitalize",children:s.offsetStrategy||"latest"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Auto Commit:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.autoCommit!==!1?"Yes":"No"})]})]}),s.lag!==void 0&&e.jsx(Be,{value:Math.min(s.lag/1e4*100,100),className:"h-2"})]})})]},r))})})]})}),e.jsx(L,{value:"schemas",className:"space-y-4 mt-4",children:e.jsxs(j,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Schema Registry"}),e.jsx(C,{children:"Avro/JSON Schema management"})]}),e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>{A({subjectName:"",schemaType:"AVRO",schema:""}),M(!0)},children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Register Schema"]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Schema Registry URL"}),e.jsx(t,{value:S.url||"",onChange:s=>d({schemaRegistry:{...S,url:s.target.value}}),placeholder:"http://localhost:8081"})]}),S.subjects&&S.subjects.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Registered Subjects"}),S.subjects.map((s,r)=>e.jsx(j,{className:"p-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-semibold",children:s.name}),s.schemaType&&e.jsx(I,{variant:"outline",className:"text-xs",children:s.schemaType})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Version ",s.version]}),s.schema&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 font-mono truncate max-w-md",children:[s.schema.substring(0,100),s.schema.length>100?"...":""]})]})})},r))]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(X,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No schemas registered"})]})]})]})}),e.jsx(L,{value:"acls",className:"space-y-4 mt-4",children:e.jsxs(j,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Access Control Lists"}),e.jsx(C,{children:"Manage topic and consumer group permissions"})]}),e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>{f({principal:"User:",resourceType:"Topic",resourceName:x[0]?.name||"",resourcePatternType:"Literal",operation:"Read",permission:"Allow",host:"*"}),V(!0)},children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Add ACL"]})]})}),e.jsx(T,{children:G.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(te,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No ACLs configured"})]}):e.jsx("div",{className:"space-y-3",children:G.map((s,r)=>{const a=s,n=a.resourceType||"Topic",B=a.resourceName||a.resource||"unknown",Y=a.resourcePatternType||"Literal",Q=a.host||"*";return e.jsx(j,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"font-semibold",children:s.principal}),e.jsx(I,{variant:s.permission==="Allow"?"default":"destructive",className:"text-xs",children:s.permission})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[n,":"]})," ",B,Y!=="Literal"&&e.jsx(I,{variant:"outline",className:"ml-2 text-xs",children:Y})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Operation:"})," ",s.operation,Q!=="*"&&e.jsxs("span",{className:"ml-2",children:["• Host: ",Q]})]})]})]}),e.jsx(o,{size:"icon",variant:"ghost",onClick:()=>Se(r),children:e.jsx(U,{className:"h-4 w-4"})})]})},r)})})})]})}),e.jsx(L,{value:"settings",className:"space-y-4 mt-4",children:e.jsxs(j,{children:[e.jsxs(y,{children:[e.jsx(b,{children:"Client Settings"}),e.jsx(C,{children:"Consumer group and client configuration"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"group-id",children:"Consumer Group ID"}),e.jsx(t,{id:"group-id",value:me,onChange:s=>d({groupId:s.target.value}),placeholder:"default-group"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"client-id",children:"Client ID"}),e.jsx(t,{id:"client-id",value:he,onChange:s=>d({clientId:s.target.value}),placeholder:"default-client"})]})]})]})})]}),e.jsx(se,{open:pe,onOpenChange:M,children:e.jsxs(ae,{className:"max-w-2xl",children:[e.jsxs(re,{children:[e.jsx(le,{children:"Register Schema"}),e.jsx(ce,{children:"Register a new schema in Schema Registry. The subject name typically follows the pattern: topic-name-value or topic-name-key."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[x.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Select Topic (optional)"}),e.jsxs(u,{onValueChange:s=>{A({...m,subjectName:`${s}-value`})},children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Choose a topic to auto-fill subject name"})}),e.jsx(N,{children:x.map(s=>e.jsx(l,{value:s.name,children:s.name},s.name))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecting a topic will set subject name to: topic-name-value"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"subject-name",children:"Subject Name"}),e.jsx(t,{id:"subject-name",value:m.subjectName,onChange:s=>A({...m,subjectName:s.target.value}),placeholder:"my-topic-value"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Subject name (e.g., topic-name-value, topic-name-key). In Schema Registry, subjects are typically named as topic-name-value or topic-name-key."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"schema-type",children:"Schema Type"}),e.jsxs(u,{value:m.schemaType,onValueChange:s=>A({...m,schemaType:s}),children:[e.jsx(g,{id:"schema-type",children:e.jsx(v,{})}),e.jsxs(N,{children:[e.jsx(l,{value:"AVRO",children:"AVRO"}),e.jsx(l,{value:"JSON",children:"JSON"}),e.jsx(l,{value:"PROTOBUF",children:"PROTOBUF"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"schema-content",children:"Schema Content"}),e.jsx(ze,{id:"schema-content",value:m.schema,onChange:s=>A({...m,schema:s.target.value}),placeholder:'{"type": "record", "name": "Example", "fields": [{"name": "field1", "type": "string"}]}',className:"font-mono text-sm h-48"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the schema definition in JSON format"})]})]}),e.jsxs(ie,{children:[e.jsx(o,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsx(o,{onClick:we,disabled:!m.subjectName.trim()||!m.schema.trim(),children:"Register Schema"})]})]})}),e.jsx(se,{open:ue,onOpenChange:V,children:e.jsxs(ae,{className:"max-w-2xl",children:[e.jsxs(re,{children:[e.jsx(le,{children:"Add Access Control List (ACL)"}),e.jsx(ce,{children:"Create a new ACL rule to control access to Kafka resources. Principal format: User:username or Group:groupname"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"principal",children:"Principal"}),e.jsx(t,{id:"principal",value:i.principal,onChange:s=>f({...i,principal:s.target.value}),placeholder:"User:alice or Group:developers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: User:username or Group:groupname"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"resource-type",children:"Resource Type"}),e.jsxs(u,{value:i.resourceType,onValueChange:s=>f({...i,resourceType:s}),children:[e.jsx(g,{id:"resource-type",children:e.jsx(v,{})}),e.jsxs(N,{children:[e.jsx(l,{value:"Topic",children:"Topic"}),e.jsx(l,{value:"Group",children:"Group"}),e.jsx(l,{value:"Cluster",children:"Cluster"}),e.jsx(l,{value:"TransactionalId",children:"TransactionalId"}),e.jsx(l,{value:"DelegationToken",children:"DelegationToken"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"resource-pattern-type",children:"Pattern Type"}),e.jsxs(u,{value:i.resourcePatternType,onValueChange:s=>f({...i,resourcePatternType:s}),children:[e.jsx(g,{id:"resource-pattern-type",children:e.jsx(v,{})}),e.jsxs(N,{children:[e.jsx(l,{value:"Literal",children:"Literal"}),e.jsx(l,{value:"Prefixed",children:"Prefixed"}),e.jsx(l,{value:"Match",children:"Match"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"resource-name",children:"Resource Name"}),e.jsx(t,{id:"resource-name",value:i.resourceName,onChange:s=>f({...i,resourceName:s.target.value}),placeholder:i.resourceType==="Topic"?"my-topic":i.resourceType==="Group"?"my-group":"resource-name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"operation",children:"Operation"}),e.jsxs(u,{value:i.operation,onValueChange:s=>f({...i,operation:s}),children:[e.jsx(g,{id:"operation",children:e.jsx(v,{})}),e.jsxs(N,{children:[e.jsx(l,{value:"Read",children:"Read"}),e.jsx(l,{value:"Write",children:"Write"}),e.jsx(l,{value:"Create",children:"Create"}),e.jsx(l,{value:"Delete",children:"Delete"}),e.jsx(l,{value:"Alter",children:"Alter"}),e.jsx(l,{value:"Describe",children:"Describe"}),e.jsx(l,{value:"AlterConfigs",children:"AlterConfigs"}),e.jsx(l,{value:"DescribeConfigs",children:"DescribeConfigs"}),e.jsx(l,{value:"ClusterAction",children:"ClusterAction"}),e.jsx(l,{value:"IdempotentWrite",children:"IdempotentWrite"}),e.jsx(l,{value:"All",children:"All"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"permission",children:"Permission"}),e.jsxs(u,{value:i.permission,onValueChange:s=>f({...i,permission:s}),children:[e.jsx(g,{id:"permission",children:e.jsx(v,{})}),e.jsxs(N,{children:[e.jsx(l,{value:"Allow",children:"Allow"}),e.jsx(l,{value:"Deny",children:"Deny"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"host",children:"Host (optional)"}),e.jsx(t,{id:"host",value:i.host,onChange:s=>f({...i,host:s.target.value}),placeholder:"* (all hosts)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"IP address or hostname. Use * for all hosts."})]})]}),e.jsxs(ie,{children:[e.jsx(o,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),e.jsx(o,{onClick:ke,disabled:!i.principal.trim()||!i.resourceName.trim(),children:"Add ACL"})]})]})})]})})}export{He as KafkaConfigAdvanced};

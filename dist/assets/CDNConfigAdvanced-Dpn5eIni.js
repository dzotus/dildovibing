import{E as ns,j as e,r as l,_ as ks,aF as is,$ as Hs,Y as qs,aG as Ms,a3 as rs,aH as _s,a0 as Os,a1 as le,a2 as cs,aI as As,aJ as Is,aK as Fs,aL as Bs,aM as zs,at as Gs,u as $s,X as Us,V as Vs,i as k,S as oe,C as A,e as I,f as F,k as B,A as Zs,T as Js,a as Ks,b as we,B as K,c as Ys,d as Pe,h as Q,K as Qe,I as M,a5 as es,P as ss,U as ts,m as as,L as m,n as te,o as ae,p as ne,q as ie,s as v,t as _,ap as Ws,D as De,v as Se,w as Ee,x as Re,y as ke,l as ee,z as He}from"./index-D6rf2aAc.js";import{u as Xs}from"./use-toast-DCtiNQE1.js";import{R as Qs}from"./refresh-ccw-mfA9RHAw.js";import{G as qe}from"./globe-B2kxGziG.js";import{T as et}from"./trending-up-BVEjhG3T.js";const st=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],tt=ns("eraser",st);const at=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Me=ns("map-pin",at);var nt=Symbol("radix.slottable");function it(a){const c=({children:n})=>e.jsx(e.Fragment,{children:n});return c.displayName=`${a}.Slottable`,c.__radixId=nt,c}var[Ne]=ks("Tooltip",[is]),Ce=is(),ls="TooltipProvider",rt=700,_e="tooltip.open",[ct,Ae]=Ne(ls),os=a=>{const{__scopeTooltip:c,delayDuration:n=rt,skipDelayDuration:o=300,disableHoverableContent:d=!1,children:g}=a,x=l.useRef(!0),f=l.useRef(!1),u=l.useRef(0);return l.useEffect(()=>{const b=u.current;return()=>window.clearTimeout(b)},[]),e.jsx(ct,{scope:c,isOpenDelayedRef:x,delayDuration:n,onOpen:l.useCallback(()=>{window.clearTimeout(u.current),x.current=!1},[]),onClose:l.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>x.current=!0,o)},[o]),isPointerInTransitRef:f,onPointerInTransitChange:l.useCallback(b=>{f.current=b},[]),disableHoverableContent:d,children:g})};os.displayName=ls;var be="Tooltip",[lt,ve]=Ne(be),ds=a=>{const{__scopeTooltip:c,children:n,open:o,defaultOpen:d,onOpenChange:g,disableHoverableContent:x,delayDuration:f}=a,u=Ae(be,a.__scopeTooltip),b=Ce(c),[t,w]=l.useState(null),T=Hs(),y=l.useRef(0),P=x??u.disableHoverableContent,S=f??u.delayDuration,H=l.useRef(!1),[O,z]=qs({prop:o,defaultProp:d??!1,onChange:Te=>{Te?(u.onOpen(),document.dispatchEvent(new CustomEvent(_e))):u.onClose(),g?.(Te)},caller:be}),G=l.useMemo(()=>O?H.current?"delayed-open":"instant-open":"closed",[O]),Y=l.useCallback(()=>{window.clearTimeout(y.current),y.current=0,H.current=!1,z(!0)},[z]),$=l.useCallback(()=>{window.clearTimeout(y.current),y.current=0,z(!1)},[z]),xe=l.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{H.current=!0,z(!0),y.current=0},S)},[S,z]);return l.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),e.jsx(Ms,{...b,children:e.jsx(lt,{scope:c,contentId:T,open:O,stateAttribute:G,trigger:t,onTriggerChange:w,onTriggerEnter:l.useCallback(()=>{u.isOpenDelayedRef.current?xe():Y()},[u.isOpenDelayedRef,xe,Y]),onTriggerLeave:l.useCallback(()=>{P?$():(window.clearTimeout(y.current),y.current=0)},[$,P]),onOpen:Y,onClose:$,disableHoverableContent:P,children:n})})};ds.displayName=be;var Oe="TooltipTrigger",us=l.forwardRef((a,c)=>{const{__scopeTooltip:n,...o}=a,d=ve(Oe,n),g=Ae(Oe,n),x=Ce(n),f=l.useRef(null),u=rs(c,f,d.onTriggerChange),b=l.useRef(!1),t=l.useRef(!1),w=l.useCallback(()=>b.current=!1,[]);return l.useEffect(()=>()=>document.removeEventListener("pointerup",w),[w]),e.jsx(_s,{asChild:!0,...x,children:e.jsx(Os.button,{"aria-describedby":d.open?d.contentId:void 0,"data-state":d.stateAttribute,...o,ref:u,onPointerMove:le(a.onPointerMove,T=>{T.pointerType!=="touch"&&!t.current&&!g.isPointerInTransitRef.current&&(d.onTriggerEnter(),t.current=!0)}),onPointerLeave:le(a.onPointerLeave,()=>{d.onTriggerLeave(),t.current=!1}),onPointerDown:le(a.onPointerDown,()=>{d.open&&d.onClose(),b.current=!0,document.addEventListener("pointerup",w,{once:!0})}),onFocus:le(a.onFocus,()=>{b.current||d.onOpen()}),onBlur:le(a.onBlur,d.onClose),onClick:le(a.onClick,d.onClose)})})});us.displayName=Oe;var Ie="TooltipPortal",[ot,dt]=Ne(Ie,{forceMount:void 0}),xs=a=>{const{__scopeTooltip:c,forceMount:n,children:o,container:d}=a,g=ve(Ie,c);return e.jsx(ot,{scope:c,forceMount:n,children:e.jsx(cs,{present:n||g.open,children:e.jsx(As,{asChild:!0,container:d,children:o})})})};xs.displayName=Ie;var ue="TooltipContent",hs=l.forwardRef((a,c)=>{const n=dt(ue,a.__scopeTooltip),{forceMount:o=n.forceMount,side:d="top",...g}=a,x=ve(ue,a.__scopeTooltip);return e.jsx(cs,{present:o||x.open,children:x.disableHoverableContent?e.jsx(ms,{side:d,...g,ref:c}):e.jsx(ut,{side:d,...g,ref:c})})}),ut=l.forwardRef((a,c)=>{const n=ve(ue,a.__scopeTooltip),o=Ae(ue,a.__scopeTooltip),d=l.useRef(null),g=rs(c,d),[x,f]=l.useState(null),{trigger:u,onClose:b}=n,t=d.current,{onPointerInTransitChange:w}=o,T=l.useCallback(()=>{f(null),w(!1)},[w]),y=l.useCallback((P,S)=>{const H=P.currentTarget,O={x:P.clientX,y:P.clientY},z=pt(O,H.getBoundingClientRect()),G=ft(O,z),Y=jt(S.getBoundingClientRect()),$=vt([...G,...Y]);f($),w(!0)},[w]);return l.useEffect(()=>()=>T(),[T]),l.useEffect(()=>{if(u&&t){const P=H=>y(H,t),S=H=>y(H,u);return u.addEventListener("pointerleave",P),t.addEventListener("pointerleave",S),()=>{u.removeEventListener("pointerleave",P),t.removeEventListener("pointerleave",S)}}},[u,t,y,T]),l.useEffect(()=>{if(x){const P=S=>{const H=S.target,O={x:S.clientX,y:S.clientY},z=u?.contains(H)||t?.contains(H),G=!bt(O,x);z?T():G&&(T(),b())};return document.addEventListener("pointermove",P),()=>document.removeEventListener("pointermove",P)}},[u,t,x,b,T]),e.jsx(ms,{...a,ref:g})}),[xt,ht]=Ne(be,{isInside:!1}),mt=it("TooltipContent"),ms=l.forwardRef((a,c)=>{const{__scopeTooltip:n,children:o,"aria-label":d,onEscapeKeyDown:g,onPointerDownOutside:x,...f}=a,u=ve(ue,n),b=Ce(n),{onClose:t}=u;return l.useEffect(()=>(document.addEventListener(_e,t),()=>document.removeEventListener(_e,t)),[t]),l.useEffect(()=>{if(u.trigger){const w=T=>{T.target?.contains(u.trigger)&&t()};return window.addEventListener("scroll",w,{capture:!0}),()=>window.removeEventListener("scroll",w,{capture:!0})}},[u.trigger,t]),e.jsx(Is,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:g,onPointerDownOutside:x,onFocusOutside:w=>w.preventDefault(),onDismiss:t,children:e.jsxs(Fs,{"data-state":u.stateAttribute,...b,...f,ref:c,style:{...f.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(mt,{children:o}),e.jsx(xt,{scope:n,isInside:!0,children:e.jsx(Bs,{id:u.contentId,role:"tooltip",children:d||o})})]})})});hs.displayName=ue;var gs="TooltipArrow",gt=l.forwardRef((a,c)=>{const{__scopeTooltip:n,...o}=a,d=Ce(n);return ht(gs,n).isInside?null:e.jsx(zs,{...d,...o,ref:c})});gt.displayName=gs;function pt(a,c){const n=Math.abs(c.top-a.y),o=Math.abs(c.bottom-a.y),d=Math.abs(c.right-a.x),g=Math.abs(c.left-a.x);switch(Math.min(n,o,d,g)){case g:return"left";case d:return"right";case n:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function ft(a,c,n=5){const o=[];switch(c){case"top":o.push({x:a.x-n,y:a.y+n},{x:a.x+n,y:a.y+n});break;case"bottom":o.push({x:a.x-n,y:a.y-n},{x:a.x+n,y:a.y-n});break;case"left":o.push({x:a.x+n,y:a.y-n},{x:a.x+n,y:a.y+n});break;case"right":o.push({x:a.x-n,y:a.y-n},{x:a.x-n,y:a.y+n});break}return o}function jt(a){const{top:c,right:n,bottom:o,left:d}=a;return[{x:d,y:c},{x:n,y:c},{x:n,y:o},{x:d,y:o}]}function bt(a,c){const{x:n,y:o}=a;let d=!1;for(let g=0,x=c.length-1;g<c.length;x=g++){const f=c[g],u=c[x],b=f.x,t=f.y,w=u.x,T=u.y;t>o!=T>o&&n<(w-b)*(o-t)/(T-t)+b&&(d=!d)}return d}function vt(a){const c=a.slice();return c.sort((n,o)=>n.x<o.x?-1:n.x>o.x?1:n.y<o.y?-1:n.y>o.y?1:0),Tt(c)}function Tt(a){if(a.length<=1)return a.slice();const c=[];for(let o=0;o<a.length;o++){const d=a[o];for(;c.length>=2;){const g=c[c.length-1],x=c[c.length-2];if((g.x-x.x)*(d.y-x.y)>=(g.y-x.y)*(d.x-x.x))c.pop();else break}c.push(d)}c.pop();const n=[];for(let o=a.length-1;o>=0;o--){const d=a[o];for(;n.length>=2;){const g=n[n.length-1],x=n[n.length-2];if((g.x-x.x)*(d.y-x.y)>=(g.y-x.y)*(d.x-x.x))n.pop();else break}n.push(d)}return n.pop(),c.length===1&&n.length===1&&c[0].x===n[0].x&&c[0].y===n[0].y?c:c.concat(n)}var yt=os,Nt=ds,Ct=us,Lt=xs,ps=hs;const pe=yt,fe=Nt,je=Ct,de=l.forwardRef(({className:a,sideOffset:c=4,...n},o)=>e.jsx(Lt,{children:e.jsx(ps,{ref:o,sideOffset:c,className:Gs("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",a),...n})}));de.displayName=ps.displayName;function kt({componentId:a}){const{nodes:c,updateNode:n}=$s(),{getComponentMetrics:o,isRunning:d,updateMetrics:g}=Us(),{toast:x}=Xs(),f=c.find(s=>s.id===a),u=Vs.getCDNEmulationEngine(a),b=o(a);if(!f)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const t=f.data.config||{},[w,T]=l.useState(!1),[y,P]=l.useState(!1),[S,H]=l.useState(null),[O,z]=l.useState(null),[G,Y]=l.useState(""),[$,xe]=l.useState(""),[Te,ye]=l.useState(!1),[Fe,Be]=l.useState(null),[i,q]=l.useState({domain:"",origin:"",status:"deploying",cachePolicy:"cache-first",defaultTTL:3600,maxTTL:86400,enableCompression:!0,compressionType:"gzip",enableHTTP2:!0,enableHTTP3:!1,enableHTTPS:!0,enableGeoRouting:!1,enableDDoSProtection:!0}),[D,re]=l.useState({}),[N,Z]=l.useState({}),[p,se]=l.useState({region:"",city:"",status:"active",capacity:1e4,latency:50}),[E,ce]=l.useState({}),[C,J]=l.useState({}),R=t.distributions||[],U=t.edgeLocations||[];l.useEffect(()=>{!u||!f||u.initializeConfig(f)},[t.distributions,t.edgeLocations,t.enableCaching,t.cacheTTL,t.enableCompression,t.compressionType,t.enableSSL,t.enableHTTP2,t.enableHTTP3,t.enablePurge,t.enableGeoRouting,t.enableDDoSProtection,t.defaultTTL,t.maxTTL,t.cachePolicy,u,f]),l.useEffect(()=>{if(!u||!b||!d)return;const s=u.getMetrics(),r=b.customMetrics||{},h=u.getRoutingEngine(),Ps=h.getDistributions(),Ds=h.getEdgeLocations(),Ke=h.getStats(),W=R.map(L=>{const V=Ps.find(Rs=>Rs.id===L.id),X=Ke.distributions.get(L.id);return{...L,requests:X?.requests||L.requests||0,cacheHitRate:X&&X.requests>0?X.cacheHits/X.requests*100:L.cacheHitRate||0,bandwidth:X?.bandwidth||L.bandwidth||0,edgeLocations:V?.edgeLocations||L.edgeLocations||0}}),Le=U.map(L=>{Ds.find(X=>X.id===L.id);const V=Ke.edgeLocations.get(L.id);return{...L,requests:V?.requests||L.requests||0,cacheHits:V?.cacheHits||L.cacheHits||0,bandwidth:V?.bandwidth||L.bandwidth||0}}),Ss=W.length,Es=Le.length,Ye=r.cdn_total_requests||s.totalRequests||W.reduce((L,V)=>L+(V.requests||0),0),We=r.cdn_total_bandwidth||s.totalBandwidth||W.reduce((L,V)=>L+(V.bandwidth||0),0),Xe=r.cdn_average_cache_hit_rate||s.averageCacheHitRate||(W.length>0?W.reduce((L,V)=>L+(V.cacheHitRate||0),0)/W.length:0);(JSON.stringify(W)!==JSON.stringify(R)||JSON.stringify(Le)!==JSON.stringify(U)||t.totalRequests!==Ye||t.totalBandwidth!==We||t.averageCacheHitRate!==Xe)&&n(a,{data:{...f.data,config:{...t,distributions:W,edgeLocations:Le,totalDistributions:Ss,totalEdgeLocations:Es,totalRequests:Ye,totalBandwidth:We,averageCacheHitRate:Xe}}})},[b,u,d]);const ze=l.useMemo(()=>{if(!G)return R;const s=G.toLowerCase();return R.filter(r=>r.domain.toLowerCase().includes(s)||r.origin.toLowerCase().includes(s)||r.status.toLowerCase().includes(s))},[R,G]),Ge=l.useMemo(()=>{if(!$)return U;const s=$.toLowerCase();return U.filter(r=>r.city.toLowerCase().includes(s)||r.region.toLowerCase().includes(s)||r.status.toLowerCase().includes(s))},[U,$]),fs=t.totalDistributions||R.filter(s=>s.status==="deployed").length,js=t.totalEdgeLocations||U.filter(s=>s.status==="active").length,he=t.totalRequests||R.reduce((s,r)=>s+(r.requests||0),0);t.totalBandwidth||R.reduce((s,r)=>s+(r.bandwidth||0),0);const bs=t.averageCacheHitRate!==void 0?t.averageCacheHitRate:R.length>0?R.reduce((s,r)=>s+(r.cacheHitRate||0),0)/R.length:0,j=s=>{n(a,{data:{...f.data,config:{...t,...s}}})},vs=()=>{g(),x({title:"Metrics refreshed",description:"CDN metrics have been updated."})},$e=s=>{s?(H(s),q({...s})):(H(null),q({domain:"",origin:"",status:"deploying",cachePolicy:"cache-first",defaultTTL:3600,maxTTL:86400,enableCompression:!0,compressionType:"gzip",enableHTTP2:!0,enableHTTP3:!1,enableHTTPS:!0,enableGeoRouting:!1,enableDDoSProtection:!0})),re({}),Z({}),T(!0)},me=()=>{const s={};if(!i.domain||i.domain.trim()===""?s.domain="Domain is required":/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/.test(i.domain)||(s.domain="Invalid domain format (e.g., cdn.example.com)"),!i.origin||i.origin.trim()==="")s.origin="Origin URL is required";else try{new URL(i.origin).protocol.startsWith("http")||(s.origin="Origin URL must use http:// or https:// protocol")}catch{s.origin="Invalid URL format (e.g., https://origin.example.com)"}return i.defaultTTL!==void 0&&i.defaultTTL<1&&(s.defaultTTL="Default TTL must be at least 1 second"),i.maxTTL!==void 0&&(i.maxTTL<1&&(s.maxTTL="Max TTL must be at least 1 second"),i.defaultTTL!==void 0&&i.maxTTL<i.defaultTTL&&(s.maxTTL="Max TTL must be greater than or equal to Default TTL")),re(s),Object.keys(s).length===0},Ts=()=>{if(Z({domain:!0,origin:!0,defaultTTL:!0,maxTTL:!0}),!me()){x({title:"Validation error",description:"Please fix the errors in the form.",variant:"destructive"});return}if(S){const s=R.map(r=>r.id===S.id?{...S,...i}:r);j({distributions:s}),x({title:"Distribution updated",description:`Distribution ${i.domain} has been updated.`})}else{const s={id:`dist-${Date.now()}`,domain:i.domain,origin:i.origin,status:i.status||"deploying",cachePolicy:i.cachePolicy||"cache-first",defaultTTL:i.defaultTTL||3600,maxTTL:i.maxTTL||86400,enableCompression:i.enableCompression??!0,compressionType:i.compressionType||"gzip",enableHTTP2:i.enableHTTP2??!0,enableHTTP3:i.enableHTTP3??!1,enableHTTPS:i.enableHTTPS??!0,enableGeoRouting:i.enableGeoRouting??!1,enableDDoSProtection:i.enableDDoSProtection??!0,edgeLocations:0,requests:0,cacheHitRate:0,bandwidth:0};j({distributions:[...R,s]}),x({title:"Distribution created",description:`Distribution ${i.domain} has been created.`})}T(!1)},ys=s=>{const r=R.find(h=>h.id===s);j({distributions:R.filter(h=>h.id!==s)}),x({title:"Distribution deleted",description:`Distribution ${r?.domain||s} has been deleted.`})},Ue=s=>{s?(z(s),se({...s})):(z(null),se({region:"",city:"",status:"active",capacity:1e4,latency:50})),ce({}),J({}),P(!0)},ge=()=>{const s={};return(!p.city||p.city.trim()==="")&&(s.city="City is required"),(!p.region||p.region.trim()==="")&&(s.region="Region is required"),p.capacity!==void 0&&(p.capacity<1&&(s.capacity="Capacity must be at least 1 req/s"),p.capacity>1e6&&(s.capacity="Capacity cannot exceed 1,000,000 req/s")),p.latency!==void 0&&(p.latency<1&&(s.latency="Latency must be at least 1ms"),p.latency>1e4&&(s.latency="Latency cannot exceed 10,000ms")),ce(s),Object.keys(s).length===0},Ns=()=>{if(J({city:!0,region:!0,capacity:!0,latency:!0}),!ge()){x({title:"Validation error",description:"Please fix the errors in the form.",variant:"destructive"});return}if(O){const s=U.map(r=>r.id===O.id?{...O,...p}:r);j({edgeLocations:s}),x({title:"Edge location updated",description:`Edge location ${p.city} has been updated.`})}else{const s={id:`edge-${Date.now()}`,region:p.region,city:p.city,status:p.status||"active",capacity:p.capacity||1e4,latency:p.latency||50,requests:0,cacheHits:0,bandwidth:0};j({edgeLocations:[...U,s]}),x({title:"Edge location created",description:`Edge location ${p.city} has been created.`})}P(!1)},Cs=s=>{const r=U.find(h=>h.id===s);j({edgeLocations:U.filter(h=>h.id!==s)}),x({title:"Edge location deleted",description:`Edge location ${r?.city||s} has been deleted.`})},Ls=s=>{Be(s),ye(!0)},ws=()=>{if(!u||!Fe)return;const s=u.purgeCache(Fe);x({title:"Cache purged",description:`Purged ${s} cache entries for distribution.`}),ye(!1),Be(null)},Ve=s=>{switch(s){case"deployed":case"active":return"bg-green-500";case"deploying":return"bg-yellow-500";case"failed":case"inactive":return"bg-red-500";default:return"bg-muted"}},Ze=s=>{switch(s){case"deployed":case"active":return"bg-green-500 text-white";case"deploying":return"bg-yellow-500 text-white";case"failed":case"inactive":return"bg-red-500 text-white";default:return"bg-muted text-foreground"}},Je=s=>{if(!s)return"0 B";const r=["B","KB","MB","GB","TB"],h=Math.floor(Math.log(s)/Math.log(1024));return`${(s/Math.pow(1024,h)).toFixed(2)} ${r[h]}`};return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"CDN Edge"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Content Delivery Network"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Global content distribution and caching"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(k,{variant:"outline",size:"sm",onClick:vs,children:[e.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(oe,{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(A,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(I,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:"text-sm font-medium text-muted-foreground",children:"Distributions"}),e.jsx(qe,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:fs}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"active"})]})})]}),e.jsxs(A,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(I,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:"text-sm font-medium text-muted-foreground",children:"Edge Locations"}),e.jsx(Me,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:js}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"global"})]})})]}),e.jsxs(A,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(I,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:"text-sm font-medium text-muted-foreground",children:"Requests"}),e.jsx(Zs,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(B,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:he>=1e6?`${(he/1e6).toFixed(1)}M`:he>=1e3?`${(he/1e3).toFixed(0)}K`:he.toLocaleString()})})})]}),e.jsxs(A,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(I,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:"text-sm font-medium text-muted-foreground",children:"Cache Hit Rate"}),e.jsx(et,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(B,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:[bs.toFixed(1),"%"]})})})]})]}),e.jsxs(Js,{defaultValue:"distributions",className:"space-y-4",children:[e.jsxs(Ks,{className:"flex flex-wrap gap-2",children:[e.jsxs(we,{value:"distributions",className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Distributions"}),e.jsx(K,{variant:"secondary",className:"ml-1",children:R.length})]}),e.jsxs(we,{value:"edge-locations",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Edge Locations"}),e.jsx(K,{variant:"secondary",className:"ml-1",children:U.length})]}),e.jsxs(we,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(Ys,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]}),e.jsx(Pe,{value:"distributions",className:"space-y-4",children:e.jsxs(A,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(F,{children:"CDN Distributions"}),e.jsx(Q,{children:"Content distribution configurations"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-initial sm:w-64",children:[e.jsx(Qe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search distributions...",value:G,onChange:s=>Y(s.target.value),className:"pl-8"}),G&&e.jsx(k,{variant:"ghost",size:"icon",className:"absolute right-1 top-1 h-6 w-6",onClick:()=>Y(""),children:e.jsx(es,{className:"h-3 w-3"})})]}),e.jsxs(k,{onClick:()=>$e(),size:"sm",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Create"]})]})]})}),e.jsx(B,{children:ze.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:G?"No distributions found":"No distributions configured"}):e.jsx("div",{className:"space-y-4",children:ze.map(s=>e.jsxs(A,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(I,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${Ve(s.status)}/20`,children:e.jsx(qe,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(F,{className:"text-lg font-semibold truncate",children:s.domain}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[e.jsx(K,{variant:"outline",className:`${Ze(s.status)} border-0`,children:s.status}),e.jsx(K,{variant:"outline",className:"font-mono text-xs truncate max-w-[200px]",children:s.origin}),s.edgeLocations!==void 0&&e.jsxs(K,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300",children:[s.edgeLocations," edges"]}),s.cacheHitRate!==void 0&&e.jsxs(K,{variant:"outline",className:"bg-purple-50 dark:bg-purple-950/20 text-purple-700 dark:text-purple-300",children:[s.cacheHitRate.toFixed(1),"% cache"]})]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(pe,{children:e.jsxs(fe,{children:[e.jsx(je,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>$e(s),className:"hover:bg-blue-50 dark:hover:bg-blue-950/20",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsx(de,{children:"Edit distribution"})]})}),t.enablePurge!==!1&&e.jsx(pe,{children:e.jsxs(fe,{children:[e.jsx(je,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>Ls(s.id),className:"hover:bg-orange-50 dark:hover:bg-orange-950/20",children:e.jsx(tt,{className:"h-4 w-4"})})}),e.jsx(de,{children:"Purge cache"})]})}),e.jsx(pe,{children:e.jsxs(fe,{children:[e.jsx(je,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>ys(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(as,{className:"h-4 w-4"})})}),e.jsx(de,{children:"Delete distribution"})]})})]})]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[s.requests!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Requests:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.requests.toLocaleString()})]}),s.bandwidth!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Bandwidth:"}),e.jsx("span",{className:"ml-2 font-semibold",children:Je(s.bandwidth)})]}),s.cachePolicy&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Policy:"}),e.jsx("span",{className:"ml-2 font-semibold capitalize",children:s.cachePolicy.replace("-"," ")})]})]})})]},s.id))})})]})}),e.jsx(Pe,{value:"edge-locations",className:"space-y-4",children:e.jsxs(A,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Edge Locations"}),e.jsx(Q,{children:"Global CDN edge servers"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-initial sm:w-64",children:[e.jsx(Qe,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search locations...",value:$,onChange:s=>xe(s.target.value),className:"pl-8"}),$&&e.jsx(k,{variant:"ghost",size:"icon",className:"absolute right-1 top-1 h-6 w-6",onClick:()=>xe(""),children:e.jsx(es,{className:"h-3 w-3"})})]}),e.jsxs(k,{onClick:()=>Ue(),size:"sm",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Create"]})]})]})}),e.jsx(B,{children:Ge.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:$?"No edge locations found":"No edge locations configured"}):e.jsx("div",{className:"space-y-4",children:Ge.map(s=>e.jsxs(A,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(I,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${Ve(s.status)}/20`,children:e.jsx(Me,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(F,{className:"text-lg font-semibold",children:s.city}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[e.jsx(K,{variant:"outline",className:`${Ze(s.status)} border-0`,children:s.status}),e.jsx(K,{variant:"outline",children:s.region}),s.capacity&&e.jsxs(K,{variant:"outline",className:"bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300",children:[s.capacity.toLocaleString()," req/s"]}),s.latency&&e.jsxs(K,{variant:"outline",className:"bg-purple-50 dark:bg-purple-950/20 text-purple-700 dark:text-purple-300",children:[s.latency,"ms"]})]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(pe,{children:e.jsxs(fe,{children:[e.jsx(je,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>Ue(s),className:"hover:bg-green-50 dark:hover:bg-green-950/20",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsx(de,{children:"Edit edge location"})]})}),e.jsx(pe,{children:e.jsxs(fe,{children:[e.jsx(je,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>Cs(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(as,{className:"h-4 w-4"})})}),e.jsx(de,{children:"Delete edge location"})]})})]})]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[s.requests!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Requests:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.requests.toLocaleString()})]}),s.cacheHits!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Cache Hits:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.cacheHits.toLocaleString()})]}),s.bandwidth!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Bandwidth:"}),e.jsx("span",{className:"ml-2 font-semibold",children:Je(s.bandwidth)})]})]})})]},s.id))})})]})}),e.jsxs(Pe,{value:"settings",className:"space-y-4",children:[e.jsxs(A,{children:[e.jsxs(I,{children:[e.jsx(F,{children:"CDN Provider"}),e.jsx(Q,{children:"Select CDN provider"})]}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Provider"}),e.jsxs(te,{value:t.cdnProvider||"cloudflare",onValueChange:s=>j({cdnProvider:s}),children:[e.jsx(ae,{children:e.jsx(ne,{})}),e.jsxs(ie,{children:[e.jsx(v,{value:"cloudflare",children:"Cloudflare"}),e.jsx(v,{value:"cloudfront",children:"AWS CloudFront"}),e.jsx(v,{value:"fastly",children:"Fastly"}),e.jsx(v,{value:"akamai",children:"Akamai"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"CDN provider for content delivery"})]})})]}),e.jsxs(A,{children:[e.jsxs(I,{children:[e.jsx(F,{children:"Caching"}),e.jsx(Q,{children:"Cache configuration"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable Caching"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable content caching at edge locations"})]}),e.jsx(_,{checked:t.enableCaching??!0,onCheckedChange:s=>j({enableCaching:s})})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Cache TTL (seconds)"}),e.jsx(M,{type:"number",value:t.cacheTTL??3600,onChange:s=>j({cacheTTL:parseInt(s.target.value)||3600}),min:1,max:86400}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Default cache time-to-live"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Default TTL (seconds)"}),e.jsx(M,{type:"number",value:t.defaultTTL??3600,onChange:s=>j({defaultTTL:parseInt(s.target.value)||3600}),min:1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Default TTL for distributions"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Max TTL (seconds)"}),e.jsx(M,{type:"number",value:t.maxTTL??86400,onChange:s=>j({maxTTL:parseInt(s.target.value)||86400}),min:1}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum TTL for distributions"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Cache Policy"}),e.jsxs(te,{value:t.cachePolicy??"cache-first",onValueChange:s=>j({cachePolicy:s}),children:[e.jsx(ae,{children:e.jsx(ne,{})}),e.jsxs(ie,{children:[e.jsx(v,{value:"cache-first",children:"Cache First"}),e.jsx(v,{value:"origin-first",children:"Origin First"}),e.jsx(v,{value:"bypass",children:"Bypass Cache"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Default cache policy for distributions"})]})]})]}),e.jsxs(A,{children:[e.jsxs(I,{children:[e.jsx(F,{children:"Compression"}),e.jsx(Q,{children:"Content compression settings"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable Compression"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Compress content before delivery"})]}),e.jsx(_,{checked:t.enableCompression??!0,onCheckedChange:s=>j({enableCompression:s})})]}),t.enableCompression!==!1&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Compression Type"}),e.jsxs(te,{value:t.compressionType||"gzip",onValueChange:s=>j({compressionType:s}),children:[e.jsx(ae,{children:e.jsx(ne,{})}),e.jsxs(ie,{children:[e.jsx(v,{value:"gzip",children:"Gzip"}),e.jsx(v,{value:"brotli",children:"Brotli"}),e.jsx(v,{value:"zstd",children:"Zstandard"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Compression algorithm"})]})]})]}),e.jsxs(A,{children:[e.jsxs(I,{children:[e.jsx(F,{children:"Protocols"}),e.jsx(Q,{children:"HTTP/HTTPS protocol settings"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable SSL/TLS"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for HTTP/2 and HTTP/3"})]}),e.jsx(_,{checked:t.enableSSL??!0,onCheckedChange:s=>{j({enableSSL:s,enableHTTP2:s?t.enableHTTP2??!0:!1,enableHTTP3:s?t.enableHTTP3??!1:!1})}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable HTTP/2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires SSL/TLS"})]}),e.jsx(_,{checked:t.enableHTTP2??!0,disabled:!t.enableSSL,onCheckedChange:s=>{t.enableSSL&&j({enableHTTP2:s})}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable HTTP/3 (QUIC)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires SSL/TLS, can work alongside HTTP/2"})]}),e.jsx(_,{checked:t.enableHTTP3??!1,disabled:!t.enableSSL,onCheckedChange:s=>{t.enableSSL&&j({enableHTTP3:s})}})]}),t.enableHTTP2&&t.enableHTTP3&&t.enableSSL&&e.jsx("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ws,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-medium mb-1",children:"Multiple protocols enabled"}),e.jsx("p",{children:"Both HTTP/2 and HTTP/3 are enabled. The CDN will support both protocols and automatically select the best one for each client connection."})]})]})})]})]}),e.jsxs(A,{children:[e.jsxs(I,{children:[e.jsx(F,{children:"Features"}),e.jsx(Q,{children:"Advanced CDN features"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable Cache Purge"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow manual cache purging"})]}),e.jsx(_,{checked:t.enablePurge??!0,onCheckedChange:s=>j({enablePurge:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable Geo Routing"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Route requests based on geographic location"})]}),e.jsx(_,{checked:t.enableGeoRouting??!1,onCheckedChange:s=>j({enableGeoRouting:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable DDoS Protection"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Protect against DDoS attacks"})]}),e.jsx(_,{checked:t.enableDDoSProtection??!0,onCheckedChange:s=>j({enableDDoSProtection:s})})]})]})]}),e.jsxs(A,{children:[e.jsxs(I,{children:[e.jsx(F,{children:"Metrics Export"}),e.jsx(Q,{children:"Prometheus metrics configuration"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable Metrics Export"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Export CDN metrics for Prometheus scraping"})]}),e.jsx(_,{checked:t.metrics?.enabled??!0,onCheckedChange:s=>j({metrics:{...t.metrics,enabled:s,port:t.metrics?.port||9101,path:t.metrics?.path||"/metrics"}})})]}),t.metrics?.enabled!==!1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Metrics Port"}),e.jsx(M,{type:"number",value:t.metrics?.port??9101,onChange:s=>j({metrics:{...t.metrics,port:parseInt(s.target.value)||9101,path:t.metrics?.path||"/metrics"}}),min:1024,max:65535}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Port for Prometheus metrics endpoint"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Metrics Path"}),e.jsx(M,{type:"text",value:t.metrics?.path??"/metrics",onChange:s=>j({metrics:{...t.metrics,path:s.target.value||"/metrics",port:t.metrics?.port||9101}}),placeholder:"/metrics"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Path for Prometheus metrics endpoint"})]})]})]})]})]})]})]}),e.jsx(De,{open:w,onOpenChange:T,children:e.jsxs(Se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ee,{children:[e.jsx(Re,{children:S?"Edit Distribution":"Create Distribution"}),e.jsx(ke,{children:S?"Update distribution configuration":"Create a new CDN distribution"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"domain",children:"Domain *"}),e.jsx(M,{id:"domain",value:i.domain,onChange:s=>{if(q({...i,domain:s.target.value}),Z({...N,domain:!0}),N.domain){const r={...D};!s.target.value||s.target.value.trim()===""?r.domain="Domain is required":/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/.test(s.target.value)?delete r.domain:r.domain="Invalid domain format (e.g., cdn.example.com)",re(r)}},onBlur:()=>{Z({...N,domain:!0}),me()},placeholder:"cdn.example.com",className:D.domain&&N.domain?"border-red-500 focus-visible:ring-red-500":""}),D.domain&&N.domain&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),D.domain]}),!D.domain&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"CDN distribution domain name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"origin",children:"Origin URL *"}),e.jsx(M,{id:"origin",value:i.origin,onChange:s=>{if(q({...i,origin:s.target.value}),Z({...N,origin:!0}),N.origin){const r={...D};if(!s.target.value||s.target.value.trim()==="")r.origin="Origin URL is required";else try{new URL(s.target.value).protocol.startsWith("http")?delete r.origin:r.origin="Origin URL must use http:// or https:// protocol"}catch{r.origin="Invalid URL format (e.g., https://origin.example.com)"}re(r)}},onBlur:()=>{Z({...N,origin:!0}),me()},placeholder:"https://origin.example.com",className:D.origin&&N.origin?"border-red-500 focus-visible:ring-red-500":""}),D.origin&&N.origin&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),D.origin]}),!D.origin&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Origin server URL"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"status",children:"Status"}),e.jsxs(te,{value:i.status,onValueChange:s=>q({...i,status:s}),children:[e.jsx(ae,{id:"status",children:e.jsx(ne,{})}),e.jsxs(ie,{children:[e.jsx(v,{value:"deployed",children:"Deployed"}),e.jsx(v,{value:"deploying",children:"Deploying"}),e.jsx(v,{value:"failed",children:"Failed"})]})]})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"cachePolicy",children:"Cache Policy"}),e.jsxs(te,{value:i.cachePolicy,onValueChange:s=>q({...i,cachePolicy:s}),children:[e.jsx(ae,{id:"cachePolicy",children:e.jsx(ne,{})}),e.jsxs(ie,{children:[e.jsx(v,{value:"cache-first",children:"Cache First"}),e.jsx(v,{value:"origin-first",children:"Origin First"}),e.jsx(v,{value:"bypass",children:"Bypass Cache"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"defaultTTL",children:"Default TTL (seconds)"}),e.jsx(M,{id:"defaultTTL",type:"number",value:i.defaultTTL,onChange:s=>{const r=parseInt(s.target.value)||3600;if(q({...i,defaultTTL:r}),Z({...N,defaultTTL:!0}),N.defaultTTL){const h={...D};r<1?h.defaultTTL="Default TTL must be at least 1 second":delete h.defaultTTL,i.maxTTL!==void 0&&i.maxTTL<r?h.maxTTL="Max TTL must be greater than or equal to Default TTL":h.maxTTL==="Max TTL must be greater than or equal to Default TTL"&&delete h.maxTTL,re(h)}},onBlur:()=>{Z({...N,defaultTTL:!0}),me()},min:1,className:D.defaultTTL&&N.defaultTTL?"border-red-500 focus-visible:ring-red-500":""}),D.defaultTTL&&N.defaultTTL&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),D.defaultTTL]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"maxTTL",children:"Max TTL (seconds)"}),e.jsx(M,{id:"maxTTL",type:"number",value:i.maxTTL,onChange:s=>{const r=parseInt(s.target.value)||86400;if(q({...i,maxTTL:r}),Z({...N,maxTTL:!0}),N.maxTTL){const h={...D};r<1?h.maxTTL="Max TTL must be at least 1 second":i.defaultTTL!==void 0&&r<i.defaultTTL?h.maxTTL="Max TTL must be greater than or equal to Default TTL":delete h.maxTTL,re(h)}},onBlur:()=>{Z({...N,maxTTL:!0}),me()},min:1,className:D.maxTTL&&N.maxTTL?"border-red-500 focus-visible:ring-red-500":""}),D.maxTTL&&N.maxTTL&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),D.maxTTL]})]})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable Compression"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Compress content before delivery"})]}),e.jsx(_,{checked:i.enableCompression??!0,onCheckedChange:s=>q({...i,enableCompression:s})})]}),i.enableCompression!==!1&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"compressionType",children:"Compression Type"}),e.jsxs(te,{value:i.compressionType,onValueChange:s=>q({...i,compressionType:s}),children:[e.jsx(ae,{id:"compressionType",children:e.jsx(ne,{})}),e.jsxs(ie,{children:[e.jsx(v,{value:"gzip",children:"Gzip"}),e.jsx(v,{value:"brotli",children:"Brotli"}),e.jsx(v,{value:"zstd",children:"Zstandard"})]})]})]})]}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable HTTPS"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for HTTP/2 and HTTP/3"})]}),e.jsx(_,{checked:i.enableHTTPS??!0,onCheckedChange:s=>{q({...i,enableHTTPS:s,enableHTTP2:s?i.enableHTTP2??!0:!1,enableHTTP3:s?i.enableHTTP3??!1:!1})}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable HTTP/2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires HTTPS"})]}),e.jsx(_,{checked:i.enableHTTP2??!0,disabled:!i.enableHTTPS,onCheckedChange:s=>{i.enableHTTPS&&q({...i,enableHTTP2:s})}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable HTTP/3 (QUIC)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires HTTPS, can work with HTTP/2"})]}),e.jsx(_,{checked:i.enableHTTP3??!1,disabled:!i.enableHTTPS,onCheckedChange:s=>{i.enableHTTPS&&q({...i,enableHTTP3:s})}})]}),e.jsx(oe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable Geo Routing"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Route requests based on geographic location"})]}),e.jsx(_,{checked:i.enableGeoRouting??!1,onCheckedChange:s=>q({...i,enableGeoRouting:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(m,{children:"Enable DDoS Protection"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Protect against DDoS attacks"})]}),e.jsx(_,{checked:i.enableDDoSProtection??!0,onCheckedChange:s=>q({...i,enableDDoSProtection:s})})]})]})]}),e.jsxs(He,{children:[e.jsx(k,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(k,{onClick:Ts,children:"Save"})]})]})}),e.jsx(De,{open:y,onOpenChange:P,children:e.jsxs(Se,{children:[e.jsxs(Ee,{children:[e.jsx(Re,{children:O?"Edit Edge Location":"Create Edge Location"}),e.jsx(ke,{children:O?"Update edge location configuration":"Create a new edge location"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"city",children:"City *"}),e.jsx(M,{id:"city",value:p.city,onChange:s=>{if(se({...p,city:s.target.value}),J({...C,city:!0}),C.city){const r={...E};!s.target.value||s.target.value.trim()===""?r.city="City is required":delete r.city,ce(r)}},onBlur:()=>{J({...C,city:!0}),ge()},placeholder:"New York",className:E.city&&C.city?"border-red-500 focus-visible:ring-red-500":""}),E.city&&C.city&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),E.city]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"region",children:"Region *"}),e.jsx(M,{id:"region",value:p.region,onChange:s=>{if(se({...p,region:s.target.value}),J({...C,region:!0}),C.region){const r={...E};!s.target.value||s.target.value.trim()===""?r.region="Region is required":delete r.region,ce(r)}},onBlur:()=>{J({...C,region:!0}),ge()},placeholder:"us-east-1",className:E.region&&C.region?"border-red-500 focus-visible:ring-red-500":""}),E.region&&C.region&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),E.region]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"edgeStatus",children:"Status"}),e.jsxs(te,{value:p.status,onValueChange:s=>se({...p,status:s}),children:[e.jsx(ae,{id:"edgeStatus",children:e.jsx(ne,{})}),e.jsxs(ie,{children:[e.jsx(v,{value:"active",children:"Active"}),e.jsx(v,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"capacity",children:"Capacity (req/s)"}),e.jsx(M,{id:"capacity",type:"number",value:p.capacity,onChange:s=>{const r=parseInt(s.target.value)||1e4;if(se({...p,capacity:r}),J({...C,capacity:!0}),C.capacity){const h={...E};r<1?h.capacity="Capacity must be at least 1 req/s":r>1e6?h.capacity="Capacity cannot exceed 1,000,000 req/s":delete h.capacity,ce(h)}},onBlur:()=>{J({...C,capacity:!0}),ge()},min:1,className:E.capacity&&C.capacity?"border-red-500 focus-visible:ring-red-500":""}),E.capacity&&C.capacity&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),E.capacity]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"latency",children:"Latency (ms)"}),e.jsx(M,{id:"latency",type:"number",value:p.latency,onChange:s=>{const r=parseInt(s.target.value)||50;if(se({...p,latency:r}),J({...C,latency:!0}),C.latency){const h={...E};r<1?h.latency="Latency must be at least 1ms":r>1e4?h.latency="Latency cannot exceed 10,000ms":delete h.latency,ce(h)}},onBlur:()=>{J({...C,latency:!0}),ge()},min:1,className:E.latency&&C.latency?"border-red-500 focus-visible:ring-red-500":""}),E.latency&&C.latency&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),E.latency]})]})]})]}),e.jsxs(He,{children:[e.jsx(k,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(k,{onClick:Ns,children:"Save"})]})]})}),e.jsx(De,{open:Te,onOpenChange:ye,children:e.jsxs(Se,{children:[e.jsxs(Ee,{children:[e.jsx(Re,{children:"Purge Cache"}),e.jsx(ke,{children:"This will purge all cached content for this distribution. This action cannot be undone."})]}),e.jsxs(He,{children:[e.jsx(k,{variant:"outline",onClick:()=>ye(!1),children:"Cancel"}),e.jsx(k,{variant:"destructive",onClick:ws,children:"Purge Cache"})]})]})})]})}export{kt as CDNConfigAdvanced};

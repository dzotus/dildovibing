import{u as se,j as e,r as y,i as p,S as z,C as n,e as r,f as i,k as l,F as w,A as D,T as ae,a as te,b as k,N as B,c as ne,d as C,h as T,P as F,B as x,W as le,m as V,L as t,I as h,n as $,o as H,p as P,q as R,s as A,t as S,X as J}from"./index-B7PftTIS.js";import{R as re}from"./refresh-ccw-DqCUVkkK.js";import{S as N}from"./server-C8_lc4_k.js";import{C as f}from"./circle-check-big-CPaBHWOP.js";import{C as ie}from"./clock-hDKlFJVm.js";function ve({componentId:E}){const{nodes:U,updateNode:M}=se(),I=U.find(s=>s.id===E);if(!I)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const o=I.data.config||{},c=o.inventories||[{id:"1",name:"production",type:"static",hosts:[{name:"web1.example.com",groups:["web"],variables:{ansible_user:"ubuntu"}},{name:"db1.example.com",groups:["database"],variables:{ansible_user:"ubuntu"}}],groups:[{name:"web",hosts:["web1.example.com"],variables:{}},{name:"database",hosts:["db1.example.com"],variables:{}}]}],u=o.jobTemplates||[{id:"1",name:"Deploy Application",playbook:"deploy.yml",inventory:"production",enabled:!0,become:!0,becomeUser:"root",forks:5,timeout:3600}],b=o.jobs||[{id:"1",template:"Deploy Application",status:"successful",startedAt:new Date().toISOString(),finishedAt:new Date(Date.now()+12e4).toISOString(),duration:120,hosts:[{name:"web1.example.com",status:"ok"},{name:"db1.example.com",status:"ok"}]}],O=o.totalInventories||c.length,G=o.totalTemplates||u.length,X=o.activeJobs||b.filter(s=>s.status==="running").length,_=o.successfulJobs||b.filter(s=>s.status==="successful").length,[ce,de]=y.useState(null),[xe,oe]=y.useState(null),[me,q]=y.useState(!1),[he,K]=y.useState(!1),j=s=>{M(E,{data:{...I.data,config:{...o,...s}}})},W=()=>{const s={id:`inv-${Date.now()}`,name:"new-inventory",type:"static",hosts:[],groups:[]};j({inventories:[...c,s]}),q(!1)},Q=s=>{j({inventories:c.filter(a=>a.id!==s)})},L=(s,a,d)=>{const v=c.map(g=>g.id===s?{...g,[a]:d}:g);j({inventories:v})},Y=()=>{const s={id:`template-${Date.now()}`,name:"New Template",playbook:"playbook.yml",inventory:c[0]?.name||"",enabled:!0,become:!1,forks:5,timeout:3600};j({jobTemplates:[...u,s]}),K(!1)},Z=s=>{j({jobTemplates:u.filter(a=>a.id!==s)})},m=(s,a,d)=>{const v=u.map(g=>g.id===s?{...g,[a]:d}:g);j({jobTemplates:v})},ee=s=>{const a=u.find(v=>v.id===s);if(!a)return;const d={id:`job-${Date.now()}`,template:a.name,status:"running",startedAt:new Date().toISOString()};j({jobs:[d,...b.slice(0,9)]})};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Ansible"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Configuration Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage inventories, job templates, and automation jobs"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(p,{variant:"outline",size:"sm",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(z,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(n,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Inventories"}),e.jsx(N,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:O}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"configured"})]})})]}),e.jsxs(n,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Job Templates"}),e.jsx(w,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:G}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"available"})]})})]}),e.jsxs(n,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Active Jobs"}),e.jsx(D,{className:"h-4 w-4 text-cyan-500 animate-pulse"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:X}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"running"})]})})]}),e.jsxs(n,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Successful"}),e.jsx(f,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:_}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"completed"})]})})]})]}),e.jsxs(ae,{defaultValue:"inventories",className:"space-y-4",children:[e.jsxs(te,{children:[e.jsxs(k,{value:"inventories",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Inventories (",c.length,")"]}),e.jsxs(k,{value:"templates",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Job Templates (",u.length,")"]}),e.jsxs(k,{value:"jobs",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Jobs (",b.length,")"]}),e.jsxs(k,{value:"settings",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(C,{value:"inventories",className:"space-y-4",children:e.jsxs(n,{children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Inventories"}),e.jsx(T,{children:"Manage host inventories"})]}),e.jsxs(p,{onClick:W,size:"sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Create Inventory"]})]})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsxs(n,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(N,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(i,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(x,{variant:"outline",className:"font-medium",children:s.type==="static"?"Static":"Dynamic"}),s.hosts&&e.jsxs(x,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),s.hosts.length," hosts"]}),s.groups&&e.jsxs(x,{variant:"outline",className:"bg-purple-50 dark:bg-purple-950/20 text-purple-700 dark:text-purple-300",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),s.groups.length," groups"]})]})]})]}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>Q(s.id),disabled:c.length===1,className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(V,{className:"h-4 w-4"})})]})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Inventory Name"}),e.jsx(h,{value:s.name,onChange:a=>L(s.id,"name",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Inventory Type"}),e.jsxs($,{value:s.type,onValueChange:a=>L(s.id,"type",a),children:[e.jsx(H,{children:e.jsx(P,{})}),e.jsxs(R,{children:[e.jsx(A,{value:"static",children:"Static"}),e.jsx(A,{value:"dynamic",children:"Dynamic"})]})]})]})]}),s.hosts&&s.hosts.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Hosts"}),e.jsx("div",{className:"space-y-1",children:s.hosts.map((a,d)=>e.jsx(x,{variant:"outline",className:"mr-2",children:a.name},d))})]})]})]},s.id))})})]})}),e.jsx(C,{value:"templates",className:"space-y-4",children:e.jsxs(n,{children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Job Templates"}),e.jsx(T,{children:"Configure automation job templates"})]}),e.jsxs(p,{onClick:Y,size:"sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Create Template"]})]})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsxs(n,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/30",children:e.jsx(w,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx(i,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(x,{variant:s.enabled?"default":"outline",className:s.enabled?"bg-green-500":"",children:s.enabled?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-3 w-3 mr-1"}),"Enabled"]}):"Disabled"}),e.jsxs(x,{variant:"outline",className:"font-mono text-xs",children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),s.playbook]}),e.jsxs(x,{variant:"outline",className:"text-xs",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),s.inventory]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{size:"sm",variant:"default",onClick:()=>ee(s.id),disabled:!s.enabled,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Launch"]}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>Z(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(V,{className:"h-4 w-4"})})]})]})}),e.jsx(l,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Template Name"}),e.jsx(h,{value:s.name,onChange:a=>m(s.id,"name",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Playbook"}),e.jsx(h,{value:s.playbook,onChange:a=>m(s.id,"playbook",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Inventory"}),e.jsxs($,{value:s.inventory,onValueChange:a=>m(s.id,"inventory",a),children:[e.jsx(H,{children:e.jsx(P,{})}),e.jsx(R,{children:c.map(a=>e.jsx(A,{value:a.name,children:a.name},a.id))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{children:"Enabled"}),e.jsx(S,{checked:s.enabled,onCheckedChange:a=>m(s.id,"enabled",a)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{children:"Become (sudo)"}),e.jsx(S,{checked:s.become??!1,onCheckedChange:a=>m(s.id,"become",a)})]}),s.become&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Become User"}),e.jsx(h,{value:s.becomeUser||"root",onChange:a=>m(s.id,"becomeUser",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Forks"}),e.jsx(h,{type:"number",value:s.forks||5,onChange:a=>m(s.id,"forks",Number(a.target.value)),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Timeout (seconds)"}),e.jsx(h,{type:"number",value:s.timeout||3600,onChange:a=>m(s.id,"timeout",Number(a.target.value)),min:1})]})]})})]},s.id))})})]})}),e.jsx(C,{value:"jobs",className:"space-y-4",children:e.jsxs(n,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Job History"}),e.jsx(T,{children:"Execution history and status"})]}),e.jsx(l,{children:b.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No jobs executed"}):e.jsx("div",{className:"space-y-2",children:b.map(s=>e.jsx(n,{className:`border-l-4 hover:shadow-md transition-all ${s.status==="successful"?"border-l-green-500 bg-card":s.status==="failed"?"border-l-red-500 bg-card":s.status==="running"?"border-l-blue-500 bg-card":"border-l-gray-500 bg-card"}`,children:e.jsx(l,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:`p-2 rounded-lg ${s.status==="successful"?"bg-green-100 dark:bg-green-900/30":s.status==="failed"?"bg-red-100 dark:bg-red-900/30":s.status==="running"?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-gray-900/30"}`,children:[s.status==="successful"&&e.jsx(f,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),s.status==="failed"&&e.jsx(J,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),s.status==="running"&&e.jsx(D,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 animate-pulse"}),s.status==="canceled"&&e.jsx(J,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(x,{variant:s.status==="successful"?"default":s.status==="failed"?"destructive":s.status==="running"?"secondary":"outline",className:"font-medium",children:s.status}),e.jsx("span",{className:"font-semibold text-base",children:s.template})]}),s.hosts&&e.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:s.hosts.map((a,d)=>e.jsxs(x,{variant:a.status==="ok"?"default":a.status==="failed"?"destructive":"outline",className:"text-xs",children:[a.status==="ok"&&e.jsx(f,{className:"h-3 w-3 mr-1"}),a.status==="failed"&&e.jsx(J,{className:"h-3 w-3 mr-1"}),a.name,": ",a.status]},d))}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"h-3 w-3"}),new Date(s.startedAt).toLocaleString()]}),s.finishedAt&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-3 w-3"}),new Date(s.finishedAt).toLocaleString()]}),s.duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),s.duration,"s"]})]})]})]})})},s.id))})})]})}),e.jsx(C,{value:"settings",className:"space-y-4",children:e.jsxs(n,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Ansible Settings"}),e.jsx(T,{children:"Global configuration"})]}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Default Forks"}),e.jsx(h,{type:"number",defaultValue:5,min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Default Timeout (seconds)"}),e.jsx(h,{type:"number",defaultValue:3600,min:1})]}),e.jsx(z,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{children:"Enable Host Key Checking"}),e.jsx(S,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{children:"Enable Gathering Facts"}),e.jsx(S,{defaultChecked:!0})]})]})]})})]})]})})}export{ve as AnsibleConfigAdvanced};

import{r as o,j as e,aq as Z,u as ws,a as Ss,e as J,S as Q,C as j,h as E,i as q,m as b,B as de,T as ks,b as Ms,c as ee,d as Ts,a3 as Ds,a5 as Rs,f as se,k as ae,L as r,q as O,s as $,t as F,v as V,w as m,I as l,l as u,P as W,o as I,x as C,au as As,a4 as Es,R as Ls,ao as zs,n as Bs}from"./index-Car91T5O.js";import{T as Oe}from"./textarea-Cgvn3GTT.js";import{A as $e,b as Fe}from"./alert-B2AJvFl-.js";import{M as Ve}from"./message-square-B_FmXzVl.js";import{S as Ps}from"./shield-COME9V66.js";import{K as Qs}from"./key-CoRPiE9i.js";import{C as We}from"./clock-BOdoVIm8.js";import{C as qs}from"./circle-check-big-CySS52e5.js";const He=o.forwardRef(({className:d,...w},N)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:N,className:Z("w-full caption-bottom text-sm",d),...w})}));He.displayName="Table";const Ue=o.forwardRef(({className:d,...w},N)=>e.jsx("thead",{ref:N,className:Z("[&_tr]:border-b",d),...w}));Ue.displayName="TableHeader";const _e=o.forwardRef(({className:d,...w},N)=>e.jsx("tbody",{ref:N,className:Z("[&_tr:last-child]:border-0",d),...w}));_e.displayName="TableBody";const Is=o.forwardRef(({className:d,...w},N)=>e.jsx("tfoot",{ref:N,className:Z("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",d),...w}));Is.displayName="TableFooter";const Ce=o.forwardRef(({className:d,...w},N)=>e.jsx("tr",{ref:N,className:Z("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",d),...w}));Ce.displayName="TableRow";const X=o.forwardRef(({className:d,...w},N)=>e.jsx("th",{ref:N,className:Z("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",d),...w}));X.displayName="TableHead";const _=o.forwardRef(({className:d,...w},N)=>e.jsx("td",{ref:N,className:Z("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",d),...w}));_.displayName="TableCell";const Os=o.forwardRef(({className:d,...w},N)=>e.jsx("caption",{ref:N,className:Z("mt-4 text-sm text-muted-foreground",d),...w}));Os.displayName="TableCaption";function Ys({componentId:d}){const{nodes:w,updateNode:N}=ws(),{isRunning:oe}=Ss(),K=w.find(s=>s.id===d),ue=o.useRef(K);if(o.useEffect(()=>{ue.current=K},[K]),!K)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const M=K.data.config||{},me=M.namespace||"archiphoenix.servicebus.windows.net",Ke=M.connectionString||"",z=M.queues||[],k=M.topics||[],[$s,Fs]=o.useState(null),[Vs,Ws]=o.useState(null),[we,Se]=o.useState({}),[te,ke]=o.useState({}),[G,he]=o.useState({}),[p,Je]=o.useState("queue"),[y,Ee]=o.useState(""),[g,Le]=o.useState(""),[S,Me]=o.useState(""),[Y,xe]=o.useState(!1),[re,je]=o.useState(!1),[pe,ge]=o.useState(!1),[ce,ve]=o.useState(!1),[fe,Te]=o.useState([]),[Ne,Xe]=o.useState("");o.useEffect(()=>{if(!K||z.length===0&&k.length===0||!oe)return;const s=setInterval(()=>{const a=J.getAzureServiceBusRoutingEngine(d);if(!a)return;const t=ue.current;if(!t)return;const n=t.data.config||{},i=n.queues||[],c=n.topics||[],f=a.getAllQueueMetrics(),x=a.getAllSubscriptionMetrics(),be=i.map(T=>{const D=f.get(T.name);return D?{...T,activeMessageCount:D.activeMessageCount,deadLetterMessageCount:D.deadLetterMessageCount,scheduledMessageCount:D.scheduledMessageCount,deferredMessageCount:D.deferredMessageCount||0}:T}),Ie=c.map(T=>{const D=(T.subscriptions||[]).map(ne=>{const le=`${T.name}/subscriptions/${ne.name}`,ie=x.get(le);return ie?{...ne,activeMessageCount:ie.activeMessageCount,deadLetterMessageCount:ie.deadLetterMessageCount||0,deferredMessageCount:ie.deferredMessageCount||0}:ne});return{...T,subscriptions:D}}),ys=be.some((T,D)=>T.activeMessageCount!==i[D]?.activeMessageCount||T.deadLetterMessageCount!==i[D]?.deadLetterMessageCount||T.scheduledMessageCount!==i[D]?.scheduledMessageCount||T.deferredMessageCount!==(i[D]?.deferredMessageCount||0)),Cs=Ie.some((T,D)=>{const ne=c[D];return ne?(T.subscriptions||[]).some((le,ie)=>{const ye=ne.subscriptions?.[ie];return ye?le.activeMessageCount!==ye.activeMessageCount||le.deadLetterMessageCount!==(ye.deadLetterMessageCount||0)||le.deferredMessageCount!==(ye.deferredMessageCount||0):!1}):!1});(ys||Cs)&&ue.current&&N(d,{data:{...ue.current.data,config:{...n,queues:be,topics:Ie}}})},500);return()=>clearInterval(s)},[d,z.length,k.length,K?.id,N,oe]);const De=s=>!s||s.trim()===""?"Name cannot be empty":s.length<1||s.length>260?"Name must be between 1 and 260 characters":/^[a-zA-Z0-9._-]+$/.test(s)?s.startsWith(".")||s.endsWith(".")?"Name cannot start or end with a period":s.startsWith("-")||s.endsWith("-")?"Name cannot start or end with a hyphen":s.includes("..")?"Name cannot contain consecutive periods":null:"Name can only contain letters, numbers, periods, hyphens, and underscores",R=s=>{N(d,{data:{...K.data,config:{...M,...s}}})},Ze=()=>{const s={name:"new-queue",namespace:me,maxSizeInMegabytes:1024,defaultMessageTimeToLive:2592e3,lockDuration:30,maxDeliveryCount:10,enablePartitioning:!1,enableDeadLetteringOnMessageExpiration:!0,enableSessions:!1,enableDuplicateDetection:!1,duplicateDetectionHistoryTimeWindow:600,forwardTo:void 0,enableBatchedOperations:!1,activeMessageCount:0,deadLetterMessageCount:0,scheduledMessageCount:0};R({queues:[...z,s]})},Ge=s=>{const a={};for(const[t,n]of Object.entries(we)){const i=Number(t);i<s?a[i]=n:i>s&&(a[i-1]=n)}Se(a),R({queues:z.filter((t,n)=>n!==s)})},L=(s,a,t)=>{if(a==="name"){const i=De(t);if(i){Se({...we,[s]:i});return}else{const c={...we};delete c[s],Se(c)}}const n=[...z];n[s]={...n[s],[a]:t},R({queues:n})},Ye=()=>{const s={name:"new-topic",namespace:me,maxSizeInMegabytes:1024,defaultMessageTimeToLive:2592e3,enablePartitioning:!1,enableDuplicateDetection:!1,duplicateDetectionHistoryTimeWindow:600,forwardTo:void 0,enableBatchedOperations:!1,subscriptions:[]};R({topics:[...k,s]})},es=s=>{const a={};for(const[n,i]of Object.entries(te)){const c=Number(n);c<s?a[c]=i:c>s&&(a[c-1]=i)}ke(a);const t={};for(const[n,i]of Object.entries(G)){const[c,f]=n.split("-").map(Number);c<s?t[n]=i:c>s&&(t[`${c-1}-${f}`]=i)}he(t),R({topics:k.filter((n,i)=>i!==s)})},B=(s,a,t)=>{if(a==="name"){const i=De(t);if(i){ke({...te,[s]:i});return}else{const c={...te};delete c[s],ke(c)}}const n=[...k];n[s]={...n[s],[a]:t},R({topics:n})},ss=s=>{const a=k[s];if(a){const t={name:"new-subscription",maxDeliveryCount:10,lockDuration:30,enableDeadLetteringOnMessageExpiration:!0,requiresSession:!1,forwardTo:void 0,enableBatchedOperations:!1,rules:[],activeMessageCount:0},n=[...a.subscriptions||[],t];B(s,"subscriptions",n)}},as=(s,a)=>{const t={};for(const[i,c]of Object.entries(G)){const[f,x]=i.split("-").map(Number);f!==s||x<a?t[i]=c:x>a&&(t[`${s}-${x-1}`]=c)}he(t);const n=k[s];if(n&&n.subscriptions){const i=n.subscriptions.filter((c,f)=>f!==a);B(s,"subscriptions",i)}},A=(s,a,t,n)=>{if(t==="name"){const c=`${s}-${a}`,f=De(n);if(f){he({...G,[c]:f});return}else{const x={...G};delete x[c],he(x)}}const i=k[s];if(i&&i.subscriptions){const c=[...i.subscriptions];c[a]={...c[a],[t]:n},B(s,"subscriptions",c)}},ts=z.reduce((s,a)=>s+(a.activeMessageCount||0),0)+k.reduce((s,a)=>s+(a.subscriptions?.reduce((t,n)=>t+(n.activeMessageCount||0),0)||0),0),h=M.networking||{publicNetworkAccess:"enabled",minimumTlsVersion:"1.2",firewallRules:[],virtualNetworkRules:[],privateEndpoints:[]},P=s=>{R({networking:{...h,...s}})},ns=()=>{const s={name:"new-firewall-rule",ipRange:"0.0.0.0/0"};P({firewallRules:[...h.firewallRules||[],s]})},is=s=>{const a=[...h.firewallRules||[]];a.splice(s,1),P({firewallRules:a})},ze=(s,a,t)=>{const n=[...h.firewallRules||[]];n[s]={...n[s],[a]:t},P({firewallRules:n})},rs=()=>{const s={name:"new-vnet-rule",subnetId:"/subscriptions/.../subnets/..."};P({virtualNetworkRules:[...h.virtualNetworkRules||[],s]})},cs=s=>{const a=[...h.virtualNetworkRules||[]];a.splice(s,1),P({virtualNetworkRules:a})},Be=(s,a,t)=>{const n=[...h.virtualNetworkRules||[]];n[s]={...n[s],[a]:t},P({virtualNetworkRules:n})},ls=()=>{const s={name:"new-private-endpoint",subnetId:"/subscriptions/.../subnets/..."};P({privateEndpoints:[...h.privateEndpoints||[],s]})},ds=s=>{const a=[...h.privateEndpoints||[]];a.splice(s,1),P({privateEndpoints:a})},Pe=(s,a,t)=>{const n=[...h.privateEndpoints||[]];n[s]={...n[s],[a]:t},P({privateEndpoints:n})},v=M.security||{sasPolicies:[],rbacAssignments:[],managedIdentities:[]},H=s=>{R({security:{...v,...s}})},os=()=>{const s={name:"new-sas-policy",permissions:["Send","Listen"]};H({sasPolicies:[...v.sasPolicies||[],s]})},us=s=>{const a=[...v.sasPolicies||[]];a.splice(s,1),H({sasPolicies:a})},Qe=(s,a,t)=>{const n=[...v.sasPolicies||[]];n[s]={...n[s],[a]:t},H({sasPolicies:n})},Re=(s,a)=>{const t=v.sasPolicies?.[s];if(!t)return;const n=[...t.permissions||[]],i=n.indexOf(a);i>=0?n.splice(i,1):n.push(a),Qe(s,"permissions",n)},ms=()=>{const s={principalId:"",role:"Reader"};H({rbacAssignments:[...v.rbacAssignments||[],s]})},hs=s=>{const a=[...v.rbacAssignments||[]];a.splice(s,1),H({rbacAssignments:a})},qe=(s,a,t)=>{const n=[...v.rbacAssignments||[]];n[s]={...n[s],[a]:t},H({rbacAssignments:n})},xs=()=>{const s={name:"new-identity",type:"SystemAssigned"};H({managedIdentities:[...v.managedIdentities||[],s]})},js=s=>{const a=[...v.managedIdentities||[]];a.splice(s,1),H({managedIdentities:a})},Ae=(s,a,t)=>{const n=[...v.managedIdentities||[]];n[s]={...n[s],[a]:t},H({managedIdentities:n})},U=()=>{const s=J.getAzureServiceBusRoutingEngine(d);if(!s){Te([]);return}let a=[];if(p==="queue"&&y?Y?a=s.getDeadLetterQueueMessages(y):re?a=s.getDeferredQueueMessages(y):pe?a=s.getScheduledQueueMessages(y):ce?a=s.getLockedQueueMessages(y):a=s.peekQueueMessages(y,100):p==="subscription"&&g&&S&&(Y?a=s.getDeadLetterSubscriptionMessages(g,S):re?a=s.getDeferredSubscriptionMessages(g,S):ce?a=s.getLockedSubscriptionMessages(g,S):a=s.peekSubscriptionMessages(g,S,100)),Ne){const t=Ne.toLowerCase();a=a.filter(n=>n.messageId?.toLowerCase().includes(t)||n.id?.toLowerCase().includes(t)||JSON.stringify(n.properties||{}).toLowerCase().includes(t)||JSON.stringify(n.payload).toLowerCase().includes(t))}Te(a)},ps=s=>{const a=J.getAzureServiceBusRoutingEngine(d);if(!a)return;const t=p==="queue"?y:`${g}/subscriptions/${S}`;a.completeMessage(t,s),U()},gs=s=>{const a=J.getAzureServiceBusRoutingEngine(d);if(!a)return;const t=p==="queue"?y:`${g}/subscriptions/${S}`;a.abandonMessage(t,s),U()},vs=s=>{const a=J.getAzureServiceBusRoutingEngine(d);if(!a)return;const t=p==="queue"?y:`${g}/subscriptions/${S}`;a.deferMessage(t,s),U()},fs=s=>{const a=J.getAzureServiceBusRoutingEngine(d);if(!a)return;const t=p==="queue"?y:`${g}/subscriptions/${S}`;a.sendToDeadLetter(t,s),U()},Ns=s=>{const a=J.getAzureServiceBusRoutingEngine(d);if(!a)return;const t=p==="queue"?y:`${g}/subscriptions/${S}`;a.resubmitMessage(t,s),U()},bs=s=>{const a=J.getAzureServiceBusRoutingEngine(d);if(!a)return;const t=p==="queue"?y:`${g}/subscriptions/${S}`;a.deleteDeadLetterMessage(t,s),U()};return o.useEffect(()=>{p==="queue"&&y||p==="subscription"&&g&&S?U():Te([])},[p,y,g,S,Y,re,pe,ce,Ne,d]),o.useEffect(()=>{if(!oe)return;const s=setInterval(()=>{(p==="queue"&&y||p==="subscription"&&g&&S)&&U()},1e3);return()=>clearInterval(s)},[oe,p,y,g,S,Y,re,pe,ce,d]),e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Azure Service Bus"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Service Bus Namespace"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure queues, topics and subscriptions with sessions and dead-lettering"})]})}),e.jsx(Q,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(j,{children:[e.jsx(E,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Namespace"})}),e.jsx(b,{children:e.jsx(de,{variant:"outline",className:"truncate max-w-full",children:me})})]}),e.jsxs(j,{children:[e.jsx(E,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Queues"})}),e.jsx(b,{children:e.jsx("span",{className:"text-2xl font-bold",children:z.length})})]}),e.jsxs(j,{children:[e.jsx(E,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Topics"})}),e.jsx(b,{children:e.jsx("span",{className:"text-2xl font-bold",children:k.length})})]}),e.jsxs(j,{children:[e.jsx(E,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Total Messages"})}),e.jsx(b,{children:e.jsx("span",{className:"text-2xl font-bold",children:ts.toLocaleString()})})]})]}),e.jsxs(ks,{defaultValue:"queues",className:"space-y-4",children:[e.jsxs(Ms,{className:"flex-wrap h-auto",children:[e.jsxs(ee,{value:"namespace",className:"flex-shrink-0",children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Namespace Settings"]}),e.jsxs(ee,{value:"queues",className:"flex-shrink-0",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Queues (",z.length,")"]}),e.jsxs(ee,{value:"topics",className:"flex-shrink-0",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Topics (",k.length,")"]}),e.jsxs(ee,{value:"networking",className:"flex-shrink-0",children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Networking"]}),e.jsxs(ee,{value:"security",className:"flex-shrink-0",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Security"]}),e.jsxs(ee,{value:"connection",className:"flex-shrink-0",children:[e.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Connection"]}),e.jsxs(ee,{value:"messages",className:"flex-shrink-0",children:[e.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Message Explorer"]})]}),e.jsx(se,{value:"namespace",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(E,{children:[e.jsx(q,{children:"Namespace Settings"}),e.jsx(ae,{children:"Configure Azure Service Bus namespace tier and capacity"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Pricing Tier"}),e.jsxs(O,{value:M.pricingTier||"standard",onValueChange:s=>R({pricingTier:s}),children:[e.jsx($,{children:e.jsx(F,{})}),e.jsxs(V,{children:[e.jsx(m,{value:"basic",children:"Basic"}),e.jsx(m,{value:"standard",children:"Standard"}),e.jsx(m,{value:"premium",children:"Premium"})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[M.pricingTier==="basic"&&"Basic tier: 1000 msg/s, 256KB message size limit",M.pricingTier==="standard"&&"Standard tier: 10000 msg/s, 256KB message size limit",M.pricingTier==="premium"&&"Premium tier: 100000 msg/s per messaging unit, 100MB message size limit"]})]}),M.pricingTier==="premium"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Messaging Units"}),e.jsx(l,{type:"number",min:1,max:16,value:M.messagingUnits||1,onChange:s=>R({messagingUnits:Math.max(1,Math.min(16,Number(s.target.value)))}),placeholder:"1"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of messaging units (1-16). Each unit provides 100000 msg/s throughput."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Consumption Rate (messages/second)"}),e.jsx(l,{type:"number",min:1,value:M.consumptionRate||10,onChange:s=>R({consumptionRate:Math.max(1,Number(s.target.value))}),placeholder:"10"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rate at which messages are consumed from queues/subscriptions and sent to outgoing connections."})]})]})]})}),e.jsx(se,{value:"queues",className:"space-y-4",children:e.jsxs(j,{children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Queues"}),e.jsx(ae,{children:"Configure Service Bus queues"})]}),e.jsxs(u,{onClick:Ze,size:"sm",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Create Queue"]})]})}),e.jsx(b,{children:e.jsx("div",{className:"space-y-4",children:z.map((s,a)=>e.jsxs(j,{className:"border-l-4 border-l-blue-500",children:[e.jsx(E,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(r,{children:"Queue Name"}),e.jsx(l,{value:s.name,onChange:t=>L(a,"name",t.target.value),placeholder:"queue-name"})]}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>Ge(a),disabled:z.length===1,className:"ml-4",children:e.jsx(I,{className:"h-4 w-4"})})]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Messages"}),e.jsx("p",{className:"text-lg font-semibold",children:s.activeMessageCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dead Letter"}),e.jsx("p",{className:"text-lg font-semibold",children:s.deadLetterMessageCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled"}),e.jsx("p",{className:"text-lg font-semibold",children:s.scheduledMessageCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Deferred"}),e.jsx("p",{className:"text-lg font-semibold",children:s.deferredMessageCount||0})]})]}),e.jsx(Q,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Max Size (MB)"}),e.jsx(l,{type:"number",value:s.maxSizeInMegabytes,onChange:t=>L(a,"maxSizeInMegabytes",Number(t.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Message TTL (seconds)"}),e.jsx(l,{type:"number",value:s.defaultMessageTimeToLive,onChange:t=>L(a,"defaultMessageTimeToLive",Number(t.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Lock Duration (seconds)"}),e.jsx(l,{type:"number",value:s.lockDuration,onChange:t=>L(a,"lockDuration",Number(t.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Max Delivery Count"}),e.jsx(l,{type:"number",value:s.maxDeliveryCount,onChange:t=>L(a,"maxDeliveryCount",Number(t.target.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable Sessions"}),e.jsx(C,{checked:s.enableSessions,onCheckedChange:t=>L(a,"enableSessions",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable Partitioning"}),e.jsx(C,{checked:s.enablePartitioning,onCheckedChange:t=>L(a,"enablePartitioning",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Dead Letter on Expiration"}),e.jsx(C,{checked:s.enableDeadLetteringOnMessageExpiration,onCheckedChange:t=>L(a,"enableDeadLetteringOnMessageExpiration",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable Duplicate Detection"}),e.jsx(C,{checked:s.enableDuplicateDetection||!1,onCheckedChange:t=>L(a,"enableDuplicateDetection",t)})]}),s.enableDuplicateDetection&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Duplicate Detection Window (seconds)"}),e.jsx(l,{type:"number",value:s.duplicateDetectionHistoryTimeWindow||600,onChange:t=>L(a,"duplicateDetectionHistoryTimeWindow",Number(t.target.value)),placeholder:"600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Forward To (queue/topic name)"}),e.jsx(l,{value:s.forwardTo||"",onChange:t=>L(a,"forwardTo",t.target.value||void 0),placeholder:"destination-queue-or-topic"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable Batched Operations"}),e.jsx(C,{checked:s.enableBatchedOperations||!1,onCheckedChange:t=>L(a,"enableBatchedOperations",t)})]})]})]})]},a))})})]})}),e.jsx(se,{value:"topics",className:"space-y-4",children:e.jsxs(j,{children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Topics"}),e.jsx(ae,{children:"Configure publish-subscribe topics with subscriptions"})]}),e.jsxs(u,{onClick:Ye,size:"sm",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Create Topic"]})]})}),e.jsx(b,{children:e.jsx("div",{className:"space-y-4",children:k.map((s,a)=>e.jsxs(j,{className:"border-l-4 border-l-green-500",children:[e.jsx(E,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(r,{children:"Topic Name"}),e.jsx(l,{value:s.name,onChange:t=>B(a,"name",t.target.value),placeholder:"topic-name",className:te[a]?"border-destructive":""}),te[a]&&e.jsx($e,{variant:"destructive",className:"mt-2",children:e.jsx(Fe,{children:te[a]})})]}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>es(a),disabled:k.length===1,className:"ml-4",children:e.jsx(I,{className:"h-4 w-4"})})]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Max Size (MB)"}),e.jsx(l,{type:"number",value:s.maxSizeInMegabytes,onChange:t=>B(a,"maxSizeInMegabytes",Number(t.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Message TTL (seconds)"}),e.jsx(l,{type:"number",value:s.defaultMessageTimeToLive,onChange:t=>B(a,"defaultMessageTimeToLive",Number(t.target.value))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable Partitioning"}),e.jsx(C,{checked:s.enablePartitioning,onCheckedChange:t=>B(a,"enablePartitioning",t)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable Duplicate Detection"}),e.jsx(C,{checked:s.enableDuplicateDetection||!1,onCheckedChange:t=>B(a,"enableDuplicateDetection",t)})]}),s.enableDuplicateDetection&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Duplicate Detection Window (seconds)"}),e.jsx(l,{type:"number",value:s.duplicateDetectionHistoryTimeWindow||600,onChange:t=>B(a,"duplicateDetectionHistoryTimeWindow",Number(t.target.value)),placeholder:"600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Forward To (queue/topic name)"}),e.jsx(l,{value:s.forwardTo||"",onChange:t=>B(a,"forwardTo",t.target.value||void 0),placeholder:"destination-queue-or-topic"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable Batched Operations"}),e.jsx(C,{checked:s.enableBatchedOperations||!1,onCheckedChange:t=>B(a,"enableBatchedOperations",t)})]})]}),e.jsx(Q,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(r,{children:["Subscriptions (",s.subscriptions?.length||0,")"]}),e.jsxs(u,{size:"sm",variant:"outline",onClick:()=>ss(a),children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Add Subscription"]})]}),s.subscriptions&&s.subscriptions.length>0?e.jsx("div",{className:"space-y-4",children:s.subscriptions.map((t,n)=>e.jsx(j,{className:"p-4 border-l-4 border-l-purple-500",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(r,{children:"Subscription Name"}),e.jsx(l,{value:t.name,onChange:i=>A(a,n,"name",i.target.value),placeholder:"subscription-name",className:G[`${a}-${n}`]?"border-destructive":""}),G[`${a}-${n}`]&&e.jsx($e,{variant:"destructive",className:"mt-2",children:e.jsx(Fe,{children:G[`${a}-${n}`]})})]}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>as(a,n),className:"ml-4",children:e.jsx(I,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Active Messages"}),e.jsx("p",{className:"text-lg font-semibold",children:t.activeMessageCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Dead Letter"}),e.jsx("p",{className:"text-lg font-semibold",children:t.deadLetterMessageCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Deferred"}),e.jsx("p",{className:"text-lg font-semibold",children:t.deferredMessageCount||0})]})]}),e.jsx(Q,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Lock Duration (seconds)"}),e.jsx(l,{type:"number",value:t.lockDuration,onChange:i=>A(a,n,"lockDuration",Number(i.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Max Delivery Count"}),e.jsx(l,{type:"number",value:t.maxDeliveryCount,onChange:i=>A(a,n,"maxDeliveryCount",Number(i.target.value))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Dead Letter on Expiration"}),e.jsx(C,{checked:t.enableDeadLetteringOnMessageExpiration,onCheckedChange:i=>A(a,n,"enableDeadLetteringOnMessageExpiration",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Requires Session"}),e.jsx(C,{checked:t.requiresSession||!1,onCheckedChange:i=>A(a,n,"requiresSession",i)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Forward To (queue/topic name)"}),e.jsx(l,{value:t.forwardTo||"",onChange:i=>A(a,n,"forwardTo",i.target.value||void 0),placeholder:"destination-queue-or-topic"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Enable Batched Operations"}),e.jsx(C,{checked:t.enableBatchedOperations||!1,onCheckedChange:i=>A(a,n,"enableBatchedOperations",i)})]}),e.jsx(Q,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(r,{children:["Rules/Filters (",(t.rules||[]).length,")"]}),e.jsxs(u,{size:"sm",variant:"outline",onClick:()=>{const i=t.rules||[],c={name:`rule-${i.length+1}`,filterType:"SQL",sqlFilter:""};A(a,n,"rules",[...i,c])},children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Add Rule"]})]}),t.rules&&t.rules.length>0?e.jsx("div",{className:"space-y-2",children:t.rules.map((i,c)=>e.jsx(j,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{value:i.name,onChange:f=>{const x=[...t.rules||[]];x[c]={...i,name:f.target.value},A(a,n,"rules",x)},placeholder:"Rule name",className:"flex-1 mr-2"}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>{const f=(t.rules||[]).filter((x,be)=>be!==c);A(a,n,"rules",f)},children:e.jsx(I,{className:"h-4 w-4"})})]}),e.jsxs(O,{value:i.filterType,onValueChange:f=>{const x=[...t.rules||[]];x[c]={...i,filterType:f},A(a,n,"rules",x)},children:[e.jsx($,{children:e.jsx(F,{})}),e.jsxs(V,{children:[e.jsx(m,{value:"SQL",children:"SQL Filter"}),e.jsx(m,{value:"Correlation",children:"Correlation Filter"})]})]}),i.filterType==="SQL"&&e.jsx(Oe,{value:i.sqlFilter||"",onChange:f=>{const x=[...t.rules||[]];x[c]={...i,sqlFilter:f.target.value},A(a,n,"rules",x)},placeholder:"SQL filter expression, e.g., user.type = 'premium'",rows:2}),i.filterType==="Correlation"&&e.jsx("div",{className:"space-y-2",children:e.jsx(l,{value:i.correlationFilter?.correlationId||"",onChange:f=>{const x=[...t.rules||[]];x[c]={...i,correlationFilter:{...i.correlationFilter,correlationId:f.target.value}},A(a,n,"rules",x)},placeholder:"Correlation ID"})})]})},c))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-2",children:"No rules (all messages will be delivered)"})]})]})},n))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No subscriptions"})]})]})]},a))})})]})}),e.jsx(se,{value:"networking",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(E,{children:[e.jsx(q,{children:"Networking Settings"}),e.jsx(ae,{children:"Configure network access and firewall rules for Azure Service Bus namespace"})]}),e.jsxs(b,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Public Network Access"}),e.jsxs(O,{value:h.publicNetworkAccess||"enabled",onValueChange:s=>P({publicNetworkAccess:s}),children:[e.jsx($,{children:e.jsx(F,{})}),e.jsxs(V,{children:[e.jsx(m,{value:"enabled",children:"Enabled"}),e.jsx(m,{value:"disabled",children:"Disabled"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow public network access to the Service Bus namespace"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Minimum TLS Version"}),e.jsxs(O,{value:h.minimumTlsVersion||"1.2",onValueChange:s=>P({minimumTlsVersion:s}),children:[e.jsx($,{children:e.jsx(F,{})}),e.jsxs(V,{children:[e.jsx(m,{value:"1.0",children:"TLS 1.0"}),e.jsx(m,{value:"1.1",children:"TLS 1.1"}),e.jsx(m,{value:"1.2",children:"TLS 1.2"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum TLS version required for connections"})]}),e.jsx(Q,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Firewall Rules"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"IP address ranges allowed to access the namespace"})]}),e.jsxs(u,{onClick:ns,size:"sm",variant:"outline",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Add Rule"]})]}),h.firewallRules&&h.firewallRules.length>0?e.jsx("div",{className:"space-y-2",children:h.firewallRules.map((s,a)=>e.jsx(j,{children:e.jsx(b,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Name"}),e.jsx(l,{value:s.name,onChange:t=>ze(a,"name",t.target.value),placeholder:"rule-name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"IP Range (CIDR)"}),e.jsx(l,{value:s.ipRange,onChange:t=>ze(a,"ipRange",t.target.value),placeholder:"10.0.0.0/8"})]})]}),e.jsx(u,{onClick:()=>is(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(I,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No firewall rules configured"})]}),e.jsx(Q,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Virtual Network Rules"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow access from specific Azure subnets"})]}),e.jsxs(u,{onClick:rs,size:"sm",variant:"outline",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Add Rule"]})]}),h.virtualNetworkRules&&h.virtualNetworkRules.length>0?e.jsx("div",{className:"space-y-2",children:h.virtualNetworkRules.map((s,a)=>e.jsx(j,{children:e.jsx(b,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Name"}),e.jsx(l,{value:s.name,onChange:t=>Be(a,"name",t.target.value),placeholder:"vnet-rule-name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Subnet Resource ID"}),e.jsx(l,{value:s.subnetId,onChange:t=>Be(a,"subnetId",t.target.value),placeholder:"/subscriptions/.../subnets/..."})]})]}),e.jsx(u,{onClick:()=>cs(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(I,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No virtual network rules configured"})]}),e.jsx(Q,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Private Endpoints"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Private endpoints for secure access from VNets"})]}),e.jsxs(u,{onClick:ls,size:"sm",variant:"outline",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Add Endpoint"]})]}),h.privateEndpoints&&h.privateEndpoints.length>0?e.jsx("div",{className:"space-y-2",children:h.privateEndpoints.map((s,a)=>e.jsx(j,{children:e.jsx(b,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Name"}),e.jsx(l,{value:s.name,onChange:t=>Pe(a,"name",t.target.value),placeholder:"private-endpoint-name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Subnet Resource ID"}),e.jsx(l,{value:s.subnetId,onChange:t=>Pe(a,"subnetId",t.target.value),placeholder:"/subscriptions/.../subnets/..."})]})]}),e.jsx(u,{onClick:()=>ds(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(I,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No private endpoints configured"})]})]})]})}),e.jsx(se,{value:"security",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(E,{children:[e.jsx(q,{children:"Security Settings"}),e.jsx(ae,{children:"Configure authentication and authorization for Azure Service Bus namespace"})]}),e.jsxs(b,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Shared Access Signatures (SAS) Policies"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"SAS policies for connection string authentication"})]}),e.jsxs(u,{onClick:os,size:"sm",variant:"outline",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Add Policy"]})]}),v.sasPolicies&&v.sasPolicies.length>0?e.jsx("div",{className:"space-y-2",children:v.sasPolicies.map((s,a)=>e.jsx(j,{children:e.jsx(b,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Policy Name"}),e.jsx(l,{value:s.name,onChange:t=>Qe(a,"name",t.target.value),placeholder:"policy-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs",children:"Permissions"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{checked:s.permissions?.includes("Send")||!1,onCheckedChange:()=>Re(a,"Send")}),e.jsx(r,{className:"text-xs",children:"Send"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{checked:s.permissions?.includes("Listen")||!1,onCheckedChange:()=>Re(a,"Listen")}),e.jsx(r,{className:"text-xs",children:"Listen"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{checked:s.permissions?.includes("Manage")||!1,onCheckedChange:()=>Re(a,"Manage")}),e.jsx(r,{className:"text-xs",children:"Manage"})]})]})]})]}),e.jsx(u,{onClick:()=>us(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(I,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No SAS policies configured"})]}),e.jsx(Q,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Role-Based Access Control (RBAC)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Azure RBAC role assignments"})]}),e.jsxs(u,{onClick:ms,size:"sm",variant:"outline",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Add Assignment"]})]}),v.rbacAssignments&&v.rbacAssignments.length>0?e.jsx("div",{className:"space-y-2",children:v.rbacAssignments.map((s,a)=>e.jsx(j,{children:e.jsx(b,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Principal ID"}),e.jsx(l,{value:s.principalId,onChange:t=>qe(a,"principalId",t.target.value),placeholder:"User/Service Principal ID"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Role"}),e.jsxs(O,{value:s.role,onValueChange:t=>qe(a,"role",t),children:[e.jsx($,{children:e.jsx(F,{})}),e.jsxs(V,{children:[e.jsx(m,{value:"Owner",children:"Owner"}),e.jsx(m,{value:"Contributor",children:"Contributor"}),e.jsx(m,{value:"Reader",children:"Reader"}),e.jsx(m,{value:"Azure Service Bus Data Owner",children:"Data Owner"}),e.jsx(m,{value:"Azure Service Bus Data Receiver",children:"Data Receiver"}),e.jsx(m,{value:"Azure Service Bus Data Sender",children:"Data Sender"})]})]})]})]}),e.jsx(u,{onClick:()=>hs(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(I,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No RBAC assignments configured"})]}),e.jsx(Q,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Managed Identities"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"System-assigned or user-assigned managed identities"})]}),e.jsxs(u,{onClick:xs,size:"sm",variant:"outline",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Add Identity"]})]}),v.managedIdentities&&v.managedIdentities.length>0?e.jsx("div",{className:"space-y-2",children:v.managedIdentities.map((s,a)=>e.jsx(j,{children:e.jsx(b,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Name"}),e.jsx(l,{value:s.name,onChange:t=>Ae(a,"name",t.target.value),placeholder:"identity-name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Type"}),e.jsxs(O,{value:s.type,onValueChange:t=>Ae(a,"type",t),children:[e.jsx($,{children:e.jsx(F,{})}),e.jsxs(V,{children:[e.jsx(m,{value:"SystemAssigned",children:"System Assigned"}),e.jsx(m,{value:"UserAssigned",children:"User Assigned"})]})]})]}),s.type==="UserAssigned"&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"text-xs",children:"Principal ID"}),e.jsx(l,{value:s.principalId||"",onChange:t=>Ae(a,"principalId",t.target.value),placeholder:"Principal ID"})]})]}),e.jsx(u,{onClick:()=>js(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(I,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No managed identities configured"})]})]})]})}),e.jsx(se,{value:"connection",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(E,{children:[e.jsx(q,{children:"Connection Settings"}),e.jsx(ae,{children:"Azure Service Bus connection string"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Namespace"}),e.jsx(l,{value:me,onChange:s=>R({namespace:s.target.value}),placeholder:"my-namespace.servicebus.windows.net"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Connection String"}),e.jsx(Oe,{value:Ke,onChange:s=>R({connectionString:s.target.value}),placeholder:"Endpoint=sb://...",rows:4})]})]})]})}),e.jsx(se,{value:"messages",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(E,{children:[e.jsx(q,{children:"Message Explorer"}),e.jsx(ae,{children:"View and manage messages in queues and subscriptions"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Entity Type"}),e.jsxs(O,{value:p,onValueChange:s=>{Je(s),Ee(""),Le(""),Me("")},children:[e.jsx($,{children:e.jsx(F,{})}),e.jsxs(V,{children:[e.jsx(m,{value:"queue",children:"Queue"}),e.jsx(m,{value:"subscription",children:"Subscription"})]})]})]}),p==="queue"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Queue"}),e.jsxs(O,{value:y,onValueChange:Ee,children:[e.jsx($,{children:e.jsx(F,{placeholder:"Select queue"})}),e.jsx(V,{children:z.map(s=>e.jsx(m,{value:s.name,children:s.name},s.name))})]})]}),p==="subscription"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Topic"}),e.jsxs(O,{value:g,onValueChange:s=>{Le(s),Me("")},children:[e.jsx($,{children:e.jsx(F,{placeholder:"Select topic"})}),e.jsx(V,{children:k.map(s=>e.jsx(m,{value:s.name,children:s.name},s.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Subscription"}),e.jsxs(O,{value:S,onValueChange:Me,disabled:!g,children:[e.jsx($,{children:e.jsx(F,{placeholder:"Select subscription"})}),e.jsx(V,{children:g&&k.find(s=>s.name===g)?.subscriptions?.map(s=>e.jsx(m,{value:s.name,children:s.name},s.name))})]})]})]})]}),p==="queue"&&y||p==="subscription"&&g&&S?e.jsxs(e.Fragment,{children:[e.jsx(Q,{}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{checked:Y,onCheckedChange:s=>{xe(s),s&&(je(!1),ge(!1),ve(!1))}}),e.jsx(r,{children:"Show Dead Letter Queue"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{checked:re,onCheckedChange:s=>{je(s),s&&(xe(!1),ge(!1),ve(!1))}}),e.jsx(r,{children:"Show Deferred"})]}),p==="queue"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{checked:pe,onCheckedChange:s=>{ge(s),s&&(xe(!1),je(!1),ve(!1))}}),e.jsx(r,{children:"Show Scheduled"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{checked:ce,onCheckedChange:s=>{ve(s),s&&(xe(!1),je(!1),ge(!1))}}),e.jsx(r,{children:"Show Locked"})]}),e.jsxs(u,{size:"sm",variant:"outline",onClick:U,className:"ml-auto",children:[e.jsx(As,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Search Messages"}),e.jsxs("div",{className:"relative",children:[e.jsx(Es,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(l,{value:Ne,onChange:s=>Xe(s.target.value),placeholder:"Search by message ID, properties, or body...",className:"pl-8"})]})]}),e.jsx("div",{className:"border rounded-lg",children:e.jsxs(He,{children:[e.jsx(Ue,{children:e.jsxs(Ce,{children:[e.jsx(X,{children:"Message ID"}),e.jsx(X,{children:"Sequence #"}),e.jsx(X,{children:"Enqueued Time"}),e.jsx(X,{children:"Size"}),e.jsx(X,{children:"Delivery Count"}),e.jsx(X,{children:"Status"}),e.jsx(X,{children:"Actions"})]})}),e.jsx(_e,{children:fe.length===0?e.jsx(Ce,{children:e.jsx(_,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No messages found"})}):fe.map(s=>e.jsxs(Ce,{children:[e.jsx(_,{className:"font-mono text-xs",children:s.messageId||s.id}),e.jsx(_,{children:s.sequenceNumber||"-"}),e.jsx(_,{children:new Date(s.enqueuedTime||s.timestamp).toLocaleString()}),e.jsxs(_,{children:[(s.size||0).toLocaleString()," bytes"]}),e.jsx(_,{children:s.deliveryCount||0}),e.jsx(_,{children:s.lockedUntil?e.jsxs(de,{variant:"outline",className:"text-orange-600",children:[e.jsx(We,{className:"h-3 w-3 mr-1"}),"Locked"]}):s.isDeferred?e.jsx(de,{variant:"outline",className:"text-blue-600",children:"Deferred"}):Y?e.jsx(de,{variant:"destructive",children:"Dead Letter"}):e.jsx(de,{variant:"outline",children:"Active"})}),e.jsx(_,{children:e.jsx("div",{className:"flex items-center gap-1",children:Y?e.jsxs(e.Fragment,{children:[e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>Ns(s.id||s.messageId),title:"Resubmit",children:e.jsx(Ls,{className:"h-3 w-3"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>bs(s.id||s.messageId),title:"Delete",children:e.jsx(I,{className:"h-3 w-3"})})]}):s.lockToken?e.jsxs(e.Fragment,{children:[e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>ps(s.lockToken),title:"Complete",children:e.jsx(qs,{className:"h-3 w-3 text-green-600"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>gs(s.lockToken),title:"Abandon",children:e.jsx(zs,{className:"h-3 w-3 text-orange-600"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>vs(s.lockToken),title:"Defer",children:e.jsx(We,{className:"h-3 w-3 text-blue-600"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>fs(s.lockToken),title:"Send to Dead Letter",children:e.jsx(Bs,{className:"h-3 w-3 text-red-600"})})]}):null})})]},s.id||s.messageId))})]})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Showing ",fe.length," message",fe.length!==1?"s":""]})]}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Select an entity to view messages"})]})]})})]})]})})}export{Ys as AzureServiceBusConfigAdvanced};

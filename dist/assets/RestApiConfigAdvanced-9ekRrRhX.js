import{r as v,Y as ts,j as e,_ as as,$ as rs,a0 as Pe,a1 as ns,a2 as ls,a3 as is,a4 as cs,u as Re,X as os,V as pe,B as me,l as ee,S as Ce,C as B,e as H,f as U,h as G,k as z,L as i,I as y,T as ds,a as hs,b as se,c as ke,A as we,d as te,i as w,P as ce,K as Me,a5 as Le,O as xs,n as J,o as F,p as _,q as V,s as j,t as oe,a6 as ps,a7 as ms,m as Ee,a8 as us,a9 as js,aa as gs,ab as fs,ac as vs,ad as Ns,ae as ys,af as bs,ag as Cs,N as ws}from"./index-CNviH85w.js";import{T as ae}from"./textarea-SzKe3kHn.js";import{P as ue}from"./progress-UMv8TD6G.js";import{d as re,a as W,s as Ie}from"./toast-N3wI4J1-.js";import{G as De}from"./globe-BiVlg4xq.js";import{T as Be}from"./trending-up-BDXhRlwq.js";import{C as He}from"./clock-DLSiBSmi.js";import{C as je}from"./code-CmQIdgxm.js";var ge="Collapsible",[Es]=as(ge),[As,Se]=Es(ge),ze=v.forwardRef((N,k)=>{const{__scopeCollapsible:O,open:A,defaultOpen:c,disabled:P,onOpenChange:M,...L}=N,[I,S]=ts({prop:A,defaultProp:c??!1,onChange:M,caller:ge});return e.jsx(As,{scope:O,disabled:P,contentId:rs(),open:I,onOpenToggle:v.useCallback(()=>S(K=>!K),[S]),children:e.jsx(Pe.div,{"data-state":Oe(I),"data-disabled":P?"":void 0,...L,ref:k})})});ze.displayName=ge;var Je="CollapsibleTrigger",Fe=v.forwardRef((N,k)=>{const{__scopeCollapsible:O,...A}=N,c=Se(Je,O);return e.jsx(Pe.button,{type:"button","aria-controls":c.contentId,"aria-expanded":c.open||!1,"data-state":Oe(c.open),"data-disabled":c.disabled?"":void 0,disabled:c.disabled,...A,ref:k,onClick:ns(N.onClick,c.onOpenToggle)})});Fe.displayName=Je;var Te="CollapsibleContent",_e=v.forwardRef((N,k)=>{const{forceMount:O,...A}=N,c=Se(Te,N.__scopeCollapsible);return e.jsx(ls,{present:O||c.open,children:({present:P})=>e.jsx(Ps,{...A,ref:k,present:P})})});_e.displayName=Te;var Ps=v.forwardRef((N,k)=>{const{__scopeCollapsible:O,present:A,children:c,...P}=N,M=Se(Te,O),[L,I]=v.useState(A),S=v.useRef(null),K=is(k,S),X=v.useRef(0),ne=X.current,Y=v.useRef(0),le=Y.current,E=M.open||L,C=v.useRef(E),D=v.useRef(void 0);return v.useEffect(()=>{const b=requestAnimationFrame(()=>C.current=!1);return()=>cancelAnimationFrame(b)},[]),cs(()=>{const b=S.current;if(b){D.current=D.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const Z=b.getBoundingClientRect();X.current=Z.height,Y.current=Z.width,C.current||(b.style.transitionDuration=D.current.transitionDuration,b.style.animationName=D.current.animationName),I(A)}},[M.open,A]),e.jsx(Pe.div,{"data-state":Oe(M.open),"data-disabled":M.disabled?"":void 0,id:M.contentId,hidden:!E,...P,ref:K,style:{"--radix-collapsible-content-height":ne?`${ne}px`:void 0,"--radix-collapsible-content-width":le?`${le}px`:void 0,...N.style},children:E&&c})});function Oe(N){return N?"open":"closed"}var Ss=ze;const Ae=Ss,Ts=Fe,Ue=_e;function Ds({componentId:N}){const{nodes:k,updateNode:O}=Re(),{nodes:A}=Re(),c=os(s=>s.componentMetrics.get(N)),[P,M]=v.useState({}),[L,I]=v.useState(new Map),[S,K]=v.useState(""),[X,ne]=v.useState("all"),[Y,le]=v.useState("all"),E=k.find(s=>s.id===N);if(!E)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const C=E.data.config||{},D=C.baseUrl||"https://api.example.com",b=C.version||"v1",Z=C.title||"REST API",qe=C.description||"RESTful API service",o=C.endpoints||[],f=C.authentication||{type:"none"},q=C.cors||{enabled:!1,allowedOrigins:[],allowedMethods:["GET","POST","PUT","DELETE","PATCH"],allowedHeaders:["Content-Type","Authorization"]},Q=C.rateLimit||{enabled:!1,requestsPerSecond:1e3,burst:100},fe=C.openApiSpec||`openapi: 3.0.0
info:
  title: ${Z}
  version: ${b}
  description: ${qe}
servers:
  - url: ${D}
paths:
  /users:
    get:
      summary: List users
      tags: [users]
      responses:
        '200':
          description: Successful response`;v.useEffect(()=>{const s=pe.getRestApiRoutingEngine(N);if(s){const r=s.getAllEndpointStats();M(r)}},[N,c]);const Ve=A.filter(s=>s.id!==N&&s.type!=="rest"),ve=v.useMemo(()=>{const s=new Set;return o.forEach(r=>{r.tags&&r.tags.forEach(t=>s.add(t))}),Array.from(s).sort()},[o]),de=v.useMemo(()=>{let s=[...o];if(S.trim()){const r=S.toLowerCase();s=s.filter(t=>t.path.toLowerCase().includes(r)||t.description.toLowerCase().includes(r)||t.summary?.toLowerCase().includes(r)||t.tags?.some(d=>d.toLowerCase().includes(r)))}return X!=="all"&&(s=s.filter(r=>r.method===X)),Y!=="all"&&(s=s.filter(r=>r.tags?.includes(Y))),s},[o,S,X,Y]),$e=s=>s?s.startsWith("/")?null:"Path must start with /":"Path is required",he=s=>{if(!s.trim())return null;try{return JSON.parse(s),null}catch{return"Invalid JSON format"}},xe=(s,r,t)=>{const d=$e(s.path);if(d)return d;if(t.findIndex((g,a)=>a!==r&&g.method===s.method&&g.path===s.path)!==-1)return`Duplicate endpoint: ${s.method} ${s.path} already exists`;if(s.requestBody){const g=he(s.requestBody);if(g)return`Request Body: ${g}`}if(s.responseExample){const g=he(s.responseExample);if(g)return`Response Example: ${g}`}return null},p=v.useCallback(s=>{const r={...C,...s};if(O(N,{data:{...E.data,config:r}}),pe.getRestApiRoutingEngine(N)){const d={...E,data:{...E.data,config:r}};pe.updateNodesAndConnections([d],[])}else pe.updateNodesAndConnections([{...E,data:{...E.data,config:r}}],[])},[N,E,C,O]),Ge=()=>{const s={path:"/new-endpoint",method:"GET",description:"New endpoint",requests:0,avgResponseTime:0,statusCode:200},r=xe(s,o.length,[...o,s]);if(r){re(r);return}p({endpoints:[...o,s]}),W("Endpoint added successfully")},Ke=s=>{const r=o[s];p({endpoints:o.filter((t,d)=>d!==s)}),W(`Endpoint ${r.method} ${r.path} removed`)},[Xe,Ne]=v.useState(null),[ye,ie]=v.useState(null),$=(s,r,t)=>{const d=[...o],n={...d[s]};d[s]={...d[s],[r]:t};const g=xe(d[s],s,d);if(g){re(g),d[s]=n;return}p({endpoints:d}),(r==="path"||r==="method")&&W("Endpoint updated")},be=s=>{if(!s.trim())return null;try{return JSON.parse(s),null}catch{if(!s.includes("openapi:")&&!s.includes('"openapi"'))return'Invalid OpenAPI spec: missing "openapi" field';if(!s.includes("info:")&&!s.includes('"info"'))return'Invalid OpenAPI spec: missing "info" field';const r=s.split(`
`);let t=0;for(const d of r)if(d.includes("{")&&t++,d.includes("}")&&t--,t<0)return"Invalid YAML/JSON: unmatched closing brace";return null}},Ye=()=>{try{let s;try{s=JSON.parse(fe)}catch{Ie("Please convert YAML to JSON manually or use a YAML-to-JSON converter");return}const r=JSON.stringify(s,null,2),t=new Blob([r],{type:"application/json"}),d=URL.createObjectURL(t),n=document.createElement("a");n.href=d,n.download=`${Z||"api"}-openapi.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(d),W("OpenAPI spec exported to JSON")}catch{Ie("Failed to export OpenAPI spec")}},Qe=s=>{const r=s.target.files?.[0];if(!r)return;const t=new FileReader;t.onload=d=>{const n=d.target?.result;if(!n)return;const g=be(n);if(g){ie(g),re(g);return}ie(null),p({openApiSpec:n}),W("OpenAPI spec imported successfully")},t.readAsText(r),s.target.value=""},We=()=>{for(let n=0;n<o.length;n++){const g=xe(o[n],n,o);if(g){re(`Endpoint ${n+1}: ${g}`);return}}const s={};o.forEach(n=>{if(n.enabled===!1)return;s[n.path]||(s[n.path]={});const g=n.method.toLowerCase(),a={summary:n.summary||n.description,description:n.description,tags:n.tags||[],responses:{200:{description:"Successful response",content:{"application/json":{schema:{type:"object"}}}}}};if(n.parameters&&n.parameters.length>0&&(a.parameters=n.parameters.map(l=>{const h={type:l.type||"string"};return l.type==="array"&&l.itemsType&&(h.items={type:l.itemsType}),l.type==="object"&&l.properties&&l.properties.length>0&&(h.properties={},h.required=[],l.properties.forEach(x=>{h.properties[x.name]={type:x.type||"string"},x.required&&h.required.push(x.name)}),h.required.length===0&&delete h.required),{name:l.name,in:l.in,required:l.required,schema:h,description:l.defaultValue?`Default: ${l.defaultValue}`:void 0}})),["POST","PUT","PATCH"].includes(n.method)&&n.requestBody)try{const l=JSON.parse(n.requestBody);a.requestBody={required:!0,content:{"application/json":{schema:{type:"object"},example:l}}}}catch{a.requestBody={required:!0,content:{"application/json":{schema:{type:"object"},example:n.requestBody}}}}if(n.responseExample)try{const l=JSON.parse(n.responseExample);a.responses[200].content["application/json"].example=l}catch{a.responses[200].content["application/json"].example=n.responseExample}s[n.path][g]=a});const r=n=>n.includes(`
`)||n.includes(":")||n.includes('"')||n.includes("'")?`"${n.replace(/"/g,'\\"')}"`:n;let t=`openapi: 3.0.0
info:
  title: ${r(Z)}
  version: ${r(b)}
  description: ${r(qe)}
servers:
  - url: ${r(D)}
    description: API Server
paths:
`;for(const[n,g]of Object.entries(s)){t+=`  ${n}:
`;for(const[a,l]of Object.entries(g)){const h=l;if(t+=`    ${a}:
      summary: ${r(h.summary||"")}
      description: ${r(h.description||"")}
`,h.tags&&h.tags.length>0&&(t+=`      tags:
`,h.tags.forEach(x=>{t+=`        - ${r(x)}
`})),h.parameters&&h.parameters.length>0&&(t+=`      parameters:
`,h.parameters.forEach(x=>{t+=`        - name: ${r(x.name)}
          in: ${x.in}
          required: ${x.required}
          schema:
            type: ${x.schema.type||"string"}
`,x.schema.type==="array"&&x.schema.items&&(t+=`            items:
              type: ${x.schema.items.type}
`),x.schema.type==="object"&&x.schema.properties&&(t+=`            properties:
`,Object.entries(x.schema.properties).forEach(([m,u])=>{t+=`              ${r(m)}:
                type: ${u.type||"string"}
`}),x.schema.required&&x.schema.required.length>0&&(t+=`            required:
`,x.schema.required.forEach(m=>{t+=`              - ${r(m)}
`}))),x.description&&(t+=`          description: ${r(x.description)}
`)})),h.requestBody&&(t+=`      requestBody:
        required: ${h.requestBody.required}
        content:
          application/json:
            schema:
              type: object
`,h.requestBody.content["application/json"].example)){const x=h.requestBody.content["application/json"].example,m=typeof x=="string"?x:JSON.stringify(x,null,2);t+=`            example: |
${m.split(`
`).map(u=>`              ${u}`).join(`
`)}
`}if(t+=`      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
`,h.responses[200].content["application/json"].example){const x=h.responses[200].content["application/json"].example,m=typeof x=="string"?x:JSON.stringify(x,null,2);t+=`              example: |
${m.split(`
`).map(u=>`                ${u}`).join(`
`)}
`}}}const d=be(t);if(d){ie(d),re(d);return}ie(null),p({openApiSpec:t}),W("OpenAPI specification generated successfully")},Ze=s=>{const r=o[s],t={...r,path:`${r.path}-copy`,description:`${r.description} (Copy)`},d=xe(t,o.length,[...o,t]);if(d){re(d);return}p({endpoints:[...o,t]}),W(`Endpoint ${r.method} ${r.path} copied`)},es=s=>{switch(s){case"GET":return"bg-blue-500";case"POST":return"bg-green-500";case"PUT":return"bg-yellow-500";case"DELETE":return"bg-red-500";case"PATCH":return"bg-purple-500";default:return"bg-gray-500"}};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(De,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"REST API"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"RESTful API Service"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(me,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${c&&c.throughput>0?"bg-green-500 animate-pulse":"bg-gray-400"}`}),c&&c.throughput>0?"Active":"Idle"]}),c&&e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"h-4 w-4 text-blue-500"}),e.jsxs("span",{className:"text-muted-foreground",children:[Math.round(c.throughput)," req/s"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(He,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("span",{className:"text-muted-foreground",children:[Math.round(c.latency),"ms"]})]}),c.errorRate>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-4 w-4 text-red-500"}),e.jsxs("span",{className:"text-muted-foreground",children:[(c.errorRate*100).toFixed(1),"%"]})]})]})]})]}),e.jsx(Ce,{}),e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx(U,{children:"API Information"}),e.jsxs(G,{children:[D,"/",b]})]}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Base URL"}),e.jsx(y,{value:D,onChange:s=>p({baseUrl:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Version"}),e.jsx(y,{value:b,onChange:s=>p({version:s.target.value})})]})]})})]}),e.jsxs(ds,{defaultValue:"endpoints",className:"w-full",children:[e.jsxs(hs,{className:"flex flex-wrap w-full justify-start gap-1",children:[e.jsxs(se,{value:"endpoints",className:"gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"Endpoints"]}),e.jsxs(se,{value:"auth",className:"gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"Authentication"]}),e.jsxs(se,{value:"metrics",className:"gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"Metrics"]}),e.jsxs(se,{value:"openapi",className:"gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"OpenAPI Spec"]}),e.jsxs(se,{value:"cors",className:"gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"CORS"]}),e.jsxs(se,{value:"rate-limit",className:"gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"Rate Limit"]})]}),e.jsx(te,{value:"endpoints",className:"space-y-4 mt-4",children:e.jsxs(B,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(U,{children:"API Endpoints"}),e.jsx(G,{children:"REST API endpoint configuration"})]}),e.jsxs(w,{size:"sm",onClick:Ge,variant:"outline",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Add Endpoint"]})]})}),e.jsxs(z,{children:[o.length>0&&e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search endpoints by path, description, tags...",value:S,onChange:s=>K(s.target.value),className:"pl-9"}),S&&e.jsx(w,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>K(""),children:e.jsx(Le,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(J,{value:X,onValueChange:ne,children:[e.jsx(F,{className:"w-[140px]",children:e.jsx(_,{placeholder:"All methods"})}),e.jsxs(V,{children:[e.jsx(j,{value:"all",children:"All Methods"}),e.jsx(j,{value:"GET",children:"GET"}),e.jsx(j,{value:"POST",children:"POST"}),e.jsx(j,{value:"PUT",children:"PUT"}),e.jsx(j,{value:"DELETE",children:"DELETE"}),e.jsx(j,{value:"PATCH",children:"PATCH"})]})]}),ve.length>0&&e.jsxs(J,{value:Y,onValueChange:le,children:[e.jsx(F,{className:"w-[140px]",children:e.jsx(_,{placeholder:"All tags"})}),e.jsxs(V,{children:[e.jsx(j,{value:"all",children:"All Tags"}),ve.map(s=>e.jsx(j,{value:s,children:s},s))]})]})]})]}),de.length!==o.length&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Showing ",de.length," of ",o.length," endpoints"]})]}),o.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(je,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No endpoints configured"}),e.jsx("p",{className:"text-xs mt-2",children:'Click "Add Endpoint" to create a new endpoint'})]}):de.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No endpoints match your search criteria"}),e.jsx(w,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>{K(""),ne("all"),le("all")},children:"Clear filters"})]}):e.jsx("div",{className:"space-y-3",children:de.map((s,r)=>{const t=o.findIndex(a=>a.method===s.method&&a.path===s.path),d=$e(s.path),n=s.requestBody?he(s.requestBody):null,g=s.responseExample?he(s.responseExample):null;return e.jsxs(B,{className:"border-border",children:[e.jsx(H,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{className:es(s.method),children:s.method}),e.jsxs("div",{className:"flex-1",children:[e.jsx(U,{className:"text-lg",children:s.path}),e.jsx(G,{className:"text-xs mt-1",children:s.description}),(()=>{const a=`${s.method}:${s.path}`,l=P[a];return l?e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[e.jsx(Be,{className:"h-3 w-3"}),e.jsxs("span",{children:[l.requestCount.toLocaleString()," requests"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[e.jsx(He,{className:"h-3 w-3"}),e.jsxs("span",{children:[Math.round(l.averageLatency),"ms avg"]})]}),l.errorCount>0&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsxs("span",{children:[l.errorCount," errors"]})]})]}):null})()]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{htmlFor:`enabled-${t}`,className:"text-xs",children:"Enabled"}),e.jsx(oe,{id:`enabled-${t}`,checked:s.enabled!==!1,onCheckedChange:a=>$(t,"enabled",a)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{size:"icon",variant:"ghost",className:"hover:bg-blue-500/10 hover:text-blue-500",onClick:a=>{a.stopPropagation(),Ze(t)},title:"Copy endpoint",children:e.jsx(je,{className:"h-4 w-4"})}),e.jsxs(ps,{open:Xe===t,onOpenChange:a=>Ne(a?t:null),children:[e.jsx(ms,{asChild:!0,children:e.jsx(w,{size:"icon",variant:"ghost",className:"hover:bg-destructive/10 hover:text-destructive",onClick:a=>{a.stopPropagation(),Ne(t)},children:e.jsx(Ee,{className:"h-4 w-4"})})}),e.jsxs(us,{children:[e.jsxs(js,{children:[e.jsx(gs,{children:"Delete Endpoint"}),e.jsxs(fs,{children:["Are you sure you want to delete the endpoint ",e.jsxs("strong",{children:[s.method," ",s.path]}),"? This action cannot be undone."]})]}),e.jsxs(vs,{children:[e.jsx(Ns,{children:"Cancel"}),e.jsx(ys,{onClick:()=>{Ke(t),Ne(null)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})]})})}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Method"}),e.jsxs(J,{value:s.method,onValueChange:a=>$(t,"method",a),children:[e.jsx(F,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(j,{value:"GET",children:"GET"}),e.jsx(j,{value:"POST",children:"POST"}),e.jsx(j,{value:"PUT",children:"PUT"}),e.jsx(j,{value:"DELETE",children:"DELETE"}),e.jsx(j,{value:"PATCH",children:"PATCH"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Path"}),e.jsx(y,{value:s.path,onChange:a=>$(t,"path",a.target.value),placeholder:"/users",className:d?"border-red-500":""}),d&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),d]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Description"}),e.jsx(ae,{value:s.description,onChange:a=>$(t,"description",a.target.value),placeholder:"Describe what this endpoint does",rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Brief description of the endpoint functionality"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.tags&&s.tags.length>0?s.tags.map((a,l)=>e.jsxs(me,{variant:"secondary",className:"gap-1",children:[a,e.jsx("button",{onClick:()=>{const h=[...o];h[t].tags=h[t].tags?.filter((x,m)=>m!==l),p({endpoints:h})},className:"ml-1 hover:text-destructive",children:e.jsx(Le,{className:"h-3 w-3"})})]},l)):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No tags"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{placeholder:"Add tag...",onKeyDown:a=>{if(a.key==="Enter"&&a.currentTarget.value.trim()){a.preventDefault();const l=a.currentTarget.value.trim(),h=[...o];h[t].tags||(h[t].tags=[]),h[t].tags.includes(l)||(h[t].tags.push(l),p({endpoints:h})),a.currentTarget.value=""}},list:`tags-list-${t}`}),e.jsx("datalist",{id:`tags-list-${t}`,children:ve.filter(a=>!s.tags?.includes(a)).map(a=>e.jsx("option",{value:a},a))}),e.jsxs(w,{type:"button",size:"sm",variant:"outline",onClick:a=>{const l=a.currentTarget.previousElementSibling;if(l&&l.value.trim()){const h=l.value.trim(),x=[...o];x[t].tags||(x[t].tags=[]),x[t].tags.includes(h)||(x[t].tags.push(h),p({endpoints:x})),l.value=""}},children:[e.jsx(ce,{className:"h-3 w-3 mr-1"}),"Add"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tags for grouping endpoints in OpenAPI documentation. Press Enter or click Add to add a tag."})]}),e.jsxs("div",{className:"space-y-4 pt-2 border-t",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(i,{className:"text-sm font-semibold",children:"Advanced Settings"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Target Service (optional)"}),e.jsxs(J,{value:s.targetService||"none",onValueChange:a=>$(t,"targetService",a==="none"?void 0:a),children:[e.jsx(F,{children:e.jsx(_,{placeholder:"Select target service"})}),e.jsxs(V,{children:[e.jsx(j,{value:"none",children:"None (direct response)"}),Ve.map(a=>e.jsx(j,{value:a.id,children:a.data.label||a.type},a.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Route requests to a connected service"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Rate Limit (req/s)"}),e.jsx(y,{type:"number",value:s.rateLimit||"",onChange:a=>$(t,"rateLimit",a.target.value?parseInt(a.target.value):void 0),placeholder:"Unlimited"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requests per second limit for this endpoint"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Summary (for OpenAPI)"}),e.jsx(y,{value:s.summary||"",onChange:a=>$(t,"summary",a.target.value),placeholder:"Brief summary for API documentation"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Short summary used in OpenAPI specification"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-xs",children:"Timeout (ms)"}),e.jsx(y,{type:"number",value:s.timeout||"",onChange:a=>$(t,"timeout",a.target.value?parseInt(a.target.value):void 0),placeholder:"No timeout",min:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Request timeout in milliseconds (optional)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Parameters"}),e.jsxs(w,{size:"sm",variant:"outline",onClick:()=>{const a=[...o];a[t].parameters||(a[t].parameters=[]),a[t].parameters.push({name:"param",in:"query",type:"string",required:!1,defaultValue:void 0}),p({endpoints:a})},children:[e.jsx(ce,{className:"h-3 w-3 mr-1"}),"Add Parameter"]})]}),s.parameters&&s.parameters.length>0?e.jsx("div",{className:"space-y-2",children:s.parameters.map((a,l)=>{const h=`param-${t}-${l}`,x=L.get(h)||!1;return e.jsxs("div",{className:"border border-border rounded-lg bg-card shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-background/50",children:[e.jsxs(J,{value:a.in,onValueChange:m=>{const u=[...o];u[t].parameters[l].in=m,p({endpoints:u})},children:[e.jsx(F,{className:"w-24",children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(j,{value:"query",children:"Query"}),e.jsx(j,{value:"path",children:"Path"}),e.jsx(j,{value:"header",children:"Header"})]})]}),e.jsx(y,{value:a.name,onChange:m=>{const u=[...o];u[t].parameters[l].name=m.target.value,p({endpoints:u})},placeholder:"Parameter name",className:"flex-1"}),e.jsxs(J,{value:a.type||"string",onValueChange:m=>{const u=[...o];u[t].parameters[l].type=m,m!=="object"&&delete u[t].parameters[l].properties,m!=="array"&&delete u[t].parameters[l].itemsType,p({endpoints:u})},children:[e.jsx(F,{className:"w-32",children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(j,{value:"string",children:"string"}),e.jsx(j,{value:"number",children:"number"}),e.jsx(j,{value:"integer",children:"integer"}),e.jsx(j,{value:"boolean",children:"boolean"}),e.jsx(j,{value:"array",children:"array"}),e.jsx(j,{value:"object",children:"object"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"text-xs",children:"Required"}),e.jsx(oe,{checked:a.required,onCheckedChange:m=>{const u=[...o];u[t].parameters[l].required=m,p({endpoints:u})}})]}),(a.type==="object"||a.type==="array")&&e.jsx(Ae,{open:x,onOpenChange:m=>{const u=new Map(L);u.set(h,m),I(u)},children:e.jsx(Ts,{asChild:!0,children:e.jsx(w,{size:"icon",variant:"ghost",children:x?e.jsx(bs,{className:"h-4 w-4"}):e.jsx(Cs,{className:"h-4 w-4"})})})}),e.jsx(w,{size:"icon",variant:"ghost",onClick:()=>{const m=[...o];m[t].parameters=m[t].parameters.filter((R,T)=>T!==l),p({endpoints:m});const u=new Map(L);u.delete(h),I(u)},children:e.jsx(Ee,{className:"h-4 w-4"})})]}),a.type==="object"&&e.jsx(Ae,{open:x,onOpenChange:m=>{const u=new Map(L);u.set(h,m),I(u)},children:e.jsx(Ue,{className:"px-2 pb-2",children:e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Object Properties"}),e.jsxs(w,{size:"sm",variant:"outline",onClick:()=>{const m=[...o];m[t].parameters[l].properties||(m[t].parameters[l].properties=[]),m[t].parameters[l].properties.push({name:"property",type:"string",required:!1}),p({endpoints:m})},children:[e.jsx(ce,{className:"h-3 w-3 mr-1"}),"Add Property"]})]}),a.properties&&a.properties.length>0?e.jsx("div",{className:"space-y-2",children:a.properties.map((m,u)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-card border border-border rounded-md shadow-sm",children:[e.jsx(y,{value:m.name,onChange:R=>{const T=[...o];T[t].parameters[l].properties[u].name=R.target.value,p({endpoints:T})},placeholder:"Property name",className:"flex-1 bg-background"}),e.jsxs(J,{value:m.type||"string",onValueChange:R=>{const T=[...o];T[t].parameters[l].properties[u].type=R,p({endpoints:T})},children:[e.jsx(F,{className:"w-28 bg-background",children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(j,{value:"string",children:"string"}),e.jsx(j,{value:"number",children:"number"}),e.jsx(j,{value:"integer",children:"integer"}),e.jsx(j,{value:"boolean",children:"boolean"}),e.jsx(j,{value:"array",children:"array"}),e.jsx(j,{value:"object",children:"object"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx(i,{className:"text-xs font-medium text-foreground",children:"Required"}),e.jsx(oe,{checked:m.required,onCheckedChange:R=>{const T=[...o];T[t].parameters[l].properties[u].required=R,p({endpoints:T})}})]}),e.jsx(w,{size:"icon",variant:"ghost",className:"hover:bg-destructive/10 hover:text-destructive",onClick:()=>{const R=[...o];R[t].parameters[l].properties=R[t].parameters[l].properties.filter((T,ss)=>ss!==u),p({endpoints:R})},children:e.jsx(Ee,{className:"h-4 w-4"})})]},u))}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No properties defined"})]})})}),a.type==="array"&&e.jsx(Ae,{open:x,onOpenChange:m=>{const u=new Map(L);u.set(h,m),I(u)},children:e.jsx(Ue,{className:"px-2 pb-2",children:e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsx(i,{className:"text-xs font-semibold",children:"Array Items Type"}),e.jsxs(J,{value:a.itemsType||"string",onValueChange:m=>{const u=[...o];u[t].parameters[l].itemsType=m,p({endpoints:u})},children:[e.jsx(F,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(j,{value:"string",children:"string"}),e.jsx(j,{value:"number",children:"number"}),e.jsx(j,{value:"integer",children:"integer"}),e.jsx(j,{value:"boolean",children:"boolean"}),e.jsx(j,{value:"object",children:"object"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Type of elements in the array"})]})})})]},l)})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No parameters configured"})]}),["POST","PUT","PATCH"].includes(s.method)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Request Body Example"}),e.jsx(ae,{value:s.requestBody||"",onChange:a=>$(t,"requestBody",a.target.value),className:`font-mono text-sm ${n?"border-red-500":""}`,rows:6,placeholder:'{"key": "value"}'}),n&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),n]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JSON example for request body (used in OpenAPI spec)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Response Example"}),e.jsx(ae,{value:s.responseExample||"",onChange:a=>$(t,"responseExample",a.target.value),className:`font-mono text-sm ${g?"border-red-500":""}`,rows:6,placeholder:'{"data": [], "count": 0}'}),g&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),g]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JSON example for successful response (used in OpenAPI spec)"})]})]})]},`${s.method}-${s.path}-${t}`)})})]})]})}),e.jsx(te,{value:"auth",className:"space-y-4 mt-4",children:e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx(U,{children:"Authentication"}),e.jsx(G,{children:"API authentication configuration"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Authentication Type"}),e.jsxs(J,{value:f.type,onValueChange:s=>p({authentication:{...f,type:s}}),children:[e.jsx(F,{children:e.jsx(_,{})}),e.jsxs(V,{children:[e.jsx(j,{value:"none",children:"None"}),e.jsx(j,{value:"bearer",children:"Bearer Token"}),e.jsx(j,{value:"apiKey",children:"API Key"}),e.jsx(j,{value:"basic",children:"Basic Auth"}),e.jsx(j,{value:"oauth2",children:"OAuth 2.0"})]})]})]}),f.type==="bearer"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Bearer Token"}),e.jsx(y,{type:"password",value:f.token||"",onChange:s=>p({authentication:{...f,token:s.target.value}}),placeholder:"Enter bearer token"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Token to validate in Authorization: Bearer header"})]}),f.type==="apiKey"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"API Key"}),e.jsx(y,{type:"password",value:f.apiKey||f.token||"",onChange:s=>p({authentication:{...f,apiKey:s.target.value,token:s.target.value}}),placeholder:"Enter API key"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"API Key Header Name"}),e.jsx(y,{value:f.apiKeyHeader||"X-API-Key",onChange:s=>p({authentication:{...f,apiKeyHeader:s.target.value}}),placeholder:"X-API-Key"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Header name where API key should be provided (default: X-API-Key)"})]})]}),f.type==="basic"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Username"}),e.jsx(y,{value:f.username||"",onChange:s=>p({authentication:{...f,username:s.target.value}}),placeholder:"Enter username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Password"}),e.jsx(y,{type:"password",value:f.password||"",onChange:s=>p({authentication:{...f,password:s.target.value}}),placeholder:"Enter password"})]})]}),f.type==="oauth2"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Token Endpoint"}),e.jsx(y,{value:f.oauth2Config?.tokenEndpoint||"",onChange:s=>p({authentication:{...f,oauth2Config:{...f.oauth2Config,tokenEndpoint:s.target.value}}}),placeholder:"https://oauth.example.com/token"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Client ID"}),e.jsx(y,{value:f.oauth2Config?.clientId||"",onChange:s=>p({authentication:{...f,oauth2Config:{...f.oauth2Config,clientId:s.target.value}}}),placeholder:"Client ID"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Client Secret"}),e.jsx(y,{type:"password",value:f.oauth2Config?.clientSecret||"",onChange:s=>p({authentication:{...f,oauth2Config:{...f.oauth2Config,clientSecret:s.target.value}}}),placeholder:"Client Secret"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Scopes (comma-separated)"}),e.jsx(y,{value:f.oauth2Config?.scopes?.join(", ")||"",onChange:s=>p({authentication:{...f,oauth2Config:{...f.oauth2Config,scopes:s.target.value.split(",").map(r=>r.trim()).filter(r=>r)}}}),placeholder:"read, write, admin"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"OAuth2 scopes required for access (comma-separated)"})]})]})]})]})}),e.jsx(te,{value:"metrics",className:"space-y-4 mt-4",children:e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx(U,{children:"API Metrics"}),e.jsx(G,{children:"Real-time performance metrics"})]}),e.jsx(z,{className:"space-y-4",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Throughput"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{value:Math.min(100,c.throughput/(c.customMetrics?.rps||100)*100),className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.round(c.throughput)," req/s"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Average Latency"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{value:Math.min(100,c.latency/200*100),className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.round(c.latency),"ms"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Error Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{value:c.errorRate*100,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[(c.errorRate*100).toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Utilization"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{value:c.utilization*100,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.round(c.utilization*100),"%"]})]})]})]}),(c.latencyP50||c.latencyP99)&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx(i,{className:"mb-2",children:"Latency Percentiles"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.latencyP50&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"P50 (Median)"}),e.jsxs("div",{className:"text-lg font-semibold",children:[Math.round(c.latencyP50),"ms"]})]}),c.latencyP95&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"P95"}),e.jsxs("div",{className:"text-lg font-semibold",children:[Math.round(c.latencyP95),"ms"]})]}),c.latencyP99&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"P99"}),e.jsxs("div",{className:"text-lg font-semibold",children:[Math.round(c.latencyP99),"ms"]})]})]})]}),Object.keys(P).length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx(i,{className:"mb-3",children:"Endpoint Statistics"}),e.jsx("div",{className:"space-y-4",children:Object.entries(P).map(([s,r])=>{if(!r)return null;const t=r.statusCodeCounts||{},d=Object.entries(t).sort(([n],[g])=>parseInt(n)-parseInt(g));return e.jsxs(B,{className:"border-border",children:[e.jsx(H,{className:"pb-3",children:e.jsx(U,{className:"text-sm",children:s})}),e.jsxs(z,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Requests"}),e.jsx("div",{className:"font-semibold",children:r.requestCount.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Errors"}),e.jsx("div",{className:"font-semibold text-red-500",children:r.errorCount.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Latency"}),e.jsxs("div",{className:"font-semibold",children:[Math.round(r.averageLatency),"ms"]})]})]}),d.length>0&&e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Status Codes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(([n,g])=>{const a=parseInt(n),l=a>=500?"bg-red-500":a>=400?"bg-orange-500":a>=300?"bg-yellow-500":"bg-green-500";return e.jsxs(me,{className:`${l} text-white`,children:[n,": ",g]},n)})})]})]})]},s)})})]}),c.customMetrics&&Object.keys(P).length===0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx(i,{className:"mb-2",children:"Endpoint Statistics"}),e.jsx("div",{className:"space-y-2",children:Object.entries(c.customMetrics).filter(([s])=>s.startsWith("endpoint_")).map(([s,r])=>{const t=s.split("_"),d=t.slice(1,-1).join("_"),n=t[t.length-1];return e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[d," (",n,")"]}),e.jsx("span",{className:"font-medium",children:typeof r=="number"?r.toLocaleString():r})]},s)})})]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(we,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No metrics available"}),e.jsx("p",{className:"text-xs mt-2",children:"Start simulation to see real-time metrics"})]})})]})}),e.jsx(te,{value:"cors",className:"space-y-4 mt-4",children:e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx(U,{children:"CORS Configuration"}),e.jsx(G,{children:"Cross-Origin Resource Sharing settings"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable CORS"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow cross-origin requests from web browsers"})]}),e.jsx(oe,{checked:q.enabled,onCheckedChange:s=>p({cors:{...q,enabled:s}})})]}),q.enabled&&e.jsxs(e.Fragment,{children:[e.jsx(Ce,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Allowed Origins"}),e.jsx(ae,{value:q.allowedOrigins?.join(`
`)||"",onChange:s=>p({cors:{...q,allowedOrigins:s.target.value.split(`
`).filter(r=>r.trim())}}),placeholder:`https://example.com
https://app.example.com
* (for all origins)`,rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"One origin per line. Use * to allow all origins (not recommended for production)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Allowed Methods"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD"].map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`cors-method-${s}`,checked:q.allowedMethods?.includes(s)||!1,onChange:r=>{const t=q.allowedMethods||[],d=r.target.checked?[...t,s]:t.filter(n=>n!==s);p({cors:{...q,allowedMethods:d}})},className:"rounded border-gray-300"}),e.jsx(i,{htmlFor:`cors-method-${s}`,className:"text-sm font-normal cursor-pointer",children:s})]},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Allowed Headers"}),e.jsx(ae,{value:q.allowedHeaders?.join(", ")||"",onChange:s=>p({cors:{...q,allowedHeaders:s.target.value.split(",").map(r=>r.trim()).filter(r=>r)}}),placeholder:"Content-Type, Authorization, X-Requested-With",rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of allowed headers"})]})]})]})]})}),e.jsx(te,{value:"rate-limit",className:"space-y-4 mt-4",children:e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx(U,{children:"Global Rate Limiting"}),e.jsx(G,{children:"Configure global rate limits for the API"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Global Rate Limit"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Limit requests per second across all endpoints"})]}),e.jsx(oe,{checked:Q.enabled,onCheckedChange:s=>p({rateLimit:{...Q,enabled:s}})})]}),Q.enabled&&e.jsxs(e.Fragment,{children:[e.jsx(Ce,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Requests Per Second"}),e.jsx(y,{type:"number",value:Q.requestsPerSecond||1e3,onChange:s=>p({rateLimit:{...Q,requestsPerSecond:parseInt(s.target.value)||1e3}}),placeholder:"1000",min:"1"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum requests per second allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Burst Size"}),e.jsx(y,{type:"number",value:Q.burst||100,onChange:s=>p({rateLimit:{...Q,burst:parseInt(s.target.value)||100}}),placeholder:"100",min:"1"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum burst requests allowed"})]})]})]})]})]})}),e.jsx(te,{value:"openapi",className:"space-y-4 mt-4",children:e.jsxs(B,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(U,{children:"OpenAPI Specification"}),e.jsx(G,{children:"OpenAPI 3.0 specification document"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{size:"sm",variant:"outline",onClick:We,disabled:o.length===0,children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Generate from Endpoints"]}),e.jsxs(w,{size:"sm",variant:"outline",onClick:Ye,disabled:!fe,children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Export JSON"]}),e.jsxs("label",{children:[e.jsx(w,{size:"sm",variant:"outline",asChild:!0,className:"cursor-pointer",children:e.jsxs("span",{children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Import"]})}),e.jsx("input",{type:"file",accept:".json,.yaml,.yml",onChange:Qe,className:"hidden"})]})]})]})}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"OpenAPI YAML"}),o.length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.filter(s=>s.enabled!==!1).length," endpoint(s) configured"]})]}),e.jsx(ae,{value:fe,onChange:s=>{const r=s.target.value,t=be(r);ie(t),p({openApiSpec:r})},className:`font-mono text-sm h-96 ${ye?"border-red-500":""}`,placeholder:"openapi: 3.0.0..."}),ye&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),ye]}),o.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Configure endpoints first, then click "Generate from Endpoints" to create OpenAPI spec'})]})})]})})]})]})})}export{Ds as RestApiConfigAdvanced};

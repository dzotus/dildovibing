import{u as Ve,j as e,r as u,e as Z,l as x,S as T,C as f,h as b,i as N,a4 as H,m,ak as $,A as ze,aj as Ue,T as Oe,b as Me,c as W,d as Ge,f as Q,k as X,P as _,L as i,I as h,q as w,s as S,t as R,v as F,w as c,aI as He,B as y,o as J,aL as K,x as q,O as ee,Q as se,V as te,W as ae,X as ne,Y as re,_ as ie,$ as le}from"./index-Cd-JdYDo.js";import{u as $e}from"./use-toast-CPyBeE96.js";import{R as We}from"./refresh-ccw--KPBcUEB.js";import{P as ce}from"./pen-Dm0X2t9p.js";function ss({componentId:B}){const{nodes:de,updateNode:oe}=Ve(),V=de.find(s=>s.id===B);if(!V)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const l=V.data.config||{},o=l.backends||[],v=l.endpoints||[],he=o.length,ue=v.length,xe=v.reduce((s,a)=>s+(a.requests||0),0),me=o.length>0?o.reduce((s,a)=>s+(a.avgLatency||0),0)/o.length:0,[je,A]=u.useState(null),[pe,P]=u.useState(null),[Qe,Xe]=u.useState(null),[Ye,Ze]=u.useState(null),[z,U]=u.useState(null),[I,O]=u.useState(null),[j,C]=u.useState({}),[L,M]=u.useState({}),[D,G]=u.useState({}),{toast:k}=$e(),ge=u.useRef(l);ge.current=l,u.useEffect(()=>{try{Z.updateBFFRoutingEngine(B)}catch(s){console.error("Failed to update BFF routing engine:",s)}},[B,l.backends,l.endpoints,l.enableCaching,l.enableRequestBatching,l.enableResponseCompression,l.defaultTimeout,l.maxConcurrentRequests,l.audience,l.fallbackEnabled,l.fallbackComponent]);const ve=s=>s?s.startsWith("/")?s.length<2?"Path must be at least 2 characters":null:"Path must start with /":"Path is required",fe=s=>{if(!s)return"Endpoint is required";try{return new URL(s),null}catch{return"Endpoint must be a valid URL"}},Y=s=>!s||s<=0?"Timeout must be a positive number":s>3e5?"Timeout must be less than 300000ms":null,be=s=>s<0||s>10?"Retries must be between 0 and 10":null,d=s=>{oe(B,{data:{...V.data,config:{...l,...s}}})},Ne=()=>{const s={id:`backend-${Date.now()}`,name:"new-backend",endpoint:"http://localhost:8080",protocol:"http",status:"disconnected",timeout:5e3,retries:3,retryBackoff:"exponential",circuitBreaker:{enabled:!0,failureThreshold:5,successThreshold:2,timeout:6e4}};d({backends:[...o,s]}),P(s.id),k({title:"Backend added",description:"New backend has been added. Please configure it."})},ke=s=>{o.find(n=>n.id===s)&&O(s)},ye=()=>{if(!I)return;const s=v.map(a=>({...a,backends:a.backends.filter(n=>n!==I)}));d({backends:o.filter(a=>a.id!==I),endpoints:s}),k({title:"Backend removed",description:"Backend has been successfully removed."}),O(null)},Ce=(s,a)=>{const n=o.map(r=>r.id===s?{...r,...a}:r);d({backends:n})},Be=()=>{const s={id:`endpoint-${Date.now()}`,path:"/api/new-endpoint",method:"GET",backends:[],aggregator:"merge",cacheTtl:5,timeout:5e3};d({endpoints:[...v,s]}),A(s.id),k({title:"Endpoint added",description:"New endpoint has been added. Please configure it."})},Ee=s=>{U(s)},Te=()=>{z&&(d({endpoints:v.filter(s=>s.id!==z)}),k({title:"Endpoint removed",description:"Endpoint has been successfully removed."}),U(null))},we=(s,a)=>{const n=v.map(r=>r.id===s?{...r,...a}:r);d({endpoints:n})},Se=(s,a)=>{const n={};if(a.path){const r=ve(a.path);r&&(n.path=r)}if(a.timeout!==void 0){const r=Y(a.timeout);r&&(n.timeout=r)}if(Object.keys(n).length>0){C(n),k({title:"Validation error",description:"Please fix the validation errors before saving.",variant:"destructive"});return}we(s,a),A(null),C({}),k({title:"Endpoint saved",description:"Endpoint configuration has been saved successfully."})},Re=s=>{A(null),C({});const a={...L};delete a[s],M(a)},Fe=(s,a)=>{const n={};if(a.endpoint){const t=fe(a.endpoint);t&&(n.endpoint=t)}if(a.timeout!==void 0){const t=Y(a.timeout);t&&(n.timeout=t)}if(a.retries!==void 0){const t=be(a.retries);t&&(n.retries=t)}if(Object.keys(n).length>0){C(n),k({title:"Validation error",description:"Please fix the validation errors before saving.",variant:"destructive"});return}const r={name:a.name,endpoint:a.endpoint,protocol:a.protocol,timeout:a.timeout,retries:a.retries,retryBackoff:a.retryBackoff,circuitBreaker:a.circuitBreakerEnabled?{enabled:!0,failureThreshold:a.failureThreshold||5,successThreshold:a.successThreshold||2,timeout:a.circuitBreakerTimeout||6e4}:void 0};Ce(s,r),P(null),C({}),k({title:"Backend saved",description:"Backend configuration has been saved successfully."})},qe=s=>{P(null),C({});const a={...D};delete a[s],G(a)},Ae=()=>{const s=Z.getBFFRoutingEngine(B);if(s){const n=s.getStats().backendStats,r=o.map(p=>{const g=n[p.id];return g?{...p,requests:g.requestCount,avgLatency:Math.round(g.averageLatency)}:p}),t=v.map(p=>{const g=p.backends.reduce((E,Le)=>{const De=n[Le];return E+(De?.requestCount||0)},0);return{...p,requests:g}});d({backends:r,endpoints:t})}},Pe=s=>{switch(s){case"connected":return"bg-green-500";case"disconnected":return"bg-muted";case"error":return"bg-red-500";default:return"bg-muted"}},Ie=s=>{switch(s){case"connected":return"bg-green-500 text-white";case"disconnected":return"bg-muted text-foreground";case"error":return"bg-red-500 text-white";default:return"bg-muted text-foreground"}};return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"BFF Service"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Backend for Frontend"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Aggregated API service for frontend applications"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(x,{variant:"outline",size:"sm",onClick:Ae,children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Refresh Metrics"]})})]}),e.jsx(T,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(f,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Backends"}),e.jsx(H,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:he}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"connected"})]})})]}),e.jsxs(f,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Endpoints"}),e.jsx($,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:ue}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"defined"})]})})]}),e.jsxs(f,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Requests"}),e.jsx(ze,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(m,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:xe.toLocaleString()})})})]}),e.jsxs(f,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Avg Latency"}),e.jsx(Ue,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:me.toFixed(0)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"ms"})]})})]})]}),e.jsxs(Oe,{defaultValue:"endpoints",className:"space-y-4",children:[e.jsxs(Me,{className:"flex-wrap",children:[e.jsxs(W,{value:"endpoints",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Endpoints (",v.length,")"]}),e.jsxs(W,{value:"backends",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Backends (",o.length,")"]}),e.jsxs(W,{value:"settings",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(Q,{value:"endpoints",className:"space-y-4",children:e.jsxs(f,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"API Endpoints"}),e.jsx(X,{children:"Aggregated endpoints"})]}),e.jsxs(x,{onClick:Be,size:"sm",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Create Endpoint"]})]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:v.map(s=>{const a=je===s.id,n=L[s.id]||{path:s.path,method:s.method,aggregator:s.aggregator||"merge",cacheTtl:s.cacheTtl||5,timeout:s.timeout||5e3,backends:s.backends||[]},r=t=>{M({...L,[s.id]:{...n,...t}})};return e.jsxs(f,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:a?e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Path"}),e.jsx(h,{value:n.path||"",onChange:t=>r({path:t.target.value}),placeholder:"/api/endpoint"}),j.path&&e.jsx("p",{className:"text-xs text-destructive",children:j.path})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Method"}),e.jsxs(w,{value:n.method||"GET",onValueChange:t=>r({method:t}),children:[e.jsx(S,{children:e.jsx(R,{})}),e.jsxs(F,{children:[e.jsx(c,{value:"GET",children:"GET"}),e.jsx(c,{value:"POST",children:"POST"}),e.jsx(c,{value:"PUT",children:"PUT"}),e.jsx(c,{value:"DELETE",children:"DELETE"}),e.jsx(c,{value:"PATCH",children:"PATCH"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Aggregator"}),e.jsxs(w,{value:n.aggregator||"merge",onValueChange:t=>r({aggregator:t}),children:[e.jsx(S,{children:e.jsx(R,{})}),e.jsxs(F,{children:[e.jsx(c,{value:"merge",children:"Merge"}),e.jsx(c,{value:"parallel",children:"Parallel"}),e.jsx(c,{value:"sequential",children:"Sequential"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Cache TTL (seconds)"}),e.jsx(h,{type:"number",value:n.cacheTtl||5,onChange:t=>r({cacheTtl:parseInt(t.target.value)||5}),min:0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Timeout (ms)"}),e.jsx(h,{type:"number",value:n.timeout||5e3,onChange:t=>r({timeout:parseInt(t.target.value)||5e3}),min:1}),j.timeout&&e.jsx("p",{className:"text-xs text-destructive",children:j.timeout})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Backends"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-md p-4",children:o.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No backends available"}):o.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{checked:(n.backends||[]).includes(t.id),onCheckedChange:p=>{const g=n.backends||[];r(p?{backends:[...g,t.id]}:{backends:g.filter(E=>E!==t.id)})}}),e.jsxs(i,{className:"flex-1 cursor-pointer",children:[t.name," (",t.protocol.toUpperCase(),")"]})]},t.id))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/30",children:e.jsx($,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsxs(N,{className:"text-lg font-semibold",children:[s.method," ",s.path]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(y,{variant:"outline",children:s.aggregator||"merge"}),e.jsxs(y,{variant:"outline",children:[s.backends.length," backends"]}),s.requests&&e.jsxs(y,{variant:"outline",className:"bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300",children:[s.requests," requests"]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>{A(s.id),M({...L,[s.id]:{path:s.path,method:s.method,aggregator:s.aggregator||"merge",cacheTtl:s.cacheTtl||5,timeout:s.timeout||5e3,backends:s.backends||[]}})},className:"hover:bg-primary/10 hover:text-primary",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>Ee(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(J,{className:"h-4 w-4"})})]})]})})}),a&&e.jsx(m,{children:e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(x,{variant:"outline",onClick:()=>Re(s.id),children:"Cancel"}),e.jsxs(x,{onClick:()=>Se(s.id,n),children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Save"]})]})}),!a&&e.jsx(m,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Backends"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.backends.map((t,p)=>{const g=o.find(E=>E.id===t);return e.jsx(y,{variant:"outline",children:g?.name||t},p)})})]})})]},s.id)})})})]})}),e.jsx(Q,{value:"backends",className:"space-y-4",children:e.jsxs(f,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Backend Services"}),e.jsx(X,{children:"Connected backend services"})]}),e.jsxs(x,{onClick:Ne,size:"sm",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Add Backend"]})]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:o.map(s=>{const a=pe===s.id,n=D[s.id]||{name:s.name,endpoint:s.endpoint,protocol:s.protocol,timeout:s.timeout||5e3,retries:s.retries||3,retryBackoff:s.retryBackoff||"exponential",circuitBreakerEnabled:s.circuitBreaker?.enabled??!0,failureThreshold:s.circuitBreaker?.failureThreshold||5,successThreshold:s.circuitBreaker?.successThreshold||2,circuitBreakerTimeout:s.circuitBreaker?.timeout||6e4},r=t=>{G({...D,[s.id]:{...n,...t}})};return e.jsxs(f,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(b,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:a?e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Name"}),e.jsx(h,{value:n.name||"",onChange:t=>r({name:t.target.value}),placeholder:"backend-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Endpoint URL"}),e.jsx(h,{value:n.endpoint||"",onChange:t=>r({endpoint:t.target.value}),placeholder:"http://localhost:8080"}),j.endpoint&&e.jsx("p",{className:"text-xs text-destructive",children:j.endpoint})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Protocol"}),e.jsxs(w,{value:n.protocol||"http",onValueChange:t=>r({protocol:t}),children:[e.jsx(S,{children:e.jsx(R,{})}),e.jsxs(F,{children:[e.jsx(c,{value:"http",children:"HTTP"}),e.jsx(c,{value:"grpc",children:"gRPC"}),e.jsx(c,{value:"graphql",children:"GraphQL"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Timeout (ms)"}),e.jsx(h,{type:"number",value:n.timeout||5e3,onChange:t=>r({timeout:parseInt(t.target.value)||5e3}),min:1}),j.timeout&&e.jsx("p",{className:"text-xs text-destructive",children:j.timeout})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Retries"}),e.jsx(h,{type:"number",value:n.retries||3,onChange:t=>r({retries:parseInt(t.target.value)||3}),min:0,max:10}),j.retries&&e.jsx("p",{className:"text-xs text-destructive",children:j.retries})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Retry Backoff Strategy"}),e.jsxs(w,{value:n.retryBackoff||"exponential",onValueChange:t=>r({retryBackoff:t}),children:[e.jsx(S,{children:e.jsx(R,{})}),e.jsxs(F,{children:[e.jsx(c,{value:"exponential",children:"Exponential"}),e.jsx(c,{value:"linear",children:"Linear"}),e.jsx(c,{value:"constant",children:"Constant"})]})]})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Circuit Breaker"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically stop requests to failing backends"})]}),e.jsx(q,{checked:n.circuitBreakerEnabled??!0,onCheckedChange:t=>r({circuitBreakerEnabled:t})})]}),n.circuitBreakerEnabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 pl-4 border-l-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Failure Threshold"}),e.jsx(h,{type:"number",value:n.failureThreshold||5,onChange:t=>r({failureThreshold:parseInt(t.target.value)||5}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Success Threshold"}),e.jsx(h,{type:"number",value:n.successThreshold||2,onChange:t=>r({successThreshold:parseInt(t.target.value)||2}),min:1})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(i,{children:"Circuit Breaker Timeout (ms)"}),e.jsx(h,{type:"number",value:n.circuitBreakerTimeout||6e4,onChange:t=>r({circuitBreakerTimeout:parseInt(t.target.value)||6e4}),min:1e3})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${Pe(s.status)}/20`,children:e.jsx(H,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(N,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(y,{variant:"outline",className:`${Ie(s.status)} border-0`,children:s.status}),e.jsx(y,{variant:"outline",children:s.protocol.toUpperCase()}),e.jsx(y,{variant:"outline",className:"font-mono text-xs",children:s.endpoint})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>{P(s.id),G({...D,[s.id]:{name:s.name,endpoint:s.endpoint,protocol:s.protocol,timeout:s.timeout||5e3,retries:s.retries||3,retryBackoff:s.retryBackoff||"exponential",circuitBreakerEnabled:s.circuitBreaker?.enabled??!0,failureThreshold:s.circuitBreaker?.failureThreshold||5,successThreshold:s.circuitBreaker?.successThreshold||2,circuitBreakerTimeout:s.circuitBreaker?.timeout||6e4}})},className:"hover:bg-primary/10 hover:text-primary",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>ke(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(J,{className:"h-4 w-4"})})]})]})})}),a&&e.jsx(m,{children:e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(x,{variant:"outline",onClick:()=>qe(s.id),children:"Cancel"}),e.jsxs(x,{onClick:()=>Fe(s.id,n),children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Save"]})]})}),!a&&e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.requests&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Requests:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.requests.toLocaleString()})]}),s.avgLatency&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Avg Latency:"}),e.jsxs("span",{className:"ml-2 font-semibold",children:[s.avgLatency,"ms"]})]})]})})]},s.id)})})})]})}),e.jsx(Q,{value:"settings",className:"space-y-4",children:e.jsxs(f,{children:[e.jsxs(b,{children:[e.jsx(N,{children:"BFF Service Settings"}),e.jsx(X,{children:"Service configuration"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Enable Caching"}),e.jsx(q,{checked:l.enableCaching??!0,onCheckedChange:s=>d({enableCaching:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Enable Request Batching"}),e.jsx(q,{checked:l.enableRequestBatching??!1,onCheckedChange:s=>d({enableRequestBatching:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{children:"Enable Response Compression"}),e.jsx(q,{checked:l.enableResponseCompression??!0,onCheckedChange:s=>d({enableResponseCompression:s})})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Default Timeout (ms)"}),e.jsx(h,{type:"number",value:l.defaultTimeout??5e3,onChange:s=>d({defaultTimeout:parseInt(s.target.value)||5e3}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Max Concurrent Requests"}),e.jsx(h,{type:"number",value:l.maxConcurrentRequests??100,onChange:s=>d({maxConcurrentRequests:parseInt(s.target.value)||100}),min:1})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Audience"}),e.jsxs(w,{value:l.audience||"web",onValueChange:s=>d({audience:s}),children:[e.jsx(S,{children:e.jsx(R,{})}),e.jsxs(F,{children:[e.jsx(c,{value:"mobile",children:"Mobile"}),e.jsx(c,{value:"web",children:"Web"}),e.jsx(c,{value:"partner",children:"Partner"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Target audience for this BFF service. Affects response size and format."})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{children:"Enable Fallback"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use fallback component when all backends fail"})]}),e.jsx(q,{checked:l.fallbackEnabled??!1,onCheckedChange:s=>d({fallbackEnabled:s})})]}),l.fallbackEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Fallback Component"}),e.jsx(h,{placeholder:"Component ID for fallback",value:l.fallbackComponent||"",onChange:s=>d({fallbackComponent:s.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ID of the component to use as fallback when all backends fail"})]})]})]})})]})]}),e.jsx(ee,{open:!!z,onOpenChange:s=>!s&&U(null),children:e.jsxs(se,{children:[e.jsxs(te,{children:[e.jsx(ae,{children:"Delete Endpoint"}),e.jsx(ne,{children:"Are you sure you want to delete this endpoint? This action cannot be undone."})]}),e.jsxs(re,{children:[e.jsx(ie,{children:"Cancel"}),e.jsx(le,{onClick:Te,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(ee,{open:!!I,onOpenChange:s=>!s&&O(null),children:e.jsxs(se,{children:[e.jsxs(te,{children:[e.jsx(ae,{children:"Delete Backend"}),e.jsx(ne,{children:"Are you sure you want to delete this backend? It will be removed from all endpoints. This action cannot be undone."})]}),e.jsxs(re,{children:[e.jsx(ie,{children:"Cancel"}),e.jsx(le,{onClick:ye,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{ss as BFFServiceConfigAdvanced};

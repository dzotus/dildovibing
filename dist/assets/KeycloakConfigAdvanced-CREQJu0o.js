import{u as W,j as e,B as o,i as p,S as b,C as c,e as i,f as r,k as d,T as Y,a as Z,b as N,d as g,h as m,L as n,I as h,P as A,af as T,X as P,m as U,t as f,n as $,o as ee,p as se,q as ae,s as y}from"./index-B7PftTIS.js";import{S as I}from"./shield-B1Nr_zGk.js";import{G as R}from"./globe-DRVMFL0_.js";import{K as C}from"./key-xT6qissU.js";import{U as S}from"./users-DfJy-zFu.js";import{C as le}from"./clock-hDKlFJVm.js";import{L as ne}from"./lock-dVgRrjZ5.js";function me({componentId:w}){const{nodes:M,updateNode:O}=W(),v=M.find(s=>s.id===w);if(!v)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const l=v.data.config||{},k=l.realm||"archiphoenix",D=l.adminUrl||"http://keycloak:8080",L=l.enableSSL??!1,F=l.sslRequired||"external",K=l.accessTokenLifespan||300,q=l.ssoSessionIdle||1800,z=l.ssoSessionMax||36e3,E=l.enableOAuth2??!0,B=l.enableSAML??!1,V=l.enableLDAP??!1,G=l.passwordPolicy||"length(8)",j=l.clients||[{id:"archiphoenix-app",name:"ArchiPhoenix App",type:"public",enabled:!0,protocol:"openid-connect"},{id:"admin-cli",name:"Admin CLI",type:"public",enabled:!0,protocol:"openid-connect"}],t=l.users||[{id:"1",username:"admin",email:"admin@archiphoenix.com",enabled:!0,roles:["admin","user"]},{id:"2",username:"user1",email:"user1@archiphoenix.com",enabled:!0,roles:["user"]}],a=s=>{O(w,{data:{...v.data,config:{...l,...s}}})},X=()=>{a({clients:[...j,{id:"new-client",name:"New Client",type:"public",enabled:!0,protocol:"openid-connect"}]})},_=s=>{a({clients:j.filter((x,u)=>u!==s)})},H=()=>{a({users:[...t,{id:String(t.length+1),username:"newuser",email:"newuser@example.com",enabled:!0,roles:["user"]}]})},J=s=>{a({users:t.filter((x,u)=>u!==s)})};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(I,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Keycloak"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Identity and Access Management"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),"Active"]}),e.jsxs(p,{size:"sm",variant:"outline",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Admin Console"]})]})]}),e.jsx(b,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(c,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Realm"})}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:k}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Current realm"})]})]}),e.jsxs(c,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Clients"})}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Registered clients"})]})]}),e.jsxs(c,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Users"})}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total users"})]})]}),e.jsxs(c,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(r,{className:"text-sm font-medium text-muted-foreground",children:"Sessions"})}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.filter(s=>s.enabled).length*2}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active sessions"})]})]})]}),e.jsxs(Y,{defaultValue:"realm",className:"w-full",children:[e.jsxs(Z,{className:"grid w-full grid-cols-5",children:[e.jsxs(N,{value:"realm",className:"gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Realm"]}),e.jsxs(N,{value:"clients",className:"gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"Clients"]}),e.jsxs(N,{value:"users",className:"gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),"Users"]}),e.jsxs(N,{value:"sessions",className:"gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),"Sessions"]}),e.jsxs(N,{value:"security",className:"gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Security"]})]}),e.jsx(g,{value:"realm",className:"space-y-4 mt-4",children:e.jsxs(c,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"Realm Configuration"}),e.jsx(m,{children:"Keycloak realm and admin settings"})]}),e.jsx(d,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"realm",children:"Realm Name"}),e.jsx(h,{id:"realm",value:k,onChange:s=>a({realm:s.target.value}),placeholder:"my-realm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"admin-url",children:"Admin URL"}),e.jsx(h,{id:"admin-url",value:D,onChange:s=>a({adminUrl:s.target.value}),placeholder:"http://keycloak:8080"})]})]})})]})}),e.jsx(g,{value:"clients",className:"space-y-4 mt-4",children:e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Clients"}),e.jsx(m,{children:"OAuth2 and OpenID Connect clients"})]}),e.jsxs(p,{size:"sm",onClick:X,variant:"outline",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Create Client"]})]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:j.map((s,x)=>e.jsx(c,{className:"border-border",children:e.jsx(i,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded bg-primary/10",children:e.jsx(C,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx(r,{className:"text-lg",children:s.name}),e.jsxs(m,{className:"text-xs mt-1",children:[s.id," • ",s.type," • ",s.protocol]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.enabled?e.jsxs(o,{variant:"default",className:"gap-1",children:[e.jsx(T,{className:"h-3 w-3"}),"Enabled"]}):e.jsxs(o,{variant:"secondary",className:"gap-1",children:[e.jsx(P,{className:"h-3 w-3"}),"Disabled"]}),j.length>1&&e.jsx(p,{size:"icon",variant:"ghost",onClick:()=>_(x),children:e.jsx(U,{className:"h-4 w-4"})})]})]})})},x))})})]})}),e.jsx(g,{value:"users",className:"space-y-4 mt-4",children:e.jsxs(c,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Users"}),e.jsx(m,{children:"User accounts and roles"})]}),e.jsxs(p,{size:"sm",onClick:H,variant:"outline",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add User"]})]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:t.map((s,x)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-border rounded-lg bg-card",children:[e.jsx("div",{className:"p-2 rounded-full bg-secondary",children:e.jsx(S,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:s.username}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.email}),e.jsx("div",{className:"flex gap-1 mt-1",children:s.roles.map((u,Q)=>e.jsx(o,{variant:"outline",className:"text-xs",children:u},Q))})]}),s.enabled?e.jsxs(o,{variant:"default",className:"gap-1",children:[e.jsx(T,{className:"h-3 w-3"}),"Active"]}):e.jsxs(o,{variant:"secondary",className:"gap-1",children:[e.jsx(P,{className:"h-3 w-3"}),"Disabled"]}),t.length>1&&e.jsx(p,{size:"icon",variant:"ghost",onClick:()=>J(x),children:e.jsx(U,{className:"h-4 w-4"})})]},x))})})]})}),e.jsx(g,{value:"sessions",className:"space-y-4 mt-4",children:e.jsxs(c,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"Session Management"}),e.jsx(m,{children:"Configure SSO session timeouts and token lifespans"})]}),e.jsx(d,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"access-token-lifespan",children:"Access Token Lifespan"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{id:"access-token-lifespan",type:"number",min:"60",max:"3600",value:K,onChange:s=>a({accessTokenLifespan:parseInt(s.target.value)||300})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"sec"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"sso-session-idle",children:"SSO Session Idle"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{id:"sso-session-idle",type:"number",min:"60",max:"7200",value:q,onChange:s=>a({ssoSessionIdle:parseInt(s.target.value)||1800})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"sec"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"sso-session-max",children:"SSO Session Max"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{id:"sso-session-max",type:"number",min:"300",max:"86400",value:z,onChange:s=>a({ssoSessionMax:parseInt(s.target.value)||36e3})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"sec"})]})]})]})})]})}),e.jsx(g,{value:"security",className:"space-y-4 mt-4",children:e.jsxs(c,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"Security Settings"}),e.jsx(m,{children:"SSL/TLS, protocols, and password policies"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Enable SSL"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Encrypt connections with TLS"})]}),e.jsx(f,{checked:L,onCheckedChange:s=>a({enableSSL:s})})]}),L&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"SSL Required"}),e.jsxs($,{value:F,onValueChange:s=>a({sslRequired:s}),children:[e.jsx(ee,{children:e.jsx(se,{})}),e.jsxs(ae,{children:[e.jsx(y,{value:"external",children:"External"}),e.jsx(y,{value:"all",children:"All"}),e.jsx(y,{value:"none",children:"None"})]})]})]}),e.jsx(b,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{children:"Protocols"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{children:"OAuth2"})]}),e.jsx(f,{checked:E,onCheckedChange:s=>a({enableOAuth2:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{children:"SAML"})]}),e.jsx(f,{checked:B,onCheckedChange:s=>a({enableSAML:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{children:"LDAP"})]}),e.jsx(f,{checked:V,onCheckedChange:s=>a({enableLDAP:s})})]})]})]}),e.jsx(b,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"password-policy",children:"Password Policy"}),e.jsx(h,{id:"password-policy",value:G,onChange:s=>a({passwordPolicy:s.target.value}),placeholder:"length(8) and digits(1)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Keycloak password policy expression"})]})]})]})})]})]})})}export{me as KeycloakConfigAdvanced};

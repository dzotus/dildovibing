import{J as He,u as Je,a as Xe,j as e,e as ue,r as h,l as d,S as O,C as f,h as N,i as y,m as b,A as me,Z as Qe,T as Ze,b as Ke,c as R,R as je,d as Ye,f as G,k as $,L as l,q as F,s as q,t as B,v as z,w as o,P as H,O as es,I as x,U as ss,B as g,X as as,o as ts,aa as ns,x as J,D as pe,y as ge,z as ve,E as fe,G as Ne,_ as ye,H as be}from"./index-Nkr1tjDA.js";import{T as we}from"./textarea-D_P4HYki.js";import{a as w,s as S}from"./toast-Czm-F-I2.js";import{R as ls}from"./refresh-ccw-CiDyk_ew.js";import{D as rs}from"./database-Loe68eH4.js";import{C as is}from"./circle-check-big-C10E_4sf.js";const cs=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],X=He("flame",cs);function ps({componentId:L}){const{nodes:Ce,updateNode:Se}=Je(),{getComponentMetrics:Me}=Xe(),A=Ce.find(s=>s.id===L);if(!A)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const m=ue.getPyTorchServeEmulationEngine(L),Q=Me(L)?.customMetrics||{},i=A.data.config||{},r=i.models||[],M=i.predictions||[],Z=i.endpoint||"localhost:8080",Pe=i.modelStore||"/models",K=i.enableWorkers!==!1,ke=i.numWorkers||1,Y=i.enableBatching!==!1,De=i.batchSize||1,Te=i.maxBatchDelay||100,Oe=i.enableGPU||!1,ee=i.enableMetrics!==!1,Le=i.metricsPort||8082,P=m?.getMetrics(),Ee=P?.totalModels??i.totalModels??r.length,se=P?.servingModels??r.filter(s=>s.status==="serving").length,Ie=P?.totalPredictions??i.totalPredictions??M.length,Fe=P?.averageLatency??i.averageLatency??(r.length>0?r.reduce((s,a)=>s+(a.avgLatency||0),0)/r.length:0),ae=P?.requestsPerSecond??Q.requestsPerSecond??0,te=P?.errorRate??Q.errorRate??0,[j,qe]=h.useState(""),[C,ne]=h.useState(""),[k,le]=h.useState(""),[Be,U]=h.useState(""),[D,ze]=h.useState(""),[V,Ae]=h.useState("all"),[Ue,E]=h.useState(!1),[v,re]=h.useState(null),[Ve,W]=h.useState(!1),[I,ie]=h.useState(null),[n,u]=h.useState({name:"",version:"1.0",status:"serving",handler:"image_classifier",inputs:[],outputs:[]}),ce=h.useMemo(()=>r.filter(s=>{const a=!D||s.name.toLowerCase().includes(D.toLowerCase())||s.version.toLowerCase().includes(D.toLowerCase())||s.handler.toLowerCase().includes(D.toLowerCase()),t=V==="all"||s.status===V;return a&&t}),[r,D,V]),c=s=>{const a={...i,...s};Se(L,{data:{...A.data,config:a}}),setTimeout(()=>{const t=ue.getPyTorchServeEmulationEngine(L);t&&(t.initializeConfig(A),t.syncModelsFromConfig())},0)};h.useEffect(()=>{if(m&&r.length===0){const s=m.getModels();if(s.length>0){const a=s.map(t=>({name:t.name,version:t.version,status:t.status,handler:t.handler||"image_classifier",inputs:t.inputs||[],outputs:t.outputs||[],requests:t.requests,avgLatency:t.avgLatency}));c({models:a})}}},[m]),h.useEffect(()=>{const s=setInterval(()=>{m&&m.syncModelsFromConfig()},2e3);return()=>clearInterval(s)},[m]);const We=async()=>{if(!j||!C){S("Please select a model and version");return}if(!k.trim()){S("Please provide input data");return}try{let s;try{s=JSON.parse(k)}catch{S("Invalid JSON input");return}if(m){const a=await m.processPrediction(j,C,s);if(a.success&&a.output){const t={id:`pred-${Date.now()}`,model:j,version:C,input:k,output:JSON.stringify(a.output,null,2),status:"success",timestamp:new Date().toISOString(),latency:a.latency};U(t.output),c({predictions:[...M.slice(-99),t]}),w(`Prediction completed in ${a.latency}ms`)}else{const t={id:`pred-${Date.now()}`,model:j,version:C,input:k,output:void 0,status:"error",timestamp:new Date().toISOString(),latency:a.latency};U(JSON.stringify({error:a.error},null,2)),c({predictions:[...M.slice(-99),t]}),S(a.error||"Prediction failed")}}else{const a={id:`pred-${Date.now()}`,model:j,version:C,input:k,output:JSON.stringify({predictions:[[.85,.1,.05]]},null,2),status:"success",timestamp:new Date().toISOString(),latency:Math.floor(Math.random()*40)+20};U(a.output||""),c({predictions:[...M.slice(-99),a]}),w("Prediction completed (mock)")}}catch(s){S(s instanceof Error?s.message:"Prediction failed")}},de=()=>{re(null),u({name:"",version:"1.0",status:"serving",handler:"image_classifier",inputs:[],outputs:[]}),E(!0)},_e=s=>{re(s),u({name:s.name,version:s.version,status:s.status,handler:s.handler,inputs:s.inputs||[],outputs:s.outputs||[]}),E(!0)},Re=()=>{if(!n.name||!n.version){S("Model name and version are required");return}if(r.find(t=>t.name===n.name&&t.version===n.version&&(!v||t.name!==v.name||t.version!==v.version))){S("Model with this name and version already exists");return}const a=v?r.map(t=>t.name===v.name&&t.version===v.version?{...n,requests:t.requests,avgLatency:t.avgLatency}:t):[...r,{...n,requests:0,avgLatency:0}];c({models:a}),E(!1),w(v?"Model updated":"Model added")},Ge=s=>{ie({name:s.name,version:s.version}),W(!0)},$e=()=>{if(I){const s=r.filter(a=>!(a.name===I.name&&a.version===I.version));c({models:s}),W(!1),ie(null),w("Model deleted")}},oe=s=>{u(s==="input"?{...n,inputs:[...n.inputs,{name:"",dtype:"float32",shape:"[1,1]"}]}:{...n,outputs:[...n.outputs,{name:"",dtype:"float32",shape:"[1,1]"}]})},T=(s,a,t,_)=>{if(s==="input"){const p=[...n.inputs];p[a]={...p[a],[t]:_},u({...n,inputs:p})}else{const p=[...n.outputs];p[a]={...p[a],[t]:_},u({...n,outputs:p})}},xe=(s,a)=>{if(s==="input"){const t=n.inputs.filter((_,p)=>p!==a);u({...n,inputs:t})}else{const t=n.outputs.filter((_,p)=>p!==a);u({...n,outputs:t})}},he=s=>{switch(s){case"serving":return"bg-green-500";case"loading":return"bg-yellow-500";case"unavailable":case"error":return"bg-red-500";default:return"bg-gray-500"}};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"PyTorch Serve"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Model Serving"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Flexible and easy-to-use serving for PyTorch models"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>{m&&(m.syncModelsFromConfig(),w("Configuration refreshed"))},children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(O,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(f,{className:"border-l-4 border-l-orange-500 bg-card",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Models"}),e.jsx(X,{className:"h-4 w-4 text-orange-500"})]})}),e.jsxs(b,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400",children:Ee}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"total"})]}),se>0&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[se," serving"]})]})]}),e.jsxs(f,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Predictions"}),e.jsx(me,{className:"h-4 w-4 text-green-500"})]})}),e.jsxs(b,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Ie}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"total"})]}),ae>0&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[ae.toFixed(1)," req/s"]})]})]}),e.jsxs(f,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Avg Latency"}),e.jsx(Qe,{className:"h-4 w-4 text-purple-500"})]})}),e.jsxs(b,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:Fe.toFixed(0)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"ms"})]}),te>0&&e.jsxs("div",{className:"text-xs text-destructive mt-1",children:[(te*100).toFixed(1),"% errors"]})]})]}),e.jsxs(f,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Endpoint"}),e.jsx(rs,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(b,{children:e.jsx("div",{className:"text-sm font-semibold text-cyan-600 dark:text-cyan-400 truncate",children:Z})})]})]}),e.jsxs(Ze,{defaultValue:"test",className:"space-y-4",children:[e.jsxs(Ke,{className:"flex flex-wrap w-full gap-1 p-1 bg-muted rounded-lg",children:[e.jsxs(R,{value:"test",className:"flex items-center gap-2 flex-1 min-w-[120px]",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Test Prediction"}),e.jsx("span",{className:"sm:hidden",children:"Test"})]}),e.jsxs(R,{value:"models",className:"flex items-center gap-2 flex-1 min-w-[120px]",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsxs("span",{className:"hidden sm:inline",children:["Models (",r.length,")"]}),e.jsx("span",{className:"sm:hidden",children:"Models"})]}),e.jsxs(R,{value:"history",className:"flex items-center gap-2 flex-1 min-w-[120px]",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsxs("span",{className:"hidden sm:inline",children:["History (",M.length,")"]}),e.jsx("span",{className:"sm:hidden",children:"History"})]}),e.jsxs(R,{value:"settings",className:"flex items-center gap-2 flex-1 min-w-[120px]",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Settings"}),e.jsx("span",{className:"sm:hidden",children:"Config"})]})]}),e.jsx(G,{value:"test",className:"space-y-4",children:e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Model Prediction"}),e.jsx($,{children:"Test model inference"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Model"}),e.jsxs(F,{value:j,onValueChange:s=>{qe(s);const a=r.find(t=>t.name===s);a&&ne(a.version)},children:[e.jsx(q,{children:e.jsx(B,{placeholder:"Select model"})}),e.jsx(z,{children:r.map(s=>e.jsx(o,{value:s.name,children:s.name},s.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Version"}),e.jsxs(F,{value:C,onValueChange:ne,children:[e.jsx(q,{children:e.jsx(B,{placeholder:"Select version"})}),e.jsx(z,{children:j&&r.find(s=>s.name===j)&&e.jsx(o,{value:r.find(s=>s.name===j).version,children:r.find(s=>s.name===j).version})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Input (JSON)"}),e.jsx(we,{value:k,onChange:s=>le(s.target.value),className:"font-mono text-sm min-h-[200px]",placeholder:'{ "data": [...] }'})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Output"}),e.jsx(we,{value:Be,readOnly:!0,className:"font-mono text-sm min-h-[200px] bg-muted",placeholder:"Prediction result will appear here..."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{onClick:We,disabled:!j||!C,children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Run Prediction"]}),e.jsx(d,{variant:"outline",onClick:()=>{le(""),U("")},children:"Clear"})]})]})]})}),e.jsx(G,{value:"models",className:"space-y-4",children:e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Models"}),e.jsx($,{children:"Deployed PyTorch models"})]}),e.jsxs(d,{onClick:de,size:"sm",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Model"]})]})}),e.jsxs(b,{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(x,{placeholder:"Search models...",value:D,onChange:s=>ze(s.target.value),className:"pl-9"})]}),e.jsxs(F,{value:V,onValueChange:Ae,children:[e.jsxs(q,{className:"w-[180px]",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),e.jsx(B,{})]}),e.jsxs(z,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"serving",children:"Serving"}),e.jsx(o,{value:"loading",children:"Loading"}),e.jsx(o,{value:"unavailable",children:"Unavailable"}),e.jsx(o,{value:"error",children:"Error"})]})]})]}),e.jsx("div",{className:"space-y-4",children:ce.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:r.length===0?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No models deployed"}),e.jsxs(d,{onClick:de,variant:"outline",size:"sm",className:"mt-4",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add First Model"]})]}):e.jsx("p",{children:"No models match your filters"})}):ce.map(s=>e.jsxs(f,{className:"border-l-4 border-l-orange-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${he(s.status)}/20`,children:e.jsx(X,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(y,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[e.jsx(g,{variant:"outline",className:he(s.status),children:s.status}),e.jsxs(g,{variant:"outline",children:["v",s.version]}),e.jsx(g,{variant:"outline",children:s.handler}),s.requests&&e.jsxs(g,{variant:"outline",children:[s.requests," requests"]}),s.avgLatency&&e.jsxs(g,{variant:"outline",children:[s.avgLatency.toFixed(0),"ms avg"]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>_e(s),children:e.jsx(as,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>Ge(s),children:e.jsx(ts,{className:"h-4 w-4 text-destructive"})})]})]})}),e.jsxs(b,{children:[s.inputs&&s.inputs.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Inputs"}),s.inputs.map((a,t)=>e.jsxs("div",{className:"p-2 border rounded text-sm",children:[e.jsx("span",{className:"font-mono font-semibold",children:a.name}),e.jsx(g,{variant:"outline",className:"ml-2 text-xs",children:a.dtype}),e.jsx(g,{variant:"outline",className:"ml-2 text-xs",children:a.shape})]},t))]}),s.outputs&&s.outputs.length>0&&e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx(l,{children:"Outputs"}),s.outputs.map((a,t)=>e.jsxs("div",{className:"p-2 border rounded text-sm",children:[e.jsx("span",{className:"font-mono font-semibold",children:a.name}),e.jsx(g,{variant:"outline",className:"ml-2 text-xs",children:a.dtype}),e.jsx(g,{variant:"outline",className:"ml-2 text-xs",children:a.shape})]},t))]}),s.avgLatency&&e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Avg Latency:"}),e.jsxs("span",{className:"ml-2 font-semibold",children:[s.avgLatency.toFixed(0),"ms"]})]})]})]},`${s.name}-${s.version}`))})]})]})}),e.jsx(G,{value:"history",className:"space-y-4",children:e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"Prediction History"}),e.jsx($,{children:"Previously executed predictions"})]}),e.jsx(b,{children:e.jsx("div",{className:"space-y-4",children:M.map(s=>e.jsxs(f,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(N,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.status==="success"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:s.status==="success"?e.jsx(is,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):e.jsx(ns,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsxs(y,{className:"text-lg font-semibold",children:[s.model," v",s.version]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.latency&&e.jsxs(g,{variant:"outline",children:[s.latency,"ms"]}),e.jsx(g,{variant:s.status==="success"?"default":"destructive",children:s.status})]})]})]})})}),e.jsxs(b,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.input&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Input"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto max-h-40 overflow-y-auto",children:s.input})]}),s.output&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Output"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto max-h-40 overflow-y-auto",children:s.output})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(s.timestamp).toLocaleString()})]})]},s.id))})})]})}),e.jsx(G,{value:"settings",className:"space-y-4",children:e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(y,{children:"PyTorch Serve Settings"}),e.jsx($,{children:"Server configuration"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Endpoint"}),e.jsx(x,{value:Z,onChange:s=>c({endpoint:s.target.value}),placeholder:"localhost:8080"})]}),e.jsx(O,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable GPU"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use GPU acceleration for inference"})]}),e.jsx(J,{checked:Oe,onCheckedChange:s=>{c({enableGPU:s}),w(s?"GPU enabled":"GPU disabled")}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable Batching"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Batch multiple requests together"})]}),e.jsx(J,{checked:Y,onCheckedChange:s=>{c({enableBatching:s}),w(s?"Batching enabled":"Batching disabled")}})]}),Y&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Batch Size"}),e.jsx(x,{type:"number",value:De,onChange:s=>{const a=parseInt(s.target.value)||1;a>=1&&a<=1e3&&c({batchSize:a})},min:1,max:1e3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Max Batch Wait Time (ms)"}),e.jsx(x,{type:"number",value:Te,onChange:s=>{const a=parseInt(s.target.value)||100;a>=1&&a<=1e4&&c({maxBatchDelay:a})},min:1,max:1e4})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Model Store"}),e.jsx(x,{value:Pe,onChange:s=>c({modelStore:s.target.value}),placeholder:"/models"})]}),e.jsx(O,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable Workers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use worker processes for parallel processing"})]}),e.jsx(J,{checked:K,onCheckedChange:s=>{c({enableWorkers:s}),w(s?"Workers enabled":"Workers disabled")}})]}),K&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Number of Workers"}),e.jsx(x,{type:"number",value:ke,onChange:s=>{const a=parseInt(s.target.value)||1;a>=1&&a<=100&&c({numWorkers:a})},min:1,max:100})]}),e.jsx(O,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Enable Metrics"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Export metrics for monitoring"})]}),e.jsx(J,{checked:ee,onCheckedChange:s=>{c({enableMetrics:s}),w(s?"Metrics enabled":"Metrics disabled")}})]}),ee&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Metrics Port"}),e.jsx(x,{type:"number",value:Le,onChange:s=>{const a=parseInt(s.target.value)||8082;a>=1024&&a<=65535&&c({metricsPort:a})},min:1024,max:65535})]})]})]})})]}),e.jsx(pe,{open:Ue,onOpenChange:E,children:e.jsxs(ge,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ve,{children:[e.jsx(fe,{children:v?"Edit Model":"Add Model"}),e.jsx(Ne,{children:v?"Update model configuration":"Add a new PyTorch model to the serving system"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Model Name *"}),e.jsx(x,{value:n.name,onChange:s=>u({...n,name:s.target.value}),placeholder:"my-model"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Version *"}),e.jsx(x,{value:n.version,onChange:s=>u({...n,version:s.target.value}),placeholder:"1.0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Handler"}),e.jsxs(F,{value:n.handler,onValueChange:s=>u({...n,handler:s}),children:[e.jsx(q,{children:e.jsx(B,{})}),e.jsxs(z,{children:[e.jsx(o,{value:"image_classifier",children:"Image Classifier"}),e.jsx(o,{value:"object_detector",children:"Object Detector"}),e.jsx(o,{value:"text_classifier",children:"Text Classifier"}),e.jsx(o,{value:"custom",children:"Custom"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Status"}),e.jsxs(F,{value:n.status,onValueChange:s=>u({...n,status:s}),children:[e.jsx(q,{children:e.jsx(B,{})}),e.jsxs(z,{children:[e.jsx(o,{value:"serving",children:"Serving"}),e.jsx(o,{value:"loading",children:"Loading"}),e.jsx(o,{value:"unavailable",children:"Unavailable"}),e.jsx(o,{value:"error",children:"Error"})]})]})]})]}),e.jsx(O,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Inputs"}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>oe("input"),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Input"]})]}),n.inputs.map((s,a)=>e.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[e.jsx(x,{placeholder:"Name",value:s.name,onChange:t=>T("input",a,"name",t.target.value)}),e.jsx(x,{placeholder:"dtype",value:s.dtype,onChange:t=>T("input",a,"dtype",t.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{placeholder:"shape",value:s.shape,onChange:t=>T("input",a,"shape",t.target.value)}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>xe("input",a),children:e.jsx(ye,{className:"h-4 w-4"})})]})]},a))]}),e.jsx(O,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Outputs"}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>oe("output"),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Output"]})]}),n.outputs.map((s,a)=>e.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[e.jsx(x,{placeholder:"Name",value:s.name,onChange:t=>T("output",a,"name",t.target.value)}),e.jsx(x,{placeholder:"dtype",value:s.dtype,onChange:t=>T("output",a,"dtype",t.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{placeholder:"shape",value:s.shape,onChange:t=>T("output",a,"shape",t.target.value)}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>xe("output",a),children:e.jsx(ye,{className:"h-4 w-4"})})]})]},a))]})]}),e.jsxs(be,{children:[e.jsx(d,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),e.jsxs(d,{onClick:Re,children:[v?"Update":"Add"," Model"]})]})]})}),e.jsx(pe,{open:Ve,onOpenChange:W,children:e.jsxs(ge,{children:[e.jsxs(ve,{children:[e.jsx(fe,{children:"Delete Model"}),e.jsxs(Ne,{children:['Are you sure you want to delete model "',I?.name,'" version "',I?.version,'"? This action cannot be undone.']})]}),e.jsxs(be,{children:[e.jsx(d,{variant:"outline",onClick:()=>W(!1),children:"Cancel"}),e.jsx(d,{variant:"destructive",onClick:$e,children:"Delete"})]})]})})]})})}export{ps as PyTorchServeConfigAdvanced};

import{u as Zt,X as Wt,j as e,V as Xt,r,i as h,S as E,C as p,e as f,f as N,k as v,F as Fe,A as Ge,T as ea,a as sa,b as F,N as dt,c as ta,d as G,h as B,P as $,B as m,W as Is,m as O,L as l,I as u,n as R,o as A,p as I,q as L,s as o,U as Ne,t as be,a9 as Ls,Y as aa,D as X,v as ee,w as se,x as te,y as ae,z as ne,_ as ye,a0 as we,a1 as Ce,a2 as Se,a3 as Te,a4 as ke,a5 as Pe,a6 as Ue}from"./index-zfnU8aSQ.js";import{u as na}from"./use-toast-B6EazcvR.js";import{T as M}from"./textarea-BrIgZm1l.js";import{R as la}from"./refresh-ccw-BTge5KT-.js";import{S as Y}from"./server-Cxo94eUY.js";import{C as Ee}from"./circle-check-big-Bmmh-OXg.js";import{F as ot}from"./folder-git-2-BBP29dqu.js";import{K as mt}from"./key-DxI8RbHT.js";import{C as xt}from"./calendar-1UkMRwk1.js";import{C as ra}from"./clock-DNRX7VOu.js";function Sa({componentId:Re}){const{nodes:ht,updateNode:ut}=Zt(),{isRunning:Js,getComponentMetrics:jt}=Wt(),{toast:x}=na(),V=ht.find(s=>s.id===Re);if(!V)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const i=Xt.getAnsibleEmulationEngine(Re);jt(Re);const y=V.data.config||{},[Ms,pt]=r.useState([]),[T,vt]=r.useState([]),[Vs,gt]=r.useState([]),[Be,ft]=r.useState([]),[$e,Nt]=r.useState([]),[Oe,bt]=r.useState([]),[H,yt]=r.useState(null),[ia,ca]=r.useState(null),[da,wt]=r.useState(!1),[_,Ye]=r.useState(null),[K,_e]=r.useState(null),[D,Qe]=r.useState(null),[Ae,qe]=r.useState(""),[Hs,Ze]=r.useState(""),[Ie,We]=r.useState(""),[Ks,Xe]=r.useState(""),[oa,ma]=r.useState(null),[xa,Ct]=r.useState(!1),[Q,es]=r.useState(null),[ha,ua]=r.useState(""),[Ds,St]=r.useState(null),[Tt,ss]=r.useState(!1),[zs,kt]=r.useState([]),[ts,le]=r.useState(!1),[k,re]=r.useState(null),[ie,Le]=r.useState(null),[Je,ce]=r.useState(""),[Fs,de]=r.useState(""),[as,oe]=r.useState("manual"),[Gs,me]=r.useState(""),[Bs,xe]=r.useState("main"),[$s,he]=r.useState("playbook.yml"),[ns,ue]=r.useState(!1),[P,je]=r.useState(null),[pe,Me]=r.useState(null),[Ve,ls]=r.useState(""),[Os,rs]=r.useState(""),[w,is]=r.useState("machine"),[Ys,cs]=r.useState(""),[_s,ds]=r.useState(""),[Qs,os]=r.useState(""),[qs,ms]=r.useState(""),[Zs,xs]=r.useState("sudo"),[Ws,hs]=r.useState(""),[Xs,us]=r.useState(""),[et,js]=r.useState(""),[st,ps]=r.useState(""),[tt,vs]=r.useState("aws"),[at,gs]=r.useState(""),[nt,fs]=r.useState(""),[lt,Ns]=r.useState(""),[bs,ve]=r.useState(!1),[U,ge]=r.useState(null),[fe,ys]=r.useState(null),[He,ws]=r.useState(""),[rt,Cs]=r.useState(""),[Ke,Ss]=r.useState(""),[it,Ts]=r.useState(!0),[De,ks]=r.useState(`DTSTART:20240101T000000Z
RRULE:FREQ=HOURLY;INTERVAL=1`),[ct,Ps]=r.useState("UTC"),[Us,Es]=r.useState(""),[Rs,As]=r.useState("");r.useEffect(()=>{if(!i)return;const s=()=>{try{const a=i.getInventories(),c=i.getJobTemplates(),d=i.getAllJobs(),n=i.getProjects(),J=i.getCredentials(),ze=i.getSchedules(),z=i.getMetrics();pt(a),vt(c),gt(d),ft(n),Nt(J),bt(ze),yt(z)}catch(a){console.error("Error updating Ansible data:",a)}};s();const t=setInterval(s,Js?500:2e3);return()=>clearInterval(t)},[i,Js]),r.useEffect(()=>{i&&V&&i.updateConfig(V)},[y,V,i]),r.useEffect(()=>{if(k&&i){const s=i.getProjects().find(t=>t.id===k);s&&(ce(s.name),de(s.description||""),oe(s.scmType),me(s.scmUrl||""),xe(s.scmBranch||"main"),he(s.playbooks?.join(", ")||"playbook.yml"))}else!k&&!ts&&(ce(""),de(""),oe("manual"),me(""),xe("main"),he("playbook.yml"))},[k,i,ts]),r.useEffect(()=>{if(P&&i){const s=i.getCredentials().find(t=>t.id===P);s&&(ls(s.name),rs(s.description||""),is(s.credentialType),cs(s.username||""),ds(s.password||""),os(s.sshKey||""),ms(s.sshKeyUnlock||""),xs(s.becomeMethod||"sudo"),hs(s.becomeUsername||""),us(s.becomePassword||""),js(s.vaultPassword||""),ps(s.vaultId||""),vs(s.cloudProvider||"aws"),gs(s.scmUsername||""),fs(s.scmPassword||""),Ns(s.scmSshKey||""))}else!P&&!ns&&(ls(""),rs(""),is("machine"),cs(""),ds(""),os(""),ms(""),xs("sudo"),hs(""),us(""),js(""),ps(""),vs("aws"),gs(""),fs(""),Ns(""))},[P,i,ns]),r.useEffect(()=>{if(U&&i){const s=i.getSchedules().find(t=>t.id===U);s&&(ws(s.name),Cs(s.description||""),Ss(s.unifiedJobTemplate),Ts(s.enabled),ks(s.rrule||`DTSTART:20240101T000000Z
RRULE:FREQ=HOURLY;INTERVAL=1`),Ps(s.timezone||"UTC"),Es(s.extraData?.extraVars||""),As(s.extraData?.limit||""))}else!U&&!bs&&(ws(""),Cs(""),Ss(""),Ts(!0),ks(`DTSTART:20240101T000000Z
RRULE:FREQ=HOURLY;INTERVAL=1`),Ps("UTC"),Es(""),As(""))},[U,i,bs]);const j=Ms.length>0?Ms:y.inventories||[],b=T.length>0?T:y.jobTemplates||[],q=Vs.length>0?Vs:y.jobs||[],Pt=H?.inventoriesTotal??j.length,Ut=H?.jobTemplatesTotal??b.length,Et=H?.jobsRunning??q.filter(s=>s.status==="running"||s.status==="pending"||s.status==="waiting").length,Rt=H?.jobsSuccess??q.filter(s=>s.status==="successful").length,g=s=>{ut(Re,{data:{...V.data,config:{...y,...s}}})},At=()=>{const s=`inventory-${j.length+1}`,t={id:`inv-${Date.now()}`,name:s,type:"static",hosts:[],groups:[]};g({inventories:[...j,t]}),x({title:"Inventory created",description:`Inventory "${s}" has been created`}),wt(!1)},It=s=>{const t=j.find(a=>a.id===s);g({inventories:j.filter(a=>a.id!==s)}),x({title:"Inventory deleted",description:`Inventory "${t?.name||s}" has been removed`}),Ye(null)},Z=(s,t,a)=>{const c=j.map(d=>d.id===s?{...d,[t]:a}:d);g({inventories:c})},Lt=(s,t,a=[])=>{const c=j.find(J=>J.id===s);if(!c)return;const d={name:t,groups:a,variables:{}},n=[...c.hosts||[],d];Z(s,"hosts",n),x({title:"Host added",description:`Host "${t}" has been added to inventory`})},Jt=(s,t)=>{const a=j.find(d=>d.id===s);if(!a||!a.hosts)return;const c=a.hosts.filter((d,n)=>n!==t);Z(s,"hosts",c),x({title:"Host removed",description:"Host has been removed from inventory"})},Mt=(s,t,a=[])=>{const c=j.find(J=>J.id===s);if(!c)return;const d={name:t,hosts:a,variables:{}},n=[...c.groups||[],d];Z(s,"groups",n),x({title:"Group added",description:`Group "${t}" has been added to inventory`})},Vt=(s,t)=>{const a=j.find(d=>d.id===s);if(!a||!a.groups)return;const c=a.groups.filter((d,n)=>n!==t);Z(s,"groups",c),x({title:"Group removed",description:"Group has been removed from inventory"})},Ht=()=>{if(j.length===0){x({title:"No inventories",description:"Please create an inventory first before creating a job template",variant:"destructive"});return}const s=`template-${b.length+1}`,t={id:`template-${Date.now()}`,name:s,playbook:"playbook.yml",inventory:j[0]?.name||j[0]?.id||"",enabled:!0,become:!1,forks:5,timeout:3600};g({jobTemplates:[...b,t]}),x({title:"Template created",description:`Job template "${s}" has been created`}),Ct(!1)},Kt=s=>{const t=b.find(a=>a.id===s);g({jobTemplates:b.filter(a=>a.id!==s)}),x({title:"Template deleted",description:`Job template "${t?.name||s}" has been removed`}),es(null)},C=(s,t,a)=>{const c=b.map(d=>d.id===s?{...d,[t]:a}:d);g({jobTemplates:c})},Dt=s=>{if(i){const t=i.launchJobFromTemplate(s);x(t?{title:"Job launched",description:`Job "${t.name}" has been started`}:{title:"Failed to launch job",description:"Could not launch job from template",variant:"destructive"})}else{const t=b.find(c=>c.id===s);if(!t){x({title:"Template not found",description:"Could not find the job template",variant:"destructive"});return}const a={id:`job-${Date.now()}`,template:t.name,status:"running",startedAt:new Date().toISOString()};g({jobs:[a,...q.slice(0,9)]}),x({title:"Job launched",description:`Job "${a.template}" has been started`})}},zt=s=>{const t=y.projects||[],a={id:`project-${Date.now()}`,name:s.name,description:s.description,scmType:s.scmType,scmUrl:s.scmUrl,scmBranch:s.scmBranch||"main",playbooks:s.playbooks||["playbook.yml"]};g({projects:[...t,a]}),x({title:"Project created",description:`Project "${s.name}" has been created`}),le(!1)},Ft=(s,t)=>{const c=(y.projects||[]).map(d=>d.id===s?{...d,name:t.name,description:t.description,scmType:t.scmType,scmUrl:t.scmUrl,scmBranch:t.scmBranch||"main",playbooks:t.playbooks||["playbook.yml"]}:d);g({projects:c}),x({title:"Project updated",description:`Project "${t.name}" has been updated`}),re(null)},Gt=s=>{const t=y.projects||[],a=i?.getProjects().find(n=>n.id===s)||t.find(n=>n.id===s);if((T.length>0?T:b).some(n=>n.project===s)){x({title:"Cannot delete project",description:"Project is used in one or more job templates. Please remove or update those templates first.",variant:"destructive"}),Le(null);return}g({projects:t.filter(n=>n.id!==s)}),x({title:"Project deleted",description:`Project "${a?.name||s}" has been removed`}),Le(null)},Bt=s=>{const t=y.credentials||[],a={id:`credential-${Date.now()}`,name:s.name,description:s.description,credentialType:s.credentialType};s.credentialType==="machine"?(a.username=s.username,a.password=s.password,a.sshKey=s.sshKey,a.sshKeyUnlock=s.sshKeyUnlock,a.becomeMethod=s.becomeMethod,a.becomeUsername=s.becomeUsername,a.becomePassword=s.becomePassword):s.credentialType==="vault"?(a.vaultPassword=s.vaultPassword,a.vaultId=s.vaultId):s.credentialType==="cloud"?a.cloudProvider=s.cloudProvider:s.credentialType==="source_control"&&(a.scmUsername=s.scmUsername,a.scmPassword=s.scmPassword,a.scmSshKey=s.scmSshKey),g({credentials:[...t,a]}),x({title:"Credential created",description:`Credential "${s.name}" has been created`}),ue(!1)},$t=(s,t)=>{const c=(y.credentials||[]).map(d=>{if(d.id===s){const n={...d,name:t.name,description:t.description,credentialType:t.credentialType};return t.credentialType==="machine"?(n.username=t.username,n.password=t.password,n.sshKey=t.sshKey,n.sshKeyUnlock=t.sshKeyUnlock,n.becomeMethod=t.becomeMethod,n.becomeUsername=t.becomeUsername,n.becomePassword=t.becomePassword,delete n.vaultPassword,delete n.vaultId,delete n.cloudProvider,delete n.scmUsername,delete n.scmPassword,delete n.scmSshKey):t.credentialType==="vault"?(n.vaultPassword=t.vaultPassword,n.vaultId=t.vaultId,delete n.username,delete n.password,delete n.sshKey,delete n.sshKeyUnlock,delete n.becomeMethod,delete n.becomeUsername,delete n.becomePassword,delete n.cloudProvider,delete n.scmUsername,delete n.scmPassword,delete n.scmSshKey):t.credentialType==="cloud"?(n.cloudProvider=t.cloudProvider,delete n.username,delete n.password,delete n.sshKey,delete n.vaultPassword,delete n.vaultId,delete n.scmUsername,delete n.scmPassword,delete n.scmSshKey):t.credentialType==="source_control"&&(n.scmUsername=t.scmUsername,n.scmPassword=t.scmPassword,n.scmSshKey=t.scmSshKey,delete n.username,delete n.password,delete n.sshKey,delete n.vaultPassword,delete n.vaultId,delete n.cloudProvider),n}return d});g({credentials:c}),x({title:"Credential updated",description:`Credential "${t.name}" has been updated`}),je(null)},Ot=s=>{const t=y.credentials||[],a=i?.getCredentials().find(n=>n.id===s)||t.find(n=>n.id===s);if((T.length>0?T:b).some(n=>n.credential===s||n.vaultCredential===s)){x({title:"Cannot delete credential",description:"Credential is used in one or more job templates. Please remove or update those templates first.",variant:"destructive"}),Me(null);return}g({credentials:t.filter(n=>n.id!==s)}),x({title:"Credential deleted",description:`Credential "${a?.name||s}" has been removed`}),Me(null)},Yt=s=>{const t=y.schedules||[],a={id:`schedule-${Date.now()}`,name:s.name,description:s.description,unifiedJobTemplate:s.unifiedJobTemplate,enabled:s.enabled,rrule:s.rrule,timezone:s.timezone||"UTC",extraData:s.extraData};g({schedules:[...t,a]}),x({title:"Schedule created",description:`Schedule "${s.name}" has been created`}),ve(!1)},_t=(s,t)=>{const c=(y.schedules||[]).map(d=>d.id===s?{...d,name:t.name,description:t.description,unifiedJobTemplate:t.unifiedJobTemplate,enabled:t.enabled,rrule:t.rrule,timezone:t.timezone||"UTC",extraData:t.extraData}:d);g({schedules:c}),x({title:"Schedule updated",description:`Schedule "${t.name}" has been updated`}),ge(null)},Qt=s=>{const t=y.schedules||[],a=i?.getSchedules().find(c=>c.id===s)||t.find(c=>c.id===s);g({schedules:t.filter(c=>c.id!==s)}),x({title:"Schedule deleted",description:`Schedule "${a?.name||s}" has been removed`}),ys(null)};return e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Ansible"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Configuration Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage inventories, job templates, and automation jobs"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>{i&&(i.updateConfig(V),x({title:"Refreshed",description:"Configuration has been refreshed from emulation"}))},children:[e.jsx(la,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(E,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(p,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Inventories"}),e.jsx(Y,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:Pt}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"configured"})]})})]}),e.jsxs(p,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Job Templates"}),e.jsx(Fe,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:Ut}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"available"})]})})]}),e.jsxs(p,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Active Jobs"}),e.jsx(Ge,{className:"h-4 w-4 text-cyan-500 animate-pulse"})]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:Et}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"running"})]})})]}),e.jsxs(p,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Successful"}),e.jsx(Ee,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Rt}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"completed"})]})})]})]}),e.jsxs(ea,{defaultValue:"inventories",className:"space-y-4",children:[e.jsxs(sa,{children:[e.jsxs(F,{value:"inventories",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Inventories (",j.length,")"]}),e.jsxs(F,{value:"projects",children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"Projects (",H?.projectsTotal||0,")"]}),e.jsxs(F,{value:"credentials",children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),"Credentials (",H?.credentialsTotal||0,")"]}),e.jsxs(F,{value:"templates",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Job Templates (",b.length,")"]}),e.jsxs(F,{value:"jobs",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Jobs (",q.length,")"]}),e.jsxs(F,{value:"schedules",children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"Schedules (",H?.schedulesTotal||0,")"]}),e.jsxs(F,{value:"settings",children:[e.jsx(ta,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(G,{value:"inventories",className:"space-y-4",children:e.jsxs(p,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Inventories"}),e.jsx(B,{children:"Manage host inventories"})]}),e.jsxs(h,{onClick:At,size:"sm",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Create Inventory"]})]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:j.map(s=>e.jsxs(p,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(Y,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(N,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(m,{variant:"outline",className:"font-medium",children:s.type==="static"?"Static":"Dynamic"}),s.hosts&&e.jsxs(m,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),s.hosts.length," hosts"]}),s.groups&&e.jsxs(m,{variant:"outline",className:"bg-purple-50 dark:bg-purple-950/20 text-purple-700 dark:text-purple-300",children:[e.jsx(Is,{className:"h-3 w-3 mr-1"}),s.groups.length," groups"]})]})]})]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>Ye(s.id),disabled:j.length===1,className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(O,{className:"h-4 w-4"})})]})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Inventory Name"}),e.jsx(u,{value:s.name,onChange:t=>{const a=t.target.value.trim();a&&Z(s.id,"name",a)},placeholder:"Inventory name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Inventory Type"}),e.jsxs(R,{value:s.type,onValueChange:t=>Z(s.id,"type",t),children:[e.jsx(A,{children:e.jsx(I,{})}),e.jsxs(L,{children:[e.jsx(o,{value:"static",children:"Static"}),e.jsx(o,{value:"dynamic",children:"Dynamic"})]})]})]})]}),e.jsx(E,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-semibold",children:"Hosts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Manage inventory hosts"})]}),e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>_e(s.id),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Edit Hosts (",s.hosts?.length||0,")"]})]}),s.hosts&&s.hosts.length>0?e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.hosts.slice(0,10).map((t,a)=>e.jsxs(m,{variant:"outline",className:"text-xs",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),t.name,t.groups&&t.groups.length>0&&e.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",t.groups.join(", "),")"]})]},a)),s.hosts.length>10&&e.jsxs(m,{variant:"outline",className:"text-xs",children:["+",s.hosts.length-10," more"]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No hosts configured"})]}),e.jsx(E,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-semibold",children:"Groups"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Manage inventory groups"})]}),e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>Qe(s.id),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Edit Groups (",s.groups?.length||0,")"]})]}),s.groups&&s.groups.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:s.groups.map((t,a)=>e.jsxs(m,{variant:"outline",className:"text-xs",children:[e.jsx(Is,{className:"h-3 w-3 mr-1"}),t.name,t.hosts&&t.hosts.length>0&&e.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",t.hosts.length,")"]})]},a))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No groups configured"})]})]})]},s.id))})})]})}),e.jsx(G,{value:"projects",className:"space-y-4",children:e.jsxs(p,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Projects"}),e.jsx(B,{children:"Manage playbook projects and SCM sources"})]}),e.jsxs(h,{size:"sm",onClick:()=>le(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Create Project"]})]})}),e.jsx(v,{children:i?e.jsx("div",{className:"space-y-4",children:Be.length>0||i.getProjects().length>0?(Be.length>0?Be:i.getProjects()).map(s=>e.jsxs(p,{className:"border-l-4 border-l-green-500",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/30",children:e.jsx(ot,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(N,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(m,{variant:"outline",children:s.scmType}),s.status&&e.jsx(m,{variant:s.status==="successful"?"default":"destructive",children:s.status})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>re(s.id),children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>Le(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(O,{className:"h-4 w-4"})})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[s.description&&e.jsx("p",{className:"text-muted-foreground",children:s.description}),s.scmUrl&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"SCM URL:"})," ",s.scmUrl]}),s.scmBranch&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Branch:"})," ",s.scmBranch]}),s.playbooks&&s.playbooks.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Playbooks:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.playbooks.map((t,a)=>e.jsx(m,{variant:"outline",className:"text-xs",children:t},a))})]}),s.lastUpdateTime&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last updated: ",new Date(s.lastUpdateTime).toLocaleString()]})]})})]},s.id)):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No projects configured. Projects will be shown here when job templates are created."})}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Emulation engine not initialized. Projects will be available when simulation is running."})})]})}),e.jsx(G,{value:"credentials",className:"space-y-4",children:e.jsxs(p,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Credentials"}),e.jsx(B,{children:"Manage authentication credentials"})]}),e.jsxs(h,{size:"sm",onClick:()=>ue(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Create Credential"]})]})}),e.jsx(v,{children:i?e.jsx("div",{className:"space-y-4",children:$e.length>0||i.getCredentials().length>0?($e.length>0?$e:i.getCredentials()).map(s=>e.jsxs(p,{className:"border-l-4 border-l-orange-500",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-100 dark:bg-orange-900/30",children:e.jsx(mt,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(N,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(m,{variant:"outline",children:s.credentialType}),s.username&&e.jsxs(m,{variant:"outline",children:["User: ",s.username]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>je(s.id),children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>Me(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(O,{className:"h-4 w-4"})})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[s.description&&e.jsx("p",{className:"text-muted-foreground",children:s.description}),s.becomeMethod&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Become Method:"})," ",s.becomeMethod]}),s.becomeUsername&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Become User:"})," ",s.becomeUsername]}),s.cloudProvider&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Cloud Provider:"})," ",s.cloudProvider]}),s.vaultId&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Vault ID:"})," ",s.vaultId]})]})})]},s.id)):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No credentials configured. Credentials are used for authentication in job templates."})}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Emulation engine not initialized. Credentials will be available when simulation is running."})})]})}),e.jsx(G,{value:"templates",className:"space-y-4",children:e.jsxs(p,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Job Templates"}),e.jsx(B,{children:"Configure automation job templates"})]}),e.jsxs(h,{onClick:Ht,size:"sm",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Create Template"]})]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:b.map(s=>e.jsxs(p,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-900/30",children:e.jsx(Fe,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx(N,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(m,{variant:s.enabled?"default":"outline",className:s.enabled?"bg-green-500":"",children:s.enabled?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"h-3 w-3 mr-1"}),"Enabled"]}):"Disabled"}),e.jsxs(m,{variant:"outline",className:"font-mono text-xs",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),s.playbook]}),e.jsxs(m,{variant:"outline",className:"text-xs",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),s.inventory]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{size:"sm",variant:"default",onClick:()=>Dt(s.id),disabled:!s.enabled,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Launch"]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>es(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(O,{className:"h-4 w-4"})})]})]})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Template Name"}),e.jsx(u,{value:s.name,onChange:t=>{const a=t.target.value.trim();a&&C(s.id,"name",a)},placeholder:"Template name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Playbook"}),e.jsx(u,{value:s.playbook,onChange:t=>{const a=t.target.value.trim();a&&C(s.id,"playbook",a)},placeholder:"playbook.yml"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Inventory"}),e.jsxs(R,{value:s.inventory,onValueChange:t=>C(s.id,"inventory",t),children:[e.jsx(A,{children:e.jsx(I,{})}),e.jsx(L,{children:j.map(t=>e.jsx(o,{value:t.name,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Enabled"}),e.jsx(be,{checked:s.enabled,onCheckedChange:t=>C(s.id,"enabled",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Become (sudo)"}),e.jsx(be,{checked:s.become??!1,onCheckedChange:t=>C(s.id,"become",t)})]}),s.become&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Become User"}),e.jsx(u,{value:s.becomeUser||"root",onChange:t=>C(s.id,"becomeUser",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Forks"}),e.jsx(u,{type:"number",value:s.forks||5,onChange:t=>C(s.id,"forks",Number(t.target.value)),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Timeout (seconds)"}),e.jsx(u,{type:"number",value:s.timeout||3600,onChange:t=>C(s.id,"timeout",Number(t.target.value)),min:1})]})]}),e.jsx(E,{className:"my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-semibold",children:"Advanced Settings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Additional configuration options"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Limit (host pattern)"}),e.jsx(u,{value:s.limit||"",onChange:t=>C(s.id,"limit",t.target.value),placeholder:"all, web*, !excluded"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Limit execution to specific hosts"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Verbosity"}),e.jsxs(R,{value:String(s.verbosity||0),onValueChange:t=>C(s.id,"verbosity",Number(t)),children:[e.jsx(A,{children:e.jsx(I,{})}),e.jsxs(L,{children:[e.jsx(o,{value:"0",children:"0 - Normal"}),e.jsx(o,{value:"1",children:"1 - Verbose (-v)"}),e.jsx(o,{value:"2",children:"2 - More Verbose (-vv)"}),e.jsx(o,{value:"3",children:"3 - Debug (-vvv)"}),e.jsx(o,{value:"4",children:"4 - Connection Debug (-vvvv)"})]})]})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(l,{children:"Extra Variables (YAML)"}),e.jsx(M,{value:s.extraVars||"",onChange:t=>C(s.id,"extraVars",t.target.value),placeholder:`---
key1: value1
key2: value2`,className:"font-mono text-sm min-h-24"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Additional variables in YAML format"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Job Tags"}),e.jsx(u,{value:s.jobTags||"",onChange:t=>C(s.id,"jobTags",t.target.value),placeholder:"tag1,tag2,tag3"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated tags to run"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Skip Tags"}),e.jsx(u,{value:s.skipTags||"",onChange:t=>C(s.id,"skipTags",t.target.value),placeholder:"tag1,tag2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated tags to skip"})]})]})]})]})]},s.id))})})]})}),e.jsx(G,{value:"jobs",className:"space-y-4",children:e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(N,{children:"Job History"}),e.jsx(B,{children:"Execution history and status"})]}),e.jsx(v,{children:q.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No jobs executed"}):e.jsx("div",{className:"space-y-2",children:q.map(s=>{const t=typeof s=="object"&&"id"in s?s:null,a=t?.status||(typeof s=="object"&&"status"in s?s.status:"unknown"),c=t?.id||(typeof s=="object"&&"id"in s?s.id:`job-${Math.random()}`),d=t?.name||t?.jobTemplateName||(typeof s=="object"&&"template"in s?s.template:"Unknown Job"),n=t?.started||(typeof s=="object"&&"startedAt"in s?new Date(s.startedAt).getTime():Date.now()),J=t?.finished,ze=t?.elapsed||(typeof s=="object"&&"duration"in s?s.duration:void 0),z=t?.hosts||(typeof s=="object"&&"hosts"in s?s.hosts:[]),W=t?.resultSummary;return e.jsx(p,{className:`border-l-4 hover:shadow-md transition-all cursor-pointer ${a==="successful"?"border-l-green-500 bg-card":a==="failed"||a==="error"?"border-l-red-500 bg-card":a==="running"||a==="pending"||a==="waiting"?"border-l-blue-500 bg-card":"border-l-gray-500 bg-card"}`,onClick:()=>{if(i){St(c);const S=i.getJobLogs(c);kt(S),ss(!0)}},children:e.jsx(v,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:`p-2 rounded-lg ${a==="successful"?"bg-green-100 dark:bg-green-900/30":a==="failed"||a==="error"?"bg-red-100 dark:bg-red-900/30":a==="running"||a==="pending"||a==="waiting"?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-gray-900/30"}`,children:[a==="successful"&&e.jsx(Ee,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),(a==="failed"||a==="error")&&e.jsx(Ls,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),(a==="running"||a==="pending"||a==="waiting")&&e.jsx(Ge,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 animate-pulse"}),a==="canceled"&&e.jsx(Ls,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:a==="successful"?"default":a==="failed"||a==="error"?"destructive":a==="running"||a==="pending"||a==="waiting"?"secondary":"outline",className:"font-medium",children:a}),e.jsx("span",{className:"font-semibold text-base",children:d})]}),a==="running"&&i&&e.jsxs(h,{size:"sm",variant:"outline",onClick:S=>{S.stopPropagation(),i.cancelJob(c)&&x({title:"Job canceled",description:`Job "${d}" has been canceled`})},children:[e.jsx(aa,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}),W&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs",children:[e.jsxs(m,{variant:"outline",className:"text-green-600",children:["OK: ",W.ok]}),e.jsxs(m,{variant:"outline",className:"text-yellow-600",children:["Changed: ",W.changed]}),e.jsxs(m,{variant:"outline",className:"text-red-600",children:["Failed: ",W.failed]}),e.jsxs(m,{variant:"outline",className:"text-orange-600",children:["Unreachable: ",W.unreachable]}),e.jsxs(m,{variant:"outline",children:["Skipped: ",W.skipped]})]}),z&&z.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[z.slice(0,5).map((S,qt)=>e.jsxs(m,{variant:S.status==="ok"?"default":S.status==="failed"||S.status==="unreachable"?"destructive":"outline",className:"text-xs",children:[S.status==="ok"&&e.jsx(Ee,{className:"h-3 w-3 mr-1"}),(S.status==="failed"||S.status==="unreachable")&&e.jsx(Ls,{className:"h-3 w-3 mr-1"}),S.status==="changed"&&e.jsx(Ge,{className:"h-3 w-3 mr-1"}),S.name,": ",S.status]},qt)),z.length>5&&e.jsxs(m,{variant:"outline",className:"text-xs",children:["+",z.length-5," more"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ra,{className:"h-3 w-3"}),new Date(n).toLocaleString()]}),J&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ee,{className:"h-3 w-3"}),new Date(J).toLocaleString()]}),ze!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"h-3 w-3"}),ze.toFixed(1),"s"]})]})]})]})})},c)})})})]})}),e.jsx(G,{value:"schedules",className:"space-y-4",children:e.jsxs(p,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Schedules"}),e.jsx(B,{children:"Manage scheduled job executions"})]}),e.jsxs(h,{size:"sm",onClick:()=>ve(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Create Schedule"]})]})}),e.jsx(v,{children:i?e.jsx("div",{className:"space-y-4",children:Oe.length>0||i.getSchedules().length>0?(Oe.length>0?Oe:i.getSchedules()).map(s=>{const a=(T.length>0?T:i.getJobTemplates()).find(c=>c.id===s.unifiedJobTemplate);return e.jsxs(p,{className:"border-l-4 border-l-purple-500",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30",children:e.jsx(xt,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(N,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(m,{variant:s.enabled?"default":"outline",children:s.enabled?"Enabled":"Disabled"}),a&&e.jsx(m,{variant:"outline",children:a.name})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>ge(s.id),children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>ys(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(O,{className:"h-4 w-4"})})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[s.description&&e.jsx("p",{className:"text-muted-foreground",children:s.description}),s.rrule&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Schedule:"})," ",e.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:s.rrule})]}),s.nextRun&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Next Run:"})," ",new Date(s.nextRun).toLocaleString()]}),s.lastRun&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Last Run:"})," ",new Date(s.lastRun).toLocaleString()]}),s.lastRunStatus&&e.jsxs(m,{variant:s.lastRunStatus==="successful"?"default":"destructive",children:["Last: ",s.lastRunStatus]})]})})]},s.id)}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No schedules configured. Create schedules to automatically run job templates on a schedule."})}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Emulation engine not initialized. Schedules will be available when simulation is running."})})]})}),e.jsx(G,{value:"settings",className:"space-y-4",children:e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(N,{children:"Ansible Settings"}),e.jsx(B,{children:"Global configuration"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Default Forks"}),e.jsx(u,{type:"number",defaultValue:5,min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Default Timeout (seconds)"}),e.jsx(u,{type:"number",defaultValue:3600,min:1})]}),e.jsx(E,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Enable Host Key Checking"}),e.jsx(be,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Enable Gathering Facts"}),e.jsx(be,{defaultChecked:!0})]})]})]})})]})]}),e.jsx(X,{open:Tt,onOpenChange:ss,children:e.jsxs(ee,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(se,{children:[e.jsx(te,{children:"Job Details"}),e.jsx(ae,{children:"View job execution details and logs"})]}),Ds&&i&&(()=>{const s=i.getJob(Ds);return s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-xs text-muted-foreground",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(m,{variant:s.status==="successful"?"default":s.status==="failed"||s.status==="error"?"destructive":s.status==="running"||s.status==="pending"||s.status==="waiting"?"secondary":"outline",children:s.status})})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-xs text-muted-foreground",children:"Duration"}),e.jsxs("p",{className:"mt-1 text-sm",children:[s.elapsed?.toFixed(2),"s"]})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-xs text-muted-foreground",children:"Job Template"}),e.jsx("p",{className:"mt-1 text-sm",children:s.jobTemplateName||s.jobTemplate||"N/A"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-xs text-muted-foreground",children:"Inventory"}),e.jsx("p",{className:"mt-1 text-sm",children:s.inventoryName||s.inventory||"N/A"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-xs text-muted-foreground",children:"Started"}),e.jsx("p",{className:"mt-1 text-sm",children:s.started?new Date(s.started).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-xs text-muted-foreground",children:"Finished"}),e.jsx("p",{className:"mt-1 text-sm",children:s.finished?new Date(s.finished).toLocaleString():"Running..."})]})]}),s.resultSummary&&e.jsxs("div",{children:[e.jsx(l,{className:"text-xs text-muted-foreground mb-2 block",children:"Results Summary"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",className:"text-green-600",children:["OK: ",s.resultSummary.ok]}),e.jsxs(m,{variant:"outline",className:"text-yellow-600",children:["Changed: ",s.resultSummary.changed]}),e.jsxs(m,{variant:"outline",className:"text-red-600",children:["Failed: ",s.resultSummary.failed]}),e.jsxs(m,{variant:"outline",className:"text-orange-600",children:["Unreachable: ",s.resultSummary.unreachable]}),e.jsxs(m,{variant:"outline",children:["Skipped: ",s.resultSummary.skipped]})]})]}),s.hosts&&s.hosts.length>0&&e.jsxs("div",{children:[e.jsxs(l,{className:"text-xs text-muted-foreground mb-2 block",children:["Hosts (",s.hosts.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s.hosts.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:t.status==="ok"?"default":t.status==="failed"||t.status==="unreachable"?"destructive":"outline",className:"text-xs",children:t.status}),e.jsx("span",{className:"text-sm font-medium",children:t.name})]}),e.jsxs("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[t.changed&&e.jsx("span",{className:"text-yellow-600",children:"Changed"}),t.failed&&e.jsx("span",{className:"text-red-600",children:"Failed"}),t.unreachable&&e.jsx("span",{className:"text-orange-600",children:"Unreachable"}),t.skipped&&e.jsx("span",{className:"text-gray-600",children:"Skipped"})]})]},t.id||t.name))})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-xs text-muted-foreground mb-2 block",children:"Job Logs"}),e.jsx("div",{className:"bg-muted p-4 rounded-md font-mono text-xs max-h-96 overflow-y-auto",children:zs.length>0?zs.map((t,a)=>e.jsx("div",{className:"mb-1 whitespace-pre-wrap",children:t},a)):e.jsx("p",{className:"text-muted-foreground",children:"No logs available"})})]})]}):e.jsx("p",{className:"text-muted-foreground",children:"Job not found"})})(),e.jsx(ne,{children:e.jsx(h,{variant:"outline",onClick:()=>ss(!1),children:"Close"})})]})}),e.jsx(ye,{open:!!_,onOpenChange:s=>!s&&Ye(null),children:e.jsxs(we,{children:[e.jsxs(Ce,{children:[e.jsx(Se,{children:"Delete Inventory"}),e.jsxs(Te,{children:["Are you sure you want to delete this inventory? This action cannot be undone.",_&&j.find(s=>s.id===_)&&e.jsxs(e.Fragment,{children:[' Inventory "',j.find(s=>s.id===_)?.name,'" will be permanently removed.']})]})]}),e.jsxs(ke,{children:[e.jsx(Pe,{children:"Cancel"}),e.jsx(Ue,{onClick:()=>_&&It(_),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(ye,{open:!!Q,onOpenChange:s=>!s&&es(null),children:e.jsxs(we,{children:[e.jsxs(Ce,{children:[e.jsx(Se,{children:"Delete Job Template"}),e.jsxs(Te,{children:["Are you sure you want to delete this job template? This action cannot be undone.",Q&&b.find(s=>s.id===Q)&&e.jsxs(e.Fragment,{children:[' Template "',b.find(s=>s.id===Q)?.name,'" will be permanently removed.']})]})]}),e.jsxs(ke,{children:[e.jsx(Pe,{children:"Cancel"}),e.jsx(Ue,{onClick:()=>Q&&Kt(Q),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(ye,{open:!!ie,onOpenChange:s=>!s&&Le(null),children:e.jsxs(we,{children:[e.jsxs(Ce,{children:[e.jsx(Se,{children:"Delete Project"}),e.jsxs(Te,{children:["Are you sure you want to delete this project? This action cannot be undone.",ie&&i&&(()=>{const s=i.getProjects().find(t=>t.id===ie);return s?e.jsxs(e.Fragment,{children:[' Project "',s.name,'" will be permanently removed.']}):null})()]})]}),e.jsxs(ke,{children:[e.jsx(Pe,{children:"Cancel"}),e.jsx(Ue,{onClick:()=>ie&&Gt(ie),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),K&&(()=>{const s=j.find(t=>t.id===K);return s?e.jsx(X,{open:!!K,onOpenChange:t=>!t&&_e(null),children:e.jsxs(ee,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(se,{children:[e.jsxs(te,{children:["Edit Hosts - ",s.name]}),e.jsx(ae,{children:"Manage hosts in this inventory"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsx(l,{className:"text-sm font-semibold",children:"Add New Host"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Host Name"}),e.jsx(u,{value:Ae,onChange:t=>qe(t.target.value),placeholder:"web1.example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Groups (comma-separated)"}),e.jsx(u,{value:Hs,onChange:t=>Ze(t.target.value),placeholder:"web,production"})]})]}),e.jsxs(h,{size:"sm",onClick:()=>{if(Ae.trim()&&K){const t=Hs.split(",").map(a=>a.trim()).filter(a=>a);Lt(K,Ae.trim(),t),qe(""),Ze("")}},disabled:!Ae.trim(),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Add Host"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{className:"text-sm font-semibold",children:["Hosts (",s.hosts?.length||0,")"]}),s.hosts&&s.hosts.length>0?e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:s.hosts.map((t,a)=>e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:t.name})]}),t.groups&&t.groups.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.groups.map((c,d)=>e.jsx(m,{variant:"outline",className:"text-xs",children:c},d))})]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>K&&Jt(K,a),children:e.jsx(O,{className:"h-4 w-4"})})]})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hosts in this inventory"})]})]}),e.jsx(ne,{children:e.jsx(h,{variant:"outline",onClick:()=>{_e(null),qe(""),Ze("")},children:"Close"})})]})}):null})(),D&&(()=>{const s=j.find(t=>t.id===D);return s?e.jsx(X,{open:!!D,onOpenChange:t=>!t&&Qe(null),children:e.jsxs(ee,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(se,{children:[e.jsxs(te,{children:["Edit Groups - ",s.name]}),e.jsx(ae,{children:"Manage groups in this inventory"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsx(l,{className:"text-sm font-semibold",children:"Add New Group"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Group Name"}),e.jsx(u,{value:Ie,onChange:t=>We(t.target.value),placeholder:"web"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Hosts (comma-separated)"}),e.jsx(u,{value:Ks,onChange:t=>Xe(t.target.value),placeholder:"web1.example.com,web2.example.com"})]})]}),e.jsxs(h,{size:"sm",onClick:()=>{if(Ie.trim()&&D){const t=Ks.split(",").map(a=>a.trim()).filter(a=>a);Mt(D,Ie.trim(),t),We(""),Xe("")}},disabled:!Ie.trim(),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Add Group"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{className:"text-sm font-semibold",children:["Groups (",s.groups?.length||0,")"]}),s.groups&&s.groups.length>0?e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:s.groups.map((t,a)=>e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:t.name})]}),t.hosts&&t.hosts.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.hosts.map((c,d)=>e.jsx(m,{variant:"outline",className:"text-xs",children:c},d))})]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>D&&Vt(D,a),children:e.jsx(O,{className:"h-4 w-4"})})]})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No groups in this inventory"})]})]}),e.jsx(ne,{children:e.jsx(h,{variant:"outline",onClick:()=>{Qe(null),We(""),Xe("")},children:"Close"})})]})}):null})(),e.jsx(X,{open:ts||!!k,onOpenChange:s=>{s||(le(!1),re(null))},children:e.jsxs(ee,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(se,{children:[e.jsx(te,{children:k?"Edit Project":"Create Project"}),e.jsx(ae,{children:k?"Update project configuration":"Create a new project for playbooks"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Project Name *"}),e.jsx(u,{value:Je,onChange:s=>ce(s.target.value),placeholder:"My Project"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Description"}),e.jsx(M,{value:Fs,onChange:s=>de(s.target.value),placeholder:"Project description",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"SCM Type *"}),e.jsxs(R,{value:as,onValueChange:s=>oe(s),children:[e.jsx(A,{children:e.jsx(I,{})}),e.jsxs(L,{children:[e.jsx(o,{value:"manual",children:"Manual"}),e.jsx(o,{value:"git",children:"Git"}),e.jsx(o,{value:"svn",children:"SVN"}),e.jsx(o,{value:"insights",children:"Red Hat Insights"}),e.jsx(o,{value:"archive",children:"Archive"})]})]})]}),as!=="manual"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"SCM URL"}),e.jsx(u,{value:Gs,onChange:s=>me(s.target.value),placeholder:"https://github.com/user/repo.git"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"SCM Branch"}),e.jsx(u,{value:Bs,onChange:s=>xe(s.target.value),placeholder:"main"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Playbooks (comma-separated)"}),e.jsx(u,{value:$s,onChange:s=>he(s.target.value),placeholder:"playbook.yml,deploy.yml"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"List of playbook files in this project"})]})]}),e.jsxs(ne,{children:[e.jsx(h,{variant:"outline",onClick:()=>{le(!1),re(null),ce(""),de(""),oe("manual"),me(""),xe("main"),he("playbook.yml")},children:"Cancel"}),e.jsx(h,{onClick:()=>{if(!Je.trim()){x({title:"Validation error",description:"Project name is required",variant:"destructive"});return}const s={name:Je.trim(),description:Fs.trim()||void 0,scmType:as,scmUrl:Gs.trim()||void 0,scmBranch:Bs.trim()||"main",playbooks:$s.split(",").map(t=>t.trim()).filter(t=>t)};k?(Ft(k,s),re(null)):zt(s),le(!1),ce(""),de(""),oe("manual"),me(""),xe("main"),he("playbook.yml")},disabled:!Je.trim(),children:k?"Update":"Create"})]})]})}),e.jsx(ye,{open:!!pe,onOpenChange:s=>!s&&Me(null),children:e.jsxs(we,{children:[e.jsxs(Ce,{children:[e.jsx(Se,{children:"Delete Credential"}),e.jsxs(Te,{children:["Are you sure you want to delete this credential? This action cannot be undone.",pe&&i&&(()=>{const s=i.getCredentials().find(t=>t.id===pe);return s?e.jsxs(e.Fragment,{children:[' Credential "',s.name,'" will be permanently removed.']}):null})()]})]}),e.jsxs(ke,{children:[e.jsx(Pe,{children:"Cancel"}),e.jsx(Ue,{onClick:()=>pe&&Ot(pe),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(X,{open:ns||!!P,onOpenChange:s=>{s||(ue(!1),je(null))},children:e.jsxs(ee,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(se,{children:[e.jsx(te,{children:P?"Edit Credential":"Create Credential"}),e.jsx(ae,{children:P?"Update credential configuration":"Create a new authentication credential"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Credential Name *"}),e.jsx(u,{value:Ve,onChange:s=>ls(s.target.value),placeholder:"My Credential"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Description"}),e.jsx(M,{value:Os,onChange:s=>rs(s.target.value),placeholder:"Credential description",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Credential Type *"}),e.jsxs(R,{value:w,onValueChange:s=>is(s),children:[e.jsx(A,{children:e.jsx(I,{})}),e.jsxs(L,{children:[e.jsx(o,{value:"machine",children:"Machine"}),e.jsx(o,{value:"vault",children:"Vault"}),e.jsx(o,{value:"source_control",children:"Source Control"}),e.jsx(o,{value:"cloud",children:"Cloud"}),e.jsx(o,{value:"network",children:"Network"}),e.jsx(o,{value:"insights",children:"Red Hat Insights"})]})]})]}),e.jsx(E,{}),w==="machine"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Username"}),e.jsx(u,{value:Ys,onChange:s=>cs(s.target.value),placeholder:"root"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Password"}),e.jsx(u,{type:"password",value:_s,onChange:s=>ds(s.target.value),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"SSH Private Key"}),e.jsx(M,{value:Qs,onChange:s=>os(s.target.value),placeholder:"-----BEGIN RSA PRIVATE KEY-----",className:"font-mono text-sm min-h-24"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"SSH Key Unlock Passphrase"}),e.jsx(u,{type:"password",value:qs,onChange:s=>ms(s.target.value),placeholder:""})]}),e.jsx(E,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Privilege Escalation Method"}),e.jsxs(R,{value:Zs,onValueChange:s=>xs(s),children:[e.jsx(A,{children:e.jsx(I,{})}),e.jsxs(L,{children:[e.jsx(o,{value:"sudo",children:"sudo"}),e.jsx(o,{value:"su",children:"su"}),e.jsx(o,{value:"pbrun",children:"pbrun"}),e.jsx(o,{value:"pfexec",children:"pfexec"}),e.jsx(o,{value:"dzdo",children:"dzdo"}),e.jsx(o,{value:"pmrun",children:"pmrun"}),e.jsx(o,{value:"runas",children:"runas"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Privilege Escalation Username"}),e.jsx(u,{value:Ws,onChange:s=>hs(s.target.value),placeholder:"root"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Privilege Escalation Password"}),e.jsx(u,{type:"password",value:Xs,onChange:s=>us(s.target.value),placeholder:""})]})]}),w==="vault"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Vault Password *"}),e.jsx(u,{type:"password",value:et,onChange:s=>js(s.target.value),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Vault ID"}),e.jsx(u,{value:st,onChange:s=>ps(s.target.value),placeholder:"my_vault"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional vault identifier"})]})]}),w==="cloud"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Cloud Provider *"}),e.jsxs(R,{value:tt,onValueChange:s=>vs(s),children:[e.jsx(A,{children:e.jsx(I,{})}),e.jsxs(L,{children:[e.jsx(o,{value:"aws",children:"AWS"}),e.jsx(o,{value:"azure",children:"Azure"}),e.jsx(o,{value:"gcp",children:"Google Cloud Platform"}),e.jsx(o,{value:"openstack",children:"OpenStack"})]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Additional provider-specific configuration fields would be added here in a real implementation."})]}),w==="source_control"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Username"}),e.jsx(u,{value:at,onChange:s=>gs(s.target.value),placeholder:"git"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Password / Token"}),e.jsx(u,{type:"password",value:nt,onChange:s=>fs(s.target.value),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"SSH Private Key"}),e.jsx(M,{value:lt,onChange:s=>Ns(s.target.value),placeholder:"-----BEGIN RSA PRIVATE KEY-----",className:"font-mono text-sm min-h-24"})]})]}),(w==="network"||w==="insights")&&e.jsx("div",{className:"space-y-4",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Additional configuration fields for ",w," credentials would be added here."]})})]}),e.jsxs(ne,{children:[e.jsx(h,{variant:"outline",onClick:()=>{ue(!1),je(null)},children:"Cancel"}),e.jsx(h,{onClick:()=>{if(!Ve.trim()){x({title:"Validation error",description:"Credential name is required",variant:"destructive"});return}const s={name:Ve.trim(),description:Os.trim()||void 0,credentialType:w};w==="machine"?(s.username=Ys.trim()||void 0,s.password=_s||void 0,s.sshKey=Qs.trim()||void 0,s.sshKeyUnlock=qs||void 0,s.becomeMethod=Zs,s.becomeUsername=Ws.trim()||void 0,s.becomePassword=Xs||void 0):w==="vault"?(s.vaultPassword=et||void 0,s.vaultId=st.trim()||void 0):w==="cloud"?s.cloudProvider=tt:w==="source_control"&&(s.scmUsername=at.trim()||void 0,s.scmPassword=nt||void 0,s.scmSshKey=lt.trim()||void 0),P?($t(P,s),je(null)):Bt(s),ue(!1)},disabled:!Ve.trim(),children:P?"Update":"Create"})]})]})}),e.jsx(ye,{open:!!fe,onOpenChange:s=>!s&&ys(null),children:e.jsxs(we,{children:[e.jsxs(Ce,{children:[e.jsx(Se,{children:"Delete Schedule"}),e.jsxs(Te,{children:["Are you sure you want to delete this schedule? This action cannot be undone.",fe&&i&&(()=>{const s=i.getSchedules().find(t=>t.id===fe);return s?e.jsxs(e.Fragment,{children:[' Schedule "',s.name,'" will be permanently removed.']}):null})()]})]}),e.jsxs(ke,{children:[e.jsx(Pe,{children:"Cancel"}),e.jsx(Ue,{onClick:()=>fe&&Qt(fe),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(X,{open:bs||!!U,onOpenChange:s=>{s||(ve(!1),ge(null))},children:e.jsxs(ee,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(se,{children:[e.jsx(te,{children:U?"Edit Schedule":"Create Schedule"}),e.jsx(ae,{children:U?"Update schedule configuration":"Create a new schedule to automatically run job templates"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Schedule Name *"}),e.jsx(u,{value:He,onChange:s=>ws(s.target.value),placeholder:"Daily Backup Schedule"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Description"}),e.jsx(M,{value:rt,onChange:s=>Cs(s.target.value),placeholder:"Schedule description",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Job Template *"}),e.jsxs(R,{value:Ke,onValueChange:Ss,children:[e.jsx(A,{children:e.jsx(I,{placeholder:"Select a job template"})}),e.jsx(L,{children:(T.length>0?T:b).map(s=>e.jsx(o,{value:s.id,children:s.name},s.id))})]}),b.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"No job templates available. Create a job template first."})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{children:"Enabled"}),e.jsx(be,{checked:it,onCheckedChange:Ts})]}),e.jsx(E,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Schedule (RRULE / Cron Expression) *"}),e.jsx(M,{value:De,onChange:s=>ks(s.target.value),placeholder:`DTSTART:20240101T000000Z
RRULE:FREQ=HOURLY;INTERVAL=1`,className:"font-mono text-sm min-h-32"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Use iCal RRULE format. Examples:",e.jsx("br",{})," Hourly: DTSTART:20240101T000000Z\\nRRULE:FREQ=HOURLY;INTERVAL=1",e.jsx("br",{})," Daily at 2 AM: DTSTART:20240101T020000Z\\nRRULE:FREQ=DAILY",e.jsx("br",{})," Weekly on Monday: DTSTART:20240101T000000Z\\nRRULE:FREQ=WEEKLY;BYDAY=MO"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Timezone"}),e.jsxs(R,{value:ct,onValueChange:Ps,children:[e.jsx(A,{children:e.jsx(I,{})}),e.jsxs(L,{children:[e.jsx(o,{value:"UTC",children:"UTC"}),e.jsx(o,{value:"America/New_York",children:"America/New_York (EST/EDT)"}),e.jsx(o,{value:"America/Chicago",children:"America/Chicago (CST/CDT)"}),e.jsx(o,{value:"America/Denver",children:"America/Denver (MST/MDT)"}),e.jsx(o,{value:"America/Los_Angeles",children:"America/Los_Angeles (PST/PDT)"}),e.jsx(o,{value:"Europe/London",children:"Europe/London (GMT/BST)"}),e.jsx(o,{value:"Europe/Paris",children:"Europe/Paris (CET/CEST)"}),e.jsx(o,{value:"Asia/Tokyo",children:"Asia/Tokyo (JST)"})]})]})]}),e.jsx(E,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-semibold",children:"Additional Job Parameters"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Optional parameters to pass when the scheduled job runs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Limit (host pattern)"}),e.jsx(u,{value:Rs,onChange:s=>As(s.target.value),placeholder:"all, web*, !excluded"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Limit execution to specific hosts"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Extra Variables (YAML)"}),e.jsx(M,{value:Us,onChange:s=>Es(s.target.value),placeholder:`---
key1: value1
key2: value2`,className:"font-mono text-sm min-h-24"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Additional variables in YAML format"})]})]})]}),e.jsxs(ne,{children:[e.jsx(h,{variant:"outline",onClick:()=>{ve(!1),ge(null)},children:"Cancel"}),e.jsx(h,{onClick:()=>{if(!He.trim()){x({title:"Validation error",description:"Schedule name is required",variant:"destructive"});return}if(!Ke){x({title:"Validation error",description:"Job template is required",variant:"destructive"});return}if(!De.trim()){x({title:"Validation error",description:"Schedule rule (RRULE) is required",variant:"destructive"});return}const s={};Rs.trim()&&(s.limit=Rs.trim()),Us.trim()&&(s.extraVars=Us.trim());const t={name:He.trim(),description:rt.trim()||void 0,unifiedJobTemplate:Ke,enabled:it,rrule:De.trim(),timezone:ct,extraData:Object.keys(s).length>0?s:void 0};U?(_t(U,t),ge(null)):Yt(t),ve(!1)},disabled:!He.trim()||!Ke||!De.trim(),children:U?"Update":"Create"})]})]})})]})}export{Sa as AnsibleConfigAdvanced};

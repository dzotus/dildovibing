import{K as Be,u as Ee,a as qe,j as e,e as Ue,r as c,S as ee,C as J,h as xe,i as je,A as Fe,m as Q,T as Ye,b as He,c as ve,ak as We,a4 as Ge,F as ze,D as Je,f as ge,k as fe,l as j,P as Ne,I as W,q as ae,s as le,t as te,v as ne,w as b,B as F,a6 as Oe,ai as Te,o as ye,y as ce,z as re,E as de,G as oe,H as he,L as A,J as me,O as we,Q as Pe,V as De,W as Me,X as ke,Y as Re,_ as Ae,$ as Le,ag as Qe,aK as Xe,ae as Ze,x as _e,U as es,a7 as ss,aL as as}from"./index-Cd-JdYDo.js";import{T as Se}from"./textarea-C1mJ7m6P.js";import{d as ie,a as C,s as q,c as Ve}from"./toast-46NEDLjC.js";import{P as be}from"./progress-B0o_m3JO.js";import{S as ls}from"./shield-CAEKtRsh.js";import{S as ts}from"./server-CcDBNlmT.js";import{H as ns}from"./hard-drive-C52aq7iY.js";const is=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],cs=Be("box",is);function Ie(h){return/^[a-z0-9]([-a-z0-9]*[a-z0-9])?$/.test(h)}function Ke(h,D){return D.filter(r=>r.namespace!==h.namespace?!1:h.selector?Object.entries(h.selector).every(([d,o])=>r.labels?.[d]===o):!1)}function $e(h,D){return h.selector?D.filter(r=>r.namespace!==h.namespace||r.phase!=="Running"||!r.podIP?!1:Object.entries(h.selector).every(([d,o])=>r.labels?.[d]===o)):[]}function rs(h,D,r,d){return{pods:D.filter(o=>o.namespace===h).length,deployments:r.filter(o=>o.namespace===h).length,services:d.filter(o=>o.namespace===h).length}}function Ps({componentId:h}){const{nodes:D,updateNode:r}=Ee(),d=qe(L=>L.componentMetrics.get(h)),o=D.find(L=>L.id===h);if(!o)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const v=o.data.config||{},m=Ue.getKubernetesEmulationEngine(h);c.useEffect(()=>{o&&!m&&Ue.initialize([o],[])},[o,m]),c.useEffect(()=>{if(!m)return;const L=setInterval(()=>{const T=m.getConfig();if(T){const I=v.pods||[],K=v.deployments||[],H=T.pods||[],E=T.deployments||[],X=I.length!==H.length||I.some((R,$)=>{const _=H[$];return!_||R.id!==_.id||R.phase!==_.phase||R.status!==_.status||R.totalCpuUsage!==_.totalCpuUsage||R.totalMemoryUsage!==_.totalMemoryUsage}),Z=K.length!==E.length||K.some((R,$)=>{const _=E[$];return!_||R.id!==_.id||R.readyReplicas!==_.readyReplicas||R.availableReplicas!==_.availableReplicas});(X||Z)&&r(h,{data:{...o.data,config:{...v,pods:H.map(R=>{const $=I.find(_=>_.id===R.id);return $?{...$,...R}:R}),deployments:E.map(R=>{const $=K.find(_=>_.id===R.id);return $?{...$,...R}:R}),services:T.services||v.services,configMaps:T.configMaps||v.configMaps,secrets:T.secrets||v.secrets,namespaces:T.namespaces||v.namespaces,nodes:T.nodes||v.nodes,events:T.events||v.events,persistentVolumeClaims:T.persistentVolumeClaims||v.persistentVolumeClaims}}})}},1e3);return()=>clearInterval(L)},[m,h,o,v,r]);const w=c.useCallback(L=>{const T={...v,...L};if(r(h,{data:{...o.data,config:T}}),m){const I={...o,data:{...o.data,config:T}};m.updateConfig(I),(L.pods||L.deployments||L.services)&&m.initializeConfig(I)}else Ue.initialize([{...o,data:{...o.data,config:T}}],[])},[h,o,v,m,r]),M=m?m.getPods():v.pods||[],l=m?m.getDeployments():v.deployments||[],N=m?m.getServices():v.services||[],u=m?m.getConfigMaps():v.configMaps||[],V=m?m.getSecrets():v.secrets||[],z=m?m.getNamespaces():v.namespaces||[],se=m?m.getNodes():v.nodes||[],k=m?m.getEvents():v.events||[],y=m?m.getPersistentVolumeClaims():v.persistentVolumeClaims||[],f=m?m.getMetrics():null,G=m?m.getLoad():null,S=d,g=S?.customMetrics||{},O=f||(S?{podsTotal:g.k8s_pods_total||0,podsRunning:g.k8s_pods_running||0,podsPending:g.k8s_pods_pending||0,podsFailed:g.k8s_pods_failed||0,podsSucceeded:g.k8s_pods_succeeded||0,deploymentsTotal:g.k8s_deployments_total||0,deploymentsReady:g.k8s_deployments_ready||0,deploymentsNotReady:g.k8s_deployments_not_ready||0,servicesTotal:g.k8s_services_total||0,servicesClusterIP:g.k8s_services_clusterip||0,servicesNodePort:g.k8s_services_nodeport||0,servicesLoadBalancer:g.k8s_services_loadbalancer||0,nodesTotal:g.k8s_nodes_total||0,nodesReady:g.k8s_nodes_ready||0,nodesNotReady:g.k8s_nodes_not_ready||0,namespacesTotal:g.k8s_namespaces_total||0,configMapsTotal:0,secretsTotal:0,totalCpuRequests:0,totalCpuLimits:0,totalMemoryRequests:0,totalMemoryLimits:0,totalCpuUsage:0,totalMemoryUsage:0,totalMemoryCapacity:0}:null),Y=G||(S?{throughput:S.throughput||0,averageLatency:S.latency||0,errorRate:S.errorRate||0,cpuUtilization:g.k8s_cpu_utilization||S.utilization||0,memoryUtilization:g.k8s_memory_utilization||S.utilization||0,podUtilization:g.k8s_pod_utilization||0,networkUtilization:g.k8s_network_utilization||0,diskUtilization:g.k8s_disk_utilization||0}:null);return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Kubernetes Configuration"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage Kubernetes cluster resources: Pods, Deployments, Services, and more"})]}),e.jsx(ee,{}),O&&e.jsxs(J,{children:[e.jsx(xe,{children:e.jsxs(je,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),"Cluster Overview"]})}),e.jsxs(Q,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pods"}),e.jsxs("div",{className:"text-2xl font-bold",children:[O.podsRunning,"/",O.podsTotal]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[O.podsPending," pending, ",O.podsFailed," failed"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Deployments"}),e.jsxs("div",{className:"text-2xl font-bold",children:[O.deploymentsReady,"/",O.deploymentsTotal]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[O.deploymentsNotReady," not ready"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Services"}),e.jsx("div",{className:"text-2xl font-bold",children:O.servicesTotal}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[O.servicesClusterIP," ClusterIP, ",O.servicesNodePort," NodePort"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Nodes"}),e.jsxs("div",{className:"text-2xl font-bold",children:[O.nodesReady,"/",O.nodesTotal]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[O.nodesNotReady," not ready"]})]})]}),Y&&e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"CPU Utilization"}),e.jsxs("div",{className:"text-lg font-semibold",children:[(Y.cpuUtilization*100).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Memory Utilization"}),e.jsxs("div",{className:"text-lg font-semibold",children:[(Y.memoryUtilization*100).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Throughput"}),e.jsxs("div",{className:"text-lg font-semibold",children:[Y.throughput.toFixed(1)," ops/s"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Error Rate"}),e.jsxs("div",{className:"text-lg font-semibold",children:[(Y.errorRate*100).toFixed(2),"%"]})]})]})]})]}),e.jsxs(Ye,{defaultValue:"pods",className:"w-full",children:[e.jsxs(He,{className:"flex flex-wrap w-full h-auto p-1 gap-1",children:[e.jsxs(ve,{value:"pods",className:"flex-shrink-0 whitespace-nowrap",children:[e.jsx(cs,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Pods"})]}),e.jsxs(ve,{value:"deployments",className:"flex-shrink-0 whitespace-nowrap",children:[e.jsx(We,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Deployments"})]}),e.jsxs(ve,{value:"services",className:"flex-shrink-0 whitespace-nowrap",children:[e.jsx(Ge,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Services"})]}),e.jsxs(ve,{value:"configmaps",className:"flex-shrink-0 whitespace-nowrap",children:[e.jsx(ze,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline md:hidden",children:"CM"}),e.jsx("span",{className:"hidden md:inline",children:"ConfigMaps"})]}),e.jsxs(ve,{value:"secrets",className:"flex-shrink-0 whitespace-nowrap",children:[e.jsx(ls,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Secrets"})]}),e.jsxs(ve,{value:"namespaces",className:"flex-shrink-0 whitespace-nowrap",children:[e.jsx(Je,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline md:hidden",children:"NS"}),e.jsx("span",{className:"hidden md:inline",children:"Namespaces"})]}),e.jsxs(ve,{value:"nodes",className:"flex-shrink-0 whitespace-nowrap",children:[e.jsx(ts,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Nodes"})]}),e.jsxs(ve,{value:"events",className:"flex-shrink-0 whitespace-nowrap",children:[e.jsx(Fe,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Events"})]}),e.jsxs(ve,{value:"pvcs",className:"flex-shrink-0 whitespace-nowrap",children:[e.jsx(ns,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"PVCs"})]}),e.jsxs(ve,{value:"yaml",className:"flex-shrink-0 whitespace-nowrap",children:[e.jsx(ze,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"YAML"})]})]}),e.jsx(ge,{value:"pods",className:"space-y-4",children:e.jsx(ds,{pods:M,namespaces:z,updateConfig:w,kubernetesEngine:m,node:o})}),e.jsx(ge,{value:"deployments",className:"space-y-4",children:e.jsx(os,{deployments:l,namespaces:z,updateConfig:w,kubernetesEngine:m,node:o})}),e.jsx(ge,{value:"services",className:"space-y-4",children:e.jsx(ms,{services:N,namespaces:z,pods:M,updateConfig:w,kubernetesEngine:m,node:o})}),e.jsx(ge,{value:"configmaps",className:"space-y-4",children:e.jsx(hs,{configMaps:u,namespaces:z,updateConfig:w,kubernetesEngine:m,node:o})}),e.jsx(ge,{value:"secrets",className:"space-y-4",children:e.jsx(xs,{secrets:V,namespaces:z,updateConfig:w,kubernetesEngine:m,node:o})}),e.jsx(ge,{value:"namespaces",className:"space-y-4",children:e.jsx(js,{namespaces:z,updateConfig:w,kubernetesEngine:m,node:o})}),e.jsx(ge,{value:"nodes",className:"space-y-4",children:e.jsx(us,{nodes:se,updateConfig:w,kubernetesEngine:m,node:o})}),e.jsx(ge,{value:"events",className:"space-y-4",children:e.jsx(ps,{events:k})}),e.jsx(ge,{value:"pvcs",className:"space-y-4",children:e.jsx(vs,{pvcs:y,namespaces:z,updateConfig:w,kubernetesEngine:m,node:o})}),e.jsx(ge,{value:"yaml",className:"space-y-4",children:e.jsx(gs,{yaml:v.yaml||"",yamlManifests:v.yamlManifests||[],updateConfig:w})})]})]})})}function ds({pods:h,namespaces:D,updateConfig:r,kubernetesEngine:d,node:o}){const[v,m]=c.useState(!1),[w,M]=c.useState(null),[l,N]=c.useState(null),[u,V]=c.useState(null),[z,se]=c.useState(""),[k,y]=c.useState("all"),[f,G]=c.useState("all"),[S,g]=c.useState(""),[O,Y]=c.useState("default"),[L,T]=c.useState("nginx:latest"),[I,K]=c.useState("Pending"),[H,E]=c.useState({}),[X,Z]=c.useState({});o.data.config;const R=h.filter(s=>{const i=s.name.toLowerCase().includes(z.toLowerCase()),t=k==="all"||s.namespace===k,p=f==="all"||s.phase===f||s.status===f;return i&&t&&p}),$=()=>{if(!S.trim()||!L.trim()){ie("Please fill in pod name and image");return}if(!Ie(S.toLowerCase())){ie("Pod name must be a valid DNS label (lowercase alphanumeric and hyphens)");return}if(d)try{const s=d.createPod({name:S,namespace:O,phase:I,status:I,labels:{app:S}}),i=d.getConfig();i&&r({pods:i.pods}),C("Pod created successfully"),m(!1),n()}catch(s){q(s.message||"Failed to create pod")}else{const s={id:`pod-${Date.now()}`,name:S,namespace:O,phase:I,status:I,createdAt:Date.now(),labels:{app:S}};r({pods:[...h,s]}),C("Pod created successfully"),m(!1),n()}},_=s=>{M(s),E(s.labels||{}),Z(s.annotations||{})},ue=()=>{if(w)if(d)try{d.updatePod(w.id,{labels:H,annotations:X});const s=d.getConfig();s&&r({pods:s.pods}),C("Pod updated successfully"),M(null),E({}),Z({})}catch(s){q(s.message||"Failed to update pod")}else{const s=h.map(i=>i.id===w.id?{...i,labels:H,annotations:X}:i);r({pods:s}),C("Pod updated successfully"),M(null),E({}),Z({})}},pe=s=>{if(d)try{d.deletePod(s);const i=d.getConfig();i&&r({pods:i.pods}),C("Pod deleted successfully"),V(null)}catch(i){q(i.message||"Failed to delete pod")}else r({pods:h.filter(i=>i.id!==s)}),C("Pod deleted successfully"),V(null)},n=()=>{g(""),Y("default"),T("nginx:latest"),K("Pending")},P=(s,i)=>{const t={Running:{variant:"default",label:"Running"},Pending:{variant:"secondary",label:"Pending"},Succeeded:{variant:"default",label:"Succeeded"},Failed:{variant:"destructive",label:"Failed"},Unknown:{variant:"outline",label:"Unknown"},CrashLoopBackOff:{variant:"destructive",label:"CrashLoopBackOff"},ImagePullBackOff:{variant:"destructive",label:"ImagePullBackOff"},ErrImagePull:{variant:"destructive",label:"ErrImagePull"}},p=t[i]||t[s]||{variant:"outline",label:i||s};return e.jsx(F,{variant:p.variant,children:p.label})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(J,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Pods"}),e.jsx(fe,{children:"Manage Kubernetes pods"})]}),e.jsxs(j,{onClick:()=>m(!0),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Create Pod"]})]})}),e.jsxs(Q,{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx(W,{placeholder:"Search pods...",value:z,onChange:s=>se(s.target.value),className:"flex-1"}),e.jsxs(ae,{value:k,onValueChange:y,children:[e.jsx(le,{className:"w-[200px]",children:e.jsx(te,{placeholder:"All namespaces"})}),e.jsxs(ne,{children:[e.jsx(b,{value:"all",children:"All namespaces"}),D.map(s=>e.jsx(b,{value:s.name,children:s.name},s.id))]})]}),e.jsxs(ae,{value:f,onValueChange:G,children:[e.jsx(le,{className:"w-[180px]",children:e.jsx(te,{placeholder:"All statuses"})}),e.jsxs(ne,{children:[e.jsx(b,{value:"all",children:"All statuses"}),e.jsx(b,{value:"Running",children:"Running"}),e.jsx(b,{value:"Pending",children:"Pending"}),e.jsx(b,{value:"Failed",children:"Failed"}),e.jsx(b,{value:"Succeeded",children:"Succeeded"})]})]})]}),e.jsx("div",{className:"space-y-2",children:R.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No pods found"}):R.map(s=>e.jsx(J,{children:e.jsx(Q,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:s.name}),P(s.phase,s.status),e.jsx(F,{variant:"outline",children:s.namespace})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.podIP&&e.jsxs("div",{children:["IP: ",s.podIP]}),s.nodeName&&e.jsxs("div",{children:["Node: ",s.nodeName]}),s.totalCpuUsage!==void 0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"CPU"}),e.jsxs("span",{children:[s.totalCpuUsage.toFixed(1),"%"]})]}),e.jsx(be,{value:s.totalCpuUsage,className:"h-2"})]}),s.totalMemoryUsage&&s.totalMemoryLimit&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"Memory"}),e.jsxs("span",{children:[(s.totalMemoryUsage/s.totalMemoryLimit*100).toFixed(1),"%"]})]}),e.jsx(be,{value:s.totalMemoryUsage/s.totalMemoryLimit*100,className:"h-2"}),e.jsxs("div",{className:"text-xs mt-1",children:[(s.totalMemoryUsage/1024/1024).toFixed(0)," / ",(s.totalMemoryLimit/1024/1024).toFixed(0)," MiB"]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>N(s),title:"View Details",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>_(s),title:"Edit",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>V(s.id),title:"Delete",children:e.jsx(ye,{className:"h-4 w-4"})})]})]})})},s.id))})]})]}),e.jsx(ce,{open:v,onOpenChange:m,children:e.jsxs(re,{children:[e.jsxs(de,{children:[e.jsx(oe,{children:"Create Pod"}),e.jsx(he,{children:"Create a new Kubernetes pod"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Name"}),e.jsx(W,{value:S,onChange:s=>g(s.target.value),placeholder:"my-pod"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Namespace"}),e.jsxs(ae,{value:O,onValueChange:Y,children:[e.jsx(le,{children:e.jsx(te,{})}),e.jsx(ne,{children:D.map(s=>e.jsx(b,{value:s.name,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Image"}),e.jsx(W,{value:L,onChange:s=>T(s.target.value),placeholder:"nginx:latest"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Initial Phase"}),e.jsxs(ae,{value:I,onValueChange:s=>K(s),children:[e.jsx(le,{children:e.jsx(te,{})}),e.jsxs(ne,{children:[e.jsx(b,{value:"Pending",children:"Pending"}),e.jsx(b,{value:"Running",children:"Running"}),e.jsx(b,{value:"Succeeded",children:"Succeeded"}),e.jsx(b,{value:"Failed",children:"Failed"})]})]})]})]}),e.jsxs(me,{children:[e.jsx(j,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(j,{onClick:$,children:"Create"})]})]})}),e.jsx(ce,{open:w!==null,onOpenChange:s=>!s&&M(null),children:e.jsxs(re,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(de,{children:[e.jsxs(oe,{children:["Edit Pod: ",w?.name]}),e.jsx(he,{children:"Edit labels and annotations"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Labels (key=value, one per line)"}),e.jsx(Se,{value:Object.entries(H).map(([s,i])=>`${s}=${i}`).join(`
`),onChange:s=>{const i={};s.target.value.split(`
`).forEach(t=>{const[p,...U]=t.split("=");p.trim()&&(i[p.trim()]=U.join("=").trim())}),E(i)},rows:5,placeholder:`app=myapp
version=v1`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Annotations (key=value, one per line)"}),e.jsx(Se,{value:Object.entries(X).map(([s,i])=>`${s}=${i}`).join(`
`),onChange:s=>{const i={};s.target.value.split(`
`).forEach(t=>{const[p,...U]=t.split("=");p.trim()&&(i[p.trim()]=U.join("=").trim())}),Z(i)},rows:5,placeholder:`description=My pod
owner=team-a`})]})]}),e.jsxs(me,{children:[e.jsx(j,{variant:"outline",onClick:()=>M(null),children:"Cancel"}),e.jsx(j,{onClick:ue,children:"Save"})]})]})}),e.jsx(ce,{open:l!==null,onOpenChange:s=>!s&&N(null),children:e.jsxs(re,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(de,{children:[e.jsxs(oe,{children:["Pod Details: ",l?.name]}),e.jsx(he,{children:"Complete information about the pod"})]}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Metadata"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",l.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Namespace:"})," ",l.namespace]}),l.uid&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"UID:"})," ",l.uid]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",new Date(l.createdAt).toLocaleString()]}),l.startedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Started:"})," ",new Date(l.startedAt).toLocaleString()]})]})]}),e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Status"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Phase:"})," ",P(l.phase,l.status)]}),l.podIP&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Pod IP:"})," ",l.podIP]}),l.hostIP&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Host IP:"})," ",l.hostIP]}),l.nodeName&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Node:"})," ",l.nodeName]}),l.restartCount!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Restarts:"})," ",l.restartCount]})]})]}),l.totalCpuUsage!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Resources"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"CPU Usage"}),e.jsxs("span",{children:[l.totalCpuUsage.toFixed(1),"%"]})]}),e.jsx(be,{value:l.totalCpuUsage,className:"h-2"})]}),l.totalMemoryUsage&&l.totalMemoryLimit&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Memory Usage"}),e.jsxs("span",{children:[(l.totalMemoryUsage/l.totalMemoryLimit*100).toFixed(1),"%"]})]}),e.jsx(be,{value:l.totalMemoryUsage/l.totalMemoryLimit*100,className:"h-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[(l.totalMemoryUsage/1024/1024).toFixed(0)," / ",(l.totalMemoryLimit/1024/1024).toFixed(0)," MiB"]})]})]})]})]}),l.labels&&Object.keys(l.labels).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Labels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(l.labels).map(([s,i])=>e.jsxs(F,{variant:"outline",children:[s,"=",i]},s))})]})]}),l.annotations&&Object.keys(l.annotations).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Annotations"}),e.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(l.annotations).map(([s,i])=>e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[s,":"]})," ",i]},s))})]})]}),l.conditions&&l.conditions.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Conditions"}),e.jsx("div",{className:"space-y-1 text-sm",children:l.conditions.map((s,i)=>e.jsxs("div",{children:[e.jsxs(F,{variant:s.status==="True"?"default":"secondary",className:"mr-2",children:[s.type,": ",s.status]}),s.reason&&e.jsxs("span",{className:"text-muted-foreground",children:["(",s.reason,")"]})]},i))})]})]})]}),e.jsx(me,{children:e.jsx(j,{onClick:()=>N(null),children:"Close"})})]})}),e.jsx(we,{open:u!==null,onOpenChange:s=>!s&&V(null),children:e.jsxs(Pe,{children:[e.jsxs(De,{children:[e.jsx(Me,{children:"Delete Pod"}),e.jsx(ke,{children:"Are you sure you want to delete this pod? This action cannot be undone."})]}),e.jsxs(Re,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Le,{onClick:()=>u&&pe(u),className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})})]})}function os({deployments:h,namespaces:D,updateConfig:r,kubernetesEngine:d,node:o}){const m=(o.data.config||{}).pods||(d?d.getPods():[]),[w,M]=c.useState(!1),[l,N]=c.useState(null),[u,V]=c.useState(null),[z,se]=c.useState(null),[k,y]=c.useState(""),[f,G]=c.useState("all"),[S,g]=c.useState(""),[O,Y]=c.useState("default"),[L,T]=c.useState(1),[I,K]=c.useState("nginx:latest"),[H,E]=c.useState("RollingUpdate"),[X,Z]=c.useState(1),[R,$]=c.useState(""),[_,ue]=c.useState("RollingUpdate"),pe=h.filter(a=>{const x=a.name.toLowerCase().includes(k.toLowerCase()),B=f==="all"||a.namespace===f;return x&&B}),n=()=>{if(!S.trim()||!I.trim()){ie("Please fill in deployment name and image");return}if(!Ie(S.toLowerCase())){ie("Deployment name must be a valid DNS label (lowercase alphanumeric and hyphens)");return}if(L<0){ie("Replicas must be >= 0");return}if(d)try{const a=d.createDeployment({name:S,namespace:O,replicas:L,strategy:H,selector:{app:S},template:{labels:{app:S},containers:[{name:S,image:I,ports:[{containerPort:80}]}]}}),x=d.getConfig();x&&r({deployments:x.deployments}),C("Deployment created successfully"),M(!1),U()}catch(a){q(a.message||"Failed to create deployment")}else{const a={id:`deployment-${Date.now()}`,name:S,namespace:O,replicas:L,readyReplicas:0,availableReplicas:0,unavailableReplicas:L,updatedReplicas:0,strategy:H,selector:{app:S},template:{labels:{app:S},containers:[{name:S,image:I,ports:[{containerPort:80}]}]},createdAt:Date.now(),paused:!1};r({deployments:[...h,a]}),C("Deployment created successfully"),M(!1),U()}},P=a=>{N(a),Z(a.replicas),$(a.template?.containers?.[0]?.image||""),ue(a.strategy)},s=()=>{if(l){if(X<0){ie("Replicas must be >= 0");return}if(d)try{d.updateDeployment(l.id,{replicas:X,strategy:_,template:{...l.template,containers:l.template?.containers?.map((x,B)=>B===0?{...x,image:R}:x)||[{name:l.name,image:R,ports:[{containerPort:80}]}]}});const a=d.getConfig();a&&r({deployments:a.deployments}),C("Deployment updated successfully"),N(null)}catch(a){q(a.message||"Failed to update deployment")}else{const a=h.map(x=>x.id===l.id?{...x,replicas:X,strategy:_,template:{...x.template,containers:x.template?.containers?.map((B,Ce)=>Ce===0?{...B,image:R}:B)||[{name:x.name,image:R,ports:[{containerPort:80}]}]}}:x);r({deployments:a}),C("Deployment updated successfully"),N(null)}}},i=a=>{if(d)try{d.updateDeployment(a.id,{paused:!a.paused});const x=d.getConfig();x&&r({deployments:x.deployments}),C(`Deployment ${a.paused?"resumed":"paused"} successfully`)}catch(x){q(x.message||"Failed to update deployment")}else{const x=h.map(B=>B.id===a.id?{...B,paused:!B.paused}:B);r({deployments:x}),C(`Deployment ${a.paused?"resumed":"paused"} successfully`)}},t=a=>{const x=`${a.name}-copy-${Date.now()}`;if(d)try{d.createDeployment({name:x,namespace:a.namespace,replicas:a.replicas,strategy:a.strategy,selector:{...a.selector,app:x},template:{...a.template,labels:{...a.template?.labels,app:x},containers:a.template?.containers?.map(Ce=>({...Ce,name:x}))||[]}});const B=d.getConfig();B&&r({deployments:B.deployments}),C("Deployment duplicated successfully")}catch(B){q(B.message||"Failed to duplicate deployment")}else{const B={...a,id:`deployment-${Date.now()}`,name:x,createdAt:Date.now(),readyReplicas:0,availableReplicas:0,unavailableReplicas:a.replicas,updatedReplicas:0,selector:{...a.selector,app:x},template:{...a.template,labels:{...a.template?.labels,app:x},containers:a.template?.containers?.map(Ce=>({...Ce,name:x}))||[]}};r({deployments:[...h,B]}),C("Deployment duplicated successfully")}},p=a=>{if(d)try{d.deleteDeployment(a);const x=d.getConfig();x&&r({deployments:x.deployments}),C("Deployment deleted successfully"),se(null)}catch(x){q(x.message||"Failed to delete deployment")}else r({deployments:h.filter(x=>x.id!==a)}),C("Deployment deleted successfully"),se(null)},U=()=>{g(""),Y("default"),T(1),K("nginx:latest"),E("RollingUpdate")};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(J,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Deployments"}),e.jsx(fe,{children:"Manage Kubernetes deployments"})]}),e.jsxs(j,{onClick:()=>M(!0),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Create Deployment"]})]})}),e.jsxs(Q,{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx(W,{placeholder:"Search deployments...",value:k,onChange:a=>y(a.target.value),className:"flex-1"}),e.jsxs(ae,{value:f,onValueChange:G,children:[e.jsx(le,{className:"w-[200px]",children:e.jsx(te,{placeholder:"All namespaces"})}),e.jsxs(ne,{children:[e.jsx(b,{value:"all",children:"All namespaces"}),D.map(a=>e.jsx(b,{value:a.name,children:a.name},a.id))]})]})]}),e.jsx("div",{className:"space-y-2",children:pe.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No deployments found"}):pe.map(a=>e.jsx(J,{children:e.jsx(Q,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:a.name}),e.jsxs(F,{variant:a.readyReplicas===a.replicas?"default":"secondary",children:[a.readyReplicas,"/",a.replicas]}),e.jsx(F,{variant:"outline",children:a.namespace})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsxs("div",{children:["Strategy: ",a.strategy]}),e.jsxs("div",{children:["Available: ",a.availableReplicas,", Unavailable: ",a.unavailableReplicas]}),a.paused&&e.jsx(F,{variant:"secondary",children:"Paused"}),a.replicas>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"Replicas Progress"}),e.jsxs("span",{children:[a.readyReplicas,"/",a.replicas]})]}),e.jsx(be,{value:a.readyReplicas/a.replicas*100,className:"h-2"})]}),(()=>{const x=Ke(a,m),B=x.filter(Ce=>Ce.phase==="Running").length;return x.length>0&&e.jsxs("div",{className:"text-xs",children:["Related Pods: ",B," running / ",x.length," total"]})})()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>V(a),title:"View Details",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>P(a),title:"Edit",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>i(a),title:a.paused?"Resume":"Pause",children:a.paused?e.jsx(Qe,{className:"h-4 w-4"}):e.jsx(Xe,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>t(a),title:"Duplicate",children:e.jsx(Ze,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>se(a.id),title:"Delete",children:e.jsx(ye,{className:"h-4 w-4"})})]})]})})},a.id))})]})]}),e.jsx(ce,{open:w,onOpenChange:M,children:e.jsxs(re,{children:[e.jsxs(de,{children:[e.jsx(oe,{children:"Create Deployment"}),e.jsx(he,{children:"Create a new Kubernetes deployment"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Name"}),e.jsx(W,{value:S,onChange:a=>g(a.target.value),placeholder:"my-deployment"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Namespace"}),e.jsxs(ae,{value:O,onValueChange:Y,children:[e.jsx(le,{children:e.jsx(te,{})}),e.jsx(ne,{children:D.map(a=>e.jsx(b,{value:a.name,children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Replicas"}),e.jsx(W,{type:"number",min:"1",value:L,onChange:a=>T(parseInt(a.target.value)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Image"}),e.jsx(W,{value:I,onChange:a=>K(a.target.value),placeholder:"nginx:latest"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Strategy"}),e.jsxs(ae,{value:H,onValueChange:a=>E(a),children:[e.jsx(le,{children:e.jsx(te,{})}),e.jsxs(ne,{children:[e.jsx(b,{value:"RollingUpdate",children:"RollingUpdate"}),e.jsx(b,{value:"Recreate",children:"Recreate"})]})]})]})]}),e.jsxs(me,{children:[e.jsx(j,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsx(j,{onClick:n,children:"Create"})]})]})}),e.jsx(ce,{open:l!==null,onOpenChange:a=>!a&&N(null),children:e.jsxs(re,{children:[e.jsxs(de,{children:[e.jsxs(oe,{children:["Edit Deployment: ",l?.name]}),e.jsx(he,{children:"Update deployment configuration"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Replicas"}),e.jsx(W,{type:"number",min:"0",value:X,onChange:a=>Z(parseInt(a.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Image"}),e.jsx(W,{value:R,onChange:a=>$(a.target.value),placeholder:"nginx:latest"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Strategy"}),e.jsxs(ae,{value:_,onValueChange:a=>ue(a),children:[e.jsx(le,{children:e.jsx(te,{})}),e.jsxs(ne,{children:[e.jsx(b,{value:"RollingUpdate",children:"RollingUpdate"}),e.jsx(b,{value:"Recreate",children:"Recreate"})]})]})]})]}),e.jsxs(me,{children:[e.jsx(j,{variant:"outline",onClick:()=>N(null),children:"Cancel"}),e.jsx(j,{onClick:s,children:"Save"})]})]})}),e.jsx(ce,{open:u!==null,onOpenChange:a=>!a&&V(null),children:e.jsxs(re,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(de,{children:[e.jsxs(oe,{children:["Deployment Details: ",u?.name]}),e.jsx(he,{children:"Complete information about the deployment"})]}),u&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Metadata"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",u.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Namespace:"})," ",u.namespace]}),u.uid&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"UID:"})," ",u.uid]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",new Date(u.createdAt).toLocaleString()]})]})]}),e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Status"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Replicas:"}),e.jsxs(F,{variant:u.readyReplicas===u.replicas?"default":"secondary",children:[u.readyReplicas,"/",u.replicas]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Available:"})," ",u.availableReplicas]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Unavailable:"})," ",u.unavailableReplicas]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Strategy:"})," ",u.strategy]}),u.paused&&e.jsx(F,{variant:"secondary",children:"Paused"}),u.replicas>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"Replicas Progress"}),e.jsxs("span",{children:[u.readyReplicas,"/",u.replicas]})]}),e.jsx(be,{value:u.readyReplicas/u.replicas*100,className:"h-2"})]})]})]}),e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Related Pods"}),(()=>{const a=Ke(u,m);return a.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No pods found"}):e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Total: ",a.length]}),e.jsxs("div",{children:["Running: ",a.filter(x=>x.phase==="Running").length]}),e.jsxs("div",{children:["Pending: ",a.filter(x=>x.phase==="Pending").length]}),e.jsxs("div",{children:["Failed: ",a.filter(x=>x.phase==="Failed").length]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[a.slice(0,5).map(x=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{variant:x.phase==="Running"?"default":"secondary",className:"text-xs",children:x.phase}),e.jsx("span",{children:x.name})]},x.id)),a.length>5&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["...and ",a.length-5," more"]})]})]})})()]}),u.selector&&Object.keys(u.selector).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Selector"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(u.selector).map(([a,x])=>e.jsxs(F,{variant:"outline",children:[a,"=",x]},a))})]})]}),u.template?.containers&&u.template.containers.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Containers"}),e.jsx("div",{className:"space-y-2",children:u.template.containers.map((a,x)=>e.jsxs("div",{className:"text-sm border rounded p-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",a.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Image:"})," ",a.image]}),a.ports&&a.ports.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Ports:"})," ",a.ports.map(B=>B.containerPort).join(", ")]})]},x))})]})]})]}),e.jsx(me,{children:e.jsx(j,{onClick:()=>V(null),children:"Close"})})]})}),e.jsx(we,{open:z!==null,onOpenChange:a=>!a&&se(null),children:e.jsxs(Pe,{children:[e.jsxs(De,{children:[e.jsx(Me,{children:"Delete Deployment"}),e.jsx(ke,{children:"Are you sure? This will also delete associated pods."})]}),e.jsxs(Re,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Le,{onClick:()=>z&&p(z),className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})})]})}function ms({services:h,namespaces:D,pods:r,updateConfig:d,kubernetesEngine:o,node:v}){const[m,w]=c.useState(!1),[M,l]=c.useState(null),[N,u]=c.useState(null),[V,z]=c.useState(null),[se,k]=c.useState(""),[y,f]=c.useState("all"),[G,S]=c.useState("all"),[g,O]=c.useState(""),[Y,L]=c.useState("default"),[T,I]=c.useState("ClusterIP"),[K,H]=c.useState(80),[E,X]=c.useState("ClusterIP"),[Z,R]=c.useState([]),[$,_]=c.useState({}),ue=()=>{if(!g.trim()){q("Name required");return}if(o)try{o.createService({name:g,namespace:Y,type:T,ports:[{port:K,targetPort:K}]});const s=o.getConfig();s&&d({services:s.services}),C("Service created"),w(!1),O(""),L("default"),I("ClusterIP"),H(80)}catch(s){q(s.message)}else{const s={id:`svc-${Date.now()}`,name:g,namespace:Y,type:T,ports:[{port:K,targetPort:K}],createdAt:Date.now()};d({services:[...h,s]}),C("Service created"),w(!1)}},pe=s=>{l(s),X(s.type),R(s.ports||[{port:80,targetPort:80}]),_(s.selector||{})},n=()=>{if(M)if(o)try{o.updateService(M.id,{type:E,ports:Z,selector:$});const s=o.getConfig();s&&d({services:s.services}),C("Service updated successfully"),l(null)}catch(s){q(s.message)}else{const s=h.map(i=>i.id===M.id?{...i,type:E,ports:Z,selector:$}:i);d({services:s}),C("Service updated successfully"),l(null)}},P=s=>{if(o)try{o.deleteService(s);const i=o.getConfig();i&&d({services:i.services}),C("Service deleted"),z(null)}catch(i){q(i.message)}else d({services:h.filter(i=>i.id!==s)}),C("Service deleted"),z(null)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(J,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Services"}),e.jsx(fe,{children:"Manage Kubernetes services"})]}),e.jsxs(j,{onClick:()=>w(!0),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Create Service"]})]})}),e.jsxs(Q,{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx(W,{placeholder:"Search services...",value:se,onChange:s=>k(s.target.value),className:"flex-1"}),e.jsxs(ae,{value:y,onValueChange:f,children:[e.jsx(le,{className:"w-[200px]",children:e.jsx(te,{placeholder:"All namespaces"})}),e.jsxs(ne,{children:[e.jsx(b,{value:"all",children:"All namespaces"}),D.map(s=>e.jsx(b,{value:s.name,children:s.name},s.id))]})]}),e.jsxs(ae,{value:G,onValueChange:S,children:[e.jsx(le,{className:"w-[180px]",children:e.jsx(te,{placeholder:"All types"})}),e.jsxs(ne,{children:[e.jsx(b,{value:"all",children:"All types"}),e.jsx(b,{value:"ClusterIP",children:"ClusterIP"}),e.jsx(b,{value:"NodePort",children:"NodePort"}),e.jsx(b,{value:"LoadBalancer",children:"LoadBalancer"})]})]})]}),e.jsx("div",{className:"space-y-2",children:filteredServices.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No services"}):filteredServices.map(s=>{const i=$e(s,r);return e.jsx(J,{children:e.jsxs(Q,{className:"p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[e.jsx("h4",{className:"font-semibold",children:s.name}),e.jsx(F,{children:s.type}),e.jsx(F,{variant:"outline",children:s.namespace})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[s.clusterIP&&e.jsxs("div",{children:["Cluster IP: ",s.clusterIP]}),s.ports&&s.ports.length>0&&e.jsxs("div",{children:["Ports: ",s.ports.map(t=>`${t.port}→${t.targetPort}`).join(", ")]}),i.length>0&&e.jsxs("div",{children:["Endpoints: ",i.length," pod",i.length!==1?"s":""," (",i.map(t=>t.podIP).filter(Boolean).join(", "),")"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>u(s),title:"View Details",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>pe(s),title:"Edit",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>z(s.id),title:"Delete",children:e.jsx(ye,{className:"h-4 w-4"})})]})]})},s.id)})})]})]}),e.jsx(ce,{open:m,onOpenChange:w,children:e.jsxs(re,{children:[e.jsx(de,{children:e.jsx(oe,{children:"Create Service"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Name"}),e.jsx(W,{value:g,onChange:s=>O(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Namespace"}),e.jsxs(ae,{value:Y,onValueChange:L,children:[e.jsx(le,{children:e.jsx(te,{})}),e.jsx(ne,{children:D.map(s=>e.jsx(b,{value:s.name,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Type"}),e.jsxs(ae,{value:T,onValueChange:s=>I(s),children:[e.jsx(le,{children:e.jsx(te,{})}),e.jsxs(ne,{children:[e.jsx(b,{value:"ClusterIP",children:"ClusterIP"}),e.jsx(b,{value:"NodePort",children:"NodePort"}),e.jsx(b,{value:"LoadBalancer",children:"LoadBalancer"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Port"}),e.jsx(W,{type:"number",value:K,onChange:s=>H(parseInt(s.target.value)||80)})]})]}),e.jsxs(me,{children:[e.jsx(j,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(j,{onClick:ue,children:"Create"})]})]})}),e.jsx(ce,{open:M!==null,onOpenChange:s=>!s&&l(null),children:e.jsxs(re,{className:"max-w-2xl",children:[e.jsxs(de,{children:[e.jsxs(oe,{children:["Edit Service: ",M?.name]}),e.jsx(he,{children:"Update service configuration"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Type"}),e.jsxs(ae,{value:E,onValueChange:s=>X(s),children:[e.jsx(le,{children:e.jsx(te,{})}),e.jsxs(ne,{children:[e.jsx(b,{value:"ClusterIP",children:"ClusterIP"}),e.jsx(b,{value:"NodePort",children:"NodePort"}),e.jsx(b,{value:"LoadBalancer",children:"LoadBalancer"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Ports (port:targetPort, one per line)"}),e.jsx(Se,{value:Z.map(s=>`${s.port}:${s.targetPort}`).join(`
`),onChange:s=>{const i=[];s.target.value.split(`
`).forEach(t=>{const[p,U]=t.split(":");p&&U&&i.push({port:parseInt(p.trim(),10),targetPort:parseInt(U.trim(),10),protocol:"TCP"})}),R(i.length>0?i:[{port:80,targetPort:80}])},rows:3,placeholder:`80:8080
443:8443`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Selector (key=value, one per line)"}),e.jsx(Se,{value:Object.entries($).map(([s,i])=>`${s}=${i}`).join(`
`),onChange:s=>{const i={};s.target.value.split(`
`).forEach(t=>{const[p,...U]=t.split("=");p.trim()&&(i[p.trim()]=U.join("=").trim())}),_(i)},rows:3,placeholder:`app=myapp
version=v1`})]})]}),e.jsxs(me,{children:[e.jsx(j,{variant:"outline",onClick:()=>l(null),children:"Cancel"}),e.jsx(j,{onClick:n,children:"Save"})]})]})}),e.jsx(ce,{open:N!==null,onOpenChange:s=>!s&&u(null),children:e.jsxs(re,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(de,{children:[e.jsxs(oe,{children:["Service Details: ",N?.name]}),e.jsx(he,{children:"Complete information about the service"})]}),N&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Metadata"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",N.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Namespace:"})," ",N.namespace]}),N.uid&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"UID:"})," ",N.uid]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",new Date(N.createdAt).toLocaleString()]})]})]}),e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Spec"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",e.jsx(F,{children:N.type})]}),N.clusterIP&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Cluster IP:"})," ",N.clusterIP]}),N.loadBalancerIP&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Load Balancer IP:"})," ",N.loadBalancerIP]}),N.ports&&N.ports.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Ports:"}),e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:N.ports.map((s,i)=>e.jsxs("div",{children:[s.name&&e.jsxs("span",{className:"font-medium",children:[s.name,": "]}),s.port," → ",s.targetPort," (",s.protocol||"TCP",")",s.nodePort&&e.jsxs("span",{className:"text-muted-foreground",children:[" (NodePort: ",s.nodePort,")"]})]},i))})]})]})]}),e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Endpoints"}),(()=>{const s=$e(N,r);return s.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No endpoints found (no matching pods)"}):e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Total: ",s.length," pod",s.length!==1?"s":""]}),e.jsx("div",{className:"mt-2 space-y-1",children:s.map(i=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{variant:i.phase==="Running"?"default":"secondary",className:"text-xs",children:i.phase}),e.jsx("span",{children:i.name}),i.podIP&&e.jsxs("span",{className:"text-muted-foreground",children:["(",i.podIP,")"]})]},i.id))})]})})()]}),N.selector&&Object.keys(N.selector).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Selector"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(N.selector).map(([s,i])=>e.jsxs(F,{variant:"outline",children:[s,"=",i]},s))})]})]})]}),e.jsx(me,{children:e.jsx(j,{onClick:()=>u(null),children:"Close"})})]})}),e.jsx(we,{open:V!==null,onOpenChange:s=>!s&&z(null),children:e.jsxs(Pe,{children:[e.jsxs(De,{children:[e.jsx(Me,{children:"Delete Service"}),e.jsx(ke,{children:"Are you sure?"})]}),e.jsxs(Re,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Le,{onClick:()=>V&&P(V),className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})})]})}function hs({configMaps:h,namespaces:D,updateConfig:r,kubernetesEngine:d,node:o}){const[v,m]=c.useState(!1),[w,M]=c.useState(null),[l,N]=c.useState(null),[u,V]=c.useState(null),[z,se]=c.useState(""),[k,y]=c.useState("all"),[f,G]=c.useState(""),[S,g]=c.useState("default"),[O,Y]=c.useState(""),[L,T]=c.useState({}),[I,K]=c.useState(""),[H,E]=c.useState(""),X=h.filter(n=>{const P=n.name.toLowerCase().includes(z.toLowerCase()),s=k==="all"||n.namespace===k;return P&&s}),Z=()=>{if(!f.trim()){ie("Name required");return}if(!Ie(f.toLowerCase())){ie("ConfigMap name must be a valid DNS label");return}const n={};if(O.split(`
`).forEach(P=>{const[s,...i]=P.split("=");s.trim()&&(n[s.trim()]=i.join("=").trim())}),Object.keys(n).length===0){ie("At least one key-value pair is required");return}if(d)try{d.createConfigMap({name:f,namespace:S,data:n});const P=d.getConfig();P&&r({configMaps:P.configMaps}),C("ConfigMap created"),m(!1),G(""),g("default"),Y("")}catch(P){q(P.message)}else{const P={id:`cm-${Date.now()}`,name:f,namespace:S,data:n,createdAt:Date.now()};r({configMaps:[...h,P]}),C("ConfigMap created"),m(!1)}},R=n=>{if(n.immutable){Ve("This ConfigMap is immutable and cannot be edited");return}M(n),T({...n.data}),K(""),E("")},$=()=>{if(!I.trim()){ie("Key is required");return}T({...L,[I.trim()]:H.trim()}),K(""),E("")},_=n=>{const P={...L};delete P[n],T(P)},ue=()=>{if(w){if(Object.keys(L).length===0){ie("At least one key-value pair is required");return}if(d)try{d.updateConfigMap(w.id,{data:L});const n=d.getConfig();n&&r({configMaps:n.configMaps}),C("ConfigMap updated successfully"),M(null),T({})}catch(n){q(n.message)}else{const n=h.map(P=>P.id===w.id?{...P,data:L}:P);r({configMaps:n}),C("ConfigMap updated successfully"),M(null),T({})}}},pe=n=>{if(d)try{d.deleteConfigMap(n);const P=d.getConfig();P&&r({configMaps:P.configMaps}),C("ConfigMap deleted"),V(null)}catch(P){q(P.message)}else r({configMaps:h.filter(P=>P.id!==n)}),C("ConfigMap deleted"),V(null)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(J,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(je,{children:"ConfigMaps"}),e.jsx(fe,{children:"Manage Kubernetes ConfigMaps"})]}),e.jsxs(j,{onClick:()=>m(!0),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Create ConfigMap"]})]})}),e.jsxs(Q,{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx(W,{placeholder:"Search ConfigMaps...",value:z,onChange:n=>se(n.target.value),className:"flex-1"}),e.jsxs(ae,{value:k,onValueChange:y,children:[e.jsx(le,{className:"w-[200px]",children:e.jsx(te,{placeholder:"All namespaces"})}),e.jsxs(ne,{children:[e.jsx(b,{value:"all",children:"All namespaces"}),D.map(n=>e.jsx(b,{value:n.name,children:n.name},n.id))]})]})]}),e.jsx("div",{className:"space-y-2",children:X.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No ConfigMaps"}):X.map(n=>e.jsx(J,{children:e.jsxs(Q,{className:"p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[e.jsx("h4",{className:"font-semibold",children:n.name}),e.jsx(F,{variant:"outline",children:n.namespace}),n.immutable&&e.jsx(F,{variant:"secondary",children:"Immutable"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Keys: ",Object.keys(n.data||{}).length]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>N(n),title:"View Details",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>R(n),title:"Edit",disabled:n.immutable,children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>V(n.id),title:"Delete",children:e.jsx(ye,{className:"h-4 w-4"})})]})]})},n.id))})]})]}),e.jsx(ce,{open:v,onOpenChange:m,children:e.jsxs(re,{children:[e.jsx(de,{children:e.jsx(oe,{children:"Create ConfigMap"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Name"}),e.jsx(W,{value:f,onChange:n=>G(n.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Namespace"}),e.jsxs(ae,{value:S,onValueChange:g,children:[e.jsx(le,{children:e.jsx(te,{})}),e.jsx(ne,{children:D.map(n=>e.jsx(b,{value:n.name,children:n.name},n.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Data (key=value, one per line)"}),e.jsx(Se,{value:O,onChange:n=>Y(n.target.value),rows:5})]})]}),e.jsxs(me,{children:[e.jsx(j,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(j,{onClick:Z,children:"Create"})]})]})}),e.jsx(ce,{open:w!==null,onOpenChange:n=>!n&&M(null),children:e.jsxs(re,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(de,{children:[e.jsxs(oe,{children:["Edit ConfigMap: ",w?.name]}),e.jsx(he,{children:"Edit key-value pairs"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Add New Key-Value Pair"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{placeholder:"Key",value:I,onChange:n=>K(n.target.value),className:"flex-1"}),e.jsx(W,{placeholder:"Value",value:H,onChange:n=>E(n.target.value),className:"flex-1"}),e.jsx(j,{onClick:$,size:"sm",children:e.jsx(Ne,{className:"h-4 w-4"})})]})]}),e.jsx(ee,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Data"}),e.jsx("div",{className:"space-y-2 border rounded p-4 max-h-96 overflow-y-auto",children:Object.keys(L).length===0?e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No data"}):Object.entries(L).map(([n,P])=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:n}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:P})]}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>_(n),children:e.jsx(ye,{className:"h-4 w-4"})})]},n))})]})]}),e.jsxs(me,{children:[e.jsx(j,{variant:"outline",onClick:()=>M(null),children:"Cancel"}),e.jsx(j,{onClick:ue,children:"Save"})]})]})}),e.jsx(ce,{open:l!==null,onOpenChange:n=>!n&&N(null),children:e.jsxs(re,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(de,{children:[e.jsxs(oe,{children:["ConfigMap Details: ",l?.name]}),e.jsx(he,{children:"Complete information about the ConfigMap"})]}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Metadata"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",l.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Namespace:"})," ",l.namespace]}),l.uid&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"UID:"})," ",l.uid]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",new Date(l.createdAt).toLocaleString()]}),l.immutable&&e.jsx(F,{variant:"secondary",children:"Immutable"})]})]}),e.jsx(ee,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2",children:["Data (",Object.keys(l.data||{}).length," keys)"]}),e.jsx("div",{className:"space-y-2 border rounded p-4 max-h-96 overflow-y-auto",children:Object.keys(l.data||{}).length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No data"}):Object.entries(l.data||{}).map(([n,P])=>e.jsxs("div",{className:"p-2 border rounded",children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:n}),e.jsx("div",{className:"text-xs text-muted-foreground font-mono bg-muted p-2 rounded break-all",children:P})]},n))})]}),l.labels&&Object.keys(l.labels).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Labels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(l.labels).map(([n,P])=>e.jsxs(F,{variant:"outline",children:[n,"=",P]},n))})]})]})]}),e.jsx(me,{children:e.jsx(j,{onClick:()=>N(null),children:"Close"})})]})}),e.jsx(we,{open:u!==null,onOpenChange:n=>!n&&V(null),children:e.jsxs(Pe,{children:[e.jsxs(De,{children:[e.jsx(Me,{children:"Delete ConfigMap"}),e.jsx(ke,{children:"Are you sure?"})]}),e.jsxs(Re,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Le,{onClick:()=>u&&pe(u),className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})})]})}function xs({secrets:h,namespaces:D,updateConfig:r,kubernetesEngine:d,node:o}){const[v,m]=c.useState(!1),[w,M]=c.useState(null),[l,N]=c.useState(null),[u,V]=c.useState(null),[z,se]=c.useState(""),[k,y]=c.useState("all"),[f,G]=c.useState(""),[S,g]=c.useState("default"),[O,Y]=c.useState("Opaque"),[L,T]=c.useState(""),[I,K]=c.useState({}),[H,E]=c.useState(""),[X,Z]=c.useState(""),[R,$]=c.useState(!1),_=h.filter(t=>{const p=t.name.toLowerCase().includes(z.toLowerCase()),U=k==="all"||t.namespace===k;return p&&U}),ue=()=>{if(!f.trim()){ie("Name required");return}if(!Ie(f.toLowerCase())){ie("Secret name must be a valid DNS label");return}const t={};if(L.split(`
`).forEach(p=>{const[U,...a]=p.split("=");U.trim()&&(t[U.trim()]=btoa(a.join("=").trim()))}),Object.keys(t).length===0){ie("At least one key-value pair is required");return}if(d)try{d.createSecret({name:f,namespace:S,type:O,stringData:L.split(`
`).reduce((U,a)=>{const[x,...B]=a.split("=");return x.trim()&&(U[x.trim()]=B.join("=").trim()),U},{})});const p=d.getConfig();p&&r({secrets:p.secrets}),C("Secret created"),m(!1),G(""),g("default"),Y("Opaque"),T("")}catch(p){q(p.message)}else{const p={id:`secret-${Date.now()}`,name:f,namespace:S,type:O,data:t,createdAt:Date.now()};r({secrets:[...h,p]}),C("Secret created"),m(!1)}},pe=t=>{if(t.immutable){Ve("This Secret is immutable and cannot be edited");return}M(t);const p={};Object.entries(t.data||{}).forEach(([U,a])=>{try{p[U]=atob(a)}catch{p[U]=a}}),K(p),E(""),Z(""),$(!1)},n=()=>{if(!H.trim()){ie("Key is required");return}K({...I,[H.trim()]:X.trim()}),E(""),Z("")},P=t=>{const p={...I};delete p[t],K(p)},s=()=>{if(w){if(Object.keys(I).length===0){ie("At least one key-value pair is required");return}if(d)try{d.updateSecret(w.id,{stringData:I});const t=d.getConfig();t&&r({secrets:t.secrets}),C("Secret updated successfully"),M(null),K({})}catch(t){q(t.message)}else{const t={};Object.entries(I).forEach(([U,a])=>{t[U]=btoa(a)});const p=h.map(U=>U.id===w.id?{...U,data:t}:U);r({secrets:p}),C("Secret updated successfully"),M(null),K({})}}},i=t=>{if(d)try{d.deleteSecret(t);const p=d.getConfig();p&&r({secrets:p.secrets}),C("Secret deleted"),V(null)}catch(p){q(p.message)}else r({secrets:h.filter(p=>p.id!==t)}),C("Secret deleted"),V(null)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(J,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Secrets"}),e.jsx(fe,{children:"Manage Kubernetes Secrets"})]}),e.jsxs(j,{onClick:()=>m(!0),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Create Secret"]})]})}),e.jsxs(Q,{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx(W,{placeholder:"Search Secrets...",value:z,onChange:t=>se(t.target.value),className:"flex-1"}),e.jsxs(ae,{value:k,onValueChange:y,children:[e.jsx(le,{className:"w-[200px]",children:e.jsx(te,{placeholder:"All namespaces"})}),e.jsxs(ne,{children:[e.jsx(b,{value:"all",children:"All namespaces"}),D.map(t=>e.jsx(b,{value:t.name,children:t.name},t.id))]})]})]}),e.jsx("div",{className:"space-y-2",children:_.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No Secrets"}):_.map(t=>e.jsx(J,{children:e.jsxs(Q,{className:"p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[e.jsx("h4",{className:"font-semibold",children:t.name}),e.jsx(F,{children:t.type}),e.jsx(F,{variant:"outline",children:t.namespace}),t.immutable&&e.jsx(F,{variant:"secondary",children:"Immutable"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Keys: ",Object.keys(t.data||{}).length]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>N(t),title:"View Details",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>pe(t),title:"Edit",disabled:t.immutable,children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>V(t.id),title:"Delete",children:e.jsx(ye,{className:"h-4 w-4"})})]})]})},t.id))})]})]}),e.jsx(ce,{open:v,onOpenChange:m,children:e.jsxs(re,{children:[e.jsx(de,{children:e.jsx(oe,{children:"Create Secret"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Name"}),e.jsx(W,{value:f,onChange:t=>G(t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Namespace"}),e.jsxs(ae,{value:S,onValueChange:g,children:[e.jsx(le,{children:e.jsx(te,{})}),e.jsx(ne,{children:D.map(t=>e.jsx(b,{value:t.name,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Type"}),e.jsxs(ae,{value:O,onValueChange:t=>Y(t),children:[e.jsx(le,{children:e.jsx(te,{})}),e.jsxs(ne,{children:[e.jsx(b,{value:"Opaque",children:"Opaque"}),e.jsx(b,{value:"kubernetes.io/dockerconfigjson",children:"Docker Config"}),e.jsx(b,{value:"kubernetes.io/tls",children:"TLS"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Data (key=value, one per line)"}),e.jsx(Se,{value:L,onChange:t=>T(t.target.value),rows:5})]})]}),e.jsxs(me,{children:[e.jsx(j,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(j,{onClick:ue,children:"Create"})]})]})}),e.jsx(ce,{open:w!==null,onOpenChange:t=>!t&&M(null),children:e.jsxs(re,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(de,{children:[e.jsxs(oe,{children:["Edit Secret: ",w?.name]}),e.jsx(he,{children:"Edit key-value pairs (values are base64 encoded)"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Add New Key-Value Pair"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{placeholder:"Key",value:H,onChange:t=>E(t.target.value),className:"flex-1"}),e.jsx(W,{type:R?"text":"password",placeholder:"Value",value:X,onChange:t=>Z(t.target.value),className:"flex-1"}),e.jsx(j,{onClick:n,size:"sm",children:e.jsx(Ne,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{checked:R,onCheckedChange:$}),e.jsx(A,{className:"text-xs",children:"Show values"})]})]}),e.jsx(ee,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Data"}),e.jsx("div",{className:"space-y-2 border rounded p-4 max-h-96 overflow-y-auto",children:Object.keys(I).length===0?e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No data"}):Object.entries(I).map(([t,p])=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:t}),e.jsx("div",{className:"text-xs text-muted-foreground truncate font-mono",children:R?p:"••••••••"})]}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>P(t),children:e.jsx(ye,{className:"h-4 w-4"})})]},t))})]})]}),e.jsxs(me,{children:[e.jsx(j,{variant:"outline",onClick:()=>M(null),children:"Cancel"}),e.jsx(j,{onClick:s,children:"Save"})]})]})}),e.jsx(ce,{open:l!==null,onOpenChange:t=>!t&&N(null),children:e.jsxs(re,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(de,{children:[e.jsxs(oe,{children:["Secret Details: ",l?.name]}),e.jsx(he,{children:"Complete information about the Secret"})]}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Metadata"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",l.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Namespace:"})," ",l.namespace]}),l.uid&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"UID:"})," ",l.uid]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",new Date(l.createdAt).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",e.jsx(F,{children:l.type})]}),l.immutable&&e.jsx(F,{variant:"secondary",children:"Immutable"})]})]}),e.jsx(ee,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2",children:["Data (",Object.keys(l.data||{}).length," keys)"]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_e,{checked:R,onCheckedChange:$}),e.jsx(A,{className:"text-xs",children:"Show decoded values"})]}),e.jsx("div",{className:"space-y-2 border rounded p-4 max-h-96 overflow-y-auto",children:Object.keys(l.data||{}).length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"No data"}):Object.entries(l.data||{}).map(([t,p])=>{let U="";try{U=atob(p)}catch{U=p}return e.jsxs("div",{className:"p-2 border rounded",children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:t}),e.jsx("div",{className:"text-xs text-muted-foreground font-mono bg-muted p-2 rounded break-all",children:R?U:"••••••••"})]},t)})})]}),l.labels&&Object.keys(l.labels).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Labels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(l.labels).map(([t,p])=>e.jsxs(F,{variant:"outline",children:[t,"=",p]},t))})]})]})]}),e.jsx(me,{children:e.jsx(j,{onClick:()=>N(null),children:"Close"})})]})}),e.jsx(we,{open:u!==null,onOpenChange:t=>!t&&V(null),children:e.jsxs(Pe,{children:[e.jsxs(De,{children:[e.jsx(Me,{children:"Delete Secret"}),e.jsx(ke,{children:"Are you sure?"})]}),e.jsxs(Re,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Le,{onClick:()=>u&&i(u),className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})})]})}function js({namespaces:h,updateConfig:D,kubernetesEngine:r,node:d}){const o=d.data.config||{},v=o.pods||(r?r.getPods():[]),m=o.deployments||(r?r.getDeployments():[]),w=o.services||(r?r.getServices():[]),[M,l]=c.useState(!1),[N,u]=c.useState(null),[V,z]=c.useState(""),se=()=>{if(!V.trim()){q("Name required");return}if(r)try{r.createNamespace({name:V});const y=r.getConfig();y&&D({namespaces:y.namespaces}),C("Namespace created"),l(!1),z("")}catch(y){q(y.message)}else{const y={id:`ns-${Date.now()}`,name:V,phase:"Active",createdAt:Date.now()};D({namespaces:[...h,y]}),C("Namespace created"),l(!1)}},k=y=>{if(r)try{r.deleteNamespace(y);const f=r.getConfig();f&&D({namespaces:f.namespaces}),C("Namespace deleted"),u(null)}catch(f){q(f.message)}else D({namespaces:h.filter(f=>f.id!==y)}),C("Namespace deleted"),u(null)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(J,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(je,{children:"Namespaces"}),e.jsx(fe,{children:"Manage Kubernetes namespaces"})]}),e.jsxs(j,{onClick:()=>l(!0),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Create Namespace"]})]})}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-2",children:h.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No namespaces"}):h.map(y=>{const f=rs(y.name,v,m,w);return e.jsx(J,{children:e.jsxs(Q,{className:"p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[e.jsx("h4",{className:"font-semibold",children:y.name}),e.jsx(F,{variant:y.phase==="Active"?"default":"secondary",children:y.phase})]}),e.jsxs("div",{className:"text-sm text-muted-foreground flex gap-4",children:[e.jsxs("div",{children:["Pods: ",f.pods]}),e.jsxs("div",{children:["Deployments: ",f.deployments]}),e.jsxs("div",{children:["Services: ",f.services]})]})]}),y.name!=="default"&&e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>u(y.id),children:e.jsx(ye,{className:"h-4 w-4"})})]})},y.id)})})})]}),e.jsx(ce,{open:M,onOpenChange:l,children:e.jsxs(re,{children:[e.jsx(de,{children:e.jsx(oe,{children:"Create Namespace"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Name"}),e.jsx(W,{value:V,onChange:y=>z(y.target.value)})]})}),e.jsxs(me,{children:[e.jsx(j,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(j,{onClick:se,children:"Create"})]})]})}),e.jsx(we,{open:N!==null,onOpenChange:y=>!y&&u(null),children:e.jsxs(Pe,{children:[e.jsxs(De,{children:[e.jsx(Me,{children:"Delete Namespace"}),e.jsx(ke,{children:"Are you sure? This may fail if namespace contains resources."})]}),e.jsxs(Re,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(Le,{onClick:()=>N&&k(N),className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})})]})}function us({nodes:h,updateConfig:D,kubernetesEngine:r,node:d}){return e.jsx("div",{className:"space-y-4",children:e.jsxs(J,{children:[e.jsxs(xe,{children:[e.jsx(je,{children:"Nodes"}),e.jsx(fe,{children:"Kubernetes cluster nodes"})]}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-2",children:h.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No nodes"}):h.map(o=>e.jsx(J,{children:e.jsxs(Q,{className:"p-4",children:[e.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[e.jsx("h4",{className:"font-semibold",children:o.name}),e.jsx(F,{variant:o.conditions?.some(v=>v.type==="Ready"&&v.status==="True")?"default":"secondary",children:"Ready"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[o.capacity&&e.jsxs("div",{children:["CPU: ",o.capacity.cpu,", Memory: ",o.capacity.memory]}),o.podCount!==void 0&&e.jsxs("div",{children:["Pods: ",o.podCount]}),o.cpuUsage!==void 0&&e.jsxs("div",{children:["CPU Usage: ",o.cpuUsage.toFixed(1),"%"]}),o.memoryUsage&&o.memoryCapacity&&e.jsxs("div",{children:["Memory Usage: ",(o.memoryUsage/o.memoryCapacity*100).toFixed(1),"%"]})]})]})},o.id))})})]})})}function ps({events:h}){const D=h.slice(-50).reverse();return e.jsx("div",{className:"space-y-4",children:e.jsxs(J,{children:[e.jsxs(xe,{children:[e.jsx(je,{children:"Events"}),e.jsx(fe,{children:"Recent Kubernetes events"})]}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-2",children:D.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No events"}):D.map(r=>e.jsx(J,{children:e.jsxs(Q,{className:"p-4",children:[e.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[e.jsx(F,{variant:r.type==="Warning"?"destructive":"default",children:r.type}),e.jsx("span",{className:"text-sm font-semibold",children:r.reason}),e.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:new Date(r.firstTimestamp).toLocaleString()})]}),e.jsx("div",{className:"text-sm",children:r.message}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[r.involvedObject.kind,": ",r.involvedObject.name]})]})},r.id))})})]})})}function vs({pvcs:h,namespaces:D,updateConfig:r,kubernetesEngine:d,node:o}){return e.jsx("div",{className:"space-y-4",children:e.jsxs(J,{children:[e.jsxs(xe,{children:[e.jsx(je,{children:"Persistent Volume Claims"}),e.jsx(fe,{children:"Manage PVCs"})]}),e.jsx(Q,{children:e.jsx("div",{className:"space-y-2",children:h.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No PVCs"}):h.map(v=>e.jsx(J,{children:e.jsxs(Q,{className:"p-4",children:[e.jsxs("div",{className:"flex gap-2 items-center mb-1",children:[e.jsx("h4",{className:"font-semibold",children:v.name}),e.jsx(F,{variant:v.status==="Bound"?"default":"secondary",children:v.status}),e.jsx(F,{variant:"outline",children:v.namespace})]}),v.capacity?.storage&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Storage: ",v.capacity.storage]})]})},v.id))})})]})})}function gs({yaml:h,yamlManifests:D,updateConfig:r}){const[d,o]=c.useState(h||""),[v,m]=c.useState(null),[w,M]=c.useState(!1),l=k=>{if(!k.trim())return m(null),!0;try{const y=k.split(`
`);let f=[];for(let G=0;G<y.length;G++){const g=y[G].trim();!g||g.startsWith("#")||g.includes(":")&&!g.startsWith("-")&&(g.indexOf(":"),g.length-1)}return m(null),!0}catch(y){return m(y.message||"Invalid YAML syntax"),!1}},N=k=>{o(k),M(!0),setTimeout(()=>{l(k),M(!1)},300)},u=()=>{if(!l(d)){ie("YAML validation failed. Please fix errors before saving.");return}r({yaml:d}),C("YAML saved successfully")},V=()=>{const k=document.createElement("input");k.type="file",k.accept=".yaml,.yml",k.onchange=y=>{const f=y.target.files[0];if(f){const G=new FileReader;G.onload=S=>{const g=S.target.result;o(g),l(g),C("YAML imported successfully")},G.readAsText(f)}},k.click()},z=()=>{if(!d.trim()){Ve("No YAML content to export");return}const k=new Blob([d],{type:"text/yaml"}),y=URL.createObjectURL(k),f=document.createElement("a");f.href=y,f.download=`kubernetes-manifest-${Date.now()}.yaml`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(y),C("YAML exported successfully")},se=()=>{try{const y=d.split(`
`).map(f=>f.replace(/\s+$/,"")).join(`
`);o(y),C("YAML formatted")}catch{q("Failed to format YAML")}};return e.jsx("div",{className:"space-y-4",children:e.jsxs(J,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(je,{children:"YAML Editor"}),e.jsx(fe,{children:"Edit Kubernetes manifests with validation"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(j,{variant:"outline",onClick:V,size:"sm",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Import"]}),e.jsxs(j,{variant:"outline",onClick:z,size:"sm",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsx(j,{variant:"outline",onClick:se,size:"sm",children:"Format"})]})]})}),e.jsxs(Q,{children:[v&&e.jsxs("div",{className:"mb-4 p-3 bg-destructive/10 border border-destructive/20 rounded text-sm text-destructive",children:[e.jsx("strong",{children:"Validation Error:"})," ",v]}),w&&e.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:"Validating YAML..."}),e.jsx(Se,{value:d,onChange:k=>N(k.target.value),className:"font-mono text-sm h-96",placeholder:`apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: nginx
    image: nginx:latest`}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(j,{onClick:u,disabled:!!v||w,children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Save YAML"]}),D&&D.length>0&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center",children:[D.length," manifest",D.length!==1?"s":""," loaded"]})]})]})]})})}export{Ps as KubernetesConfigAdvanced};

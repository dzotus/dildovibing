import{O as $,u as I,j as e,r as z,i as g,S as p,C as n,e as c,f as l,k as d,A as G,T as A,a as O,b,c as V,d as N,h as f,P as K,B as x,m as _,L as o,t as h,I as m,n as U,o as Y,p as J,q as Q,s as v}from"./index-Cdjj0m0I.js";import{R as W}from"./refresh-ccw-CPtECfG6.js";import{G as w}from"./globe-F3YW7kIq.js";import{T as X}from"./trending-up-JUd5yW1R.js";const Z=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],y=$("map-pin",Z);function re({componentId:C}){const{nodes:D,updateNode:H}=I(),u=D.find(s=>s.id===C);if(!u)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const t=u.data.config||{},i=t.distributions||[{id:"dist-1",domain:"cdn.example.com",origin:"https://origin.example.com",status:"deployed",edgeLocations:15,requests:125e4,cacheHitRate:92.5,bandwidth:1024e8},{id:"dist-2",domain:"static.example.com",origin:"https://s3.example.com",status:"deployed",edgeLocations:12,requests:89e4,cacheHitRate:88.3,bandwidth:768e8}],j=t.edgeLocations||[{id:"edge-1",region:"us-east-1",city:"New York",requests:125e3,cacheHits:115e3,bandwidth:1024e7,status:"active"},{id:"edge-2",region:"eu-west-1",city:"London",requests:98e3,cacheHits:9e4,bandwidth:8192e6,status:"active"},{id:"edge-3",region:"ap-southeast-1",city:"Singapore",requests:75e3,cacheHits:68e3,bandwidth:6144e6,status:"active"}],q=t.totalDistributions||i.length,P=t.totalEdgeLocations||j.length,R=t.totalRequests||i.reduce((s,r)=>s+(r.requests||0),0);t.totalBandwidth||i.reduce((s,r)=>s+(r.bandwidth||0),0);const B=t.averageCacheHitRate||i.reduce((s,r)=>s+(r.cacheHitRate||0),0)/i.length,[ee,E]=z.useState(!1),a=s=>{H(C,{data:{...u.data,config:{...t,...s}}})},M=()=>{const s={id:`dist-${Date.now()}`,domain:"cdn-new.example.com",origin:"https://origin.example.com",status:"deploying",edgeLocations:0};a({distributions:[...i,s]}),E(!1)},F=s=>{a({distributions:i.filter(r=>r.id!==s)})},T=s=>{switch(s){case"deployed":case"active":return"bg-green-500";case"deploying":return"bg-yellow-500";case"failed":case"inactive":return"bg-red-500";default:return"bg-muted"}},k=s=>{switch(s){case"deployed":case"active":return"bg-green-500 text-white";case"deploying":return"bg-yellow-500 text-white";case"failed":case"inactive":return"bg-red-500 text-white";default:return"bg-muted text-foreground"}},L=s=>{if(!s)return"0 B";const r=["B","KB","MB","GB","TB"],S=Math.floor(Math.log(s)/Math.log(1024));return`${(s/Math.pow(1024,S)).toFixed(2)} ${r[S]}`};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"CDN Edge"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Content Delivery Network"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Global content distribution and caching"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(g,{variant:"outline",size:"sm",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(p,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(n,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Distributions"}),e.jsx(w,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:q}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"active"})]})})]}),e.jsxs(n,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Edge Locations"}),e.jsx(y,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:P}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"global"})]})})]}),e.jsxs(n,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Requests"}),e.jsx(G,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(d,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[(R/1e3).toFixed(0),"K"]})})})]}),e.jsxs(n,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Cache Hit Rate"}),e.jsx(X,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(d,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:[B.toFixed(1),"%"]})})})]})]}),e.jsxs(A,{defaultValue:"distributions",className:"space-y-4",children:[e.jsxs(O,{children:[e.jsxs(b,{value:"distributions",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Distributions (",i.length,")"]}),e.jsxs(b,{value:"edge-locations",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Edge Locations (",j.length,")"]}),e.jsxs(b,{value:"settings",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(N,{value:"distributions",className:"space-y-4",children:e.jsxs(n,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(l,{children:"CDN Distributions"}),e.jsx(f,{children:"Content distribution configurations"})]}),e.jsxs(g,{onClick:M,size:"sm",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Create Distribution"]})]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsxs(n,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${T(s.status)}/20`,children:e.jsx(w,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(l,{className:"text-lg font-semibold",children:s.domain}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(x,{variant:"outline",className:`${k(s.status)} border-0`,children:s.status}),e.jsx(x,{variant:"outline",className:"font-mono text-xs",children:s.origin}),s.edgeLocations&&e.jsxs(x,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300",children:[s.edgeLocations," edges"]}),s.cacheHitRate&&e.jsxs(x,{variant:"outline",className:"bg-purple-50 dark:bg-purple-950/20 text-purple-700 dark:text-purple-300",children:[s.cacheHitRate.toFixed(1),"% cache"]})]})]})]}),e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>F(s.id),className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(_,{className:"h-4 w-4"})})]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.requests&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Requests:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.requests.toLocaleString()})]}),s.bandwidth&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Bandwidth:"}),e.jsx("span",{className:"ml-2 font-semibold",children:L(s.bandwidth)})]})]})})]},s.id))})})]})}),e.jsx(N,{value:"edge-locations",className:"space-y-4",children:e.jsxs(n,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Edge Locations"}),e.jsx(f,{children:"Global CDN edge servers"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:j.map(s=>e.jsxs(n,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${T(s.status)}/20`,children:e.jsx(y,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx(l,{className:"text-lg font-semibold",children:s.city}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(x,{variant:"outline",className:`${k(s.status)} border-0`,children:s.status}),e.jsx(x,{variant:"outline",children:s.region})]})]})]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.requests&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Requests:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.requests.toLocaleString()})]}),s.cacheHits&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Cache Hits:"}),e.jsx("span",{className:"ml-2 font-semibold",children:s.cacheHits.toLocaleString()})]}),s.bandwidth&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Bandwidth:"}),e.jsx("span",{className:"ml-2 font-semibold",children:L(s.bandwidth)})]})]})})]},s.id))})})]})}),e.jsx(N,{value:"settings",className:"space-y-4",children:e.jsxs(n,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"CDN Settings"}),e.jsx(f,{children:"CDN configuration"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{children:"Enable Compression"}),e.jsx(h,{checked:t.enableCompression??!0,onCheckedChange:s=>a({enableCompression:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{children:"Enable HTTP/2"}),e.jsx(h,{checked:t.enableHTTP2??!0,onCheckedChange:s=>a({enableHTTP2:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{children:"Enable HTTPS"}),e.jsx(h,{checked:t.enableHTTPS??!0,onCheckedChange:s=>a({enableHTTPS:s})})]}),e.jsx(p,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Default TTL (seconds)"}),e.jsx(m,{type:"number",value:t.defaultTTL??3600,onChange:s=>a({defaultTTL:parseInt(s.target.value)||3600}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Max TTL (seconds)"}),e.jsx(m,{type:"number",value:t.maxTTL??86400,onChange:s=>a({maxTTL:parseInt(s.target.value)||86400}),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Cache Policy"}),e.jsxs(U,{value:t.cachePolicy??"cache-first",onValueChange:s=>a({cachePolicy:s}),children:[e.jsx(Y,{children:e.jsx(J,{})}),e.jsxs(Q,{children:[e.jsx(v,{value:"cache-first",children:"Cache First"}),e.jsx(v,{value:"origin-first",children:"Origin First"}),e.jsx(v,{value:"bypass",children:"Cache Only"})]})]})]}),e.jsx(p,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Enable Metrics Export"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Export CDN metrics for Prometheus scraping"})]}),e.jsx(h,{checked:t.metrics?.enabled??!0,onCheckedChange:s=>a({metrics:{...t.metrics,enabled:s,port:t.metrics?.port||9101,path:t.metrics?.path||"/metrics"}})})]}),t.metrics?.enabled!==!1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Metrics Port"}),e.jsx(m,{type:"number",value:t.metrics?.port??9101,onChange:s=>a({metrics:{...t.metrics,port:parseInt(s.target.value)||9101,path:t.metrics?.path||"/metrics"}}),min:1024,max:65535}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Port for Prometheus metrics endpoint"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Metrics Path"}),e.jsx(m,{type:"text",value:t.metrics?.path??"/metrics",onChange:s=>a({metrics:{...t.metrics,path:s.target.value||"/metrics",port:t.metrics?.port||9101}}),placeholder:"/metrics"})]})]})]})]})]})})]})]})})}export{re as CDNConfigAdvanced};

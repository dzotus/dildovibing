import{u as Ss,a as ks,j as e,r as g,e as se,l as u,S as P,aC as D,C as x,h as f,i as y,m as h,T as Ps,b as Ds,c as R,d as Qs,D as Be,a4 as Ts,ap as Ms,f as q,k as Q,L as l,I as i,q as ve,s as fe,t as ye,v as Ne,w as C,x as re,P as be,a5 as te,B as G,as as Ce,o as ae,y as Ue,z as Ie,E as Oe,G as We,H as Ve,n as _e,J as Ge}from"./index-C50GjM4J.js";import{P as H}from"./progress-BwopX1mm.js";import{A as B,a as U,b as I}from"./alert-CSFenUrK.js";import{a as A}from"./toast-CdfuIZXR.js";import{T as He,a as Ke,b as Ze,c as Je}from"./tooltip-CJvXeEnb.js";import{R as Rs}from"./refresh-ccw-BAShIsPg.js";import{M as Xe}from"./message-square-D9ABi0YF.js";import{U as qs}from"./users-DueoQ0eF.js";import{S as As}from"./shield-kRPgW3YF.js";import{P as we}from"./pen-UnUGj2jw.js";function Hs({componentId:F}){const{nodes:le,updateNode:Ye,connections:Le}=Ss(),{isRunning:Se,start:Fs,stop:Es,updateMetrics:es}=ks(),E=le.find(s=>s.id===F);if(!E)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const o=E.data.config||{},ke=o.brokerName||"localhost",ss=o.brokerUrl||"tcp://localhost:61616",rs=o.protocol||"openwire",ts=o.port||61616,as=o.username||"admin",ls=o.password||"admin",p=o.queues||[],v=o.topics||[],O=o.connections||[],k=o.subscriptions||[],is=o.persistenceEnabled??!0,ns=o.maxConnections||1e3,ie=o.memoryLimit||1024,Pe=o.consumptionRate??10,De=o.storeUsage||0,Qe=o.tempUsage||0,cs=o.avgMessageSize??1024,Te=o.protocolLatencies||{openwire:2,amqp:5,mqtt:8,stomp:10,ws:12},ds=o.memoryPressureThreshold??.8,os=o.queueLatencyBase??0,ms=o.queueLatencyFactor??1,ne=o.deadLetterQueue||"DLQ",K=o.acls||[],[Me,ce]=g.useState(!1),[j,$]=g.useState({principal:"",resource:"",operation:"read",permission:"allow"});g.useEffect(()=>{if(!E)return;const s=se.getActiveMQRoutingEngine(F);if(!s)return;const a=E.data.config||{};s.initialize({queues:a.queues||[],topics:a.topics||[],subscriptions:a.subscriptions||[],consumptionRate:a.consumptionRate??10,deadLetterQueue:a.deadLetterQueue||"DLQ"}),se.updateNodesAndConnections(le,Le)},[F,p.length,v.length,Pe,ne,E?.id,le,Le]);const d=s=>{Ye(F,{data:{...E.data,config:{...o,...s}}})},us=()=>{const s=`queue-${Date.now()}`;d({queues:[...p,{name:s,queueSize:0,consumerCount:0,enqueueCount:0,dequeueCount:0,memoryUsage:0,memoryPercent:0}]}),A("Queue added successfully")},xs=s=>!s||s.trim()===""?"Queue name cannot be empty":s.length>255?"Queue name cannot exceed 255 characters":/^[a-zA-Z0-9._-]+$/.test(s)?s.startsWith(".")||s.endsWith(".")?"Queue name cannot start or end with a dot":null:"Queue name can only contain letters, numbers, dots, underscores, and hyphens",b=(s,a,r)=>{if(a==="name"){const n=xs(r);if(n){de({...w,[s]:n});return}else{const m={...w};delete m[s],de(m)}}const t=[...p];t[s]={...t[s],[a]:r},d({queues:t})},[Re,W]=g.useState(null),[w,de]=g.useState({}),hs=()=>{const s=`topic-${Date.now()}`;d({topics:[...v,{name:s,subscriberCount:0,enqueueCount:0,dequeueCount:0,memoryUsage:0,memoryPercent:0}]}),A("Topic added successfully")},ps=s=>!s||s.trim()===""?"Topic name cannot be empty":s.length>255?"Topic name cannot exceed 255 characters":/^[a-zA-Z0-9._-]+$/.test(s)?s.startsWith(".")||s.endsWith(".")?"Topic name cannot start or end with a dot":null:"Topic name can only contain letters, numbers, dots, underscores, and hyphens",L=(s,a,r)=>{if(a==="name"){const n=ps(r);if(n){oe({...S,[s]:n});return}else{const m={...S};delete m[s],oe(m)}}const t=[...v];t[s]={...t[s],[a]:r},d({topics:t})},[qe,V]=g.useState(null),[S,oe]=g.useState({}),[me,js]=g.useState(""),[ue,gs]=g.useState(""),[Z,vs]=g.useState(""),[J,fs]=g.useState(""),[T,X]=g.useState(null),[z,Y]=g.useState(null),[xe,he]=g.useState(null),[ys,ee]=g.useState(null),[_,pe]=g.useState({}),Ae=p.filter(s=>s.name.toLowerCase().includes(me.toLowerCase())),Fe=v.filter(s=>s.name.toLowerCase().includes(ue.toLowerCase())),je=O.filter(s=>(s.clientId||"").toLowerCase().includes(Z.toLowerCase())||(s.remoteAddress||"").toLowerCase().includes(Z.toLowerCase())),ge=k.filter(s=>(s.clientId||"").toLowerCase().includes(J.toLowerCase())||(s.destination||"").toLowerCase().includes(J.toLowerCase())),Ee=s=>{if(!s||s.trim()==="")return"Resource cannot be empty";if(s==="*")return null;if(!s.includes("://"))return"Resource must be in format queue://name or topic://name (or use * for all)";const[a,r]=s.split("://");return a!=="queue"&&a!=="topic"?'Resource prefix must be "queue" or "topic"':!r||r.trim()===""?"Resource name cannot be empty":r!=="*"&&!/^[a-zA-Z0-9._*-]+$/.test(r)?"Resource name can only contain letters, numbers, dots, underscores, hyphens, and asterisks":null},Ns=()=>{const s=Ee(j.resource);if(s){he(s);return}if(he(null),!j.principal||!j.resource)return;const a={principal:j.principal,resource:j.resource,operation:j.operation,permission:j.permission};d({acls:[...K,a]}),ce(!1),A("ACL rule added successfully"),$({principal:"",resource:"",operation:"read",permission:"allow"})},bs=s=>{d({acls:K.filter((a,r)=>r!==s)}),A("ACL rule removed successfully")},Cs=s=>{const a=p[s];a&&(a.queueSize||0)>0?X(s):$e(s)},$e=s=>{d({queues:p.filter((a,r)=>r!==s)}),X(null),A("Queue removed successfully")},ws=s=>{const a=v[s];k.some(t=>t.destination===a.name)?Y(s):ze(s)},ze=s=>{d({topics:v.filter((a,r)=>r!==s)}),Y(null),A("Topic removed successfully")},Ls=p.reduce((s,a)=>s+(a.queueSize||0),0);return p.reduce((s,a)=>s+(a.consumerCount||0),0),v.reduce((s,a)=>s+(a.subscriberCount||0),0),e.jsxs("div",{className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"ActiveMQ Broker"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Broker Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure ActiveMQ broker, queues, topics, connections and security"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>es(),title:"Manually refresh broker metrics (metrics update automatically during simulation)",children:[e.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Refresh Metrics"]})})]}),e.jsx(P,{}),p.length===0&&v.length===0&&e.jsxs(B,{children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx(U,{children:"Getting Started"}),e.jsxs(I,{className:"space-y-2 mt-2",children:[e.jsx("p",{children:"To start using ActiveMQ broker, follow these steps:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:["Configure at least one ",e.jsx("strong",{children:"Queue"})," or ",e.jsx("strong",{children:"Topic"})," in the tabs below"]}),e.jsx("li",{children:"Connect other components (producers/consumers) to this broker"}),e.jsx("li",{children:"Start the simulation from the Emulation Panel to see metrics"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[e.jsx("strong",{children:"Note:"})," Queues and Topics are configuration - they define what destinations are available. Connections and Subscriptions are created automatically by clients at runtime."]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(x,{children:[e.jsx(f,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium",children:"Broker Status"})}),e.jsxs(h,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${Se?"bg-green-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-lg font-semibold",children:Se?"Running":"Stopped"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ke})]})]}),e.jsxs(x,{children:[e.jsx(f,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium",children:"Total Messages"})}),e.jsxs(h,{children:[e.jsx("span",{className:"text-2xl font-bold",children:Ls.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Across all queues"})]})]}),e.jsxs(x,{children:[e.jsx(f,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium",children:"Active Connections"})}),e.jsxs(h,{children:[e.jsx("span",{className:"text-2xl font-bold",children:O.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Connected clients"})]})]}),e.jsxs(x,{children:[e.jsx(f,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium",children:"Memory Usage"})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{children:["Store: ",De," MB"]}),e.jsxs("span",{children:["Temp: ",Qe," MB"]})]}),e.jsx(H,{value:(De+Qe)/ie*100,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Limit: ",ie," MB"]})]})})]})]}),e.jsxs(Ps,{defaultValue:"broker",className:"space-y-4",children:[e.jsxs(Ds,{className:"flex w-full flex-wrap gap-1",children:[e.jsxs(R,{value:"broker",className:"gap-2",children:[e.jsx(Qs,{className:"h-4 w-4"}),"Broker"]}),e.jsxs(R,{value:"queues",className:"gap-2",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Queues (",p.length,")"]}),e.jsxs(R,{value:"topics",className:"gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Topics (",v.length,")"]}),e.jsxs(R,{value:"connections",className:"gap-2",children:[e.jsx(Ts,{className:"h-4 w-4"}),"Connections (",O.length,")"]}),e.jsxs(R,{value:"subscriptions",className:"gap-2",children:[e.jsx(qs,{className:"h-4 w-4"}),"Subscriptions (",k.length,")"]}),e.jsxs(R,{value:"dlq",className:"gap-2",children:[e.jsx(Ms,{className:"h-4 w-4"}),"Dead Letter Queue"]}),e.jsxs(R,{value:"security",className:"gap-2",children:[e.jsx(As,{className:"h-4 w-4"}),"Security"]})]}),e.jsxs(q,{value:"broker",className:"space-y-4",children:[e.jsxs(B,{className:"mb-4",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx(U,{children:"Broker Configuration"}),e.jsx(I,{className:"text-sm",children:"Configure connection settings, protocols, and broker limits. These settings affect how clients connect to the broker and how messages are processed."})]}),e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsx(y,{children:"Broker Configuration"}),e.jsx(Q,{children:"Basic broker settings and connection parameters"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"brokerName",children:"Broker Name"}),e.jsx(i,{id:"brokerName",value:ke,onChange:s=>d({brokerName:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"brokerUrl",children:"Broker URL"}),e.jsx(i,{id:"brokerUrl",value:ss,onChange:s=>d({brokerUrl:s.target.value}),placeholder:"tcp://localhost:61616"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"protocol",children:"Protocol"}),e.jsxs(ve,{value:rs,onValueChange:s=>d({protocol:s}),children:[e.jsx(fe,{children:e.jsx(ye,{})}),e.jsxs(Ne,{children:[e.jsx(C,{value:"openwire",children:"OpenWire"}),e.jsx(C,{value:"amqp",children:"AMQP"}),e.jsx(C,{value:"mqtt",children:"MQTT"}),e.jsx(C,{value:"stomp",children:"STOMP"}),e.jsx(C,{value:"ws",children:"WebSocket"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"port",children:"Port"}),e.jsx(i,{id:"port",type:"number",value:ts,onChange:s=>d({port:Number(s.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"username",children:"Username"}),e.jsx(i,{id:"username",value:as,onChange:s=>d({username:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"password",children:"Password"}),e.jsx(i,{id:"password",type:"password",value:ls,onChange:s=>d({password:s.target.value})})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"persistenceEnabled",children:"Persistence Enabled"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Persist messages to disk"})]}),e.jsx(re,{id:"persistenceEnabled",checked:is,onCheckedChange:s=>d({persistenceEnabled:s})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"maxConnections",children:"Max Connections"}),e.jsx(i,{id:"maxConnections",type:"number",value:ns,onChange:s=>d({maxConnections:Number(s.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"memoryLimit",children:"Memory Limit (MB)"}),e.jsx(i,{id:"memoryLimit",type:"number",value:ie,onChange:s=>d({memoryLimit:Number(s.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"consumptionRate",children:"Consumption Rate (msgs/sec per consumer)"}),e.jsx(i,{id:"consumptionRate",type:"number",min:"1",value:Pe,onChange:s=>d({consumptionRate:Number(s.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of messages per second that each consumer can process"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"deadLetterQueue",children:"Dead Letter Queue Name"}),e.jsx(i,{id:"deadLetterQueue",value:ne,onChange:s=>d({deadLetterQueue:s.target.value||"DLQ"}),placeholder:"DLQ"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Name of the Dead Letter Queue for failed messages (default: DLQ)"})]})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Advanced Performance Settings"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"avgMessageSize",children:"Average Message Size (bytes)"}),e.jsx(i,{id:"avgMessageSize",type:"number",min:"1",value:cs,onChange:s=>d({avgMessageSize:Number(s.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average size of messages in bytes (used for throughput calculation)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"memoryPressureThreshold",children:"Memory Pressure Threshold"}),e.jsx(i,{id:"memoryPressureThreshold",type:"number",min:"0",max:"1",step:"0.1",value:ds,onChange:s=>d({memoryPressureThreshold:Number(s.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Memory usage threshold (0.0-1.0) that triggers additional latency"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"queueLatencyBase",children:"Queue Latency Base (ms)"}),e.jsx(i,{id:"queueLatencyBase",type:"number",min:"0",value:os,onChange:s=>d({queueLatencyBase:Number(s.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Base latency in milliseconds added to queue latency calculation"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"queueLatencyFactor",children:"Queue Latency Factor"}),e.jsx(i,{id:"queueLatencyFactor",type:"number",min:"0",step:"0.1",value:ms,onChange:s=>d({queueLatencyFactor:Number(s.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Factor for calculating latency based on queue depth (ms per 1000 messages)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Protocol Latencies (ms)"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Configure base latency for each protocol"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["openwire","amqp","mqtt","stomp","ws"].map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`protocol-${s}`,className:"text-xs capitalize",children:s==="ws"?"WebSocket":s.toUpperCase()}),e.jsx(i,{id:`protocol-${s}`,type:"number",min:"0",value:Te[s]||5,onChange:a=>{const r={...Te};r[s]=Number(a.target.value),d({protocolLatencies:r})}})]},s))})]})]})]})]})]}),e.jsxs(q,{value:"queues",className:"space-y-4",children:[e.jsxs(B,{className:"mb-4",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx(U,{children:"Queue Configuration"}),e.jsxs(I,{className:"text-sm space-y-1",children:[e.jsx("p",{children:"Configure queues for point-to-point messaging. Each queue represents a destination where producers send messages and consumers receive them."}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("strong",{children:"Tip:"})," To send messages to a queue, connect a producer component and specify the queue name in the connection settings."]})]})]}),e.jsxs(x,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Queues"}),e.jsx(Q,{children:"Configure message queues (queues are created dynamically by clients at runtime)"})]}),e.jsxs(u,{onClick:us,size:"sm",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Add Queue Config"]})]})}),e.jsxs(h,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(i,{placeholder:"Search queues...",value:me,onChange:s=>js(s.target.value),className:"pl-9"})]}),me&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Showing ",Ae.length," of ",p.length," queues"]})]}),e.jsx("div",{className:"space-y-4",children:Ae.map((s,a)=>{const r=p.findIndex(c=>c.name===s.name),t=s.queueSize||0;s.consumerCount;let n="empty",m="bg-gray-500";return t===0?(n="empty",m="bg-gray-500"):t<100?(n="normal",m="bg-green-500"):t<1e3?(n="warning",m="bg-yellow-500"):(n="full",m="bg-red-500"),e.jsxs(x,{className:"border-l-4 border-l-blue-500",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(Xe,{className:"h-5 w-5 text-blue-500"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(G,{variant:"outline",className:m,children:n.charAt(0).toUpperCase()+n.slice(1)})}),Re===r?e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{value:s.name,onChange:c=>b(r,"name",c.target.value),placeholder:"queue-name",className:`flex-1 ${w[r]?"border-red-500":""}`,onBlur:()=>{w[r]||W(null)},onKeyDown:c=>{if(c.key==="Enter"&&!w[r]&&W(null),c.key==="Escape"){W(null);const N={...w};delete N[r],de(N)}},autoFocus:!0}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>{w[r]||W(null)},disabled:!!w[r],children:e.jsx(Ce,{className:"h-3 w-3"})})]}),w[r]&&e.jsx("p",{className:"text-xs text-red-500",children:w[r]})]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"text-base",children:s.name}),e.jsx(u,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>W(r),children:e.jsx(we,{className:"h-3 w-3"})})]})]}),Re!==r&&e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>Cs(r),disabled:p.length===1,children:e.jsx(ae,{className:"h-4 w-4"})})]})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[t>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Queue Size"}),e.jsxs("span",{className:"font-medium",children:[t," messages"]})]}),e.jsx(H,{value:Math.min(100,t/1e3*100),className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Queue Size"}),e.jsx("p",{className:"text-lg font-semibold",children:s.queueSize||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Consumers"}),e.jsx("p",{className:"text-lg font-semibold",children:s.consumerCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enqueued"}),e.jsx("p",{className:"text-lg font-semibold",children:(s.enqueueCount||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dequeued"}),e.jsx("p",{className:"text-lg font-semibold",children:(s.dequeueCount||0).toLocaleString()})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`queue-memory-limit-${r}`,className:"text-xs",children:"Memory Limit (MB)"}),e.jsx(i,{id:`queue-memory-limit-${r}`,type:"number",min:"0",value:s.memoryLimit||"",onChange:c=>b(r,"memoryLimit",c.target.value?Number(c.target.value):void 0),placeholder:"Unlimited"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum memory usage for this queue (0 = unlimited)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`queue-prefetch-${r}`,className:"text-xs",children:"Prefetch Size"}),e.jsx(i,{id:`queue-prefetch-${r}`,type:"number",min:"0",value:s.prefetch||"",onChange:c=>b(r,"prefetch",c.target.value?Number(c.target.value):void 0),placeholder:"Default"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of messages to prefetch per consumer (0 = default)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`queue-priority-${r}`,className:"text-xs",children:"Default Priority (0-9)"}),e.jsx(i,{id:`queue-priority-${r}`,type:"number",min:"0",max:"9",value:s.defaultPriority!==void 0?s.defaultPriority:"",onChange:c=>b(r,"defaultPriority",c.target.value?Number(c.target.value):void 0),placeholder:"Default"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Default message priority for this queue (0 = lowest, 9 = highest)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`queue-ttl-${r}`,className:"text-xs",children:"Default TTL (seconds)"}),e.jsx(i,{id:`queue-ttl-${r}`,type:"number",min:"0",value:s.defaultTTL!==void 0?s.defaultTTL:"",onChange:c=>b(r,"defaultTTL",c.target.value?Number(c.target.value):void 0),placeholder:"Unlimited"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Default message time-to-live in seconds (0 = unlimited)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`queue-max-redeliveries-${r}`,className:"text-xs",children:"Max Redeliveries"}),e.jsx(i,{id:`queue-max-redeliveries-${r}`,type:"number",min:"0",value:s.redeliveryPolicy?.maxRedeliveries!==void 0?s.redeliveryPolicy.maxRedeliveries:s.maxRedeliveries!==void 0?s.maxRedeliveries:"",onChange:c=>{const N=c.target.value?Number(c.target.value):void 0,M=s.redeliveryPolicy||{};b(r,"redeliveryPolicy",{...M,maxRedeliveries:N}),s.redeliveryPolicy||b(r,"maxRedeliveries",N)},placeholder:"6 (default)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum number of redelivery attempts before sending to DLQ (default: 6)"})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"text-sm font-semibold",children:"Redelivery Policy"}),e.jsx(He,{children:e.jsxs(Ke,{children:[e.jsx(Ze,{children:e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(Je,{children:e.jsx("p",{className:"text-xs",children:"Configure how failed messages are redelivered"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`queue-initial-redelivery-delay-${r}`,className:"text-xs",children:"Initial Redelivery Delay (ms)"}),e.jsx(i,{id:`queue-initial-redelivery-delay-${r}`,type:"number",min:"0",value:s.redeliveryPolicy?.initialRedeliveryDelay!==void 0?s.redeliveryPolicy.initialRedeliveryDelay:"",onChange:c=>{const N=c.target.value?Number(c.target.value):void 0,M=s.redeliveryPolicy||{};b(r,"redeliveryPolicy",{...M,initialRedeliveryDelay:N})},placeholder:"1000 (default)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Initial delay before redelivery in milliseconds (default: 1000)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`queue-maximum-redelivery-delay-${r}`,className:"text-xs",children:"Maximum Redelivery Delay (ms)"}),e.jsx(i,{id:`queue-maximum-redelivery-delay-${r}`,type:"number",min:"0",value:s.redeliveryPolicy?.maximumRedeliveryDelay!==void 0?s.redeliveryPolicy.maximumRedeliveryDelay:"",onChange:c=>{const N=c.target.value?Number(c.target.value):void 0,M=s.redeliveryPolicy||{};b(r,"redeliveryPolicy",{...M,maximumRedeliveryDelay:N})},placeholder:"60000 (default)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum delay before redelivery in milliseconds (default: 60000)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`queue-backoff-multiplier-${r}`,className:"text-xs",children:"Backoff Multiplier"}),e.jsx(i,{id:`queue-backoff-multiplier-${r}`,type:"number",min:"1",step:"0.1",value:s.redeliveryPolicy?.backOffMultiplier!==void 0?s.redeliveryPolicy.backOffMultiplier:"",onChange:c=>{const N=c.target.value?Number(c.target.value):void 0,M=s.redeliveryPolicy||{};b(r,"redeliveryPolicy",{...M,backOffMultiplier:N})},placeholder:"2 (default)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Multiplier for exponential backoff (default: 2)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx(re,{id:`queue-use-exponential-backoff-${r}`,checked:s.redeliveryPolicy?.useExponentialBackOff??!1,onCheckedChange:c=>{const N=s.redeliveryPolicy||{};b(r,"redeliveryPolicy",{...N,useExponentialBackOff:c})}}),e.jsx(l,{htmlFor:`queue-use-exponential-backoff-${r}`,className:"text-xs cursor-pointer",children:"Use Exponential Backoff"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable exponential backoff for redelivery delay (default: false)"})]})]})]}),s.memoryUsage!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"Memory Usage"}),e.jsxs("span",{children:[s.memoryUsage," MB (",s.memoryPercent||0,"%)"]})]}),e.jsx(H,{value:s.memoryPercent||0,className:"h-2"})]})]})})]},r)})})]})]})]}),e.jsxs(q,{value:"topics",className:"space-y-4",children:[e.jsxs(B,{className:"mb-4",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx(U,{children:"Topic Configuration"}),e.jsxs(I,{className:"text-sm space-y-1",children:[e.jsx("p",{children:"Configure topics for publish-subscribe messaging. Publishers send messages to topics, and all subscribers receive copies of the messages."}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("strong",{children:"Tip:"})," To publish messages, connect a producer component and specify the topic name. Multiple consumers can subscribe to the same topic."]})]})]}),e.jsxs(x,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Topics"}),e.jsx(Q,{children:"Configure publish-subscribe topics (topics are created dynamically by clients at runtime)"})]}),e.jsxs(u,{onClick:hs,size:"sm",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Add Topic Config"]})]})}),e.jsxs(h,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(i,{placeholder:"Search topics...",value:ue,onChange:s=>gs(s.target.value),className:"pl-9"})]}),ue&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Showing ",Fe.length," of ",v.length," topics"]})]}),e.jsx("div",{className:"space-y-4",children:Fe.map((s,a)=>{const r=v.findIndex(t=>t.name===s.name);return s.subscriberCount,e.jsxs(x,{className:"border-l-4 border-l-green-500",children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(Be,{className:"h-5 w-5 text-green-500"}),qe===r?e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{value:s.name,onChange:t=>L(r,"name",t.target.value),placeholder:"topic-name",className:`flex-1 ${S[r]?"border-red-500":""}`,onBlur:()=>{S[r]||V(null)},onKeyDown:t=>{if(t.key==="Enter"&&!S[r]&&V(null),t.key==="Escape"){V(null);const n={...S};delete n[r],oe(n)}},autoFocus:!0}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>{S[r]||V(null)},disabled:!!S[r],children:e.jsx(Ce,{className:"h-3 w-3"})})]}),S[r]&&e.jsx("p",{className:"text-xs text-red-500",children:S[r]})]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"text-base",children:s.name}),e.jsx(u,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>V(r),children:e.jsx(we,{className:"h-3 w-3"})})]})]}),qe!==r&&e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>ws(r),children:e.jsx(ae,{className:"h-4 w-4"})})]})}),e.jsxs(h,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Subscribers"}),e.jsx("p",{className:"text-lg font-semibold",children:s.subscriberCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enqueued"}),e.jsx("p",{className:"text-lg font-semibold",children:(s.enqueueCount||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dequeued"}),e.jsx("p",{className:"text-lg font-semibold",children:(s.dequeueCount||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Memory"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.memoryUsage||0," MB"]})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`topic-memory-limit-${r}`,className:"text-xs",children:"Memory Limit (MB)"}),e.jsx(i,{id:`topic-memory-limit-${r}`,type:"number",min:"0",value:s.memoryLimit||"",onChange:t=>L(r,"memoryLimit",t.target.value?Number(t.target.value):void 0),placeholder:"Unlimited"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum memory usage for this topic (0 = unlimited)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`topic-priority-${r}`,className:"text-xs",children:"Default Priority (0-9)"}),e.jsx(i,{id:`topic-priority-${r}`,type:"number",min:"0",max:"9",value:s.defaultPriority!==void 0?s.defaultPriority:"",onChange:t=>L(r,"defaultPriority",t.target.value?Number(t.target.value):void 0),placeholder:"Default"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Default message priority for this topic (0 = lowest, 9 = highest)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`topic-ttl-${r}`,className:"text-xs",children:"Default TTL (seconds)"}),e.jsx(i,{id:`topic-ttl-${r}`,type:"number",min:"0",value:s.defaultTTL!==void 0?s.defaultTTL:"",onChange:t=>L(r,"defaultTTL",t.target.value?Number(t.target.value):void 0),placeholder:"Unlimited"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Default message time-to-live in seconds (0 = unlimited)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`topic-max-redeliveries-${r}`,className:"text-xs",children:"Max Redeliveries"}),e.jsx(i,{id:`topic-max-redeliveries-${r}`,type:"number",min:"0",value:s.redeliveryPolicy?.maxRedeliveries!==void 0?s.redeliveryPolicy.maxRedeliveries:s.maxRedeliveries!==void 0?s.maxRedeliveries:"",onChange:t=>{const n=t.target.value?Number(t.target.value):void 0,m=s.redeliveryPolicy||{};L(r,"redeliveryPolicy",{...m,maxRedeliveries:n}),s.redeliveryPolicy||L(r,"maxRedeliveries",n)},placeholder:"6 (default)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum number of redelivery attempts before sending to DLQ (default: 6)"})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"text-sm font-semibold",children:"Redelivery Policy"}),e.jsx(He,{children:e.jsxs(Ke,{children:[e.jsx(Ze,{children:e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(Je,{children:e.jsx("p",{className:"text-xs",children:"Configure how failed messages are redelivered"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`topic-initial-redelivery-delay-${r}`,className:"text-xs",children:"Initial Redelivery Delay (ms)"}),e.jsx(i,{id:`topic-initial-redelivery-delay-${r}`,type:"number",min:"0",value:s.redeliveryPolicy?.initialRedeliveryDelay!==void 0?s.redeliveryPolicy.initialRedeliveryDelay:"",onChange:t=>{const n=t.target.value?Number(t.target.value):void 0,m=s.redeliveryPolicy||{};L(r,"redeliveryPolicy",{...m,initialRedeliveryDelay:n})},placeholder:"1000 (default)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Initial delay before redelivery in milliseconds (default: 1000)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`topic-maximum-redelivery-delay-${r}`,className:"text-xs",children:"Maximum Redelivery Delay (ms)"}),e.jsx(i,{id:`topic-maximum-redelivery-delay-${r}`,type:"number",min:"0",value:s.redeliveryPolicy?.maximumRedeliveryDelay!==void 0?s.redeliveryPolicy.maximumRedeliveryDelay:"",onChange:t=>{const n=t.target.value?Number(t.target.value):void 0,m=s.redeliveryPolicy||{};L(r,"redeliveryPolicy",{...m,maximumRedeliveryDelay:n})},placeholder:"60000 (default)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum delay before redelivery in milliseconds (default: 60000)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`topic-backoff-multiplier-${r}`,className:"text-xs",children:"Backoff Multiplier"}),e.jsx(i,{id:`topic-backoff-multiplier-${r}`,type:"number",min:"1",step:"0.1",value:s.redeliveryPolicy?.backOffMultiplier!==void 0?s.redeliveryPolicy.backOffMultiplier:"",onChange:t=>{const n=t.target.value?Number(t.target.value):void 0,m=s.redeliveryPolicy||{};L(r,"redeliveryPolicy",{...m,backOffMultiplier:n})},placeholder:"2 (default)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Multiplier for exponential backoff (default: 2)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx(re,{id:`topic-use-exponential-backoff-${r}`,checked:s.redeliveryPolicy?.useExponentialBackOff??!1,onCheckedChange:t=>{const n=s.redeliveryPolicy||{};L(r,"redeliveryPolicy",{...n,useExponentialBackOff:t})}}),e.jsx(l,{htmlFor:`topic-use-exponential-backoff-${r}`,className:"text-xs cursor-pointer",children:"Use Exponential Backoff"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable exponential backoff for redelivery delay (default: false)"})]})]})]}),s.memoryPercent!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"Memory Usage"}),e.jsxs("span",{children:[s.memoryPercent,"%"]})]}),e.jsx(H,{value:s.memoryPercent,className:"h-2"})]})]})]},r)})})]})]})]}),e.jsx(q,{value:"connections",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(f,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(y,{children:"Connections"}),e.jsx(Q,{children:"Active client connections to the broker (read-only, connections are created by clients)"})]})})}),e.jsxs(h,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(i,{placeholder:"Search connections...",value:Z,onChange:s=>vs(s.target.value),className:"pl-9"})]}),Z&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Showing ",je.length," of ",O.length," connections"]})]}),je.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:O.length===0?"No active connections":"No connections match your search"}):e.jsx("div",{className:"space-y-2",children:je.map(s=>e.jsx(x,{className:"border-l-4 border-l-purple-500",children:e.jsxs(h,{className:"pt-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Client ID"}),e.jsx("p",{className:"text-sm font-medium",children:s.clientId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"User"}),e.jsx("p",{className:"text-sm font-medium",children:s.userName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Protocol"}),e.jsx(G,{variant:"outline",children:s.protocol||"OpenWire"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Messages"}),e.jsx("p",{className:"text-sm font-medium",children:s.messageCount||0})]})]})}),s.remoteAddress&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Remote: ",s.remoteAddress]})]})},s.id))})]})]})}),e.jsx(q,{value:"subscriptions",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(f,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(y,{children:"Subscriptions"}),e.jsx(Q,{children:"Active topic subscriptions (read-only, subscriptions are created by clients)"})]})})}),e.jsxs(h,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(i,{placeholder:"Search subscriptions...",value:J,onChange:s=>fs(s.target.value),className:"pl-9"})]}),J&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Showing ",ge.length," of ",k.length," subscriptions"]})]}),ge.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:k.length===0?"No active subscriptions":"No subscriptions match your search"}):e.jsx("div",{className:"space-y-2",children:ge.filter(s=>k.findIndex(a=>a.id===s.id)!==-1).map(s=>{const a=k.findIndex(n=>n.id===s.id),r=(n,m)=>{const c=[...k];c[a]={...c[a],[n]:m},d({subscriptions:c})},t=_[a]!==void 0?_[a]:s.selector||"";return e.jsx(x,{className:"border-l-4 border-l-orange-500",children:e.jsxs(h,{className:"pt-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Destination"}),e.jsx("p",{className:"text-sm font-medium",children:s.destination})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Client ID"}),e.jsx("p",{className:"text-sm font-medium",children:s.clientId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"}),e.jsx("p",{className:"text-sm font-medium",children:s.pendingQueueSize||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dispatched"}),e.jsx("p",{className:"text-sm font-medium",children:s.dispatchedQueueSize||0})]})]})}),e.jsx(P,{className:"my-3"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:`sub-selector-${a}`,className:"text-xs",children:"Message Selector"}),ys===a?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{id:`sub-selector-${a}`,value:t,onChange:n=>{pe({..._,[a]:n.target.value})},placeholder:"e.g., priority > 5 OR type = 'order'",className:"flex-1",onKeyDown:n=>{n.key==="Enter"&&(r("selector",t||void 0),ee(null)),n.key==="Escape"&&(pe({..._,[a]:s.selector||""}),ee(null))},autoFocus:!0}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>{r("selector",t||void 0),ee(null)},children:e.jsx(Ce,{className:"h-3 w-3"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{value:s.selector||"(no selector)",readOnly:!0,className:"flex-1 bg-muted"}),e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>{pe({..._,[a]:s.selector||""}),ee(a)},children:e.jsx(we,{className:"h-3 w-3"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:`SQL-like selector to filter messages (e.g., "priority > 5", "type = 'order'")`})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:`sub-durable-${a}`,className:"text-xs",children:"Durable Subscription"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Subscription survives client disconnection"})]}),e.jsx(re,{id:`sub-durable-${a}`,checked:s.durable||!1,onCheckedChange:n=>r("durable",n)})]})]})]})},s.id)})})]})]})}),e.jsxs(q,{value:"dlq",className:"space-y-4",children:[e.jsxs(B,{className:"mb-4",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx(U,{children:"Dead Letter Queue (DLQ)"}),e.jsxs(I,{className:"text-sm space-y-1",children:[e.jsx("p",{children:"Messages that fail delivery after exceeding the maximum redelivery attempts are moved to the Dead Letter Queue."}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("strong",{children:"Note:"})," Configure maxRedeliveries for queues and topics to control when messages are sent to DLQ."]})]})]}),e.jsxs(x,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Dead Letter Queue"}),e.jsx(Q,{children:"Messages that failed delivery after max redeliveries"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{htmlFor:"dlq-name",className:"text-xs",children:"DLQ Name:"}),e.jsx(i,{id:"dlq-name",value:ne,onChange:s=>d({deadLetterQueue:s.target.value||"DLQ"}),className:"w-32",placeholder:"DLQ"}),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>{const s=se.getActiveMQRoutingEngine(F);s&&(s.clearDeadLetterQueue(),A("Dead Letter Queue cleared"))},children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Clear DLQ"]})]})]})}),e.jsx(h,{children:(()=>{const s=se.getActiveMQRoutingEngine(F),a=s?s.getDeadLetterQueueMessages():[],r=s?s.getDeadLetterQueueSize():0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"DLQ Size"}),e.jsx("span",{className:"text-lg font-bold",children:r})]}),e.jsx(H,{value:Math.min(100,r/1e3*100),className:"h-2"})]}),r===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No messages in Dead Letter Queue"}):e.jsxs("div",{className:"space-y-2",children:[a.slice(0,100).map(t=>e.jsx(x,{className:"border-l-4 border-l-red-500",children:e.jsxs(h,{className:"pt-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Message ID"}),e.jsxs("p",{className:"text-sm font-mono",children:[t.id.slice(0,20),"..."]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Original Destination"}),e.jsx("p",{className:"text-sm font-medium",children:t.headers?.originalDestination||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reason"}),e.jsx(G,{variant:"destructive",children:t.headers?.reason||"unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery Count"}),e.jsx("p",{className:"text-sm font-medium",children:t.deliveryCount||0})]})]}),t.headers?.movedToDLQAt&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Moved to DLQ: ",new Date(t.headers.movedToDLQAt).toLocaleString()]})]})},t.id)),r>100&&e.jsxs("p",{className:"text-xs text-muted-foreground text-center py-2",children:["Showing first 100 of ",r," messages"]})]})]})})()})]})]}),e.jsxs(q,{value:"security",className:"space-y-4",children:[e.jsxs(B,{className:"mb-4",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx(U,{children:"Access Control Lists (ACLs)"}),e.jsxs(I,{className:"text-sm space-y-1",children:[e.jsx("p",{children:"Configure permissions to control access to queues and topics. ACLs are enforced during simulation."}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("strong",{children:"Format:"})," Resource should be in format ",e.jsx("code",{children:"queue://name"})," or ",e.jsx("code",{children:"topic://name"})," (wildcard ",e.jsx("code",{children:"*"})," supported). Operations: ",e.jsx("code",{children:"read"}),", ",e.jsx("code",{children:"write"}),", ",e.jsx("code",{children:"admin"}),", ",e.jsx("code",{children:"create"}),".",e.jsx("strong",{children:"Deny"})," takes precedence over ",e.jsx("strong",{children:"Allow"}),"."]})]})]}),e.jsxs(x,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Access Control Lists (ACLs)"}),e.jsx(Q,{children:"Configure permissions for users and resources"})]}),e.jsxs(u,{onClick:()=>ce(!0),size:"sm",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Add ACL"]})]})}),e.jsxs(h,{children:[Me&&e.jsxs(x,{className:"mb-4 border-primary",children:[e.jsxs(f,{children:[e.jsx(y,{children:"Create ACL Rule"}),e.jsx(Q,{children:"Configure access control for queues and topics"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"acl-principal",children:"Principal (User/Group)"}),e.jsx(i,{id:"acl-principal",value:j.principal,onChange:s=>$({...j,principal:s.target.value}),placeholder:"user1 or * for all"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"User or group name, use * for all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"acl-resource",children:"Resource"}),e.jsx(i,{id:"acl-resource",value:j.resource,onChange:s=>{$({...j,resource:s.target.value});const a=Ee(s.target.value);he(a)},placeholder:"queue://orders or topic://events",className:xe?"border-red-500":""}),xe?e.jsx("p",{className:"text-xs text-red-500",children:xe}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: queue://name or topic://name (use * for all)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"acl-operation",children:"Operation"}),e.jsxs(ve,{value:j.operation,onValueChange:s=>$({...j,operation:s}),children:[e.jsx(fe,{id:"acl-operation",children:e.jsx(ye,{})}),e.jsxs(Ne,{children:[e.jsx(C,{value:"read",children:"Read"}),e.jsx(C,{value:"write",children:"Write"}),e.jsx(C,{value:"admin",children:"Admin"}),e.jsx(C,{value:"create",children:"Create"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"acl-permission",children:"Permission"}),e.jsxs(ve,{value:j.permission,onValueChange:s=>$({...j,permission:s}),children:[e.jsx(fe,{id:"acl-permission",children:e.jsx(ye,{})}),e.jsxs(Ne,{children:[e.jsx(C,{value:"allow",children:"Allow"}),e.jsx(C,{value:"deny",children:"Deny"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{onClick:Ns,disabled:!j.principal||!j.resource,children:"Create ACL"}),e.jsx(u,{variant:"outline",onClick:()=>{ce(!1),$({principal:"",resource:"",operation:"read",permission:"allow"})},children:"Cancel"})]})]})]}),K.length===0&&!Me?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No ACLs configured"}):e.jsx("div",{className:"space-y-2",children:K.map((s,a)=>e.jsx(x,{className:"border-l-4 border-l-red-500",children:e.jsx(h,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Principal"}),e.jsx("p",{className:"text-sm font-medium",children:s.principal})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Resource"}),e.jsx("p",{className:"text-sm font-medium",children:s.resource})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Operation"}),e.jsx(G,{variant:"outline",children:s.operation})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Permission"}),e.jsx(G,{variant:s.permission==="allow"?"default":"destructive",children:s.permission})]})]}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>bs(a),children:e.jsx(ae,{className:"h-4 w-4"})})]})})},a))})]})]})]})]})]}),e.jsx(Ue,{open:T!==null,onOpenChange:s=>!s&&X(null),children:e.jsxs(Ie,{children:[e.jsxs(Oe,{children:[e.jsx(We,{children:"Delete Queue"}),e.jsxs(Ve,{children:['Are you sure you want to delete the queue "',p[T||0]?.name,'"?',p[T||0]&&(p[T||0].queueSize||0)>0&&e.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx(_e,{className:"h-4 w-4 inline mr-1"}),"This queue contains ",p[T||0].queueSize," messages. All messages will be lost."]})})]})]}),e.jsxs(Ge,{children:[e.jsx(u,{variant:"outline",onClick:()=>X(null),children:"Cancel"}),e.jsx(u,{variant:"destructive",onClick:()=>T!==null&&$e(T),children:"Delete"})]})]})}),e.jsx(Ue,{open:z!==null,onOpenChange:s=>!s&&Y(null),children:e.jsxs(Ie,{children:[e.jsxs(Oe,{children:[e.jsx(We,{children:"Delete Topic"}),e.jsxs(Ve,{children:['Are you sure you want to delete the topic "',v[z||0]?.name,'"?',v[z||0]&&k.some(s=>s.destination===v[z||0]?.name)&&e.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx(_e,{className:"h-4 w-4 inline mr-1"}),"This topic has active subscriptions. Subscribers will lose access to this topic."]})})]})]}),e.jsxs(Ge,{children:[e.jsx(u,{variant:"outline",onClick:()=>Y(null),children:"Cancel"}),e.jsx(u,{variant:"destructive",onClick:()=>z!==null&&ze(z),children:"Delete"})]})]})})]})}export{Hs as ActiveMQConfigAdvanced};

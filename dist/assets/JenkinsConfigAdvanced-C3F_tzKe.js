import{E as Xs,aa as R,a9 as Gs,r as f,u as yt,_ as bt,j as e,V as wt,A as xs,B as se,S as qe,C as A,e as F,f as I,k as L,T as Is,a as Vs,b as Q,c as Ct,d as Z,h as q,i as y,P as fe,N as Pt,U as Ts,F as At,m as ge,t as le,n as Ee,o as Se,p as De,q as Oe,s as T,K as Bt,I as E,a0 as zs,M as kt,L as v,af as $s,D as Le,v as Re,w as Fe,x as Ie,y as Ve,l as Xe,z as Ge,a8 as Et,X as St}from"./index-2Qx8irw2.js";import{P as Te}from"./progress-Bivej_Y2.js";import{T as hs}from"./textarea-BSFjV7Yh.js";import{u as Dt}from"./use-toast-BJ90xuCM.js";import{G as ps}from"./git-branch-BRa9iWFO.js";import{P as Ye}from"./package-BbXkFGaz.js";import{S as js}from"./server-j78B0AXC.js";import{U as _s}from"./users-B0LkoMSP.js";import{C as Ot}from"./chart-column-CuhAac4D.js";import{T as Lt}from"./trending-up-Bm6Ln2ik.js";import{f as Ne,L as ze,M as Qe,n as be,C as fs,A as Rt,l as ye,h as Ms,N as Ft,m as Us,O as It,o as Vt,u as Tt,i as bs,G as zt,j as Js,P as Ks,D as $t,y as _t,X as Ze,Y as es,Q as Mt,R as gs,J as vs,B as Ns,K as ys,F as Ut,I as Jt,E as Kt,H as Wt}from"./BarChart-CSIuYazv.js";import{C as Ws}from"./clock-DYxsyur0.js";const Ht=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],qt=Xs("history",Ht);const Xt=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Gt=Xs("loader-circle",Xt);var Yt=["layout","type","stroke","connectNulls","isRange","ref"],Qt=["key"],Ys;function we(a){"@babel/helpers - typeof";return we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},we(a)}function Qs(a,c){if(a==null)return{};var d=Zt(a,c),l,m;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);for(m=0;m<u.length;m++)l=u[m],!(c.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(a,l)&&(d[l]=a[l])}return d}function Zt(a,c){if(a==null)return{};var d={};for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l)){if(c.indexOf(l)>=0)continue;d[l]=a[l]}return d}function ve(){return ve=Object.assign?Object.assign.bind():function(a){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&(a[l]=d[l])}return a},ve.apply(this,arguments)}function Hs(a,c){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);c&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable})),d.push.apply(d,l)}return d}function me(a){for(var c=1;c<arguments.length;c++){var d=arguments[c]!=null?arguments[c]:{};c%2?Hs(Object(d),!0).forEach(function(l){ie(a,l,d[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):Hs(Object(d)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(d,l))})}return a}function en(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}function qs(a,c){for(var d=0;d<c.length;d++){var l=c[d];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,et(l.key),l)}}function sn(a,c,d){return c&&qs(a.prototype,c),d&&qs(a,d),Object.defineProperty(a,"prototype",{writable:!1}),a}function tn(a,c,d){return c=ss(c),nn(a,Zs()?Reflect.construct(c,d||[],ss(a).constructor):c.apply(a,d))}function nn(a,c){if(c&&(we(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return an(a)}function an(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Zs(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zs=function(){return!!a})()}function ss(a){return ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},ss(a)}function rn(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),c&&ws(a,c)}function ws(a,c){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,m){return l.__proto__=m,l},ws(a,c)}function ie(a,c,d){return c=et(c),c in a?Object.defineProperty(a,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[c]=d,a}function et(a){var c=ln(a,"string");return we(c)=="symbol"?c:c+""}function ln(a,c){if(we(a)!="object"||!a)return a;var d=a[Symbol.toPrimitive];if(d!==void 0){var l=d.call(a,c);if(we(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var ae=(function(a){function c(){var d;en(this,c);for(var l=arguments.length,m=new Array(l),u=0;u<l;u++)m[u]=arguments[u];return d=tn(this,c,[].concat(m)),ie(d,"state",{isAnimationFinished:!0}),ie(d,"id",Tt("recharts-area-")),ie(d,"handleAnimationEnd",function(){var x=d.props.onAnimationEnd;d.setState({isAnimationFinished:!0}),bs(x)&&x()}),ie(d,"handleAnimationStart",function(){var x=d.props.onAnimationStart;d.setState({isAnimationFinished:!1}),bs(x)&&x()}),d}return rn(c,a),sn(c,[{key:"renderDots",value:function(l,m,u){var x=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(x&&!o)return null;var j=this.props,p=j.dot,w=j.points,g=j.dataKey,B=Ne(this.props,!1),S=Ne(p,!0),K=w.map(function(z,X){var _=me(me(me({key:"dot-".concat(X),r:3},B),S),{},{index:X,cx:z.x,cy:z.y,dataKey:g,value:z.value,payload:z.payload,points:w});return c.renderDotItem(p,_)}),W={clipPath:l?"url(#clipPath-".concat(m?"":"dots-").concat(u,")"):null};return R.createElement(ze,ve({className:"recharts-area-dots"},W),K)}},{key:"renderHorizontalRect",value:function(l){var m=this.props,u=m.baseLine,x=m.points,o=m.strokeWidth,j=x[0].x,p=x[x.length-1].x,w=l*Math.abs(j-p),g=Qe(x.map(function(B){return B.y||0}));return be(u)&&typeof u=="number"?g=Math.max(u,g):u&&Array.isArray(u)&&u.length&&(g=Math.max(Qe(u.map(function(B){return B.y||0})),g)),be(g)?R.createElement("rect",{x:j<p?j:j-w,y:0,width:w,height:Math.floor(g+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(l){var m=this.props,u=m.baseLine,x=m.points,o=m.strokeWidth,j=x[0].y,p=x[x.length-1].y,w=l*Math.abs(j-p),g=Qe(x.map(function(B){return B.x||0}));return be(u)&&typeof u=="number"?g=Math.max(u,g):u&&Array.isArray(u)&&u.length&&(g=Math.max(Qe(u.map(function(B){return B.x||0})),g)),be(g)?R.createElement("rect",{x:0,y:j<p?j:j-w,width:g+(o?parseInt("".concat(o),10):1),height:Math.floor(w)}):null}},{key:"renderClipRect",value:function(l){var m=this.props.layout;return m==="vertical"?this.renderVerticalRect(l):this.renderHorizontalRect(l)}},{key:"renderAreaStatically",value:function(l,m,u,x){var o=this.props,j=o.layout,p=o.type,w=o.stroke,g=o.connectNulls,B=o.isRange;o.ref;var S=Qs(o,Yt);return R.createElement(ze,{clipPath:u?"url(#clipPath-".concat(x,")"):null},R.createElement(fs,ve({},Ne(S,!0),{points:l,connectNulls:g,type:p,baseLine:m,layout:j,stroke:"none",className:"recharts-area-area"})),w!=="none"&&R.createElement(fs,ve({},Ne(this.props,!1),{className:"recharts-area-curve",layout:j,type:p,connectNulls:g,fill:"none",points:l})),w!=="none"&&B&&R.createElement(fs,ve({},Ne(this.props,!1),{className:"recharts-area-curve",layout:j,type:p,connectNulls:g,fill:"none",points:m})))}},{key:"renderAreaWithAnimation",value:function(l,m){var u=this,x=this.props,o=x.points,j=x.baseLine,p=x.isAnimationActive,w=x.animationBegin,g=x.animationDuration,B=x.animationEasing,S=x.animationId,K=this.state,W=K.prevPoints,z=K.prevBaseLine;return R.createElement(Rt,{begin:w,duration:g,isActive:p,easing:B,from:{t:0},to:{t:1},key:"area-".concat(S),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(X){var _=X.t;if(W){var h=W.length/o.length,D=o.map(function(G,ee){var re=Math.floor(ee*h);if(W[re]){var Y=W[re],te=ye(Y.x,G.x),xe=ye(Y.y,G.y);return me(me({},G),{},{x:te(_),y:xe(_)})}return G}),k;if(be(j)&&typeof j=="number"){var V=ye(z,j);k=V(_)}else if(Ms(j)||Ft(j)){var H=ye(z,0);k=H(_)}else k=j.map(function(G,ee){var re=Math.floor(ee*h);if(z[re]){var Y=z[re],te=ye(Y.x,G.x),xe=ye(Y.y,G.y);return me(me({},G),{},{x:te(_),y:xe(_)})}return G});return u.renderAreaStatically(D,k,l,m)}return R.createElement(ze,null,R.createElement("defs",null,R.createElement("clipPath",{id:"animationClipPath-".concat(m)},u.renderClipRect(_))),R.createElement(ze,{clipPath:"url(#animationClipPath-".concat(m,")")},u.renderAreaStatically(o,j,l,m)))})}},{key:"renderArea",value:function(l,m){var u=this.props,x=u.points,o=u.baseLine,j=u.isAnimationActive,p=this.state,w=p.prevPoints,g=p.prevBaseLine,B=p.totalLength;return j&&x&&x.length&&(!w&&B>0||!Us(w,x)||!Us(g,o))?this.renderAreaWithAnimation(l,m):this.renderAreaStatically(x,o,l,m)}},{key:"render",value:function(){var l,m=this.props,u=m.hide,x=m.dot,o=m.points,j=m.className,p=m.top,w=m.left,g=m.xAxis,B=m.yAxis,S=m.width,K=m.height,W=m.isAnimationActive,z=m.id;if(u||!o||!o.length)return null;var X=this.state.isAnimationFinished,_=o.length===1,h=Gs("recharts-area",j),D=g&&g.allowDataOverflow,k=B&&B.allowDataOverflow,V=D||k,H=Ms(z)?this.id:z,G=(l=Ne(x,!1))!==null&&l!==void 0?l:{r:3,strokeWidth:2},ee=G.r,re=ee===void 0?3:ee,Y=G.strokeWidth,te=Y===void 0?2:Y,xe=It(x)?x:{},he=xe.clipDot,pe=he===void 0?!0:he,ce=re*2+te;return R.createElement(ze,{className:h},D||k?R.createElement("defs",null,R.createElement("clipPath",{id:"clipPath-".concat(H)},R.createElement("rect",{x:D?w:w-S/2,y:k?p:p-K/2,width:D?S:S*2,height:k?K:K*2})),!pe&&R.createElement("clipPath",{id:"clipPath-dots-".concat(H)},R.createElement("rect",{x:w-ce/2,y:p-ce/2,width:S+ce,height:K+ce}))):null,_?null:this.renderArea(V,H),(x||_)&&this.renderDots(V,pe,H),(!W||X)&&Vt.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(l,m){return l.animationId!==m.prevAnimationId?{prevAnimationId:l.animationId,curPoints:l.points,curBaseLine:l.baseLine,prevPoints:m.curPoints,prevBaseLine:m.curBaseLine}:l.points!==m.curPoints||l.baseLine!==m.curBaseLine?{curPoints:l.points,curBaseLine:l.baseLine}:null}}])})(f.PureComponent);Ys=ae;ie(ae,"displayName","Area");ie(ae,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!zt.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ie(ae,"getBaseValue",function(a,c,d,l){var m=a.layout,u=a.baseValue,x=c.props.baseValue,o=x??u;if(be(o)&&typeof o=="number")return o;var j=m==="horizontal"?l:d,p=j.scale.domain();if(j.type==="number"){var w=Math.max(p[0],p[1]),g=Math.min(p[0],p[1]);return o==="dataMin"?g:o==="dataMax"||w<0?w:Math.max(Math.min(p[0],p[1]),0)}return o==="dataMin"?p[0]:o==="dataMax"?p[1]:p[0]});ie(ae,"getComposedData",function(a){var c=a.props,d=a.item,l=a.xAxis,m=a.yAxis,u=a.xAxisTicks,x=a.yAxisTicks,o=a.bandSize,j=a.dataKey,p=a.stackedData,w=a.dataStartIndex,g=a.displayedData,B=a.offset,S=c.layout,K=p&&p.length,W=Ys.getBaseValue(c,d,l,m),z=S==="horizontal",X=!1,_=g.map(function(D,k){var V;K?V=p[w+k]:(V=Js(D,j),Array.isArray(V)?X=!0:V=[W,V]);var H=V[1]==null||K&&Js(D,j)==null;return z?{x:Ks({axis:l,ticks:u,bandSize:o,entry:D,index:k}),y:H?null:m.scale(V[1]),value:V,payload:D}:{x:H?null:l.scale(V[1]),y:Ks({axis:m,ticks:x,bandSize:o,entry:D,index:k}),value:V,payload:D}}),h;return K||X?h=_.map(function(D){var k=Array.isArray(D.value)?D.value[0]:null;return z?{x:D.x,y:k!=null&&D.y!=null?m.scale(k):null}:{x:k!=null?l.scale(k):null,y:D.y}}):h=z?m.scale(W):l.scale(W),me({points:_,baseLine:h,layout:S,isRange:X},B)});ie(ae,"renderDotItem",function(a,c){var d;if(R.isValidElement(a))d=R.cloneElement(a,c);else if(bs(a))d=a(c);else{var l=Gs("recharts-area-dot",typeof a!="boolean"?a.className:""),m=c.key,u=Qs(c,Qt);d=R.createElement($t,ve({},u,{key:m,className:l}))}return d});var cn=_t({chartName:"AreaChart",GraphicalChild:ae,axisComponents:[{axisType:"xAxis",AxisComp:Ze},{axisType:"yAxis",AxisComp:es}],formatAxisMap:Mt});function Pn({componentId:a}){const{nodes:c,updateNode:d}=yt(),{isRunning:l,getComponentMetrics:m}=bt(),{toast:u}=Dt(),x=c.find(s=>s.id===a);if(!x)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const o=wt.getJenkinsEmulationEngine(a),j=m(a),[p,w]=f.useState([]),[g,B]=f.useState([]),[S,K]=f.useState([]),[W,z]=f.useState([]),[X,_]=f.useState([]),[h,D]=f.useState(null),[k,V]=f.useState(null),[H,G]=f.useState(""),[ee,re]=f.useState("all"),[Y,te]=f.useState(null),[xe,he]=f.useState(!1),[pe,ce]=f.useState(""),[$e,ts]=f.useState(1),[Cs,ns]=f.useState(""),[Ps,is]=f.useState(""),[st,_e]=f.useState(!1),[as,Me]=f.useState(""),[on,dn]=f.useState(null),[ne,As]=f.useState(null),[tt,rs]=f.useState(!1),[Bs,ks]=f.useState([]),[Es,Ss]=f.useState([]),[ls,Ds]=f.useState([]),[un,mn]=f.useState(null);f.useEffect(()=>{if(!S.length){Ds([]);return}const s=Date.now(),t=6e4,n=20,i=[];for(let r=n-1;r>=0;r--){const N=s-(r+1)*t,P=s-r*t,J=S.filter(O=>{const b=O.startTime||(O.duration?s-O.duration:s);return b>=N&&b<P});if(J.length>0){const O=J.filter(je=>je.status==="success").length,b=J.filter(je=>je.status==="failed").length,ue=J.filter(je=>je.duration!==void 0),ke=ue.length>0?ue.reduce((je,Nt)=>je+(Nt.duration||0),0)/ue.length/1e3:0;i.push({time:new Date(P).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),builds:J.length,success:O,failed:b,duration:ke})}else i.push({time:new Date(P).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),builds:0,success:0,failed:0,duration:0})}Ds(i)},[S]);const[Ue,Ce]=f.useState(""),[Je,Pe]=f.useState(""),[cs,Ae]=f.useState(""),[Be,oe]=f.useState("");f.useEffect(()=>{if(!o)return;const s=()=>{try{const n=o.getPipelines(),i=o.getActiveBuilds(),r=o.getAllBuilds(),N=o.getNodes(),P=o.getPlugins(),J=o.getJenkinsMetrics();if(w(O=>JSON.stringify(O)!==JSON.stringify(n)?n:O),B(O=>JSON.stringify(O)!==JSON.stringify(i)?i:O),K(O=>{if(O.length!==r.length)return r;const b=O.filter(ke=>ke.status==="running").length,ue=r.filter(ke=>ke.status==="running").length;return b!==ue?r:O}),z(N),_(P),D(J),ne){const O=r.find(b=>b.id===ne);if(O&&(O.status==="running"||O.logs)){const b=o.getBuildLogs(ne),ue=o.getBuildArtifacts(ne);b&&ks(b),ue&&Ss(ue)}}}catch(n){console.error("Error updating Jenkins data:",n)}};s();const t=setInterval(s,l?500:2e3);return()=>clearInterval(t)},[o,l,ne]);const nt=s=>{if(As(s),rs(!0),o){const t=o.getBuildLogs(s),n=o.getBuildArtifacts(s);t&&ks(t),n&&Ss(n)}},Os=s=>{if(!o){u({title:"Error",description:"Jenkins engine not available",variant:"destructive"});return}const t=S.find(n=>n.id===s);if(!t){u({title:"Error",description:"Build not found",variant:"destructive"});return}if(t.status!=="running"&&t.status!=="pending"){u({title:"Cannot cancel build",description:`Build is already ${t.status}`,variant:"destructive"});return}try{const n=o.cancelBuild(s);n.success?(u({title:"Build cancelled",description:`Build #${t.number} has been cancelled successfully`}),ne===s&&(rs(!1),As(null))):u({title:"Cannot cancel build",description:n.reason||"Unknown error",variant:"destructive"})}catch(n){console.error("Error cancelling build:",n),u({title:"Error",description:"Failed to cancel build",variant:"destructive"})}},Ls=s=>s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(2)} KB`:`${(s/(1024*1024)).toFixed(2)} MB`,M=x.data.config||{},it=M.jenkinsUrl||"http://jenkins:8080",at=M.enableCSRF??!0,Ke=M.executorCount||2;M.enablePlugins;const Rs=M.plugins||["git","docker","kubernetes"],rt=M.enablePipeline??!0,lt=M.enableBlueOcean??!1,Fs=M.enableArtifactArchiving??!0,ct=M.retentionDays||30,U=p.length>0?p.map(s=>({id:s.id,name:s.name,status:s.status,lastBuild:s.lastBuild,duration:s.duration,branch:s.branch})):M.pipelines||[],$=s=>{if(s.jenkinsUrl!==void 0)try{new URL(s.jenkinsUrl)}catch{u({title:"Invalid URL",description:"Please enter a valid Jenkins URL",variant:"destructive"});return}if(s.executorCount!==void 0){if(s.executorCount<1||s.executorCount>100){u({title:"Invalid executor count",description:"Executor count must be between 1 and 100",variant:"destructive"});return}if(o){const n=o.canUpdateExecutorCount(s.executorCount);if(!n.can){u({title:"Cannot update executors",description:n.reason||"Cannot update executor count",variant:"destructive"});return}}}if(s.retentionDays!==void 0&&(s.retentionDays<1||s.retentionDays>365)){u({title:"Invalid retention days",description:"Retention days must be between 1 and 365",variant:"destructive"});return}const t={...M,...s};if(d(a,{data:{...x.data,config:t}}),o)try{o.updateConfig({...x,data:{...x.data,config:t}})}catch(n){console.error("Failed to update Jenkins engine config:",n)}u({title:"Configuration updated",description:"Jenkins configuration has been saved"})},os=(s,t)=>s.trim()?s.trim().length<2?"Pipeline name must be at least 2 characters":s.trim().length>100?"Pipeline name must be less than 100 characters":/^[a-zA-Z0-9_-]+$/.test(s.trim())?U.some(n=>n.name===s.trim()&&n.id!==t)?"A pipeline with this name already exists":"":"Pipeline name can only contain letters, numbers, hyphens and underscores":"Pipeline name is required",ot=()=>{const s=`pipeline-${Date.now().toString().slice(-6)}`,n={id:String(Date.now()),name:s,lastBuild:0,branch:"main",enabled:!0};$({pipelines:[...U,n]}),u({title:"Pipeline created",description:`Pipeline "${s}" has been created. It will be initialized in emulation.`})},dt=s=>{const t=U.find(r=>r.id===s);if(!t)return;const n=String(Date.now()),i={...t,id:n,name:`${t.name}-copy`,lastBuild:0};$({pipelines:[...U,i]}),u({title:"Pipeline duplicated",description:`Pipeline "${t.name}" has been duplicated as "${i.name}".`})},de=M.nodes||[],ds=s=>s.trim()?s.trim().length<2?"Node name must be at least 2 characters":s.trim().length>100?"Node name must be less than 100 characters":/^[a-zA-Z0-9_-]+$/.test(s.trim())?de.some(t=>t.name===s.trim())?"A node with this name already exists":"":"Node name can only contain letters, numbers, hyphens and underscores":"Node name is required",us=s=>s<1?"Must have at least 1 executor":s>100?"Cannot have more than 100 executors":"",ut=()=>{const s=ds(pe),t=us($e);if(Ce(s),Pe(t),s||t)return;const n={id:String(Date.now()),name:pe.trim(),numExecutors:$e,labels:Cs.split(",").map(i=>i.trim()).filter(i=>i.length>0),description:Ps.trim()||void 0};$({nodes:[...de,n]}),ce(""),ts(1),ns(""),is(""),Ce(""),Pe(""),he(!1)},mt=s=>{te(s)},xt=(s,t)=>{const n=de.map(i=>i.id===s?{...i,...t}:i);$({nodes:n}),te(null)},ht=s=>{de.find(n=>n.id===s)&&$({nodes:de.filter(n=>n.id!==s)})},pt=s=>{V(s)},C=(s,t)=>{if(t.name!==void 0){const n=os(t.name,s);if(n){Ae(n),u({title:"Validation error",description:n,variant:"destructive"});return}Ae("")}try{const n=U.map(i=>i.id===s?{...i,...t}:i);if($({pipelines:n}),o&&(t.enabled!==void 0&&o.setPipelineEnabled(s,t.enabled!==!1),t.triggers!==void 0||t.parameters!==void 0||t.environmentVariables!==void 0||t.postBuildActions!==void 0)){const i=n.find(r=>r.id===s);i&&o.updatePipelineConfig(s,{triggers:i.triggers||[],parameters:i.parameters||[],environmentVariables:i.environmentVariables||{},postBuildActions:i.postBuildActions||[]})}(t.name!==void 0||t.branch!==void 0||t.enabled!==void 0)&&u({title:"Pipeline updated",description:"Pipeline configuration has been saved."})}catch(n){console.error("Error saving pipeline:",n),u({title:"Error",description:"Failed to save pipeline configuration.",variant:"destructive"})}},jt=s=>{const t=U.find(i=>i.id===s);if(!t)return;if(o&&g.some(i=>i.pipelineId===s&&i.status==="running")){u({title:"Cannot delete pipeline",description:"Pipeline has active builds. Please wait for builds to complete or cancel them first.",variant:"destructive"});return}$({pipelines:U.filter(i=>i.id!==s)}),u({title:"Pipeline deleted",description:`Pipeline "${t.name}" has been deleted.`})},ms=s=>s.trim()?s.trim().length<2?"Plugin name must be at least 2 characters":s.trim().length>100?"Plugin name must be less than 100 characters":/^[a-zA-Z0-9_-]+$/.test(s.trim())?(M.plugins||[]).some(n=>(typeof n=="string"?n:n.name)===s.trim())?"This plugin is already installed":"":"Plugin name can only contain letters, numbers, hyphens and underscores":"Plugin name is required",ft=s=>{const t=s.trim();if(!t){oe("Plugin name is required");return}const n=ms(t);if(n){oe(n);return}if(o){if(!o.addPlugin(t)){oe("This plugin is already installed");return}const r=M.plugins||[];$({plugins:[...r,t]})}else{const i=M.plugins||[];if(i.some(r=>(typeof r=="string"?r:r.name)===t)){oe("This plugin is already installed");return}$({plugins:[...i,t]})}Me(""),oe(""),_e(!1),u({title:"Plugin installed",description:`Plugin "${t}" has been installed`})},gt=s=>{if(o){const n=o.removePlugin(s);if(!n.success){u({title:"Cannot remove plugin",description:n.reason||"Cannot remove plugin",variant:"destructive"});return}}const t=M.plugins||[];$({plugins:t.filter(n=>(typeof n=="string"?n:n.name)!==s)})},vt=(s,t)=>{o&&o.setPluginEnabled(s,t);const i=(M.plugins||[]).map(r=>typeof r=="string"?r===s?{name:r,enabled:t}:r:r.name===s?{...r,enabled:t}:r);$({plugins:i})},We=s=>{switch(s){case"success":return e.jsx($s,{className:"h-4 w-4 text-green-500"});case"running":return e.jsx(Gt,{className:"h-4 w-4 text-blue-500 animate-spin"});case"failed":return e.jsx(St,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})}},He=(s,t)=>{if(t===0)return e.jsx(se,{variant:"outline",children:"Never built"});switch(s){case"success":return e.jsx(se,{variant:"default",className:"bg-green-500",children:"Success"});case"running":return e.jsx(se,{variant:"default",className:"bg-blue-500",children:"Running"});case"failed":return e.jsx(se,{variant:"destructive",children:"Failed"});default:return e.jsx(se,{variant:"secondary",children:"Pending"})}};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-500/10",children:e.jsx(xs,{className:"h-6 w-6 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Jenkins"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Continuous Integration & Delivery"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(se,{variant:"outline",className:"gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${l?"bg-green-500 animate-pulse":"bg-gray-500"}`}),l?"Running":"Stopped"]}),j&&e.jsxs(se,{variant:"outline",className:"gap-1",children:[e.jsx(xs,{className:"h-3 w-3"}),j.throughput?.toFixed(2)||0," req/s"]})]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(A,{children:[e.jsx(F,{className:"pb-3",children:e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Pipelines"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h?.pipelinesTotal||U.length}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h?.pipelinesEnabled||U.length," enabled"]})]})]}),e.jsxs(A,{children:[e.jsx(F,{className:"pb-3",children:e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Executors"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h?`${h.executorBusy}/${h.executorBusy+h.executorIdle}`:Ke}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h?`${h.executorUtilization.toFixed(1)}% utilized`:"Available"})]})]}),e.jsxs(A,{children:[e.jsx(F,{className:"pb-3",children:e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Builds"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h?.buildsRunning||g.length||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h?`${h.buildsPerMinute.toFixed(1)}/min`:"Running"})]})]}),e.jsxs(A,{children:[e.jsx(F,{className:"pb-3",children:e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h&&h.buildsSuccess+h.buildsFailed>0?`${(h.buildsSuccess/(h.buildsSuccess+h.buildsFailed)*100).toFixed(1)}%`:"100%"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h?`${h.buildsSuccess} success`:"No builds"})]})]})]}),e.jsxs(Is,{defaultValue:"pipelines",className:"w-full",children:[e.jsxs(Vs,{className:"grid w-full grid-cols-7",children:[e.jsxs(Q,{value:"pipelines",className:"gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),"Pipelines"]}),e.jsxs(Q,{value:"builds",className:"gap-2",children:[e.jsx(qt,{className:"h-4 w-4"}),"Builds"]}),e.jsxs(Q,{value:"plugins",className:"gap-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),"Plugins"]}),e.jsxs(Q,{value:"nodes",className:"gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Nodes"]}),e.jsxs(Q,{value:"executors",className:"gap-2",children:[e.jsx(_s,{className:"h-4 w-4"}),"Executors"]}),e.jsxs(Q,{value:"settings",className:"gap-2",children:[e.jsx(Ct,{className:"h-4 w-4"}),"Settings"]}),e.jsxs(Q,{value:"metrics",className:"gap-2",children:[e.jsx(Ot,{className:"h-4 w-4"}),"Metrics"]})]}),e.jsx(Z,{value:"pipelines",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Pipelines"}),e.jsx(q,{children:"CI/CD pipeline configuration and monitoring"})]}),e.jsxs(y,{size:"sm",onClick:ot,variant:"outline",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"New Pipeline"]})]})}),e.jsx(L,{children:e.jsx("div",{className:"space-y-3",children:U.map(s=>e.jsxs(A,{className:"border-border",children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[We(s.status),e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{className:"text-lg",children:s.name}),e.jsxs(q,{className:"text-xs mt-1 flex items-center gap-2",children:[e.jsx(ps,{className:"h-3 w-3"}),s.branch||"main"," • Build #",s.lastBuild,s.duration&&` • ${s.duration}s`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[He(s.status,s.lastBuild),o&&e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>{const t=o.triggerBuildManually(s.id);t.success?u({title:"Build triggered",description:`Build #${t.buildId} started for ${s.name}`}):u({title:"Cannot trigger build",description:t.reason||"Unknown error",variant:"destructive"})},disabled:!s.enabled||s.status==="running",children:[e.jsx(Pt,{className:"h-4 w-4 mr-1"}),"Build Now"]}),e.jsx(y,{size:"icon",variant:"ghost",onClick:()=>pt(s.id),title:"Edit pipeline",children:e.jsx(Ts,{className:"h-4 w-4"})}),e.jsx(y,{size:"icon",variant:"ghost",onClick:()=>dt(s.id),title:"Duplicate pipeline",children:e.jsx(At,{className:"h-4 w-4"})}),U.length>1&&e.jsx(y,{size:"icon",variant:"ghost",onClick:()=>jt(s.id),title:"Delete pipeline",children:e.jsx(ge,{className:"h-4 w-4"})})]})]})}),s.status==="running"&&e.jsx(L,{children:e.jsx("div",{className:"space-y-2",children:(()=>{const n=g.find(i=>i.pipelineId===s.id)?.progress||0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{children:[n,"%"]})]}),e.jsx(Te,{value:n,className:"h-2"})]})})()})})]},s.id))})})]})}),e.jsx(Z,{value:"plugins",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Plugins"}),e.jsx(q,{children:"Installed Jenkins plugins"})]}),e.jsxs(y,{size:"sm",onClick:()=>_e(!0),variant:"outline",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Install Plugin"]})]})}),e.jsx(L,{children:X.length===0&&Rs.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ye,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No plugins installed"})]}):e.jsx("div",{className:"space-y-2",children:(X.length>0?X:Rs.map(s=>({name:s,version:"1.0.0",enabled:!0,active:!0}))).map(s=>{const t=typeof s=="string"?s:s.name,n=typeof s=="string"?"1.0.0":s.version,i=typeof s=="string"?!0:s.enabled!==!1,r=typeof s=="string"?!0:s.active!==!1,N=typeof s=="string"?void 0:s.description;return e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-border rounded-lg bg-card",children:[e.jsx("div",{className:"p-2 rounded bg-primary/10",children:e.jsx(Ye,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:t}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[N||"Plugin installed"," • v",n]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{checked:i,onCheckedChange:P=>vt(t,P)}),e.jsx(se,{variant:r?"default":"secondary",children:r?"Active":"Inactive"}),e.jsx(y,{size:"icon",variant:"ghost",onClick:()=>gt(t),children:e.jsx(ge,{className:"h-4 w-4"})})]})]},t)})})})]})}),e.jsx(Z,{value:"builds",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Builds"}),e.jsx(q,{children:"Build history and active builds"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ee,{value:ee,onValueChange:s=>re(s),children:[e.jsx(Se,{className:"w-32",children:e.jsx(De,{})}),e.jsxs(Oe,{children:[e.jsx(T,{value:"all",children:"All"}),e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"success",children:"Success"}),e.jsx(T,{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(E,{placeholder:"Search builds...",value:H,onChange:s=>G(s.target.value),className:"pl-8 w-64"})]})]})]})}),e.jsx(L,{children:(()=>{let s=S;return ee==="active"?s=s.filter(t=>t.status==="running"||t.status==="pending"):ee==="success"?s=s.filter(t=>t.status==="success"):ee==="failed"&&(s=s.filter(t=>t.status==="failed")),H&&(s=s.filter(t=>t.pipelineId.toLowerCase().includes(H.toLowerCase())||t.id.toLowerCase().includes(H.toLowerCase())||U.find(n=>n.id===t.pipelineId)?.name.toLowerCase().includes(H.toLowerCase()))),s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(xs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No builds found"})]}):e.jsx("div",{className:"space-y-3",children:s.map(t=>e.jsxs(A,{className:"border-border",children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[We(t.status),e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{className:"text-lg",children:U.find(n=>n.id===t.pipelineId)?.name||t.pipelineId}),e.jsxs(q,{className:"text-xs mt-1 flex items-center gap-2",children:["Build #",t.number,t.branch&&e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"h-3 w-3"}),t.branch]}),t.duration&&` • ${(t.duration/1e3).toFixed(1)}s`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[He(t.status),t.status==="running"&&o&&e.jsxs(y,{size:"sm",variant:"destructive",onClick:()=>Os(t.id),children:[e.jsx(zs,{className:"h-4 w-4 mr-1"}),"Cancel"]}),e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>nt(t.id),children:[e.jsx(kt,{className:"h-4 w-4 mr-1"}),"Details"]})]})]})}),t.status==="running"&&t.progress!==void 0&&e.jsx(L,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{children:[t.progress,"%"]})]}),e.jsx(Te,{value:t.progress,className:"h-2"}),t.stages&&t.stages.length>0&&e.jsx("div",{className:"mt-3 space-y-1",children:t.stages.map((n,i)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[We(n.status),e.jsx("span",{className:n.status==="running"?"font-semibold":"",children:n.name})]},i))})]})}),t.status!=="running"&&t.duration&&e.jsx(L,{children:e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Duration: ",(t.duration/1e3).toFixed(1),"s • Started: ",new Date(t.startTime).toLocaleString()]})})]},t.id))})})()})]})}),e.jsx(Z,{value:"executors",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsx(I,{children:"Executor Configuration"}),e.jsx(q,{children:"Manage concurrent build executors on master node"})]}),e.jsx(L,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"executor-count",children:"Executor Count"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{id:"executor-count",type:"number",min:"1",max:"100",value:Ke,onChange:s=>{const t=parseInt(s.target.value)||2;$({executorCount:t})}}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"concurrent builds"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Number of concurrent builds that can run simultaneously on master node"}),h&&e.jsxs("div",{className:"mt-4 p-3 border rounded-md bg-muted",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Current Status:"}),e.jsxs("span",{className:"font-semibold",children:[h.executorBusy," busy / ",h.executorBusy+h.executorIdle," total"]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(Te,{value:h.executorUtilization,className:"h-2 flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[h.executorUtilization.toFixed(1),"%"]})]}),h.executorBusy>0&&e.jsxs("p",{className:"text-xs text-amber-600 mt-2",children:["⚠️ ",h.executorBusy," executor(s) are currently busy. You cannot reduce executor count below this value."]})]})]})})]})}),e.jsx(Z,{value:"nodes",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Jenkins Nodes"}),e.jsx(q,{children:"Manage build agents and executors"})]}),e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>he(!0),children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Add Node"]})]})}),e.jsx(L,{children:(()=>{const s=W.length>0?W:[{id:"master",name:"master",status:"online",numExecutors:Ke,busyExecutors:0,idleExecutors:Ke,labels:["master"]},...de.map(t=>({id:t.id,name:t.name,status:"online",numExecutors:t.numExecutors||1,busyExecutors:0,idleExecutors:t.numExecutors||1,labels:t.labels||[],description:t.description}))];return s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(js,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No nodes configured"})]}):e.jsx("div",{className:"space-y-3",children:s.map(t=>{const n=t.id==="master",i=de.find(r=>r.id===t.id);return e.jsxs(A,{className:"border-border",children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded ${t.status==="online"?"bg-green-500/10":"bg-gray-500/10"}`,children:e.jsx(js,{className:`h-4 w-4 ${t.status==="online"?"text-green-500":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(I,{className:"text-lg",children:[t.name,n&&e.jsx(se,{variant:"outline",className:"ml-2 text-xs",children:"Master"})]}),e.jsxs(q,{className:"text-xs mt-1",children:[t.numExecutors," executors • ",t.busyExecutors," busy • ",t.idleExecutors," idle",n&&e.jsx("span",{className:"block mt-1 text-muted-foreground",children:"Master node is the Jenkins controller that manages builds and coordinates agents."})]}),i?.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{variant:t.status==="online"?"default":"secondary",children:t.status}),!n&&e.jsxs(e.Fragment,{children:[e.jsx(y,{size:"icon",variant:"ghost",onClick:()=>mt(t.id),children:e.jsx(Ts,{className:"h-4 w-4"})}),e.jsx(y,{size:"icon",variant:"ghost",onClick:()=>ht(t.id),children:e.jsx(ge,{className:"h-4 w-4"})})]})]})]})}),t.labels&&t.labels.length>0&&e.jsx(L,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:t.labels.map((r,N)=>e.jsx(se,{variant:"outline",className:"text-xs",children:r},N))})})]},t.id)})})})()})]})}),e.jsx(Z,{value:"settings",className:"space-y-4 mt-4",children:e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsx(I,{children:"Server Configuration"}),e.jsx(q,{children:"Jenkins server settings"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"jenkins-url",children:"Jenkins URL"}),e.jsx(E,{id:"jenkins-url",value:it,onChange:s=>$({jenkinsUrl:s.target.value}),placeholder:"http://jenkins:8080"})]}),e.jsx(qe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(v,{children:"Enable CSRF Protection"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Protect against cross-site request forgery"})]}),e.jsx(le,{checked:at,onCheckedChange:s=>$({enableCSRF:s})})]}),e.jsx(qe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(v,{children:"Enable Pipelines"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable Jenkins pipeline support"})]}),e.jsx(le,{checked:rt,onCheckedChange:s=>$({enablePipeline:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(v,{children:"Enable Blue Ocean"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Modern pipeline UI"})]}),e.jsx(le,{checked:lt,onCheckedChange:s=>$({enableBlueOcean:s})})]}),e.jsx(qe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(v,{children:"Enable Artifact Archiving"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Store build artifacts"})]}),e.jsx(le,{checked:Fs,onCheckedChange:s=>$({enableArtifactArchiving:s})})]}),Fs&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"retention-days",children:"Retention Days"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{id:"retention-days",type:"number",min:"1",max:"365",value:ct,onChange:s=>$({retentionDays:parseInt(s.target.value)||30})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"days"})]})]})]})]})}),e.jsx(Z,{value:"metrics",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"h-5 w-5"}),"Build Trends"]}),e.jsx(q,{children:"Build count over time"})]}),e.jsx(L,{children:e.jsx(gs,{width:"100%",height:300,children:e.jsxs(cn,{data:ls,children:[e.jsx(vs,{strokeDasharray:"3 3"}),e.jsx(Ze,{dataKey:"time"}),e.jsx(es,{}),e.jsx(Ns,{}),e.jsx(ys,{}),e.jsx(ae,{type:"monotone",dataKey:"builds",stackId:"1",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),e.jsx(ae,{type:"monotone",dataKey:"success",stackId:"2",stroke:"#82ca9d",fill:"#82ca9d",fillOpacity:.6}),e.jsx(ae,{type:"monotone",dataKey:"failed",stackId:"2",stroke:"#ff7300",fill:"#ff7300",fillOpacity:.6})]})})})]}),e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5 text-green-500"}),"Success Rate"]}),e.jsx(q,{children:"Build success rate over time"})]}),e.jsx(L,{children:e.jsx(gs,{width:"100%",height:300,children:e.jsxs(Ut,{data:ls.map(s=>({...s,successRate:s.builds>0?s.success/s.builds*100:0})),children:[e.jsx(vs,{strokeDasharray:"3 3"}),e.jsx(Ze,{dataKey:"time"}),e.jsx(es,{domain:[0,100]}),e.jsx(Ns,{formatter:s=>`${s.toFixed(1)}%`}),e.jsx(ys,{}),e.jsx(Jt,{type:"monotone",dataKey:"successRate",stroke:"#82ca9d",strokeWidth:2,name:"Success Rate",dot:{fill:"#82ca9d",r:4}})]})})})]}),e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-5 w-5"}),"Average Build Duration"]}),e.jsx(q,{children:"Average build duration in seconds"})]}),e.jsx(L,{children:e.jsx(gs,{width:"100%",height:300,children:e.jsxs(Kt,{data:ls,children:[e.jsx(vs,{strokeDasharray:"3 3"}),e.jsx(Ze,{dataKey:"time"}),e.jsx(es,{}),e.jsx(Ns,{formatter:s=>`${s.toFixed(1)}s`}),e.jsx(ys,{}),e.jsx(Wt,{dataKey:"duration",fill:"#8884d8",name:"Duration (s)"})]})})})]}),e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-5 w-5"}),"Executor Utilization"]}),e.jsx(q,{children:"Current executor usage"})]}),e.jsx(L,{children:h?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-bold",children:[h.executorUtilization.toFixed(1),"%"]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:[h.executorBusy," / ",h.executorBusy+h.executorIdle," executors busy"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Busy"}),e.jsx("span",{className:"font-medium",children:h.executorBusy})]}),e.jsx(Te,{value:h.executorUtilization,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Idle"}),e.jsx("span",{className:"font-medium",children:h.executorIdle})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.buildsPerMinute.toFixed(1)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Builds/min"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(h.averageBuildDuration/1e3).toFixed(1),"s"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Duration"})]})]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No metrics available"})})]})]})})]}),k&&(()=>{const s=U.find(t=>t.id===k);return s?e.jsx(Le,{open:!!k,onOpenChange:t=>!t&&V(null),children:e.jsxs(Re,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Fe,{children:[e.jsx(Ie,{children:"Edit Pipeline Configuration"}),e.jsx(Ve,{children:"Configure pipeline settings, triggers, parameters, and post-build actions"})]}),e.jsxs(Is,{defaultValue:"basic",className:"w-full",children:[e.jsxs(Vs,{className:"grid w-full grid-cols-5",children:[e.jsx(Q,{value:"basic",children:"Basic"}),e.jsx(Q,{value:"triggers",children:"Triggers"}),e.jsx(Q,{value:"parameters",children:"Parameters"}),e.jsx(Q,{value:"environment",children:"Environment"}),e.jsx(Q,{value:"actions",children:"Post-Build"})]}),e.jsxs(Z,{value:"basic",className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"pipeline-name",children:"Name *"}),e.jsx(E,{id:"pipeline-name",defaultValue:s.name,onChange:t=>{const n=os(t.target.value,s.id);Ae(n)},onBlur:t=>{const n=t.target.value.trim(),i=os(n,s.id);Ae(i),!i&&n!==s.name&&C(s.id,{name:n})},className:cs?"border-red-500":""}),cs&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Xe,{className:"h-3 w-3"}),cs]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"pipeline-branch",children:"Branch"}),e.jsx(E,{id:"pipeline-branch",defaultValue:s.branch||"main",onBlur:t=>{t.target.value!==s.branch&&C(s.id,{branch:t.target.value})}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(v,{children:"Enabled"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable/disable pipeline"})]}),e.jsx(le,{checked:s.enabled!==!1,onCheckedChange:t=>{C(s.id,{enabled:t}),o&&o.setPipelineEnabled(s.id,t)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Status"}),e.jsxs("div",{className:"p-2 border rounded-md bg-muted",children:[He(s.status,s.lastBuild),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.lastBuild===0?"Pipeline has never been built. Status will be determined after first build.":`Status is determined by the last build (#${s.lastBuild}).`})]})]})]}),e.jsx(Z,{value:"triggers",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Build Triggers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure when builds should be triggered"})]}),e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>{const t=[...s.triggers||[],{type:"webhook",enabled:!0,config:{}}];C(s.id,{triggers:t})},children:[e.jsx(fe,{className:"h-4 w-4 mr-1"}),"Add Trigger"]})]}),(s.triggers||[]).map((t,n)=>e.jsxs(A,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ee,{value:t.type,onValueChange:i=>{const r=[...s.triggers||[]];r[n]={...t,type:i},C(s.id,{triggers:r})},children:[e.jsx(Se,{className:"w-32",children:e.jsx(De,{})}),e.jsxs(Oe,{children:[e.jsx(T,{value:"webhook",children:"Webhook"}),e.jsx(T,{value:"cron",children:"Cron"}),e.jsx(T,{value:"scm",children:"SCM Polling"}),e.jsx(T,{value:"manual",children:"Manual Only"})]})]}),e.jsx(le,{checked:t.enabled,onCheckedChange:i=>{const r=[...s.triggers||[]];r[n]={...t,enabled:i},C(s.id,{triggers:r})}})]}),e.jsx(y,{size:"icon",variant:"ghost",onClick:()=>{const i=(s.triggers||[]).filter((r,N)=>N!==n);C(s.id,{triggers:i})},children:e.jsx(ge,{className:"h-4 w-4"})})]}),t.type==="webhook"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Branches (comma-separated, empty for all)"}),e.jsx(E,{placeholder:"main, develop, release/*",defaultValue:t.config?.branches?.join(", "),onBlur:i=>{const r=i.target.value.split(",").map(P=>P.trim()).filter(P=>P),N=[...s.triggers||[]];N[n]={...t,config:{...t.config,branches:r}},C(s.id,{triggers:N})}})]}),t.type==="cron"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Cron Expression"}),e.jsx(E,{placeholder:"H/15 * * * *",defaultValue:t.config?.schedule,onBlur:i=>{const r=[...s.triggers||[]];r[n]={...t,config:{...t.config,schedule:i.target.value}},C(s.id,{triggers:r})}}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Example: H/15 * * * * (every 15 minutes)"})]}),t.type==="scm"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Poll Interval (minutes)"}),e.jsx(E,{type:"number",min:"1",placeholder:"5",defaultValue:t.config?.pollInterval,onBlur:i=>{const r=[...s.triggers||[]];r[n]={...t,config:{...t.config,pollInterval:parseInt(i.target.value)||5}},C(s.id,{triggers:r})}})]})]},n)),(!s.triggers||s.triggers.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No triggers configured. Builds will use default rate-based triggering."})]})}),e.jsx(Z,{value:"parameters",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Build Parameters"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Parameters to pass to builds"})]}),e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>{const t=[...s.parameters||[],{name:"",type:"string",defaultValue:""}];C(s.id,{parameters:t})},children:[e.jsx(fe,{className:"h-4 w-4 mr-1"}),"Add Parameter"]})]}),(s.parameters||[]).map((t,n)=>e.jsxs(A,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Parameter Name"}),e.jsx(E,{value:t.name,onChange:i=>{const r=[...s.parameters||[]];r[n]={...t,name:i.target.value},C(s.id,{parameters:r})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Type"}),e.jsxs(Ee,{value:t.type,onValueChange:i=>{const r=[...s.parameters||[]];r[n]={...t,type:i},C(s.id,{parameters:r})},children:[e.jsx(Se,{children:e.jsx(De,{})}),e.jsxs(Oe,{children:[e.jsx(T,{value:"string",children:"String"}),e.jsx(T,{value:"choice",children:"Choice"}),e.jsx(T,{value:"boolean",children:"Boolean"}),e.jsx(T,{value:"password",children:"Password"})]})]})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx(v,{children:"Default Value"}),t.type==="boolean"?e.jsx(le,{checked:t.defaultValue===!0,onCheckedChange:i=>{const r=[...s.parameters||[]];r[n]={...t,defaultValue:i},C(s.id,{parameters:r})}}):e.jsx(E,{value:t.defaultValue||"",type:t.type==="password"?"password":"text",onChange:i=>{const r=[...s.parameters||[]];r[n]={...t,defaultValue:i.target.value},C(s.id,{parameters:r})}})]}),t.type==="choice"&&e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx(v,{children:"Choices (one per line)"}),e.jsx(hs,{rows:3,value:t.choices?.join(`
`)||"",onChange:i=>{const r=i.target.value.split(`
`).map(P=>P.trim()).filter(P=>P),N=[...s.parameters||[]];N[n]={...t,choices:r},C(s.id,{parameters:N})}})]}),e.jsxs(y,{size:"sm",variant:"ghost",onClick:()=>{const i=(s.parameters||[]).filter((r,N)=>N!==n);C(s.id,{parameters:i})},children:[e.jsx(ge,{className:"h-4 w-4 mr-1"}),"Remove"]})]},n)),(!s.parameters||s.parameters.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No parameters configured."})]})}),e.jsx(Z,{value:"environment",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Environment Variables"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Environment variables available to builds"})]}),e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>{const n={...s.environmentVariables||{},[`VAR_${Date.now()}`]:""};C(s.id,{environmentVariables:n})},children:[e.jsx(fe,{className:"h-4 w-4 mr-1"}),"Add Variable"]})]}),s.environmentVariables&&Object.keys(s.environmentVariables).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(s.environmentVariables).map(([t,n])=>e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-[1fr_2fr_auto] gap-3 items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{className:"text-xs",children:"Variable Name"}),e.jsx(E,{value:t,onChange:i=>{const r=i.target.value,N=s.environmentVariables||{};if(r!==t&&!N[r]){const P={...N};delete P[t],P[r]=n,C(s.id,{environmentVariables:P})}},placeholder:"VAR_NAME"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{className:"text-xs",children:"Value"}),e.jsx(E,{value:n,onChange:i=>{const r=s.environmentVariables||{};C(s.id,{environmentVariables:{...r,[t]:i.target.value}})},placeholder:"variable value"})]}),e.jsx(y,{size:"icon",variant:"ghost",onClick:()=>{const r={...s.environmentVariables||{}};delete r[t],C(s.id,{environmentVariables:r})},children:e.jsx(ge,{className:"h-4 w-4"})})]})},t))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No environment variables configured."})]})}),e.jsx(Z,{value:"actions",className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Post-Build Actions"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Actions to execute after build completes"})]}),e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>{const t=[...s.postBuildActions||[],{type:"email",enabled:!0,config:{}}];C(s.id,{postBuildActions:t})},children:[e.jsx(fe,{className:"h-4 w-4 mr-1"}),"Add Action"]})]}),(s.postBuildActions||[]).map((t,n)=>e.jsxs(A,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ee,{value:t.type,onValueChange:i=>{const r=[...s.postBuildActions||[]];r[n]={...t,type:i,config:{}},C(s.id,{postBuildActions:r})},children:[e.jsx(Se,{className:"w-40",children:e.jsx(De,{})}),e.jsxs(Oe,{children:[e.jsx(T,{value:"email",children:"Email Notification"}),e.jsx(T,{value:"archive",children:"Archive Artifacts"}),e.jsx(T,{value:"publish",children:"Publish Results"}),e.jsx(T,{value:"deploy",children:"Deploy"})]})]}),e.jsx(le,{checked:t.enabled,onCheckedChange:i=>{const r=[...s.postBuildActions||[]];r[n]={...t,enabled:i},C(s.id,{postBuildActions:r})}})]}),e.jsx(y,{size:"icon",variant:"ghost",onClick:()=>{const i=(s.postBuildActions||[]).filter((r,N)=>N!==n);C(s.id,{postBuildActions:i})},children:e.jsx(ge,{className:"h-4 w-4"})})]}),t.type==="email"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Recipients (comma-separated)"}),e.jsx(E,{placeholder:"dev@example.com, team@example.com",defaultValue:t.config?.recipients?.join(", "),onBlur:i=>{const r=i.target.value.split(",").map(P=>P.trim()).filter(P=>P),N=[...s.postBuildActions||[]];N[n]={...t,config:{...t.config,recipients:r}},C(s.id,{postBuildActions:N})}})]}),t.type==="archive"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Archive Pattern"}),e.jsx(E,{placeholder:"**/*.jar, **/*.war",defaultValue:t.config?.archivePattern,onBlur:i=>{const r=[...s.postBuildActions||[]];r[n]={...t,config:{...t.config,archivePattern:i.target.value}},C(s.id,{postBuildActions:r})}})]}),t.type==="deploy"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"Deployment Environment"}),e.jsxs(Ee,{value:t.config?.deployEnv||"staging",onValueChange:i=>{const r=[...s.postBuildActions||[]];r[n]={...t,config:{...t.config,deployEnv:i}},C(s.id,{postBuildActions:r})},children:[e.jsx(Se,{children:e.jsx(De,{})}),e.jsxs(Oe,{children:[e.jsx(T,{value:"staging",children:"Staging"}),e.jsx(T,{value:"production",children:"Production"}),e.jsx(T,{value:"dev",children:"Development"})]})]})]})]},n)),(!s.postBuildActions||s.postBuildActions.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No post-build actions configured."})]})})]}),e.jsx(Ge,{children:e.jsx(y,{variant:"outline",onClick:()=>{V(null),Ae("")},children:"Close"})})]})}):null})(),e.jsx(Le,{open:xe,onOpenChange:he,children:e.jsxs(Re,{children:[e.jsxs(Fe,{children:[e.jsx(Ie,{children:"Add New Node"}),e.jsx(Ve,{children:"Create a new Jenkins agent node for distributed builds"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"node-name",children:"Node Name *"}),e.jsx(E,{id:"node-name",value:pe,onChange:s=>{ce(s.target.value),Ce(ds(s.target.value))},onBlur:s=>Ce(ds(s.target.value)),placeholder:"agent-1",className:Ue?"border-red-500":""}),Ue&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Xe,{className:"h-3 w-3"}),Ue]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"node-executors",children:"Number of Executors"}),e.jsx(E,{id:"node-executors",type:"number",min:"1",max:"100",value:$e,onChange:s=>{const t=parseInt(s.target.value)||1;ts(t),Pe(us(t))},onBlur:s=>Pe(us($e)),className:Je?"border-red-500":""}),Je?e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Xe,{className:"h-3 w-3"}),Je]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of concurrent builds this node can handle"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"node-labels",children:"Labels"}),e.jsx(E,{id:"node-labels",value:Cs,onChange:s=>ns(s.target.value),placeholder:"linux, docker, kubernetes"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated labels for build routing"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"node-description",children:"Description"}),e.jsx(hs,{id:"node-description",value:Ps,onChange:s=>is(s.target.value),placeholder:"Optional description",rows:3})]})]}),e.jsxs(Ge,{children:[e.jsx(y,{variant:"outline",onClick:()=>{he(!1),ce(""),ts(1),ns(""),is(""),Ce(""),Pe("")},children:"Cancel"}),e.jsx(y,{onClick:ut,disabled:!!Ue||!!Je||!pe.trim(),children:"Add Node"})]})]})}),Y&&(()=>{const s=de.find(b=>b.id===Y);if(!s)return null;const[t,n]=f.useState(s.name),[i,r]=f.useState(s.numExecutors||1),[N,P]=f.useState(s.labels?.join(", ")||""),[J,O]=f.useState(s.description||"");return e.jsx(Le,{open:!!Y,onOpenChange:b=>!b&&te(null),children:e.jsxs(Re,{children:[e.jsxs(Fe,{children:[e.jsx(Ie,{children:"Edit Node"}),e.jsx(Ve,{children:"Update node configuration"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-node-name",children:"Node Name *"}),e.jsx(E,{id:"edit-node-name",value:t,onChange:b=>n(b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-node-executors",children:"Number of Executors"}),e.jsx(E,{id:"edit-node-executors",type:"number",min:"1",max:"100",value:i,onChange:b=>r(parseInt(b.target.value)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-node-labels",children:"Labels"}),e.jsx(E,{id:"edit-node-labels",value:N,onChange:b=>P(b.target.value),placeholder:"linux, docker, kubernetes"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"edit-node-description",children:"Description"}),e.jsx(hs,{id:"edit-node-description",value:J,onChange:b=>O(b.target.value),rows:3})]})]}),e.jsxs(Ge,{children:[e.jsx(y,{variant:"outline",onClick:()=>te(null),children:"Cancel"}),e.jsx(y,{onClick:()=>{if(!t.trim()){u({title:"Invalid name",description:"Node name cannot be empty",variant:"destructive"});return}xt(Y,{name:t.trim(),numExecutors:i,labels:N.split(",").map(b=>b.trim()).filter(b=>b.length>0),description:J.trim()||void 0})},children:"Save"})]})]})})})(),e.jsx(Le,{open:st,onOpenChange:_e,children:e.jsxs(Re,{children:[e.jsxs(Fe,{children:[e.jsx(Ie,{children:"Install Plugin"}),e.jsx(Ve,{children:"Install a new Jenkins plugin"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"plugin-name",children:"Plugin Name *"}),e.jsx(E,{id:"plugin-name",value:as,onChange:s=>{const t=s.target.value;if(Me(t),t.trim()&&Be){const n=ms(t);oe(n)}},onBlur:s=>{const t=ms(s.target.value);oe(t)},placeholder:"e.g., git, docker, kubernetes",className:Be?"border-red-500":""}),Be?e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Xe,{className:"h-3 w-3"}),Be]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the plugin name (e.g., git, docker, kubernetes, workflow-aggregator)"})]}),e.jsxs("div",{className:"p-3 border rounded-md bg-muted",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Popular plugins:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["git","docker","kubernetes","workflow-aggregator","blue-ocean","junit","maven-plugin"].map(s=>e.jsx(y,{variant:"outline",size:"sm",onClick:()=>{Me(s)},children:s},s))})]})]}),e.jsxs(Ge,{children:[e.jsx(y,{variant:"outline",onClick:()=>{_e(!1),Me(""),oe("")},children:"Cancel"}),e.jsx(y,{onClick:()=>ft(as),disabled:!!Be||!as.trim(),children:"Install"})]})]})}),e.jsx(Le,{open:tt,onOpenChange:rs,children:e.jsxs(Re,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs(Fe,{children:[e.jsx(Ie,{children:"Build Details"}),e.jsx(Ve,{children:ne&&(()=>{const s=S.find(n=>n.id===ne);if(!s)return"Build details";const t=U.find(n=>n.id===s.pipelineId);return`Build #${s.number} - ${t?.name||s.pipelineId}`})()})]}),ne&&(()=>{const s=S.find(n=>n.id===ne);if(!s)return null;const t=U.find(n=>n.id===s.pipelineId);return e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[e.jsxs(A,{children:[e.jsx(F,{children:e.jsx(I,{children:"Build Information"})}),e.jsxs(L,{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Pipeline:"}),e.jsx("span",{className:"ml-2 font-medium",children:t?.name||s.pipelineId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Build Number:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["#",s.number]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:"ml-2",children:He(s.status)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Branch:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.branch||"main"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Started:"}),e.jsx("span",{className:"ml-2",children:new Date(s.startTime).toLocaleString()})]}),s.duration&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsxs("span",{className:"ml-2",children:[(s.duration/1e3).toFixed(1),"s"]})]})]}),s.status==="running"&&s.progress!==void 0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.progress,"%"]})]}),e.jsx(Te,{value:s.progress})]}),s.stages&&s.stages.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Stages:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.stages.map((n,i)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm p-2 border rounded",children:[We(n.status),e.jsx("span",{children:n.name}),n.duration&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-auto",children:[(n.duration/1e3).toFixed(1),"s"]})]},i))})]}),s.status==="running"&&o&&e.jsx("div",{className:"mt-4",children:e.jsxs(y,{variant:"destructive",onClick:()=>Os(s.id),children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Cancel Build"]})})]})]}),e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsx(I,{children:"Console Output"}),e.jsx(q,{children:"Build execution logs"})]}),e.jsx(L,{children:e.jsx("div",{className:"bg-black text-green-400 p-4 rounded font-mono text-xs overflow-x-auto max-h-96 overflow-y-auto",children:Bs.length>0?Bs.map((n,i)=>e.jsx("div",{className:"whitespace-pre-wrap",children:n},i)):e.jsx("div",{className:"text-muted-foreground",children:"No logs available"})})})]}),Es.length>0&&e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsx(I,{children:"Artifacts"}),e.jsx(q,{children:"Build artifacts"})]}),e.jsx(L,{children:e.jsx("div",{className:"space-y-2",children:Es.map((n,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-mono text-sm",children:n.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:Ls(n.size)}),e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>{const r=`# Artifact: ${n.name}
# Size: ${Ls(n.size)}
# Generated by Jenkins Simulation

This is a simulated artifact file.
In a real Jenkins environment, this would contain the actual build artifact.`,N=new Blob([r],{type:"text/plain"}),P=URL.createObjectURL(N),J=document.createElement("a");J.href=P,J.download=n.name,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(P),u({title:"Artifact downloaded",description:`${n.name} has been downloaded`})},children:[e.jsx(Et,{className:"h-3 w-3 mr-1"}),"Download"]})]})]},i))})})]})]})})()]})})]})})}export{Pn as JenkinsConfigAdvanced};

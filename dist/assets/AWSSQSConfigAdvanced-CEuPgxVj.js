import{r as f,j as e,y as fe,z as ve,E as Ne,G as ye,H as be,L as r,I as m,n as Q,q as L,s as k,t as V,v as B,w as p,x as _,J as Ce,l as M,aN as ce,u as U,e as A,S as le,C as F,h as E,i as P,m as T,B as I,T as Ee,b as Pe,c as ae,A as Le,f as te,k as Z,P as ue,a5 as ke,am as Ve,ai as Be,o as he,O as We,Q as Oe,V as $e,W as qe,X as Ke,Y as ze,_ as He,$ as Ge,d as Ue}from"./index-UHkh-5io.js";import{P as z}from"./progress-CUC2GdAn.js";import{s as re,a as X}from"./toast-D9mvpcaB.js";import{R as Xe}from"./refresh-ccw-CtMpp-dW.js";import{C as _e}from"./cloud-nRK9Y3Hv.js";import{M as ge}from"./message-square-CzzUNqhZ.js";import{K as Ye}from"./key-D3K0CrCR.js";import{S as Je}from"./shield-BuOfjExX.js";import{S as Ze}from"./send-Ijiq2Ixn.js";const pe=["us-east-1","us-east-2","us-west-1","us-west-2","eu-west-1","eu-west-2","eu-west-3","eu-central-1","eu-north-1","ap-southeast-1","ap-southeast-2","ap-northeast-1","ap-northeast-2","ap-south-1","sa-east-1","ca-central-1","af-south-1","me-south-1"];function es({open:b,onOpenChange:$,onSave:H,defaultRegion:y="us-east-1",defaultAccountId:g="123456789012",existingQueueNames:a=[]}){const[c,G]=f.useState({name:"",type:"standard",region:y,visibilityTimeout:30,messageRetention:4,delaySeconds:0,accountId:g}),[x,o]=f.useState({}),[u,v]=f.useState({});f.useEffect(()=>{b&&(G({name:"",type:"standard",region:y,visibilityTimeout:30,messageRetention:4,delaySeconds:0,accountId:g}),o({}),v({}))},[b,y,g]);const W=()=>{const l={};if(!c.name||c.name.trim()==="")l.name="Queue name is required";else{const n=ce.validateQueueName(c.name,c.type);n.valid?a.includes(c.name)&&(l.name="Queue with this name already exists"):l.name=n.error||"Invalid queue name"}return!c.region||c.region.trim()===""?l.region="Region is required":pe.includes(c.region)||(l.region="Invalid AWS region"),(c.visibilityTimeout<0||c.visibilityTimeout>43200)&&(l.visibilityTimeout="Visibility timeout must be between 0 and 43200 seconds"),(c.messageRetention<1||c.messageRetention>14)&&(l.messageRetention="Message retention must be between 1 and 14 days"),(c.delaySeconds<0||c.delaySeconds>900)&&(l.delaySeconds="Delay seconds must be between 0 and 900"),c.maxReceiveCount!==void 0&&(c.maxReceiveCount<1||c.maxReceiveCount>1e3)&&(l.maxReceiveCount="Max receive count must be between 1 and 1000"),c.accountId&&!/^\d{12}$/.test(c.accountId)&&(l.accountId="Account ID must be 12 digits"),o(l),Object.keys(l).length===0},C=(l,n)=>{let N={...c,[l]:n};l==="type"&&(n==="fifo"&&!N.name.endsWith(".fifo")?N.name=N.name+".fifo":n==="standard"&&N.name.endsWith(".fifo")&&(N.name=N.name.slice(0,-5))),l==="name"&&c.type==="fifo"&&!n.endsWith(".fifo")&&(N.name=n+".fifo"),G(N),x[l]&&o({...x,[l]:""})},j=l=>{v({...u,[l]:!0}),W()},O=()=>{W()?(H(c),$(!1)):v(Object.fromEntries(["name","region","visibilityTimeout","messageRetention","delaySeconds","accountId"].map(n=>[n,!0])))};return e.jsx(fe,{open:b,onOpenChange:$,children:e.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ne,{children:[e.jsx(ye,{children:"Create SQS Queue"}),e.jsx(be,{children:"Configure a new Amazon SQS queue with delivery guarantees and settings"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Basic Settings"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"queue-name",children:["Queue Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"queue-name",value:c.name,onChange:l=>C("name",l.target.value),onBlur:()=>j("name"),placeholder:c.type==="fifo"?"my-queue.fifo":"my-queue",className:x.name&&u.name?"border-red-500":""}),x.name&&u.name&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),x.name]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.type==="fifo"?"FIFO queue names must end with .fifo (1-80 characters)":"1-80 characters, alphanumeric, hyphens, underscores"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"queue-type",children:["Queue Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(L,{value:c.type,onValueChange:l=>C("type",l),children:[e.jsx(k,{id:"queue-type",children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(p,{value:"standard",children:"Standard Queue"}),e.jsx(p,{value:"fifo",children:"FIFO Queue"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.type==="fifo"?"Guaranteed order and exactly-once processing":"At-least-once delivery, high throughput"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"queue-region",children:["AWS Region ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(L,{value:c.region,onValueChange:l=>C("region",l),children:[e.jsx(k,{id:"queue-region",className:x.region&&u.region?"border-red-500":"",children:e.jsx(V,{})}),e.jsx(B,{children:pe.map(l=>e.jsx(p,{value:l,children:l},l))})]}),x.region&&u.region&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),x.region]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"queue-account-id",children:"Account ID"}),e.jsx(m,{id:"queue-account-id",value:c.accountId||"",onChange:l=>C("accountId",l.target.value),onBlur:()=>j("accountId"),placeholder:"123456789012",className:x.accountId&&u.accountId?"border-red-500":""}),x.accountId&&u.accountId&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),x.accountId]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"12-digit AWS account ID for queue URLs and ARNs"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Delivery Settings"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"visibility-timeout",children:["Visibility Timeout (seconds) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"visibility-timeout",type:"number",value:c.visibilityTimeout,onChange:l=>C("visibilityTimeout",Number(l.target.value)),onBlur:()=>j("visibilityTimeout"),min:0,max:43200,className:x.visibilityTimeout&&u.visibilityTimeout?"border-red-500":""}),x.visibilityTimeout&&u.visibilityTimeout&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),x.visibilityTimeout]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time message is hidden after being received (0-43200)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"message-retention",children:["Message Retention (days) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"message-retention",type:"number",value:c.messageRetention,onChange:l=>C("messageRetention",Number(l.target.value)),onBlur:()=>j("messageRetention"),min:1,max:14,className:x.messageRetention&&u.messageRetention?"border-red-500":""}),x.messageRetention&&u.messageRetention&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),x.messageRetention]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"How long messages are kept (1-14 days)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"delay-seconds",children:["Delivery Delay (seconds) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"delay-seconds",type:"number",value:c.delaySeconds,onChange:l=>C("delaySeconds",Number(l.target.value)),onBlur:()=>j("delaySeconds"),min:0,max:900,className:x.delaySeconds&&u.delaySeconds?"border-red-500":""}),x.delaySeconds&&u.delaySeconds&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),x.delaySeconds]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delay before messages become available (0-900)"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Dead Letter Queue"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"dlq-name",children:"Dead Letter Queue Name"}),e.jsx(m,{id:"dlq-name",value:c.deadLetterQueue||"",onChange:l=>C("deadLetterQueue",l.target.value||void 0),placeholder:"dlq-name"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Queue for messages that fail processing"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"max-receive-count",children:"Max Receive Count"}),e.jsx(m,{id:"max-receive-count",type:"number",value:c.maxReceiveCount||"",onChange:l=>C("maxReceiveCount",l.target.value?Number(l.target.value):void 0),onBlur:()=>j("maxReceiveCount"),min:1,max:1e3,placeholder:"3",className:x.maxReceiveCount&&u.maxReceiveCount?"border-red-500":""}),x.maxReceiveCount&&u.maxReceiveCount&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),x.maxReceiveCount]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Messages moved to DLQ after this many receives (1-1000)"})]})]})]}),c.type==="fifo"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"FIFO Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{htmlFor:"content-based-dedup",children:"Content-Based Deduplication"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically deduplicate messages by content hash"})]}),e.jsx(_,{id:"content-based-dedup",checked:c.contentBasedDedup||!1,onCheckedChange:l=>C("contentBasedDedup",l)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"fifo-throughput-limit",children:"FIFO Throughput Limit"}),e.jsxs(L,{value:c.fifoThroughputLimit||"perQueue",onValueChange:l=>C("fifoThroughputLimit",l),children:[e.jsx(k,{id:"fifo-throughput-limit",children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(p,{value:"perQueue",children:"Per Queue"}),e.jsx(p,{value:"perMessageGroupId",children:"Per Message Group ID"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Throughput limit mode for FIFO queue"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{htmlFor:"high-throughput-fifo",children:"High-Throughput FIFO Mode"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable high-throughput mode for better performance with multiple message groups"})]}),e.jsx(_,{id:"high-throughput-fifo",checked:c.highThroughputFifo||!1,onCheckedChange:l=>C("highThroughputFifo",l)})]})]})]})]}),e.jsxs(Ce,{children:[e.jsx(M,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(M,{onClick:O,children:"Create Queue"})]})]})})}const je=["us-east-1","us-east-2","us-west-1","us-west-2","eu-west-1","eu-west-2","eu-west-3","eu-central-1","eu-north-1","ap-southeast-1","ap-southeast-2","ap-northeast-1","ap-northeast-2","ap-south-1","sa-east-1","ca-central-1","af-south-1","me-south-1"];function ss({open:b,onOpenChange:$,onSave:H,queue:y,existingQueueNames:g=[]}){const[a,c]=f.useState(null),[G,x]=f.useState(""),[o,u]=f.useState({}),[v,W]=f.useState({});if(f.useEffect(()=>{b&&y&&(c({...y}),x(y.name),u({}),W({}))},[b,y]),!a)return null;const C=()=>{const n={};if(!a.name||a.name.trim()==="")n.name="Queue name is required";else{const N=ce.validateQueueName(a.name,a.type);N.valid?a.name!==G&&g.includes(a.name)&&(n.name="Queue with this name already exists"):n.name=N.error||"Invalid queue name"}return!a.region||a.region.trim()===""?n.region="Region is required":je.includes(a.region)||(n.region="Invalid AWS region"),(a.visibilityTimeout<0||a.visibilityTimeout>43200)&&(n.visibilityTimeout="Visibility timeout must be between 0 and 43200 seconds"),(a.messageRetention<1||a.messageRetention>14)&&(n.messageRetention="Message retention must be between 1 and 14 days"),(a.delaySeconds<0||a.delaySeconds>900)&&(n.delaySeconds="Delay seconds must be between 0 and 900"),a.maxReceiveCount!==void 0&&(a.maxReceiveCount<1||a.maxReceiveCount>1e3)&&(n.maxReceiveCount="Max receive count must be between 1 and 1000"),a.accountId&&!/^\d{12}$/.test(a.accountId)&&(n.accountId="Account ID must be 12 digits"),u(n),Object.keys(n).length===0},j=(n,N)=>{if(!a)return;let R={...a,[n]:N};n==="type"&&(N==="fifo"&&!R.name.endsWith(".fifo")?R.name=R.name+".fifo":N==="standard"&&R.name.endsWith(".fifo")&&(R.name=R.name.slice(0,-5))),n==="name"&&a.type==="fifo"&&!N.endsWith(".fifo")&&(R.name=N+".fifo"),c(R),o[n]&&u({...o,[n]:""})},O=n=>{W({...v,[n]:!0}),C()},l=()=>{a&&(C()?(H(a,G),$(!1)):W(Object.fromEntries(["name","region","visibilityTimeout","messageRetention","delaySeconds","accountId"].map(N=>[N,!0]))))};return e.jsx(fe,{open:b,onOpenChange:$,children:e.jsxs(ve,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ne,{children:[e.jsx(ye,{children:"Edit SQS Queue"}),e.jsx(be,{children:"Update queue configuration and settings"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Basic Settings"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"queue-name",children:["Queue Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"queue-name",value:a.name,onChange:n=>j("name",n.target.value),onBlur:()=>O("name"),placeholder:a.type==="fifo"?"my-queue.fifo":"my-queue",className:o.name&&v.name?"border-red-500":""}),o.name&&v.name&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),o.name]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.type==="fifo"?"FIFO queue names must end with .fifo (1-80 characters)":"1-80 characters, alphanumeric, hyphens, underscores"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"queue-type",children:["Queue Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(L,{value:a.type,onValueChange:n=>j("type",n),children:[e.jsx(k,{id:"queue-type",children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(p,{value:"standard",children:"Standard Queue"}),e.jsx(p,{value:"fifo",children:"FIFO Queue"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.type==="fifo"?"Guaranteed order and exactly-once processing":"At-least-once delivery, high throughput"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"queue-region",children:["AWS Region ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(L,{value:a.region,onValueChange:n=>j("region",n),children:[e.jsx(k,{id:"queue-region",className:o.region&&v.region?"border-red-500":"",children:e.jsx(V,{})}),e.jsx(B,{children:je.map(n=>e.jsx(p,{value:n,children:n},n))})]}),o.region&&v.region&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),o.region]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"queue-account-id",children:"Account ID"}),e.jsx(m,{id:"queue-account-id",value:a.accountId||"",onChange:n=>j("accountId",n.target.value),onBlur:()=>O("accountId"),placeholder:"123456789012",className:o.accountId&&v.accountId?"border-red-500":""}),o.accountId&&v.accountId&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),o.accountId]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"12-digit AWS account ID for queue URLs and ARNs"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Delivery Settings"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"visibility-timeout",children:["Visibility Timeout (seconds) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"visibility-timeout",type:"number",value:a.visibilityTimeout,onChange:n=>j("visibilityTimeout",Number(n.target.value)),onBlur:()=>O("visibilityTimeout"),min:0,max:43200,className:o.visibilityTimeout&&v.visibilityTimeout?"border-red-500":""}),o.visibilityTimeout&&v.visibilityTimeout&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),o.visibilityTimeout]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time message is hidden after being received (0-43200)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"message-retention",children:["Message Retention (days) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"message-retention",type:"number",value:a.messageRetention,onChange:n=>j("messageRetention",Number(n.target.value)),onBlur:()=>O("messageRetention"),min:1,max:14,className:o.messageRetention&&v.messageRetention?"border-red-500":""}),o.messageRetention&&v.messageRetention&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),o.messageRetention]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"How long messages are kept (1-14 days)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"delay-seconds",children:["Delivery Delay (seconds) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"delay-seconds",type:"number",value:a.delaySeconds,onChange:n=>j("delaySeconds",Number(n.target.value)),onBlur:()=>O("delaySeconds"),min:0,max:900,className:o.delaySeconds&&v.delaySeconds?"border-red-500":""}),o.delaySeconds&&v.delaySeconds&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),o.delaySeconds]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delay before messages become available (0-900)"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Dead Letter Queue"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"dlq-name",children:"Dead Letter Queue Name"}),e.jsx(m,{id:"dlq-name",value:a.deadLetterQueue||"",onChange:n=>j("deadLetterQueue",n.target.value||void 0),placeholder:"dlq-name"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Queue for messages that fail processing"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"max-receive-count",children:"Max Receive Count"}),e.jsx(m,{id:"max-receive-count",type:"number",value:a.maxReceiveCount||"",onChange:n=>j("maxReceiveCount",n.target.value?Number(n.target.value):void 0),onBlur:()=>O("maxReceiveCount"),min:1,max:1e3,placeholder:"3",className:o.maxReceiveCount&&v.maxReceiveCount?"border-red-500":""}),o.maxReceiveCount&&v.maxReceiveCount&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),o.maxReceiveCount]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Messages moved to DLQ after this many receives (1-1000)"})]})]})]}),a.type==="fifo"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"FIFO Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{htmlFor:"content-based-dedup",children:"Content-Based Deduplication"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically deduplicate messages by content hash"})]}),e.jsx(_,{id:"content-based-dedup",checked:a.contentBasedDedup||!1,onCheckedChange:n=>j("contentBasedDedup",n)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"fifo-throughput-limit",children:"FIFO Throughput Limit"}),e.jsxs(L,{value:a.fifoThroughputLimit||"perQueue",onValueChange:n=>j("fifoThroughputLimit",n),children:[e.jsx(k,{id:"fifo-throughput-limit",children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(p,{value:"perQueue",children:"Per Queue"}),e.jsx(p,{value:"perMessageGroupId",children:"Per Message Group ID"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Throughput limit mode for FIFO queue"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(r,{htmlFor:"high-throughput-fifo",children:"High-Throughput FIFO Mode"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable high-throughput mode for better performance with multiple message groups"})]}),e.jsx(_,{id:"high-throughput-fifo",checked:a.highThroughputFifo||!1,onCheckedChange:n=>j("highThroughputFifo",n)})]})]})]})]}),e.jsxs(Ce,{children:[e.jsx(M,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(M,{onClick:l,children:"Save Changes"})]})]})})}function xs({componentId:b}){const{nodes:$,updateNode:H}=U(),y=$.find(s=>s.id===b);if(!y)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const g=y.data.config||{},a=g.queues||[],c=g.accessKeyId||"",G=g.secretAccessKey||"",x=g.defaultRegion||"us-east-1",o=g.defaultAccountId||"123456789012",u=g.iamPolicies||[],[v,W]=f.useState(null),[C,j]=f.useState(!1),[O,l]=f.useState(!1),[n,N]=f.useState(null),[R,ie]=f.useState(null),[as,Se]=f.useState(!1),[we,ne]=f.useState(null),[Y,de]=f.useState(""),[J,oe]=f.useState(""),[ee,Me]=f.useState("all");f.useEffect(()=>{if(!y||a.length===0)return;const{nodes:s,connections:i}=U.getState();A.updateNodesAndConnections(s,i)},[b,a.length,y?.id]),f.useEffect(()=>{if(!y||a.length===0)return;const s=setInterval(()=>{const i=A.getSQSRoutingEngine(b);if(!i)return;const d=i.getAllQueueMetrics(),t=y.data.config?.queues||[],h=t.map(D=>{const K=d.get(D.name);return K?{...D,approximateMessages:K.approximateMessages,approximateMessagesNotVisible:K.approximateMessagesNotVisible,approximateMessagesDelayed:K.approximateMessagesDelayed}:D});h.some((D,K)=>D.approximateMessages!==t[K]?.approximateMessages||D.approximateMessagesNotVisible!==t[K]?.approximateMessagesNotVisible||D.approximateMessagesDelayed!==t[K]?.approximateMessagesDelayed)&&H(b,{data:{...y.data,config:{...y.data.config,queues:h}}})},500);return()=>clearInterval(s)},[b,a.length,y?.id,H]);const S=s=>{H(b,{data:{...y.data,config:{...g,...s}}})},me=f.useMemo(()=>a.filter(s=>{const i=!J||s.name.toLowerCase().includes(J.toLowerCase()),d=ee==="all"||s.type===ee;return i&&d}),[a,J,ee]),Qe=s=>{const{nodes:i,connections:d}=U.getState();A.updateNodesAndConnections(i,d),S({queues:[...a,s]}),X(`Queue "${s.name}" created successfully`),setTimeout(()=>{const{nodes:t,connections:h}=U.getState();A.updateNodesAndConnections(t,h)},100)},Re=(s,i)=>{const d=a.findIndex(h=>h.name===i);if(d===-1){re("Queue not found");return}const t=[...a];if(s.name!==i){const h=A.getSQSRoutingEngine(b);h&&h.updateQueue(i,{name:s.name})}t[d]=s,S({queues:t}),X(`Queue "${s.name}" updated successfully`),setTimeout(()=>{const{nodes:h,connections:q}=U.getState();A.updateNodesAndConnections(h,q)},100)},Ie=s=>{const i=a[s];i&&(S({queues:a.filter((d,t)=>t!==s)}),X(`Queue "${i.name}" deleted successfully`),ie(null),setTimeout(()=>{const{nodes:d,connections:t}=U.getState();A.updateNodesAndConnections(d,t)},100))},De=s=>{const i=a[s];i&&(N({...i}),l(!0))},w=(s,i,d)=>{const t=[...a],h={...t[s],[i]:d};if(i==="name"){const q=ce.validateQueueName(d,h.type);if(!q.valid){re(`Queue name validation error: ${q.error||"Invalid queue name"}`);return}}if(i==="type"&&d==="fifo"&&!h.name.endsWith(".fifo")?h.name=h.name+".fifo":i==="type"&&d==="standard"&&h.name.endsWith(".fifo")&&(h.name=h.name.slice(0,-5)),t[s]=h,S({queues:t}),i==="name"&&d!==a[s].name){const q=A.getSQSRoutingEngine(b);q&&q.updateQueue(a[s].name,{name:d})}},Ae=()=>{const s={id:`policy-${Date.now()}`,principal:"*",action:"sqs:SendMessage",resource:"*",effect:"Allow"};S({iamPolicies:[...u,s]}),Se(!1),X("IAM policy added successfully")},Fe=s=>{S({iamPolicies:u.filter(i=>i.id!==s)}),X("IAM policy removed successfully")},Te=s=>{const i=a[s];if(i&&Y){const{nodes:d,connections:t}=U.getState();A.updateNodesAndConnections(d,t);const h=A.getSQSRoutingEngine(b);if(h)if(h.sendMessage(i.name,Y,new Blob([Y]).size,void 0,i.type==="fifo"?"test-group":void 0,i.type==="fifo"&&i.contentBasedDedup?void 0:`test-${Date.now()}`)){const D=h.getQueueMetrics(i.name);D&&(w(s,"approximateMessages",D.approximateMessages),w(s,"approximateMessagesNotVisible",D.approximateMessagesNotVisible),w(s,"approximateMessagesDelayed",D.approximateMessagesDelayed)),A.updateNodesAndConnections(d,t),X(`Test message sent to queue "${i.name}"`)}else re("Failed to send test message");else w(s,"approximateMessages",(i.approximateMessages||0)+1),X(`Test message sent to queue "${i.name}"`);de("")}},se=a.reduce((s,i)=>s+(i.approximateMessages||0),0),xe=a.reduce((s,i)=>s+(i.approximateMessagesNotVisible||0),0);return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Amazon SQS"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Simple Queue Service"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure and manage AWS SQS queues with delivery guarantees"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"AWS Console"]})]})]}),e.jsx(le,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(F,{children:[e.jsx(E,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-medium",children:"Total Queues"})}),e.jsxs(T,{children:[e.jsx("span",{className:"text-2xl font-bold",children:a.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active queues"})]})]}),e.jsxs(F,{children:[e.jsx(E,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-medium",children:"Total Messages"})}),e.jsxs(T,{children:[e.jsx("span",{className:"text-2xl font-bold",children:se.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Approximate count"}),e.jsx(z,{value:Math.min(se/1e5*100,100),className:`h-2 mt-2 ${se>5e4?"bg-red-500":se>1e4?"bg-yellow-500":"bg-green-500"}`})]})]}),e.jsxs(F,{children:[e.jsx(E,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-medium",children:"In Flight"})}),e.jsxs(T,{children:[e.jsx("span",{className:"text-2xl font-bold",children:xe.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Being processed"}),e.jsx(z,{value:Math.min(xe/5e3*100,100),className:"h-2 mt-2"})]})]}),e.jsxs(F,{children:[e.jsx(E,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-medium",children:"Default Region"})}),e.jsxs(T,{children:[e.jsx(I,{variant:"outline",children:x}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"AWS Region"})]})]})]}),e.jsxs(Ee,{defaultValue:"queues",className:"space-y-4",children:[e.jsxs(Pe,{className:"flex flex-wrap gap-2",children:[e.jsxs(ae,{value:"queues",className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Queues"}),e.jsx(I,{variant:"secondary",className:"ml-1",children:a.length})]}),e.jsxs(ae,{value:"credentials",className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Credentials"})]}),e.jsxs(ae,{value:"policies",className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"IAM Policies"}),e.jsx(I,{variant:"secondary",className:"ml-1",children:u.length})]}),e.jsxs(ae,{value:"monitoring",className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Monitoring"})]})]}),e.jsxs(te,{value:"queues",className:"space-y-4",children:[e.jsxs(F,{children:[e.jsx(E,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(P,{children:"Queues"}),e.jsx(Z,{children:"Manage SQS queues and their configuration"})]}),e.jsxs(M,{onClick:()=>j(!0),size:"sm",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Create Queue"]})]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:"Search queues by name...",value:J,onChange:s=>oe(s.target.value),className:"pl-9"}),J&&e.jsx(M,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>oe(""),children:e.jsx(Ve,{className:"h-3 w-3"})})]}),e.jsxs(L,{value:ee,onValueChange:s=>Me(s),children:[e.jsx(k,{className:"w-full sm:w-[180px]",children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(p,{value:"all",children:"All Types"}),e.jsx(p,{value:"standard",children:"Standard"}),e.jsx(p,{value:"fifo",children:"FIFO"})]})]})]}),me.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a.length===0?"No queues configured. Create your first queue to get started.":"No queues match your search criteria."}):e.jsx("div",{className:"space-y-4",children:me.map((s,i)=>{const d=a.findIndex(t=>t.name===s.name);return e.jsxs(F,{className:"border-l-4 border-l-orange-500",children:[e.jsx(E,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ge,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx(P,{className:"text-base",children:v===i?e.jsx(m,{value:s.name,onChange:t=>w(i,"name",t.target.value),onBlur:()=>W(null),onKeyDown:t=>{t.key==="Enter"&&W(null)},className:"h-7",autoFocus:!0}):e.jsx("span",{className:"cursor-pointer hover:text-primary",onClick:()=>W(i),children:s.name})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(I,{variant:s.type==="fifo"?"default":"outline",children:s.type==="fifo"?"FIFO":"Standard"}),e.jsx(I,{variant:"outline",children:s.region})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>De(d),title:"Edit queue",children:e.jsx(Be,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>ie(d),disabled:a.length===1,title:"Delete queue",children:e.jsx(he,{className:"h-4 w-4"})})]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Messages Available"}),(s.approximateMessages||0)>1e4&&e.jsx(I,{variant:"destructive",className:"text-xs",children:"High"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessages?.toLocaleString()||0}),e.jsx(z,{value:Math.min((s.approximateMessages||0)/5e4*100,100),className:`h-2 ${(s.approximateMessages||0)>1e4?"bg-red-500":(s.approximateMessages||0)>5e3?"bg-yellow-500":"bg-green-500"}`}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready to consume"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Flight"}),(s.approximateMessagesNotVisible||0)>1e3&&e.jsx(I,{variant:"outline",className:"text-xs",children:"Processing"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessagesNotVisible?.toLocaleString()||0}),e.jsx(z,{value:Math.min((s.approximateMessagesNotVisible||0)/2e3*100,100),className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being processed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delayed"}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessagesDelayed?.toLocaleString()||0}),e.jsx(z,{value:Math.min((s.approximateMessagesDelayed||0)/500*100,100),className:"h-2 bg-orange-500"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Waiting for delay"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Queue URL"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(I,{variant:"outline",className:"font-mono text-xs",children:s.region})}),(()=>{const h=A.getSQSRoutingEngine(b)?.getQueueUrl(s.name)||`https://sqs.${s.region}.amazonaws.com/${s.accountId||o}/${s.name}`;return e.jsx("p",{className:"text-xs font-mono text-muted-foreground truncate",title:h,children:h})})(),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:`h-1.5 w-1.5 rounded-full ${(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"bg-gray-400":(s.approximateMessages||0)<1e3?"bg-green-500":(s.approximateMessages||0)<1e4?"bg-yellow-500":"bg-red-500"}`}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"Idle":(s.approximateMessages||0)<1e3?"Healthy":(s.approximateMessages||0)<1e4?"Warning":"Critical"})]})]})]}),e.jsx(le,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Queue Type"}),e.jsxs(L,{value:s.type,onValueChange:t=>w(i,"type",t),children:[e.jsx(k,{children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(p,{value:"standard",children:"Standard Queue"}),e.jsx(p,{value:"fifo",children:"FIFO Queue"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Region"}),e.jsx(m,{value:s.region,onChange:t=>w(i,"region",t.target.value),placeholder:"us-east-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Visibility Timeout (seconds)"}),e.jsx(m,{type:"number",value:s.visibilityTimeout,onChange:t=>w(i,"visibilityTimeout",Number(t.target.value)),min:0,max:43200}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time a message is hidden after being received"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Message Retention Period (days)"}),e.jsx(m,{type:"number",value:s.messageRetention,onChange:t=>w(i,"messageRetention",Number(t.target.value)),min:1,max:14}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"How long messages are kept (1-14 days)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Delivery Delay (seconds)"}),e.jsx(m,{type:"number",value:s.delaySeconds,onChange:t=>w(i,"delaySeconds",Number(t.target.value)),min:0,max:900}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delay before messages become available (0-900 seconds)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Dead Letter Queue"}),e.jsx(m,{value:s.deadLetterQueue||"",onChange:t=>w(i,"deadLetterQueue",t.target.value),placeholder:"dlq-name"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Queue for messages that fail processing"})]}),s.type==="fifo"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Max Receive Count"}),e.jsx(m,{type:"number",value:s.maxReceiveCount||3,onChange:t=>w(i,"maxReceiveCount",Number(t.target.value)),min:1,max:1e3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Messages moved to DLQ after this many receives"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Content-Based Deduplication"}),e.jsx(_,{checked:s.contentBasedDedup||!1,onCheckedChange:t=>w(i,"contentBasedDedup",t)})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically deduplicate messages by content hash"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"FIFO Throughput Limit"}),e.jsxs(L,{value:s.fifoThroughputLimit||"perQueue",onValueChange:t=>w(i,"fifoThroughputLimit",t),children:[e.jsx(k,{children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(p,{value:"perQueue",children:"Per Queue"}),e.jsx(p,{value:"perMessageGroupId",children:"Per Message Group ID"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Throughput limit mode for FIFO queue"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"High-Throughput FIFO Mode"}),e.jsx(_,{checked:s.highThroughputFifo||!1,onCheckedChange:t=>w(i,"highThroughputFifo",t)})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable high-throughput mode for better performance with multiple message groups"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Account ID"}),e.jsx(m,{value:s.accountId||o,onChange:t=>w(i,"accountId",t.target.value),placeholder:"123456789012"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AWS account ID for queue URLs and ARNs"})]})]}),e.jsx(le,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Send Test Message"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{value:Y,onChange:t=>de(t.target.value),placeholder:"Enter test message..."}),e.jsxs(M,{size:"sm",onClick:()=>Te(d),disabled:!Y,children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Send"]})]})]})]})]},i)})})]})]}),e.jsx(es,{open:C,onOpenChange:j,onSave:Qe,defaultRegion:x,defaultAccountId:o,existingQueueNames:a.map(s=>s.name)}),e.jsx(ss,{open:O,onOpenChange:l,onSave:Re,queue:n,existingQueueNames:a.map(s=>s.name)}),e.jsx(We,{open:R!==null,onOpenChange:s=>!s&&ie(null),children:e.jsxs(Oe,{children:[e.jsxs($e,{children:[e.jsx(qe,{children:"Delete Queue"}),e.jsxs(Ke,{children:['Are you sure you want to delete the queue "',a[R||0]?.name,'"? This action cannot be undone and all messages in the queue will be lost.']})]}),e.jsxs(ze,{children:[e.jsx(He,{children:"Cancel"}),e.jsx(Ge,{onClick:()=>R!==null&&Ie(R),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]}),e.jsx(te,{value:"credentials",className:"space-y-4",children:e.jsxs(F,{children:[e.jsxs(E,{children:[e.jsx(P,{children:"AWS Credentials"}),e.jsx(Z,{children:"Configure AWS access credentials for SQS"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"accessKeyId",children:"Access Key ID"}),e.jsx(m,{id:"accessKeyId",value:c,onChange:s=>S({accessKeyId:s.target.value}),placeholder:"AKIAIOSFODNN7EXAMPLE"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"secretAccessKey",children:"Secret Access Key"}),e.jsx(m,{id:"secretAccessKey",type:"password",value:G,onChange:s=>S({secretAccessKey:s.target.value}),placeholder:"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"defaultRegion",children:"Default Region"}),e.jsx(m,{id:"defaultRegion",value:x,onChange:s=>S({defaultRegion:s.target.value}),placeholder:"us-east-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"defaultAccountId",children:"Default Account ID"}),e.jsx(m,{id:"defaultAccountId",value:o,onChange:s=>S({defaultAccountId:s.target.value}),placeholder:"123456789012"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AWS account ID used for queue URLs and ARNs"})]}),e.jsx("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[e.jsx("strong",{children:"Security Note:"})," In production, use IAM roles or environment variables instead of hardcoding credentials."]})})]})]})}),e.jsx(te,{value:"policies",className:"space-y-4",children:e.jsxs(F,{children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(P,{children:"IAM Policies"}),e.jsx(Z,{children:"Configure access policies for queues"})]}),e.jsxs(M,{onClick:Ae,size:"sm",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Add Policy"]})]})}),e.jsx(T,{children:u.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No policies configured"}):e.jsx("div",{className:"space-y-2",children:u.map(s=>e.jsx(F,{className:"border-l-4 border-l-blue-500",children:e.jsx(T,{className:"pt-4",children:we===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Principal"}),e.jsx(m,{value:s.principal,onChange:i=>{const d=u.map(t=>t.id===s.id?{...t,principal:i.target.value}:t);S({iamPolicies:d})},placeholder:"* or arn:aws:iam::..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Action"}),e.jsxs(L,{value:s.action,onValueChange:i=>{const d=u.map(t=>t.id===s.id?{...t,action:i}:t);S({iamPolicies:d})},children:[e.jsx(k,{children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(p,{value:"sqs:SendMessage",children:"SendMessage"}),e.jsx(p,{value:"sqs:ReceiveMessage",children:"ReceiveMessage"}),e.jsx(p,{value:"sqs:DeleteMessage",children:"DeleteMessage"}),e.jsx(p,{value:"sqs:GetQueueAttributes",children:"GetQueueAttributes"}),e.jsx(p,{value:"sqs:*",children:"All Actions (*)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Resource"}),e.jsx(m,{value:s.resource,onChange:i=>{const d=u.map(t=>t.id===s.id?{...t,resource:i.target.value}:t);S({iamPolicies:d})},placeholder:"* or queue name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Effect"}),e.jsxs(L,{value:s.effect,onValueChange:i=>{const d=u.map(t=>t.id===s.id?{...t,effect:i}:t);S({iamPolicies:d})},children:[e.jsx(k,{children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(p,{value:"Allow",children:"Allow"}),e.jsx(p,{value:"Deny",children:"Deny"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",onClick:()=>ne(null),children:"Save"}),e.jsx(M,{size:"sm",variant:"outline",onClick:()=>ne(null),children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Principal"}),e.jsx("p",{className:"text-sm font-medium",children:s.principal})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Action"}),e.jsx(I,{variant:"outline",children:s.action})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Resource"}),e.jsx("p",{className:"text-sm font-medium truncate",title:s.resource,children:s.resource})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Effect"}),e.jsx(I,{variant:s.effect==="Allow"?"default":"destructive",children:s.effect})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>ne(s.id),children:e.jsx(Ue,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>Fe(s.id),children:e.jsx(he,{className:"h-4 w-4"})})]})]})})},s.id))})})]})}),e.jsxs(te,{value:"monitoring",className:"space-y-4",children:[e.jsxs(F,{children:[e.jsxs(E,{children:[e.jsx(P,{children:"Queue Monitoring"}),e.jsx(Z,{children:"Monitor queue metrics and performance"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:a.map((s,i)=>e.jsxs(F,{className:"border-l-4 border-l-green-500",children:[e.jsx(E,{className:"pb-3",children:e.jsx(P,{className:"text-base",children:s.name})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Messages Available"}),(s.approximateMessages||0)>1e4&&e.jsx(I,{variant:"destructive",className:"text-xs",children:"High"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessages?.toLocaleString()||0}),e.jsx(z,{value:Math.min((s.approximateMessages||0)/5e4*100,100),className:`h-2 ${(s.approximateMessages||0)>1e4?"bg-red-500":(s.approximateMessages||0)>5e3?"bg-yellow-500":"bg-green-500"}`}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready to consume"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Flight"}),(s.approximateMessagesNotVisible||0)>1e3&&e.jsx(I,{variant:"outline",className:"text-xs",children:"Processing"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessagesNotVisible?.toLocaleString()||0}),e.jsx(z,{value:Math.min((s.approximateMessagesNotVisible||0)/2e3*100,100),className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being processed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delayed"}),e.jsx("p",{className:"text-2xl font-bold",children:s.approximateMessagesDelayed?.toLocaleString()||0}),e.jsx(z,{value:Math.min((s.approximateMessagesDelayed||0)/500*100,100),className:"h-2 bg-orange-500"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Waiting for delay"})]})]}),e.jsxs("div",{className:"mt-4 p-3 rounded-md border bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"bg-gray-400":(s.approximateMessages||0)<1e3?"bg-green-500 animate-pulse":(s.approximateMessages||0)<1e4?"bg-yellow-500":"bg-red-500 animate-pulse"}`}),e.jsx("span",{className:"text-sm font-medium",children:"Queue Health"})]}),e.jsx(I,{variant:(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"secondary":(s.approximateMessages||0)<1e3?"default":(s.approximateMessages||0)<1e4?"outline":"destructive",children:(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"Idle":(s.approximateMessages||0)<1e3?"Healthy":(s.approximateMessages||0)<1e4?"Warning":"Critical"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:(s.approximateMessages||0)===0&&(s.approximateMessagesNotVisible||0)===0?"Queue is idle with no messages":(s.approximateMessages||0)<1e3?"Queue is operating normally":(s.approximateMessages||0)<1e4?"Queue has high message count, consider scaling consumers":"Queue is critically overloaded, immediate action required"})]})]})]},i))})})]}),e.jsxs(F,{children:[e.jsxs(E,{children:[e.jsx(P,{children:"Metrics Export"}),e.jsx(Z,{children:"Configure Prometheus metrics export via CloudWatch exporter"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Enable Metrics Export"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Export SQS metrics via CloudWatch exporter for Prometheus scraping"})]}),e.jsx(_,{checked:g.metrics?.enabled??!0,onCheckedChange:s=>S({metrics:{...g.metrics,enabled:s,port:g.metrics?.port||9102,path:g.metrics?.path||"/metrics"}})})]}),g.metrics?.enabled!==!1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Metrics Port (CloudWatch Exporter)"}),e.jsx(m,{type:"number",value:g.metrics?.port??9102,onChange:s=>S({metrics:{...g.metrics,port:parseInt(s.target.value)||9102,path:g.metrics?.path||"/metrics"}}),min:1024,max:65535}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Port for CloudWatch exporter metrics endpoint"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Metrics Path"}),e.jsx(m,{type:"text",value:g.metrics?.path??"/metrics",onChange:s=>S({metrics:{...g.metrics,path:s.target.value||"/metrics",port:g.metrics?.port||9102}}),placeholder:"/metrics"})]})]})]})]})]})]})]})})}export{xs as AWSSQSConfigAdvanced};

import{u as U,j as e,r as j,i as f,S as b,C as r,e as c,f as d,k as i,A as E,Z as W,T as Y,a as _,b as u,N as L,c as ee,d as p,h as g,L as t,n as M,o as q,p as A,q as B,s as I,B as N,X as se,I as C,t as y}from"./index-D0eJihqw.js";import{T as z}from"./textarea-DSx3fPqa.js";import{R as ae}from"./refresh-ccw-DqkQ7qOS.js";import{S}from"./server-D89dmAV3.js";import{C as D}from"./circle-check-big-BIpSuQBt.js";function de({componentId:w}){const{nodes:H,updateNode:O}=U(),v=H.find(s=>s.id===w);if(!v)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const a=v.data.config||{},o=a.services||[],n=a.calls||[],V=a.endpoint||"localhost:50051",F=a.reflectionEnabled??!0,J=a.totalCalls||n.length,X=a.successRate||(n.length>0?n.filter(s=>s.status==="success").length/n.length*100:0),Z=a.averageLatency||(n.length>0?n.reduce((s,l)=>s+(l.duration||0),0)/n.length:0),[m,$]=j.useState(""),[h,k]=j.useState(""),[R,T]=j.useState("{}"),[G,P]=j.useState(""),x=s=>{O(w,{data:{...v.data,config:{...a,...s}}})},K=()=>{if(!m||!h)return;const s={id:`call-${Date.now()}`,service:m,method:h,request:R,response:JSON.stringify({success:!0,data:{}},null,2),status:"success",timestamp:new Date().toISOString(),duration:Math.floor(Math.random()*50)+10};P(s.response),x({calls:[...n,s]})};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"gRPC"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"gRPC Service"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"High-performance RPC framework"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(b,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(r,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Services"}),e.jsx(S,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:o.length}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"registered"})]})})]}),e.jsxs(r,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Calls"}),e.jsx(E,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:J}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"total"})]})})]}),e.jsxs(r,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsx(D,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(i,{children:e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[X.toFixed(1),"%"]})})})]}),e.jsxs(r,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Avg Latency"}),e.jsx(W,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-cyan-600 dark:text-cyan-400",children:Z.toFixed(0)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"ms"})]})})]})]}),e.jsxs(Y,{defaultValue:"test",className:"space-y-4",children:[e.jsxs(_,{children:[e.jsxs(u,{value:"test",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Test Client"]}),e.jsxs(u,{value:"services",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Services (",o.length,")"]}),e.jsxs(u,{value:"history",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Call History (",n.length,")"]}),e.jsxs(u,{value:"settings",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(p,{value:"test",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"gRPC Test Client"}),e.jsx(g,{children:"Test gRPC methods and services"})]}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Service"}),e.jsxs(M,{value:m,onValueChange:s=>{$(s);const l=o.find(Q=>Q.name===s);l&&l.methods.length>0&&k(l.methods[0].name)},children:[e.jsx(q,{children:e.jsx(A,{placeholder:"Select service"})}),e.jsx(B,{children:o.map(s=>e.jsx(I,{value:s.name,children:s.name},s.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Method"}),e.jsxs(M,{value:h,onValueChange:k,children:[e.jsx(q,{children:e.jsx(A,{placeholder:"Select method"})}),e.jsx(B,{children:m&&o.find(s=>s.name===m)?.methods.map(s=>e.jsxs(I,{value:s.name,children:[s.name," (",s.streaming||"unary",")"]},s.name))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Request (JSON)"}),e.jsx(z,{value:R,onChange:s=>T(s.target.value),className:"font-mono text-sm min-h-[200px]",placeholder:'{ "id": "1" }'})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Response"}),e.jsx(z,{value:G,readOnly:!0,className:"font-mono text-sm min-h-[200px] bg-muted",placeholder:"Response will appear here..."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{onClick:K,disabled:!m||!h,children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Execute Call"]}),e.jsx(f,{variant:"outline",onClick:()=>{T("{}"),P("")},children:"Clear"})]})]})]})}),e.jsx(p,{value:"services",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Services"}),e.jsx(g,{children:"Registered gRPC services and methods"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:o.map(s=>e.jsxs(r,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(S,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(d,{className:"text-lg font-semibold",children:s.name}),e.jsxs(N,{variant:"outline",className:"mt-2",children:[s.methods.length," methods"]})]})]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-2",children:s.methods.map(l=>e.jsxs("div",{className:"p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono font-semibold",children:l.name}),e.jsx(N,{variant:"outline",className:"text-xs",children:l.streaming||"unary"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-mono",children:l.inputType}),e.jsx("span",{className:"mx-2",children:"â†’"}),e.jsx("span",{className:"font-mono",children:l.outputType})]})]},l.name))})})]},s.name))})})]})}),e.jsx(p,{value:"history",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Call History"}),e.jsx(g,{children:"Previously executed gRPC calls"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs(r,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(c,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.status==="success"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:s.status==="success"?e.jsx(D,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):e.jsx(se,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsxs(d,{className:"text-lg font-semibold",children:[s.service,".",s.method]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.duration&&e.jsxs(N,{variant:"outline",children:[s.duration,"ms"]}),e.jsx(N,{variant:s.status==="success"?"default":"destructive",children:s.status})]})]})]})})}),e.jsxs(i,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.request&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Request"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto",children:s.request})]}),s.response&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Response"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto",children:s.response})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(s.timestamp).toLocaleString()})]})]},s.id))})})]})}),e.jsx(p,{value:"settings",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"gRPC Settings"}),e.jsx(g,{children:"Service configuration"})]}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Endpoint"}),e.jsx(C,{value:V,onChange:s=>x({endpoint:s.target.value}),placeholder:"localhost:50051"})]}),e.jsx(b,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{children:"Enable Reflection"}),e.jsx(y,{checked:F,onCheckedChange:s=>x({reflectionEnabled:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{children:"Enable TLS"}),e.jsx(y,{checked:a.enableTLS??!1,onCheckedChange:s=>x({enableTLS:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{children:"Enable Compression"}),e.jsx(y,{checked:a.enableCompression??!0,onCheckedChange:s=>x({enableCompression:s})})]}),e.jsx(b,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Max Message Size (MB)"}),e.jsx(C,{type:"number",value:a.maxMessageSize??4,onChange:s=>x({maxMessageSize:parseInt(s.target.value)||4}),min:1,max:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Keep Alive Time (seconds)"}),e.jsx(C,{type:"number",value:a.keepAliveTime??30,onChange:s=>x({keepAliveTime:parseInt(s.target.value)||30}),min:1})]})]})]})})]})]})})}export{de as GRPCConfigAdvanced};

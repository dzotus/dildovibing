import{u as fs,a as bs,r as v,j as e,e as U,S as B,C as h,h as A,i as P,m as N,B as ce,T as ys,b as Cs,c as X,d as ws,a4 as Ss,a6 as ks,f as Z,k as G,L as c,q,s as I,t as O,v as $,w as o,I as l,l as d,P as V,o as Q,x as b,al as Ms,a5 as Ts,R as Ds,ax as As,n as Es}from"./index-Cd-JdYDo.js";import{T as qe}from"./textarea-C1mJ7m6P.js";import{A as Ie,b as Oe}from"./alert-COoj_6TI.js";import{T as Rs,a as Ls,b as De,c as Y,d as zs,e as K}from"./table-BSfKM3ec.js";import{M as $e}from"./message-square-B4o7a5LA.js";import{S as Bs}from"./shield-CAEKtRsh.js";import{K as Ps}from"./key-HGHDqOMX.js";import{C as Ve}from"./clock-DvJXn7Y9.js";import{C as Qs}from"./circle-check-big-Cu7gDr-H.js";function Zs({componentId:w}){const{nodes:Fe,updateNode:fe}=fs(),{isRunning:re}=bs(),H=Fe.find(s=>s.id===w),le=v.useRef(H);if(v.useEffect(()=>{le.current=H},[H]),!H)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const S=H.data.config||{},de=S.namespace||"archiphoenix.servicebus.windows.net",We=S.connectionString||"",R=S.queues||[],C=S.topics||[],[qs,Is]=v.useState(null),[Os,$s]=v.useState(null),[be,ye]=v.useState({}),[ee,Ce]=v.useState({}),[_,oe]=v.useState({}),[x,He]=v.useState("queue"),[f,Ae]=v.useState(""),[j,Ee]=v.useState(""),[y,we]=v.useState(""),[J,ue]=v.useState(!1),[te,me]=v.useState(!1),[he,xe]=v.useState(!1),[ne,je]=v.useState(!1),[pe,Se]=v.useState([]),[ge,Ue]=v.useState("");v.useEffect(()=>{if(!H||R.length===0&&C.length===0||!re)return;const s=setInterval(()=>{const a=U.getAzureServiceBusRoutingEngine(w);if(!a)return;const t=le.current;if(!t)return;const n=t.data.config||{},i=n.queues||[],r=n.topics||[],g=a.getAllQueueMetrics(),m=a.getAllSubscriptionMetrics(),ve=i.map(k=>{const M=g.get(k.name);return M?{...k,activeMessageCount:M.activeMessageCount,deadLetterMessageCount:M.deadLetterMessageCount,scheduledMessageCount:M.scheduledMessageCount,deferredMessageCount:M.deferredMessageCount||0}:k}),Qe=r.map(k=>{const M=(k.subscriptions||[]).map(se=>{const ie=`${k.name}/subscriptions/${se.name}`,ae=m.get(ie);return ae?{...se,activeMessageCount:ae.activeMessageCount,deadLetterMessageCount:ae.deadLetterMessageCount||0,deferredMessageCount:ae.deferredMessageCount||0}:se});return{...k,subscriptions:M}}),vs=ve.some((k,M)=>k.activeMessageCount!==i[M]?.activeMessageCount||k.deadLetterMessageCount!==i[M]?.deadLetterMessageCount||k.scheduledMessageCount!==i[M]?.scheduledMessageCount||k.deferredMessageCount!==(i[M]?.deferredMessageCount||0)),Ns=Qe.some((k,M)=>{const se=r[M];return se?(k.subscriptions||[]).some((ie,ae)=>{const Ne=se.subscriptions?.[ae];return Ne?ie.activeMessageCount!==Ne.activeMessageCount||ie.deadLetterMessageCount!==(Ne.deadLetterMessageCount||0)||ie.deferredMessageCount!==(Ne.deferredMessageCount||0):!1}):!1});(vs||Ns)&&le.current&&fe(w,{data:{...le.current.data,config:{...n,queues:ve,topics:Qe}}})},500);return()=>clearInterval(s)},[w,R.length,C.length,H?.id,fe,re]);const ke=s=>!s||s.trim()===""?"Name cannot be empty":s.length<1||s.length>260?"Name must be between 1 and 260 characters":/^[a-zA-Z0-9._-]+$/.test(s)?s.startsWith(".")||s.endsWith(".")?"Name cannot start or end with a period":s.startsWith("-")||s.endsWith("-")?"Name cannot start or end with a hyphen":s.includes("..")?"Name cannot contain consecutive periods":null:"Name can only contain letters, numbers, periods, hyphens, and underscores",T=s=>{fe(w,{data:{...H.data,config:{...S,...s}}})},Ke=()=>{const s={name:"new-queue",namespace:de,maxSizeInMegabytes:1024,defaultMessageTimeToLive:2592e3,lockDuration:30,maxDeliveryCount:10,enablePartitioning:!1,enableDeadLetteringOnMessageExpiration:!0,enableSessions:!1,enableDuplicateDetection:!1,duplicateDetectionHistoryTimeWindow:600,forwardTo:void 0,enableBatchedOperations:!1,activeMessageCount:0,deadLetterMessageCount:0,scheduledMessageCount:0};T({queues:[...R,s]})},_e=s=>{const a={};for(const[t,n]of Object.entries(be)){const i=Number(t);i<s?a[i]=n:i>s&&(a[i-1]=n)}ye(a),T({queues:R.filter((t,n)=>n!==s)})},E=(s,a,t)=>{if(a==="name"){const i=ke(t);if(i){ye({...be,[s]:i});return}else{const r={...be};delete r[s],ye(r)}}const n=[...R];n[s]={...n[s],[a]:t},T({queues:n})},Je=()=>{const s={name:"new-topic",namespace:de,maxSizeInMegabytes:1024,defaultMessageTimeToLive:2592e3,enablePartitioning:!1,enableDuplicateDetection:!1,duplicateDetectionHistoryTimeWindow:600,forwardTo:void 0,enableBatchedOperations:!1,subscriptions:[]};T({topics:[...C,s]})},Xe=s=>{const a={};for(const[n,i]of Object.entries(ee)){const r=Number(n);r<s?a[r]=i:r>s&&(a[r-1]=i)}Ce(a);const t={};for(const[n,i]of Object.entries(_)){const[r,g]=n.split("-").map(Number);r<s?t[n]=i:r>s&&(t[`${r-1}-${g}`]=i)}oe(t),T({topics:C.filter((n,i)=>i!==s)})},L=(s,a,t)=>{if(a==="name"){const i=ke(t);if(i){Ce({...ee,[s]:i});return}else{const r={...ee};delete r[s],Ce(r)}}const n=[...C];n[s]={...n[s],[a]:t},T({topics:n})},Ze=s=>{const a=C[s];if(a){const t={name:"new-subscription",maxDeliveryCount:10,lockDuration:30,enableDeadLetteringOnMessageExpiration:!0,requiresSession:!1,forwardTo:void 0,enableBatchedOperations:!1,rules:[],activeMessageCount:0},n=[...a.subscriptions||[],t];L(s,"subscriptions",n)}},Ge=(s,a)=>{const t={};for(const[i,r]of Object.entries(_)){const[g,m]=i.split("-").map(Number);g!==s||m<a?t[i]=r:m>a&&(t[`${s}-${m-1}`]=r)}oe(t);const n=C[s];if(n&&n.subscriptions){const i=n.subscriptions.filter((r,g)=>g!==a);L(s,"subscriptions",i)}},D=(s,a,t,n)=>{if(t==="name"){const r=`${s}-${a}`,g=ke(n);if(g){oe({..._,[r]:g});return}else{const m={..._};delete m[r],oe(m)}}const i=C[s];if(i&&i.subscriptions){const r=[...i.subscriptions];r[a]={...r[a],[t]:n},L(s,"subscriptions",r)}},Ye=R.reduce((s,a)=>s+(a.activeMessageCount||0),0)+C.reduce((s,a)=>s+(a.subscriptions?.reduce((t,n)=>t+(n.activeMessageCount||0),0)||0),0),u=S.networking||{publicNetworkAccess:"enabled",minimumTlsVersion:"1.2",firewallRules:[],virtualNetworkRules:[],privateEndpoints:[]},z=s=>{T({networking:{...u,...s}})},es=()=>{const s={name:"new-firewall-rule",ipRange:"0.0.0.0/0"};z({firewallRules:[...u.firewallRules||[],s]})},ss=s=>{const a=[...u.firewallRules||[]];a.splice(s,1),z({firewallRules:a})},Re=(s,a,t)=>{const n=[...u.firewallRules||[]];n[s]={...n[s],[a]:t},z({firewallRules:n})},as=()=>{const s={name:"new-vnet-rule",subnetId:"/subscriptions/.../subnets/..."};z({virtualNetworkRules:[...u.virtualNetworkRules||[],s]})},ts=s=>{const a=[...u.virtualNetworkRules||[]];a.splice(s,1),z({virtualNetworkRules:a})},Le=(s,a,t)=>{const n=[...u.virtualNetworkRules||[]];n[s]={...n[s],[a]:t},z({virtualNetworkRules:n})},ns=()=>{const s={name:"new-private-endpoint",subnetId:"/subscriptions/.../subnets/..."};z({privateEndpoints:[...u.privateEndpoints||[],s]})},is=s=>{const a=[...u.privateEndpoints||[]];a.splice(s,1),z({privateEndpoints:a})},ze=(s,a,t)=>{const n=[...u.privateEndpoints||[]];n[s]={...n[s],[a]:t},z({privateEndpoints:n})},p=S.security||{sasPolicies:[],rbacAssignments:[],managedIdentities:[]},F=s=>{T({security:{...p,...s}})},cs=()=>{const s={name:"new-sas-policy",permissions:["Send","Listen"]};F({sasPolicies:[...p.sasPolicies||[],s]})},rs=s=>{const a=[...p.sasPolicies||[]];a.splice(s,1),F({sasPolicies:a})},Be=(s,a,t)=>{const n=[...p.sasPolicies||[]];n[s]={...n[s],[a]:t},F({sasPolicies:n})},Me=(s,a)=>{const t=p.sasPolicies?.[s];if(!t)return;const n=[...t.permissions||[]],i=n.indexOf(a);i>=0?n.splice(i,1):n.push(a),Be(s,"permissions",n)},ls=()=>{const s={principalId:"",role:"Reader"};F({rbacAssignments:[...p.rbacAssignments||[],s]})},ds=s=>{const a=[...p.rbacAssignments||[]];a.splice(s,1),F({rbacAssignments:a})},Pe=(s,a,t)=>{const n=[...p.rbacAssignments||[]];n[s]={...n[s],[a]:t},F({rbacAssignments:n})},os=()=>{const s={name:"new-identity",type:"SystemAssigned"};F({managedIdentities:[...p.managedIdentities||[],s]})},us=s=>{const a=[...p.managedIdentities||[]];a.splice(s,1),F({managedIdentities:a})},Te=(s,a,t)=>{const n=[...p.managedIdentities||[]];n[s]={...n[s],[a]:t},F({managedIdentities:n})},W=()=>{const s=U.getAzureServiceBusRoutingEngine(w);if(!s){Se([]);return}let a=[];if(x==="queue"&&f?J?a=s.getDeadLetterQueueMessages(f):te?a=s.getDeferredQueueMessages(f):he?a=s.getScheduledQueueMessages(f):ne?a=s.getLockedQueueMessages(f):a=s.peekQueueMessages(f,100):x==="subscription"&&j&&y&&(J?a=s.getDeadLetterSubscriptionMessages(j,y):te?a=s.getDeferredSubscriptionMessages(j,y):ne?a=s.getLockedSubscriptionMessages(j,y):a=s.peekSubscriptionMessages(j,y,100)),ge){const t=ge.toLowerCase();a=a.filter(n=>n.messageId?.toLowerCase().includes(t)||n.id?.toLowerCase().includes(t)||JSON.stringify(n.properties||{}).toLowerCase().includes(t)||JSON.stringify(n.payload).toLowerCase().includes(t))}Se(a)},ms=s=>{const a=U.getAzureServiceBusRoutingEngine(w);if(!a)return;const t=x==="queue"?f:`${j}/subscriptions/${y}`;a.completeMessage(t,s),W()},hs=s=>{const a=U.getAzureServiceBusRoutingEngine(w);if(!a)return;const t=x==="queue"?f:`${j}/subscriptions/${y}`;a.abandonMessage(t,s),W()},xs=s=>{const a=U.getAzureServiceBusRoutingEngine(w);if(!a)return;const t=x==="queue"?f:`${j}/subscriptions/${y}`;a.deferMessage(t,s),W()},js=s=>{const a=U.getAzureServiceBusRoutingEngine(w);if(!a)return;const t=x==="queue"?f:`${j}/subscriptions/${y}`;a.sendToDeadLetter(t,s),W()},ps=s=>{const a=U.getAzureServiceBusRoutingEngine(w);if(!a)return;const t=x==="queue"?f:`${j}/subscriptions/${y}`;a.resubmitMessage(t,s),W()},gs=s=>{const a=U.getAzureServiceBusRoutingEngine(w);if(!a)return;const t=x==="queue"?f:`${j}/subscriptions/${y}`;a.deleteDeadLetterMessage(t,s),W()};return v.useEffect(()=>{x==="queue"&&f||x==="subscription"&&j&&y?W():Se([])},[x,f,j,y,J,te,he,ne,ge,w]),v.useEffect(()=>{if(!re)return;const s=setInterval(()=>{(x==="queue"&&f||x==="subscription"&&j&&y)&&W()},1e3);return()=>clearInterval(s)},[re,x,f,j,y,J,te,he,ne,w]),e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Azure Service Bus"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Service Bus Namespace"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure queues, topics and subscriptions with sessions and dead-lettering"})]})}),e.jsx(B,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(h,{children:[e.jsx(A,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-medium",children:"Namespace"})}),e.jsx(N,{children:e.jsx(ce,{variant:"outline",className:"truncate max-w-full",children:de})})]}),e.jsxs(h,{children:[e.jsx(A,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-medium",children:"Queues"})}),e.jsx(N,{children:e.jsx("span",{className:"text-2xl font-bold",children:R.length})})]}),e.jsxs(h,{children:[e.jsx(A,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-medium",children:"Topics"})}),e.jsx(N,{children:e.jsx("span",{className:"text-2xl font-bold",children:C.length})})]}),e.jsxs(h,{children:[e.jsx(A,{className:"pb-3",children:e.jsx(P,{className:"text-sm font-medium",children:"Total Messages"})}),e.jsx(N,{children:e.jsx("span",{className:"text-2xl font-bold",children:Ye.toLocaleString()})})]})]}),e.jsxs(ys,{defaultValue:"queues",className:"space-y-4",children:[e.jsxs(Cs,{className:"flex-wrap h-auto",children:[e.jsxs(X,{value:"namespace",className:"flex-shrink-0",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Namespace Settings"]}),e.jsxs(X,{value:"queues",className:"flex-shrink-0",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Queues (",R.length,")"]}),e.jsxs(X,{value:"topics",className:"flex-shrink-0",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Topics (",C.length,")"]}),e.jsxs(X,{value:"networking",className:"flex-shrink-0",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Networking"]}),e.jsxs(X,{value:"security",className:"flex-shrink-0",children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Security"]}),e.jsxs(X,{value:"connection",className:"flex-shrink-0",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Connection"]}),e.jsxs(X,{value:"messages",className:"flex-shrink-0",children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"Message Explorer"]})]}),e.jsx(Z,{value:"namespace",className:"space-y-4",children:e.jsxs(h,{children:[e.jsxs(A,{children:[e.jsx(P,{children:"Namespace Settings"}),e.jsx(G,{children:"Configure Azure Service Bus namespace tier and capacity"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Pricing Tier"}),e.jsxs(q,{value:S.pricingTier||"standard",onValueChange:s=>T({pricingTier:s}),children:[e.jsx(I,{children:e.jsx(O,{})}),e.jsxs($,{children:[e.jsx(o,{value:"basic",children:"Basic"}),e.jsx(o,{value:"standard",children:"Standard"}),e.jsx(o,{value:"premium",children:"Premium"})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[S.pricingTier==="basic"&&"Basic tier: 1000 msg/s, 256KB message size limit",S.pricingTier==="standard"&&"Standard tier: 10000 msg/s, 256KB message size limit",S.pricingTier==="premium"&&"Premium tier: 100000 msg/s per messaging unit, 100MB message size limit"]})]}),S.pricingTier==="premium"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Messaging Units"}),e.jsx(l,{type:"number",min:1,max:16,value:S.messagingUnits||1,onChange:s=>T({messagingUnits:Math.max(1,Math.min(16,Number(s.target.value)))}),placeholder:"1"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of messaging units (1-16). Each unit provides 100000 msg/s throughput."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Consumption Rate (messages/second)"}),e.jsx(l,{type:"number",min:1,value:S.consumptionRate||10,onChange:s=>T({consumptionRate:Math.max(1,Number(s.target.value))}),placeholder:"10"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rate at which messages are consumed from queues/subscriptions and sent to outgoing connections."})]})]})]})}),e.jsx(Z,{value:"queues",className:"space-y-4",children:e.jsxs(h,{children:[e.jsx(A,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(P,{children:"Queues"}),e.jsx(G,{children:"Configure Service Bus queues"})]}),e.jsxs(d,{onClick:Ke,size:"sm",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Create Queue"]})]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:R.map((s,a)=>e.jsxs(h,{className:"border-l-4 border-l-blue-500",children:[e.jsx(A,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(c,{children:"Queue Name"}),e.jsx(l,{value:s.name,onChange:t=>E(a,"name",t.target.value),placeholder:"queue-name"})]}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>_e(a),disabled:R.length===1,className:"ml-4",children:e.jsx(Q,{className:"h-4 w-4"})})]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Messages"}),e.jsx("p",{className:"text-lg font-semibold",children:s.activeMessageCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dead Letter"}),e.jsx("p",{className:"text-lg font-semibold",children:s.deadLetterMessageCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled"}),e.jsx("p",{className:"text-lg font-semibold",children:s.scheduledMessageCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Deferred"}),e.jsx("p",{className:"text-lg font-semibold",children:s.deferredMessageCount||0})]})]}),e.jsx(B,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Max Size (MB)"}),e.jsx(l,{type:"number",value:s.maxSizeInMegabytes,onChange:t=>E(a,"maxSizeInMegabytes",Number(t.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Message TTL (seconds)"}),e.jsx(l,{type:"number",value:s.defaultMessageTimeToLive,onChange:t=>E(a,"defaultMessageTimeToLive",Number(t.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Lock Duration (seconds)"}),e.jsx(l,{type:"number",value:s.lockDuration,onChange:t=>E(a,"lockDuration",Number(t.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Max Delivery Count"}),e.jsx(l,{type:"number",value:s.maxDeliveryCount,onChange:t=>E(a,"maxDeliveryCount",Number(t.target.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable Sessions"}),e.jsx(b,{checked:s.enableSessions,onCheckedChange:t=>E(a,"enableSessions",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable Partitioning"}),e.jsx(b,{checked:s.enablePartitioning,onCheckedChange:t=>E(a,"enablePartitioning",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Dead Letter on Expiration"}),e.jsx(b,{checked:s.enableDeadLetteringOnMessageExpiration,onCheckedChange:t=>E(a,"enableDeadLetteringOnMessageExpiration",t)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable Duplicate Detection"}),e.jsx(b,{checked:s.enableDuplicateDetection||!1,onCheckedChange:t=>E(a,"enableDuplicateDetection",t)})]}),s.enableDuplicateDetection&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Duplicate Detection Window (seconds)"}),e.jsx(l,{type:"number",value:s.duplicateDetectionHistoryTimeWindow||600,onChange:t=>E(a,"duplicateDetectionHistoryTimeWindow",Number(t.target.value)),placeholder:"600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Forward To (queue/topic name)"}),e.jsx(l,{value:s.forwardTo||"",onChange:t=>E(a,"forwardTo",t.target.value||void 0),placeholder:"destination-queue-or-topic"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable Batched Operations"}),e.jsx(b,{checked:s.enableBatchedOperations||!1,onCheckedChange:t=>E(a,"enableBatchedOperations",t)})]})]})]})]},a))})})]})}),e.jsx(Z,{value:"topics",className:"space-y-4",children:e.jsxs(h,{children:[e.jsx(A,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(P,{children:"Topics"}),e.jsx(G,{children:"Configure publish-subscribe topics with subscriptions"})]}),e.jsxs(d,{onClick:Je,size:"sm",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Create Topic"]})]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:C.map((s,a)=>e.jsxs(h,{className:"border-l-4 border-l-green-500",children:[e.jsx(A,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(c,{children:"Topic Name"}),e.jsx(l,{value:s.name,onChange:t=>L(a,"name",t.target.value),placeholder:"topic-name",className:ee[a]?"border-destructive":""}),ee[a]&&e.jsx(Ie,{variant:"destructive",className:"mt-2",children:e.jsx(Oe,{children:ee[a]})})]}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>Xe(a),disabled:C.length===1,className:"ml-4",children:e.jsx(Q,{className:"h-4 w-4"})})]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Max Size (MB)"}),e.jsx(l,{type:"number",value:s.maxSizeInMegabytes,onChange:t=>L(a,"maxSizeInMegabytes",Number(t.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Message TTL (seconds)"}),e.jsx(l,{type:"number",value:s.defaultMessageTimeToLive,onChange:t=>L(a,"defaultMessageTimeToLive",Number(t.target.value))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable Partitioning"}),e.jsx(b,{checked:s.enablePartitioning,onCheckedChange:t=>L(a,"enablePartitioning",t)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable Duplicate Detection"}),e.jsx(b,{checked:s.enableDuplicateDetection||!1,onCheckedChange:t=>L(a,"enableDuplicateDetection",t)})]}),s.enableDuplicateDetection&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Duplicate Detection Window (seconds)"}),e.jsx(l,{type:"number",value:s.duplicateDetectionHistoryTimeWindow||600,onChange:t=>L(a,"duplicateDetectionHistoryTimeWindow",Number(t.target.value)),placeholder:"600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Forward To (queue/topic name)"}),e.jsx(l,{value:s.forwardTo||"",onChange:t=>L(a,"forwardTo",t.target.value||void 0),placeholder:"destination-queue-or-topic"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable Batched Operations"}),e.jsx(b,{checked:s.enableBatchedOperations||!1,onCheckedChange:t=>L(a,"enableBatchedOperations",t)})]})]}),e.jsx(B,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(c,{children:["Subscriptions (",s.subscriptions?.length||0,")"]}),e.jsxs(d,{size:"sm",variant:"outline",onClick:()=>Ze(a),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Subscription"]})]}),s.subscriptions&&s.subscriptions.length>0?e.jsx("div",{className:"space-y-4",children:s.subscriptions.map((t,n)=>e.jsx(h,{className:"p-4 border-l-4 border-l-purple-500",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(c,{children:"Subscription Name"}),e.jsx(l,{value:t.name,onChange:i=>D(a,n,"name",i.target.value),placeholder:"subscription-name",className:_[`${a}-${n}`]?"border-destructive":""}),_[`${a}-${n}`]&&e.jsx(Ie,{variant:"destructive",className:"mt-2",children:e.jsx(Oe,{children:_[`${a}-${n}`]})})]}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>Ge(a,n),className:"ml-4",children:e.jsx(Q,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Active Messages"}),e.jsx("p",{className:"text-lg font-semibold",children:t.activeMessageCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Dead Letter"}),e.jsx("p",{className:"text-lg font-semibold",children:t.deadLetterMessageCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Deferred"}),e.jsx("p",{className:"text-lg font-semibold",children:t.deferredMessageCount||0})]})]}),e.jsx(B,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Lock Duration (seconds)"}),e.jsx(l,{type:"number",value:t.lockDuration,onChange:i=>D(a,n,"lockDuration",Number(i.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Max Delivery Count"}),e.jsx(l,{type:"number",value:t.maxDeliveryCount,onChange:i=>D(a,n,"maxDeliveryCount",Number(i.target.value))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Dead Letter on Expiration"}),e.jsx(b,{checked:t.enableDeadLetteringOnMessageExpiration,onCheckedChange:i=>D(a,n,"enableDeadLetteringOnMessageExpiration",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Requires Session"}),e.jsx(b,{checked:t.requiresSession||!1,onCheckedChange:i=>D(a,n,"requiresSession",i)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Forward To (queue/topic name)"}),e.jsx(l,{value:t.forwardTo||"",onChange:i=>D(a,n,"forwardTo",i.target.value||void 0),placeholder:"destination-queue-or-topic"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{children:"Enable Batched Operations"}),e.jsx(b,{checked:t.enableBatchedOperations||!1,onCheckedChange:i=>D(a,n,"enableBatchedOperations",i)})]}),e.jsx(B,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(c,{children:["Rules/Filters (",(t.rules||[]).length,")"]}),e.jsxs(d,{size:"sm",variant:"outline",onClick:()=>{const i=t.rules||[],r={name:`rule-${i.length+1}`,filterType:"SQL",sqlFilter:""};D(a,n,"rules",[...i,r])},children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Rule"]})]}),t.rules&&t.rules.length>0?e.jsx("div",{className:"space-y-2",children:t.rules.map((i,r)=>e.jsx(h,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{value:i.name,onChange:g=>{const m=[...t.rules||[]];m[r]={...i,name:g.target.value},D(a,n,"rules",m)},placeholder:"Rule name",className:"flex-1 mr-2"}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>{const g=(t.rules||[]).filter((m,ve)=>ve!==r);D(a,n,"rules",g)},children:e.jsx(Q,{className:"h-4 w-4"})})]}),e.jsxs(q,{value:i.filterType,onValueChange:g=>{const m=[...t.rules||[]];m[r]={...i,filterType:g},D(a,n,"rules",m)},children:[e.jsx(I,{children:e.jsx(O,{})}),e.jsxs($,{children:[e.jsx(o,{value:"SQL",children:"SQL Filter"}),e.jsx(o,{value:"Correlation",children:"Correlation Filter"})]})]}),i.filterType==="SQL"&&e.jsx(qe,{value:i.sqlFilter||"",onChange:g=>{const m=[...t.rules||[]];m[r]={...i,sqlFilter:g.target.value},D(a,n,"rules",m)},placeholder:"SQL filter expression, e.g., user.type = 'premium'",rows:2}),i.filterType==="Correlation"&&e.jsx("div",{className:"space-y-2",children:e.jsx(l,{value:i.correlationFilter?.correlationId||"",onChange:g=>{const m=[...t.rules||[]];m[r]={...i,correlationFilter:{...i.correlationFilter,correlationId:g.target.value}},D(a,n,"rules",m)},placeholder:"Correlation ID"})})]})},r))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-2",children:"No rules (all messages will be delivered)"})]})]})},n))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No subscriptions"})]})]})]},a))})})]})}),e.jsx(Z,{value:"networking",className:"space-y-4",children:e.jsxs(h,{children:[e.jsxs(A,{children:[e.jsx(P,{children:"Networking Settings"}),e.jsx(G,{children:"Configure network access and firewall rules for Azure Service Bus namespace"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Public Network Access"}),e.jsxs(q,{value:u.publicNetworkAccess||"enabled",onValueChange:s=>z({publicNetworkAccess:s}),children:[e.jsx(I,{children:e.jsx(O,{})}),e.jsxs($,{children:[e.jsx(o,{value:"enabled",children:"Enabled"}),e.jsx(o,{value:"disabled",children:"Disabled"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow public network access to the Service Bus namespace"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Minimum TLS Version"}),e.jsxs(q,{value:u.minimumTlsVersion||"1.2",onValueChange:s=>z({minimumTlsVersion:s}),children:[e.jsx(I,{children:e.jsx(O,{})}),e.jsxs($,{children:[e.jsx(o,{value:"1.0",children:"TLS 1.0"}),e.jsx(o,{value:"1.1",children:"TLS 1.1"}),e.jsx(o,{value:"1.2",children:"TLS 1.2"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum TLS version required for connections"})]}),e.jsx(B,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Firewall Rules"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"IP address ranges allowed to access the namespace"})]}),e.jsxs(d,{onClick:es,size:"sm",variant:"outline",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Rule"]})]}),u.firewallRules&&u.firewallRules.length>0?e.jsx("div",{className:"space-y-2",children:u.firewallRules.map((s,a)=>e.jsx(h,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Name"}),e.jsx(l,{value:s.name,onChange:t=>Re(a,"name",t.target.value),placeholder:"rule-name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"IP Range (CIDR)"}),e.jsx(l,{value:s.ipRange,onChange:t=>Re(a,"ipRange",t.target.value),placeholder:"10.0.0.0/8"})]})]}),e.jsx(d,{onClick:()=>ss(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(Q,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No firewall rules configured"})]}),e.jsx(B,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Virtual Network Rules"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow access from specific Azure subnets"})]}),e.jsxs(d,{onClick:as,size:"sm",variant:"outline",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Rule"]})]}),u.virtualNetworkRules&&u.virtualNetworkRules.length>0?e.jsx("div",{className:"space-y-2",children:u.virtualNetworkRules.map((s,a)=>e.jsx(h,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Name"}),e.jsx(l,{value:s.name,onChange:t=>Le(a,"name",t.target.value),placeholder:"vnet-rule-name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Subnet Resource ID"}),e.jsx(l,{value:s.subnetId,onChange:t=>Le(a,"subnetId",t.target.value),placeholder:"/subscriptions/.../subnets/..."})]})]}),e.jsx(d,{onClick:()=>ts(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(Q,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No virtual network rules configured"})]}),e.jsx(B,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Private Endpoints"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Private endpoints for secure access from VNets"})]}),e.jsxs(d,{onClick:ns,size:"sm",variant:"outline",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Endpoint"]})]}),u.privateEndpoints&&u.privateEndpoints.length>0?e.jsx("div",{className:"space-y-2",children:u.privateEndpoints.map((s,a)=>e.jsx(h,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Name"}),e.jsx(l,{value:s.name,onChange:t=>ze(a,"name",t.target.value),placeholder:"private-endpoint-name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Subnet Resource ID"}),e.jsx(l,{value:s.subnetId,onChange:t=>ze(a,"subnetId",t.target.value),placeholder:"/subscriptions/.../subnets/..."})]})]}),e.jsx(d,{onClick:()=>is(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(Q,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No private endpoints configured"})]})]})]})}),e.jsx(Z,{value:"security",className:"space-y-4",children:e.jsxs(h,{children:[e.jsxs(A,{children:[e.jsx(P,{children:"Security Settings"}),e.jsx(G,{children:"Configure authentication and authorization for Azure Service Bus namespace"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Shared Access Signatures (SAS) Policies"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"SAS policies for connection string authentication"})]}),e.jsxs(d,{onClick:cs,size:"sm",variant:"outline",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Policy"]})]}),p.sasPolicies&&p.sasPolicies.length>0?e.jsx("div",{className:"space-y-2",children:p.sasPolicies.map((s,a)=>e.jsx(h,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Policy Name"}),e.jsx(l,{value:s.name,onChange:t=>Be(a,"name",t.target.value),placeholder:"policy-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-xs",children:"Permissions"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{checked:s.permissions?.includes("Send")||!1,onCheckedChange:()=>Me(a,"Send")}),e.jsx(c,{className:"text-xs",children:"Send"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{checked:s.permissions?.includes("Listen")||!1,onCheckedChange:()=>Me(a,"Listen")}),e.jsx(c,{className:"text-xs",children:"Listen"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{checked:s.permissions?.includes("Manage")||!1,onCheckedChange:()=>Me(a,"Manage")}),e.jsx(c,{className:"text-xs",children:"Manage"})]})]})]})]}),e.jsx(d,{onClick:()=>rs(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(Q,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No SAS policies configured"})]}),e.jsx(B,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Role-Based Access Control (RBAC)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Azure RBAC role assignments"})]}),e.jsxs(d,{onClick:ls,size:"sm",variant:"outline",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Assignment"]})]}),p.rbacAssignments&&p.rbacAssignments.length>0?e.jsx("div",{className:"space-y-2",children:p.rbacAssignments.map((s,a)=>e.jsx(h,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Principal ID"}),e.jsx(l,{value:s.principalId,onChange:t=>Pe(a,"principalId",t.target.value),placeholder:"User/Service Principal ID"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Role"}),e.jsxs(q,{value:s.role,onValueChange:t=>Pe(a,"role",t),children:[e.jsx(I,{children:e.jsx(O,{})}),e.jsxs($,{children:[e.jsx(o,{value:"Owner",children:"Owner"}),e.jsx(o,{value:"Contributor",children:"Contributor"}),e.jsx(o,{value:"Reader",children:"Reader"}),e.jsx(o,{value:"Azure Service Bus Data Owner",children:"Data Owner"}),e.jsx(o,{value:"Azure Service Bus Data Receiver",children:"Data Receiver"}),e.jsx(o,{value:"Azure Service Bus Data Sender",children:"Data Sender"})]})]})]})]}),e.jsx(d,{onClick:()=>ds(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(Q,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No RBAC assignments configured"})]}),e.jsx(B,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Managed Identities"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"System-assigned or user-assigned managed identities"})]}),e.jsxs(d,{onClick:os,size:"sm",variant:"outline",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Identity"]})]}),p.managedIdentities&&p.managedIdentities.length>0?e.jsx("div",{className:"space-y-2",children:p.managedIdentities.map((s,a)=>e.jsx(h,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Name"}),e.jsx(l,{value:s.name,onChange:t=>Te(a,"name",t.target.value),placeholder:"identity-name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Type"}),e.jsxs(q,{value:s.type,onValueChange:t=>Te(a,"type",t),children:[e.jsx(I,{children:e.jsx(O,{})}),e.jsxs($,{children:[e.jsx(o,{value:"SystemAssigned",children:"System Assigned"}),e.jsx(o,{value:"UserAssigned",children:"User Assigned"})]})]})]}),s.type==="UserAssigned"&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{className:"text-xs",children:"Principal ID"}),e.jsx(l,{value:s.principalId||"",onChange:t=>Te(a,"principalId",t.target.value),placeholder:"Principal ID"})]})]}),e.jsx(d,{onClick:()=>us(a),size:"sm",variant:"ghost",className:"mt-6",children:e.jsx(Q,{className:"h-4 w-4"})})]})})},a))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No managed identities configured"})]})]})]})}),e.jsx(Z,{value:"connection",className:"space-y-4",children:e.jsxs(h,{children:[e.jsxs(A,{children:[e.jsx(P,{children:"Connection Settings"}),e.jsx(G,{children:"Azure Service Bus connection string"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Namespace"}),e.jsx(l,{value:de,onChange:s=>T({namespace:s.target.value}),placeholder:"my-namespace.servicebus.windows.net"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Connection String"}),e.jsx(qe,{value:We,onChange:s=>T({connectionString:s.target.value}),placeholder:"Endpoint=sb://...",rows:4})]})]})]})}),e.jsx(Z,{value:"messages",className:"space-y-4",children:e.jsxs(h,{children:[e.jsxs(A,{children:[e.jsx(P,{children:"Message Explorer"}),e.jsx(G,{children:"View and manage messages in queues and subscriptions"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Entity Type"}),e.jsxs(q,{value:x,onValueChange:s=>{He(s),Ae(""),Ee(""),we("")},children:[e.jsx(I,{children:e.jsx(O,{})}),e.jsxs($,{children:[e.jsx(o,{value:"queue",children:"Queue"}),e.jsx(o,{value:"subscription",children:"Subscription"})]})]})]}),x==="queue"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Queue"}),e.jsxs(q,{value:f,onValueChange:Ae,children:[e.jsx(I,{children:e.jsx(O,{placeholder:"Select queue"})}),e.jsx($,{children:R.map(s=>e.jsx(o,{value:s.name,children:s.name},s.name))})]})]}),x==="subscription"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Topic"}),e.jsxs(q,{value:j,onValueChange:s=>{Ee(s),we("")},children:[e.jsx(I,{children:e.jsx(O,{placeholder:"Select topic"})}),e.jsx($,{children:C.map(s=>e.jsx(o,{value:s.name,children:s.name},s.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Subscription"}),e.jsxs(q,{value:y,onValueChange:we,disabled:!j,children:[e.jsx(I,{children:e.jsx(O,{placeholder:"Select subscription"})}),e.jsx($,{children:j&&C.find(s=>s.name===j)?.subscriptions?.map(s=>e.jsx(o,{value:s.name,children:s.name},s.name))})]})]})]})]}),x==="queue"&&f||x==="subscription"&&j&&y?e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{checked:J,onCheckedChange:s=>{ue(s),s&&(me(!1),xe(!1),je(!1))}}),e.jsx(c,{children:"Show Dead Letter Queue"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{checked:te,onCheckedChange:s=>{me(s),s&&(ue(!1),xe(!1),je(!1))}}),e.jsx(c,{children:"Show Deferred"})]}),x==="queue"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{checked:he,onCheckedChange:s=>{xe(s),s&&(ue(!1),me(!1),je(!1))}}),e.jsx(c,{children:"Show Scheduled"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{checked:ne,onCheckedChange:s=>{je(s),s&&(ue(!1),me(!1),xe(!1))}}),e.jsx(c,{children:"Show Locked"})]}),e.jsxs(d,{size:"sm",variant:"outline",onClick:W,className:"ml-auto",children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Search Messages"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ts,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(l,{value:ge,onChange:s=>Ue(s.target.value),placeholder:"Search by message ID, properties, or body...",className:"pl-8"})]})]}),e.jsx("div",{className:"border rounded-lg",children:e.jsxs(Rs,{children:[e.jsx(Ls,{children:e.jsxs(De,{children:[e.jsx(Y,{children:"Message ID"}),e.jsx(Y,{children:"Sequence #"}),e.jsx(Y,{children:"Enqueued Time"}),e.jsx(Y,{children:"Size"}),e.jsx(Y,{children:"Delivery Count"}),e.jsx(Y,{children:"Status"}),e.jsx(Y,{children:"Actions"})]})}),e.jsx(zs,{children:pe.length===0?e.jsx(De,{children:e.jsx(K,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No messages found"})}):pe.map(s=>e.jsxs(De,{children:[e.jsx(K,{className:"font-mono text-xs",children:s.messageId||s.id}),e.jsx(K,{children:s.sequenceNumber||"-"}),e.jsx(K,{children:new Date(s.enqueuedTime||s.timestamp).toLocaleString()}),e.jsxs(K,{children:[(s.size||0).toLocaleString()," bytes"]}),e.jsx(K,{children:s.deliveryCount||0}),e.jsx(K,{children:s.lockedUntil?e.jsxs(ce,{variant:"outline",className:"text-orange-600",children:[e.jsx(Ve,{className:"h-3 w-3 mr-1"}),"Locked"]}):s.isDeferred?e.jsx(ce,{variant:"outline",className:"text-blue-600",children:"Deferred"}):J?e.jsx(ce,{variant:"destructive",children:"Dead Letter"}):e.jsx(ce,{variant:"outline",children:"Active"})}),e.jsx(K,{children:e.jsx("div",{className:"flex items-center gap-1",children:J?e.jsxs(e.Fragment,{children:[e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>ps(s.id||s.messageId),title:"Resubmit",children:e.jsx(Ds,{className:"h-3 w-3"})}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>gs(s.id||s.messageId),title:"Delete",children:e.jsx(Q,{className:"h-3 w-3"})})]}):s.lockToken?e.jsxs(e.Fragment,{children:[e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>ms(s.lockToken),title:"Complete",children:e.jsx(Qs,{className:"h-3 w-3 text-green-600"})}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>hs(s.lockToken),title:"Abandon",children:e.jsx(As,{className:"h-3 w-3 text-orange-600"})}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>xs(s.lockToken),title:"Defer",children:e.jsx(Ve,{className:"h-3 w-3 text-blue-600"})}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>js(s.lockToken),title:"Send to Dead Letter",children:e.jsx(Es,{className:"h-3 w-3 text-red-600"})})]}):null})})]},s.id||s.messageId))})]})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Showing ",pe.length," message",pe.length!==1?"s":""]})]}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Select an entity to view messages"})]})]})})]})]})})}export{Zs as AzureServiceBusConfigAdvanced};

import{E as W,u as X,j as e,r as j,i as b,S as V,C as l,e as r,f as i,k as c,A as B,Z as K,T as Q,a as Y,b as p,N as I,c as ee,d as g,h as v,L as a,n as O,o as q,p as A,q as D,s as E,B as d,ah as se,I as N,t as F}from"./index-CD9wK6fJ.js";import{T as R}from"./textarea-CYvenaNX.js";import{R as ae}from"./refresh-ccw-DMG2e9Iw.js";import{D as te}from"./database-DHEgmobG.js";import{C as ne}from"./circle-check-big-CySaohmn.js";const le=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],y=W("brain",le);function oe({componentId:w}){const{nodes:$,updateNode:H}=X(),f=$.find(s=>s.id===w);if(!f)return e.jsx("div",{className:"p-4 text-muted-foreground",children:"Component not found"});const o=f.data.config||{},n=o.models||[],h=o.predictions||[],S=o.endpoint||"localhost:8501",z=o.totalModels||n.length,J=o.totalPredictions||h.length,Z=o.averageLatency||(n.length>0?n.reduce((s,t)=>s+(t.avgLatency||0),0)/n.length:0),[x,_]=j.useState(""),[u,C]=j.useState(""),[k,M]=j.useState(""),[G,T]=j.useState(""),P=s=>{H(w,{data:{...f.data,config:{...o,...s}}})},U=()=>{if(!x||!u)return;const s={id:`pred-${Date.now()}`,model:x,version:u,input:k,output:JSON.stringify({predictions:[[.8,.1,.1]]},null,2),status:"success",timestamp:new Date().toISOString(),latency:Math.floor(Math.random()*50)+20};T(s.output||""),P({predictions:[...h,s]})},L=s=>{switch(s){case"serving":return"bg-green-500";case"loading":return"bg-yellow-500";case"unavailable":return"bg-red-500";default:return"bg-gray-500"}};return e.jsx("div",{className:"h-full overflow-y-auto bg-background",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"TensorFlow Serving"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Model Serving"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"High-performance serving system for machine learning models"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),e.jsx(V,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(l,{className:"border-l-4 border-l-blue-500 bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Models"}),e.jsx(y,{className:"h-4 w-4 text-blue-500"})]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:z}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"serving"})]})})]}),e.jsxs(l,{className:"border-l-4 border-l-green-500 bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Predictions"}),e.jsx(B,{className:"h-4 w-4 text-green-500"})]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:J}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"total"})]})})]}),e.jsxs(l,{className:"border-l-4 border-l-purple-500 bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Avg Latency"}),e.jsx(K,{className:"h-4 w-4 text-purple-500"})]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:Z.toFixed(0)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"ms"})]})})]}),e.jsxs(l,{className:"border-l-4 border-l-cyan-500 bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Endpoint"}),e.jsx(te,{className:"h-4 w-4 text-cyan-500"})]})}),e.jsx(c,{children:e.jsx("div",{className:"text-sm font-semibold text-cyan-600 dark:text-cyan-400 truncate",children:S})})]})]}),e.jsxs(Q,{defaultValue:"test",className:"space-y-4",children:[e.jsxs(Y,{children:[e.jsxs(p,{value:"test",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Test Prediction"]}),e.jsxs(p,{value:"models",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Models (",n.length,")"]}),e.jsxs(p,{value:"history",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Prediction History (",h.length,")"]}),e.jsxs(p,{value:"settings",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(g,{value:"test",className:"space-y-4",children:e.jsxs(l,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Model Prediction"}),e.jsx(v,{children:"Test model inference"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Model"}),e.jsxs(O,{value:x,onValueChange:s=>{_(s);const t=n.find(m=>m.name===s);t&&C(t.version)},children:[e.jsx(q,{children:e.jsx(A,{placeholder:"Select model"})}),e.jsx(D,{children:n.map(s=>e.jsx(E,{value:s.name,children:s.name},s.name))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Version"}),e.jsxs(O,{value:u,onValueChange:C,children:[e.jsx(q,{children:e.jsx(A,{placeholder:"Select version"})}),e.jsx(D,{children:x&&n.find(s=>s.name===x)&&e.jsx(E,{value:n.find(s=>s.name===x).version,children:n.find(s=>s.name===x).version})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Input (JSON)"}),e.jsx(R,{value:k,onChange:s=>M(s.target.value),className:"font-mono text-sm min-h-[200px]",placeholder:'{ "instances": [...] }'})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Output"}),e.jsx(R,{value:G,readOnly:!0,className:"font-mono text-sm min-h-[200px] bg-muted",placeholder:"Prediction result will appear here..."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{onClick:U,disabled:!x||!u,children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Run Prediction"]}),e.jsx(b,{variant:"outline",onClick:()=>{M(""),T("")},children:"Clear"})]})]})]})}),e.jsx(g,{value:"models",className:"space-y-4",children:e.jsxs(l,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Models"}),e.jsx(v,{children:"Deployed TensorFlow models"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs(l,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${L(s.status)}/20`,children:e.jsx(y,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(i,{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(d,{variant:"outline",className:L(s.status),children:s.status}),e.jsxs(d,{variant:"outline",children:["v",s.version]}),e.jsx(d,{variant:"outline",children:s.platform}),s.requests&&e.jsxs(d,{variant:"outline",children:[s.requests," requests"]})]})]})]})}),e.jsxs(c,{children:[s.inputs&&s.inputs.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Inputs"}),s.inputs.map((t,m)=>e.jsxs("div",{className:"p-2 border rounded text-sm",children:[e.jsx("span",{className:"font-mono font-semibold",children:t.name}),e.jsx(d,{variant:"outline",className:"ml-2 text-xs",children:t.dtype}),e.jsx(d,{variant:"outline",className:"ml-2 text-xs",children:t.shape})]},m))]}),s.outputs&&s.outputs.length>0&&e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsx(a,{children:"Outputs"}),s.outputs.map((t,m)=>e.jsxs("div",{className:"p-2 border rounded text-sm",children:[e.jsx("span",{className:"font-mono font-semibold",children:t.name}),e.jsx(d,{variant:"outline",className:"ml-2 text-xs",children:t.dtype}),e.jsx(d,{variant:"outline",className:"ml-2 text-xs",children:t.shape})]},m))]}),s.avgLatency&&e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Avg Latency:"}),e.jsxs("span",{className:"ml-2 font-semibold",children:[s.avgLatency,"ms"]})]})]})]},`${s.name}-${s.version}`))})})]})}),e.jsx(g,{value:"history",className:"space-y-4",children:e.jsxs(l,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Prediction History"}),e.jsx(v,{children:"Previously executed predictions"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:h.map(s=>e.jsxs(l,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow bg-card",children:[e.jsx(r,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.status==="success"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:s.status==="success"?e.jsx(ne,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):e.jsx(se,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsxs(i,{className:"text-lg font-semibold",children:[s.model," v",s.version]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.latency&&e.jsxs(d,{variant:"outline",children:[s.latency,"ms"]}),e.jsx(d,{variant:s.status==="success"?"default":"destructive",children:s.status})]})]})]})})}),e.jsxs(c,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.input&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Input"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto max-h-40 overflow-y-auto",children:s.input})]}),s.output&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Output"}),e.jsx("pre",{className:"p-3 bg-muted rounded text-xs font-mono overflow-x-auto max-h-40 overflow-y-auto",children:s.output})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(s.timestamp).toLocaleString()})]})]},s.id))})})]})}),e.jsx(g,{value:"settings",className:"space-y-4",children:e.jsxs(l,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"TensorFlow Serving Settings"}),e.jsx(v,{children:"Server configuration"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Endpoint"}),e.jsx(N,{value:S,onChange:s=>P({endpoint:s.target.value}),placeholder:"localhost:8501"})]}),e.jsx(V,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a,{children:"Enable GPU"}),e.jsx(F,{})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a,{children:"Enable Batching"}),e.jsx(F,{defaultChecked:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Batch Size"}),e.jsx(N,{type:"number",defaultValue:32,min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Max Batch Wait Time (ms)"}),e.jsx(N,{type:"number",defaultValue:100,min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Model Base Path"}),e.jsx(N,{defaultValue:"/models"})]})]})]})})]})]})})}export{oe as TensorFlowServingConfigAdvanced};
